{"file_contents":{"README.md":{"content":"# ğŸ† TeamMove - Plateforme de Covoiturage Sportif\n\n[![Render Deployment](https://img.shields.io/badge/Render-Deployed-brightgreen)](https://teammove.fr)\n[![CI/CD Pipeline](https://github.com/LtheBest/TeamMove/actions/workflows/ci-cd.yml/badge.svg)](https://github.com/LtheBest/TeamMove/actions/workflows/ci-cd.yml)\n[![Docker Hub](https://img.shields.io/docker/pulls/lthebest/TeamMove)](https://hub.docker.com/r/lthebest/TeamMove)\n[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)\n[![Node.js](https://img.shields.io/badge/Node.js-18+-green.svg)](https://nodejs.org)\n[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-Neon-blue.svg)](https://neon.tech)\n\nUne application web moderne pour organiser et gÃ©rer le covoiturage pour les Ã©vÃ©nements sportifs. Permettez Ã  votre organisation sportive de crÃ©er facilement des Ã©vÃ©nements et de faciliter le covoiturage entre les participants.\n\nğŸŒ **[Application en Ligne](https://teammove.fr)** | ğŸ“– **[Guide de DÃ©ploiement Render](RENDER_DEPLOYMENT_GUIDE_V2.md)** | ğŸ§ª **[Tests de SantÃ©](https://teammove.fr/api/health)**\n\n## âœ¨ FonctionnalitÃ©s\n\n### ğŸ¯ Gestion d'Ã‰vÃ©nements\n- âœ… **CrÃ©ation d'Ã©vÃ©nements** avec tous les dÃ©tails (date, lieu, sport, etc.)\n- âœ… **Inscription en ligne** des participants (conducteurs et passagers)\n- âœ… **Vue publique** des Ã©vÃ©nements avec informations dÃ©taillÃ©es\n- âœ… **Statistiques en temps rÃ©el** du covoiturage\n- âœ… **SystÃ¨me de rappels** automatiques par email\n\n### ğŸ’¬ Communication\n- âœ… **Messagerie intÃ©grÃ©e** pour les organisateurs\n- âœ… **Notifications email** automatiques\n- âœ… **RÃ©ponses par email** - Les participants peuvent rÃ©pondre directement depuis leur email\n- âœ… **Templates d'email** personnalisÃ©s et professionnels\n\n### ğŸš— Covoiturage Intelligent\n- âœ… **Matching automatique** conducteurs/passagers\n- âœ… **Gestion des places** disponibles\n- âœ… **Calcul automatique** de l'occupation des vÃ©hicules\n- âœ… **Optimisation des trajets** par IA\n\n### ğŸ›¡ï¸ QualitÃ© & SÃ©curitÃ©\n- âœ… **Linting ESLint** avec TypeScript\n- âœ… **Formatage Prettier** automatique\n- âœ… **Hooks pre-commit** avec Husky\n- âœ… **Validation des commits** avec commitlint\n- âœ… **Tests automatisÃ©s** (unitaires et E2E)\n\n### ğŸš€ DÃ©ploiement & DevOps\n- âœ… **CI/CD GitHub Actions** complet\n- âœ… **Containerisation Docker** prÃªte pour la production\n- âœ… **DÃ©ploiement Vercel** en un clic\n- âœ… **Configuration VPS** avec Docker Compose\n- âœ… **Monitoring & Health checks**\n\n## ğŸ¬ DÃ©mo\n\n[ğŸŒ **DÃ©mo en ligne**](https://TeamMove.vercel.app) | [ğŸ“± **Version mobile**](https://TeamMove.vercel.app)\n\n## ğŸš€ DÃ©marrage rapide\n\n### PrÃ©requis\n- Node.js 18+\n- PostgreSQL\n- Compte SendGrid (pour les emails)\n\n### Installation locale\n\n```bash\n# Cloner le repository\ngit clone https://github.com/LtheBest/TeamMove.git\ncd TeamMove\n\n# Installer les dÃ©pendances\nnpm install\n\n# Configurer les variables d'environnement\ncp .env.example .env\n# Ã‰ditez .env avec vos configurations\n\n# Initialiser la base de donnÃ©es\nnpm run db:push\n\n# DÃ©marrer en mode dÃ©veloppement\nnpm run dev\n```\n\nL'application sera accessible sur https://teammove.fr\n\n### Avec Docker\n\n```bash\n# Build et dÃ©marrage avec Docker Compose\ndocker-compose up -d\n\n# Ou utilisation de l'image Docker Hub\ndocker pull lthebest/TeamMove:latest\ndocker run -p 3000:3000 lthebest/TeamMove:latest\n```\n\n## ğŸ—ï¸ Architecture\n\n```\nTeamMove/\nâ”œâ”€â”€ client/                 # Frontend React + TypeScript\nâ”‚   â”œâ”€â”€ src/\nâ”‚   â”‚   â”œâ”€â”€ components/    # Composants rÃ©utilisables\nâ”‚   â”‚   â”œâ”€â”€ pages/         # Pages de l'application\nâ”‚   â”‚   â””â”€â”€ lib/           # Utilitaires et configuration\nâ”œâ”€â”€ server/                # Backend Express + TypeScript\nâ”‚   â”œâ”€â”€ routes.ts          # Routes API\nâ”‚   â”œâ”€â”€ email.ts           # Service d'emails\nâ”‚   â”œâ”€â”€ storage.ts         # Couche d'accÃ¨s aux donnÃ©es\nâ”‚   â””â”€â”€ openai.ts          # Integration IA\nâ”œâ”€â”€ shared/                # Types et schÃ©mas partagÃ©s\nâ”œâ”€â”€ tests/                 # Tests automatisÃ©s\nâ”œâ”€â”€ .github/workflows/     # CI/CD GitHub Actions\nâ””â”€â”€ docker-compose.yml     # Configuration Docker\n```\n\n## ğŸ› ï¸ Technologies\n\n### Frontend\n- **React 18** avec TypeScript\n- **Vite** pour le build rapide\n- **Tailwind CSS** pour le styling\n- **Radix UI** pour les composants accessibles\n- **React Query** pour la gestion d'Ã©tat serveur\n\n### Backend\n- **Express.js** avec TypeScript\n- **Drizzle ORM** pour la base de donnÃ©es\n- **PostgreSQL** comme base de donnÃ©es\n- **SendGrid** pour les emails\n- **OpenAI** pour l'IA\n\n### DevOps & QualitÃ©\n- **ESLint + Prettier** pour la qualitÃ© du code\n- **Husky + commitlint** pour les hooks Git\n- **Vitest** pour les tests unitaires\n- **Playwright** pour les tests E2E\n- **Docker** pour la containerisation\n- **GitHub Actions** pour CI/CD\n- **Render.com** pour le dÃ©ploiement en production\n\n## ğŸ§ª Tests et Diagnostic\n\n### Tests AutomatisÃ©s de DÃ©ploiement\n```bash\n# Tester votre dÃ©ploiement Render\nnode test-render-deployment.js https://teammove.fr\n\n# Tests locaux\nnpm run test:all            # Tous les tests (unitaires + E2E)\n```\n\n### Endpoints de Diagnostic\n```bash\n# SantÃ© gÃ©nÃ©rale de l'application\ncurl https://teammove.fr/api/health\n\n# Test de connexion base de donnÃ©es\ncurl https://teammove.fr/api/db-test\n\n# Test des sessions (authentification)\ncurl https://teammove.fr/api/session-test\n\n# Communication backend\ncurl https://teammove.fr/api/test\n\n# Debug utilisateurs (dev seulement)\ncurl https://teammove.fr/api/debug/users\n```\n\n### Monitoring en Temps RÃ©el\n- ğŸŸ¢ **Status**: [https://teammove.fr/api/health](https://teammove.fr/api/health)\n- ğŸ’¾ **Database**: [https://teammove.fr/api/db-test](https://teammove.fr/api/db-test)\n- ğŸ“Š **Performance**: Consultez les logs Render Dashboard\n\n## ğŸ“Š Scripts disponibles\n\n```bash\n# DÃ©veloppement\nnpm run dev              # DÃ©marrer en mode dÃ©veloppement\nnpm run build           # Build pour la production\nnpm run start           # DÃ©marrer en mode production\n\n# QualitÃ© du code\nnpm run lint            # VÃ©rification ESLint\nnpm run lint:fix        # Correction automatique ESLint\nnpm run format          # Formatage Prettier\nnpm run format:check    # VÃ©rification du formatage\nnpm run quality         # Tous les checks qualitÃ©\n\n# Tests\nnpm run test            # Tests unitaires\nnpm run test:e2e        # Tests end-to-end\nnpm run test:all        # Tous les tests\n\n# Base de donnÃ©es\nnpm run db:push         # Synchroniser le schÃ©ma DB\n\n# Docker\n./scripts/docker-build.sh [tag]  # Build et push Docker\n```\n\n## ğŸŒ DÃ©ploiement\n\n### DÃ©ploiement automatique\n\nL'application se dÃ©ploie automatiquement via GitHub Actions :\n- **Push sur `develop`** : Tests et vÃ©rifications\n- **Push sur `main`** : DÃ©ploiement complet (Vercel + VPS)\n\n### DÃ©ploiement manuel\n\nConsultez le [Guide de dÃ©ploiement dÃ©taillÃ©](./DEPLOYMENT.md) pour :\n- ğŸŒ **Vercel** (gratuit, recommandÃ©)\n- ğŸ–¥ï¸ **VPS avec Docker** (Oracle Cloud, AWS, GCP)\n- âš™ï¸ **Configuration des variables d'environnement**\n- ğŸ” **Configuration SSL**\n\n## ğŸ”§ Configuration\n\n### Variables d'environnement\n\n```bash\n# Application\nNODE_ENV=production\nAPP_URL=https://votre-domaine.com\n\n# Base de donnÃ©es\nDATABASE_URL=postgresql://user:password@host:5432/database\n\n# SÃ©curitÃ©\nSESSION_SECRET=votre-secret-tres-long-et-securise\n\n# Email (SendGrid)\nSENDGRID_API_KEY=SG.your-api-key\nSENDGRID_FROM_EMAIL=noreply@votre-domaine.com\nSENDGRID_FROM_NAME=TeamMove\n\n# IA (Optionnel)\nOPENAI_API_KEY=sk-your-openai-key\n```\n\n## ğŸ¤ Contribution\n\nNous accueillons les contributions ! Voici comment participer :\n\n1. **Fork** le projet\n2. **CrÃ©ez une branche** pour votre fonctionnalitÃ© (`git checkout -b feature/amazing-feature`)\n3. **Committez** vos changements (`git commit -m 'feat: add amazing feature'`)\n4. **Push** sur la branche (`git push origin feature/amazing-feature`)\n5. **Ouvrez une Pull Request**\n\n### Standards de contribution\n\n- âœ… Respecter les conventions de commit ([Conventional Commits](https://www.conventionalcommits.org/))\n- âœ… Tous les tests doivent passer\n- âœ… Code coverage > 80%\n- âœ… Documentation mise Ã  jour\n\n## ğŸ“ Licence\n\nCe projet est sous licence MIT. Voir le fichier [LICENSE](LICENSE) pour plus de dÃ©tails.\n\n## ğŸ†˜ Support\n\n- ğŸ“– **Documentation** : [Guide de dÃ©ploiement](./DEPLOYMENT.md)\n- ğŸ› **Bugs** : [Issues GitHub](https://github.com/LtheBest/TeamMove/issues)\n- ğŸ’¬ **Questions** : [Discussions GitHub](https://github.com/LtheBest/TeamMove/discussions)\n- ğŸ“§ **Email** : support@TeamMove.app\n\n## ğŸ¯ Roadmap\n\n### Version 2.0 (Ã€ venir)\n- [ ] Application mobile (React Native)\n- [ ] Notifications push\n- [ ] Paiements en ligne\n- [ ] API publique\n- [ ] Multi-tenancy\n\n### Version 1.5 (En cours)\n- [x] SystÃ¨me de rÃ©ponse par email\n- [x] CI/CD complet\n- [x] Containerisation Docker\n- [ ] Mode sombre\n- [ ] Internationalisation (i18n)\n\n## ğŸ“Š Statistiques\n\n![GitHub stars](https://img.shields.io/github/stars/LtheBest/TeamMove?style=social)\n![GitHub forks](https://img.shields.io/github/forks/LtheBest/TeamMove?style=social)\n![GitHub issues](https://img.shields.io/github/issues/LtheBest/TeamMove)\n![GitHub pull requests](https://img.shields.io/github/issues-pr/LtheBest/TeamMove)\n\n---\n\n<div align=\"center\">\n  <p>Fait avec â¤ï¸ pour la communautÃ© sportive</p>\n  <p>\n    <a href=\"https://github.com/LtheBest/TeamMove\">â­ Star ce projet</a> â€¢\n    <a href=\"https://github.com/LtheBest/TeamMove/fork\">ğŸ´ Fork</a> â€¢\n    <a href=\"https://teammove.fr\">ğŸŒ DÃ©mo</a>\n  </p>\n</div>","size_bytes":9814},"RENDER_DEPLOYMENT_GUIDE.md":{"content":"# ğŸš€ Guide de DÃ©ploiement TeamMove sur Render\n\n## ğŸ¯ Vue d'ensemble\n\nCe guide vous accompagne pour dÃ©ployer TeamMove sur Render.com, une plateforme moderne et gratuite pour hÃ©berger des applications web fullstack.\n\n## âœ… PrÃ©requis\n\n- Compte GitHub avec accÃ¨s au repository TeamMove\n- Compte Render.com (gratuit)\n- Base de donnÃ©es PostgreSQL configurÃ©e (Neon ou Render PostgreSQL)\n- ClÃ©s API configurÃ©es (SendGrid, OpenAI)\n\n## ğŸ“‹ Ã‰tapes de DÃ©ploiement\n\n### 1. ğŸ”§ PrÃ©paration du Code\n\n```bash\n# VÃ©rifier que vous Ãªtes sur la bonne branche\ngit checkout feature/complete-fixes-and-render-deployment\n\n# Tester le build en local\nnpm run build:render\n\n# VÃ©rifier que les fichiers sont gÃ©nÃ©rÃ©s\nls -la dist/\n```\n\n### 2. ğŸŒ Configuration Render\n\n#### A. CrÃ©ation du Service Web\n\n1. **Connecter le Repository**\n   - Aller sur [Render Dashboard](https://dashboard.render.com)\n   - Cliquer \"New +\" â†’ \"Web Service\"\n   - Connecter votre repository GitHub TeamMove\n   - SÃ©lectionner la branche `feature/complete-fixes-and-render-deployment`\n\n2. **Configuration du Service**\n   ```\n   Name: TeamMove-app\n   Region: Frankfurt (plus proche de l'Europe)\n   Branch: feature/complete-fixes-and-render-deployment\n   Root Directory: (laisser vide)\n   Environment: Node\n   Build Command: npm run build:render\n   Start Command: npm start\n   ```\n\n3. **Plan et Options**\n   - Plan: Starter (gratuit)\n   - Auto-Deploy: ActivÃ©\n\n#### B. Configuration des Variables d'Environnement\n\nDans Render Dashboard â†’ votre service â†’ Environment:\n\n```bash\n# Base de donnÃ©es (sera automatiquement configurÃ© si vous utilisez Render PostgreSQL)\nDATABASE_URL=postgresql://username:password@host:port/database\n\n# Configuration SendGrid\nSENDGRID_API_KEY=SG.your-api-key-here\nSENDGRID_FROM_EMAIL=alt.f7-3ywk4mu@yopmail.com\nSENDGRID_FROM_NAME=TeamMove\n\n# Configuration OpenAI (optionnel)\nOPENAI_API_KEY=sk-proj-your-openai-key-here\n\n# Configuration Application\nNODE_ENV=production\nSESSION_SECRET=your-super-secret-session-key-for-render-2024\nAPP_URL=https://TeamMove-app.onrender.com\n\n# Port (gÃ©rÃ© automatiquement par Render)\nPORT=10000\n```\n\n### 3. ğŸ—„ï¸ Configuration Base de DonnÃ©es\n\n#### Option A: Utiliser Render PostgreSQL (RecommandÃ©)\n\n1. **CrÃ©er la Base de DonnÃ©es**\n   - Render Dashboard â†’ \"New +\" â†’ \"PostgreSQL\"\n   - Name: `TeamMove-db`\n   - Database Name: `TeamMove`\n   - User: `TeamMove_user`\n   - Region: MÃªme que votre service web\n   - Plan: Free\n\n2. **Connecter Ã  votre Service**\n   - La variable `DATABASE_URL` sera automatiquement injectÃ©e\n   - Render gÃ¨re les connexions internes automatiquement\n\n#### Option B: Utiliser Neon (Base Actuelle)\n\n1. **Configurer la Variable**\n   ```bash\n   DATABASE_URL=postgresql://neondb_owner:npg_kRUjHg1NJrI5@ep-muddy-violet-afg3rsgr-pooler.c-2.us-west-2.aws.neon.tech/neondb?sslmode=require&channel_binding=require\n   ```\n\n2. **VÃ©rifier la Connexion**\n   - Tester la connexion dans les logs de dÃ©ploiement\n   - Utiliser l'endpoint `/api/health` pour vÃ©rifier\n\n### 4. ğŸš€ DÃ©ploiement\n\n#### DÃ©ploiement Automatique\n```bash\n# Commiter et pousser les changements\ngit add .\ngit commit -m \"feat(render): add render deployment configuration\"\ngit push origin feature/complete-fixes-and-render-deployment\n\n# Render dÃ©tecte automatiquement et commence le dÃ©ploiement\n```\n\n#### Suivi du DÃ©ploiement\n1. Aller dans Render Dashboard â†’ votre service\n2. Onglet \"Logs\" pour voir le build en temps rÃ©el\n3. Attendre que le status passe Ã  \"Live\"\n\n### 5. âœ… VÃ©rification du DÃ©ploiement\n\n#### Tests Essentiels\n```bash\n# 1. Health Check\ncurl https://TeamMove-app.onrender.com/api/health\n\n# 2. Frontend\ncurl https://TeamMove-app.onrender.com/\n\n# 3. API Authentication\ncurl -X POST https://TeamMove-app.onrender.com/api/login \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"email\":\"test@example.com\",\"password\":\"test\"}'\n```\n\n#### VÃ©rifications dans l'Interface\n1. **Page d'accueil** : Doit charger correctement\n2. **Inscription** : Formulaire avec autocomplÃ©tion adresse\n3. **Connexion** : Doit fonctionner avec la base de donnÃ©es\n4. **CrÃ©ation d'Ã©vÃ©nement** : Tester le flow complet\n5. **Envoi d'emails** : VÃ©rifier que les invitations partent\n\n### 6. ğŸ”§ Configuration AvancÃ©e\n\n#### A. Domaine PersonnalisÃ© (Optionnel)\n1. Render Dashboard â†’ votre service â†’ Settings\n2. \"Custom Domains\" â†’ \"Add Custom Domain\"\n3. Configurer les DNS selon les instructions Render\n\n#### B. SSL/HTTPS\n- Automatiquement gÃ©rÃ© par Render\n- Certificats Let's Encrypt gratuits\n- Redirection HTTP â†’ HTTPS automatique\n\n#### C. Monitoring et Logs\n```bash\n# AccÃ©der aux logs en temps rÃ©el\nrender logs --service TeamMove-app --follow\n\n# MÃ©triques disponibles dans le dashboard\n- CPU/Memory usage\n- Response time\n- Error rate\n- Request volume\n```\n\n## ğŸ› DÃ©pannage\n\n### ProblÃ¨mes Courants\n\n#### 1. Build Failed\n```bash\n# VÃ©rifier les logs de build\n# Causes communes:\n- DÃ©pendances manquantes\n- Erreurs TypeScript\n- Variables d'environnement manquantes au build\n```\n\n#### 2. Service Won't Start\n```bash\n# VÃ©rifier:\n- Start command correct (npm start)\n- Port binding (process.env.PORT)\n- Variables d'environnement critiques\n```\n\n#### 3. Database Connection Error\n```bash\n# Solutions:\n- VÃ©rifier DATABASE_URL format\n- Tester connexion depuis Render shell\n- VÃ©rifier firewall/whitelist si base externe\n```\n\n#### 4. Frontend 404 Errors\n```bash\n# Causes:\n- Build client non gÃ©nÃ©rÃ©\n- Mauvais chemin dans server/vite.ts\n- ProblÃ¨me routing SPA\n```\n\n### Commandes de Debug\n\n```bash\n# AccÃ©der au shell de votre service\nrender shell --service TeamMove-app\n\n# Dans le shell, tester:\nnode -e \"console.log(process.env.DATABASE_URL)\"\nls -la dist/public/\nnpm list --production\n```\n\n## ğŸ“Š Performance et Scaling\n\n### Plan Gratuit (Starter)\n- 512 MB RAM\n- 0.1 CPU\n- Sleep aprÃ¨s 15 min d'inactivitÃ©\n- 750h/mois gratuit (suffisant pour la plupart des projets)\n\n### Upgrade vers Plan Payant\n```bash\n# Avantages:\n- Pas de sleep\n- Plus de ressources\n- MÃ©triques avancÃ©es\n- Support prioritaire\n```\n\n### Optimisations\n```bash\n# RÃ©duction taille bundle\n- Tree shaking activÃ©\n- Images optimisÃ©es\n- Compression gzip automatique\n\n# Performance base de donnÃ©es\n- Pooling de connexions activÃ©\n- RequÃªtes optimisÃ©es avec index\n- Cache en mÃ©moire pour donnÃ©es frÃ©quentes\n```\n\n## ğŸ”’ SÃ©curitÃ©\n\n### Variables d'Environnement\n- Jamais de secrets dans le code\n- Variables sensibles via Render Dashboard uniquement\n- Rotation rÃ©guliÃ¨re des clÃ©s API\n\n### HTTPS et Certificats\n- SSL/TLS automatique avec Let's Encrypt\n- HSTS headers activÃ©s\n- Redirection HTTP â†’ HTTPS forcÃ©e\n\n### Base de DonnÃ©es\n```bash\n# SÃ©curitÃ© PostgreSQL:\n- Connexions chiffrÃ©es (SSL)\n- Authentification par certificat\n- Firewall base de donnÃ©es\n- Backups automatiques\n```\n\n## ğŸ“ Support et Ressources\n\n### Documentation Officielle\n- [Render Docs](https://render.com/docs)\n- [Render Node.js Guide](https://render.com/docs/deploy-node-express-app)\n- [Environment Variables](https://render.com/docs/environment-variables)\n\n### CommunautÃ©\n- [Render Community Forum](https://community.render.com)\n- [Discord Server](https://discord.gg/render)\n- Support email pour comptes payants\n\n### Monitoring\n```bash\n# Outils recommandÃ©s:\n- Render built-in metrics\n- Uptime monitoring (UptimeRobot)\n- Error tracking (Sentry)\n- Performance monitoring (New Relic)\n```\n\n## ğŸ¯ Checklist Finale\n\nAvant de considÃ©rer le dÃ©ploiement comme terminÃ© :\n\n- [ ] âœ… Service dÃ©ployÃ© et status \"Live\"\n- [ ] âœ… Health check rÃ©pond correctement\n- [ ] âœ… Frontend accessible et fonctionnel\n- [ ] âœ… Base de donnÃ©es connectÃ©e\n- [ ] âœ… Variables d'environnement configurÃ©es\n- [ ] âœ… SendGrid emails fonctionnels\n- [ ] âœ… Inscription/connexion testÃ©es\n- [ ] âœ… CrÃ©ation d'Ã©vÃ©nement testÃ©e\n- [ ] âœ… Invitations emails testÃ©es\n- [ ] âœ… SSL/HTTPS activÃ©\n- [ ] âœ… Logs monitoring configurÃ©\n\n## ğŸš€ URL de Production\n\nUne fois dÃ©ployÃ©, votre application sera accessible Ã  :\n**https://TeamMove-app.onrender.com**\n\nPersonnalisez le nom dans Render Dashboard si souhaitÃ©.\n\n---\n\n**ğŸ‰ FÃ©licitations ! TeamMove est maintenant dÃ©ployÃ© sur Render avec toutes les fonctionnalitÃ©s opÃ©rationnelles !**","size_bytes":8208},"RENDER_DEPLOYMENT_GUIDE_V2.md":{"content":"# ğŸš€ Guide de DÃ©ploiement TeamMove sur Render.com - Version 2.0\n\n## ğŸ“‹ Table des MatiÃ¨res\n- [PrÃ©requis](#prÃ©requis)\n- [Configuration Base de DonnÃ©es Neon](#configuration-base-de-donnÃ©es-neon)\n- [DÃ©ploiement sur Render](#dÃ©ploiement-sur-render)\n- [Configuration des Variables d'Environnement](#configuration-des-variables-denvironnement)\n- [Tests Post-DÃ©ploiement](#tests-post-dÃ©ploiement)\n- [RÃ©solution des ProblÃ¨mes Communs](#rÃ©solution-des-problÃ¨mes-communs)\n- [Monitoring et Maintenance](#monitoring-et-maintenance)\n\n---\n\n## ğŸ¯ PrÃ©requis\n\n### 1. Comptes NÃ©cessaires\n- âœ… **Compte GitHub** avec votre repository TeamMove\n- âœ… **Compte Render.com** (gratuit)\n- âœ… **Compte Neon.tech** pour la base de donnÃ©es PostgreSQL (gratuit)\n- âœ… **Compte SendGrid** pour les emails (gratuit jusqu'Ã  100 emails/jour)\n- âš ï¸ **Compte OpenAI** (optionnel, pour les fonctionnalitÃ©s IA)\n\n### 2. Repository PrÃ©parÃ©\n```bash\n# Votre repository doit contenir ces corrections rÃ©centes :\ngit clone https://github.com/[VotreUsername]/TeamMove.git\ncd TeamMove\ngit checkout fix/render-deployment-improvements\n```\n\n---\n\n## ğŸ’¾ Configuration Base de DonnÃ©es Neon\n\n### 1. CrÃ©er la Base de DonnÃ©es\n1. Allez sur [neon.tech](https://neon.tech)\n2. CrÃ©ez un nouveau projet nommÃ© `TeamMove`\n3. Notez la **CONNECTION STRING** (format: `postgresql://...`)\n\n### 2. Tester la Connexion Locale (Optionnel)\n```bash\n# Mettre Ã  jour votre .env local\necho \"DATABASE_URL=postgresql://neondb_owner:npg_xxx@ep-xxx.aws.neon.tech/neondb?sslmode=require\" > .env\n\n# Tester la connexion\nnpm run db:push\nnpm run dev\n\n# Tester l'endpoint de diagnostic\ncurl http://localhost:8080/api/db-test\n```\n\n---\n\n## ğŸŒ DÃ©ploiement sur Render\n\n### MÃ©thode 1: DÃ©ploiement Automatique via GitHub (RecommandÃ©)\n\n#### Ã‰tape 1: PrÃ©parer le Repository\n```bash\n# S'assurer d'Ãªtre sur la bonne branche avec les corrections\ngit checkout fix/render-deployment-improvements\ngit add .\ngit commit -m \"feat: optimize render deployment with session fixes\"\ngit push origin fix/render-deployment-improvements\n```\n\n#### Ã‰tape 2: CrÃ©er le Service sur Render\n1. **Connexion Ã  Render**\n   - Allez sur [render.com](https://render.com)\n   - Connectez-vous avec GitHub\n\n2. **Nouveau Web Service**\n   - Cliquez \"New\" â†’ \"Web Service\"\n   - SÃ©lectionnez votre repository `TeamMove`\n   - **Branch**: `fix/render-deployment-improvements`\n\n3. **Configuration de Base**\n   ```\n   Name: TeamMove-app\n   Region: Frankfurt (EU) ou Oregon (US)\n   Branch: fix/render-deployment-improvements\n   Root Directory: (laisser vide)\n   Runtime: Node\n   ```\n\n4. **Commandes de Build**\n   ```bash\n   Build Command: npm ci && npm run build:render\n   Start Command: npm start\n   ```\n\n5. **Configuration AvancÃ©e**\n   ```\n   Plan: Starter (Free)\n   Node Version: 18 (dÃ©tection automatique)\n   Health Check Path: /api/health\n   ```\n\n### MÃ©thode 2: DÃ©ploiement via Blueprint (Alternative)\n\nSi vous prÃ©fÃ©rez utiliser le fichier `render.yaml` :\n\n```bash\n# Pousser le render.yaml mis Ã  jour\ngit add render.yaml\ngit commit -m \"update: render blueprint with optimized config\"\ngit push\n\n# Sur Render.com\n# 1. New â†’ Blueprint\n# 2. Connecter votre repo\n# 3. Render dÃ©tectera automatiquement render.yaml\n```\n\n---\n\n## âš™ï¸ Configuration des Variables d'Environnement\n\n### Variables Obligatoires\n\nDans le dashboard Render, allez dans votre service â†’ **Environment** :\n\n#### 1. Base de DonnÃ©es\n```env\nDATABASE_URL=postgresql://neondb_owner:npg_xxx@ep-xxx.aws.neon.tech/neondb?sslmode=require&channel_binding=require\n```\n\n#### 2. Configuration Application\n```env\nNODE_ENV=production\nPORT=8080\nAPP_URL=https://teammove.fr\nRENDER=true\n```\n\n#### 3. SÃ©curitÃ©\n```env\nSESSION_SECRET=DCp63F0HccrzmwdvZ9Xb5GnklYyWYFv6iU+iGe/K0kI=\n```\n> âš ï¸ **Important**: GÃ©nÃ©rez une nouvelle clÃ© sÃ©curisÃ©e pour la production !\n\n#### 4. Email (SendGrid)\n```env\nSENDGRID_API_KEY=SG.xxxxx\nSENDGRID_FROM_EMAIL=votre-email@domaine.com\nSENDGRID_FROM_NAME=TeamMove\n```\n\n#### 5. IA OpenAI (Optionnel)\n```env\nOPENAI_API_KEY=sk-proj-xxxxx\n```\n\n### Variables de Debug (Temporaire)\nPour le dÃ©bogage initial, vous pouvez ajouter :\n```env\nVERBOSE_LOGS=true\nDEBUG=true\n```\n> ğŸ—‘ï¸ **Supprimez ces variables une fois que tout fonctionne**\n\n---\n\n## ğŸ§ª Tests Post-DÃ©ploiement\n\n### 1. Test Automatique avec Script\n```bash\n# ExÃ©cuter depuis votre machine locale\nnode test-render-deployment.js https://teammove.fr\n```\n\n### 2. Tests Manuels\n\n#### Test 1: Page d'Accueil\n```bash\ncurl -I https://teammove.fr\n# Attendu: HTTP/2 200\n```\n\n#### Test 2: SantÃ© de l'Application\n```bash\ncurl https://teammove.fr/api/health | jq\n# Attendu: {\"status\": \"healthy\", \"database\": \"connected\"}\n```\n\n#### Test 3: Base de DonnÃ©es\n```bash\ncurl https://teammove.fr/api/db-test | jq\n# Attendu: {\"status\": \"âœ… Database connection successful\"}\n```\n\n#### Test 4: Sessions\n```bash\ncurl https://teammove.fr/api/session-test | jq\n# Attendu: Informations de session\n```\n\n### 3. Test d'Authentification\n\n#### Via l'Interface Web\n1. Allez sur `https://teammove.fr`\n2. CrÃ©ez un compte test\n3. Tentez de vous connecter\n4. VÃ©rifiez que vous accÃ©dez au dashboard\n\n#### Via API (Advanced)\n```bash\n# CrÃ©er un compte test\ncurl -X POST https://teammove.fr/api/register \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"name\": \"Test Org\",\n    \"type\": \"club\",\n    \"email\": \"test@example.com\",\n    \"contactFirstName\": \"Test\",\n    \"contactLastName\": \"User\",\n    \"password\": \"password123\"\n  }'\n\n# Se connecter\ncurl -X POST https://teammove.fr/api/login \\\n  -H \"Content-Type: application/json\" \\\n  -c cookies.txt \\\n  -d '{\n    \"email\": \"test@example.com\",\n    \"password\": \"password123\"\n  }'\n\n# Tester l'endpoint protÃ©gÃ©\ncurl -b cookies.txt https://teammove.fr/api/me\n```\n\n---\n\n## ğŸ”§ RÃ©solution des ProblÃ¨mes Communs\n\n### ProblÃ¨me 1: Erreur 401 sur /api/me (Votre ProblÃ¨me Original)\n\n#### Diagnostic\n```bash\n# VÃ©rifier les sessions\ncurl https://teammove.fr/api/session-test | jq '.session'\n\n# VÃ©rifier les logs Render\n# Render Dashboard â†’ Votre Service â†’ Logs\n```\n\n#### Solutions AppliquÃ©es âœ…\n1. **Configuration Cookie amÃ©liorÃ©e** (sameSite: \"lax\" sur Render)\n2. **CORS optimisÃ©** pour Render\n3. **Headers de debugging** ajoutÃ©s\n4. **Middleware de session** amÃ©liorÃ©\n\n### ProblÃ¨me 2: Base de DonnÃ©es Non ConnectÃ©e\n\n#### Diagnostic\n```bash\ncurl https://teammove.fr/api/db-test\n```\n\n#### Solutions\n1. **VÃ©rifier DATABASE_URL** dans les variables d'environnement\n2. **IP Allowlist** sur Neon (normalement pas nÃ©cessaire)\n3. **SSL Mode** : Assurez-vous que `sslmode=require` est dans l'URL\n\n### ProblÃ¨me 3: Build Failures\n\n#### Erreurs Communes\n```bash\n# MÃ©moire insuffisante\n# Solution: Optimiser package.json, supprimer devDependencies non utilisÃ©es\n\n# Timeout de build\n# Solution: Utiliser build:render au lieu de build\n```\n\n#### Logs Utiles\n```bash\n# Dans Render Dashboard â†’ Build Logs\n# Chercher ces patterns:\n# - \"npm ERR!\"\n# - \"Module not found\"\n# - \"JavaScript heap out of memory\"\n```\n\n### ProblÃ¨me 4: Lenteur de l'Application\n\n#### Causes Communes\n1. **Cold Start** : Premier accÃ¨s aprÃ¨s inactivitÃ© (plan gratuit)\n2. **Base de donnÃ©es lente** : RequÃªtes non optimisÃ©es\n3. **Ressources limitÃ©es** : Plan gratuit (512MB RAM)\n\n#### Solutions\n```javascript\n// Ajouter du cache\n// Dans votre code, optimiser les requÃªtes\n// ConsidÃ©rer un upgrade vers plan payant pour la production\n```\n\n---\n\n## ğŸ“Š Monitoring et Maintenance\n\n### 1. Surveillance en Continu\n\n#### Health Checks Automatiques\n- Render vÃ©rifie `/api/health` toutes les 30 secondes\n- Application redÃ©marrÃ©e automatiquement en cas d'Ã©chec\n\n#### Monitoring Manuel\n```bash\n# Script de surveillance (Ã  exÃ©cuter pÃ©riodiquement)\n#!/bin/bash\nresponse=$(curl -s https://teammove.fr/api/health)\nif [[ $response == *\"healthy\"* ]]; then\n  echo \"âœ… $(date): Service is healthy\"\nelse\n  echo \"âŒ $(date): Service issue detected\"\n  echo \"$response\"\nfi\n```\n\n### 2. Logs et Debugging\n\n#### AccÃ©der aux Logs\n1. Render Dashboard â†’ Votre Service â†’ Logs\n2. Filtrer par type : Build, Deploy, Runtime\n\n#### Logs Importants Ã  Surveiller\n```\nâœ… Session Debug: ... (configuration sessions)\nâœ… Database connection successful\nâœ… Auth success for organization\nâŒ Auth failed: No organization ID\nâŒ CORS: Origin not allowed\n```\n\n### 3. Optimisations de Performance\n\n#### Base de DonnÃ©es\n```sql\n-- CrÃ©er des index pour les requÃªtes frÃ©quentes\n-- (ExÃ©cuter via neon.tech console si nÃ©cessaire)\nCREATE INDEX IF NOT EXISTS idx_events_organization_date \nON events(organization_id, date);\n\nCREATE INDEX IF NOT EXISTS idx_participants_event \nON event_participants(event_id);\n```\n\n#### Application\n```javascript\n// ImplÃ©menter du cache pour les requÃªtes frÃ©quentes\n// Optimiser les requÃªtes N+1\n// Utiliser des connections poolÃ©es (dÃ©jÃ  fait avec Neon)\n```\n\n### 4. Backup et SÃ©curitÃ©\n\n#### Backup Base de DonnÃ©es\n- **Neon** : Backup automatique quotidien (plan gratuit)\n- **Manual** : Export via neon.tech dashboard si nÃ©cessaire\n\n#### SÃ©curitÃ©\n```env\n# Rotation rÃ©guliÃ¨re des secrets\nSESSION_SECRET=nouvelle-clÃ©-gÃ©nÃ©rÃ©e-rÃ©guliÃ¨rement\nSENDGRID_API_KEY=nouvelle-clÃ©-si-compromise\n```\n\n---\n\n## ğŸš€ Ã‰tapes de DÃ©ploiement RÃ©sumÃ©es\n\n### Checklist ComplÃ¨te\n\n#### Phase 1: PrÃ©paration âœ…\n- [ ] Repository clonÃ© et branche `fix/render-deployment-improvements` checkoutÃ©e\n- [ ] Base de donnÃ©es Neon crÃ©Ã©e\n- [ ] Compte SendGrid configurÃ©\n- [ ] Variables d'environnement prÃ©parÃ©es\n\n#### Phase 2: DÃ©ploiement âœ…\n- [ ] Service Render crÃ©Ã© et connectÃ© au repository\n- [ ] Variables d'environnement configurÃ©es\n- [ ] Premier dÃ©ploiement lancÃ©\n- [ ] Build rÃ©ussi (pas d'erreurs dans les logs)\n\n#### Phase 3: Tests âœ…\n- [ ] Script de test exÃ©cutÃ© et tous les tests passent\n- [ ] Page d'accueil accessible\n- [ ] API Health check retourne \"healthy\"\n- [ ] Test de base de donnÃ©es rÃ©ussi\n- [ ] CrÃ©ation de compte de test rÃ©ussie\n- [ ] Connexion et accÃ¨s au dashboard rÃ©ussis\n\n#### Phase 4: Optimisation âš¡\n- [ ] Logs surveillÃ©s pour 24h\n- [ ] Performance acceptable\n- [ ] Variables de debug supprimÃ©es\n- [ ] Documentation mise Ã  jour\n\n---\n\n## ğŸ“ Support et Ressources\n\n### Documentation Officielle\n- [Render Node.js Guide](https://render.com/docs/deploy-node-express-app)\n- [Neon PostgreSQL Docs](https://neon.tech/docs)\n- [SendGrid API Docs](https://sendgrid.com/docs)\n\n### Debugging Resources\n```bash\n# Endpoints de diagnostic intÃ©grÃ©s\nGET /api/health          # Ã‰tat gÃ©nÃ©ral\nGET /api/db-test         # Test base de donnÃ©es\nGET /api/session-test    # Test sessions\nGET /api/test            # Test backend\nGET /api/debug/users     # Liste utilisateurs (debug)\n\n# Script de test complet\nnode test-render-deployment.js [URL]\n```\n\n### Contact et Support\n- **Issues GitHub** : Pour bugs et amÃ©liorations\n- **Render Support** : Pour problÃ¨mes de plateforme\n- **Neon Support** : Pour problÃ¨mes de base de donnÃ©es\n\n---\n\n## ğŸ‰ FÃ©licitations !\n\nSi vous avez suivi ce guide, votre application TeamMove devrait maintenant fonctionner parfaitement sur Render avec :\n\nâœ… **Authentification fonctionnelle** - Plus d'erreurs 401\nâœ… **Base de donnÃ©es connectÃ©e** - Neon PostgreSQL opÃ©rationnel  \nâœ… **Sessions persistantes** - Connexions maintenues\nâœ… **CORS configurÃ©** - Communication frontend/backend fluide\nâœ… **Monitoring intÃ©grÃ©** - Endpoints de diagnostic\nâœ… **Performance optimisÃ©e** - Configuration adaptÃ©e Ã  Render\n\n**URL de votre application** : https://teammove.fr\n\n---\n\n*Guide crÃ©Ã© avec â¤ï¸ pour rÃ©soudre les problÃ¨mes de dÃ©ploiement TeamMove sur Render*","size_bytes":11738},"SUBSCRIPTION_MIGRATION_GUIDE.md":{"content":"# Guide de Migration - Nouveau SystÃ¨me d'Abonnements\n\n## ğŸ“‹ RÃ©sumÃ© des Changements\n\nCe guide dÃ©crit la migration de l'ancien systÃ¨me d'abonnements (DÃ©couverte/Premium) vers le nouveau systÃ¨me avec plusieurs offres diffÃ©renciÃ©es.\n\n## ğŸš€ Nouvelles Offres\n\n### 1. Offre DÃ©couverte (Gratuite)\n- **Aucun changement** - reste identique\n- 1 Ã©vÃ©nement maximum\n- 20 invitations maximum\n- Support par email\n\n### 2. Offre Ã‰vÃ©nementielle (Packs)\n- **Pack Ã‰vÃ©nement** : 15â‚¬ pour 1 Ã©vÃ©nement complet\n- **Pack 10 Ã‰vÃ©nements** : 150â‚¬ pour 10 Ã©vÃ©nements (valable 12 mois)\n- Invitations illimitÃ©es\n- Support prioritaire\n- Messagerie intÃ©grÃ©e\n\n### 3. Formules Pro (Abonnements Mensuels)\n- **Clubs & Associations** : 19,99â‚¬/mois\n- **PME** : 49â‚¬/mois  \n- **Grandes Entreprises** : 99â‚¬/mois\n- Ã‰vÃ©nements et invitations illimitÃ©s\n- FonctionnalitÃ©s avancÃ©es selon la formule\n\n## ğŸ—‘ï¸ Suppression de l'Offre Premium\n\nL'ancienne offre \"Premium\" a Ã©tÃ© **complÃ¨tement supprimÃ©e** du systÃ¨me :\n- SupprimÃ©e du code frontend et backend\n- SupprimÃ©e des schÃ©mas de base de donnÃ©es  \n- RemplacÃ©e par les nouvelles offres Pro\n\n## ğŸ”„ Migration Automatique\n\n### Utilisateurs Premium Existants\nLes utilisateurs ayant actuellement un abonnement Premium seront automatiquement :\n1. **Maintenus actifs** jusqu'Ã  la fin de leur pÃ©riode de facturation\n2. **BasculÃ©s vers l'offre DÃ©couverte** Ã  l'expiration\n3. **NotifiÃ©s par email** de la migration et des nouvelles options\n\n### Processus de Migration\n```sql\n-- Script de migration (Ã  exÃ©cuter en production)\nUPDATE organizations \nSET subscriptionType = 'decouverte',\n    subscriptionStatus = 'active'\nWHERE subscriptionType = 'premium' \nAND (subscriptionEndDate < NOW() OR subscriptionStatus != 'active');\n```\n\n## âš™ï¸ Configuration Stripe\n\n### Nouvelles Variables d'Environnement\n```bash\n# Configurer les ID de prix Stripe pour chaque offre\nSTRIPE_EVENEMENTIELLE_SINGLE_PRICE_ID=price_...\nSTRIPE_EVENEMENTIELLE_PACK10_PRICE_ID=price_...\nSTRIPE_PRO_CLUB_PRICE_ID=price_...\nSTRIPE_PRO_PME_PRICE_ID=price_...\nSTRIPE_PRO_ENTREPRISE_PRICE_ID=price_...\n\n# URL de webhook Stripe (si pas dÃ©jÃ  configurÃ©)\nSTRIPE_WEBHOOK_SECRET=whsec_...\n```\n\n### Configuration des Produits Stripe\nDans le dashboard Stripe, crÃ©er :\n\n1. **Produits One-time (Packs Ã‰vÃ©nementiels)**\n   - Pack Ã‰vÃ©nement : 15â‚¬\n   - Pack 10 Ã‰vÃ©nements : 150â‚¬\n\n2. **Produits RÃ©currents (Formules Pro)**\n   - Clubs & Associations : 19,99â‚¬/mois\n   - PME : 49â‚¬/mois\n   - Grandes Entreprises : 99â‚¬/mois\n\n## ğŸ¯ Nouvelles FonctionnalitÃ©s\n\n### 1. Gestion des Packs Ã‰vÃ©nementiels\n- Compteur d'Ã©vÃ©nements restants\n- Date d'expiration des packs\n- Basculement automatique vers DÃ©couverte Ã  l'expiration\n\n### 2. Rappels de Renouvellement\n- Emails automatiques Ã  7, 3 et 1 jour(s) avant expiration\n- Notifications dans le dashboard\n- Configurable depuis l'admin\n\n### 3. SystÃ¨me de Basculement Automatique\n- TÃ¢che cron quotidienne (9h00)\n- VÃ©rification des abonnements expirÃ©s\n- Migration automatique vers DÃ©couverte\n- Emails de notification\n\n### 4. Emails AmÃ©liorÃ©s\n- Templates personnalisÃ©s par type d'abonnement\n- Factures intÃ©grÃ©es\n- Design moderne et responsive\n\n## ğŸ§ª Tests RecommandÃ©s\n\n### Avant DÃ©ploiement\n1. **Tests des Flux de Paiement**\n   ```bash\n   # Tester chaque type d'abonnement\n   curl -X POST /api/subscriptions/create \\\n     -H \"Content-Type: application/json\" \\\n     -d '{\"planId\": \"evenementielle-single\"}'\n   ```\n\n2. **Tests des TÃ¢ches Automatiques**\n   ```bash\n   # Forcer l'exÃ©cution des tÃ¢ches\n   curl -X POST /api/admin/scheduler/run \\\n     -H \"Content-Type: application/json\" \\  \n     -d '{\"task\": \"checkExpired\"}'\n   ```\n\n3. **Tests d'Emails**\n   - VÃ©rifier les templates pour chaque offre\n   - Tester les rappels de renouvellement\n   - Valider les emails d'activation/annulation\n\n### AprÃ¨s DÃ©ploiement\n1. VÃ©rifier que les utilisateurs existants gardent leur accÃ¨s\n2. Tester l'inscription avec les nouvelles offres\n3. Valider les flux de paiement Stripe en mode test\n4. Surveiller les logs pour les erreurs\n\n## ğŸ“Š Monitoring\n\n### MÃ©triques Ã  Surveiller\n- Taux de conversion par offre\n- RÃ©partition des abonnements\n- Taux de renouvellement\n- Erreurs de paiement\n\n### Alertes RecommandÃ©es\n- Ã‰checs de paiement > 5%\n- Erreurs webhook Stripe\n- Ã‰chec des tÃ¢ches automatiques\n- Emails non dÃ©livrÃ©s\n\n## ğŸš¨ Points d'Attention\n\n### CompatibilitÃ© Descendante\n- Toutes les rÃ©fÃ©rences Ã  \"premium\" ont Ã©tÃ© supprimÃ©es\n- Les anciens endpoints continuent de fonctionner pour la transition\n- Migration progressive recommandÃ©e\n\n### SÃ©curitÃ©\n- Validation stricte des types d'abonnement\n- VÃ©rification des permissions par offre\n- Protection contre les changements d'abonnement non autorisÃ©s\n\n### Performance\n- Les tÃ¢ches automatiques sont optimisÃ©es\n- Cache des configurations d'abonnement\n- Limitation des requÃªtes Stripe\n\n## ğŸ†˜ Support & Rollback\n\n### Plan de Rollback\nSi nÃ©cessaire, restaurer l'ancien systÃ¨me :\n1. RÃ©initialiser les types d'abonnement\n2. Restaurer les anciens composants frontend\n3. RÃ©tablir les anciennes routes API\n\n### Contact Support\n- Pour les questions techniques : dÃ©veloppement\n- Pour les questions Stripe : admin/billing\n- Pour les urgences : contacts d'escalade\n\n---\n\n**Version** : 2.0.0  \n**Date** : $(date)  \n**Auteur** : Ã‰quipe TeamMove","size_bytes":5382},"build-render-esbuild.js":{"content":"#!/usr/bin/env node\nimport { build } from 'esbuild';\nimport { execSync } from 'child_process';\nimport fs from 'fs';\nimport path from 'path';\n\nconsole.log('ğŸš€ Building TeamMove for Render (ESBuild Mode)...');\n\ntry {\n  // 1. Clean previous builds\n  console.log('ğŸ§¹ Cleaning previous builds...');\n  if (fs.existsSync('dist')) execSync('rm -rf dist');\n  \n  // Create dist directories\n  fs.mkdirSync('dist', { recursive: true });\n  fs.mkdirSync('dist/public', { recursive: true });\n\n  // 2. Build client manually with esbuild (ultra-efficient)\n  console.log('ğŸ¨ Building client with ESBuild (minimal memory)...');\n  \n  const clientEntry = './client/src/main.tsx';\n  const publicDir = './client/public';\n  \n  if (!fs.existsSync(clientEntry)) {\n    throw new Error('Client entry point not found: ' + clientEntry);\n  }\n\n  // Copy static assets first\n  console.log('ğŸ“ Copying static assets...');\n  if (fs.existsSync(publicDir)) {\n    execSync(`cp -r ${publicDir}/* dist/public/`);\n  }\n\n  // Build JavaScript bundle with esbuild\n  console.log('ğŸ“¦ Building JavaScript bundle...');\n  await build({\n    entryPoints: [clientEntry],\n    bundle: true,\n    minify: true,\n    sourcemap: false,\n    target: 'es2018',\n    format: 'esm',\n    outdir: 'dist/public',\n    entryNames: 'assets/[name]-[hash]',\n    chunkNames: 'assets/[name]-[hash]',\n    assetNames: 'assets/[name]-[hash]',\n    splitting: true,\n    platform: 'browser',\n    define: {\n      'process.env.NODE_ENV': '\"production\"',\n      'global': 'globalThis',\n    },\n    loader: {\n      '.png': 'file',\n      '.jpg': 'file',\n      '.jpeg': 'file',\n      '.gif': 'file',\n      '.svg': 'file',\n      '.woff': 'file',\n      '.woff2': 'file',\n      '.ttf': 'file',\n      '.eot': 'file',\n    },\n    external: [],\n    metafile: true,\n    write: true,\n    logLevel: 'info',\n  });\n\n  // 3. Generate index.html with proper script injection\n  console.log('ğŸ“„ Generating index.html...');\n  \n  // Find the generated main JS file\n  const assetsDir = 'dist/public/assets';\n  let mainJsFile = 'main.js'; // fallback\n  \n  if (fs.existsSync(assetsDir)) {\n    const assetFiles = fs.readdirSync(assetsDir);\n    const jsFiles = assetFiles.filter(f => f.startsWith('main-') && f.endsWith('.js'));\n    if (jsFiles.length > 0) {\n      mainJsFile = 'assets/' + jsFiles[0];\n    }\n  }\n  \n  const htmlTemplate = `<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <link rel=\"icon\" type=\"image/svg+xml\" href=\"/favicon.ico\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>TeamMove</title>\n    <style>\n      * { margin: 0; padding: 0; box-sizing: border-box; }\n      body { font-family: system-ui, sans-serif; }\n      #root { width: 100%; height: 100vh; }\n    </style>\n  </head>\n  <body>\n    <div id=\"root\"></div>\n    <script type=\"module\" src=\"/${mainJsFile}\"></script>\n  </body>\n</html>`;\n\n  fs.writeFileSync('dist/public/index.html', htmlTemplate);\n\n  // 4. Build server (backend)\n  console.log('ğŸ› ï¸ Building server...');\n  execSync('npm run build:server', { stdio: 'inherit' });\n\n  // 5. Setup production files\n  console.log('ğŸ“‹ Setting up production configuration...');\n  \n  // Copy package.json\n  if (fs.existsSync('package.json')) {\n    const packageJson = JSON.parse(fs.readFileSync('package.json', 'utf8'));\n    \n    const prodPackageJson = {\n      name: packageJson.name,\n      version: packageJson.version,\n      type: \"module\",\n      scripts: {\n        \"start\": \"node index.js\"\n      },\n      dependencies: {\n        // Include only essential runtime dependencies\n        \"@neondatabase/serverless\": packageJson.dependencies[\"@neondatabase/serverless\"],\n        \"@sendgrid/mail\": packageJson.dependencies[\"@sendgrid/mail\"],\n        \"bcrypt\": packageJson.dependencies[\"bcrypt\"],\n        \"cors\": packageJson.dependencies[\"cors\"],\n        \"dotenv\": packageJson.dependencies[\"dotenv\"],\n        \"drizzle-orm\": packageJson.dependencies[\"drizzle-orm\"],\n        \"express\": packageJson.dependencies[\"express\"],\n        \"jsonwebtoken\": packageJson.dependencies[\"jsonwebtoken\"],\n        \"uuid\": packageJson.dependencies[\"uuid\"],\n        \"zod\": packageJson.dependencies[\"zod\"]\n      }\n    };\n    \n    fs.writeFileSync('dist/package.json', JSON.stringify(prodPackageJson, null, 2));\n  }\n  \n  // Copy shared directory\n  if (fs.existsSync('shared')) {\n    execSync('cp -r shared dist/', { stdio: 'inherit' });\n  }\n\n  // 6. Create health check\n  const healthCheck = `export default function healthCheck(req, res) {\n  res.status(200).json({\n    status: 'healthy',\n    timestamp: new Date().toISOString(),\n    build: 'esbuild-render'\n  });\n}`;\n  \n  fs.writeFileSync('dist/health.js', healthCheck);\n\n  // 7. Verification\n  console.log('âœ… Build verification...');\n  const requiredFiles = [\n    'dist/index.js',\n    'dist/public/index.html',\n    'dist/package.json'\n  ];\n\n  for (const file of requiredFiles) {\n    if (!fs.existsSync(file)) {\n      throw new Error(`âŒ Required file missing: ${file}`);\n    }\n  }\n\n  // 8. Build summary\n  const stats = {\n    serverSize: (fs.statSync('dist/index.js').size / 1024).toFixed(2),\n    frontendFiles: fs.readdirSync('dist/public').length,\n    totalSize: execSync('du -sh dist 2>/dev/null || echo \"Unknown\"', { encoding: 'utf8' }).trim().split('\\t')[0] || 'Unknown'\n  };\n\n  console.log('\\nğŸ‰ ESBuild completed successfully!');\n  console.log('ğŸ“Š Build summary:');\n  console.log(`   ğŸ“¦ Server bundle: ${stats.serverSize} KB`);\n  console.log(`   ğŸ“‚ Frontend files: ${stats.frontendFiles}`);\n  console.log(`   ğŸ’¾ Total size: ${stats.totalSize}`);\n  console.log('\\nğŸš€ Ultra-optimized for Render deployment!');\n\n} catch (error) {\n  console.error('\\nğŸ’¥ ESBuild failed:', error.message);\n  console.error('ğŸ“‹ Debug information:');\n  console.error(error.stack);\n  \n  console.error('\\nğŸ’¡ This build uses ESBuild for minimal memory usage');\n  console.error('ğŸ’¡ If this fails, the environment may be too constrained');\n  \n  process.exit(1);\n}\n\nconsole.log('\\nğŸ“ Next steps:');\nconsole.log('1. Test locally: npm start');\nconsole.log('2. Commit and push to Render');\nconsole.log('3. Monitor deployment in Render dashboard');","size_bytes":6162},"build-render-minimal.js":{"content":"#!/usr/bin/env node\nimport { execSync, spawn } from 'child_process';\nimport fs from 'fs';\nimport path from 'path';\n\nconsole.log('ğŸš€ Building TeamMove for Render (Minimal Memory Mode)...');\n\n/**\n * Execute command with memory constraints and proper error handling\n */\nfunction execWithMemoryLimit(command, options = {}) {\n  const defaultOptions = {\n    stdio: 'inherit',\n    env: {\n      ...process.env,\n      NODE_OPTIONS: '--max-old-space-size=768',\n      GENERATE_SOURCEMAP: 'false',\n    },\n    timeout: 600000, // 10 minutes\n    ...options\n  };\n  \n  return execSync(command, defaultOptions);\n}\n\ntry {\n  // 1. Clean previous builds\n  console.log('ğŸ§¹ Cleaning previous builds...');\n  if (fs.existsSync('dist')) execSync('rm -rf dist');\n\n  // 2. Pre-build checks\n  console.log('ğŸ” Pre-build verification...');\n  \n  // Check if we have enough memory\n  const memInfo = execSync('cat /proc/meminfo | grep MemAvailable', { encoding: 'utf8' });\n  const availableMemKB = parseInt(memInfo.split(/\\s+/)[1]);\n  const availableMemMB = Math.floor(availableMemKB / 1024);\n  \n  console.log(`ğŸ’¾ Available memory: ${availableMemMB} MB`);\n  \n  if (availableMemMB < 512) {\n    console.log('âš ï¸  Low memory detected. Using ultra-minimal build mode...');\n    process.env.NODE_OPTIONS = '--max-old-space-size=384';\n  }\n\n  // 3. Build client step by step\n  console.log('ğŸ¨ Building client with maximum optimization...');\n  \n  // Set all optimization flags\n  process.env.RENDER = 'true';\n  process.env.NODE_ENV = 'production';\n  process.env.GENERATE_SOURCEMAP = 'false';\n  process.env.DISABLE_ESLINT_PLUGIN = 'true';\n  \n  // Try multiple build strategies\n  let buildSuccess = false;\n  const buildStrategies = [\n    // Strategy 1: Normal Vite build with memory limit\n    () => {\n      console.log('ğŸ“¦ Trying normal Vite build...');\n      execWithMemoryLimit('npm run build:client');\n    },\n    \n    // Strategy 2: Direct vite command with memory optimization\n    () => {\n      console.log('ğŸ”„ Trying direct Vite with memory optimization...');\n      execWithMemoryLimit('node --max-old-space-size=512 ./node_modules/.bin/vite build', {\n        cwd: './client'\n      });\n    },\n    \n    // Strategy 3: Build in smaller chunks (if we implement this)\n    () => {\n      console.log('âš¡ Trying incremental build...');\n      // First, just bundle without minification\n      execWithMemoryLimit('node --max-old-space-size=512 ./node_modules/.bin/vite build --minify false', {\n        cwd: './client'\n      });\n      \n      // Then minify separately if possible\n      if (fs.existsSync('dist/public')) {\n        console.log('ğŸ—œï¸  Post-processing minification...');\n        // Could implement terser separately here if needed\n      }\n    }\n  ];\n  \n  for (let i = 0; i < buildStrategies.length && !buildSuccess; i++) {\n    try {\n      console.log(`\\nğŸ¯ Build attempt ${i + 1}/${buildStrategies.length}`);\n      buildStrategies[i]();\n      buildSuccess = true;\n      console.log('âœ… Client build succeeded!');\n    } catch (error) {\n      console.log(`âŒ Build attempt ${i + 1} failed: ${error.message}`);\n      if (i === buildStrategies.length - 1) {\n        throw new Error('All build strategies failed');\n      }\n      console.log('ğŸ”„ Trying next build strategy...');\n    }\n  }\n\n  // 4. Build server (backend) - this should be lighter\n  console.log('ğŸ› ï¸ Building server...');\n  execWithMemoryLimit('npm run build:server');\n\n  // 5. Verify and organize build output\n  console.log('ğŸ“ Verifying build output...');\n  \n  const requiredFiles = [\n    'dist/index.js',\n    'dist/public/index.html'\n  ];\n\n  for (const file of requiredFiles) {\n    if (!fs.existsSync(file)) {\n      throw new Error(`âŒ Required file missing: ${file}`);\n    }\n  }\n\n  // 6. Copy necessary files\n  console.log('ğŸ“‹ Copying configuration files...');\n  \n  if (fs.existsSync('package.json')) {\n    const packageJson = JSON.parse(fs.readFileSync('package.json', 'utf8'));\n    \n    // Create production package.json\n    const prodPackageJson = {\n      name: packageJson.name,\n      version: packageJson.version,\n      type: \"module\",\n      scripts: {\n        \"start\": \"node index.js\"\n      },\n      dependencies: {\n        // Only include runtime dependencies\n        ...(packageJson.dependencies || {})\n      }\n    };\n    \n    fs.writeFileSync('dist/package.json', JSON.stringify(prodPackageJson, null, 2));\n  }\n  \n  if (fs.existsSync('shared')) {\n    execSync('cp -r shared dist/', { stdio: 'inherit' });\n  }\n\n  // 7. Create health check\n  console.log('ğŸ¥ Setting up health check...');\n  const healthCheck = `export default function healthCheck(req, res) {\n  res.status(200).json({\n    status: 'healthy',\n    timestamp: new Date().toISOString(),\n    build: 'render-minimal'\n  });\n}`;\n  \n  fs.writeFileSync('dist/health.js', healthCheck);\n\n  // 8. Build summary\n  const stats = {\n    serverSize: (fs.statSync('dist/index.js').size / 1024).toFixed(2),\n    frontendFiles: fs.readdirSync('dist/public').length,\n    totalSize: execSync('du -sh dist 2>/dev/null || echo \"Unknown\"', { encoding: 'utf8' }).split('\\t')[0]\n  };\n\n  console.log('\\nğŸ‰ Minimal build completed successfully!');\n  console.log('ğŸ“Š Build summary:');\n  console.log(`   ğŸ“¦ Server bundle: ${stats.serverSize} KB`);\n  console.log(`   ğŸ“‚ Frontend files: ${stats.frontendFiles}`);\n  console.log(`   ğŸ’¾ Total size: ${stats.totalSize}`);\n  console.log('\\nğŸš€ Optimized for Render deployment!');\n\n} catch (error) {\n  console.error('\\nğŸ’¥ Build failed:', error.message);\n  console.error('ğŸ“‹ Debug information:');\n  \n  // Try to provide helpful debug info\n  if (fs.existsSync('dist')) {\n    console.error('ğŸ“ Partial build contents:');\n    try {\n      execSync('find dist -type f | head -10', { stdio: 'inherit' });\n    } catch (e) {\n      console.error('Could not list dist contents');\n    }\n  }\n  \n  console.error('\\nğŸ’¡ Troubleshooting tips:');\n  console.error('1. Check available memory: free -m');\n  console.error('2. Try building locally first');\n  console.error('3. Review the Render build logs');\n  console.error('4. Consider using a higher memory plan on Render');\n  \n  process.exit(1);\n}\n\nconsole.log('\\nğŸ“ Next steps:');\nconsole.log('1. Commit all changes to git');\nconsole.log('2. Push to your connected Render repository');\nconsole.log('3. Monitor the Render deployment logs');\nconsole.log('4. Configure environment variables in Render dashboard');","size_bytes":6408},"build-render.js":{"content":"#!/usr/bin/env node\nimport { execSync } from 'child_process';\nimport fs from 'fs';\nimport path from 'path';\n\nconsole.log('ğŸš€ Building TeamMove for Render deployment...');\n\ntry {\n  // 1. Clean previous builds\n  console.log('ğŸ§¹ Cleaning previous builds...');\n  if (fs.existsSync('dist')) execSync('rm -rf dist');\n\n  // 2. Build client (frontend) with memory optimization\n  console.log('ğŸ¨ Building client with optimized Vite...');\n  \n  // Set environment variables for memory-efficient build\n  process.env.RENDER = 'true';\n  process.env.NODE_ENV = 'production';\n  process.env.NODE_OPTIONS = '--max-old-space-size=1024';\n  \n  try {\n    execSync('npm run build:client', { \n      stdio: 'inherit',\n      env: { \n        ...process.env,\n        NODE_OPTIONS: '--max-old-space-size=1024'\n      },\n      timeout: 300000 // 5 minutes timeout\n    });\n  } catch (error) {\n    console.log('âš ï¸ Vite build failed, trying alternative build method...');\n    \n    // Fallback: Build with reduced parallelism\n    console.log('ğŸ”„ Attempting build with reduced resources...');\n    execSync('node --max-old-space-size=1024 ./node_modules/.bin/vite build', {\n      stdio: 'inherit',\n      cwd: './client',\n      timeout: 300000\n    });\n  }\n\n  // 3. Build server (backend)\n  console.log('ğŸ› ï¸ Building server with esbuild...');\n  execSync('npm run build:server', { stdio: 'inherit' });\n\n  // 4. Copy static assets and ensure proper structure\n  console.log('ğŸ“ Organizing build files...');\n  \n  // Ensure dist/public exists and copy client build\n  if (fs.existsSync('dist/public')) {\n    console.log('âœ… Client build found at dist/public');\n  } else {\n    throw new Error('âŒ Client build not found at dist/public');\n  }\n\n  // 5. Create server startup script\n  const startupScript = `#!/usr/bin/env node\n// Render startup script for TeamMove\nimport './index.js';\n`;\n  \n  fs.writeFileSync('dist/start.js', startupScript);\n  \n  // 6. Copy essential files\n  console.log('ğŸ“‹ Copying configuration files...');\n  \n  if (fs.existsSync('package.json')) {\n    fs.copyFileSync('package.json', 'dist/package.json');\n  }\n  \n  if (fs.existsSync('shared')) {\n    execSync('cp -r shared dist/', { stdio: 'inherit' });\n  }\n\n  // 7. Update package.json for Render\n  const packageJsonPath = 'dist/package.json';\n  if (fs.existsSync(packageJsonPath)) {\n    const packageJson = JSON.parse(fs.readFileSync(packageJsonPath, 'utf8'));\n    \n    // Simplify scripts for production\n    packageJson.scripts = {\n      \"start\": \"node index.js\"\n    };\n    \n    // Remove devDependencies to reduce size\n    delete packageJson.devDependencies;\n    \n    fs.writeFileSync(packageJsonPath, JSON.stringify(packageJson, null, 2));\n  }\n\n  // 8. Create health check file\n  console.log('ğŸ¥ Setting up health check...');\n  const healthCheckJs = `\n// Health check endpoint for Render\nexport default function healthCheck(req, res) {\n  res.status(200).json({\n    status: 'healthy',\n    timestamp: new Date().toISOString(),\n    version: '1.0.0'\n  });\n}\n  `;\n  \n  fs.writeFileSync('dist/health.js', healthCheckJs.trim());\n\n  // 9. Verification\n  console.log('âœ… Build verification...');\n  const requiredFiles = [\n    'dist/index.js',\n    'dist/public/index.html',\n    'dist/package.json'\n  ];\n\n  for (const file of requiredFiles) {\n    if (!fs.existsSync(file)) {\n      throw new Error(`âŒ Required file missing: ${file}`);\n    }\n  }\n\n  // 10. Display build summary\n  const stats = {\n    serverSize: (fs.statSync('dist/index.js').size / 1024).toFixed(2),\n    frontendFiles: fs.readdirSync('dist/public').length,\n    totalSize: execSync('du -sh dist', { encoding: 'utf8' }).split('\\t')[0]\n  };\n\n  console.log('\\nğŸ‰ Build completed successfully for Render!');\n  console.log('ğŸ“Š Build summary:');\n  console.log(`   ğŸ“¦ Server bundle: ${stats.serverSize} KB`);\n  console.log(`   ğŸ“‚ Frontend files: ${stats.frontendFiles}`);\n  console.log(`   ğŸ’¾ Total size: ${stats.totalSize}`);\n  console.log('\\nğŸš€ Ready for Render deployment!');\n  console.log('   Deploy command: git push render main');\n\n} catch (error) {\n  console.error('âŒ Build failed:', error.message);\n  process.exit(1);\n}\n\nconsole.log('\\nğŸ“ Next steps:');\nconsole.log('1. Commit and push to your git repository');\nconsole.log('2. Connect your repo to Render');\nconsole.log('3. Configure environment variables in Render dashboard');\nconsole.log('4. Deploy! ğŸš€');","size_bytes":4387},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"eslint.config.js":{"content":"import js from '@eslint/js';\nimport tseslint from '@typescript-eslint/eslint-plugin';\nimport tsparser from '@typescript-eslint/parser';\nimport react from 'eslint-plugin-react';\nimport reactHooks from 'eslint-plugin-react-hooks';\nimport prettier from 'eslint-plugin-prettier';\n\nexport default [\n  {\n    ignores: [\n      'dist/',\n      'node_modules/',\n      '*.config.js',\n      '*.config.ts',\n      'client/dist/',\n      'coverage/',\n      '.next/',\n      '.cache/',\n      'build/'\n    ]\n  },\n  {\n    files: ['**/*.{js,jsx,ts,tsx}'],\n    languageOptions: {\n      parser: tsparser,\n      ecmaVersion: 'latest',\n      sourceType: 'module',\n      parserOptions: {\n        ecmaFeatures: {\n          jsx: true\n        },\n        project: './tsconfig.json'\n      },\n      globals: {\n        console: 'readonly',\n        process: 'readonly',\n        Buffer: 'readonly',\n        __dirname: 'readonly',\n        __filename: 'readonly',\n        global: 'readonly',\n        module: 'readonly',\n        require: 'readonly',\n        exports: 'readonly',\n        window: 'readonly',\n        document: 'readonly',\n        navigator: 'readonly'\n      }\n    },\n    plugins: {\n      '@typescript-eslint': tseslint,\n      'react': react,\n      'react-hooks': reactHooks,\n      'prettier': prettier\n    },\n    rules: {\n      ...js.configs.recommended.rules,\n      ...tseslint.configs.recommended.rules,\n      ...react.configs.recommended.rules,\n      ...reactHooks.configs.recommended.rules,\n      \n      'prettier/prettier': 'error',\n      'react/react-in-jsx-scope': 'off',\n      '@typescript-eslint/no-unused-vars': ['error', { 'argsIgnorePattern': '^_' }],\n      '@typescript-eslint/no-explicit-any': 'warn',\n      'react/prop-types': 'off',\n      'react-hooks/rules-of-hooks': 'error',\n      'react-hooks/exhaustive-deps': 'warn',\n      'no-console': ['warn', { 'allow': ['warn', 'error'] }],\n      'prefer-const': 'error',\n      'no-var': 'error'\n    },\n    settings: {\n      react: {\n        version: 'detect'\n      }\n    }\n  }\n];","size_bytes":2016},"playwright.config.ts":{"content":"import { defineConfig, devices } from '@playwright/test';\n\nexport default defineConfig({\n  testDir: './tests/e2e',\n  fullyParallel: true,\n  forbidOnly: !!process.env.CI,\n  retries: process.env.CI ? 2 : 0,\n  workers: process.env.CI ? 1 : undefined,\n  reporter: 'html',\n  use: {\n    baseURL: 'https://teammove.fr',\n    trace: 'on-first-retry',\n  },\n\n  projects: [\n    {\n      name: 'chromium',\n      use: { ...devices['Desktop Chrome'] },\n    },\n\n    {\n      name: 'firefox',\n      use: { ...devices['Desktop Firefox'] },\n    },\n\n    {\n      name: 'webkit',\n      use: { ...devices['Desktop Safari'] },\n    },\n  ],\n\n  webServer: {\n    command: 'npm run dev',\n    url: 'https://teammove.fr',\n    reuseExistingServer: !process.env.CI,\n  },\n});","size_bytes":759},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"render.yaml":{"content":"# Render Blueprint pour TeamMove - Configuration OptimisÃ©e\n# Configuration pour dÃ©ploiement sur Render.com avec corrections pour les sessions\nservices:\n  # Service Web principal (Backend Express + Frontend servi)\n  - type: web\n    name: TeamMove-app\n    plan: starter # gratuit, peut Ãªtre upgrade vers paid plans\n    env: node\n    region: frankfurt # ou oregon selon vos prÃ©fÃ©rences\n    buildCommand: npm ci && npm run build:render\n    startCommand: npm start\n    healthCheckPath: /api/health\n    # Configuration rÃ©seau optimisÃ©e pour les sessions\n    headers:\n      - key: Access-Control-Allow-Credentials\n        value: true\n      - key: Access-Control-Allow-Origin\n        value: https://teammove.fr\n    envVars:\n      - key: NODE_ENV\n        value: production\n      - key: PORT\n        value: 8080\n      - key: DATABASE_URL\n        fromDatabase:\n          name: TeamMove-db\n          property: connectionString\n      - key: SENDGRID_API_KEY\n        sync: false # sera configurÃ© manuellement via dashboard\n      - key: SENDGRID_FROM_EMAIL\n        sync: false\n      - key: SENDGRID_FROM_NAME\n        sync: false\n      - key: OPENAI_API_KEY\n        sync: false\n      - key: SESSION_SECRET\n        generateValue: true # Render gÃ©nÃ¨re automatiquement une valeur sÃ©curisÃ©e\n      - key: APP_URL\n        value: https://teammove.fr\n      - key: RENDER\n        value: true\n      - key: VERBOSE_LOGS\n        value: false\n    buildFilter:\n      paths:\n        - server/**\n        - client/**\n        - shared/**\n        - package.json\n        - package-lock.json\n        - vite.config.ts\n        - tailwind.config.ts\n        - build-render*.js\n    \n# Base de donnÃ©es PostgreSQL\ndatabases:\n  - name: TeamMove-db\n    databaseName: TeamMove\n    user: TeamMove_user\n    plan: free # PostgreSQL gratuit jusqu'Ã  1GB\n    region: frankfurt","size_bytes":1857},"replit.md":{"content":"# replit.md\n\n## Overview\n\nTeamMove is a comprehensive sports carpooling web application designed for clubs, associations, and companies to organize and manage transportation for sporting events. The platform features a React frontend with shadcn/ui components, an Express.js backend, and PostgreSQL database with Drizzle ORM. Users can register organizations, create events, invite participants via email, manage carpooling logistics (drivers/passengers), and communicate through an integrated messaging system. The application provides a complete event lifecycle from creation to participant management, with role-based access (passengers and drivers with seat availability) and responsive design for all devices.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n- **Framework**: React 18 with TypeScript, built using Vite\n- **UI Library**: shadcn/ui components built on Radix UI primitives\n- **Styling**: Tailwind CSS with CSS variables for theming\n- **State Management**: TanStack React Query for server state, React hooks for local state\n- **Routing**: Wouter for client-side routing\n- **Form Handling**: React Hook Form with Zod validation\n- **Design System**: Consistent component library with variants using class-variance-authority\n\n### Backend Architecture\n- **Framework**: Express.js with TypeScript running on Node.js\n- **API Design**: RESTful endpoints organized by feature (auth, events, messages, invitations)\n- **Authentication**: Session-based authentication with express-session\n- **Password Security**: bcrypt for password hashing\n- **Error Handling**: Centralized error middleware with structured error responses\n- **Development Tools**: Hot reloading with Vite integration for development mode\n\n### Data Storage Solutions\n- **Database**: PostgreSQL with Neon serverless driver\n- **ORM**: Drizzle ORM for type-safe database operations\n- **Schema Management**: Drizzle Kit for migrations and schema management\n- **Connection**: Connection pooling with @neondatabase/serverless\n- **Tables**: Organizations, events, event_participants, event_invitations, and messages with proper foreign key relationships\n\n### Authentication and Authorization\n- **Session Management**: Express-session with secure cookie configuration\n- **Password Security**: bcrypt hashing with salt rounds\n- **Route Protection**: Middleware-based authentication for protected endpoints\n- **Session Storage**: In-memory sessions for development (production would use persistent store)\n- **User Context**: Organization-based authentication (clubs, associations, companies)\n\n### External Dependencies\n- **Database**: Neon PostgreSQL serverless database\n- **Email Service**: Not yet implemented (placeholder for invitation system)\n- **File Storage**: Local storage for development (placeholder for logos/attachments)\n- **Fonts**: Google Fonts (Inter) and Font Awesome icons\n- **Development Tools**: Replit-specific plugins and banners for development environment","size_bytes":3026},"server-render-dev.js":{"content":"#!/usr/bin/env node\nimport express from 'express';\nimport path from 'path';\nimport { fileURLToPath } from 'url';\nimport fs from 'fs';\n\nconst __dirname = path.dirname(fileURLToPath(import.meta.url));\nconst app = express();\nconst port = process.env.PORT || 3000;\n\nconsole.log('ğŸš€ Starting Render Development Server...');\nconsole.log('ğŸ“‹ This server simulates the exact Render.com environment');\n\n// Trust proxy (like Render does)\napp.set('trust proxy', 1);\n\n// Security headers (like Render)\napp.use((req, res, next) => {\n  res.setHeader('X-Content-Type-Options', 'nosniff');\n  res.setHeader('X-Frame-Options', 'DENY');\n  res.setHeader('X-XSS-Protection', '1; mode=block');\n  res.setHeader('Strict-Transport-Security', 'max-age=31536000; includeSubDomains');\n  next();\n});\n\n// Logging middleware\napp.use((req, res, next) => {\n  const timestamp = new Date().toISOString();\n  console.log(`[${timestamp}] ${req.method} ${req.path}`);\n  next();\n});\n\n// CORS headers for API routes\napp.use('/api/*', (req, res, next) => {\n  res.header('Access-Control-Allow-Origin', '*');\n  res.header('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');\n  res.header('Access-Control-Allow-Headers', 'Content-Type, Authorization, Cookie, X-Requested-With');\n  res.header('Access-Control-Allow-Credentials', 'true');\n  \n  if (req.method === 'OPTIONS') {\n    return res.status(200).end();\n  }\n  next();\n});\n\n// Body parsing\napp.use(express.json({ limit: '10mb' }));\napp.use(express.urlencoded({ extended: true, limit: '10mb' }));\n\n// Load and initialize the actual application\nlet appInitialized = false;\nlet appModule = null;\n\nasync function initializeApp() {\n  if (!appInitialized) {\n    try {\n      console.log('ğŸ”§ Initializing TeamMove application...');\n      \n      // Set environment variables for development that match production\n      process.env.NODE_ENV = 'production';\n      process.env.APP_URL = `http://localhost:${port}`;\n      \n      // Import the compiled server if it exists, otherwise use tsx to run TypeScript\n      if (fs.existsSync('./dist/index.js')) {\n        console.log('ğŸ“¦ Using compiled server from dist/index.js');\n        appModule = await import('./dist/index.js');\n      } else {\n        console.log('ğŸ“ Using TypeScript server (compiling on the fly)');\n        // Use tsx to import TypeScript directly\n        const { spawn } = await import('child_process');\n        \n        // Start the TypeScript server as a child process\n        const serverProcess = spawn('npx', ['tsx', 'server/index.ts'], {\n          stdio: 'pipe',\n          env: {\n            ...process.env,\n            NODE_ENV: 'production',\n            PORT: (port + 1).toString(), // Use a different port for the backend\n            APP_URL: `http://localhost:${port}`\n          }\n        });\n\n        // Proxy API requests to the TypeScript server\n        const { createProxyMiddleware } = await import('http-proxy-middleware');\n        \n        app.use('/api', createProxyMiddleware({\n          target: `http://localhost:${port + 1}`,\n          changeOrigin: true,\n          onError: (err, req, res) => {\n            console.error('Proxy error:', err.message);\n            res.status(500).json({ error: 'Backend service unavailable' });\n          }\n        }));\n\n        // Handle server process\n        serverProcess.stdout.on('data', (data) => {\n          console.log(`[Backend] ${data.toString().trim()}`);\n        });\n\n        serverProcess.stderr.on('data', (data) => {\n          console.error(`[Backend Error] ${data.toString().trim()}`);\n        });\n\n        // Wait for server to be ready\n        await new Promise((resolve) => {\n          setTimeout(resolve, 3000); // Give the server time to start\n        });\n      }\n\n      appInitialized = true;\n      console.log('âœ… TeamMove application initialized');\n    } catch (error) {\n      console.error('âŒ Failed to initialize application:', error);\n      throw error;\n    }\n  }\n}\n\n// Health check endpoint (available immediately)\napp.get('/api/health', (req, res) => {\n  res.json({\n    status: 'healthy',\n    timestamp: new Date().toISOString(),\n    environment: 'render-dev-simulation',\n    version: '1.0.0'\n  });\n});\n\n// Initialize app on first request if not using compiled version\napp.use(async (req, res, next) => {\n  if (!req.path.startsWith('/api') || appInitialized || fs.existsSync('./dist/index.js')) {\n    return next();\n  }\n\n  try {\n    await initializeApp();\n    next();\n  } catch (error) {\n    console.error('App initialization failed:', error);\n    res.status(500).json({ error: 'Application initialization failed' });\n  }\n});\n\n// Static files from dist/public (like Render)\nconst publicPath = path.join(__dirname, 'dist', 'public');\nif (fs.existsSync(publicPath)) {\n  console.log(`ğŸ“ Serving static files from: ${publicPath}`);\n  app.use(express.static(publicPath, {\n    maxAge: '1d',\n    etag: true,\n    lastModified: true\n  }));\n} else {\n  console.warn(`âš ï¸  Build directory not found: ${publicPath}`);\n  console.warn('   Run: npm run build:render');\n}\n\n// Catch-all for SPA routing (like Render)\napp.get('*', (req, res) => {\n  const indexPath = path.join(publicPath, 'index.html');\n  \n  if (fs.existsSync(indexPath)) {\n    console.log(`ğŸ“„ Serving SPA for: ${req.path}`);\n    res.sendFile(indexPath);\n  } else {\n    console.error(`âŒ index.html not found: ${indexPath}`);\n    res.status(404).send(`\n      <h1>TeamMove - Build Required</h1>\n      <p>Please run the build command:</p>\n      <pre>npm run build:render</pre>\n      <p>Then restart this server.</p>\n    `);\n  }\n});\n\n// Error handling\napp.use((err, req, res, next) => {\n  console.error('Unhandled error:', err);\n  res.status(500).json({\n    error: 'Internal Server Error',\n    message: process.env.NODE_ENV === 'development' ? err.message : 'Something went wrong'\n  });\n});\n\n// Start server\napp.listen(port, '0.0.0.0', async () => {\n  console.log(`âœ… Render Development Server started!`);\n  console.log(`ğŸŒ URL: http://localhost:${port}`);\n  console.log(`ğŸ¥ Health: http://localhost:${port}/api/health`);\n  console.log(`ğŸ“ Static: ${publicPath}`);\n  \n  // Try to initialize if we have a compiled version\n  if (fs.existsSync('./dist/index.js')) {\n    try {\n      await initializeApp();\n    } catch (error) {\n      console.error('Failed to initialize compiled app:', error);\n    }\n  }\n  \n  console.log('\\nğŸ¯ This environment simulates Render.com exactly!');\n  console.log('ğŸ“‹ Test your deployment before pushing to production');\n  \n  // Check if build exists\n  if (!fs.existsSync(publicPath)) {\n    console.log('\\nâš ï¸  No build found. Run: npm run build:render');\n  } else {\n    console.log('\\nâœ… Build found and ready to serve');\n  }\n});","size_bytes":6695},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \"var(--radius)\",\n        md: \"calc(var(--radius) - 2px)\",\n        sm: \"calc(var(--radius) - 4px)\",\n      },\n      colors: {\n        background: \"var(--background)\",\n        foreground: \"var(--foreground)\",\n        card: {\n          DEFAULT: \"var(--card)\",\n          foreground: \"var(--card-foreground)\",\n        },\n        popover: {\n          DEFAULT: \"var(--popover)\",\n          foreground: \"var(--popover-foreground)\",\n        },\n        primary: {\n          DEFAULT: \"var(--primary)\",\n          foreground: \"var(--primary-foreground)\",\n        },\n        secondary: {\n          DEFAULT: \"var(--secondary)\",\n          foreground: \"var(--secondary-foreground)\",\n        },\n        muted: {\n          DEFAULT: \"var(--muted)\",\n          foreground: \"var(--muted-foreground)\",\n        },\n        accent: {\n          DEFAULT: \"var(--accent)\",\n          foreground: \"var(--accent-foreground)\",\n        },\n        destructive: {\n          DEFAULT: \"var(--destructive)\",\n          foreground: \"var(--destructive-foreground)\",\n        },\n        border: \"var(--border)\",\n        input: \"var(--input)\",\n        ring: \"var(--ring)\",\n        chart: {\n          \"1\": \"var(--chart-1)\",\n          \"2\": \"var(--chart-2)\",\n          \"3\": \"var(--chart-3)\",\n          \"4\": \"var(--chart-4)\",\n          \"5\": \"var(--chart-5)\",\n        },\n        sidebar: {\n          DEFAULT: \"var(--sidebar)\",\n          foreground: \"var(--sidebar-foreground)\",\n          primary: \"var(--sidebar-primary)\",\n          \"primary-foreground\": \"var(--sidebar-primary-foreground)\",\n          accent: \"var(--sidebar-accent)\",\n          \"accent-foreground\": \"var(--sidebar-accent-foreground)\",\n          border: \"var(--sidebar-border)\",\n          ring: \"var(--sidebar-ring)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n        \"fade-in\": \"fadeIn 0.3s ease-out\",\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n        fadeIn: {\n          from: { opacity: \"0\", transform: \"translateY(10px)\" },\n          to: { opacity: \"1\", transform: \"translateY(0)\" },\n        },\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":2860},"test-render-deployment.js":{"content":"#!/usr/bin/env node\n\n/**\n * Script de test pour valider le dÃ©ploiement Render\n * Usage: node test-render-deployment.js [URL_BASE]\n */\n\nconst https = require('https');\nconst http = require('http');\n\n// URL de base (peut Ãªtre passÃ©e en argument ou utilise la valeur par dÃ©faut)\nconst BASE_URL = process.argv[2] || 'https://teammove.fr';\n\nconsole.log(`ğŸ§ª Testing Render deployment at: ${BASE_URL}`);\nconsole.log('=' .repeat(60));\n\n/**\n * Effectue une requÃªte HTTP et retourne une promesse\n */\nfunction makeRequest(url, options = {}) {\n  return new Promise((resolve, reject) => {\n    const client = url.startsWith('https:') ? https : http;\n    const req = client.request(url, {\n      method: 'GET',\n      headers: {\n        'User-Agent': 'TeamMove-Test-Script/1.0',\n        'Accept': 'application/json',\n        ...options.headers\n      },\n      ...options\n    }, (res) => {\n      let data = '';\n      res.on('data', (chunk) => data += chunk);\n      res.on('end', () => {\n        resolve({\n          status: res.statusCode,\n          statusMessage: res.statusMessage,\n          headers: res.headers,\n          data: data\n        });\n      });\n    });\n\n    req.on('error', reject);\n    req.setTimeout(30000, () => {\n      req.destroy();\n      reject(new Error('Request timeout'));\n    });\n\n    if (options.body) {\n      req.write(options.body);\n    }\n    req.end();\n  });\n}\n\n/**\n * Tests Ã  exÃ©cuter\n */\nconst tests = [\n  {\n    name: 'ğŸ  Page d\\'accueil (Static)',\n    url: `${BASE_URL}`,\n    expectedStatus: 200,\n    description: 'VÃ©rifier que la page d\\'accueil se charge correctement'\n  },\n  {\n    name: 'ğŸ” Health Check',\n    url: `${BASE_URL}/api/health`,\n    expectedStatus: 200,\n    description: 'VÃ©rifier l\\'Ã©tat gÃ©nÃ©ral de l\\'application'\n  },\n  {\n    name: 'ğŸ’¾ Database Connection Test',\n    url: `${BASE_URL}/api/db-test`,\n    expectedStatus: 200,\n    description: 'Tester la connexion Ã  la base de donnÃ©es Neon'\n  },\n  {\n    name: 'ğŸ“¡ Backend Communication Test',\n    url: `${BASE_URL}/api/test`,\n    expectedStatus: 200,\n    description: 'Tester la communication avec le backend'\n  },\n  {\n    name: 'ğŸª Session Test',\n    url: `${BASE_URL}/api/session-test`,\n    expectedStatus: 200,\n    description: 'Tester la configuration des sessions'\n  },\n  {\n    name: 'ğŸ‘¥ Debug Users (Public)',\n    url: `${BASE_URL}/api/debug/users`,\n    expectedStatus: 200,\n    description: 'Lister les utilisateurs existants (pour debug)'\n  },\n  {\n    name: 'ğŸ” Authentication Test (should fail)',\n    url: `${BASE_URL}/api/me`,\n    expectedStatus: 401,\n    description: 'VÃ©rifier que l\\'authentification est requise'\n  }\n];\n\n/**\n * ExÃ©cute un test individuel\n */\nasync function runTest(test) {\n  console.log(`\\n${test.name}`);\n  console.log(`ğŸ“ URL: ${test.url}`);\n  console.log(`ğŸ“„ Description: ${test.description}`);\n  \n  try {\n    const startTime = Date.now();\n    const result = await makeRequest(test.url);\n    const duration = Date.now() - startTime;\n    \n    console.log(`â±ï¸  Response time: ${duration}ms`);\n    console.log(`ğŸ“Š Status: ${result.status} ${result.statusMessage}`);\n    \n    // VÃ©rifier le statut attendu\n    if (result.status === test.expectedStatus) {\n      console.log(`âœ… Status check: PASSED (expected ${test.expectedStatus})`);\n    } else {\n      console.log(`âŒ Status check: FAILED (expected ${test.expectedStatus}, got ${result.status})`);\n      return false;\n    }\n    \n    // Tenter de parser le JSON si applicable\n    if (result.headers['content-type']?.includes('application/json')) {\n      try {\n        const jsonData = JSON.parse(result.data);\n        console.log(`ğŸ“¦ Response data preview:`, JSON.stringify(jsonData, null, 2).substring(0, 300) + '...');\n        \n        // Tests spÃ©cifiques selon l'endpoint\n        if (test.url.includes('/api/health')) {\n          if (jsonData.status === 'healthy') {\n            console.log(`ğŸ’š Health check: HEALTHY`);\n          } else {\n            console.log(`ğŸŸ¡ Health check: ${jsonData.status}`);\n          }\n        }\n        \n        if (test.url.includes('/api/db-test')) {\n          if (jsonData.status?.includes('successful')) {\n            console.log(`ğŸ’š Database: CONNECTED`);\n          } else {\n            console.log(`ğŸ”´ Database: ${jsonData.status || 'UNKNOWN'}`);\n          }\n        }\n        \n      } catch (parseError) {\n        console.log(`ğŸŸ¡ JSON parse warning: ${parseError.message}`);\n      }\n    } else {\n      console.log(`ğŸ“„ Content type: ${result.headers['content-type'] || 'unknown'}`);\n      console.log(`ğŸ“ Content length: ${result.data.length} characters`);\n    }\n    \n    return true;\n    \n  } catch (error) {\n    console.log(`âŒ Request failed: ${error.message}`);\n    return false;\n  }\n}\n\n/**\n * Fonction principale\n */\nasync function main() {\n  console.log(`ğŸš€ Starting TeamMove Render deployment tests`);\n  console.log(`ğŸ¯ Target: ${BASE_URL}`);\n  console.log(`ğŸ“… Time: ${new Date().toISOString()}`);\n  \n  let passedTests = 0;\n  let totalTests = tests.length;\n  \n  for (const test of tests) {\n    const success = await runTest(test);\n    if (success) passedTests++;\n    \n    // Petite pause entre les tests\n    await new Promise(resolve => setTimeout(resolve, 1000));\n  }\n  \n  console.log('\\n' + '='.repeat(60));\n  console.log(`ğŸ“Š Test Results: ${passedTests}/${totalTests} tests passed`);\n  \n  if (passedTests === totalTests) {\n    console.log(`ğŸ‰ All tests PASSED! Your Render deployment looks good.`);\n    process.exit(0);\n  } else {\n    console.log(`âš ï¸  Some tests FAILED. Check the logs above for details.`);\n    process.exit(1);\n  }\n}\n\n// Gestion des erreurs non capturÃ©es\nprocess.on('unhandledRejection', (error) => {\n  console.error('ğŸ’¥ Unhandled rejection:', error);\n  process.exit(1);\n});\n\nprocess.on('uncaughtException', (error) => {\n  console.error('ğŸ’¥ Uncaught exception:', error);\n  process.exit(1);\n});\n\n// ExÃ©cuter les tests\nmain().catch(console.error);","size_bytes":5963},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nconst isProduction = process.env.NODE_ENV === \"production\";\nconst isRenderBuild = process.env.RENDER === \"true\";\n\nexport default defineConfig({\n  base: process.env.VITE_BASE_URL || '/',\n  plugins: [\n    react({\n      // Disable Fast Refresh in production for better memory usage\n      fastRefresh: !isProduction,\n    }),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n    // Memory optimization for Render deployment\n    target: 'es2018',\n    sourcemap: isRenderBuild ? false : true,\n    minify: isRenderBuild ? 'esbuild' : 'esbuild',\n    // Reduce chunk size and improve loading\n    chunkSizeWarningLimit: 1000,\n    rollupOptions: {\n      // Reduce memory usage during build\n      maxParallelFileOps: isRenderBuild ? 2 : 5,\n      output: {\n        // Manual chunking for better performance\n        manualChunks: {\n          // Core React libraries\n          'react-vendor': ['react', 'react-dom'],\n          // UI libraries\n          'ui-vendor': [\n            '@radix-ui/react-dialog',\n            '@radix-ui/react-dropdown-menu',\n            '@radix-ui/react-label',\n            '@radix-ui/react-select',\n            '@radix-ui/react-tabs',\n            '@radix-ui/react-toast',\n            'class-variance-authority',\n            'clsx',\n            'tailwind-merge'\n          ],\n          // Form handling\n          'form-vendor': [\n            'react-hook-form',\n            '@hookform/resolvers',\n            'zod'\n          ],\n          // Utils and smaller libraries\n          'utils-vendor': [\n            'lucide-react',\n            'date-fns',\n            'js-cookie'\n          ]\n        },\n        // Optimize chunk naming\n        chunkFileNames: (chunkInfo) => {\n          const facadeModuleId = chunkInfo.facadeModuleId\n            ? chunkInfo.facadeModuleId.split('/').pop().replace(/\\.[^.]+$/, '')\n            : 'chunk';\n          return `js/${facadeModuleId}-[hash].js`;\n        },\n        assetFileNames: (assetInfo) => {\n          const info = assetInfo.name.split('.');\n          const ext = info[info.length - 1];\n          if (/png|jpe?g|svg|gif|tiff|bmp|ico/i.test(ext)) {\n            return `img/[name]-[hash][extname]`;\n          }\n          if (/css/i.test(ext)) {\n            return `css/[name]-[hash][extname]`;\n          }\n          return `assets/[name]-[hash][extname]`;\n        },\n        entryFileNames: `js/[name]-[hash].js`,\n      },\n    },\n  },\n  // Optimize dependencies\n  optimizeDeps: {\n    include: [\n      'react',\n      'react-dom',\n      'react-hook-form',\n      '@hookform/resolvers/zod',\n      'zod',\n      'lucide-react',\n      'clsx',\n      'tailwind-merge'\n    ],\n    // Reduce memory during optimization\n    ...(isRenderBuild && {\n      force: true,\n    }),\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n  // Performance optimizations\n  esbuild: {\n    // Reduce memory usage during build\n    ...(isRenderBuild && {\n      logOverride: {\n        'this-is-undefined-in-esm': 'silent',\n      },\n    }),\n  },\n});\n","size_bytes":3775},"vitest.config.ts":{"content":"import { defineConfig } from 'vitest/config';\nimport path from 'path';\n\nexport default defineConfig({\n  test: {\n    globals: true,\n    environment: 'node',\n    setupFiles: ['./tests/setup.ts'],\n  },\n  resolve: {\n    alias: {\n      '@shared': path.resolve(__dirname, './shared'),\n      '@server': path.resolve(__dirname, './server'),\n    },\n  },\n});","size_bytes":348},"scripts/create-admin.js":{"content":"#!/usr/bin/env node\n\n/**\n * Script pour crÃ©er un utilisateur administrateur\n * Usage: node scripts/create-admin.js\n */\n\nconst { storage } = require('../server/storage');\nconst { hashPassword } = require('../server/auth');\nconst readline = require('readline');\n\nconst rl = readline.createInterface({\n  input: process.stdin,\n  output: process.stdout\n});\n\nfunction question(query) {\n  return new Promise(resolve => rl.question(query, resolve));\n}\n\nasync function createAdminUser() {\n  console.log('ğŸ”§ CrÃ©ation d\\'un utilisateur administrateur TeamMove\\n');\n\n  try {\n    // Collect admin information\n    const adminData = {\n      name: await question('Nom de l\\'organisation admin: ') || 'TeamMove Admin',\n      email: await question('Email administrateur: ') || 'admin@TeamMove.com',\n      contactFirstName: await question('PrÃ©nom: ') || 'Admin',\n      contactLastName: await question('Nom: ') || 'TeamMove',\n      phone: await question('TÃ©lÃ©phone (optionnel): ') || '',\n      address: await question('Adresse (optionnel): ') || '',\n    };\n\n    let password = await question('Mot de passe (laissez vide pour gÃ©nÃ©rer automatiquement): ');\n    \n    if (!password) {\n      // Generate a secure random password\n      password = Math.random().toString(36).slice(-12) + Math.random().toString(36).slice(-12);\n      console.log(`\\nğŸ”‘ Mot de passe gÃ©nÃ©rÃ© automatiquement: ${password}`);\n      console.log('âš ï¸  IMPORTANT: Notez ce mot de passe dans un endroit sÃ©curisÃ©!\\n');\n    }\n\n    // Check if admin already exists\n    const existingAdmin = await storage.getOrganizationByEmail(adminData.email);\n    if (existingAdmin) {\n      console.log('âŒ Un utilisateur avec cet email existe dÃ©jÃ .');\n      \n      const updateChoice = await question('Voulez-vous le mettre Ã  jour en tant qu\\'admin? (y/n): ');\n      if (updateChoice.toLowerCase() === 'y' || updateChoice.toLowerCase() === 'yes') {\n        // Update existing user to admin\n        await storage.updateOrganization(existingAdmin.id, {\n          role: 'admin',\n          isActive: true,\n          planType: 'enterprise'\n        });\n        \n        console.log('âœ… Utilisateur existant mis Ã  jour avec les droits d\\'administrateur.');\n        console.log(`ğŸ“§ Email: ${existingAdmin.email}`);\n        console.log('ğŸ”— AccÃ¨s: https://teammove.fr/admin');\n      }\n    } else {\n      // Create new admin user\n      const hashedPassword = await hashPassword(password);\n      \n      const newAdmin = await storage.createOrganization({\n        ...adminData,\n        password: hashedPassword,\n        role: 'admin',\n        isActive: true,\n        planType: 'enterprise',\n        features: ['unlimited_events', 'priority_support', 'admin_dashboard', 'analytics'],\n        createdAt: new Date(),\n        updatedAt: new Date(),\n      });\n\n      console.log('âœ… Utilisateur administrateur crÃ©Ã© avec succÃ¨s!');\n      console.log('\\nğŸ“‹ Informations de connexion:');\n      console.log(`ğŸ“§ Email: ${adminData.email}`);\n      console.log(`ğŸ”‘ Mot de passe: ${password}`);\n      console.log('ğŸ”— URL de connexion: https://teammove.fr/admin');\n      console.log('\\nâš ï¸  IMPORTANT:');\n      console.log('- Conservez ces informations dans un endroit sÃ©curisÃ©');\n      console.log('- Changez le mot de passe aprÃ¨s la premiÃ¨re connexion');\n      console.log('- L\\'administrateur peut gÃ©rer toutes les organisations');\n    }\n\n  } catch (error) {\n    console.error('âŒ Erreur lors de la crÃ©ation de l\\'administrateur:', error);\n    process.exit(1);\n  } finally {\n    rl.close();\n  }\n}\n\nasync function main() {\n  try {\n    console.log('ğŸš€ Initialisation de la base de donnÃ©es...');\n    \n    // Initialize storage connection\n    await storage.initializeDatabase?.();\n    console.log('âœ… Base de donnÃ©es initialisÃ©e\\n');\n    \n    await createAdminUser();\n    \n    console.log('\\nğŸ‰ Configuration administrateur terminÃ©e!');\n    process.exit(0);\n  } catch (error) {\n    console.error('âŒ Erreur fatale:', error);\n    process.exit(1);\n  }\n}\n\n// Handle process termination\nprocess.on('SIGINT', () => {\n  console.log('\\nğŸ‘‹ ArrÃªt du script...');\n  rl.close();\n  process.exit(0);\n});\n\n// Run the script\nif (require.main === module) {\n  main();\n}\n\nmodule.exports = { createAdminUser };","size_bytes":4278},"scripts/docker-build.sh":{"content":"#!/bin/bash\n\n# Script de build et push Docker pour TeamMove\n# Usage: ./scripts/docker-build.sh [tag]\n\nset -e\n\n# Configuration\nDOCKER_USERNAME=\"lthebest\"\nIMAGE_NAME=\"TeamMove\"\nDEFAULT_TAG=\"latest\"\n\n# Utilise le tag passÃ© en paramÃ¨tre ou le tag par dÃ©faut\nTAG=${1:-$DEFAULT_TAG}\nFULL_IMAGE_NAME=\"${DOCKER_USERNAME}/${IMAGE_NAME}:${TAG}\"\n\necho \"ğŸ—ï¸  Building Docker image for TeamMove...\"\necho \"ğŸ“¦ Image: ${FULL_IMAGE_NAME}\"\n\n# Build l'image\ndocker build -t ${FULL_IMAGE_NAME} .\n\necho \"âœ… Build completed successfully!\"\n\n# Demande de confirmation pour le push\nread -p \"ğŸš€ Push to Docker Hub? (y/n): \" -n 1 -r\necho\nif [[ $REPLY =~ ^[Yy]$ ]]; then\n    echo \"ğŸ” Logging in to Docker Hub...\"\n    docker login\n    \n    echo \"ğŸ“¤ Pushing image to Docker Hub...\"\n    docker push ${FULL_IMAGE_NAME}\n    \n    echo \"âœ… Image pushed successfully!\"\n    echo \"ğŸŒ Pull command: docker pull ${FULL_IMAGE_NAME}\"\nelse\n    echo \"â¸ï¸  Skipping push to Docker Hub\"\nfi\n\n# Afficher la taille de l'image\necho \"ğŸ“Š Image size:\"\ndocker images ${FULL_IMAGE_NAME} --format \"table {{.Repository}}\\t{{.Tag}}\\t{{.Size}}\"\n\necho \"\"\necho \"ğŸ‰ Docker build completed!\"\necho \"ğŸš€ Run locally with: docker run -p 3000:3000 ${FULL_IMAGE_NAME}\"","size_bytes":1227},"server/admin-communication.ts":{"content":"import { db } from './db';\nimport { adminConversations, adminMessages, organizations, notifications } from '../shared/schema';\nimport { eq, desc, and } from 'drizzle-orm';\nimport { sendEmail } from './email';\n\nexport interface CreateConversationRequest {\n  organizationId: string;\n  subject: string;\n  message: string;\n  priority?: 'low' | 'medium' | 'high' | 'urgent';\n}\n\nexport interface SendMessageRequest {\n  conversationId: string;\n  senderId: string;\n  senderType: 'admin' | 'organization';\n  message: string;\n  messageType?: 'text' | 'system' | 'attachment';\n  attachmentUrl?: string;\n}\n\n/**\n * CrÃ©e une nouvelle conversation avec l'admin\n */\nexport async function createConversation(request: CreateConversationRequest) {\n  try {\n    // VÃ©rifier que l'organisation existe\n    const organization = await db.select()\n      .from(organizations)\n      .where(eq(organizations.id, request.organizationId))\n      .limit(1);\n\n    if (!organization[0]) {\n      throw new Error('Organisation non trouvÃ©e');\n    }\n\n    const org = organization[0];\n\n    // CrÃ©er la conversation\n    const conversation = await db.insert(adminConversations).values({\n      organizationId: request.organizationId,\n      subject: request.subject,\n      priority: request.priority || 'medium',\n      status: 'open',\n    }).returning();\n\n    if (!conversation[0]) {\n      throw new Error('Erreur lors de la crÃ©ation de la conversation');\n    }\n\n    // Ajouter le premier message\n    await db.insert(adminMessages).values({\n      conversationId: conversation[0].id,\n      senderId: request.organizationId,\n      senderType: 'organization',\n      message: request.message,\n      messageType: 'text',\n    });\n\n    // CrÃ©er une notification pour l'organisation\n    await db.insert(notifications).values({\n      organizationId: request.organizationId,\n      type: 'info',\n      title: 'Message envoyÃ© Ã  l\\'administration',\n      message: `Votre message avec le sujet \"${request.subject}\" a Ã©tÃ© envoyÃ© Ã  l'administration. Vous recevrez une rÃ©ponse sous peu.`,\n    });\n\n    // Envoyer un email de notification Ã  l'admin (optionnel)\n    try {\n      await sendEmail({\n        to: process.env.ADMIN_EMAIL || 'admin@TeamMove.app',\n        subject: `[TeamMove] Nouveau message de ${org.name}`,\n        html: `\n          <h2>Nouveau message de support</h2>\n          <p><strong>Organisation :</strong> ${org.name}</p>\n          <p><strong>Email :</strong> ${org.email}</p>\n          <p><strong>Sujet :</strong> ${request.subject}</p>\n          <p><strong>PrioritÃ© :</strong> ${request.priority}</p>\n          <p><strong>Message :</strong></p>\n          <div style=\"background: #f5f5f5; padding: 15px; border-radius: 5px; margin: 10px 0;\">\n            ${request.message.replace(/\\n/g, '<br>')}\n          </div>\n          <p><a href=\"${process.env.APP_URL}/admin/conversations/${conversation[0].id}\">RÃ©pondre</a></p>\n        `,\n      });\n    } catch (emailError) {\n      console.error('Erreur lors de l\\'envoi de l\\'email admin:', emailError);\n    }\n\n    return conversation[0];\n  } catch (error) {\n    console.error('Erreur lors de la crÃ©ation de la conversation:', error);\n    throw error;\n  }\n}\n\n/**\n * Envoie un message dans une conversation existante\n */\nexport async function sendMessage(request: SendMessageRequest) {\n  try {\n    // VÃ©rifier que la conversation existe\n    const conversation = await db.select()\n      .from(adminConversations)\n      .where(eq(adminConversations.id, request.conversationId))\n      .limit(1);\n\n    if (!conversation[0]) {\n      throw new Error('Conversation non trouvÃ©e');\n    }\n\n    const conv = conversation[0];\n\n    // VÃ©rifier les permissions\n    if (request.senderType === 'organization' && conv.organizationId !== request.senderId) {\n      throw new Error('Permissions insuffisantes');\n    }\n\n    // Ajouter le message\n    const message = await db.insert(adminMessages).values({\n      conversationId: request.conversationId,\n      senderId: request.senderId,\n      senderType: request.senderType,\n      message: request.message,\n      messageType: request.messageType || 'text',\n      attachmentUrl: request.attachmentUrl,\n    }).returning();\n\n    // Mettre Ã  jour la conversation\n    await db.update(adminConversations)\n      .set({\n        lastMessageAt: new Date(),\n        status: request.senderType === 'organization' ? 'pending' : 'open',\n        updatedAt: new Date(),\n      })\n      .where(eq(adminConversations.id, request.conversationId));\n\n    // Obtenir les informations de l'expÃ©diteur\n    const sender = await db.select()\n      .from(organizations)\n      .where(eq(organizations.id, request.senderId))\n      .limit(1);\n\n    const senderInfo = sender[0];\n\n    // CrÃ©er des notifications\n    if (request.senderType === 'admin') {\n      // Message de l'admin vers l'organisation\n      await db.insert(notifications).values({\n        organizationId: conv.organizationId,\n        type: 'info',\n        title: 'Nouvelle rÃ©ponse de l\\'administration',\n        message: `L'administration a rÃ©pondu Ã  votre message concernant \"${conv.subject}\".`,\n        actionUrl: `/dashboard/support/${request.conversationId}`,\n      });\n\n      // Envoyer un email Ã  l'organisation\n      const organization = await db.select()\n        .from(organizations)\n        .where(eq(organizations.id, conv.organizationId))\n        .limit(1);\n\n      if (organization[0]) {\n        try {\n          await sendEmail({\n            to: organization[0].email,\n            subject: `[TeamMove] RÃ©ponse de l'administration - ${conv.subject}`,\n            html: `\n              <h2>Nouvelle rÃ©ponse de l'administration</h2>\n              <p>Bonjour ${organization[0].contactFirstName},</p>\n              <p>L'administration a rÃ©pondu Ã  votre message concernant \"<strong>${conv.subject}</strong>\".</p>\n              <div style=\"background: #f8f9fa; padding: 15px; border-radius: 5px; margin: 15px 0; border-left: 4px solid #007bff;\">\n                ${request.message.replace(/\\n/g, '<br>')}\n              </div>\n              <p><a href=\"${process.env.APP_URL}/dashboard/support/${request.conversationId}\" style=\"background: #007bff; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px;\">Voir la conversation</a></p>\n              <p>Cordialement,<br>L'Ã©quipe TeamMove</p>\n            `,\n          });\n        } catch (emailError) {\n          console.error('Erreur lors de l\\'envoi de l\\'email Ã  l\\'organisation:', emailError);\n        }\n      }\n    } else {\n      // Message de l'organisation vers l'admin\n      try {\n        await sendEmail({\n          to: process.env.ADMIN_EMAIL || 'admin@TeamMove.app',\n          subject: `[TeamMove] RÃ©ponse de ${senderInfo?.name || 'Organisation'} - ${conv.subject}`,\n          html: `\n            <h2>Nouvelle rÃ©ponse de ${senderInfo?.name || 'Organisation'}</h2>\n            <p><strong>Conversation :</strong> ${conv.subject}</p>\n            <p><strong>Organisation :</strong> ${senderInfo?.name}</p>\n            <p><strong>Email :</strong> ${senderInfo?.email}</p>\n            <div style=\"background: #f5f5f5; padding: 15px; border-radius: 5px; margin: 10px 0;\">\n              ${request.message.replace(/\\n/g, '<br>')}\n            </div>\n            <p><a href=\"${process.env.APP_URL}/admin/conversations/${request.conversationId}\">RÃ©pondre</a></p>\n          `,\n        });\n      } catch (emailError) {\n        console.error('Erreur lors de l\\'envoi de l\\'email admin:', emailError);\n      }\n    }\n\n    return message[0];\n  } catch (error) {\n    console.error('Erreur lors de l\\'envoi du message:', error);\n    throw error;\n  }\n}\n\n/**\n * RÃ©cupÃ¨re les conversations d'une organisation\n */\nexport async function getOrganizationConversations(organizationId: string) {\n  try {\n    const conversations = await db.select({\n      id: adminConversations.id,\n      subject: adminConversations.subject,\n      status: adminConversations.status,\n      priority: adminConversations.priority,\n      lastMessageAt: adminConversations.lastMessageAt,\n      createdAt: adminConversations.createdAt,\n    })\n      .from(adminConversations)\n      .where(eq(adminConversations.organizationId, organizationId))\n      .orderBy(desc(adminConversations.lastMessageAt));\n\n    return conversations;\n  } catch (error) {\n    console.error('Erreur lors de la rÃ©cupÃ©ration des conversations:', error);\n    throw error;\n  }\n}\n\n/**\n * RÃ©cupÃ¨re les messages d'une conversation\n */\nexport async function getConversationMessages(conversationId: string, organizationId?: string) {\n  try {\n    // VÃ©rifier les permissions si organizationId est fourni\n    if (organizationId) {\n      const conversation = await db.select()\n        .from(adminConversations)\n        .where(eq(adminConversations.id, conversationId))\n        .limit(1);\n\n      if (!conversation[0] || conversation[0].organizationId !== organizationId) {\n        throw new Error('Permissions insuffisantes');\n      }\n    }\n\n    const messages = await db.select({\n      id: adminMessages.id,\n      senderId: adminMessages.senderId,\n      senderType: adminMessages.senderType,\n      message: adminMessages.message,\n      messageType: adminMessages.messageType,\n      attachmentUrl: adminMessages.attachmentUrl,\n      read: adminMessages.read,\n      createdAt: adminMessages.createdAt,\n      senderName: organizations.name,\n      senderEmail: organizations.email,\n    })\n      .from(adminMessages)\n      .leftJoin(organizations, eq(adminMessages.senderId, organizations.id))\n      .where(eq(adminMessages.conversationId, conversationId))\n      .orderBy(adminMessages.createdAt);\n\n    return messages;\n  } catch (error) {\n    console.error('Erreur lors de la rÃ©cupÃ©ration des messages:', error);\n    throw error;\n  }\n}\n\n/**\n * Marque les messages comme lus\n */\nexport async function markMessagesAsRead(conversationId: string, userId: string, userType: 'admin' | 'organization') {\n  try {\n    await db.update(adminMessages)\n      .set({ read: true })\n      .where(\n        and(\n          eq(adminMessages.conversationId, conversationId),\n          // Marquer comme lus les messages qui ne sont PAS de l'utilisateur actuel\n          userType === 'admin' \n            ? eq(adminMessages.senderType, 'organization')\n            : eq(adminMessages.senderType, 'admin')\n        )\n      );\n\n    return { success: true };\n  } catch (error) {\n    console.error('Erreur lors du marquage des messages comme lus:', error);\n    throw error;\n  }\n}\n\n/**\n * Ferme une conversation\n */\nexport async function closeConversation(conversationId: string, closedByType: 'admin' | 'organization') {\n  try {\n    const conversation = await db.update(adminConversations)\n      .set({\n        status: 'closed',\n        updatedAt: new Date(),\n      })\n      .where(eq(adminConversations.id, conversationId))\n      .returning();\n\n    if (!conversation[0]) {\n      throw new Error('Conversation non trouvÃ©e');\n    }\n\n    // Ajouter un message systÃ¨me\n    await db.insert(adminMessages).values({\n      conversationId,\n      senderId: closedByType === 'admin' ? 'admin' : conversation[0].organizationId,\n      senderType: closedByType,\n      message: `Conversation fermÃ©e par ${closedByType === 'admin' ? 'l\\'administration' : 'l\\'organisation'}.`,\n      messageType: 'system',\n    });\n\n    // Notification pour l'organisation si fermÃ©e par l'admin\n    if (closedByType === 'admin') {\n      await db.insert(notifications).values({\n        organizationId: conversation[0].organizationId,\n        type: 'info',\n        title: 'Conversation fermÃ©e',\n        message: `La conversation \"${conversation[0].subject}\" a Ã©tÃ© fermÃ©e par l'administration.`,\n      });\n    }\n\n    return { success: true };\n  } catch (error) {\n    console.error('Erreur lors de la fermeture de la conversation:', error);\n    throw error;\n  }\n}\n\n/**\n * RÃ©cupÃ¨re toutes les conversations pour l'admin\n */\nexport async function getAllConversationsForAdmin() {\n  try {\n    const conversations = await db.select({\n      id: adminConversations.id,\n      organizationId: adminConversations.organizationId,\n      organizationName: organizations.name,\n      organizationEmail: organizations.email,\n      subject: adminConversations.subject,\n      status: adminConversations.status,\n      priority: adminConversations.priority,\n      lastMessageAt: adminConversations.lastMessageAt,\n      createdAt: adminConversations.createdAt,\n    })\n      .from(adminConversations)\n      .leftJoin(organizations, eq(adminConversations.organizationId, organizations.id))\n      .orderBy(desc(adminConversations.lastMessageAt));\n\n    return conversations;\n  } catch (error) {\n    console.error('Erreur lors de la rÃ©cupÃ©ration des conversations admin:', error);\n    throw error;\n  }\n}","size_bytes":12713},"server/auth.ts":{"content":"import jwt from \"jsonwebtoken\";\nimport bcrypt from \"bcrypt\";\nimport { Request, Response, NextFunction } from \"express\";\n\n// Configuration JWT sÃ©curisÃ©e\nconst JWT_CONFIG = {\n  ACCESS_TOKEN_SECRET: process.env.JWT_ACCESS_SECRET || \"access-secret-key-change-in-production\",\n  REFRESH_TOKEN_SECRET: process.env.JWT_REFRESH_SECRET || \"refresh-secret-key-change-in-production\", \n  ACCESS_TOKEN_EXPIRES_IN: process.env.JWT_ACCESS_EXPIRES_IN || \"15m\", // 15 minutes par dÃ©faut\n  REFRESH_TOKEN_EXPIRES_IN: process.env.JWT_REFRESH_EXPIRES_IN || \"7d\", // 7 jours par dÃ©faut\n  ISSUER: process.env.JWT_ISSUER || \"TeamMove\",\n  ALGORITHM: \"HS256\" as const,\n};\n\n// Interface pour les claims JWT\nexport interface JWTPayload {\n  organizationId: string;\n  email: string;\n  name: string;\n  type: \"access\" | \"refresh\";\n  iat?: number;\n  exp?: number;\n  iss?: string;\n}\n\n// Interface pour l'utilisateur authentifiÃ© dans la requÃªte\nexport interface AuthenticatedRequest extends Request {\n  user: {\n    organizationId: string;\n    email: string;\n    name: string;\n  };\n}\n\n/**\n * GÃ©nÃ¨re un token d'accÃ¨s JWT sÃ©curisÃ©\n */\nexport function generateAccessToken(payload: Omit<JWTPayload, \"type\" | \"iat\" | \"exp\" | \"iss\">): string {\n  return jwt.sign(\n    {\n      ...payload,\n      type: \"access\",\n    },\n    JWT_CONFIG.ACCESS_TOKEN_SECRET,\n    {\n      expiresIn: JWT_CONFIG.ACCESS_TOKEN_EXPIRES_IN,\n      issuer: JWT_CONFIG.ISSUER,\n      algorithm: JWT_CONFIG.ALGORITHM,\n    }\n  );\n}\n\n/**\n * GÃ©nÃ¨re un token de rafraÃ®chissement JWT sÃ©curisÃ©\n */\nexport function generateRefreshToken(payload: Omit<JWTPayload, \"type\" | \"iat\" | \"exp\" | \"iss\">): string {\n  return jwt.sign(\n    {\n      ...payload,\n      type: \"refresh\",\n    },\n    JWT_CONFIG.REFRESH_TOKEN_SECRET,\n    {\n      expiresIn: JWT_CONFIG.REFRESH_TOKEN_EXPIRES_IN,\n      issuer: JWT_CONFIG.ISSUER,\n      algorithm: JWT_CONFIG.ALGORITHM,\n    }\n  );\n}\n\n/**\n * VÃ©rifie et dÃ©code un token d'accÃ¨s JWT\n */\nexport function verifyAccessToken(token: string): JWTPayload {\n  try {\n    const decoded = jwt.verify(token, JWT_CONFIG.ACCESS_TOKEN_SECRET, {\n      issuer: JWT_CONFIG.ISSUER,\n      algorithms: [JWT_CONFIG.ALGORITHM],\n    }) as JWTPayload;\n\n    if (decoded.type !== \"access\") {\n      throw new Error(\"Invalid token type\");\n    }\n\n    return decoded;\n  } catch (error) {\n    throw new Error(\"Invalid access token\");\n  }\n}\n\n/**\n * VÃ©rifie et dÃ©code un token de rafraÃ®chissement JWT\n */\nexport function verifyRefreshToken(token: string): JWTPayload {\n  try {\n    const decoded = jwt.verify(token, JWT_CONFIG.REFRESH_TOKEN_SECRET, {\n      issuer: JWT_CONFIG.ISSUER,\n      algorithms: [JWT_CONFIG.ALGORITHM],\n    }) as JWTPayload;\n\n    if (decoded.type !== \"refresh\") {\n      throw new Error(\"Invalid token type\");\n    }\n\n    return decoded;\n  } catch (error) {\n    throw new Error(\"Invalid refresh token\");\n  }\n}\n\n/**\n * Hash un mot de passe de maniÃ¨re sÃ©curisÃ©e\n */\nexport async function hashPassword(password: string): Promise<string> {\n  const saltRounds = 12; // AugmentÃ© pour plus de sÃ©curitÃ©\n  return bcrypt.hash(password, saltRounds);\n}\n\n/**\n * VÃ©rifie un mot de passe contre son hash\n */\nexport async function verifyPassword(password: string, hash: string): Promise<boolean> {\n  return bcrypt.compare(password, hash);\n}\n\n/**\n * Middleware d'authentification JWT\n */\nexport function requireAuth(req: Request, res: Response, next: NextFunction): void {\n  try {\n    // Extraire le token depuis l'en-tÃªte Authorization\n    const authHeader = req.headers.authorization;\n    \n    if (!authHeader) {\n      res.status(401).json({ \n        message: \"Access token required\",\n        code: \"NO_TOKEN\"\n      });\n      return;\n    }\n\n    // VÃ©rifier le format \"Bearer <token>\"\n    const parts = authHeader.split(\" \");\n    if (parts.length !== 2 || parts[0] !== \"Bearer\") {\n      res.status(401).json({ \n        message: \"Invalid token format. Expected: Bearer <token>\",\n        code: \"INVALID_TOKEN_FORMAT\"\n      });\n      return;\n    }\n\n    const token = parts[1];\n\n    // VÃ©rifier et dÃ©coder le token\n    const decoded = verifyAccessToken(token);\n\n    // Ajouter les informations utilisateur Ã  la requÃªte\n    (req as AuthenticatedRequest).user = {\n      organizationId: decoded.organizationId,\n      email: decoded.email,\n      name: decoded.name,\n    };\n\n    console.log(`âœ… JWT Auth success for organization: ${decoded.organizationId}`);\n    next();\n  } catch (error) {\n    console.error(\"JWT Auth error:\", error);\n    \n    let errorCode = \"INVALID_TOKEN\";\n    let message = \"Invalid or expired access token\";\n\n    if (error instanceof jwt.TokenExpiredError) {\n      errorCode = \"TOKEN_EXPIRED\";\n      message = \"Access token expired\";\n    } else if (error instanceof jwt.JsonWebTokenError) {\n      errorCode = \"MALFORMED_TOKEN\";\n      message = \"Malformed access token\";\n    }\n\n    res.status(401).json({ \n      message,\n      code: errorCode\n    });\n  }\n}\n\n/**\n * Middleware optionnel d'authentification JWT (ne rejette pas si pas de token)\n */\nexport function optionalAuth(req: Request, res: Response, next: NextFunction): void {\n  try {\n    const authHeader = req.headers.authorization;\n    \n    if (!authHeader) {\n      next();\n      return;\n    }\n\n    const parts = authHeader.split(\" \");\n    if (parts.length !== 2 || parts[0] !== \"Bearer\") {\n      next();\n      return;\n    }\n\n    const token = parts[1];\n    const decoded = verifyAccessToken(token);\n\n    (req as AuthenticatedRequest).user = {\n      organizationId: decoded.organizationId,\n      email: decoded.email,\n      name: decoded.name,\n    };\n\n    next();\n  } catch (error) {\n    // En cas d'erreur, continuer sans authentification\n    next();\n  }\n}\n\n/**\n * GÃ©nÃ¨re une paire de tokens (access + refresh)\n */\nexport function generateTokenPair(payload: Omit<JWTPayload, \"type\" | \"iat\" | \"exp\" | \"iss\">) {\n  return {\n    accessToken: generateAccessToken(payload),\n    refreshToken: generateRefreshToken(payload),\n    expiresIn: JWT_CONFIG.ACCESS_TOKEN_EXPIRES_IN,\n  };\n}\n\n/**\n * Extrait le token depuis l'en-tÃªte Authorization\n */\nexport function extractTokenFromHeader(authHeader: string | undefined): string | null {\n  if (!authHeader) {\n    return null;\n  }\n\n  const parts = authHeader.split(\" \");\n  if (parts.length !== 2 || parts[0] !== \"Bearer\") {\n    return null;\n  }\n\n  return parts[1];\n}\n\n/**\n * Valide la force d'un mot de passe\n */\nexport function validatePasswordStrength(password: string): { isValid: boolean; errors: string[] } {\n  const errors: string[] = [];\n\n  if (password.length < 8) {\n    errors.push(\"Le mot de passe doit contenir au moins 8 caractÃ¨res\");\n  }\n\n  if (!/[a-z]/.test(password)) {\n    errors.push(\"Le mot de passe doit contenir au moins une lettre minuscule\");\n  }\n\n  if (!/[A-Z]/.test(password)) {\n    errors.push(\"Le mot de passe doit contenir au moins une lettre majuscule\");\n  }\n\n  if (!/\\d/.test(password)) {\n    errors.push(\"Le mot de passe doit contenir au moins un chiffre\");\n  }\n\n  if (!/[!@#$%^&*(),.?\":{}|<>]/.test(password)) {\n    errors.push(\"Le mot de passe doit contenir au moins un caractÃ¨re spÃ©cial\");\n  }\n\n  return {\n    isValid: errors.length === 0,\n    errors,\n  };\n}","size_bytes":7148},"server/db.ts":{"content":"import { Pool, neonConfig } from '@neondatabase/serverless';\nimport { drizzle } from 'drizzle-orm/neon-serverless';\nimport ws from \"ws\";\nimport * as schema from \"@shared/schema\";\n\nneonConfig.webSocketConstructor = ws;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ connectionString: process.env.DATABASE_URL });\nexport const db = drizzle({ client: pool, schema });","size_bytes":482},"server/email-enhanced.ts":{"content":"import sgMail from '@sendgrid/mail';\n\n// Configuration SendGrid amÃ©liorÃ©e avec validation\nclass EmailServiceEnhanced {\n  private fromEmail: string;\n  private fromName: string;\n  private appUrl: string;\n  private isConfigured: boolean = false;\n  private apiKey: string;\n\n  constructor() {\n    this.apiKey = process.env.SENDGRID_API_KEY || '';\n    this.fromEmail = process.env.SENDGRID_FROM_EMAIL || 'noreply@TeamMoves.com';\n    this.fromName = process.env.SENDGRID_FROM_NAME || 'TeamMoves';\n    this.appUrl = process.env.APP_URL || 'https://teammove.fr';\n    \n    this.initializeService();\n  }\n\n  private initializeService() {\n    if (!this.apiKey) {\n      console.error('âŒ SENDGRID_API_KEY is not configured');\n      return;\n    }\n\n    if (!this.apiKey.startsWith('SG.')) {\n      console.error('âŒ Invalid SendGrid API key format');\n      return;\n    }\n\n    try {\n      sgMail.setApiKey(this.apiKey);\n      this.isConfigured = true;\n      console.log('âœ… SendGrid service initialized successfully');\n    } catch (error) {\n      console.error('âŒ Failed to initialize SendGrid:', error);\n      this.isConfigured = false;\n    }\n  }\n\n  // Validation de l'API key SendGrid\n  async validateApiKey(): Promise<boolean> {\n    if (!this.isConfigured) {\n      return false;\n    }\n\n    try {\n      // Test avec un petit appel Ã  l'API SendGrid\n      const testMsg = {\n        to: this.fromEmail,\n        from: this.fromEmail,\n        subject: 'API Key Validation Test',\n        text: 'This is a test to validate the API key',\n        html: '<p>This is a test to validate the API key</p>',\n        mail_settings: {\n          sandbox_mode: { enable: true } // Mode sandbox pour ne pas envoyer rÃ©ellement\n        }\n      };\n\n      await sgMail.send(testMsg);\n      console.log('âœ… SendGrid API key is valid');\n      return true;\n    } catch (error: any) {\n      console.error('âŒ SendGrid API key validation failed:', error?.response?.body || error.message);\n      \n      if (error.code === 401) {\n        console.error('ğŸ”‘ API Key is invalid or expired. Please check your SendGrid configuration.');\n      } else if (error.code === 403) {\n        console.error('ğŸ”‘ API Key does not have sufficient permissions.');\n      }\n      \n      return false;\n    }\n  }\n\n  // Envoi d'email sÃ©curisÃ© avec retry\n  async sendEmail(data: {\n    to: string;\n    toName?: string;\n    subject: string;\n    html: string;\n    text: string;\n    fromEmail?: string;\n    fromName?: string;\n  }, retries: number = 2): Promise<boolean> {\n    if (!this.isConfigured) {\n      console.error('âŒ SendGrid not configured properly');\n      return false;\n    }\n\n    // Validation des donnÃ©es\n    if (!data.to || !data.subject || (!data.html && !data.text)) {\n      console.error('âŒ Missing required email data');\n      return false;\n    }\n\n    const msg = {\n      to: {\n        email: data.to,\n        name: data.toName || data.to\n      },\n      from: {\n        email: data.fromEmail || this.fromEmail,\n        name: data.fromName || this.fromName\n      },\n      subject: data.subject,\n      text: data.text,\n      html: data.html,\n    };\n\n    for (let attempt = 0; attempt <= retries; attempt++) {\n      try {\n        await sgMail.send(msg);\n        console.log(`âœ… Email sent successfully to: ${data.to}`);\n        return true;\n      } catch (error: any) {\n        const errorInfo = error?.response?.body?.errors?.[0] || error;\n        \n        console.error(`âŒ Attempt ${attempt + 1} failed to send email to ${data.to}:`, {\n          code: error.code,\n          message: errorInfo.message || error.message,\n          field: errorInfo.field || 'unknown'\n        });\n\n        // Si c'est une erreur d'authentification, ne pas retry\n        if (error.code === 401 || error.code === 403) {\n          console.error('ğŸ”‘ Authentication error - stopping retries');\n          break;\n        }\n\n        // Si c'est le dernier essai, arrÃªter\n        if (attempt === retries) {\n          break;\n        }\n\n        // Attendre avant retry (exponential backoff)\n        const delay = Math.pow(2, attempt) * 1000;\n        console.log(`â³ Retrying in ${delay}ms...`);\n        await new Promise(resolve => setTimeout(resolve, delay));\n      }\n    }\n\n    return false;\n  }\n\n  // Version amÃ©liorÃ©e de l'envoi groupÃ© d'invitations\n  async sendBulkEventInvitations(\n    emails: string[],\n    eventName: string,\n    organizationName: string,\n    eventDate: Date,\n    eventLink: string,\n    meetingPoint?: string,\n    destination?: string,\n    sport?: string,\n    duration?: string,\n    organizerContactName?: string,\n    organizerEmail?: string\n  ): Promise<{ success: number; failed: string[] }> {\n    console.log(`ğŸ“§ Starting bulk email sending for ${emails.length} recipients`);\n    \n    // VÃ©rifier d'abord la configuration\n    if (!this.isConfigured) {\n      console.error('âŒ SendGrid not configured - all emails will fail');\n      return { success: 0, failed: emails };\n    }\n\n    // Valider l'API key avant d'essayer d'envoyer\n    const isValid = await this.validateApiKey();\n    if (!isValid) {\n      console.error('âŒ SendGrid API key is invalid - all emails will fail');\n      return { success: 0, failed: emails };\n    }\n\n    const results = {\n      success: 0,\n      failed: [] as string[]\n    };\n\n    // Traitement par lots pour Ã©viter le rate limiting\n    const BATCH_SIZE = 5;\n    const DELAY_BETWEEN_BATCHES = 1000; // 1 seconde entre les lots\n\n    for (let i = 0; i < emails.length; i += BATCH_SIZE) {\n      const batch = emails.slice(i, i + BATCH_SIZE);\n      \n      console.log(`ğŸ“¨ Processing batch ${Math.floor(i / BATCH_SIZE) + 1} (${batch.length} emails)`);\n\n      const batchPromises = batch.map(async (email) => {\n        try {\n          const sent = await this.sendEventInvitationWithLink(\n            email,\n            eventName,\n            organizationName,\n            eventDate,\n            eventLink,\n            meetingPoint,\n            destination,\n            sport,\n            duration,\n            organizerContactName,\n            organizerEmail\n          );\n          \n          if (sent) {\n            results.success++;\n          } else {\n            results.failed.push(email);\n          }\n        } catch (error) {\n          console.error(`âŒ Failed to send invitation to ${email}:`, error);\n          results.failed.push(email);\n        }\n      });\n\n      // Attendre que tous les emails du lot soient traitÃ©s\n      await Promise.all(batchPromises);\n\n      // DÃ©lai entre les lots (sauf pour le dernier)\n      if (i + BATCH_SIZE < emails.length) {\n        await new Promise(resolve => setTimeout(resolve, DELAY_BETWEEN_BATCHES));\n      }\n    }\n\n    console.log(`ğŸ“Š Email sending completed: ${results.success} successful, ${results.failed.length} failed`);\n    if (results.failed.length > 0) {\n      console.log('ğŸ“ Failed to send invitations to:', results.failed);\n    }\n\n    return results;\n  }\n\n  // MÃ©thode pour tester la configuration\n  async testConfiguration(): Promise<{\n    isConfigured: boolean;\n    apiKeyValid: boolean;\n    fromEmailValid: boolean;\n    canSendEmails: boolean;\n  }> {\n    const result = {\n      isConfigured: this.isConfigured,\n      apiKeyValid: false,\n      fromEmailValid: false,\n      canSendEmails: false\n    };\n\n    if (!this.isConfigured) {\n      return result;\n    }\n\n    // Test API key\n    result.apiKeyValid = await this.validateApiKey();\n\n    // Test from email format\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    result.fromEmailValid = emailRegex.test(this.fromEmail);\n\n    result.canSendEmails = result.apiKeyValid && result.fromEmailValid;\n\n    return result;\n  }\n\n  // RÃ©utilisation des mÃ©thodes existantes mais avec la nouvelle logique d'envoi\n  async sendEventInvitationWithLink(\n    email: string,\n    eventName: string,\n    organizationName: string,\n    eventDate: Date,\n    eventLink: string,\n    meetingPoint?: string,\n    destination?: string,\n    sport?: string,\n    duration?: string,\n    organizerContactName?: string,\n    organizerEmail?: string\n  ): Promise<boolean> {\n    const formattedDate = eventDate.toLocaleDateString('fr-FR', {\n      weekday: 'long',\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n    const formattedTime = eventDate.toLocaleTimeString('fr-FR', {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n\n    const contactOrganizerUrl = organizerEmail \n      ? `mailto:${organizerEmail}?subject=Question%20Ã %20propos%20de%20l'Ã©vÃ©nement%20\"${encodeURIComponent(eventName)}\"` \n      : null;\n\n    const html = `\n      <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;\">\n        <div style=\"background-color: #f8f9fa; padding: 30px; border-radius: 8px;\">\n          <h1 style=\"color: #333; margin-bottom: 20px; text-align: center;\">\n            ğŸ¯ Vous Ãªtes invitÃ© Ã  un Ã©vÃ©nement !\n          </h1>\n          <div style=\"background-color: white; padding: 25px; border-radius: 8px; margin-bottom: 20px;\">\n            <h2 style=\"color: #007bff; margin-bottom: 15px;\">${eventName}</h2>\n            <div style=\"margin-bottom: 20px;\">\n              <p style=\"color: #666; font-size: 16px; margin-bottom: 8px;\">\n                <strong>OrganisÃ© par :</strong> ${organizationName}\n              </p>\n              ${sport ? `<p style=\"color: #666; font-size: 16px; margin-bottom: 8px;\">\n                <strong>Sport :</strong> ${sport}\n              </p>` : ''}\n              <p style=\"color: #666; font-size: 16px; margin-bottom: 8px;\">\n                <strong>Date :</strong> ${formattedDate}\n              </p>\n              <p style=\"color: #666; font-size: 16px; margin-bottom: 8px;\">\n                <strong>Heure :</strong> ${formattedTime}\n              </p>\n              ${duration ? `<p style=\"color: #666; font-size: 16px; margin-bottom: 8px;\">\n                <strong>DurÃ©e :</strong> ${duration}\n              </p>` : ''}\n              ${meetingPoint ? `<p style=\"color: #666; font-size: 16px; margin-bottom: 8px;\">\n                <strong>RDV :</strong> ${meetingPoint}\n              </p>` : ''}\n              ${destination ? `<p style=\"color: #666; font-size: 16px; margin-bottom: 8px;\">\n                <strong>Destination :</strong> ${destination}\n              </p>` : ''}\n            </div>\n            <p style=\"color: #666; font-size: 16px; margin-bottom: 30px;\">\n              Un nouvel Ã©vÃ©nement vient d'Ãªtre crÃ©Ã© et vous Ãªtes automatiquement invitÃ© ! \n              Cliquez sur le lien ci-dessous pour voir tous les dÃ©tails et confirmer votre participation.\n            </p>\n            <div style=\"text-align: center; margin-bottom: 20px;\">\n              <a href=\"${eventLink}\" style=\"display: inline-block; background-color: #28a745; color: white; padding: 15px 30px; text-decoration: none; border-radius: 5px; font-weight: bold; margin-bottom: 10px;\">\n                Voir l'Ã©vÃ©nement et participer\n              </a>\n            </div>\n            ${contactOrganizerUrl ? `\n              <div style=\"text-align: center; border-top: 1px solid #eee; padding-top: 15px;\">\n                <p style=\"color: #666; font-size: 14px; margin-bottom: 10px;\">\n                  Une question ? Contactez l'organisateur\n                </p>\n                <a href=\"${contactOrganizerUrl}\" style=\"display: inline-block; background-color: #6c757d; color: white; padding: 10px 20px; text-decoration: none; border-radius: 4px; font-size: 14px;\">\n                  âœ‰ï¸ Contacter ${organizerContactName || organizationName}\n                </a>\n              </div>\n            ` : ''}\n          </div>\n          <p style=\"color: #666; font-size: 12px; text-align: center;\">\n            Si le bouton ne fonctionne pas, copiez ce lien :<br>\n            <a href=\"${eventLink}\" style=\"color: #007bff;\">${eventLink}</a>\n          </p>\n        </div>\n      </div>\n    `;\n\n    const text = `\n      Vous Ãªtes invitÃ© Ã  un Ã©vÃ©nement !\n      \n      Ã‰vÃ©nement : ${eventName}\n      OrganisÃ© par : ${organizationName}\n      ${sport ? `Sport : ${sport}` : ''}\n      Date : ${formattedDate}\n      Heure : ${formattedTime}\n      ${duration ? `DurÃ©e : ${duration}` : ''}\n      ${meetingPoint ? `RDV : ${meetingPoint}` : ''}\n      ${destination ? `Destination : ${destination}` : ''}\n      \n      Un nouvel Ã©vÃ©nement vient d'Ãªtre crÃ©Ã© et vous Ãªtes automatiquement invitÃ© !\n      Cliquez sur ce lien pour voir tous les dÃ©tails et confirmer votre participation :\n      \n      ${eventLink}\n      \n      ${organizerEmail ? `Pour toute question, contactez l'organisateur : ${organizerEmail}` : ''}\n    `;\n\n    return await this.sendEmail({\n      to: email,\n      subject: `Nouvel Ã©vÃ©nement: ${eventName} - ${organizationName}`,\n      html,\n      text\n    });\n  }\n\n  // Send message to participants with reply functionality\n  async sendMessageToParticipant(\n    participantEmail: string,\n    participantName: string,\n    messageContent: string,\n    eventName: string,\n    organizationName: string,\n    organizerName: string,\n    replyToken: string\n  ): Promise<{ success: boolean; error?: string }> {\n    if (!this.isConfigured) {\n      return { success: false, error: 'Email service not configured' };\n    }\n\n    const replyUrl = `${this.appUrl}/api/messages/reply/${replyToken}`;\n    \n    const html = `\n      <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: white;\">\n        <div style=\"background: linear-gradient(135deg, #007bff 0%, #0056b3 100%); color: white; padding: 30px; text-align: center;\">\n          <h1 style=\"margin: 0; font-size: 28px; font-weight: bold;\">ğŸ’¬ Nouveau Message</h1>\n        </div>\n        <div style=\"padding: 30px;\">\n          <p style=\"color: #333; font-size: 18px; margin-bottom: 20px;\">\n            Bonjour ${participantName},\n          </p>\n          <p style=\"color: #666; font-size: 16px; margin-bottom: 20px;\">\n            Vous avez reÃ§u un nouveau message de <strong>${organizerName}</strong> concernant l'Ã©vÃ©nement <strong>${eventName}</strong> :\n          </p>\n          \n          <div style=\"background-color: #f8f9fa; border-left: 4px solid #007bff; padding: 20px; margin: 20px 0; border-radius: 4px;\">\n            <p style=\"color: #333; font-size: 16px; line-height: 1.6; margin: 0;\">\n              ${messageContent.replace(/\\n/g, '<br>')}\n            </p>\n          </div>\n          \n          <div style=\"background-color: #e8f4ff; padding: 20px; border-radius: 8px; margin: 20px 0;\">\n            <p style=\"color: #0056b3; font-size: 16px; margin-bottom: 15px; font-weight: bold;\">\n              ğŸ’¡ Vous pouvez rÃ©pondre directement par email !\n            </p>\n            <p style=\"color: #666; font-size: 14px; margin-bottom: 10px;\">\n              RÃ©pondez simplement Ã  cet email et votre message sera automatiquement transmis Ã  l'organisateur.\n            </p>\n            <p style=\"color: #666; font-size: 12px; font-style: italic;\">\n              OrganisÃ© par ${organizationName}\n            </p>\n          </div>\n          \n          <p style=\"color: #999; font-size: 12px; text-align: center; margin-top: 30px;\">\n            Ce message concerne l'Ã©vÃ©nement \"${eventName}\"<br>\n            OrganisÃ© par ${organizationName}\n          </p>\n        </div>\n      </div>\n    `;\n\n    const text = `\n      Nouveau Message - ${eventName}\n      \n      Bonjour ${participantName},\n      \n      Vous avez reÃ§u un nouveau message de ${organizerName} concernant l'Ã©vÃ©nement \"${eventName}\" :\n      \n      \"${messageContent}\"\n      \n      Vous pouvez rÃ©pondre directement Ã  cet email et votre message sera automatiquement transmis Ã  l'organisateur.\n      \n      OrganisÃ© par ${organizationName}\n    `;\n\n    return await this.sendEmail({\n      to: participantEmail,\n      subject: `Message de ${organizerName} - ${eventName}`,\n      html,\n      text,\n      replyTo: `${this.fromEmail}+${replyToken}@reply.TeamMove.com`\n    });\n  }\n\n  // Send reply notification to organizer\n  async sendReplyNotificationToOrganizer(\n    organizerEmail: string,\n    organizerName: string,\n    participantName: string,\n    replyContent: string,\n    eventName: string\n  ): Promise<{ success: boolean; error?: string }> {\n    if (!this.isConfigured) {\n      return { success: false, error: 'Email service not configured' };\n    }\n\n    const html = `\n      <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: white;\">\n        <div style=\"background: linear-gradient(135deg, #28a745 0%, #1e7e34 100%); color: white; padding: 30px; text-align: center;\">\n          <h1 style=\"margin: 0; font-size: 28px; font-weight: bold;\">ğŸ’¬ Nouvelle RÃ©ponse</h1>\n        </div>\n        <div style=\"padding: 30px;\">\n          <p style=\"color: #333; font-size: 18px; margin-bottom: 20px;\">\n            Bonjour ${organizerName},\n          </p>\n          <p style=\"color: #666; font-size: 16px; margin-bottom: 20px;\">\n            <strong>${participantName}</strong> a rÃ©pondu Ã  votre message concernant l'Ã©vÃ©nement <strong>${eventName}</strong> :\n          </p>\n          \n          <div style=\"background-color: #f8f9fa; border-left: 4px solid #28a745; padding: 20px; margin: 20px 0; border-radius: 4px;\">\n            <p style=\"color: #333; font-size: 16px; line-height: 1.6; margin: 0;\">\n              ${replyContent.replace(/\\n/g, '<br>')}\n            </p>\n          </div>\n          \n          <div style=\"background-color: #e8f5e8; padding: 15px; border-radius: 8px; margin: 20px 0;\">\n            <p style=\"color: #155724; font-size: 14px; margin: 0;\">\n              <strong>De :</strong> ${participantName}<br>\n              <strong>Ã‰vÃ©nement :</strong> ${eventName}\n            </p>\n          </div>\n          \n          <p style=\"color: #999; font-size: 12px; text-align: center; margin-top: 30px;\">\n            Vous pouvez rÃ©pondre directement Ã  ce participant en rÃ©pondant Ã  cet email.\n          </p>\n        </div>\n      </div>\n    `;\n\n    const text = `\n      Nouvelle RÃ©ponse - ${eventName}\n      \n      Bonjour ${organizerName},\n      \n      ${participantName} a rÃ©pondu Ã  votre message concernant l'Ã©vÃ©nement \"${eventName}\" :\n      \n      \"${replyContent}\"\n      \n      Vous pouvez rÃ©pondre directement Ã  ce participant en rÃ©pondant Ã  cet email.\n    `;\n\n    return await this.sendEmail({\n      to: organizerEmail,\n      subject: `RÃ©ponse de ${participantName} - ${eventName}`,\n      html,\n      text\n    });\n  }\n\n  // Send reminder email to participants\n  async sendReminderEmail(\n    participantEmail: string,\n    participantName: string,\n    eventName: string,\n    organizationName: string,\n    eventDate: Date,\n    meetingPoint: string\n  ): Promise<{ success: boolean; error?: string }> {\n    if (!this.isConfigured) {\n      return { success: false, error: 'Email service not configured' };\n    }\n\n    const formattedDate = eventDate.toLocaleDateString('fr-FR', {\n      weekday: 'long',\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n    });\n    const formattedTime = eventDate.toLocaleTimeString('fr-FR', {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n\n    const html = `\n      <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: white;\">\n        <div style=\"background: linear-gradient(135deg, #ffc107 0%, #e0a800 100%); color: #333; padding: 30px; text-align: center;\">\n          <h1 style=\"margin: 0; font-size: 28px; font-weight: bold;\">â° Rappel d'Ã‰vÃ©nement</h1>\n        </div>\n        <div style=\"padding: 30px;\">\n          <p style=\"color: #333; font-size: 18px; margin-bottom: 20px;\">\n            Bonjour ${participantName},\n          </p>\n          <p style=\"color: #666; font-size: 16px; margin-bottom: 20px;\">\n            Nous vous rappelons que l'Ã©vÃ©nement <strong>${eventName}</strong> approche !\n          </p>\n          \n          <div style=\"background-color: #fff8e1; border: 2px solid #ffc107; padding: 20px; margin: 20px 0; border-radius: 8px;\">\n            <h3 style=\"color: #333; margin-top: 0; margin-bottom: 15px;\">ğŸ“… DÃ©tails de l'Ã©vÃ©nement</h3>\n            <p style=\"color: #666; margin: 8px 0;\"><strong>Ã‰vÃ©nement :</strong> ${eventName}</p>\n            <p style=\"color: #666; margin: 8px 0;\"><strong>Date :</strong> ${formattedDate}</p>\n            <p style=\"color: #666; margin: 8px 0;\"><strong>Heure :</strong> ${formattedTime}</p>\n            <p style=\"color: #666; margin: 8px 0;\"><strong>Rendez-vous :</strong> ${meetingPoint}</p>\n            <p style=\"color: #666; margin: 8px 0;\"><strong>OrganisÃ© par :</strong> ${organizationName}</p>\n          </div>\n          \n          <p style=\"color: #666; font-size: 16px; margin-bottom: 20px;\">\n            N'oubliez pas de vous prÃ©senter Ã  l'heure au point de rendez-vous. Ã€ bientÃ´t !\n          </p>\n          \n          <p style=\"color: #999; font-size: 12px; text-align: center; margin-top: 30px;\">\n            Ceci est un rappel automatique pour l'Ã©vÃ©nement \"${eventName}\"\n          </p>\n        </div>\n      </div>\n    `;\n\n    const text = `\n      Rappel d'Ã‰vÃ©nement - ${eventName}\n      \n      Bonjour ${participantName},\n      \n      Nous vous rappelons que l'Ã©vÃ©nement \"${eventName}\" approche !\n      \n      DÃ©tails :\n      - Ã‰vÃ©nement : ${eventName}\n      - Date : ${formattedDate}\n      - Heure : ${formattedTime}\n      - Rendez-vous : ${meetingPoint}\n      - OrganisÃ© par : ${organizationName}\n      \n      N'oubliez pas de vous prÃ©senter Ã  l'heure au point de rendez-vous. Ã€ bientÃ´t !\n    `;\n\n    return await this.sendEmail({\n      to: participantEmail,\n      subject: `Rappel : ${eventName} - ${formattedDate}`,\n      html,\n      text\n    });\n  }\n\n  // Send password reset email\n  async sendPasswordResetEmail(\n    email: string,\n    name: string,\n    resetToken: string\n  ): Promise<{ success: boolean; error?: string }> {\n    if (!this.isConfigured) {\n      return { success: false, error: 'Email service not configured' };\n    }\n\n    const resetLink = `${this.appUrl}/reset-password?token=${resetToken}`;\n\n    const html = `\n      <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: white;\">\n        <div style=\"background: linear-gradient(135deg, #dc3545 0%, #c82333 100%); color: white; padding: 30px; text-align: center;\">\n          <h1 style=\"margin: 0; font-size: 28px; font-weight: bold;\">ğŸ”’ RÃ©initialisation du mot de passe</h1>\n        </div>\n        <div style=\"padding: 30px;\">\n          <p style=\"color: #333; font-size: 18px; margin-bottom: 20px;\">\n            Bonjour ${name},\n          </p>\n          <p style=\"color: #666; font-size: 16px; margin-bottom: 20px;\">\n            Vous avez demandÃ© une rÃ©initialisation de votre mot de passe. Cliquez sur le lien ci-dessous pour crÃ©er un nouveau mot de passe :\n          </p>\n          \n          <div style=\"text-align: center; margin: 30px 0;\">\n            <a href=\"${resetLink}\" style=\"display: inline-block; background-color: #dc3545; color: white; padding: 15px 30px; text-decoration: none; border-radius: 5px; font-weight: bold;\">\n              RÃ©initialiser mon mot de passe\n            </a>\n          </div>\n          \n          <div style=\"background-color: #fff5f5; border: 1px solid #fecaca; padding: 15px; border-radius: 8px; margin: 20px 0;\">\n            <p style=\"color: #b91c1c; font-size: 14px; margin: 0;\">\n              <strong>âš ï¸ Important :</strong> Ce lien expirera dans 1 heure. Si vous n'avez pas demandÃ© cette rÃ©initialisation, ignorez cet email.\n            </p>\n          </div>\n          \n          <p style=\"color: #666; font-size: 12px; text-align: center;\">\n            Si le bouton ne fonctionne pas, copiez ce lien :<br>\n            <a href=\"${resetLink}\" style=\"color: #007bff;\">${resetLink}</a>\n          </p>\n        </div>\n      </div>\n    `;\n\n    const text = `\n      RÃ©initialisation du mot de passe\n      \n      Bonjour ${name},\n      \n      Vous avez demandÃ© une rÃ©initialisation de votre mot de passe. Cliquez sur le lien ci-dessous pour crÃ©er un nouveau mot de passe :\n      \n      ${resetLink}\n      \n      IMPORTANT : Ce lien expirera dans 1 heure. Si vous n'avez pas demandÃ© cette rÃ©initialisation, ignorez cet email.\n    `;\n\n    return await this.sendEmail({\n      to: email,\n      subject: 'RÃ©initialisation de votre mot de passe - TeamMove',\n      html,\n      text\n    });\n  }\n\n  // Send custom email with organization branding\n  async sendCustomEmail(\n    to: string,\n    subject: string,\n    content: string,\n    organization?: any\n  ): Promise<{ success: boolean; error?: string }> {\n    if (!this.isConfigured) {\n      return { success: false, error: 'Email service not configured' };\n    }\n\n    const organizationName = organization?.name || 'TeamMove';\n    const organizerName = organization ? `${organization.contactFirstName} ${organization.contactLastName}` : 'TeamMove';\n\n    const html = `\n      <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: white;\">\n        <div style=\"background: linear-gradient(135deg, #007bff 0%, #0056b3 100%); color: white; padding: 30px; text-align: center;\">\n          <h1 style=\"margin: 0; font-size: 28px; font-weight: bold;\">ğŸ“§ ${organizationName}</h1>\n        </div>\n        <div style=\"padding: 30px;\">\n          <div style=\"background-color: #f8f9fa; padding: 20px; margin: 20px 0; border-radius: 8px; line-height: 1.6;\">\n            ${content.replace(/\\n/g, '<br>')}\n          </div>\n          \n          <p style=\"color: #999; font-size: 12px; text-align: center; margin-top: 30px;\">\n            Message envoyÃ© par ${organizerName} via TeamMove\n          </p>\n        </div>\n      </div>\n    `;\n\n    const text = `\n      ${subject}\n      \n      ${content}\n      \n      ---\n      Message envoyÃ© par ${organizerName} via TeamMove\n    `;\n\n    return await this.sendEmail({\n      to,\n      subject,\n      html,\n      text\n    });\n  }\n\n  // Diagnostic complet du service email\n  async diagnoseService(): Promise<string> {\n    const config = await this.testConfiguration();\n    \n    let report = 'ğŸ“§ SendGrid Service Diagnostic Report\\n';\n    report += '=====================================\\n\\n';\n    \n    report += `ğŸ”§ Configuration Status: ${config.isConfigured ? 'âœ… OK' : 'âŒ NOT CONFIGURED'}\\n`;\n    report += `ğŸ”‘ API Key Status: ${config.apiKeyValid ? 'âœ… VALID' : 'âŒ INVALID'}\\n`;\n    report += `ğŸ“¬ From Email Status: ${config.fromEmailValid ? 'âœ… VALID' : 'âŒ INVALID'}\\n`;\n    report += `ğŸ“¤ Can Send Emails: ${config.canSendEmails ? 'âœ… YES' : 'âŒ NO'}\\n\\n`;\n    \n    if (!config.isConfigured) {\n      report += 'â— Issues Found:\\n';\n      report += `   - SENDGRID_API_KEY: ${this.apiKey ? 'SET' : 'MISSING'}\\n`;\n      report += `   - SENDGRID_FROM_EMAIL: ${this.fromEmail}\\n`;\n      report += `   - SENDGRID_FROM_NAME: ${this.fromName}\\n\\n`;\n    }\n    \n    if (!config.apiKeyValid) {\n      report += 'ğŸ”§ Recommended Actions:\\n';\n      report += '   1. Check your SendGrid API key in environment variables\\n';\n      report += '   2. Ensure the API key starts with \"SG.\"\\n';\n      report += '   3. Verify the API key has \"Mail Send\" permissions in SendGrid dashboard\\n';\n      report += '   4. Check if the API key is not expired\\n\\n';\n    }\n    \n    return report;\n  }\n\n  // Broadcast message to all participants\n  async sendBroadcastMessage(\n    participantEmail: string,\n    participantName: string,\n    eventName: string,\n    organizationName: string,\n    messageContent: string,\n    organizerName: string,\n    eventId: string\n  ): Promise<boolean> {\n    if (!this.isConfigured) {\n      console.error('âŒ EmailService not configured for broadcast message');\n      return false;\n    }\n\n    try {\n      const replyUrl = `${this.appUrl}/events/${eventId}#reply`;\n      \n      const htmlContent = `\n        <!DOCTYPE html>\n        <html lang=\"fr\">\n        <head>\n          <meta charset=\"UTF-8\">\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n          <title>Message de l'organisateur - ${eventName}</title>\n          <style>\n            body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; margin: 0; padding: 0; }\n            .container { max-width: 600px; margin: 0 auto; padding: 20px; }\n            .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; text-align: center; border-radius: 10px 10px 0 0; }\n            .content { background: #f8f9fa; padding: 30px; border-radius: 0 0 10px 10px; }\n            .message-box { background: white; padding: 20px; border-left: 4px solid #667eea; margin: 20px 0; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }\n            .event-info { background: #e3f2fd; padding: 15px; border-radius: 5px; margin: 20px 0; }\n            .cta-button { display: inline-block; background: #667eea; color: white; padding: 12px 24px; text-decoration: none; border-radius: 5px; font-weight: bold; margin: 20px 0; }\n            .footer { text-align: center; padding: 20px; color: #666; font-size: 12px; }\n          </style>\n        </head>\n        <body>\n          <div class=\"container\">\n            <div class=\"header\">\n              <h1>ğŸ“¢ Message de l'organisateur</h1>\n              <p>Nouveau message concernant votre Ã©vÃ©nement</p>\n            </div>\n            \n            <div class=\"content\">\n              <p>Bonjour <strong>${participantName}</strong>,</p>\n              \n              <p>Vous avez reÃ§u un nouveau message de <strong>${organizerName}</strong> concernant l'Ã©vÃ©nement :</p>\n              \n              <div class=\"event-info\">\n                <h3>ğŸƒ ${eventName}</h3>\n                <p><strong>Organisation:</strong> ${organizationName}</p>\n              </div>\n\n              <div class=\"message-box\">\n                <h4>ğŸ’¬ Message :</h4>\n                <p>${messageContent.replace(/\\n/g, '<br>')}</p>\n                <p><em>â€” ${organizerName}, ${organizationName}</em></p>\n              </div>\n\n              <div style=\"text-align: center; margin: 30px 0;\">\n                <a href=\"${replyUrl}\" class=\"cta-button\">\n                  â†©ï¸ RÃ©pondre au message\n                </a>\n              </div>\n\n              <div style=\"background: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; border-radius: 5px; margin: 20px 0;\">\n                <p><strong>ğŸ’¡ Comment rÃ©pondre :</strong></p>\n                <p>Cliquez sur le bouton \"RÃ©pondre au message\" ci-dessus pour accÃ©der Ã  l'interface de rÃ©ponse. Votre rÃ©ponse sera directement transmise Ã  l'organisateur.</p>\n              </div>\n\n              <p>Si vous avez des questions, n'hÃ©sitez pas Ã  contacter l'organisateur.</p>\n              \n              <p>Sportivement,<br><strong>L'Ã©quipe TeamMove</strong></p>\n            </div>\n            \n            <div class=\"footer\">\n              <p>Cet email a Ã©tÃ© envoyÃ© par ${organizationName} via TeamMove</p>\n              <p>Pour plus d'informations : <a href=\"${this.appUrl}\">${this.appUrl}</a></p>\n            </div>\n          </div>\n        </body>\n        </html>\n      `;\n\n      const textContent = `\nMessage de l'organisateur - ${eventName}\n\nBonjour ${participantName},\n\nVous avez reÃ§u un nouveau message de ${organizerName} concernant l'Ã©vÃ©nement \"${eventName}\" (${organizationName}).\n\nMessage :\n${messageContent}\n\nâ€” ${organizerName}, ${organizationName}\n\nPour rÃ©pondre Ã  ce message, visitez : ${replyUrl}\n\nSportivement,\nL'Ã©quipe TeamMove\n\n${this.appUrl}\n      `;\n\n      const msg = {\n        to: participantEmail,\n        from: { email: this.fromEmail, name: this.fromName },\n        replyTo: { email: this.fromEmail, name: organizationName },\n        subject: `ğŸ“¢ Message de ${organizationName} - ${eventName}`,\n        text: textContent.trim(),\n        html: htmlContent,\n        trackingSettings: {\n          clickTracking: { enable: true },\n          openTracking: { enable: true },\n        },\n        categories: ['broadcast_message', 'event_communication'],\n      };\n\n      await sgMail.send(msg);\n      console.log(`âœ… Broadcast message sent to ${participantEmail} for event ${eventName}`);\n      return true;\n\n    } catch (error) {\n      console.error(`âŒ Failed to send broadcast message to ${participantEmail}:`, error);\n      return false;\n    }\n  }\n\n  // Broadcast message with reply button for external replies\n  async sendBroadcastMessageWithReplyButton(\n    participantEmail: string,\n    participantName: string,\n    eventName: string,\n    organizationName: string,\n    messageContent: string,\n    organizerName: string,\n    eventId: string,\n    replyToken: string\n  ): Promise<boolean> {\n    if (!this.isConfigured) {\n      console.error('âŒ EmailService not configured for broadcast message');\n      return false;\n    }\n\n    try {\n      const replyUrl = `${this.appUrl}/reply-message?replyToken=${replyToken}`;\n      \n      const htmlContent = `\n        <!DOCTYPE html>\n        <html lang=\"fr\">\n        <head>\n          <meta charset=\"UTF-8\">\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n          <title>Message de l'organisateur - ${eventName}</title>\n          <style>\n            body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; margin: 0; padding: 0; }\n            .container { max-width: 600px; margin: 0 auto; padding: 20px; }\n            .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; text-align: center; border-radius: 10px 10px 0 0; }\n            .content { background: #f8f9fa; padding: 30px; border-radius: 0 0 10px 10px; }\n            .message-box { background: white; padding: 20px; border-left: 4px solid #667eea; margin: 20px 0; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }\n            .event-info { background: #e3f2fd; padding: 15px; border-radius: 5px; margin: 20px 0; }\n            .cta-button { display: inline-block; background: #28a745; color: white; padding: 15px 30px; text-decoration: none; border-radius: 5px; font-weight: bold; margin: 20px 0; text-align: center; }\n            .cta-button:hover { background: #218838; }\n            .footer { text-align: center; padding: 20px; color: #666; font-size: 12px; }\n            .reply-info { background: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; border-radius: 5px; margin: 20px 0; }\n          </style>\n        </head>\n        <body>\n          <div class=\"container\">\n            <div class=\"header\">\n              <h1>ğŸ“¢ Message de l'organisateur</h1>\n              <p>Nouveau message concernant votre Ã©vÃ©nement</p>\n            </div>\n            \n            <div class=\"content\">\n              <p>Bonjour <strong>${participantName}</strong>,</p>\n              \n              <p>Vous avez reÃ§u un nouveau message de <strong>${organizerName}</strong> concernant l'Ã©vÃ©nement :</p>\n              \n              <div class=\"event-info\">\n                <h3>ğŸƒ ${eventName}</h3>\n                <p><strong>Organisation:</strong> ${organizationName}</p>\n              </div>\n\n              <div class=\"message-box\">\n                <h4>ğŸ’¬ Message :</h4>\n                <p style=\"font-size: 16px; line-height: 1.5;\">${messageContent.replace(/\\n/g, '<br>')}</p>\n                <p><em>â€” ${organizerName}, ${organizationName}</em></p>\n              </div>\n\n              <div style=\"text-align: center; margin: 30px 0;\">\n                <a href=\"${replyUrl}\" class=\"cta-button\">\n                  â†©ï¸ RÃ©pondre au message\n                </a>\n              </div>\n\n              <div class=\"reply-info\">\n                <p><strong>ğŸ’¡ Comment rÃ©pondre :</strong></p>\n                <p>Cliquez sur le bouton \"RÃ©pondre au message\" ci-dessus pour accÃ©der Ã  l'interface de rÃ©ponse. Votre rÃ©ponse sera directement transmise Ã  l'organisateur dans sa messagerie.</p>\n                <p><strong>Note :</strong> Ce lien de rÃ©ponse est valide pendant 7 jours.</p>\n              </div>\n\n              <p>Si vous avez des questions urgentes, vous pouvez Ã©galement contacter l'organisateur Ã  l'adresse : <a href=\"mailto:${this.fromEmail}\">${this.fromEmail}</a></p>\n              \n              <p>Sportivement,<br><strong>L'Ã©quipe TeamMove</strong></p>\n            </div>\n            \n            <div class=\"footer\">\n              <p>Cet email a Ã©tÃ© envoyÃ© par ${organizationName} via TeamMove</p>\n              <p>Pour plus d'informations : <a href=\"${this.appUrl}\">${this.appUrl}</a></p>\n            </div>\n          </div>\n        </body>\n        </html>\n      `;\n\n      const textContent = `\nMessage de l'organisateur - ${eventName}\n\nBonjour ${participantName},\n\nVous avez reÃ§u un nouveau message de ${organizerName} concernant l'Ã©vÃ©nement \"${eventName}\" (${organizationName}).\n\nMessage :\n${messageContent}\n\nâ€” ${organizerName}, ${organizationName}\n\nPour rÃ©pondre Ã  ce message, cliquez sur ce lien : ${replyUrl}\n\nCe lien de rÃ©ponse est valide pendant 7 jours.\n\nSi vous avez des questions urgentes, contactez : ${this.fromEmail}\n\nSportivement,\nL'Ã©quipe TeamMove\n\n${this.appUrl}\n      `;\n\n      const msg = {\n        to: participantEmail,\n        from: { email: this.fromEmail, name: this.fromName },\n        replyTo: { email: this.fromEmail, name: organizationName },\n        subject: `ğŸ“¢ Message de ${organizationName} - ${eventName}`,\n        text: textContent.trim(),\n        html: htmlContent,\n        trackingSettings: {\n          clickTracking: { enable: true },\n          openTracking: { enable: true },\n        },\n        categories: ['broadcast_message_with_reply', 'event_communication'],\n      };\n\n      await sgMail.send(msg);\n      console.log(`âœ… Broadcast message with reply button sent to ${participantEmail} for event ${eventName}`);\n      return true;\n\n    } catch (error) {\n      console.error(`âŒ Failed to send broadcast message with reply button to ${participantEmail}:`, error);\n      return false;\n    }\n  }\n\n  // Email de bienvenue pour nouveaux utilisateurs/organisateurs\n  async sendWelcomeEmail(\n    email: string,\n    organizationName: string,\n    contactFirstName: string,\n    contactLastName: string,\n    organizationType: 'club' | 'association' | 'company'\n  ): Promise<boolean> {\n    const organizationTypeLabel = {\n      club: 'club sportif',\n      association: 'association',\n      company: 'entreprise'\n    }[organizationType];\n\n    const html = `\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <meta charset=\"utf-8\">\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n          <title>Bienvenue sur TeamMove - ${organizationName}</title>\n          <style>\n            body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; color: #333; margin: 0; padding: 0; background-color: #f5f5f5; }\n            .container { max-width: 700px; margin: 0 auto; background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }\n            .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 40px 30px; text-align: center; }\n            .header h1 { margin: 0; font-size: 32px; font-weight: bold; }\n            .header p { margin: 10px 0 0; font-size: 18px; opacity: 0.9; }\n            .content { padding: 40px 30px; }\n            .welcome-section { text-align: center; margin-bottom: 40px; }\n            .welcome-section h2 { color: #667eea; font-size: 28px; margin-bottom: 15px; }\n            .feature-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; margin: 30px 0; }\n            .feature-card { background: #f8f9fa; padding: 25px; border-radius: 10px; text-align: center; border-left: 4px solid #667eea; }\n            .feature-card .icon { font-size: 48px; margin-bottom: 15px; }\n            .feature-card h3 { color: #333; margin: 15px 0 10px; font-size: 20px; }\n            .feature-card p { color: #666; font-size: 14px; line-height: 1.5; }\n            .cta-section { text-align: center; background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white; padding: 30px; border-radius: 10px; margin: 30px 0; }\n            .cta-button { display: inline-block; background: white; color: #28a745; padding: 15px 40px; text-decoration: none; border-radius: 50px; font-weight: bold; font-size: 18px; margin: 15px 0; transition: transform 0.3s ease; }\n            .cta-button:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }\n            .tips-section { background: #e3f2fd; padding: 25px; border-radius: 10px; margin: 25px 0; }\n            .tips-section h3 { color: #1976d2; margin-bottom: 20px; }\n            .tip { display: flex; align-items: flex-start; margin-bottom: 15px; }\n            .tip-number { background: #1976d2; color: white; border-radius: 50%; width: 25px; height: 25px; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-right: 15px; flex-shrink: 0; font-size: 14px; }\n            .footer { background: #f8f9fa; padding: 30px; text-align: center; color: #666; border-top: 1px solid #e9ecef; }\n            .social-links { margin: 20px 0; }\n            .social-links a { color: #667eea; text-decoration: none; margin: 0 15px; font-size: 24px; }\n          </style>\n        </head>\n        <body>\n          <div class=\"container\">\n            <div class=\"header\">\n              <h1>ğŸ‰ Bienvenue sur TeamMove !</h1>\n              <p>Votre plateforme de covoiturage sportif est prÃªte</p>\n            </div>\n            \n            <div class=\"content\">\n              <div class=\"welcome-section\">\n                <h2>Bonjour ${contactFirstName} ${contactLastName} !</h2>\n                <p style=\"font-size: 18px; color: #666; line-height: 1.6; margin-bottom: 20px;\">\n                  FÃ©licitations ! Votre ${organizationTypeLabel} <strong>\"${organizationName}\"</strong> \n                  vient d'Ãªtre inscrite sur TeamMove. Vous pouvez maintenant organiser et gÃ©rer \n                  le covoiturage pour tous vos Ã©vÃ©nements sportifs en toute simplicitÃ©.\n                </p>\n              </div>\n\n              <div class=\"feature-grid\">\n                <div class=\"feature-card\">\n                  <div class=\"icon\">ğŸ—“ï¸</div>\n                  <h3>CrÃ©ez vos Ã©vÃ©nements</h3>\n                  <p>Organisez facilement vos compÃ©titions, entraÃ®nements et sorties sportives avec toutes les informations nÃ©cessaires.</p>\n                </div>\n                <div class=\"feature-card\">\n                  <div class=\"icon\">ğŸš—</div>\n                  <h3>GÃ©rez le covoiturage</h3>\n                  <p>Optimisez les trajets en connectant conducteurs et passagers automatiquement selon leurs prÃ©fÃ©rences.</p>\n                </div>\n                <div class=\"feature-card\">\n                  <div class=\"icon\">ğŸ“§</div>\n                  <h3>Communiquez facilement</h3>\n                  <p>Envoyez des invitations, des rappels et communiquez avec vos participants en un clic.</p>\n                </div>\n                <div class=\"feature-card\">\n                  <div class=\"icon\">ğŸ“Š</div>\n                  <h3>Suivez vos statistiques</h3>\n                  <p>Analysez la participation, l'efficacitÃ© du covoiturage et optimisez vos Ã©vÃ©nements.</p>\n                </div>\n              </div>\n\n              <div class=\"cta-section\">\n                <h3 style=\"margin: 0 0 15px; font-size: 24px;\">PrÃªt Ã  commencer ?</h3>\n                <p style=\"margin: 0 0 20px; font-size: 16px; opacity: 0.9;\">\n                  Connectez-vous Ã  votre tableau de bord et crÃ©ez votre premier Ã©vÃ©nement\n                </p>\n                <a href=\"${this.appUrl}/dashboard\" class=\"cta-button\">\n                  ğŸš€ AccÃ©der Ã  mon tableau de bord\n                </a>\n              </div>\n\n              <div class=\"tips-section\">\n                <h3>ğŸ’¡ Conseils pour bien commencer</h3>\n                <div class=\"tip\">\n                  <div class=\"tip-number\">1</div>\n                  <div>\n                    <strong>ComplÃ©tez votre profil</strong><br>\n                    Ajoutez le logo de votre organisation, vos sports pratiquÃ©s et vos informations de contact.\n                  </div>\n                </div>\n                <div class=\"tip\">\n                  <div class=\"tip-number\">2</div>\n                  <div>\n                    <strong>CrÃ©ez votre premier Ã©vÃ©nement</strong><br>\n                    Testez la plateforme avec un petit Ã©vÃ©nement pour vous familiariser avec toutes les fonctionnalitÃ©s.\n                  </div>\n                </div>\n                <div class=\"tip\">\n                  <div class=\"tip-number\">3</div>\n                  <div>\n                    <strong>Invitez vos membres</strong><br>\n                    Utilisez la fonction d'invitation automatique pour que vos participants rejoignent facilement vos Ã©vÃ©nements.\n                  </div>\n                </div>\n              </div>\n\n              <div style=\"background: #fff3cd; border: 1px solid #ffeaa7; padding: 20px; border-radius: 8px; margin: 25px 0;\">\n                <h4 style=\"color: #856404; margin: 0 0 10px;\">ğŸ Offre de lancement</h4>\n                <p style=\"color: #856404; margin: 0; font-size: 14px;\">\n                  Profitez de toutes les fonctionnalitÃ©s avancÃ©es gratuitement pendant vos premiers Ã©vÃ©nements. \n                  DÃ©couvrez tout le potentiel de TeamMove sans engagement !\n                </p>\n              </div>\n\n              <p style=\"text-align: center; margin: 30px 0; color: #666;\">\n                Besoin d'aide ? Notre Ã©quipe est lÃ  pour vous accompagner :<br>\n                ğŸ“§ <a href=\"mailto:${this.fromEmail}\" style=\"color: #667eea;\">${this.fromEmail}</a> | \n                ğŸŒ <a href=\"${this.appUrl}/support\" style=\"color: #667eea;\">Centre d'aide</a>\n              </p>\n            </div>\n            \n            <div class=\"footer\">\n              <p><strong>Bienvenue dans la communautÃ© TeamMove !</strong></p>\n              <p>Ensemble, rendons le sport plus accessible et plus convivial.</p>\n              <div class=\"social-links\">\n                <a href=\"${this.appUrl}\">ğŸŒ</a>\n                <a href=\"mailto:${this.fromEmail}\">ğŸ“§</a>\n              </div>\n              <p style=\"font-size: 12px; color: #999;\">\n                TeamMove - Plateforme de covoiturage sportif<br>\n                <a href=\"${this.appUrl}\" style=\"color: #667eea;\">${this.appUrl}</a>\n              </p>\n            </div>\n          </div>\n        </body>\n      </html>\n    `;\n\n    const text = `\nğŸ‰ Bienvenue sur TeamMove !\n\nBonjour ${contactFirstName} ${contactLastName} !\n\nFÃ©licitations ! Votre ${organizationTypeLabel} \"${organizationName}\" vient d'Ãªtre inscrite sur TeamMove.\n\nVous pouvez maintenant :\nğŸ—“ï¸ CrÃ©er et gÃ©rer vos Ã©vÃ©nements sportifs\nğŸš— Organiser le covoiturage automatiquement\nğŸ“§ Communiquer facilement avec vos participants\nğŸ“Š Suivre vos statistiques et optimiser vos Ã©vÃ©nements\n\nğŸš€ ACCÃ‰DEZ Ã€ VOTRE TABLEAU DE BORD :\n${this.appUrl}/dashboard\n\nğŸ’¡ CONSEILS POUR BIEN COMMENCER :\n1. ComplÃ©tez votre profil avec le logo et les informations de votre organisation\n2. CrÃ©ez votre premier Ã©vÃ©nement pour tester la plateforme\n3. Invitez vos membres Ã  rejoindre vos Ã©vÃ©nements\n\nğŸ OFFRE DE LANCEMENT :\nProfitez gratuitement de toutes les fonctionnalitÃ©s avancÃ©es pour vos premiers Ã©vÃ©nements !\n\nBesoin d'aide ?\nğŸ“§ ${this.fromEmail}\nğŸŒ ${this.appUrl}/support\n\nBienvenue dans la communautÃ© TeamMove !\nL'Ã©quipe TeamMove\n${this.appUrl}\n    `;\n\n    return await this.sendEmail({\n      to: email,\n      toName: `${contactFirstName} ${contactLastName}`,\n      subject: `ğŸ‰ Bienvenue sur TeamMove - ${organizationName}`,\n      html,\n      text\n    });\n  }\n\n  // Email de confirmation de crÃ©ation d'Ã©vÃ©nement\n  async sendEventCreationConfirmation(\n    organizerEmail: string,\n    organizerName: string,\n    eventName: string,\n    organizationName: string,\n    eventDate: Date,\n    eventId: string,\n    meetingPoint?: string,\n    destination?: string,\n    sport?: string,\n    description?: string\n  ): Promise<boolean> {\n    const formattedDate = eventDate.toLocaleDateString('fr-FR', {\n      weekday: 'long',\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n    const formattedTime = eventDate.toLocaleTimeString('fr-FR', {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n\n    const eventUrl = `${this.appUrl}/events/${eventId}/public`;\n    const dashboardUrl = `${this.appUrl}/dashboard`;\n\n    const html = `\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <meta charset=\"utf-8\">\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n          <title>Ã‰vÃ©nement crÃ©Ã© avec succÃ¨s - ${eventName}</title>\n          <style>\n            body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; color: #333; margin: 0; padding: 0; background-color: #f5f5f5; }\n            .container { max-width: 650px; margin: 0 auto; background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }\n            .header { background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white; padding: 40px 30px; text-align: center; }\n            .header h1 { margin: 0; font-size: 28px; font-weight: bold; }\n            .content { padding: 40px 30px; }\n            .event-card { background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); padding: 30px; border-radius: 12px; margin: 25px 0; border-left: 5px solid #28a745; }\n            .event-title { color: #28a745; font-size: 24px; font-weight: bold; margin-bottom: 20px; text-align: center; }\n            .event-details { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; }\n            .detail-item { background: white; padding: 15px; border-radius: 8px; text-align: center; }\n            .detail-item .icon { font-size: 24px; margin-bottom: 8px; }\n            .detail-item .label { font-weight: bold; color: #666; font-size: 12px; text-transform: uppercase; letter-spacing: 0.5px; }\n            .detail-item .value { color: #333; font-size: 16px; margin-top: 5px; }\n            .action-section { background: #e3f2fd; padding: 25px; border-radius: 10px; margin: 25px 0; text-align: center; }\n            .cta-button { display: inline-block; background: #007bff; color: white; padding: 15px 30px; text-decoration: none; border-radius: 50px; font-weight: bold; margin: 10px; transition: transform 0.3s ease; }\n            .cta-button:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }\n            .cta-button.primary { background: #28a745; }\n            .cta-button.secondary { background: #6c757d; }\n            .next-steps { background: #fff3cd; border: 1px solid #ffeaa7; padding: 25px; border-radius: 10px; margin: 25px 0; }\n            .next-steps h3 { color: #856404; margin: 0 0 15px; }\n            .step { display: flex; align-items: flex-start; margin-bottom: 15px; }\n            .step-number { background: #ffc107; color: #333; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-right: 15px; flex-shrink: 0; }\n            .footer { background: #f8f9fa; padding: 30px; text-align: center; color: #666; border-top: 1px solid #e9ecef; }\n          </style>\n        </head>\n        <body>\n          <div class=\"container\">\n            <div class=\"header\">\n              <h1>âœ… Ã‰vÃ©nement crÃ©Ã© avec succÃ¨s !</h1>\n              <p>Votre Ã©vÃ©nement est maintenant en ligne et prÃªt Ã  accueillir des participants</p>\n            </div>\n            \n            <div class=\"content\">\n              <p style=\"font-size: 18px; text-align: center; margin-bottom: 30px;\">\n                Bonjour <strong>${organizerName}</strong>,<br>\n                FÃ©licitations ! Votre Ã©vÃ©nement a Ã©tÃ© crÃ©Ã© avec succÃ¨s sur TeamMove.\n              </p>\n\n              <div class=\"event-card\">\n                <div class=\"event-title\">ğŸƒ ${eventName}</div>\n                <div class=\"event-details\">\n                  <div class=\"detail-item\">\n                    <div class=\"icon\">ğŸ¢</div>\n                    <div class=\"label\">Organisation</div>\n                    <div class=\"value\">${organizationName}</div>\n                  </div>\n                  ${sport ? `\n                  <div class=\"detail-item\">\n                    <div class=\"icon\">âš½</div>\n                    <div class=\"label\">Sport</div>\n                    <div class=\"value\">${sport}</div>\n                  </div>\n                  ` : ''}\n                  <div class=\"detail-item\">\n                    <div class=\"icon\">ğŸ“…</div>\n                    <div class=\"label\">Date</div>\n                    <div class=\"value\">${formattedDate}</div>\n                  </div>\n                  <div class=\"detail-item\">\n                    <div class=\"icon\">ğŸ•’</div>\n                    <div class=\"label\">Heure</div>\n                    <div class=\"value\">${formattedTime}</div>\n                  </div>\n                  ${meetingPoint ? `\n                  <div class=\"detail-item\">\n                    <div class=\"icon\">ğŸ“</div>\n                    <div class=\"label\">Rendez-vous</div>\n                    <div class=\"value\">${meetingPoint}</div>\n                  </div>\n                  ` : ''}\n                  ${destination ? `\n                  <div class=\"detail-item\">\n                    <div class=\"icon\">ğŸ¯</div>\n                    <div class=\"label\">Destination</div>\n                    <div class=\"value\">${destination}</div>\n                  </div>\n                  ` : ''}\n                </div>\n                ${description ? `\n                <div style=\"margin-top: 20px; padding: 15px; background: white; border-radius: 8px;\">\n                  <div class=\"label\">ğŸ“ DESCRIPTION</div>\n                  <div style=\"margin-top: 10px; color: #333; line-height: 1.5;\">${description.replace(/\\n/g, '<br>')}</div>\n                </div>\n                ` : ''}\n              </div>\n\n              <div class=\"action-section\">\n                <h3 style=\"margin: 0 0 20px; color: #1976d2;\">ğŸš€ Actions rapides</h3>\n                <a href=\"${eventUrl}\" class=\"cta-button primary\">\n                  ğŸ‘€ Voir l'Ã©vÃ©nement public\n                </a>\n                <a href=\"${dashboardUrl}\" class=\"cta-button secondary\">\n                  ğŸ“Š GÃ©rer depuis le tableau de bord\n                </a>\n              </div>\n\n              <div class=\"next-steps\">\n                <h3>ğŸ“‹ Prochaines Ã©tapes recommandÃ©es</h3>\n                <div class=\"step\">\n                  <div class=\"step-number\">1</div>\n                  <div>\n                    <strong>Partagez l'Ã©vÃ©nement</strong><br>\n                    Copiez le lien public de votre Ã©vÃ©nement et partagez-le avec vos participants par email, SMS ou sur vos rÃ©seaux sociaux.\n                  </div>\n                </div>\n                <div class=\"step\">\n                  <div class=\"step-number\">2</div>\n                  <div>\n                    <strong>Invitez des participants</strong><br>\n                    Utilisez la fonction d'invitation automatique depuis votre tableau de bord pour envoyer des emails personnalisÃ©s.\n                  </div>\n                </div>\n                <div class=\"step\">\n                  <div class=\"step-number\">3</div>\n                  <div>\n                    <strong>Surveillez les inscriptions</strong><br>\n                    Suivez en temps rÃ©el qui s'inscrit comme conducteur ou passager depuis votre tableau de bord.\n                  </div>\n                </div>\n                <div class=\"step\">\n                  <div class=\"step-number\">4</div>\n                  <div>\n                    <strong>Communiquez avec vos participants</strong><br>\n                    Envoyez des messages, des rappels ou des mises Ã  jour directement depuis la plateforme.\n                  </div>\n                </div>\n              </div>\n\n              <div style=\"background: #d4edda; border: 1px solid #c3e6cb; padding: 20px; border-radius: 8px; margin: 25px 0; text-align: center;\">\n                <h4 style=\"color: #155724; margin: 0 0 10px;\">ğŸ”— Lien de partage de votre Ã©vÃ©nement</h4>\n                <p style=\"margin: 10px 0; font-family: monospace; background: white; padding: 10px; border-radius: 4px; word-break: break-all;\">\n                  ${eventUrl}\n                </p>\n                <p style=\"color: #155724; margin: 0; font-size: 14px;\">\n                  Partagez ce lien pour que vos participants puissent s'inscrire facilement !\n                </p>\n              </div>\n\n              <p style=\"text-align: center; margin: 30px 0; color: #666;\">\n                Besoin d'aide ? Notre Ã©quipe est disponible :<br>\n                ğŸ“§ <a href=\"mailto:${this.fromEmail}\" style=\"color: #28a745;\">${this.fromEmail}</a> | \n                ğŸŒ <a href=\"${this.appUrl}/support\" style=\"color: #28a745;\">Centre d'aide</a>\n              </p>\n            </div>\n            \n            <div class=\"footer\">\n              <p><strong>Merci d'utiliser TeamMove !</strong></p>\n              <p>Votre Ã©vÃ©nement contribue Ã  rendre le sport plus accessible et plus convivial.</p>\n              <p style=\"font-size: 12px; color: #999; margin-top: 20px;\">\n                TeamMove - Plateforme de covoiturage sportif<br>\n                <a href=\"${this.appUrl}\" style=\"color: #28a745;\">${this.appUrl}</a>\n              </p>\n            </div>\n          </div>\n        </body>\n      </html>\n    `;\n\n    const text = `\nâœ… Ã‰vÃ©nement crÃ©Ã© avec succÃ¨s !\n\nBonjour ${organizerName},\n\nFÃ©licitations ! Votre Ã©vÃ©nement \"${eventName}\" a Ã©tÃ© crÃ©Ã© avec succÃ¨s sur TeamMove.\n\nğŸ“ DÃ‰TAILS DE L'Ã‰VÃ‰NEMENT :\nâ€¢ Organisation : ${organizationName}\n${sport ? `â€¢ Sport : ${sport}` : ''}\nâ€¢ Date : ${formattedDate}\nâ€¢ Heure : ${formattedTime}\n${meetingPoint ? `â€¢ Rendez-vous : ${meetingPoint}` : ''}\n${destination ? `â€¢ Destination : ${destination}` : ''}\n${description ? `â€¢ Description : ${description}` : ''}\n\nğŸ”— LIEN DE PARTAGE :\n${eventUrl}\n\nğŸš€ ACTIONS RAPIDES :\nâ€¢ Voir l'Ã©vÃ©nement public : ${eventUrl}\nâ€¢ GÃ©rer depuis le tableau de bord : ${dashboardUrl}\n\nğŸ“‹ PROCHAINES Ã‰TAPES RECOMMANDÃ‰ES :\n1. Partagez le lien de votre Ã©vÃ©nement avec vos participants\n2. Invitez des participants depuis votre tableau de bord\n3. Surveillez les inscriptions en temps rÃ©el\n4. Communiquez avec vos participants via la plateforme\n\nBesoin d'aide ?\nğŸ“§ ${this.fromEmail}\nğŸŒ ${this.appUrl}/support\n\nMerci d'utiliser TeamMove !\nL'Ã©quipe TeamMove\n${this.appUrl}\n    `;\n\n    return await this.sendEmail({\n      to: organizerEmail,\n      toName: organizerName,\n      subject: `âœ… Ã‰vÃ©nement crÃ©Ã© : ${eventName} - ${organizationName}`,\n      html,\n      text\n    });\n  }\n\n  // Email pour l'organisateur lors d'une nouvelle inscription\n  async sendParticipantRegistrationNotification(\n    organizerEmail: string,\n    organizerName: string,\n    participantName: string,\n    participantRole: 'driver' | 'passenger',\n    eventName: string,\n    organizationName: string,\n    eventId: string,\n    availableSeats?: number,\n    participantComment?: string\n  ): Promise<boolean> {\n    const roleLabel = participantRole === 'driver' ? 'Conducteur' : 'Passager';\n    const roleIcon = participantRole === 'driver' ? 'ğŸš—' : 'ğŸ‘¤';\n    const eventUrl = `${this.appUrl}/events/${eventId}/public`;\n    const dashboardUrl = `${this.appUrl}/dashboard`;\n\n    const html = `\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <meta charset=\"utf-8\">\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n          <title>Nouvelle inscription - ${eventName}</title>\n          <style>\n            body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; color: #333; margin: 0; padding: 0; background-color: #f5f5f5; }\n            .container { max-width: 600px; margin: 0 auto; background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }\n            .header { background: linear-gradient(135deg, #17a2b8 0%, #007bff 100%); color: white; padding: 40px 30px; text-align: center; }\n            .header h1 { margin: 0; font-size: 28px; font-weight: bold; }\n            .content { padding: 40px 30px; }\n            .notification-card { background: linear-gradient(135deg, #e8f5e8 0%, #d4edda 100%); padding: 25px; border-radius: 12px; margin: 25px 0; border-left: 5px solid #28a745; text-align: center; }\n            .participant-info { background: #f8f9fa; padding: 25px; border-radius: 10px; margin: 20px 0; }\n            .participant-info h3 { color: #007bff; margin: 0 0 15px; text-align: center; }\n            .info-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin: 20px 0; }\n            .info-item { text-align: center; padding: 15px; background: white; border-radius: 8px; }\n            .info-item .icon { font-size: 24px; margin-bottom: 8px; }\n            .info-item .label { font-weight: bold; color: #666; font-size: 12px; text-transform: uppercase; }\n            .info-item .value { color: #333; font-size: 16px; margin-top: 5px; }\n            .comment-section { background: #fff3cd; border: 1px solid #ffeaa7; padding: 20px; border-radius: 8px; margin: 20px 0; }\n            .comment-section h4 { color: #856404; margin: 0 0 10px; }\n            .action-buttons { text-align: center; margin: 30px 0; }\n            .cta-button { display: inline-block; background: #007bff; color: white; padding: 15px 25px; text-decoration: none; border-radius: 50px; font-weight: bold; margin: 10px; transition: transform 0.3s ease; }\n            .cta-button:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }\n            .cta-button.primary { background: #28a745; }\n            .stats-section { background: #e3f2fd; padding: 20px; border-radius: 10px; margin: 20px 0; text-align: center; }\n            .footer { background: #f8f9fa; padding: 30px; text-align: center; color: #666; border-top: 1px solid #e9ecef; }\n          </style>\n        </head>\n        <body>\n          <div class=\"container\">\n            <div class=\"header\">\n              <h1>ğŸ‰ Nouvelle inscription !</h1>\n              <p>Un participant vient de s'inscrire Ã  votre Ã©vÃ©nement</p>\n            </div>\n            \n            <div class=\"content\">\n              <p style=\"font-size: 18px; text-align: center; margin-bottom: 30px;\">\n                Bonjour <strong>${organizerName}</strong>,<br>\n                Excellente nouvelle ! Une nouvelle personne vient de s'inscrire Ã  votre Ã©vÃ©nement.\n              </p>\n\n              <div class=\"notification-card\">\n                <div style=\"font-size: 48px; margin-bottom: 15px;\">${roleIcon}</div>\n                <h2 style=\"margin: 0; color: #28a745;\">${participantName}</h2>\n                <p style=\"margin: 10px 0; font-size: 18px;\">s'est inscrit comme <strong>${roleLabel}</strong></p>\n                <p style=\"margin: 0; color: #666;\">pour l'Ã©vÃ©nement \"${eventName}\"</p>\n              </div>\n\n              <div class=\"participant-info\">\n                <h3>${roleIcon} Informations sur la participation</h3>\n                <div class=\"info-grid\">\n                  <div class=\"info-item\">\n                    <div class=\"icon\">ğŸ‘¤</div>\n                    <div class=\"label\">Participant</div>\n                    <div class=\"value\">${participantName}</div>\n                  </div>\n                  <div class=\"info-item\">\n                    <div class=\"icon\">${roleIcon}</div>\n                    <div class=\"label\">RÃ´le</div>\n                    <div class=\"value\">${roleLabel}</div>\n                  </div>\n                  ${participantRole === 'driver' && availableSeats ? `\n                  <div class=\"info-item\">\n                    <div class=\"icon\">ğŸ’º</div>\n                    <div class=\"label\">Places offertes</div>\n                    <div class=\"value\">${availableSeats} place${availableSeats > 1 ? 's' : ''}</div>\n                  </div>\n                  ` : ''}\n                  <div class=\"info-item\">\n                    <div class=\"icon\">ğŸƒ</div>\n                    <div class=\"label\">Ã‰vÃ©nement</div>\n                    <div class=\"value\">${eventName}</div>\n                  </div>\n                </div>\n                ${participantComment ? `\n                <div class=\"comment-section\">\n                  <h4>ğŸ’¬ Commentaire du participant :</h4>\n                  <p style=\"margin: 0; font-style: italic; color: #856404;\">\"${participantComment}\"</p>\n                </div>\n                ` : ''}\n              </div>\n\n              <div class=\"stats-section\">\n                <h3 style=\"color: #1976d2; margin: 0 0 15px;\">ğŸ“Š Conseil de gestion</h3>\n                <p style=\"margin: 0; color: #1976d2;\">\n                  ${participantRole === 'driver' \n                    ? `ğŸš— Excellent ! Plus vous avez de conducteurs, plus il sera facile d'organiser le covoiturage. N'hÃ©sitez pas Ã  encourager d'autres membres Ã  se proposer comme conducteurs.`\n                    : `ğŸ‘¤ Parfait ! Assurez-vous qu'il y a suffisamment de conducteurs pour accueillir tous les passagers. Vous pouvez inviter des membres qui ont une voiture Ã  se proposer comme conducteurs.`\n                  }\n                </p>\n              </div>\n\n              <div class=\"action-buttons\">\n                <a href=\"${eventUrl}\" class=\"cta-button primary\">\n                  ğŸ‘€ Voir tous les participants\n                </a>\n                <a href=\"${dashboardUrl}\" class=\"cta-button\">\n                  ğŸ“Š Tableau de bord\n                </a>\n              </div>\n\n              <div style=\"background: #d1ecf1; border: 1px solid #bee5eb; padding: 20px; border-radius: 8px; margin: 25px 0;\">\n                <h4 style=\"color: #0c5460; margin: 0 0 10px;\">ğŸ’¡ Astuce de gestion</h4>\n                <p style=\"color: #0c5460; margin: 0; font-size: 14px;\">\n                  Vous pouvez envoyer un message personnalisÃ© Ã  tous vos participants depuis votre tableau de bord. \n                  C'est idÃ©al pour donner des informations complÃ©mentaires ou des consignes de derniÃ¨re minute !\n                </p>\n              </div>\n\n              <p style=\"text-align: center; margin: 30px 0; color: #666;\">\n                Besoin d'aide pour gÃ©rer votre Ã©vÃ©nement ?<br>\n                ğŸ“§ <a href=\"mailto:${this.fromEmail}\" style=\"color: #007bff;\">${this.fromEmail}</a> | \n                ğŸŒ <a href=\"${this.appUrl}/support\" style=\"color: #007bff;\">Centre d'aide</a>\n              </p>\n            </div>\n            \n            <div class=\"footer\">\n              <p><strong>Merci d'utiliser TeamMove !</strong></p>\n              <p>Votre Ã©vÃ©nement rassemble la communautÃ© sportive.</p>\n              <p style=\"font-size: 12px; color: #999; margin-top: 20px;\">\n                TeamMove - Plateforme de covoiturage sportif<br>\n                <a href=\"${this.appUrl}\" style=\"color: #007bff;\">${this.appUrl}</a>\n              </p>\n            </div>\n          </div>\n        </body>\n      </html>\n    `;\n\n    const text = `\nğŸ‰ Nouvelle inscription Ã  votre Ã©vÃ©nement !\n\nBonjour ${organizerName},\n\nExcellente nouvelle ! ${participantName} vient de s'inscrire comme ${roleLabel} Ã  votre Ã©vÃ©nement \"${eventName}\".\n\nğŸ‘¤ INFORMATIONS SUR LA PARTICIPATION :\nâ€¢ Participant : ${participantName}\nâ€¢ RÃ´le : ${roleLabel}\n${participantRole === 'driver' && availableSeats ? `â€¢ Places offertes : ${availableSeats} place${availableSeats > 1 ? 's' : ''}` : ''}\n${participantComment ? `â€¢ Commentaire : \"${participantComment}\"` : ''}\n\nğŸš€ ACTIONS :\nâ€¢ Voir tous les participants : ${eventUrl}\nâ€¢ Tableau de bord : ${dashboardUrl}\n\nğŸ’¡ CONSEIL :\n${participantRole === 'driver' \n  ? `Excellent ! Plus vous avez de conducteurs, plus il sera facile d'organiser le covoiturage.`\n  : `Assurez-vous qu'il y a suffisamment de conducteurs pour tous les passagers.`\n}\n\nVous pouvez envoyer un message Ã  tous vos participants depuis votre tableau de bord.\n\nBesoin d'aide ?\nğŸ“§ ${this.fromEmail}\nğŸŒ ${this.appUrl}/support\n\nMerci d'utiliser TeamMove !\nL'Ã©quipe TeamMove\n${this.appUrl}\n    `;\n\n    return await this.sendEmail({\n      to: organizerEmail,\n      toName: organizerName,\n      subject: `ğŸ‰ Nouvelle inscription : ${participantName} - ${eventName}`,\n      html,\n      text\n    });\n  }\n\n\n}\n\nexport const emailServiceEnhanced = new EmailServiceEnhanced();\nexport { EmailServiceEnhanced };","size_bytes":68770},"server/email-service.ts":{"content":"import sgMail from '@sendgrid/mail';\nimport { format } from 'date-fns';\nimport { fr } from 'date-fns/locale';\n\n// Configuration SendGrid\nsgMail.setApiKey(process.env.SENDGRID_API_KEY || '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');\n\nconst FROM_EMAIL = process.env.SENDGRID_FROM_EMAIL || 'alt.f7-3ywk4mu@yopmail.com';\nconst FROM_NAME = process.env.SENDGRID_FROM_NAME || 'teammove';\n\ninterface EmailTemplate {\n  subject: string;\n  html: string;\n  text: string;\n}\n\nexport class EmailService {\n  \n  // CrÃ©er le template HTML moderne et professionnel\n  static createEmailTemplate(content: string): string {\n    return `\n    <!DOCTYPE html>\n    <html lang=\"fr\">\n    <head>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n        <title>TeamMove</title>\n        <style>\n            body {\n                margin: 0;\n                padding: 0;\n                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;\n                line-height: 1.6;\n                color: #333333;\n                background-color: #f8fafc;\n            }\n            .container {\n                max-width: 600px;\n                margin: 0 auto;\n                background-color: #ffffff;\n                border-radius: 12px;\n                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);\n                overflow: hidden;\n            }\n            .header {\n                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n                color: white;\n                padding: 40px 30px;\n                text-align: center;\n            }\n            .logo {\n                font-size: 28px;\n                font-weight: bold;\n                margin-bottom: 10px;\n                letter-spacing: -1px;\n            }\n            .tagline {\n                font-size: 16px;\n                opacity: 0.9;\n                margin: 0;\n            }\n            .content {\n                padding: 40px 30px;\n            }\n            .plan-card {\n                background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);\n                color: white;\n                padding: 25px;\n                border-radius: 8px;\n                margin: 25px 0;\n                text-align: center;\n            }\n            .plan-name {\n                font-size: 24px;\n                font-weight: bold;\n                margin-bottom: 10px;\n            }\n            .plan-price {\n                font-size: 32px;\n                font-weight: bold;\n                margin-bottom: 15px;\n            }\n            .features {\n                background-color: #f8fafc;\n                border-radius: 8px;\n                padding: 20px;\n                margin: 20px 0;\n            }\n            .feature-item {\n                display: flex;\n                align-items: center;\n                margin-bottom: 10px;\n                padding: 8px 0;\n            }\n            .feature-icon {\n                color: #10b981;\n                margin-right: 12px;\n                font-weight: bold;\n            }\n            .invoice-section {\n                border: 2px solid #e5e7eb;\n                border-radius: 8px;\n                padding: 20px;\n                margin: 20px 0;\n                background-color: #fafafa;\n            }\n            .invoice-header {\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                margin-bottom: 20px;\n                padding-bottom: 15px;\n                border-bottom: 1px solid #e5e7eb;\n            }\n            .invoice-details {\n                margin-bottom: 15px;\n            }\n            .invoice-total {\n                background-color: #667eea;\n                color: white;\n                padding: 15px;\n                border-radius: 6px;\n                text-align: center;\n                font-weight: bold;\n                font-size: 18px;\n            }\n            .button {\n                display: inline-block;\n                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n                color: white;\n                text-decoration: none;\n                padding: 15px 30px;\n                border-radius: 8px;\n                font-weight: bold;\n                margin: 20px 0;\n                text-align: center;\n            }\n            .footer {\n                background-color: #f8fafc;\n                padding: 30px;\n                text-align: center;\n                border-top: 1px solid #e5e7eb;\n                font-size: 14px;\n                color: #6b7280;\n            }\n            .contact-info {\n                margin-top: 15px;\n            }\n            .social-links {\n                margin-top: 20px;\n            }\n            @media (max-width: 600px) {\n                .container {\n                    margin: 0 10px;\n                }\n                .header, .content, .footer {\n                    padding: 20px;\n                }\n            }\n        </style>\n    </head>\n    <body>\n        <div class=\"container\">\n            <div class=\"header\">\n                <div class=\"logo\">ğŸƒâ€â™‚ï¸ TeamMove</div>\n                <p class=\"tagline\">Votre plateforme de covoiturage sportif</p>\n            </div>\n            \n            <div class=\"content\">\n                ${content}\n            </div>\n            \n            <div class=\"footer\">\n                <p><strong>TeamMove</strong> - Simplifiez l'organisation de vos Ã©vÃ©nements sportifs</p>\n                <div class=\"contact-info\">\n                    <p>ğŸ“§ Support: support@teammove.fr</p>\n                    <p>ğŸŒ Site web: <a href=\"${process.env.APP_URL || 'https://teammove.fr'}\" style=\"color: #667eea;\">teammove.fr</a></p>\n                </div>\n                <div class=\"social-links\">\n                    <p>Suivez-nous sur nos rÃ©seaux sociaux pour ne rien manquer !</p>\n                </div>\n            </div>\n        </div>\n    </body>\n    </html>\n    `;\n  }\n\n  // Envoyer email de confirmation d'abonnement\n  static async sendSubscriptionEmail(\n    organization: any, \n    plan: any, \n    type: 'activated' | 'cancelled' | 'expired' | 'renewal_reminder'\n  ): Promise<void> {\n    try {\n      const template = this.getSubscriptionEmailTemplate(organization, plan, type);\n      \n      const msg = {\n        to: organization.email,\n        from: {\n          email: FROM_EMAIL,\n          name: FROM_NAME\n        },\n        subject: template.subject,\n        html: this.createEmailTemplate(template.html),\n        text: template.text,\n      };\n\n      await sgMail.send(msg);\n      console.log(`âœ… Email d'abonnement envoyÃ©: ${type} to ${organization.email}`);\n    } catch (error) {\n      console.error('âŒ Erreur envoi email abonnement:', error);\n      throw error;\n    }\n  }\n\n  // GÃ©nÃ©rer le template d'email selon le type\n  private static getSubscriptionEmailTemplate(organization: any, plan: any, type: string): EmailTemplate {\n    const orgName = `${organization.contactFirstName} ${organization.contactLastName}`;\n    const planPrice = plan.price > 0 ? `${(plan.price / 100).toFixed(2)}â‚¬` : 'Gratuit';\n    \n    switch (type) {\n      case 'activated':\n        return {\n          subject: `ğŸ‰ Bienvenue dans ${plan.name} - TeamMove`,\n          html: `\n            <h2>FÃ©licitations ${orgName} ! ğŸ‰</h2>\n            <p>Votre abonnement <strong>${plan.name}</strong> a Ã©tÃ© activÃ© avec succÃ¨s.</p>\n            \n            <div class=\"plan-card\">\n                <div class=\"plan-name\">${plan.name}</div>\n                <div class=\"plan-price\">${planPrice}</div>\n                <p style=\"margin: 0; opacity: 0.9;\">${plan.description}</p>\n            </div>\n\n            <div class=\"features\">\n                <h3 style=\"margin-top: 0; color: #374151;\">âœ¨ Vos nouvelles fonctionnalitÃ©s :</h3>\n                ${plan.features.map((feature: string) => `\n                    <div class=\"feature-item\">\n                        <span class=\"feature-icon\">âœ…</span>\n                        <span>${feature}</span>\n                    </div>\n                `).join('')}\n            </div>\n\n            ${this.generateInvoiceSection(plan, organization)}\n\n            <div style=\"text-align: center; margin: 30px 0;\">\n                <a href=\"${process.env.APP_URL}/dashboard\" class=\"button\">\n                    AccÃ©der Ã  votre tableau de bord\n                </a>\n            </div>\n\n            <p><strong>Merci de faire confiance Ã  TeamMove !</strong></p>\n            <p>Notre Ã©quipe est lÃ  pour vous accompagner dans l'organisation de vos Ã©vÃ©nements sportifs.</p>\n          `,\n          text: `FÃ©licitations ${orgName}! Votre abonnement ${plan.name} (${planPrice}) a Ã©tÃ© activÃ©. AccÃ©dez Ã  votre tableau de bord: ${process.env.APP_URL}/dashboard`\n        };\n\n      case 'cancelled':\n        return {\n          subject: `Abonnement annulÃ© - TeamMove`,\n          html: `\n            <h2>Abonnement annulÃ©</h2>\n            <p>Bonjour ${orgName},</p>\n            <p>Votre abonnement <strong>${plan.name}</strong> a Ã©tÃ© annulÃ© avec succÃ¨s.</p>\n            <p>Vous avez Ã©tÃ© automatiquement basculÃ© vers l'offre <strong>DÃ©couverte</strong>.</p>\n            \n            <div class=\"features\">\n                <h3>ğŸ”„ Votre offre actuelle - DÃ©couverte :</h3>\n                <div class=\"feature-item\">\n                    <span class=\"feature-icon\">âœ…</span>\n                    <span>1 Ã©vÃ©nement maximum</span>\n                </div>\n                <div class=\"feature-item\">\n                    <span class=\"feature-icon\">âœ…</span>\n                    <span>Jusqu'Ã  20 invitations</span>\n                </div>\n                <div class=\"feature-item\">\n                    <span class=\"feature-icon\">âœ…</span>\n                    <span>Support par email</span>\n                </div>\n            </div>\n\n            <p>Vous pouvez Ã  tout moment souscrire Ã  une nouvelle offre depuis votre tableau de bord.</p>\n            \n            <div style=\"text-align: center; margin: 30px 0;\">\n                <a href=\"${process.env.APP_URL}/pricing\" class=\"button\">\n                    Voir nos offres\n                </a>\n            </div>\n          `,\n          text: `Bonjour ${orgName}, votre abonnement ${plan.name} a Ã©tÃ© annulÃ©. Vous Ãªtes maintenant sur l'offre DÃ©couverte.`\n        };\n\n      case 'expired':\n        return {\n          subject: `âš ï¸ Abonnement expirÃ© - TeamMove`,\n          html: `\n            <h2>âš ï¸ Votre abonnement a expirÃ©</h2>\n            <p>Bonjour ${orgName},</p>\n            <p>Votre abonnement <strong>${plan.name}</strong> a expirÃ© le ${format(new Date(), 'dd MMMM yyyy', { locale: fr })}.</p>\n            <p>Vous avez Ã©tÃ© automatiquement basculÃ© vers l'offre <strong>DÃ©couverte</strong>.</p>\n            \n            <p><strong>Pour continuer Ã  profiter de toutes les fonctionnalitÃ©s :</strong></p>\n            <div style=\"text-align: center; margin: 30px 0;\">\n                <a href=\"${process.env.APP_URL}/pricing\" class=\"button\">\n                    Renouveler mon abonnement\n                </a>\n            </div>\n          `,\n          text: `Votre abonnement ${plan.name} a expirÃ©. Renouvelez-le sur ${process.env.APP_URL}/pricing`\n        };\n\n      case 'renewal_reminder':\n        const daysLeft = Math.ceil((new Date(organization.subscriptionEndDate || organization.packageExpiryDate).getTime() - new Date().getTime()) / (1000 * 60 * 60 * 24));\n        return {\n          subject: `ğŸ”” Rappel : Votre abonnement expire dans ${daysLeft} jour(s)`,\n          html: `\n            <h2>ğŸ”” Rappel de renouvellement</h2>\n            <p>Bonjour ${orgName},</p>\n            <p>Votre abonnement <strong>${plan.name}</strong> expire dans <strong>${daysLeft} jour(s)</strong>.</p>\n            \n            <p>Pour Ã©viter toute interruption de service, nous vous invitons Ã  renouveler votre abonnement dÃ¨s maintenant.</p>\n            \n            <div style=\"text-align: center; margin: 30px 0;\">\n                <a href=\"${process.env.APP_URL}/dashboard/billing\" class=\"button\">\n                    Renouveler maintenant\n                </a>\n            </div>\n            \n            <p><em>Si vous avez dÃ©jÃ  renouvelÃ©, vous pouvez ignorer ce message.</em></p>\n          `,\n          text: `Votre abonnement ${plan.name} expire dans ${daysLeft} jour(s). Renouvelez sur ${process.env.APP_URL}/dashboard/billing`\n        };\n\n      default:\n        throw new Error(`Type d'email non supportÃ©: ${type}`);\n    }\n  }\n\n  // GÃ©nÃ©rer la section facture\n  private static generateInvoiceSection(plan: any, organization: any): string {\n    if (plan.price === 0) return '';\n\n    const now = new Date();\n    const formattedDate = format(now, 'dd MMMM yyyy', { locale: fr });\n    const invoiceNumber = `TM-${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')}-${organization.id.slice(-6)}`;\n\n    return `\n      <div class=\"invoice-section\">\n          <div class=\"invoice-header\">\n              <div>\n                  <h3 style=\"margin: 0; color: #374151;\">ğŸ“„ Facture</h3>\n                  <p style=\"margin: 5px 0; color: #6b7280;\">NÂ° ${invoiceNumber}</p>\n              </div>\n              <div style=\"text-align: right;\">\n                  <p style=\"margin: 0; color: #6b7280;\">Date: ${formattedDate}</p>\n              </div>\n          </div>\n          \n          <div class=\"invoice-details\">\n              <p><strong>FacturÃ© Ã  :</strong></p>\n              <p>${organization.name}<br>\n                 ${organization.contactFirstName} ${organization.contactLastName}<br>\n                 ${organization.email}</p>\n          </div>\n          \n          <div class=\"invoice-details\">\n              <p><strong>DÃ©tail :</strong></p>\n              <p>${plan.name} - ${plan.description}</p>\n              <p>PÃ©riode: ${formattedDate}</p>\n          </div>\n          \n          <div class=\"invoice-total\">\n              Total TTC: ${(plan.price / 100).toFixed(2)}â‚¬\n          </div>\n          \n          <p style=\"font-size: 14px; color: #6b7280; margin-top: 15px;\">\n              <em>Cette facture est gÃ©nÃ©rÃ©e automatiquement. Pour toute question, contactez notre support.</em>\n          </p>\n      </div>\n    `;\n  }\n\n  // Envoyer email de rappel de renouvellement\n  static async sendRenewalReminder(organization: any): Promise<void> {\n    try {\n      // DÃ©terminer le plan actuel\n      const currentPlan = {\n        name: organization.subscriptionType || 'DÃ©couverte',\n        price: 0, // Sera mis Ã  jour selon le type\n        description: 'Votre abonnement actuel'\n      };\n\n      await this.sendSubscriptionEmail(organization, currentPlan, 'renewal_reminder');\n    } catch (error) {\n      console.error('âŒ Erreur envoi rappel renouvellement:', error);\n    }\n  }\n\n  // Envoyer email de notification gÃ©nÃ©rique\n  static async sendNotificationEmail(\n    to: string,\n    subject: string,\n    message: string,\n    actionUrl?: string,\n    actionText?: string\n  ): Promise<void> {\n    try {\n      let content = `\n        <h2>${subject}</h2>\n        <p>${message}</p>\n      `;\n\n      if (actionUrl && actionText) {\n        content += `\n          <div style=\"text-align: center; margin: 30px 0;\">\n              <a href=\"${actionUrl}\" class=\"button\">\n                  ${actionText}\n              </a>\n          </div>\n        `;\n      }\n\n      const msg = {\n        to: to,\n        from: {\n          email: FROM_EMAIL,\n          name: FROM_NAME\n        },\n        subject: subject,\n        html: this.createEmailTemplate(content),\n        text: `${subject}\\n\\n${message}${actionUrl ? `\\n\\n${actionText}: ${actionUrl}` : ''}`\n      };\n\n      await sgMail.send(msg);\n      console.log(`âœ… Email de notification envoyÃ© Ã : ${to}`);\n    } catch (error) {\n      console.error('âŒ Erreur envoi email notification:', error);\n      throw error;\n    }\n  }\n\n\n\n  // MÃ©thodes utilitaires pour les emails d'abonnement\n  private static formatPrice(priceInCents: number): string {\n    return `${(priceInCents / 100).toFixed(2)}â‚¬`;\n  }\n\n  private static getIntervalSuffix(interval: string): string {\n    switch (interval) {\n      case 'monthly': return '/mois';\n      case 'annual': return '/an';\n      case 'pack_single': return '';\n      case 'pack_10': return ' (pack 10)';\n      default: return '';\n    }\n  }\n\n  private static getSubscriptionName(subscriptionType: string): string {\n    switch (subscriptionType) {\n      case 'decouverte': return 'DÃ©couverte';\n      case 'evenementielle': return 'Ã‰vÃ©nementielle';\n      case 'pro_club': return 'Clubs & Associations';\n      case 'pro_pme': return 'PME';\n      case 'pro_entreprise': return 'Grandes Entreprises';\n      default: return 'Abonnement';\n    }\n  }\n\n  private static calculateDaysLeft(organization: any): number {\n    if (!organization.subscriptionEndDate && !organization.packageExpiryDate) return 0;\n    \n    const expiryDate = new Date(organization.subscriptionEndDate || organization.packageExpiryDate);\n    const now = new Date();\n    const diffTime = expiryDate.getTime() - now.getTime();\n    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n  }\n\n  private static generateFeaturesList(plan: any): string {\n    let features: string[] = [];\n    \n    switch (plan.type) {\n      case 'evenementielle':\n        features = [\n          plan.id?.includes('pack10') ? '10 Ã©vÃ©nements complets' : '1 Ã©vÃ©nement complet',\n          'Invitations illimitÃ©es',\n          'Support prioritaire',\n          'Messagerie intÃ©grÃ©e'\n        ];\n        break;\n      case 'pro_club':\n        features = [\n          'Ã‰vÃ©nements illimitÃ©s',\n          'Invitations illimitÃ©es',\n          'Branding personnalisÃ©',\n          'API d\\'intÃ©gration'\n        ];\n        break;\n      case 'pro_pme':\n        features = [\n          'Tout de Clubs & Associations',\n          'Multi-utilisateurs (5 admins)',\n          'Support tÃ©lÃ©phonique',\n          'Formation personnalisÃ©e'\n        ];\n        break;\n      case 'pro_entreprise':\n        features = [\n          'Tout de PME',\n          'Multi-utilisateurs illimitÃ©s',\n          'Support 24/7',\n          'Account Manager dÃ©diÃ©'\n        ];\n        break;\n      default:\n        features = ['FonctionnalitÃ©s avancÃ©es'];\n    }\n\n    return `\n      <div style=\"background: #e8f5e8; padding: 20px; border-radius: 8px; margin: 20px 0;\">\n        <h3>Vos fonctionnalitÃ©s incluses :</h3>\n        <ul>\n          ${features.map(feature => `<li>${feature}</li>`).join('')}\n        </ul>\n      </div>\n    `;\n  }\n\n  // VÃ©rifier la configuration email\n  static async verifyConfiguration(): Promise<{ valid: boolean; issues?: string[] }> {\n    const issues: string[] = [];\n\n    if (!process.env.SENDGRID_API_KEY) {\n      issues.push('SENDGRID_API_KEY manquante');\n    }\n\n    if (!process.env.SENDGRID_FROM_EMAIL) {\n      issues.push('SENDGRID_FROM_EMAIL manquante');\n    }\n\n    // Test basique de SendGrid\n    try {\n      if (process.env.SENDGRID_API_KEY) {\n        sgMail.setApiKey(process.env.SENDGRID_API_KEY);\n        // Pas de test d'envoi rÃ©el pour Ã©viter les frais\n      }\n    } catch (error) {\n      issues.push('Configuration SendGrid invalide');\n    }\n\n    return {\n      valid: issues.length === 0,\n      issues: issues.length > 0 ? issues : undefined\n    };\n  }\n}\n\n// Fonction utilitaire pour envoyer les emails d'abonnement (export pour compatibilitÃ©)\nexport async function sendSubscriptionEmail(organization: any, plan: any, type: 'activated' | 'cancelled' | 'expired' | 'renewal_reminder'): Promise<void> {\n  return EmailService.sendSubscriptionEmail(organization, plan, type);\n}","size_bytes":19736},"server/email.ts":{"content":"import sgMail from '@sendgrid/mail';\n\n// Configuration SendGrid - Lazy initialization\nlet isConfigured = false;\n\nfunction configureSendGrid() {\n  if (!isConfigured && process.env.SENDGRID_API_KEY) {\n    sgMail.setApiKey(process.env.SENDGRID_API_KEY);\n    isConfigured = true;\n  } else if (!process.env.SENDGRID_API_KEY) {\n    console.warn('âš ï¸  SENDGRID_API_KEY is not configured - email features will be disabled');\n  }\n}\n\nexport interface EmailTemplate {\n  subject: string;\n  html: string;\n  text: string;\n}\n\nexport interface EmailData {\n  to: string;\n  toName?: string;\n  subject: string;\n  html: string;\n  text: string;\n  fromEmail?: string;\n  fromName?: string;\n}\n\nclass EmailService {\n  private fromEmail: string;\n  private fromName: string;\n  private appUrl: string;\n\n  constructor() {\n    this.fromEmail = process.env.SENDGRID_FROM_EMAIL || 'noreply@TeamMoves.com';\n    this.fromName = process.env.SENDGRID_FROM_NAME || 'TeamMoves';\n    this.appUrl = process.env.APP_URL || 'https://teammove.fr';\n  }\n\n  async sendEmail(data: EmailData): Promise<boolean> {\n    try {\n      configureSendGrid();\n      \n      if (!process.env.SENDGRID_API_KEY) {\n        console.warn('Email not sent - SENDGRID_API_KEY not configured');\n        return false;\n      }\n\n      const msg = {\n        to: {\n          email: data.to,\n          name: data.toName || data.to\n        },\n        from: {\n          email: data.fromEmail || this.fromEmail,\n          name: data.fromName || this.fromName\n        },\n        subject: data.subject,\n        text: data.text,\n        html: data.html,\n      };\n\n      await sgMail.send(msg);\n      console.log('Email sent successfully to:', data.to);\n      return true;\n    } catch (error) {\n      console.error('Failed to send email:', error);\n      return false;\n    }\n  }\n\n  // Template pour reset de mot de passe\n  async sendPasswordResetEmail(email: string, name: string, resetToken: string): Promise<boolean> {\n    const resetUrl = `${this.appUrl}/reset-password?token=${resetToken}`;\n    \n    const html = `\n      <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;\">\n        <div style=\"background-color: #f8f9fa; padding: 30px; border-radius: 8px; text-align: center;\">\n          <h1 style=\"color: #333; margin-bottom: 30px;\">RÃ©initialisation de votre mot de passe</h1>\n          <p style=\"color: #666; font-size: 16px; margin-bottom: 30px;\">\n            Bonjour ${name},<br><br>\n            Vous avez demandÃ© la rÃ©initialisation de votre mot de passe. \n            Cliquez sur le bouton ci-dessous pour crÃ©er un nouveau mot de passe.\n          </p>\n          <a href=\"${resetUrl}\" style=\"display: inline-block; background-color: #007bff; color: white; padding: 12px 30px; text-decoration: none; border-radius: 5px; font-weight: bold; margin-bottom: 20px;\">\n            RÃ©initialiser le mot de passe\n          </a>\n          <p style=\"color: #666; font-size: 14px; margin-top: 30px;\">\n            Ce lien expirera dans 1 heure. Si vous n'avez pas demandÃ© cette rÃ©initialisation, ignorez cet email.\n          </p>\n          <p style=\"color: #666; font-size: 12px; margin-top: 20px;\">\n            Si le bouton ne fonctionne pas, copiez ce lien dans votre navigateur :<br>\n            ${resetUrl}\n          </p>\n        </div>\n      </div>\n    `;\n\n    const text = `\n      RÃ©initialisation de votre mot de passe\n      \n      Bonjour ${name},\n      \n      Vous avez demandÃ© la rÃ©initialisation de votre mot de passe.\n      Cliquez sur ce lien pour crÃ©er un nouveau mot de passe :\n      \n      ${resetUrl}\n      \n      Ce lien expirera dans 1 heure. Si vous n'avez pas demandÃ© cette rÃ©initialisation, ignorez cet email.\n    `;\n\n    return await this.sendEmail({\n      to: email,\n      toName: name,\n      subject: 'RÃ©initialisation de votre mot de passe',\n      html,\n      text\n    });\n  }\n\n  // Template pour invitation Ã  un Ã©vÃ©nement\n  async sendEventInvitationEmail(\n    email: string, \n    eventName: string, \n    organizationName: string, \n    eventDate: Date, \n    invitationToken: string,\n    meetingPoint?: string,\n    destination?: string,\n    sport?: string,\n    duration?: string\n  ): Promise<boolean> {\n    const invitationUrl = `${this.appUrl}/invitation/${invitationToken}`;\n    const formattedDate = eventDate.toLocaleDateString('fr-FR', {\n      weekday: 'long',\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n    const formattedTime = eventDate.toLocaleTimeString('fr-FR', {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n\n    const html = `\n      <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;\">\n        <div style=\"background-color: #f8f9fa; padding: 30px; border-radius: 8px;\">\n          <h1 style=\"color: #333; margin-bottom: 20px; text-align: center;\">\n            ğŸ¯ Invitation Ã  un Ã©vÃ©nement\n          </h1>\n          <div style=\"background-color: white; padding: 25px; border-radius: 8px; margin-bottom: 20px;\">\n            <h2 style=\"color: #007bff; margin-bottom: 15px;\">${eventName}</h2>\n            <div style=\"margin-bottom: 20px;\">\n              <p style=\"color: #666; font-size: 16px; margin-bottom: 8px;\">\n                <strong>OrganisÃ© par :</strong> ${organizationName}\n              </p>\n              ${sport ? `<p style=\"color: #666; font-size: 16px; margin-bottom: 8px;\">\n                <strong>Sport :</strong> ${sport}\n              </p>` : ''}\n              <p style=\"color: #666; font-size: 16px; margin-bottom: 8px;\">\n                <strong>Date :</strong> ${formattedDate}\n              </p>\n              <p style=\"color: #666; font-size: 16px; margin-bottom: 8px;\">\n                <strong>Heure :</strong> ${formattedTime}\n              </p>\n              ${duration ? `<p style=\"color: #666; font-size: 16px; margin-bottom: 8px;\">\n                <strong>DurÃ©e :</strong> ${duration}\n              </p>` : ''}\n              ${meetingPoint ? `<p style=\"color: #666; font-size: 16px; margin-bottom: 8px;\">\n                <strong>RDV :</strong> ${meetingPoint}\n              </p>` : ''}\n              ${destination ? `<p style=\"color: #666; font-size: 16px; margin-bottom: 8px;\">\n                <strong>Destination :</strong> ${destination}\n              </p>` : ''}\n            </div>\n            <p style=\"color: #666; font-size: 16px; margin-bottom: 30px;\">\n              Vous Ãªtes invitÃ©(e) Ã  participer Ã  cet Ã©vÃ©nement. Cliquez sur le bouton ci-dessous pour voir tous les dÃ©tails et confirmer votre participation.\n            </p>\n            <div style=\"text-align: center;\">\n              <a href=\"${invitationUrl}\" style=\"display: inline-block; background-color: #28a745; color: white; padding: 15px 30px; text-decoration: none; border-radius: 5px; font-weight: bold;\">\n                Voir l'Ã©vÃ©nement et participer\n              </a>\n            </div>\n          </div>\n          <p style=\"color: #666; font-size: 12px; text-align: center;\">\n            Si le bouton ne fonctionne pas, copiez ce lien :<br>\n            <a href=\"${invitationUrl}\" style=\"color: #007bff;\">${invitationUrl}</a>\n          </p>\n        </div>\n      </div>\n    `;\n\n    const text = `\n      Invitation Ã  un Ã©vÃ©nement\n      \n      Ã‰vÃ©nement : ${eventName}\n      OrganisÃ© par : ${organizationName}\n      ${sport ? `Sport : ${sport}` : ''}\n      Date : ${formattedDate}\n      Heure : ${formattedTime}\n      ${duration ? `DurÃ©e : ${duration}` : ''}\n      ${meetingPoint ? `RDV : ${meetingPoint}` : ''}\n      ${destination ? `Destination : ${destination}` : ''}\n      \n      Vous Ãªtes invitÃ©(e) Ã  participer Ã  cet Ã©vÃ©nement.\n      Cliquez sur ce lien pour voir tous les dÃ©tails et confirmer votre participation :\n      \n      ${invitationUrl}\n    `;\n\n    return await this.sendEmail({\n      to: email,\n      subject: `Invitation Ã  l'Ã©vÃ©nement: ${eventName}`,\n      html,\n      text\n    });\n  }\n\n  // Template pour notification de nouveau message\n  async sendMessageNotificationEmail(\n    participantEmail: string,\n    participantName: string,\n    eventName: string,\n    organizationName: string,\n    senderName: string,\n    messageContent: string,\n    eventId: string,\n    messageId: string\n  ): Promise<boolean> {\n    const replyUrl = `${this.appUrl}/reply/${eventId}/${messageId}`;\n    const eventUrl = `${this.appUrl}/events/${eventId}`;\n\n    // Truncate message if too long\n    const truncatedMessage = messageContent.length > 200 \n      ? messageContent.substring(0, 200) + '...' \n      : messageContent;\n\n    const html = `\n      <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;\">\n        <div style=\"background-color: #f8f9fa; padding: 30px; border-radius: 8px;\">\n          <h1 style=\"color: #333; margin-bottom: 20px; text-align: center;\">\n            ğŸ’¬ Nouveau message de ${organizationName}\n          </h1>\n          <div style=\"background-color: white; padding: 25px; border-radius: 8px; margin-bottom: 20px;\">\n            <h2 style=\"color: #007bff; margin-bottom: 15px;\">${eventName}</h2>\n            <p style=\"color: #666; margin-bottom: 10px;\">\n              <strong>Message de :</strong> ${senderName}\n            </p>\n            <div style=\"background-color: #f8f9fa; padding: 15px; border-left: 4px solid #007bff; margin: 20px 0;\">\n              <p style=\"color: #333; margin: 0; font-style: italic;\">\n                \"${truncatedMessage}\"\n              </p>\n            </div>\n            <div style=\"text-align: center; margin-top: 30px;\">\n              <a href=\"${replyUrl}\" style=\"display: inline-block; background-color: #007bff; color: white; padding: 12px 25px; text-decoration: none; border-radius: 5px; font-weight: bold; margin-right: 10px;\">\n                RÃ©pondre au message\n              </a>\n              <a href=\"${eventUrl}\" style=\"display: inline-block; background-color: #6c757d; color: white; padding: 12px 25px; text-decoration: none; border-radius: 5px; font-weight: bold;\">\n                Voir l'Ã©vÃ©nement\n              </a>\n            </div>\n          </div>\n          <p style=\"color: #666; font-size: 12px; text-align: center;\">\n            Bonjour ${participantName}, vous recevez cet email car vous participez Ã  l'Ã©vÃ©nement \"${eventName}\".\n          </p>\n        </div>\n      </div>\n    `;\n\n    const text = `\n      Nouveau message de ${organizationName}\n      \n      Ã‰vÃ©nement : ${eventName}\n      Message de : ${senderName}\n      \n      \"${truncatedMessage}\"\n      \n      RÃ©pondre au message : ${replyUrl}\n      Voir l'Ã©vÃ©nement : ${eventUrl}\n      \n      Bonjour ${participantName}, vous recevez cet email car vous participez Ã  l'Ã©vÃ©nement \"${eventName}\".\n    `;\n\n    return await this.sendEmail({\n      to: participantEmail,\n      toName: participantName,\n      subject: `${eventName} - Nouveau message de ${organizationName}`,\n      html,\n      text\n    });\n  }\n\n  // Envoi d'invitation automatique avec liens personnalisÃ©s\n  async sendEventInvitationWithLink(\n    email: string,\n    eventName: string,\n    organizationName: string,\n    eventDate: Date,\n    eventLink: string,\n    meetingPoint?: string,\n    destination?: string,\n    sport?: string,\n    duration?: string,\n    organizerContactName?: string,\n    organizerEmail?: string\n  ): Promise<boolean> {\n    const formattedDate = eventDate.toLocaleDateString('fr-FR', {\n      weekday: 'long',\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n    const formattedTime = eventDate.toLocaleTimeString('fr-FR', {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n\n    const contactOrganizerUrl = organizerEmail \n      ? `mailto:${organizerEmail}?subject=Question%20Ã %20propos%20de%20l'Ã©vÃ©nement%20\"${encodeURIComponent(eventName)}\"` \n      : null;\n\n    const html = `\n      <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;\">\n        <div style=\"background-color: #f8f9fa; padding: 30px; border-radius: 8px;\">\n          <h1 style=\"color: #333; margin-bottom: 20px; text-align: center;\">\n            ğŸ¯ Vous Ãªtes invitÃ© Ã  un Ã©vÃ©nement !\n          </h1>\n          <div style=\"background-color: white; padding: 25px; border-radius: 8px; margin-bottom: 20px;\">\n            <h2 style=\"color: #007bff; margin-bottom: 15px;\">${eventName}</h2>\n            <div style=\"margin-bottom: 20px;\">\n              <p style=\"color: #666; font-size: 16px; margin-bottom: 8px;\">\n                <strong>OrganisÃ© par :</strong> ${organizationName}\n              </p>\n              ${sport ? `<p style=\"color: #666; font-size: 16px; margin-bottom: 8px;\">\n                <strong>Sport :</strong> ${sport}\n              </p>` : ''}\n              <p style=\"color: #666; font-size: 16px; margin-bottom: 8px;\">\n                <strong>Date :</strong> ${formattedDate}\n              </p>\n              <p style=\"color: #666; font-size: 16px; margin-bottom: 8px;\">\n                <strong>Heure :</strong> ${formattedTime}\n              </p>\n              ${duration ? `<p style=\"color: #666; font-size: 16px; margin-bottom: 8px;\">\n                <strong>DurÃ©e :</strong> ${duration}\n              </p>` : ''}\n              ${meetingPoint ? `<p style=\"color: #666; font-size: 16px; margin-bottom: 8px;\">\n                <strong>RDV :</strong> ${meetingPoint}\n              </p>` : ''}\n              ${destination ? `<p style=\"color: #666; font-size: 16px; margin-bottom: 8px;\">\n                <strong>Destination :</strong> ${destination}\n              </p>` : ''}\n            </div>\n            <p style=\"color: #666; font-size: 16px; margin-bottom: 30px;\">\n              Un nouvel Ã©vÃ©nement vient d'Ãªtre crÃ©Ã© et vous Ãªtes automatiquement invitÃ© ! \n              Cliquez sur le lien ci-dessous pour voir tous les dÃ©tails et confirmer votre participation.\n            </p>\n            <div style=\"text-align: center; margin-bottom: 20px;\">\n              <a href=\"${eventLink}\" style=\"display: inline-block; background-color: #28a745; color: white; padding: 15px 30px; text-decoration: none; border-radius: 5px; font-weight: bold; margin-bottom: 10px;\">\n                Voir l'Ã©vÃ©nement et participer\n              </a>\n            </div>\n            ${contactOrganizerUrl ? `\n              <div style=\"text-align: center; border-top: 1px solid #eee; padding-top: 15px;\">\n                <p style=\"color: #666; font-size: 14px; margin-bottom: 10px;\">\n                  Une question ? Contactez l'organisateur\n                </p>\n                <a href=\"${contactOrganizerUrl}\" style=\"display: inline-block; background-color: #6c757d; color: white; padding: 10px 20px; text-decoration: none; border-radius: 4px; font-size: 14px;\">\n                  âœ‰ï¸ Contacter ${organizerContactName || organizationName}\n                </a>\n              </div>\n            ` : ''}\n          </div>\n          <p style=\"color: #666; font-size: 12px; text-align: center;\">\n            Si le bouton ne fonctionne pas, copiez ce lien :<br>\n            <a href=\"${eventLink}\" style=\"color: #007bff;\">${eventLink}</a>\n          </p>\n        </div>\n      </div>\n    `;\n\n    const text = `\n      Vous Ãªtes invitÃ© Ã  un Ã©vÃ©nement !\n      \n      Ã‰vÃ©nement : ${eventName}\n      OrganisÃ© par : ${organizationName}\n      ${sport ? `Sport : ${sport}` : ''}\n      Date : ${formattedDate}\n      Heure : ${formattedTime}\n      ${duration ? `DurÃ©e : ${duration}` : ''}\n      ${meetingPoint ? `RDV : ${meetingPoint}` : ''}\n      ${destination ? `Destination : ${destination}` : ''}\n      \n      Un nouvel Ã©vÃ©nement vient d'Ãªtre crÃ©Ã© et vous Ãªtes automatiquement invitÃ© !\n      Cliquez sur ce lien pour voir tous les dÃ©tails et confirmer votre participation :\n      \n      ${eventLink}\n      \n      ${organizerEmail ? `Pour toute question, contactez l'organisateur : ${organizerEmail}` : ''}\n    `;\n\n    return await this.sendEmail({\n      to: email,\n      subject: `Nouvel Ã©vÃ©nement: ${eventName} - ${organizationName}`,\n      html,\n      text\n    });\n  }\n\n  // Envoi groupÃ© d'invitations\n  async sendBulkEventInvitations(\n    emails: string[],\n    eventName: string,\n    organizationName: string,\n    eventDate: Date,\n    eventLink: string,\n    meetingPoint?: string,\n    destination?: string,\n    sport?: string,\n    duration?: string,\n    organizerContactName?: string,\n    organizerEmail?: string\n  ): Promise<{ success: number; failed: string[] }> {\n    const results = {\n      success: 0,\n      failed: [] as string[]\n    };\n\n    for (const email of emails) {\n      try {\n        const sent = await this.sendEventInvitationWithLink(\n          email,\n          eventName,\n          organizationName,\n          eventDate,\n          eventLink,\n          meetingPoint,\n          destination,\n          sport,\n          duration,\n          organizerContactName,\n          organizerEmail\n        );\n        \n        if (sent) {\n          results.success++;\n        } else {\n          results.failed.push(email);\n        }\n      } catch (error) {\n        console.error(`Failed to send invitation to ${email}:`, error);\n        results.failed.push(email);\n      }\n    }\n\n    return results;\n  }\n\n  // Envoi de rappel avant Ã©vÃ©nement\n  async sendEventReminderEmail(\n    participantEmail: string,\n    participantName: string,\n    eventName: string,\n    organizationName: string,\n    eventDate: Date,\n    meetingPoint: string,\n    destination: string,\n    eventLink: string,\n    hoursBeforeEvent: number = 24\n  ): Promise<boolean> {\n    const formattedDate = eventDate.toLocaleDateString('fr-FR', {\n      weekday: 'long',\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n    const formattedTime = eventDate.toLocaleTimeString('fr-FR', {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n\n    const html = `\n      <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;\">\n        <div style=\"background-color: #f8f9fa; padding: 30px; border-radius: 8px;\">\n          <h1 style=\"color: #333; margin-bottom: 20px; text-align: center;\">\n            â° Rappel - Ã‰vÃ©nement dans ${hoursBeforeEvent}h !\n          </h1>\n          <div style=\"background-color: white; padding: 25px; border-radius: 8px; margin-bottom: 20px;\">\n            <h2 style=\"color: #007bff; margin-bottom: 15px;\">${eventName}</h2>\n            <div style=\"background-color: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; border-radius: 5px; margin-bottom: 20px;\">\n              <p style=\"color: #856404; margin: 0; font-weight: bold;\">\n                ğŸ“… C'est demain ! N'oubliez pas votre participation Ã  cet Ã©vÃ©nement.\n              </p>\n            </div>\n            <div style=\"margin-bottom: 20px;\">\n              <p style=\"color: #666; font-size: 16px; margin-bottom: 8px;\">\n                <strong>OrganisÃ© par :</strong> ${organizationName}\n              </p>\n              <p style=\"color: #666; font-size: 16px; margin-bottom: 8px;\">\n                <strong>Date :</strong> ${formattedDate}\n              </p>\n              <p style=\"color: #666; font-size: 16px; margin-bottom: 8px;\">\n                <strong>Heure :</strong> ${formattedTime}\n              </p>\n              <p style=\"color: #666; font-size: 16px; margin-bottom: 8px;\">\n                <strong>RDV :</strong> ${meetingPoint}\n              </p>\n              <p style=\"color: #666; font-size: 16px; margin-bottom: 8px;\">\n                <strong>Destination :</strong> ${destination}\n              </p>\n            </div>\n            <div style=\"text-align: center; margin-bottom: 20px;\">\n              <a href=\"${eventLink}\" style=\"display: inline-block; background-color: #28a745; color: white; padding: 15px 30px; text-decoration: none; border-radius: 5px; font-weight: bold;\">\n                Voir les dÃ©tails de l'Ã©vÃ©nement\n              </a>\n            </div>\n            <div style=\"background-color: #d1ecf1; border: 1px solid #bee5eb; padding: 15px; border-radius: 5px;\">\n              <p style=\"color: #0c5460; margin: 0; font-size: 14px;\">\n                ğŸ’¡ <strong>Rappel :</strong> Pensez Ã  vÃ©rifier les derniÃ¨res informations sur la page de l'Ã©vÃ©nement, \n                notamment les Ã©ventuels changements de derniÃ¨re minute concernant le covoiturage.\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    `;\n\n    const text = `\n      Rappel - Ã‰vÃ©nement dans ${hoursBeforeEvent}h !\n      \n      Ã‰vÃ©nement : ${eventName}\n      OrganisÃ© par : ${organizationName}\n      Date : ${formattedDate}\n      Heure : ${formattedTime}\n      RDV : ${meetingPoint}\n      Destination : ${destination}\n      \n      C'est demain ! N'oubliez pas votre participation Ã  cet Ã©vÃ©nement.\n      \n      Voir les dÃ©tails : ${eventLink}\n      \n      Pensez Ã  vÃ©rifier les derniÃ¨res informations sur la page de l'Ã©vÃ©nement.\n    `;\n\n    return await this.sendEmail({\n      to: participantEmail,\n      toName: participantName,\n      subject: `ğŸ”” Rappel: ${eventName} - Demain !`,\n      html,\n      text\n    });\n  }\n\n  // GÃ©nÃ©ration d'un fichier iCalendar pour l'Ã©vÃ©nement\n  generateICalendar(\n    eventName: string,\n    eventDate: Date,\n    duration: string,\n    meetingPoint: string,\n    destination: string,\n    description: string,\n    organizationName: string\n  ): string {\n    const formatDate = (date: Date): string => {\n      return date.toISOString().replace(/[-:]/g, '').split('.')[0] + 'Z';\n    };\n\n    const startDate = formatDate(eventDate);\n    // Estimate end date (default 2 hours if no duration specified)\n    const durationHours = duration?.includes('h') ? parseInt(duration) || 2 : 2;\n    const endDate = formatDate(new Date(eventDate.getTime() + durationHours * 60 * 60 * 1000));\n    \n    return `BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:-//TEAM MOVE//FR\nBEGIN:VEVENT\nUID:${Date.now()}@teammove.fr\nDTSTAMP:${formatDate(new Date())}\nDTSTART:${startDate}\nDTEND:${endDate}\nSUMMARY:${eventName}\nDESCRIPTION:Ã‰vÃ©nement organisÃ© par ${organizationName}\\\\n\\\\nRDV: ${meetingPoint}\\\\nDestination: ${destination}\\\\n\\\\n${description}\nLOCATION:${meetingPoint}\nORGANIZER:CN=${organizationName}\nSTATUS:CONFIRMED\nTRANSP:OPAQUE\nEND:VEVENT\nEND:VCALENDAR`;\n  }\n\n\n}\n\nexport const emailService = new EmailService();\n\n// Export de la fonction sendEmail pour la compatibilitÃ© avec les imports existants\nexport const sendEmail = (data: EmailData) => emailService.sendEmail(data);","size_bytes":22407},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\"; // Switch to JWT routes\nimport { setupVite, serveStatic, log } from \"./vite\";\n\nconst app = express();\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"â€¦\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '8080', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    // ASCII Art de style console de jeux vintage\n    console.log('\\n');\n    console.log('â•‘ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â•‘');\n    console.log('â•‘ â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â• â•‘');\n    console.log('â•‘    â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â•‘');\n    console.log('â•‘    â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â•šâ•â•â•â•â–ˆâ–ˆâ•‘ â•‘');\n    console.log('â•‘    â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘ â•‘');\n    console.log('â•‘    â•šâ•â•   â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•šâ•â•     â•šâ•â•â•šâ•â•  â•šâ•â•â•â• â•šâ•â•  â•šâ•â•â•â• â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â•â• â•‘');\n    console.log('â•‘                           ğŸ† BY LTHEBEST ğŸ†                                         â•‘');\n    console.log('â•‘                                                                                    â•‘');\n    console.log('â•‘        â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—        â•‘');\n    console.log('â•‘        â•‘  ğŸš— Plateforme de MobilitÃ© Sportif de Nouvelle GÃ©nÃ©ration  ğŸš—  â•‘        â•‘');\n    console.log('â•‘        â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•        â•‘');\n    console.log('â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\\n');\n\n    // Informations techniques avec style rÃ©tro\n    log(`â–‘â–‘â–‘ SYSTÃˆME INITIALISÃ‰ â–‘â–‘â–‘`);\n    log(`ğŸš€ PORT: ${port}`);\n    log(`ğŸ” AUTH: JWT (${process.env.JWT_ACCESS_EXPIRES_IN || '15m'})`);\n    log(`ğŸŒ ENV: ${process.env.NODE_ENV || 'development'}`);\n    log(`ğŸ“¡ STATUS: ONLINE`);\n    log(`â–‘â–‘â–‘ PRÃŠT POUR L'AVENTURE! â–‘â–‘â–‘`);\n    console.log('\\n');\n  });\n})();","size_bytes":5051},"server/notifications.ts":{"content":"import { db } from './db';\nimport { notifications, organizations } from '../shared/schema';\nimport { eq, desc, and, isNull, count } from 'drizzle-orm';\nimport { sendEmail } from './email';\n\nexport interface CreateNotificationRequest {\n  organizationId: string;\n  type: 'info' | 'success' | 'warning' | 'error';\n  title: string;\n  message: string;\n  actionUrl?: string;\n  eventId?: string;\n  sendEmail?: boolean; // Optionnel: envoyer aussi par email\n}\n\nexport interface NotificationPreferences {\n  emailNotifications: boolean;\n  pushNotifications: boolean;\n  eventReminders: boolean;\n  systemUpdates: boolean;\n  marketingEmails: boolean;\n}\n\n/**\n * CrÃ©e une nouvelle notification\n */\nexport async function createNotification(request: CreateNotificationRequest) {\n  try {\n    // CrÃ©er la notification en base\n    const notification = await db.insert(notifications).values({\n      organizationId: request.organizationId,\n      type: request.type,\n      title: request.title,\n      message: request.message,\n      actionUrl: request.actionUrl,\n      eventId: request.eventId,\n    }).returning();\n\n    // Envoyer par email si demandÃ©\n    if (request.sendEmail) {\n      const organization = await db.select()\n        .from(organizations)\n        .where(eq(organizations.id, request.organizationId))\n        .limit(1);\n\n      if (organization[0]) {\n        await sendNotificationEmail(organization[0], {\n          type: request.type,\n          title: request.title,\n          message: request.message,\n          actionUrl: request.actionUrl,\n        });\n      }\n    }\n\n    return notification[0];\n  } catch (error) {\n    console.error('Erreur lors de la crÃ©ation de la notification:', error);\n    throw error;\n  }\n}\n\n/**\n * RÃ©cupÃ¨re les notifications d'une organisation\n */\nexport async function getOrganizationNotifications(organizationId: string, limit = 50, offset = 0) {\n  try {\n    const organizationNotifications = await db.select()\n      .from(notifications)\n      .where(eq(notifications.organizationId, organizationId))\n      .orderBy(desc(notifications.createdAt))\n      .limit(limit)\n      .offset(offset);\n\n    return organizationNotifications;\n  } catch (error) {\n    console.error('Erreur lors de la rÃ©cupÃ©ration des notifications:', error);\n    throw error;\n  }\n}\n\n/**\n * RÃ©cupÃ¨re les notifications non lues d'une organisation\n */\nexport async function getUnreadNotifications(organizationId: string) {\n  try {\n    const unreadNotifications = await db.select()\n      .from(notifications)\n      .where(\n        and(\n          eq(notifications.organizationId, organizationId),\n          eq(notifications.read, false)\n        )\n      )\n      .orderBy(desc(notifications.createdAt));\n\n    return unreadNotifications;\n  } catch (error) {\n    console.error('Erreur lors de la rÃ©cupÃ©ration des notifications non lues:', error);\n    throw error;\n  }\n}\n\n/**\n * Compte les notifications non lues\n */\nexport async function getUnreadNotificationCount(organizationId: string): Promise<number> {\n  try {\n    const result = await db.select({ count: count() })\n      .from(notifications)\n      .where(\n        and(\n          eq(notifications.organizationId, organizationId),\n          eq(notifications.read, false)\n        )\n      );\n\n    return result[0]?.count || 0;\n  } catch (error) {\n    console.error('Erreur lors du comptage des notifications non lues:', error);\n    return 0;\n  }\n}\n\n/**\n * Marque une notification comme lue\n */\nexport async function markNotificationAsRead(notificationId: string, organizationId: string) {\n  try {\n    const result = await db.update(notifications)\n      .set({ read: true })\n      .where(\n        and(\n          eq(notifications.id, notificationId),\n          eq(notifications.organizationId, organizationId)\n        )\n      )\n      .returning();\n\n    return result[0];\n  } catch (error) {\n    console.error('Erreur lors du marquage de la notification comme lue:', error);\n    throw error;\n  }\n}\n\n/**\n * Marque toutes les notifications comme lues\n */\nexport async function markAllNotificationsAsRead(organizationId: string) {\n  try {\n    await db.update(notifications)\n      .set({ read: true })\n      .where(\n        and(\n          eq(notifications.organizationId, organizationId),\n          eq(notifications.read, false)\n        )\n      );\n\n    return { success: true };\n  } catch (error) {\n    console.error('Erreur lors du marquage de toutes les notifications comme lues:', error);\n    throw error;\n  }\n}\n\n/**\n * Supprime une notification\n */\nexport async function deleteNotification(notificationId: string, organizationId: string) {\n  try {\n    const result = await db.delete(notifications)\n      .where(\n        and(\n          eq(notifications.id, notificationId),\n          eq(notifications.organizationId, organizationId)\n        )\n      )\n      .returning();\n\n    return result[0];\n  } catch (error) {\n    console.error('Erreur lors de la suppression de la notification:', error);\n    throw error;\n  }\n}\n\n/**\n * Supprime les notifications anciennes (plus de 30 jours)\n */\nexport async function cleanupOldNotifications() {\n  try {\n    const thirtyDaysAgo = new Date();\n    thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\n\n    const deletedNotifications = await db.delete(notifications)\n      .where(\n        and(\n          eq(notifications.read, true),\n          // Note: Cette condition nÃ©cessiterait une fonction de date appropriÃ©e\n          // Pour l'instant, nous la commentons et utiliserons un job cron sÃ©parÃ©\n        )\n      );\n\n    console.log('Notifications anciennes supprimÃ©es');\n    return { success: true };\n  } catch (error) {\n    console.error('Erreur lors du nettoyage des notifications:', error);\n    throw error;\n  }\n}\n\n/**\n * Envoie une notification par email\n */\nasync function sendNotificationEmail(\n  organization: any, \n  notification: { type: string; title: string; message: string; actionUrl?: string }\n) {\n  try {\n    const iconMap = {\n      info: 'ğŸ”µ',\n      success: 'âœ…',\n      warning: 'âš ï¸',\n      error: 'âŒ',\n    };\n\n    const colorMap = {\n      info: '#17a2b8',\n      success: '#28a745',\n      warning: '#ffc107',\n      error: '#dc3545',\n    };\n\n    const icon = iconMap[notification.type as keyof typeof iconMap] || 'ğŸ””';\n    const color = colorMap[notification.type as keyof typeof colorMap] || '#17a2b8';\n\n    const actionButton = notification.actionUrl \n      ? `<a href=\"${process.env.APP_URL}${notification.actionUrl}\" style=\"background: ${color}; color: white; padding: 12px 24px; text-decoration: none; border-radius: 5px; display: inline-block; margin-top: 15px;\">Voir les dÃ©tails</a>`\n      : '';\n\n    await sendEmail({\n      to: organization.email,\n      subject: `[TeamMove] ${notification.title}`,\n      html: `\n        <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\n          <div style=\"background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; text-align: center;\">\n            <h1 style=\"margin: 0; font-size: 24px;\">TeamMove</h1>\n          </div>\n          \n          <div style=\"padding: 30px; background: #f8f9fa;\">\n            <div style=\"background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);\">\n              <h2 style=\"color: ${color}; margin-top: 0; display: flex; align-items: center; gap: 10px;\">\n                <span style=\"font-size: 24px;\">${icon}</span>\n                ${notification.title}\n              </h2>\n              \n              <p style=\"color: #555; line-height: 1.6; font-size: 16px;\">\n                Bonjour ${organization.contactFirstName},\n              </p>\n              \n              <div style=\"background: #f8f9fa; padding: 20px; border-radius: 5px; border-left: 4px solid ${color}; margin: 20px 0;\">\n                ${notification.message.replace(/\\n/g, '<br>')}\n              </div>\n              \n              ${actionButton}\n            </div>\n          </div>\n          \n          <div style=\"padding: 20px; text-align: center; color: #666; font-size: 14px;\">\n            <p>Vous recevez cet email car vous Ãªtes inscrit aux notifications TeamMove.</p>\n            <p><a href=\"${process.env.APP_URL}/dashboard/preferences\" style=\"color: #667eea;\">GÃ©rer vos prÃ©fÃ©rences de notification</a></p>\n          </div>\n        </div>\n      `,\n    });\n  } catch (error) {\n    console.error('Erreur lors de l\\'envoi de l\\'email de notification:', error);\n  }\n}\n\n/**\n * CrÃ©e des notifications systÃ¨me pour tous les utilisateurs\n */\nexport async function createSystemNotification(request: Omit<CreateNotificationRequest, 'organizationId'>) {\n  try {\n    // RÃ©cupÃ©rer toutes les organisations actives\n    const activeOrganizations = await db.select({ id: organizations.id })\n      .from(organizations)\n      .where(eq(organizations.isActive, true));\n\n    // CrÃ©er une notification pour chaque organisation\n    const promises = activeOrganizations.map(org => \n      createNotification({\n        ...request,\n        organizationId: org.id,\n      })\n    );\n\n    await Promise.all(promises);\n\n    return { \n      success: true, \n      notificationsCreated: activeOrganizations.length \n    };\n  } catch (error) {\n    console.error('Erreur lors de la crÃ©ation des notifications systÃ¨me:', error);\n    throw error;\n  }\n}\n\n/**\n * Notifications prÃ©dÃ©finies pour les Ã©vÃ©nements courants\n */\nexport const NotificationTemplates = {\n  SUBSCRIPTION_UPGRADED: (planType: string, billingInterval: string) => ({\n    type: 'success' as const,\n    title: 'Abonnement mis Ã  niveau',\n    message: `Votre abonnement a Ã©tÃ© mis Ã  niveau vers le plan ${planType} (${billingInterval}). Profitez de toutes les fonctionnalitÃ©s avancÃ©es !`,\n  }),\n\n  SUBSCRIPTION_CANCELLED: () => ({\n    type: 'warning' as const,\n    title: 'Abonnement annulÃ©',\n    message: 'Votre abonnement payant a Ã©tÃ© annulÃ©. Il restera actif jusqu\\'Ã  la fin de votre pÃ©riode de facturation.',\n  }),\n\n  PAYMENT_FAILED: () => ({\n    type: 'error' as const,\n    title: 'Ã‰chec du paiement',\n    message: 'Le paiement de votre abonnement a Ã©chouÃ©. Veuillez mettre Ã  jour vos informations de paiement pour Ã©viter une interruption de service.',\n    actionUrl: '/dashboard/billing',\n  }),\n\n  LIMIT_REACHED: (limitType: string, limit: number) => ({\n    type: 'warning' as const,\n    title: `Limite ${limitType} atteinte`,\n    message: `Vous avez atteint votre limite de ${limit} ${limitType} pour ce mois. Choisissez une offre payante pour un accÃ¨s Ã©largi.`,\n    actionUrl: '/dashboard/upgrade',\n  }),\n\n  EVENT_CREATED: (eventName: string) => ({\n    type: 'success' as const,\n    title: 'Ã‰vÃ©nement crÃ©Ã©',\n    message: `L'Ã©vÃ©nement \"${eventName}\" a Ã©tÃ© crÃ©Ã© avec succÃ¨s. Les participants peuvent maintenant s'inscrire.`,\n  }),\n\n  WELCOME: (organizationName: string) => ({\n    type: 'success' as const,\n    title: 'Bienvenue sur TeamMove !',\n    message: `Bienvenue ${organizationName} ! Votre organisation a Ã©tÃ© crÃ©Ã©e avec succÃ¨s. Vous pouvez maintenant commencer Ã  organiser vos Ã©vÃ©nements sportifs.`,\n  }),\n\n  SYSTEM_MAINTENANCE: (maintenanceDate: string) => ({\n    type: 'info' as const,\n    title: 'Maintenance programmÃ©e',\n    message: `Une maintenance systÃ¨me est programmÃ©e le ${maintenanceDate}. Le service pourrait Ãªtre temporairement indisponible.`,\n  }),\n};\n\nexport { createNotification as createNotificationService };","size_bytes":11378},"server/openai.ts":{"content":"import OpenAI from 'openai';\n\n// Configuration OpenAI - Lazy initialization\nlet openai: OpenAI | null = null;\n\nfunction getOpenAIClient(): OpenAI {\n  if (!openai) {\n    if (!process.env.OPENAI_API_KEY) {\n      throw new Error('OPENAI_API_KEY is not configured. Please set this environment variable to use AI features.');\n    }\n    openai = new OpenAI({\n      apiKey: process.env.OPENAI_API_KEY,\n    });\n  }\n  return openai;\n}\n\nexport interface ChatMessage {\n  role: 'system' | 'user' | 'assistant';\n  content: string;\n}\n\nexport interface ChatbotResponse {\n  message: string;\n  success: boolean;\n  error?: string;\n}\n\nclass ChatbotService {\n  private systemPrompt = `\n    Tu es un assistant virtuel pour une plateforme de gestion d'Ã©vÃ©nements sportifs et associatifs.\n    \n    Ton rÃ´le est d'aider les utilisateurs avec :\n    - La crÃ©ation et gestion d'Ã©vÃ©nements\n    - L'inscription et participation aux Ã©vÃ©nements\n    - Les questions sur le covoiturage\n    - Les informations gÃ©nÃ©rales sur la plateforme\n    - Les problÃ¨mes techniques simples\n    \n    Tu dois Ãªtre :\n    - Amical et professionnel\n    - Concis mais informatif\n    - OrientÃ© solution\n    - Capable de guider les utilisateurs vers les bonnes fonctionnalitÃ©s\n    \n    Si tu ne peux pas rÃ©pondre Ã  une question spÃ©cifique, suggÃ¨re Ã  l'utilisateur de contacter le support.\n  `;\n\n  async sendMessage(userMessage: string, conversationHistory: ChatMessage[] = []): Promise<ChatbotResponse> {\n    try {\n      const messages: ChatMessage[] = [\n        { role: 'system', content: this.systemPrompt },\n        ...conversationHistory,\n        { role: 'user', content: userMessage }\n      ];\n\n      const client = getOpenAIClient();\n      const completion = await client.chat.completions.create({\n        model: \"gpt-3.5-turbo\",\n        messages: messages,\n        max_tokens: 500,\n        temperature: 0.7,\n      });\n\n      const assistantMessage = completion.choices[0]?.message?.content;\n\n      if (!assistantMessage) {\n        throw new Error('No response from OpenAI');\n      }\n\n      return {\n        message: assistantMessage,\n        success: true\n      };\n\n    } catch (error) {\n      console.error('OpenAI API Error:', error);\n      \n      return {\n        message: \"DÃ©solÃ©, je rencontre un problÃ¨me technique. Veuillez rÃ©essayer dans quelques instants ou contacter le support.\",\n        success: false,\n        error: 'OpenAI API Error'\n      };\n    }\n  }\n\n  async getEventSuggestions(query: string): Promise<ChatbotResponse> {\n    const prompt = `\n      L'utilisateur cherche des suggestions d'Ã©vÃ©nements avec cette requÃªte : \"${query}\"\n      \n      Donne des suggestions crÃ©atives et pertinentes d'Ã©vÃ©nements sportifs ou associatifs.\n      Inclus des dÃ©tails comme le type d'activitÃ©, la durÃ©e suggÃ©rÃ©e, et des conseils pratiques.\n      Limite ta rÃ©ponse Ã  3-4 suggestions maximum.\n    `;\n\n    return this.sendMessage(prompt);\n  }\n\n  async getOrganizationHelp(query: string, organizationType: string): Promise<ChatbotResponse> {\n    const prompt = `\n      L'utilisateur a une question concernant la gestion de son organisation de type \"${organizationType}\".\n      Sa question : \"${query}\"\n      \n      Fournis une rÃ©ponse adaptÃ©e Ã  ce type d'organisation, avec des conseils pratiques\n      pour utiliser la plateforme efficacement.\n    `;\n\n    return this.sendMessage(prompt);\n  }\n}\n\nexport const chatbotService = new ChatbotService();","size_bytes":3439},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport * as express from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport {\n  generateTokenPair,\n  requireAuth,\n  AuthenticatedRequest,\n  hashPassword,\n  verifyPassword,\n  verifyRefreshToken,\n  generateAccessToken,\n  validatePasswordStrength,\n  extractTokenFromHeader\n} from \"./auth\";\nimport { randomUUID } from \"crypto\";\nimport { insertOrganizationSchema, insertEventSchema, insertEventParticipantSchema, insertMessageSchema } from \"../shared/schema\";\nimport { emailServiceEnhanced as emailService, emailServiceEnhanced } from \"./email-enhanced\";\nimport { chatbotService } from \"./openai\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { z } from \"zod\";\nimport multer from \"multer\";\nimport path from \"path\";\nimport fs from \"fs\";\nimport cors from \"cors\";\nimport { SUBSCRIPTION_PLANS } from \"./subscription-config\";\nimport { SubscriptionService } from \"./subscription-service\";\nimport { createNotification, NotificationTemplates } from \"./notifications\";\nimport { StripeService } from \"./stripe-service\";\n\n// Import functions for subscription checks\nconst canCreateEvent = SubscriptionService.canCreateEvent.bind(SubscriptionService);\nconst canSendInvitations = SubscriptionService.canSendInvitations.bind(SubscriptionService);\n\n// Utility function to clean email reply content\nfunction cleanEmailReply(content: string): string {\n  if (!content) return '';\n  \n  // Remove HTML tags if present\n  const textContent = content.replace(/<[^>]*>/g, '');\n  \n  // Split by lines\n  const lines = textContent.split('\\n');\n  const cleanLines = [];\n  \n  for (const line of lines) {\n    const trimmedLine = line.trim();\n    \n    // Stop at common email reply indicators\n    if (\n      trimmedLine.startsWith('On ') && (trimmedLine.includes(' wrote:') || trimmedLine.includes(' a Ã©crit :')) ||\n      trimmedLine.startsWith('Le ') && (trimmedLine.includes(' a Ã©crit :') || trimmedLine.includes(' wrote:')) ||\n      trimmedLine.startsWith('From:') ||\n      trimmedLine.startsWith('De :') ||\n      trimmedLine.startsWith('-----Original Message-----') ||\n      trimmedLine.startsWith('-----Message d\\'origine-----') ||\n      trimmedLine.match(/^\\d{4}-\\d{2}-\\d{2}.*:$/) ||\n      trimmedLine.startsWith('>')\n    ) {\n      break;\n    }\n    \n    // Skip empty lines at the beginning\n    if (cleanLines.length === 0 && trimmedLine === '') {\n      continue;\n    }\n    \n    cleanLines.push(line);\n  }\n  \n  return cleanLines.join('\\n').trim();\n}\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Initialize subscription service\n  await SubscriptionService.initialize();\n  \n  // Configuration CORS dynamique et optimisÃ©e pour Render\n  const isProduction = process.env.NODE_ENV === 'production';\n  const isRenderDeploy = process.env.RENDER === 'true' || process.env.RENDER_EXTERNAL_URL || process.env.APP_URL?.includes('onrender.com');\n\n  app.use(cors({\n    origin: function (origin, callback) {\n      // Allowed origins - Configuration complÃ¨te pour tous les environnements\n      const allowedOrigins = [\n        // Development\n        'http://localhost:8080',\n        \n        // Production Render\n        'https://teammove.fr',\n        process.env.APP_URL,\n        process.env.RENDER_EXTERNAL_URL,\n        // Vercel fallback si nÃ©cessaire\n        // 'https://TeamMove.vercel.app',\n      ].filter(Boolean);\n\n      console.log(`ğŸŒ CORS check: origin=${origin}, allowed=${allowedOrigins.join(', ')}`);\n\n      // Allow requests with no origin (mobile apps, Postman, etc.)\n      if (!origin) {\n        console.log('âœ… CORS: No origin provided, allowing request');\n        return callback(null, true);\n      }\n\n      // Check if origin is in allowed list\n      if (allowedOrigins.includes(origin)) {\n        console.log('âœ… CORS: Origin allowed');\n        callback(null, true);\n      } else {\n        console.log(`âŒ CORS: Origin ${origin} not allowed`);\n        // En production sur Render, Ãªtre plus permissif pour Ã©viter les blocages\n        if (isRenderDeploy && origin.includes('onrender.com')) {\n          console.log('ğŸ”„ CORS: Render detected, allowing onrender.com origin');\n          callback(null, true);\n        } else if (!isProduction && origin.includes('replit.dev')) {\n          // Allow Replit domains in development\n          console.log('ğŸ”„ CORS: Replit development domain detected, allowing origin');\n          callback(null, true);\n        } else {\n          callback(new Error(`CORS: Origin ${origin} not allowed`));\n        }\n      }\n    },\n    credentials: true,\n    methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS', 'HEAD', 'PATCH'],\n    allowedHeaders: [\n      'Content-Type',\n      'Authorization',\n      'Cookie',\n      'Set-Cookie',\n      'X-Requested-With',\n      'Accept',\n      'Origin',\n      'Access-Control-Request-Method',\n      'Access-Control-Request-Headers'\n    ],\n    exposedHeaders: ['Set-Cookie'],\n    optionsSuccessStatus: 200, // Support legacy browsers\n    preflightContinue: false,\n  }));\n\n  // ---------- uploads dir & static ----------\n  const uploadsDir = path.join(process.cwd(), \"uploads\");\n  if (!fs.existsSync(uploadsDir)) {\n    fs.mkdirSync(uploadsDir, { recursive: true });\n  }\n  // Serve static files from the uploads directory\n  app.use(\"/uploads\", express.static(uploadsDir));\n\n  // Configuration multer pour les uploads\n  const storage_multer = multer.diskStorage({\n    destination: (req, file, cb) => {\n      cb(null, uploadsDir);\n    },\n    filename: (req, file, cb) => {\n      const uniqueSuffix = Date.now() + '-' + Math.round(Math.random() * 1E9);\n      cb(null, file.fieldname + '-' + uniqueSuffix + path.extname(file.originalname));\n    }\n  });\n\n  const upload = multer({\n    storage: storage_multer,\n    limits: {\n      fileSize: 10 * 1024 * 1024 // 10MB limit\n    },\n    fileFilter: (req, file, cb) => {\n      const allowedTypes = /jpeg|jpg|png|gif|webp/;\n      const extname = allowedTypes.test(path.extname(file.originalname).toLowerCase());\n      const mimetype = allowedTypes.test(file.mimetype);\n\n      if (mimetype && extname) {\n        return cb(null, true);\n      } else {\n        cb(new Error('Images only!'));\n      }\n    }\n  });\n\n  // Debug middleware pour JWT (Ã  utiliser seulement en dÃ©veloppement)\n  if (process.env.NODE_ENV === 'development') {\n    app.use((req, res, next) => {\n      if (req.path.startsWith('/api')) {\n        console.log(`ğŸ” JWT Debug: ${req.method} ${req.path}`);\n        console.log(`   Authorization Header: ${req.headers.authorization ? 'Present' : 'Missing'}`);\n      }\n      next();\n    });\n  }\n\n  // ---------- AUTH ROUTES ----------\n\n  // Register endpoint\n  // Hidden admin registration endpoint (development only)\n  app.post(\"/api/admin/register-super-user\", async (req, res) => {\n    try {\n      // Security: Only allow in development or with special environment variable\n      const isDevelopment = process.env.NODE_ENV === 'development';\n      const allowAdminCreation = process.env.ALLOW_ADMIN_CREATION === 'true';\n      \n      if (!isDevelopment && !allowAdminCreation) {\n        return res.status(404).json({ message: \"Not found\" });\n      }\n\n      const { name, email, password, firstName, lastName, secretKey } = req.body;\n      \n      // Additional security check with secret key\n      const expectedSecret = process.env.ADMIN_CREATION_SECRET || 'dev-admin-secret-2024';\n      if (secretKey !== expectedSecret) {\n        return res.status(403).json({ message: \"Invalid secret key\" });\n      }\n\n      if (!name || !email || !password || !firstName || !lastName) {\n        return res.status(400).json({ \n          message: \"Name, email, password, firstName, and lastName are required\" \n        });\n      }\n\n      // Check if admin already exists\n      const existingAdmin = await storage.getOrganizationByEmail(email);\n      if (existingAdmin) {\n        return res.status(400).json({ message: \"Admin with this email already exists\" });\n      }\n\n      // Validate password strength\n      if (!validatePasswordStrength(password)) {\n        return res.status(400).json({ \n          message: \"Password must be at least 8 characters long and contain uppercase, lowercase, number, and special character\" \n        });\n      }\n\n      const hashedPassword = await hashPassword(password);\n\n      // Create admin organization\n      const adminData = {\n        name: `${name} (Admin)`,\n        type: \"company\" as const,\n        email,\n        contactFirstName: firstName,\n        contactLastName: lastName,\n        password: hashedPassword,\n        role: \"admin\" as const,\n        description: \"System Administrator\",\n        sports: [],\n        features: [\"all\"], // Admin gets all features\n        isActive: true,\n      };\n\n      const admin = await storage.createOrganization(adminData);\n\n      // Generate tokens for immediate login\n      const tokens = generateTokenPair(admin.id, admin.email, admin.role);\n\n      console.log(`âœ… Admin user created successfully: ${email}`);\n\n      res.status(201).json({\n        message: \"Admin created successfully\",\n        organization: {\n          id: admin.id,\n          name: admin.name,\n          email: admin.email,\n          role: admin.role,\n          contactFirstName: admin.contactFirstName,\n          contactLastName: admin.contactLastName,\n        },\n        ...tokens,\n      });\n    } catch (error) {\n      console.error(\"Admin creation error:\", error);\n      res.status(500).json({ message: \"Failed to create admin\" });\n    }\n  });\n\n  // MODERNIZED Registration with mandatory plan selection\n  app.post(\"/api/register\", async (req, res) => {\n    try {\n      const { selectedPlan, ...organizationData } = req.body;\n      const data = insertOrganizationSchema.parse(organizationData);\n\n      // Validate that a plan is selected\n      if (!selectedPlan) {\n        return res.status(400).json({\n          message: \"Un choix d'offre est obligatoire lors de l'inscription\",\n          code: \"PLAN_REQUIRED\"\n        });\n      }\n\n      // Validate plan exists\n      const plan = SUBSCRIPTION_PLANS[selectedPlan];\n      if (!plan) {\n        return res.status(400).json({\n          message: \"Offre sÃ©lectionnÃ©e invalide\",\n          code: \"INVALID_PLAN\"\n        });\n      }\n\n      // Validate password strength\n      const passwordValidation = validatePasswordStrength(data.password);\n      if (!passwordValidation.isValid) {\n        return res.status(400).json({\n          message: \"Password does not meet security requirements\",\n          errors: passwordValidation.errors\n        });\n      }\n\n      // Check if organization already exists\n      const existing = await storage.getOrganizationByEmail(data.email);\n      if (existing) {\n        return res.status(400).json({ message: \"An organization with this email already exists\" });\n      }\n\n      // Hash password\n      const hashedPassword = await hashPassword(data.password);\n\n      // Create organization with initial subscription type\n      const organization = await storage.createOrganization({\n        ...data,\n        password: hashedPassword,\n        subscriptionType: plan.type === 'decouverte' ? 'decouverte' : 'decouverte', // Start with decouverte, will be upgraded after payment\n        subscriptionStatus: 'active',\n      });\n\n      // Generate JWT tokens\n      const tokens = generateTokenPair({\n        organizationId: organization.id,\n        email: organization.email,\n        name: organization.name,\n      });\n\n      // If DÃ©couverte plan selected (free), complete registration immediately\n      if (selectedPlan === 'decouverte') {\n        // Send welcome email\n        emailService.sendWelcomeEmail(\n          organization.email,\n          organization.name,\n          organization.contactFirstName,\n          organization.contactLastName,\n          organization.type as 'club' | 'association' | 'company'\n        ).catch(error => {\n          console.error('Failed to send welcome email:', error);\n        });\n\n        return res.json({\n          organization: { ...organization, password: undefined },\n          ...tokens,\n          message: \"Inscription rÃ©ussie avec l'offre DÃ©couverte\",\n          planType: 'decouverte',\n          requiresPayment: false\n        });\n      }\n\n      // For paid plans, create Stripe checkout session\n      const baseUrl = process.env.APP_URL || 'http://localhost:3000';\n      \n      try {\n        const checkoutSession = await SubscriptionService.createSubscription({\n          organizationId: organization.id,\n          planId: selectedPlan,\n          successUrl: `${baseUrl}/registration/success?session_id={CHECKOUT_SESSION_ID}&org_id=${organization.id}`,\n          cancelUrl: `${baseUrl}/registration/cancelled?org_id=${organization.id}`,\n        });\n\n        // Return the organization data and checkout session for frontend to redirect\n        return res.json({\n          organization: { ...organization, password: undefined },\n          ...tokens,\n          message: \"Inscription crÃ©Ã©e, redirection vers le paiement\",\n          planType: selectedPlan,\n          requiresPayment: true,\n          checkoutSession\n        });\n      } catch (paymentError) {\n        console.error('Payment session creation failed:', paymentError);\n        \n        // If payment setup fails, still allow registration with decouverte plan\n        await storage.updateOrganization(organization.id, {\n          subscriptionType: 'decouverte'\n        });\n\n        return res.json({\n          organization: { ...organization, password: undefined },\n          ...tokens,\n          message: \"Inscription rÃ©ussie avec l'offre DÃ©couverte (paiement indisponible temporairement)\",\n          planType: 'decouverte',\n          requiresPayment: false,\n          paymentError: true\n        });\n      }\n    } catch (error) {\n      console.error(\"Registration error:\", error);\n      res.status(400).json({ message: error instanceof Error ? error.message : \"Registration failed\" });\n    }\n  });\n\n  // Handle successful registration payment\n  app.post(\"/api/registration/payment-success\", async (req, res) => {\n    try {\n      const { sessionId, organizationId } = req.body;\n      \n      if (!sessionId || !organizationId) {\n        return res.status(400).json({ \n          message: \"Session ID and organization ID required\" \n        });\n      }\n\n      // Verify the session with Stripe\n      const session = await StripeService.getSession(sessionId);\n      \n      if (!session || session.payment_status !== 'paid') {\n        return res.status(400).json({ \n          message: \"Payment not confirmed\" \n        });\n      }\n\n      // Get organization\n      const organization = await storage.getOrganization(organizationId);\n      if (!organization) {\n        return res.status(404).json({ message: \"Organization not found\" });\n      }\n\n      // Extract plan from session metadata\n      const planId = session.metadata?.planId;\n      if (!planId) {\n        return res.status(400).json({ message: \"Plan information missing\" });\n      }\n\n      // Activate subscription\n      await SubscriptionService.handlePaymentSuccess(sessionId, organizationId, planId);\n\n      // Send welcome email with subscription info\n      const plan = SUBSCRIPTION_PLANS[planId];\n      emailService.sendWelcomeEmail(\n        organization.email,\n        organization.name,\n        organization.contactFirstName,\n        organization.contactLastName,\n        organization.type as 'club' | 'association' | 'company'\n      ).catch(error => {\n        console.error('Failed to send welcome email:', error);\n      });\n\n      res.json({\n        success: true,\n        message: \"Paiement confirmÃ© et abonnement activÃ©\",\n        subscription: {\n          plan: plan.name,\n          type: plan.type,\n          features: plan.features\n        }\n      });\n    } catch (error) {\n      console.error(\"Registration payment success error:\", error);\n      res.status(500).json({ message: \"Failed to process payment confirmation\" });\n    }\n  });\n\n  // Handle cancelled registration payment\n  app.post(\"/api/registration/payment-cancelled\", async (req, res) => {\n    try {\n      const { organizationId } = req.body;\n      \n      if (organizationId) {\n        // Downgrade to decouverte plan\n        await storage.updateOrganization(organizationId, {\n          subscriptionType: 'decouverte'\n        });\n      }\n\n      res.json({\n        success: true,\n        message: \"Paiement annulÃ©, inscription avec l'offre DÃ©couverte\"\n      });\n    } catch (error) {\n      console.error(\"Registration payment cancellation error:\", error);\n      res.status(500).json({ message: \"Failed to process payment cancellation\" });\n    }\n  });\n\n  // Login endpoint\n  app.post(\"/api/login\", async (req, res) => {\n    try {\n      const { email, password, rememberMe } = req.body;\n\n      if (!email || !password) {\n        return res.status(400).json({ message: \"Email and password are required\" });\n      }\n\n      // Find organization\n      const organization = await storage.getOrganizationByEmail(email);\n      if (!organization) {\n        return res.status(401).json({ message: \"Invalid credentials\" });\n      }\n\n      // Verify password\n      const isValid = await verifyPassword(password, organization.password);\n      if (!isValid) {\n        return res.status(401).json({ message: \"Invalid credentials\" });\n      }\n\n      // Generate JWT tokens\n      const tokens = generateTokenPair({\n        organizationId: organization.id,\n        email: organization.email,\n        name: organization.name,\n      });\n\n      res.json({\n        organization: { ...organization, password: undefined },\n        ...tokens,\n        message: \"Login successful\",\n        rememberMe: !!rememberMe\n      });\n    } catch (error) {\n      console.error(\"Login error:\", error);\n      res.status(500).json({ message: \"Login failed\" });\n    }\n  });\n\n  // Refresh token endpoint\n  app.post(\"/api/refresh-token\", async (req, res) => {\n    try {\n      const { refreshToken } = req.body;\n\n      if (!refreshToken) {\n        return res.status(401).json({ message: \"Refresh token required\" });\n      }\n\n      // Verify refresh token\n      const decoded = verifyRefreshToken(refreshToken);\n\n      // Verify organization still exists\n      const organization = await storage.getOrganization(decoded.organizationId);\n      if (!organization) {\n        return res.status(401).json({ message: \"Organization not found\" });\n      }\n\n      // Generate new access token\n      const newAccessToken = generateAccessToken({\n        organizationId: decoded.organizationId,\n        email: decoded.email,\n        name: decoded.name,\n      });\n\n      res.json({\n        accessToken: newAccessToken,\n        expiresIn: process.env.JWT_ACCESS_EXPIRES_IN || \"15m\"\n      });\n    } catch (error) {\n      console.error(\"Refresh token error:\", error);\n      res.status(401).json({ message: \"Invalid refresh token\" });\n    }\n  });\n\n  // Logout endpoint (optionnel avec JWT, mais utile pour blacklisting)\n  app.post(\"/api/logout\", requireAuth, (req, res) => {\n    // Avec JWT, le logout cÃ´tÃ© serveur est optionnel\n    // Le client supprime simplement le token\n    // Ici on pourrait ajouter le token Ã  une blacklist si nÃ©cessaire\n    res.json({ message: \"Logout successful\" });\n  });\n\n  // Get current user\n  app.get(\"/api/me\", requireAuth, async (req, res) => {\n    try {\n      const authReq = req as AuthenticatedRequest;\n      const organization = await storage.getOrganization(authReq.user.organizationId);\n      if (!organization) {\n        return res.status(404).json({ message: \"Organization not found\" });\n      }\n      res.json({ ...organization, password: undefined });\n    } catch (error) {\n      console.error(\"Get profile error:\", error);\n      res.status(500).json({ message: \"Failed to get profile\" });\n    }\n  });\n\n  // ---------- PASSWORD RESET ROUTES ----------\n\n  // Forgot password\n  app.post(\"/api/forgot-password\", async (req, res) => {\n    try {\n      const { email } = req.body;\n\n      if (!email) {\n        return res.status(400).json({ message: \"Email is required\" });\n      }\n\n      // Check if organization exists\n      const organization = await storage.getOrganizationByEmail(email);\n      if (!organization) {\n        // Don't reveal if email exists or not for security\n        return res.json({ message: \"If an account with that email exists, we've sent password reset instructions.\" });\n      }\n\n      // Generate reset token\n      const resetToken = uuidv4();\n      const expiresAt = new Date(Date.now() + 60 * 60 * 1000); // 1 hour from now\n\n      // Save token to database\n      await storage.createPasswordResetToken({\n        email: email,\n        token: resetToken,\n        expiresAt: expiresAt,\n      });\n\n      // Send reset email\n      const emailSent = await emailService.sendPasswordResetEmail(\n        email,\n        `${organization.contactFirstName} ${organization.contactLastName}`,\n        resetToken\n      );\n\n      if (emailSent.success) {\n        console.log(\"Password reset email sent successfully\");\n      } else {\n        console.error(\"Failed to send password reset email:\", emailSent.error);\n      }\n\n      res.json({ message: \"If an account with that email exists, we've sent password reset instructions.\" });\n    } catch (error) {\n      console.error(\"Forgot password error:\", error);\n      res.status(500).json({ message: \"Failed to process password reset request\" });\n    }\n  });\n\n  // Reset password\n  app.post(\"/api/reset-password\", async (req, res) => {\n    try {\n      const { token, newPassword } = req.body;\n\n      if (!token || !newPassword) {\n        return res.status(400).json({ message: \"Token and new password are required\" });\n      }\n\n      // Validate password strength\n      const passwordValidation = validatePasswordStrength(newPassword);\n      if (!passwordValidation.isValid) {\n        return res.status(400).json({\n          message: \"Password does not meet security requirements\",\n          errors: passwordValidation.errors\n        });\n      }\n\n      // Verify token\n      const resetToken = await storage.getPasswordResetToken(token);\n      if (!resetToken) {\n        return res.status(400).json({ message: \"Invalid or expired reset token\" });\n      }\n\n      // Check if token is expired\n      if (new Date() > resetToken.expiresAt) {\n        return res.status(400).json({ message: \"Reset token has expired\" });\n      }\n\n      // Hash new password\n      const hashedPassword = await hashPassword(newPassword);\n\n      // Update organization password\n      await storage.updateOrganizationPassword(resetToken.email, hashedPassword);\n\n      // Delete used token\n      await storage.deletePasswordResetToken(token);\n\n      res.json({ message: \"Password reset successful\" });\n    } catch (error) {\n      console.error(\"Reset password error:\", error);\n      res.status(500).json({ message: \"Failed to reset password\" });\n    }\n  });\n\n  // ---------- PROTECTED ROUTES ----------\n\n  // Email service diagnostic route\n  app.get(\"/api/email/diagnostic\", requireAuth, async (req, res) => {\n    try {\n      const report = await emailService.diagnoseService();\n      const config = await emailService.testConfiguration();\n\n      res.json({\n        report: report,\n        config: config,\n        timestamp: new Date().toISOString()\n      });\n    } catch (error) {\n      console.error(\"Email diagnostic error:\", error);\n      res.status(500).json({ message: \"Failed to run email diagnostic\" });\n    }\n  });\n\n  // Profile routes\n  app.post(\"/api/profile/logo\", requireAuth, upload.single(\"logo\"), async (req, res) => {\n    try {\n      const authReq = req as AuthenticatedRequest;\n\n      if (!req.file) {\n        return res.status(400).json({ message: \"No logo file uploaded\" });\n      }\n\n      const logoUrl = `/uploads/${req.file.filename}`;\n      await storage.updateOrganization(authReq.user.organizationId, { logoUrl });\n\n      res.json({ logoUrl, message: \"Logo updated successfully\" });\n    } catch (error) {\n      console.error(\"Logo upload error:\", error);\n      res.status(500).json({ message: \"Failed to upload logo\" });\n    }\n  });\n\n  app.put(\"/api/profile\", requireAuth, async (req, res) => {\n    try {\n      const authReq = req as AuthenticatedRequest;\n      const data = req.body;\n\n      const organization = await storage.updateOrganization(authReq.user.organizationId, data);\n      res.json({ ...organization, password: undefined });\n    } catch (error) {\n      console.error(\"Update profile error:\", error);\n      res.status(500).json({ message: \"Failed to update profile\" });\n    }\n  });\n\n  // Events routes\n  app.get(\"/api/events\", requireAuth, async (req, res) => {\n    try {\n      const authReq = req as AuthenticatedRequest;\n      const events = await storage.getEventsByOrganization(authReq.user.organizationId);\n      res.json(events);\n    } catch (error) {\n      console.error(\"Get events error:\", error);\n      res.status(500).json({ message: \"Failed to get events\" });\n    }\n  });\n\n  app.post(\"/api/events\", requireAuth, async (req, res) => {\n    try {\n      const authReq = req as AuthenticatedRequest;\n\n      // VÃ©rifier les limites d'abonnement avant de crÃ©er l'Ã©vÃ©nement\n      const eventPermission = await canCreateEvent(authReq.user.organizationId);\n      if (!eventPermission.allowed) {\n        return res.status(403).json({\n          message: eventPermission.reason,\n          type: \"subscription_limit\"\n        });\n      }\n\n      // Transformation de la date string en Date\n      const inputData = {\n        ...req.body,\n        organizationId: authReq.user.organizationId,\n        // Supposons que la date dans req.body est dans req.body.date\n        date: req.body.date ? new Date(req.body.date) : undefined,\n      };\n\n      const data = insertEventSchema.parse({\n        ...inputData,\n      });\n\n      const organization = await storage.getOrganization(authReq.user.organizationId);\n      if (!organization) {\n        return res.status(404).json({ message: \"Organization not found\" });\n      }\n\n      const event = await storage.createEvent(data);\n      \n      // IncrÃ©menter le compteur d'Ã©vÃ©nements crÃ©Ã©s\n      await SubscriptionService.incrementEventCount(authReq.user.organizationId);\n      \n      // CrÃ©er une notification de succÃ¨s\n      await createNotification({\n        organizationId: authReq.user.organizationId,\n        ...NotificationTemplates.EVENT_CREATED(event.name),\n      });\n      \n      // ğŸ“§ Envoi automatique des invitations par email\n      try {\n        // VÃ©rifier la configuration du service email d'abord\n        const emailConfig = await emailServiceEnhanced.testConfiguration();\n        console.log('ğŸ“§ Email service configuration:', emailConfig);\n        \n        if (!emailConfig.canSendEmails) {\n          console.warn('âš ï¸ Email service not properly configured. Skipping automatic invitations.');\n          console.warn('Please check SENDGRID_API_KEY and SENDGRID_FROM_EMAIL environment variables.');\n        } else {\n          const inviteEmails = req.body.inviteEmails;\n          if (inviteEmails && Array.isArray(inviteEmails) && inviteEmails.length > 0) {\n            // VÃ©rifier les limites d'invitations pour le lot\n            const invitationPermission = await canSendInvitations(authReq.user.organizationId, inviteEmails.length);\n            if (!invitationPermission.allowed) {\n              console.warn(`âš ï¸ Limite d'invitations atteinte: ${invitationPermission.reason}`);\n              // Ne pas faire Ã©chouer la crÃ©ation de l'Ã©vÃ©nement, mais limiter les invitations\n              const maxAllowed = invitationPermission.remainingInvitations || 0;\n              if (maxAllowed > 0) {\n                inviteEmails.splice(maxAllowed); // RÃ©duire la liste aux invitations possibles\n                console.log(`ğŸ“§ RÃ©duction des invitations Ã  ${maxAllowed} (limite atteinte)`);\n              } else {\n                console.log('ğŸ“§ Aucune invitation envoyÃ©e (limite atteinte)');\n                // Continuer sans envoyer d'invitations\n                return res.json({ \n                  event, \n                  message: \"Event created successfully, but invitation limit reached. Upgrade to send more invitations.\",\n                  invitationLimitReached: true\n                });\n              }\n            }\n            \n            console.log(`ğŸ“§ Envoi d'invitations Ã  ${inviteEmails.length} adresses email pour l'Ã©vÃ©nement ${event.id}`);\n            \n            // Envoi des invitations en parallÃ¨le\n          const invitationPromises = inviteEmails.map(async (email: string) => {\n            try {\n              const invitationToken = randomUUID();\n              \n              // CrÃ©ation du lien d'invitation\n              const invitationLink = `${process.env.APP_URL || 'http://localhost:8080'}/events/${event.id}?token=${invitationToken}`;\n              \n              // Envoi de l'email d'invitation avec le service amÃ©liorÃ©\n              const emailSent = await emailServiceEnhanced.sendEventInvitationWithLink(\n                email,\n                event.name,\n                organization.name,\n                new Date(event.date),\n                invitationLink,\n                event.meetingPoint,\n                event.destination,\n                event.sport || 'Sport',\n                undefined, // duration\n                `${organization.contactFirstName} ${organization.contactLastName}`,\n                organization.email\n              );\n              \n              if (emailSent) {\n                console.log(`âœ… Invitation envoyÃ©e avec succÃ¨s Ã  ${email}`);\n                return { email, success: true };\n              } else {\n                throw new Error('Failed to send email');\n              }\n            } catch (error) {\n              console.error(`âŒ Erreur envoi invitation Ã  ${email}:`, error);\n              return { email, success: false, error: error.message };\n            }\n          });\n          \n          const invitationResults = await Promise.all(invitationPromises);\n          const successCount = invitationResults.filter(r => r.success).length;\n          \n          // IncrÃ©menter le compteur d'invitations pour les envois rÃ©ussis\n          if (successCount > 0) {\n            await SubscriptionService.incrementInvitationCount(authReq.user.organizationId, successCount);\n          }\n          \n          console.log(`ğŸ“Š Invitations envoyÃ©es: ${successCount}/${inviteEmails.length}`);\n          } else {\n            console.log('ğŸ“§ Aucun email d\\'invitation spÃ©cifique fourni lors de la crÃ©ation');\n          }\n        \n          // ğŸ“§ RÃ©cupÃ©ration des participants des Ã©vÃ©nements prÃ©cÃ©dents pour invitations\n          try {\n          const organizationEvents = await storage.getEventsByOrganization(authReq.user.organizationId);\n          const allParticipantEmails = new Set<string>();\n          \n          // RÃ©cupÃ©rer tous les participants des Ã©vÃ©nements prÃ©cÃ©dents\n          for (const orgEvent of organizationEvents) {\n            if (orgEvent.id !== event.id) { // Ã‰viter d'inviter pour l'Ã©vÃ©nement qu'on vient de crÃ©er\n              try {\n                const eventParticipants = await storage.getEventParticipants(orgEvent.id);\n                eventParticipants.forEach(p => {\n                  if (p.email) allParticipantEmails.add(p.email);\n                });\n              } catch (err) {\n                console.error(`Erreur rÃ©cupÃ©ration participants Ã©vÃ©nement ${orgEvent.id}:`, err);\n              }\n            }\n          }\n          \n          if (allParticipantEmails.size > 0 && emailConfig.canSendEmails) {\n            console.log(`ğŸ“§ Envoi d'invitations Ã  ${allParticipantEmails.size} membres prÃ©cÃ©dents`);\n            \n            const existingInvitationPromises = Array.from(allParticipantEmails).map(async (email) => {\n              try {\n                const invitationLink = `${process.env.APP_URL || 'http://localhost:8080'}/events/${event.id}`;\n                \n                await emailService.sendEventInvitation({\n                  to: email,\n                  eventName: event.name,\n                  eventDate: new Date(event.date),\n                  organizationName: organization.name,\n                  invitationLink: invitationLink,\n                  meetingPoint: event.meetingPoint,\n                  destination: event.destination,\n                  sport: event.sport || 'Sport',\n                  customMessage: `Nouvel Ã©vÃ©nement disponible : ${event.name}. Rejoignez-nous !`\n                });\n                \n                return { email, success: true };\n              } catch (error) {\n                console.error(`âŒ Erreur envoi invitation membre ${email}:`, error);\n                return { email, success: false };\n              }\n            });\n            \n            const existingResults = await Promise.all(existingInvitationPromises);\n            const existingSuccessCount = existingResults.filter(r => r.success).length;\n            \n            console.log(`ğŸ“Š Invitations membres: ${existingSuccessCount}/${allParticipantEmails.size}`);\n          } else if (allParticipantEmails.size > 0 && !emailConfig.canSendEmails) {\n            console.warn(`âš ï¸ ${allParticipantEmails.size} membres existants trouvÃ©s mais service email non configurÃ©`);\n          }\n          } catch (membersError) {\n            console.error('âŒ Erreur lors de la rÃ©cupÃ©ration des membres existants:', membersError);\n          }\n        }\n      } catch (emailError) {\n        console.error('âŒ Erreur lors de l\\'envoi des invitations:', emailError);\n        // On ne fait pas Ã©chouer la crÃ©ation d'Ã©vÃ©nement si les emails Ã©chouent\n      }\n\n      // Send event creation confirmation email to organizer (async, don't wait for it)\n      emailService.sendEventCreationConfirmation(\n        organization.email,\n        `${organization.contactFirstName} ${organization.contactLastName}`,\n        event.name,\n        organization.name,\n        new Date(event.date),\n        event.id,\n        event.meetingPoint,\n        event.destination,\n        event.sport,\n        event.description\n      ).catch(error => {\n        console.error('Failed to send event creation confirmation email:', error);\n        // Don't fail the event creation if email fails\n      });\n      \n      res.json(event);\n    } catch (error) {\n      console.error(\"Create event error:\", error);\n      res.status(400).json({ message: error instanceof Error ? error.message : \"Failed to create event\" });\n    }\n  });\n\n  app.get(\"/api/events/:id\", requireAuth, async (req, res) => {\n    try {\n      const authReq = req as AuthenticatedRequest;\n      const event = await storage.getEvent(req.params.id);\n\n      if (!event || event.organizationId !== authReq.user.organizationId) {\n        return res.status(404).json({ message: \"Event not found\" });\n      }\n\n      res.json(event);\n    } catch (error) {\n      console.error(\"Get event error:\", error);\n      res.status(500).json({ message: \"Failed to get event\" });\n    }\n  });\n\n  app.put(\"/api/events/:id\", requireAuth, async (req, res) => {\n    try {\n      const authReq = req as AuthenticatedRequest;\n      const event = await storage.getEvent(req.params.id);\n\n      if (!event || event.organizationId !== authReq.user.organizationId) {\n        return res.status(404).json({ message: \"Event not found\" });\n      }\n\n      const data = insertEventSchema.partial().parse(req.body);\n      const updatedEvent = await storage.updateEvent(req.params.id, data);\n      res.json(updatedEvent);\n    } catch (error) {\n      console.error(\"Update event error:\", error);\n      res.status(400).json({ message: error instanceof Error ? error.message : \"Failed to update event\" });\n    }\n  });\n\n  app.delete(\"/api/events/:id\", requireAuth, async (req, res) => {\n    try {\n      const authReq = req as AuthenticatedRequest;\n      const event = await storage.getEvent(req.params.id);\n\n      if (!event || event.organizationId !== authReq.user.organizationId) {\n        return res.status(404).json({ message: \"Event not found\" });\n      }\n\n      await storage.deleteEvent(req.params.id);\n      res.json({ message: \"Event deleted successfully\" });\n    } catch (error) {\n      console.error(\"Delete event error:\", error);\n      res.status(500).json({ message: \"Failed to delete event\" });\n    }\n  });\n\n  // Participants routes\n  app.get(\"/api/events/:id/participants\", requireAuth, async (req, res) => {\n    try {\n      const authReq = req as AuthenticatedRequest;\n      const event = await storage.getEvent(req.params.id);\n\n      if (!event || event.organizationId !== authReq.user.organizationId) {\n        return res.status(404).json({ message: \"Event not found\" });\n      }\n\n      const participants = await storage.getEventParticipants(req.params.id);\n      res.json(participants);\n    } catch (error) {\n      console.error(\"Get participants error:\", error);\n      res.status(500).json({ message: \"Failed to get participants\" });\n    }\n  });\n\n  app.delete(\"/api/participants/:id\", requireAuth, async (req, res) => {\n    try {\n      const participant = await storage.getEventParticipant(req.params.id);\n      if (!participant) {\n        return res.status(404).json({ message: \"Participant not found\" });\n      }\n\n      const event = await storage.getEvent(participant.eventId);\n      const authReq = req as AuthenticatedRequest;\n      if (!event || event.organizationId !== authReq.user.organizationId) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n\n      await storage.deleteEventParticipant(req.params.id);\n      res.json({ message: \"Participant removed successfully\" });\n    } catch (error) {\n      console.error(\"Delete participant error:\", error);\n      res.status(500).json({ message: \"Failed to remove participant\" });\n    }\n  });\n\n  app.put(\"/api/participants/:id\", requireAuth, async (req, res) => {\n    try {\n      const participant = await storage.getEventParticipant(req.params.id);\n      if (!participant) {\n        return res.status(404).json({ message: \"Participant not found\" });\n      }\n\n      const event = await storage.getEvent(participant.eventId);\n      const authReq = req as AuthenticatedRequest;\n      if (!event || event.organizationId !== authReq.user.organizationId) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n\n      const data = req.body;\n      const updatedParticipant = await storage.updateEventParticipant(req.params.id, data);\n      res.json(updatedParticipant);\n    } catch (error) {\n      console.error(\"Update participant error:\", error);\n      res.status(500).json({ message: \"Failed to update participant\" });\n    }\n  });\n\n  // Public event routes (no auth required)\n  app.get(\"/api/events/:id/public\", async (req, res) => {\n    try {\n      const event = await storage.getEvent(req.params.id);\n      if (!event) {\n        return res.status(404).json({ message: \"Event not found\" });\n      }\n\n      const organization = await storage.getOrganization(event.organizationId);\n      const participants = await storage.getEventParticipants(event.id);\n\n      // Format event data with organization details\n      const eventData = {\n        id: event.id,\n        name: event.name,\n        description: event.description,\n        sport: event.sport,\n        date: event.date,\n        eventDate: event.eventDate,\n        meetingPoint: event.meetingPoint,\n        destination: event.destination,\n        duration: event.duration,\n        status: event.status,\n        participants: participants,\n        organization: organization ? {\n          name: organization.name,\n          logoUrl: organization.logoUrl,\n          contactFirstName: organization.contactFirstName,\n          contactLastName: organization.contactLastName\n        } : null\n      };\n\n      res.json(eventData);\n    } catch (error) {\n      console.error(\"Get public event error:\", error);\n      res.status(500).json({ message: \"Failed to get event details\" });\n    }\n  });\n\n  // Join event (public endpoint)\n  app.post(\"/api/events/:id/join\", async (req, res) => {\n    try {\n      const data = insertEventParticipantSchema.parse({\n        ...req.body,\n        eventId: req.params.id,\n      });\n\n      const event = await storage.getEvent(req.params.id);\n      if (!event) {\n        return res.status(404).json({ message: \"Event not found\" });\n      }\n\n      // Check if already registered\n      const existingParticipants = await storage.getEventParticipants(event.id);\n      const existingParticipant = existingParticipants.find(p => p.email === data.email);\n\n      if (existingParticipant) {\n        return res.status(400).json({ message: \"You are already registered for this event\" });\n      }\n\n      const participant = await storage.createEventParticipant(data);\n\n      // Send notification email to organizer about new participant (async, don't wait for it)\n      try {\n        const organization = await storage.getOrganization(event.organizationId);\n        if (organization) {\n          emailService.sendParticipantRegistrationNotification(\n            organization.email,\n            `${organization.contactFirstName} ${organization.contactLastName}`,\n            data.name,\n            data.role,\n            event.name,\n            organization.name,\n            event.id,\n            data.availableSeats,\n            data.comment\n          ).catch(error => {\n            console.error('Failed to send participant registration notification:', error);\n            // Don't fail the registration if email fails\n          });\n        }\n      } catch (error) {\n        console.error('Error sending participant registration notification:', error);\n      }\n\n      res.json({ message: \"Successfully registered for the event!\" });\n    } catch (error) {\n      console.error(\"Join event error:\", error);\n      res.status(400).json({ message: error instanceof Error ? error.message : \"Failed to join event\" });\n    }\n  });\n\n  // Create shareable invitation token (auth required)\n  app.post(\"/api/events/:id/invitations\", requireAuth, async (req, res) => {\n    try {\n      const authReq = req as AuthenticatedRequest;\n      const event = await storage.getEvent(req.params.id);\n      if (!event || event.organizationId !== authReq.user.organizationId) {\n        return res.status(404).json({ message: \"Event not found\" });\n      }\n\n      const token = randomUUID();\n      const invitation = await storage.createEventInvitation({\n        eventId: event.id,\n        email: `sharedlink+${token}@local`,\n        token,\n        status: \"pending\",\n      });\n\n      res.json({ token: invitation.token });\n    } catch (error) {\n      console.error(error);\n      res.status(500).json({ message: \"Failed to create invitation link\" });\n    }\n  });\n\n  // Redirect invitation tokens to public event page\n  app.get(\"/invitation/:token\", async (req, res) => {\n    try {\n      const invitation = await storage.getEventInvitation(req.params.token);\n      if (!invitation) {\n        return res.status(404).send(`\n          <html><body>\n            <h1>Invitation non trouvÃ©e</h1>\n            <p>Cette invitation n'existe pas ou a expirÃ©.</p>\n          </body></html>\n        `);\n      }\n\n      res.redirect(`/events/${invitation.eventId}`);\n    } catch (error) {\n      console.error(\"Invitation redirect error:\", error);\n      res.status(500).send(`\n        <html><body>\n          <h1>Erreur</h1>\n          <p>Une erreur est survenue lors du traitement de votre invitation.</p>\n        </body></html>\n      `);\n    }\n  });\n\n  // Send individual invitation email\n  app.post(\"/api/events/:id/invite\", requireAuth, async (req, res) => {\n    try {\n      const { email, customMessage } = req.body;\n\n      if (!email) {\n        return res.status(400).json({ message: \"Email is required\" });\n      }\n\n      const authReq = req as AuthenticatedRequest;\n      \n      // VÃ©rifier les limites d'invitations avant d'envoyer\n      const invitationPermission = await canSendInvitations(authReq.user.organizationId, 1);\n      if (!invitationPermission.allowed) {\n        return res.status(403).json({\n          message: invitationPermission.reason,\n          type: \"subscription_limit\",\n          remainingInvitations: invitationPermission.remainingInvitations\n        });\n      }\n\n      const event = await storage.getEvent(req.params.id);\n      if (!event || event.organizationId !== authReq.user.organizationId) {\n        return res.status(404).json({ message: \"Event not found\" });\n      }\n\n      const organization = await storage.getOrganization(event.organizationId);\n      if (!organization) {\n        return res.status(404).json({ message: \"Organization not found\" });\n      }\n\n      const eventLink = `${process.env.APP_URL || 'https://teammove.fr'}/events/${event.id}`;\n\n      const sent = await emailService.sendEventInvitationWithLink(\n        email,\n        event.name,\n        organization.name,\n        event.date,\n        eventLink,\n        event.meetingPoint,\n        event.destination,\n        event.sport,\n        event.duration,\n        `${organization.contactFirstName} ${organization.contactLastName}`,\n        organization.email\n      );\n\n      if (sent) {\n        try {\n          const token = randomUUID();\n          await storage.createEventInvitation({\n            eventId: event.id,\n            email: email.trim(),\n            token,\n          });\n          \n          // IncrÃ©menter le compteur d'invitations envoyÃ©es\n          await SubscriptionService.incrementInvitationCount(authReq.user.organizationId, 1);\n        } catch (error) {\n          console.error(`Failed to create invitation record for ${email}:`, error);\n        }\n\n        res.json({ message: \"Invitation sent successfully\" });\n      } else {\n        res.status(500).json({ message: \"Failed to send invitation email\" });\n      }\n    } catch (error) {\n      console.error(\"Send invitation error:\", error);\n      res.status(500).json({ message: \"Failed to send invitation\" });\n    }\n  });\n\n  // Change requests routes\n  app.get(\"/api/events/:id/change-requests\", requireAuth, async (req, res) => {\n    try {\n      const authReq = req as AuthenticatedRequest;\n      const event = await storage.getEvent(req.params.id);\n      if (!event || event.organizationId !== authReq.user.organizationId) {\n        return res.status(404).json({ message: \"Event not found\" });\n      }\n\n      const requests = await storage.getParticipantChangeRequestsByEvent(req.params.id);\n      res.json(requests);\n    } catch (error) {\n      console.error(\"Get change requests error:\", error);\n      res.status(500).json({ message: \"Failed to get change requests\" });\n    }\n  });\n\n  app.post(\"/api/participants/:id/change-request\", async (req, res) => {\n    try {\n      const { requestType, requestedValue, reason } = req.body;\n\n      if (!requestType || !reason) {\n        return res.status(400).json({ message: \"Request type and reason are required\" });\n      }\n\n      const participant = await storage.getEventParticipant(req.params.id);\n      if (!participant) {\n        return res.status(404).json({ message: \"Participant not found\" });\n      }\n\n      const request = await storage.createParticipantChangeRequest({\n        participantId: req.params.id,\n        eventId: participant.eventId,\n        requestType,\n        currentValue: requestType === \"role_change\" ? participant.role :\n          requestType === \"seat_change\" ? participant.availableSeats?.toString() : \"active\",\n        requestedValue,\n        reason,\n        status: \"pending\",\n      });\n\n      const event = await storage.getEvent(participant.eventId);\n      if (event) {\n        const organization = await storage.getOrganization(event.organizationId);\n        if (organization) {\n          try {\n            const requestTypeText = requestType === \"role_change\" ? \"changement de rÃ´le\" :\n              requestType === \"seat_change\" ? \"changement de places disponibles\" : \"retrait de l'Ã©vÃ©nement\";\n\n            await emailService.sendMessageNotificationEmail(\n              organization.email,\n              `${organization.contactFirstName} ${organization.contactLastName}`,\n              event.name,\n              organization.name,\n              participant.name,\n              `Demande de ${requestTypeText}: ${reason}`,\n              event.id,\n              request.id\n            );\n          } catch (error) {\n            console.error(\"Failed to send change request notification:\", error);\n          }\n        }\n      }\n\n      res.json(request);\n    } catch (error) {\n      console.error(\"Create change request error:\", error);\n      res.status(500).json({ message: \"Failed to create change request\" });\n    }\n  });\n\n  app.put(\"/api/change-requests/:id\", requireAuth, async (req, res) => {\n    try {\n      const { status, organizerComment } = req.body;\n\n      if (!status || ![\"approved\", \"rejected\"].includes(status)) {\n        return res.status(400).json({ message: \"Valid status (approved/rejected) is required\" });\n      }\n\n      const request = await storage.getParticipantChangeRequest(req.params.id);\n      if (!request) {\n        return res.status(404).json({ message: \"Change request not found\" });\n      }\n\n      const authReq = req as AuthenticatedRequest;\n      const event = await storage.getEvent(request.eventId);\n      if (!event || event.organizationId !== authReq.user.organizationId) {\n        return res.status(404).json({ message: \"Event not found or access denied\" });\n      }\n\n      const updatedRequest = await storage.updateParticipantChangeRequest(req.params.id, {\n        status,\n        processedAt: new Date(),\n      });\n\n      if (status === \"approved\") {\n        try {\n          if (request.requestType === \"role_change\") {\n            await storage.updateEventParticipant(request.participantId, {\n              role: request.requestedValue as \"passenger\" | \"driver\",\n              availableSeats: request.requestedValue === \"driver\" ? 1 : null\n            });\n          } else if (request.requestType === \"seat_change\") {\n            await storage.updateEventParticipant(request.participantId, {\n              availableSeats: parseInt(request.requestedValue || \"0\")\n            });\n          } else if (request.requestType === \"withdrawal\") {\n            await storage.removeEventParticipant(request.participantId);\n          }\n        } catch (error) {\n          console.error(\"Failed to apply approved changes:\", error);\n          return res.status(500).json({ message: \"Failed to apply changes\" });\n        }\n      }\n\n      try {\n        const participant = await storage.getEventParticipant(request.participantId);\n        if (participant) {\n          const organization = await storage.getOrganization(event.organizationId);\n          if (organization) {\n            const statusText = status === \"approved\" ? \"approuvÃ©e\" : \"rejetÃ©e\";\n            const message = `Votre demande a Ã©tÃ© ${statusText}. ${organizerComment || \"\"}`;\n\n            await emailService.sendMessageNotificationEmail(\n              participant.email,\n              participant.name,\n              event.name,\n              organization.name,\n              organization.name,\n              message,\n              event.id,\n              updatedRequest.id\n            );\n          }\n        }\n      } catch (error) {\n        console.error(\"Failed to send decision notification:\", error);\n      }\n\n      res.json(updatedRequest);\n    } catch (error) {\n      console.error(\"Process change request error:\", error);\n      res.status(500).json({ message: \"Failed to process change request\" });\n    }\n  });\n\n  // Messages routes\n  app.get(\"/api/events/:id/messages\", requireAuth, async (req, res) => {\n    try {\n      const authReq = req as AuthenticatedRequest;\n      const event = await storage.getEvent(req.params.id);\n      if (!event || event.organizationId !== authReq.user.organizationId) {\n        return res.status(404).json({ message: \"Event not found\" });\n      }\n\n      const messages = await storage.getEventMessages(req.params.id);\n      res.json(messages);\n    } catch (error) {\n      console.error(\"Get messages error:\", error);\n      res.status(500).json({ message: \"Failed to get messages\" });\n    }\n  });\n\n  app.post(\"/api/events/:id/messages\", requireAuth, async (req, res) => {\n    try {\n      const authReq = req as AuthenticatedRequest;\n      const event = await storage.getEvent(req.params.id);\n      if (!event || event.organizationId !== authReq.user.organizationId) {\n        return res.status(404).json({ message: \"Event not found\" });\n      }\n\n      const organization = await storage.getOrganization(authReq.user.organizationId);\n      if (!organization) {\n        return res.status(404).json({ message: \"Organization not found\" });\n      }\n\n      const data = insertMessageSchema.parse({\n        eventId: req.params.id,\n        senderName: organization.name,\n        senderEmail: organization.email,\n        content: req.body.content,\n        isFromOrganizer: true,\n      });\n\n      const message = await storage.createMessage(data);\n\n      try {\n        const participants = await storage.getEventParticipants(event.id);\n\n        for (const participant of participants) {\n          // Create a unique reply token for each participant\n          const replyToken = randomUUID();\n          const expiresAt = new Date(Date.now() + 30 * 24 * 60 * 60 * 1000); // 30 days\n\n          await storage.createEmailReplyToken({\n            token: replyToken,\n            eventId: event.id,\n            participantEmail: participant.email,\n            participantName: participant.name,\n            organizerEmail: organization.email,\n            organizerName: `${organization.contactFirstName} ${organization.contactLastName}`,\n            expiresAt,\n          });\n\n          // Send message using enhanced email service with reply token\n          const emailSent = await emailServiceEnhanced.sendBroadcastMessage(\n            participant.email,\n            participant.name,\n            event.name,\n            organization.name,\n            data.content,\n            `${organization.contactFirstName} ${organization.contactLastName}`,\n            event.id\n          );\n\n          if (emailSent) {\n            console.log(`âœ… Message notification sent to ${participant.email} with reply token ${replyToken}`);\n          } else {\n            console.error(`âŒ Failed to send message notification to ${participant.email}`);\n          }\n        }\n      } catch (error) {\n        console.error(\"Failed to send message notifications:\", error);\n      }\n\n      res.json(message);\n    } catch (error) {\n      console.error(\"Create message error:\", error);\n      res.status(400).json({ message: error instanceof Error ? error.message : \"Failed to send message\" });\n    }\n  });\n\n  app.delete(\"/api/events/:eventId/messages/:messageId\", requireAuth, async (req, res) => {\n    try {\n      const authReq = req as AuthenticatedRequest;\n      const event = await storage.getEvent(req.params.eventId);\n      if (!event || event.organizationId !== authReq.user.organizationId) {\n        return res.status(404).json({ message: \"Event not found\" });\n      }\n\n      const message = await storage.getMessage(req.params.messageId);\n      if (!message || message.eventId !== event.id) {\n        return res.status(404).json({ message: \"Message not found\" });\n      }\n\n      await storage.deleteMessage(req.params.messageId);\n      res.json({ message: \"Message deleted successfully\" });\n    } catch (error) {\n      console.error(\"Delete message error:\", error);\n      res.status(500).json({ message: \"Failed to delete message\" });\n    }\n  });\n\n  // Public message endpoint for participants\n  app.post(\"/api/events/:id/messages/participant\", async (req, res) => {\n    try {\n      const { senderName, senderEmail, content } = req.body;\n\n      if (!senderName || !senderEmail || !content) {\n        return res.status(400).json({ message: \"Name, email, and content are required\" });\n      }\n\n      const event = await storage.getEvent(req.params.id);\n      if (!event) {\n        return res.status(404).json({ message: \"Event not found\" });\n      }\n\n      const participants = await storage.getEventParticipants(event.id);\n      const isParticipant = participants.some(p => p.email === senderEmail);\n\n      if (!isParticipant) {\n        return res.status(403).json({ message: \"Only event participants can send messages\" });\n      }\n\n      const data = insertMessageSchema.parse({\n        eventId: req.params.id,\n        senderName,\n        senderEmail,\n        content,\n        isFromOrganizer: false,\n      });\n\n      const message = await storage.createMessage(data);\n\n      try {\n        const organization = await storage.getOrganization(event.organizationId);\n        if (organization) {\n          const emailSent = await emailService.sendMessageNotificationEmail(\n            organization.email,\n            `${organization.contactFirstName} ${organization.contactLastName}`,\n            event.name,\n            organization.name,\n            senderName,\n            content,\n            event.id,\n            message.id\n          );\n\n          if (emailSent) {\n            console.log(`Participant message notification sent to organizer ${organization.email}`);\n          } else {\n            console.error(`Failed to send participant message notification to organizer`);\n          }\n        }\n      } catch (error) {\n        console.error(\"Failed to send organizer notification:\", error);\n      }\n\n      res.json(message);\n    } catch (error) {\n      console.error(\"Create participant message error:\", error);\n      res.status(400).json({ message: error instanceof Error ? error.message : \"Failed to send message\" });\n    }\n  });\n\n  // Chatbot routes\n  app.post(\"/api/chatbot/message\", async (req, res) => {\n    try {\n      const { message, conversationHistory } = req.body;\n\n      if (!message) {\n        return res.status(400).json({ \n          success: false,\n          message: \"Message is required\" \n        });\n      }\n\n      console.log('ğŸ“§ Chatbot request:', { message: message.substring(0, 100), historyLength: conversationHistory?.length || 0 });\n\n      const response = await chatbotService.sendMessage(message, conversationHistory || []);\n      \n      console.log('ğŸ¤– Chatbot response:', { success: response.success, messageLength: response.message.length });\n      \n      res.json({\n        success: response.success,\n        message: response.message\n      });\n    } catch (error) {\n      console.error(\"âŒ Chatbot error:\", error);\n      res.status(500).json({ \n        success: false,\n        message: \"DÃ©solÃ©, le service est temporairement indisponible. Veuillez rÃ©essayer plus tard.\" \n      });\n    }\n  });\n\n  app.post(\"/api/chatbot/organization-help\", requireAuth, async (req, res) => {\n    try {\n      const { message } = req.body;\n\n      if (!message) {\n        return res.status(400).json({ message: \"Message is required\" });\n      }\n\n      const authReq = req as AuthenticatedRequest;\n      const organization = await storage.getOrganization(authReq.user.organizationId);\n      if (!organization) {\n        return res.status(404).json({ message: \"Organization not found\" });\n      }\n\n      const response = await chatbotService.getOrganizationHelp(message, organization);\n      res.json({ response });\n    } catch (error) {\n      console.error(\"Chatbot error:\", error);\n      res.status(500).json({ message: \"Failed to get chatbot response\" });\n    }\n  });\n\n  // Dashboard stats\n  app.get(\"/api/dashboard/stats\", requireAuth, async (req, res) => {\n    try {\n      const authReq = req as AuthenticatedRequest;\n      const events = await storage.getEventsByOrganization(authReq.user.organizationId);\n\n      // SÃ©parer les Ã©vÃ©nements actifs (futurs) des Ã©vÃ©nements passÃ©s\n      const now = new Date();\n      const activeEvents = events.filter(e => new Date(e.eventDate) >= now);\n      const completedEvents = events.filter(e => new Date(e.eventDate) < now);\n      \n      // Compter le total d'Ã©vÃ©nements crÃ©Ã©s par l'organisateur (selon demande utilisateur)\n      const totalEventsCreated = events.length;\n      const activeEventsCount = activeEvents.length;\n      \n      // Calculer les participants pour TOUS les Ã©vÃ©nements (actifs et passÃ©s)\n      let totalParticipants = 0;\n      let totalDrivers = 0;\n      let totalSeats = 0;\n      let occupiedSeats = 0;\n\n      // Statistiques sÃ©parÃ©es pour Ã©vÃ©nements actifs seulement  \n      let activeEventParticipants = 0;\n      let activeEventDrivers = 0;\n      let activeEventSeats = 0;\n      let activeEventOccupiedSeats = 0;\n\n      // Calculer pour tous les Ã©vÃ©nements\n      for (const event of events) {\n        if (event.participants && event.participants.length > 0) {\n          totalParticipants += event.participants.length;\n          \n          const drivers = event.participants.filter(p => p.role === 'driver');\n          const passengers = event.participants.filter(p => p.role === 'passenger');\n          \n          totalDrivers += drivers.length;\n          occupiedSeats += passengers.length;\n          \n          // Calculer le total des siÃ¨ges disponibles des conducteurs\n          const eventSeats = drivers.reduce((sum, driver) => {\n            return sum + (driver.availableSeats || 0);\n          }, 0);\n          totalSeats += eventSeats;\n        }\n      }\n\n      // Calculer pour les Ã©vÃ©nements actifs seulement\n      for (const event of activeEvents) {\n        if (event.participants && event.participants.length > 0) {\n          activeEventParticipants += event.participants.length;\n          \n          const drivers = event.participants.filter(p => p.role === 'driver');\n          const passengers = event.participants.filter(p => p.role === 'passenger');\n          \n          activeEventDrivers += drivers.length;\n          activeEventOccupiedSeats += passengers.length;\n          \n          // Calculer les siÃ¨ges disponibles pour Ã©vÃ©nements actifs\n          const eventSeats = drivers.reduce((sum, driver) => {\n            return sum + (driver.availableSeats || 0);\n          }, 0);\n          activeEventSeats += eventSeats;\n        }\n      }\n\n      // Places disponibles = siÃ¨ges totaux des conducteurs - siÃ¨ges occupÃ©s par passagers\n      const availableSeatsRemaining = Math.max(0, activeEventSeats - activeEventOccupiedSeats);\n\n      res.json({\n        // Statistiques selon les besoins utilisateur\n        activeEvents: totalEventsCreated, // Nombre total d'Ã©vÃ©nements crÃ©Ã©s par l'organisateur\n        totalParticipants: totalParticipants, // Total participants (passagers + conducteurs)\n        totalDrivers: totalDrivers, // Total conducteurs\n        availableSeats: availableSeatsRemaining, // Places disponibles dans Ã©vÃ©nements actifs\n        \n        // Statistiques dÃ©taillÃ©es additionnelles\n        totalEventsCreated,\n        activeEventsCount, \n        completedEventsCount: completedEvents.length,\n        totalSeats,\n        occupiedSeats,\n        activeEventStats: {\n          participants: activeEventParticipants,\n          drivers: activeEventDrivers,\n          seats: activeEventSeats,\n          occupiedSeats: activeEventOccupiedSeats\n        }\n      });\n    } catch (error) {\n      console.error(\"Dashboard stats error:\", error);\n      res.status(500).json({ message: \"Failed to get dashboard stats\" });\n    }\n  });\n\n  app.get(\"/api/dashboard/stats/realtime\", requireAuth, async (req, res) => {\n    try {\n      const authReq = req as AuthenticatedRequest;\n      const events = await storage.getEventsByOrganization(authReq.user.organizationId);\n\n      const totalEvents = events.length;\n      const activeEvents = events.filter(e => new Date(e.eventDate) >= new Date()).length;\n\n      res.json({\n        totalEvents,\n        activeEvents,\n        timestamp: new Date().toISOString()\n      });\n    } catch (error) {\n      console.error(\"Realtime dashboard stats error:\", error);\n      res.status(500).json({ message: \"Failed to get realtime stats\" });\n    }\n  });\n\n  // Email routes\n  app.post(\"/api/events/:id/send-reminders\", requireAuth, async (req, res) => {\n    try {\n      const authReq = req as AuthenticatedRequest;\n      const event = await storage.getEvent(req.params.id);\n      if (!event || event.organizationId !== authReq.user.organizationId) {\n        return res.status(404).json({ message: \"Event not found\" });\n      }\n\n      const participants = await storage.getEventParticipants(event.id);\n      const organization = await storage.getOrganization(event.organizationId);\n\n      if (!organization) {\n        return res.status(404).json({ message: \"Organization not found\" });\n      }\n\n      let successCount = 0;\n      for (const participant of participants) {\n        try {\n          const sent = await emailService.sendReminderEmail(\n            participant.email,\n            participant.name,\n            event.name,\n            organization.name,\n            event.date,\n            event.meetingPoint\n          );\n          if (sent) successCount++;\n        } catch (error) {\n          console.error(`Failed to send reminder to ${participant.email}:`, error);\n        }\n      }\n\n      res.json({\n        message: `Reminders sent to ${successCount} out of ${participants.length} participants`\n      });\n    } catch (error) {\n      console.error(\"Send reminders error:\", error);\n      res.status(500).json({ message: \"Failed to send reminders\" });\n    }\n  });\n\n  app.post(\"/api/send-custom-email\", requireAuth, async (req, res) => {\n    try {\n      const { to, subject, content } = req.body;\n\n      if (!to || !subject || !content) {\n        return res.status(400).json({ message: \"To, subject, and content are required\" });\n      }\n\n      const authReq = req as AuthenticatedRequest;\n      const organization = await storage.getOrganization(authReq.user.organizationId);\n      if (!organization) {\n        return res.status(404).json({ message: \"Organization not found\" });\n      }\n\n      const sent = await emailService.sendCustomEmail(to, subject, content, organization);\n\n      if (sent.success) {\n        res.json({ message: \"Email sent successfully\" });\n      } else {\n        res.status(500).json({ message: sent.error || \"Failed to send email\" });\n      }\n    } catch (error) {\n      console.error(\"Send custom email error:\", error);\n      res.status(500).json({ message: \"Failed to send email\" });\n    }\n  });\n\n  // Messages routes\n  app.get(\"/api/events/:id/messages\", requireAuth, async (req, res) => {\n    try {\n      const authReq = req as AuthenticatedRequest;\n      const event = await storage.getEvent(req.params.id);\n      \n      if (!event || event.organizationId !== authReq.user.organizationId) {\n        return res.status(404).json({ message: \"Event not found\" });\n      }\n\n      const messages = await storage.getEventMessages(event.id);\n      res.json(messages);\n    } catch (error) {\n      console.error(\"Get messages error:\", error);\n      res.status(500).json({ message: \"Failed to get messages\" });\n    }\n  });\n\n  app.post(\"/api/events/:id/messages\", requireAuth, async (req, res) => {\n    try {\n      const authReq = req as AuthenticatedRequest;\n      const { content } = req.body;\n\n      if (!content) {\n        return res.status(400).json({ message: \"Content is required\" });\n      }\n\n      const event = await storage.getEvent(req.params.id);\n      if (!event || event.organizationId !== authReq.user.organizationId) {\n        return res.status(404).json({ message: \"Event not found\" });\n      }\n\n      const organization = await storage.getOrganization(authReq.user.organizationId);\n      if (!organization) {\n        return res.status(404).json({ message: \"Organization not found\" });\n      }\n\n      // Create message record\n      const messageData: any = {\n        eventId: event.id,\n        senderName: `${organization.contactFirstName} ${organization.contactLastName}`,\n        senderEmail: organization.email,\n        content,\n        isFromOrganizer: true,\n      };\n\n      const message = await storage.createMessage(messageData);\n\n      // Get all participants for this event\n      const participants = await storage.getEventParticipants(event.id);\n\n      // Send email to each participant with reply functionality\n      let successCount = 0;\n      for (const participant of participants) {\n        try {\n          // Create a unique reply token for this message-participant combination\n          const replyToken = `${message.id}_${participant.id}_${Date.now()}`;\n          \n          const sent = await emailService.sendMessageToParticipant(\n            participant.email,\n            participant.name,\n            content,\n            event.name,\n            organization.name,\n            `${organization.contactFirstName} ${organization.contactLastName}`,\n            replyToken\n          );\n          if (sent.success) successCount++;\n        } catch (error) {\n          console.error(`Failed to send message to ${participant.email}:`, error);\n        }\n      }\n\n      res.json({\n        message: `Message sent to ${successCount} out of ${participants.length} participants`,\n        messageId: message.id\n      });\n    } catch (error) {\n      console.error(\"Send message error:\", error);\n      res.status(500).json({ message: \"Failed to send message\" });\n    }\n  });\n\n  app.delete(\"/api/messages/:id\", requireAuth, async (req, res) => {\n    try {\n      const authReq = req as AuthenticatedRequest;\n      const message = await storage.getMessage(req.params.id);\n      \n      if (!message) {\n        return res.status(404).json({ message: \"Message not found\" });\n      }\n\n      // Verify that the message belongs to an event owned by this organization\n      const event = await storage.getEvent(message.eventId);\n      if (!event || event.organizationId !== authReq.user.organizationId) {\n        return res.status(403).json({ message: \"Unauthorized\" });\n      }\n\n      await storage.deleteMessage(req.params.id);\n      res.json({ message: \"Message deleted successfully\" });\n    } catch (error) {\n      console.error(\"Delete message error:\", error);\n      res.status(500).json({ message: \"Failed to delete message\" });\n    }\n  });\n\n  // Handle participant replies via email\n  app.post(\"/api/messages/reply/:replyToken\", async (req, res) => {\n    try {\n      const { replyToken } = req.params;\n      const { content, senderEmail, senderName } = req.body;\n\n      if (!content || !senderEmail || !senderName) {\n        return res.status(400).json({ message: \"Content, sender email, and sender name are required\" });\n      }\n\n      // Get the reply token information\n      const tokenData = await storage.getEmailReplyToken(replyToken);\n      if (!tokenData) {\n        return res.status(404).json({ message: \"Invalid or expired reply token\" });\n      }\n\n      // Verify the sender email matches the token\n      if (tokenData.participantEmail !== senderEmail) {\n        return res.status(403).json({ message: \"Unauthorized: email doesn't match token\" });\n      }\n\n      // Check if token is expired\n      if (new Date() > tokenData.expiresAt) {\n        await storage.deactivateEmailReplyToken(replyToken);\n        return res.status(410).json({ message: \"Reply token has expired\" });\n      }\n\n      // Get event information\n      const event = await storage.getEvent(tokenData.eventId);\n      if (!event) {\n        return res.status(404).json({ message: \"Event not found\" });\n      }\n\n      // Create the reply message in the database\n      const replyMessage = await storage.createMessage({\n        eventId: tokenData.eventId,\n        senderName: tokenData.participantName,\n        senderEmail: tokenData.participantEmail,\n        content: content.trim(),\n        isFromOrganizer: false,\n      });\n\n      // Send notification to organizer\n      try {\n        await emailServiceEnhanced.sendReplyNotificationToOrganizer(\n          tokenData.organizerEmail,\n          tokenData.organizerName,\n          tokenData.participantName,\n          content.trim(),\n          event.name\n        );\n        console.log(`âœ… Reply notification sent to organizer ${tokenData.organizerEmail}`);\n      } catch (emailError) {\n        console.error(`âŒ Failed to send reply notification to organizer:`, emailError);\n      }\n\n      res.json({ \n        success: true, \n        message: \"Reply processed successfully\",\n        messageId: replyMessage.id \n      });\n\n    } catch (error) {\n      console.error(\"Reply processing error:\", error);\n      res.status(500).json({ message: \"Failed to process reply\" });\n    }\n  });\n\n  // SendGrid webhook endpoint for processing inbound emails\n  app.post(\"/api/webhooks/sendgrid/inbound\", express.raw({ type: 'application/json' }), async (req, res) => {\n    try {\n      const payload = JSON.parse(req.body.toString());\n      \n      // Parse inbound email data from SendGrid\n      for (const email of payload) {\n        const toEmail = email.to?.[0]?.email || '';\n        const fromEmail = email.from?.email || '';\n        const fromName = email.from?.name || fromEmail;\n        const subject = email.subject || '';\n        const text = email.text || '';\n        const html = email.html || '';\n        \n        // Extract reply token from email address (e.g., reply+token@TeamMove.com)\n        const replyTokenMatch = toEmail.match(/reply\\+([^@]+)@/);\n        if (!replyTokenMatch) {\n          console.log(`No reply token found in email address: ${toEmail}`);\n          continue;\n        }\n        \n        const replyToken = replyTokenMatch[1];\n        \n        // Process the reply using the same logic as the API endpoint\n        const tokenData = await storage.getEmailReplyToken(replyToken);\n        if (!tokenData || new Date() > tokenData.expiresAt) {\n          console.log(`Invalid or expired reply token: ${replyToken}`);\n          continue;\n        }\n        \n        if (tokenData.participantEmail !== fromEmail) {\n          console.log(`Email sender mismatch: ${fromEmail} vs ${tokenData.participantEmail}`);\n          continue;\n        }\n        \n        // Clean up the reply content (remove quotes, signatures, etc.)\n        const cleanContent = cleanEmailReply(text || html);\n        if (!cleanContent.trim()) {\n          console.log(`Empty reply content from ${fromEmail}`);\n          continue;\n        }\n        \n        // Get event information\n        const event = await storage.getEvent(tokenData.eventId);\n        if (!event) {\n          console.log(`Event not found for token: ${replyToken}`);\n          continue;\n        }\n        \n        // Create the reply message\n        const replyMessage = await storage.createMessage({\n          eventId: tokenData.eventId,\n          senderName: tokenData.participantName,\n          senderEmail: tokenData.participantEmail,\n          content: cleanContent.trim(),\n          isFromOrganizer: false,\n        });\n        \n        // Send notification to organizer\n        try {\n          await emailServiceEnhanced.sendReplyNotificationToOrganizer(\n            tokenData.organizerEmail,\n            tokenData.organizerName,\n            tokenData.participantName,\n            cleanContent.trim(),\n            event.name\n          );\n          console.log(`âœ… Inbound email reply processed for event ${event.name}: ${replyMessage.id}`);\n        } catch (emailError) {\n          console.error(`âŒ Failed to send organizer notification:`, emailError);\n        }\n      }\n      \n      res.status(200).json({ message: \"Webhook processed successfully\" });\n      \n    } catch (error) {\n      console.error(\"SendGrid webhook error:\", error);\n      res.status(500).json({ message: \"Webhook processing failed\" });\n    }\n  });\n\n  // Original route with modifications for better compatibility\n  app.post(\"/api/messages/reply-old/:replyToken\", async (req, res) => {\n    try {\n      const { replyToken } = req.params;\n      const { content, senderEmail, senderName } = req.body;\n\n      if (!content || !senderEmail || !senderName) {\n        return res.status(400).json({ message: \"Content, senderEmail, and senderName are required\" });\n      }\n\n      // Parse reply token to get message and participant info\n      const tokenParts = replyToken.split('_');\n      if (tokenParts.length !== 3) {\n        return res.status(400).json({ message: \"Invalid reply token\" });\n      }\n\n      const [messageId, participantId] = tokenParts;\n\n      // Get original message to find the event\n      const originalMessage = await storage.getMessage(messageId);\n      if (!originalMessage) {\n        return res.status(404).json({ message: \"Original message not found\" });\n      }\n\n      // Verify participant exists for this event\n      const participants = await storage.getEventParticipants(originalMessage.eventId);\n      const participant = participants.find(p => p.id === participantId && p.email === senderEmail);\n      \n      if (!participant) {\n        return res.status(403).json({ message: \"Unauthorized - participant not found\" });\n      }\n\n      // Create reply message\n      const replyData: any = {\n        eventId: originalMessage.eventId,\n        senderName,\n        senderEmail,\n        content,\n        isFromOrganizer: false,\n      };\n\n      const replyMessage = await storage.createMessage(replyData);\n\n      // Send notification to organizer\n      const event = await storage.getEvent(originalMessage.eventId);\n      const organization = await storage.getOrganization(event.organizationId);\n\n      if (organization) {\n        try {\n          await emailService.sendReplyNotificationToOrganizer(\n            organization.email,\n            `${organization.contactFirstName} ${organization.contactLastName}`,\n            senderName,\n            content,\n            event.name\n          );\n        } catch (error) {\n          console.error(\"Failed to send reply notification to organizer:\", error);\n        }\n      }\n\n      res.json({ message: \"Reply sent successfully\", replyId: replyMessage.id });\n    } catch (error) {\n      console.error(\"Handle reply error:\", error);\n      res.status(500).json({ message: \"Failed to process reply\" });\n    }\n  });\n\n  // Admin endpoints - protected by admin role check\n  const requireAdmin = async (req: express.Request, res: express.Response, next: express.NextFunction) => {\n    try {\n      const authReq = req as AuthenticatedRequest;\n      const organization = await storage.getOrganization(authReq.user.organizationId);\n      \n      if (!organization || organization.role !== 'admin') {\n        return res.status(403).json({ message: \"Admin access required\" });\n      }\n      \n      next();\n    } catch (error) {\n      console.error(\"Admin check error:\", error);\n      res.status(500).json({ message: \"Failed to verify admin permissions\" });\n    }\n  };\n\n  // Middleware pour vÃ©rifier les fonctionnalitÃ©s\n  const requireFeature = (featureId: string) => {\n    return async (req: express.Request, res: express.Response, next: express.NextFunction) => {\n      try {\n        const authReq = req as AuthenticatedRequest;\n        if (!authReq.user || !authReq.user.organizationId) {\n          return res.status(401).json({ message: \"Unauthorized\" });\n        }\n\n        const organization = await storage.getOrganization(authReq.user.organizationId);\n        if (!organization) {\n          return res.status(404).json({ message: \"Organization not found\" });\n        }\n\n        // Les admins ont accÃ¨s Ã  toutes les fonctionnalitÃ©s\n        if (organization.role === 'admin') {\n          return next();\n        }\n\n        // VÃ©rifier si l'organisation est active\n        if (!organization.isActive) {\n          return res.status(403).json({ message: \"Organization is disabled\" });\n        }\n\n        // VÃ©rifier si la fonctionnalitÃ© est activÃ©e\n        if (!organization.features || !organization.features.includes(featureId)) {\n          return res.status(403).json({ \n            message: `Feature '${featureId}' is not enabled for this organization` \n          });\n        }\n\n        next();\n      } catch (error) {\n        console.error(\"Feature check error:\", error);\n        res.status(500).json({ message: \"Failed to verify feature permissions\" });\n      }\n    };\n  };\n\n  // Get all organizations (admin only)\n  app.get(\"/api/admin/organizations\", requireAuth, requireAdmin, async (req, res) => {\n    try {\n      const organizations = await storage.getAllOrganizationsForAdmin();\n      res.json(organizations.map(org => ({ ...org, password: undefined })));\n    } catch (error) {\n      console.error(\"Get all organizations error:\", error);\n      res.status(500).json({ message: \"Failed to get organizations\" });\n    }\n  });\n\n  // Update organization status (admin only)\n  app.patch(\"/api/admin/organizations/:id/status\", requireAuth, requireAdmin, async (req, res) => {\n    try {\n      const { isActive } = req.body;\n      \n      if (typeof isActive !== 'boolean') {\n        return res.status(400).json({ message: \"isActive must be a boolean\" });\n      }\n\n      const updatedOrg = await storage.updateOrganizationStatus(req.params.id, isActive);\n      res.json({ ...updatedOrg, password: undefined });\n    } catch (error) {\n      console.error(\"Update organization status error:\", error);\n      res.status(500).json({ message: \"Failed to update organization status\" });\n    }\n  });\n\n  // Update organization features (admin only)\n  app.patch(\"/api/admin/organizations/:id/features\", requireAuth, requireAdmin, async (req, res) => {\n    try {\n      const { features } = req.body;\n      \n      if (!Array.isArray(features)) {\n        return res.status(400).json({ message: \"features must be an array\" });\n      }\n\n      const updatedOrg = await storage.updateOrganizationFeatures(req.params.id, features);\n      res.json({ ...updatedOrg, password: undefined });\n    } catch (error) {\n      console.error(\"Update organization features error:\", error);\n      res.status(500).json({ message: \"Failed to update organization features\" });\n    }\n  });\n\n  // Delete organization (admin only)\n  app.delete(\"/api/admin/organizations/:id\", requireAuth, requireAdmin, async (req, res) => {\n    try {\n      const { id } = req.params;\n      \n      // Check if trying to delete own organization\n      const authReq = req as AuthenticatedRequest;\n      if (id === authReq.user.organizationId) {\n        return res.status(400).json({ message: \"Cannot delete your own organization\" });\n      }\n\n      await storage.deleteOrganization(id);\n      res.json({ message: \"Organization deleted successfully\" });\n    } catch (error) {\n      console.error(\"Delete organization error:\", error);\n      res.status(500).json({ message: \"Failed to delete organization\" });\n    }\n  });\n\n  // Import CSV/Excel parsing endpoint\n  app.post(\"/api/import/parse-excel\", requireAuth, requireFeature('csv_import'), upload.single('file'), async (req, res) => {\n    try {\n      if (!req.file) {\n        return res.status(400).json({ message: \"No file uploaded\" });\n      }\n\n      // La vÃ©rification des permissions est dÃ©jÃ  faite par le middleware requireFeature\n\n      let content = '';\n      const filePath = req.file.path;\n      const fileExtension = path.extname(req.file.originalname).toLowerCase();\n\n      if (fileExtension === '.csv' || fileExtension === '.txt') {\n        // Lire le fichier CSV/TXT directement\n        content = fs.readFileSync(filePath, 'utf-8');\n      } else if (fileExtension === '.xlsx' || fileExtension === '.xls') {\n        // Pour les fichiers Excel, on va juste retourner une version CSV simplifiÃ©e\n        // En production, vous pourriez utiliser une bibliothÃ¨que comme 'xlsx' pour parser Excel\n        // Pour l'instant, on indique que le format Excel nÃ©cessite une conversion manuelle\n        fs.unlinkSync(filePath); // Nettoyer le fichier temporaire\n        return res.status(400).json({ \n          message: \"Excel files require manual conversion to CSV format. Please save your Excel file as CSV and try again.\" \n        });\n      } else {\n        fs.unlinkSync(filePath); // Nettoyer le fichier temporaire\n        return res.status(400).json({ message: \"Unsupported file format\" });\n      }\n\n      // Nettoyer le fichier temporaire\n      fs.unlinkSync(filePath);\n      \n      res.json({ content });\n    } catch (error) {\n      console.error(\"Excel parsing error:\", error);\n      // Nettoyer le fichier en cas d'erreur\n      if (req.file?.path) {\n        try {\n          fs.unlinkSync(req.file.path);\n        } catch (e) {\n          console.error(\"Error cleaning up file:\", e);\n        }\n      }\n      res.status(500).json({ message: \"Failed to parse file\" });\n    }\n  });\n\n  // Route protÃ©gÃ©e pour les analytics avancÃ©es\n  app.get(\"/api/analytics/detailed\", requireAuth, requireFeature('analytics'), async (req, res) => {\n    try {\n      const authReq = req as AuthenticatedRequest;\n      const events = await storage.getEventsByOrganization(authReq.user.organizationId);\n      \n      // Calculs d'analytics dÃ©taillÃ©es\n      const analytics = {\n        eventTrends: events.map(e => ({\n          date: e.eventDate,\n          participants: e.participants?.length || 0\n        })),\n        participationRate: events.length > 0 ? \n          events.reduce((sum, e) => sum + (e.participants?.length || 0), 0) / events.length : 0,\n        message: \"Analytics avancÃ©es disponibles\"\n      };\n      \n      res.json(analytics);\n    } catch (error) {\n      console.error(\"Analytics error:\", error);\n      res.status(500).json({ message: \"Failed to get analytics\" });\n    }\n  });\n\n  // Route protÃ©gÃ©e pour la messagerie avancÃ©e\n  app.post(\"/api/messaging/bulk-send\", requireAuth, requireFeature('messaging'), async (req, res) => {\n    try {\n      const { recipients, message, subject } = req.body;\n      \n      if (!recipients || !Array.isArray(recipients) || recipients.length === 0) {\n        return res.status(400).json({ message: \"Recipients array is required\" });\n      }\n      \n      // Simulation d'envoi en masse\n      const results = {\n        sent: recipients.length,\n        failed: 0,\n        message: \"Messages envoyÃ©s avec succÃ¨s (fonction messagerie avancÃ©e)\"\n      };\n      \n      res.json(results);\n    } catch (error) {\n      console.error(\"Bulk messaging error:\", error);\n      res.status(500).json({ message: \"Failed to send bulk messages\" });\n    }\n  });\n\n  // Get admin dashboard stats\n  app.get(\"/api/admin/stats\", requireAuth, requireAdmin, async (req, res) => {\n    try {\n      const organizations = await storage.getAllOrganizationsForAdmin();\n      const events = await storage.getEvents();\n      \n      const totalOrganizations = organizations.length;\n      const activeOrganizations = organizations.filter(org => org.isActive).length;\n      const inactiveOrganizations = totalOrganizations - activeOrganizations;\n      const totalEvents = events.length;\n      \n      // Get participants count across all events\n      let totalParticipants = 0;\n      for (const event of events) {\n        const participants = await storage.getEventParticipants(event.id);\n        totalParticipants += participants.length;\n      }\n\n      res.json({\n        totalOrganizations,\n        activeOrganizations,\n        inactiveOrganizations,\n        totalEvents,\n        totalParticipants,\n        averageEventsPerOrg: totalOrganizations > 0 ? Math.round(totalEvents / totalOrganizations * 100) / 100 : 0\n      });\n    } catch (error) {\n      console.error(\"Get admin stats error:\", error);\n      res.status(500).json({ message: \"Failed to get admin stats\" });\n    }\n  });\n\n  // Test endpoint pour vÃ©rifier l'authentification JWT\n  app.get(\"/api/auth-test\", requireAuth, (req, res) => {\n    const authReq = req as AuthenticatedRequest;\n    res.json({\n      message: \"JWT Authentication working!\",\n      user: authReq.user,\n      timestamp: new Date().toISOString()\n    });\n  });\n\n  // Health check endpoint (non protÃ©gÃ©)\n  app.get(\"/api/health\", (req, res) => {\n    res.json({\n      status: \"ok\",\n      timestamp: new Date().toISOString(),\n      auth: \"jwt\"\n    });\n  });\n\n  // Newsletter subscription endpoint (public)\n  app.post(\"/api/newsletter/subscribe\", async (req, res) => {\n    try {\n      const { email } = req.body;\n\n      if (!email) {\n        return res.status(400).json({ message: \"Email is required\" });\n      }\n\n      // Validate email format\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n      if (!emailRegex.test(email)) {\n        return res.status(400).json({ message: \"Invalid email format\" });\n      }\n\n      // Send welcome email (optional)\n      try {\n        await emailService.sendCustomEmail(\n          email,\n          \"Bienvenue dans la newsletter TeamMove !\",\n          `Merci de vous Ãªtre inscrit(e) Ã  notre newsletter !\\n\\nVous recevrez dÃ©sormais nos derniÃ¨res actualitÃ©s et nouveautÃ©s concernant TeamMove.\\n\\nÃ€ bientÃ´t !`\n        );\n      } catch (emailError) {\n        console.error(\"Failed to send welcome email:\", emailError);\n        // Don't fail the subscription if email fails\n      }\n\n      res.json({ \n        message: \"Inscription rÃ©ussie ! Vous recevrez bientÃ´t nos actualitÃ©s.\",\n        success: true \n      });\n    } catch (error) {\n      console.error(\"Newsletter subscription error:\", error);\n      res.status(500).json({ message: \"Erreur lors de l'inscription\" });\n    }\n  });\n\n  // Notifications API\n  app.get(\"/api/notifications\", requireAuth, async (req, res) => {\n    try {\n      const authReq = req as AuthenticatedRequest;\n      const notifications = await storage.getNotificationsByOrganization(authReq.user.organizationId);\n      res.json(notifications || []);\n    } catch (error) {\n      console.error(\"Get notifications error:\", error);\n      res.status(500).json({ message: \"Failed to get notifications\" });\n    }\n  });\n\n  app.put(\"/api/notifications/:id/read\", requireAuth, async (req, res) => {\n    try {\n      const authReq = req as AuthenticatedRequest;\n      await storage.markNotificationAsRead(req.params.id, authReq.user.organizationId);\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Mark notification as read error:\", error);\n      res.status(500).json({ message: \"Failed to mark notification as read\" });\n    }\n  });\n\n  app.put(\"/api/notifications/mark-all-read\", requireAuth, async (req, res) => {\n    try {\n      const authReq = req as AuthenticatedRequest;\n      await storage.markAllNotificationsAsRead(authReq.user.organizationId);\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Mark all notifications as read error:\", error);\n      res.status(500).json({ message: \"Failed to mark all notifications as read\" });\n    }\n  });\n\n  app.delete(\"/api/notifications/:id\", requireAuth, async (req, res) => {\n    try {\n      const authReq = req as AuthenticatedRequest;\n      await storage.deleteNotification(req.params.id, authReq.user.organizationId);\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Delete notification error:\", error);\n      res.status(500).json({ message: \"Failed to delete notification\" });\n    }\n  });\n\n  // Broadcast messaging API\n  app.post(\"/api/events/:id/broadcast\", requireAuth, async (req, res) => {\n    try {\n      const { message } = req.body;\n      \n      if (!message || !message.trim()) {\n        return res.status(400).json({ message: \"Message is required\" });\n      }\n\n      const authReq = req as AuthenticatedRequest;\n      const event = await storage.getEvent(req.params.id);\n      \n      if (!event || event.organizationId !== authReq.user.organizationId) {\n        return res.status(404).json({ message: \"Event not found\" });\n      }\n\n      const organization = await storage.getOrganization(event.organizationId);\n      if (!organization) {\n        return res.status(404).json({ message: \"Organization not found\" });\n      }\n\n      // Get all event participants\n      const participants = await storage.getEventParticipants(event.id);\n      const emailPromises = [];\n\n      // Store the broadcast message in database first to get the ID\n      const broadcastMessage = await storage.createMessage({\n        eventId: event.id,\n        content: message,\n        senderName: organization.name,\n        senderEmail: organization.email,\n        isFromOrganizer: true,\n        isBroadcast: true,\n      });\n\n      // Send email to all participants with reply tokens\n      for (const participant of participants) {\n        // Create unique reply token for this participant and message\n        const replyToken = randomUUID();\n        \n        await storage.createEmailReplyToken({\n          token: replyToken,\n          eventId: event.id,\n          participantEmail: participant.email,\n          participantName: participant.name,\n          organizerEmail: organization.email,\n          organizerName: `${organization.contactFirstName} ${organization.contactLastName}`,\n          originalMessage: message,\n          originalMessageId: broadcastMessage.id,\n          expiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000), // 7 days\n        });\n\n        const emailPromise = emailServiceEnhanced.sendBroadcastMessageWithReplyButton(\n          participant.email,\n          participant.name,\n          event.name,\n          organization.name,\n          message,\n          `${organization.contactFirstName} ${organization.contactLastName}`,\n          event.id,\n          replyToken\n        );\n        emailPromises.push(emailPromise);\n      }\n\n      // Send emails in parallel\n      await Promise.all(emailPromises);\n\n      res.json({ \n        message: \"Broadcast message sent successfully\",\n        recipientCount: participants.length \n      });\n    } catch (error) {\n      console.error(\"Broadcast message error:\", error);\n      res.status(500).json({ message: \"Failed to send broadcast message\" });\n    }\n  });\n\n  // Contact form endpoint (public)\n  app.post(\"/api/contact\", async (req, res) => {\n    try {\n      const { name, email, subject, message } = req.body;\n\n      if (!name || !email || !subject || !message) {\n        return res.status(400).json({ \n          message: \"Tous les champs sont requis (nom, email, sujet, message)\" \n        });\n      }\n\n      // Validate email format\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n      if (!emailRegex.test(email)) {\n        return res.status(400).json({ message: \"Format d'email invalide\" });\n      }\n\n      // Send email to support\n      const adminEmail = process.env.ADMIN_EMAIL || process.env.SENDGRID_FROM_EMAIL;\n      if (adminEmail) {\n        try {\n          await emailService.sendCustomEmail(\n            adminEmail,\n            `Nouveau message de contact : ${subject}`,\n            `Nouveau message reÃ§u via le formulaire de contact :\\n\\nDe : ${name} (${email})\\nSujet : ${subject}\\n\\nMessage :\\n${message}\\n\\n---\\nEnvoyÃ© depuis TeamMove`\n          );\n        } catch (emailError) {\n          console.error(\"Failed to send contact email:\", emailError);\n        }\n      }\n\n      res.json({ \n        message: \"Message envoyÃ© avec succÃ¨s ! Nous vous rÃ©pondrons rapidement.\",\n        success: true \n      });\n    } catch (error) {\n      console.error(\"Contact form error:\", error);\n      res.status(500).json({ message: \"Erreur lors de l'envoi du message\" });\n    }\n  });\n\n  // Reply token routes for external messaging\n  // Get reply data from token\n  app.get(\"/api/reply-token/:token\", async (req, res) => {\n    try {\n      const token = req.params.token;\n      \n      if (!token) {\n        return res.status(400).json({ message: \"Token is required\" });\n      }\n\n      const replyTokenData = await storage.getReplyTokenData(token);\n      \n      if (!replyTokenData) {\n        return res.status(404).json({ message: \"Invalid or expired reply token\" });\n      }\n\n      // Get event and organization data\n      const event = await storage.getEvent(replyTokenData.eventId);\n      const organization = await storage.getOrganization(event.organizationId);\n\n      res.json({\n        eventName: event.name,\n        organizerName: organization.name,\n        originalMessage: replyTokenData.originalMessage || \"Message de l'organisateur\",\n        messageDate: new Date(replyTokenData.createdAt).toLocaleDateString('fr-FR'),\n        participantName: replyTokenData.participantName,\n        participantEmail: replyTokenData.participantEmail,\n      });\n    } catch (error) {\n      console.error(\"Get reply token error:\", error);\n      res.status(500).json({ message: \"Failed to get reply token data\" });\n    }\n  });\n\n  // Handle reply message submission\n  app.post(\"/api/reply-message/:token\", async (req, res) => {\n    try {\n      const token = req.params.token;\n      const { content, participantName, participantEmail } = req.body;\n      \n      if (!token || !content || !participantName || !participantEmail) {\n        return res.status(400).json({ \n          message: \"Token, content, participantName, and participantEmail are required\" \n        });\n      }\n\n      // Validate email format\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n      if (!emailRegex.test(participantEmail)) {\n        return res.status(400).json({ message: \"Invalid email format\" });\n      }\n\n      const replyTokenData = await storage.getReplyTokenData(token);\n      \n      if (!replyTokenData) {\n        return res.status(404).json({ message: \"Invalid or expired reply token\" });\n      }\n\n      // Store the reply message\n      const messageData = {\n        eventId: replyTokenData.eventId,\n        content: content.trim(),\n        senderName: participantName.trim(),\n        senderEmail: participantEmail.trim(),\n        isFromOrganizer: false,\n        isBroadcast: false,\n        replyToId: replyTokenData.originalMessageId,\n      };\n\n      const replyMessage = await storage.createMessage(messageData);\n\n      // Get event and organization data for notification\n      const event = await storage.getEvent(replyTokenData.eventId);\n      const organization = await storage.getOrganization(event.organizationId);\n\n      // Send notification to organizer\n      if (organization) {\n        try {\n          await emailServiceEnhanced.sendReplyNotificationToOrganizer(\n            organization.email,\n            `${organization.contactFirstName} ${organization.contactLastName}`,\n            participantName,\n            content,\n            event.name\n          );\n          console.log(`âœ… Notification envoyÃ©e Ã  l'organisateur ${organization.email}`);\n        } catch (emailError) {\n          console.error(\"Failed to send reply notification to organizer:\", emailError);\n        }\n      }\n\n      // Mark reply token as used (optional, depending on your business logic)\n      await storage.markReplyTokenAsUsed(token);\n\n      res.json({ \n        message: \"Reply sent successfully\", \n        replyId: replyMessage.id \n      });\n    } catch (error) {\n      console.error(\"Handle reply message error:\", error);\n      res.status(500).json({ message: \"Failed to process reply\" });\n    }\n  });\n\n  // SEO Endpoints - Sitemap\n  app.get(\"/sitemap.xml\", async (_req, res) => {\n    try {\n      const events = await storage.getEvents();\n      const baseUrl = process.env.APP_URL || \"https://teammove.fr\";\n      \n      let sitemap = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\">\n  <url>\n    <loc>${baseUrl}</loc>\n    <lastmod>${new Date().toISOString().split('T')[0]}</lastmod>\n    <changefreq>daily</changefreq>\n    <priority>1.0</priority>\n  </url>`;\n\n      // Add public event pages\n      for (const event of events) {\n        if (event.date && event.date > new Date()) { // Only future events\n          sitemap += `\n  <url>\n    <loc>${baseUrl}/events/${event.id}</loc>\n    <lastmod>${event.updatedAt?.toISOString().split('T')[0] || event.createdAt.toISOString().split('T')[0]}</lastmod>\n    <changefreq>weekly</changefreq>\n    <priority>0.8</priority>\n  </url>`;\n        }\n      }\n\n      sitemap += `\n</urlset>`;\n\n      res.set('Content-Type', 'application/xml');\n      res.send(sitemap);\n    } catch (error) {\n      console.error(\"Sitemap generation error:\", error);\n      res.status(500).send(\"Internal Server Error\");\n    }\n  });\n\n  // ========== SUBSCRIPTION & BILLING ROUTES (MODERNIZED) ==========\n  // Import new subscription services (SubscriptionService already imported and initialized at startup)\n  const { StripeService } = await import('./stripe-service');\n  const { EmailService } = await import('./email-service');\n  const { SchedulerService } = await import('./scheduler-service');\n  const { SUBSCRIPTION_PLANS, NEW_SUBSCRIPTION_LIMITS } = await import('./subscription-config');\n  \n  // Initialize additional services (SubscriptionService already initialized at startup)\n  await SchedulerService.initialize();\n  \n  // Import theme services\n  const { \n    getUserPreferences, \n    updateUserPreferences, \n    resetUserPreferences \n  } = await import('./theme');\n  \n  // Import notification services\n  const { \n    createNotification,\n    getOrganizationNotifications,\n    getUnreadNotifications,\n    getUnreadNotificationCount,\n    markNotificationAsRead,\n    markAllNotificationsAsRead,\n    deleteNotification,\n    createSystemNotification,\n    NotificationTemplates\n  } = await import('./notifications');\n  \n  // Import admin communication services\n  const {\n    createConversation,\n    sendMessage,\n    getOrganizationConversations,\n    getConversationMessages,\n    markMessagesAsRead,\n    closeConversation,\n    getAllConversationsForAdmin\n  } = await import('./admin-communication');\n\n  // Services are already initialized above\n\n  // Get subscription info for an organization\n  app.get(\"/api/subscription/info\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      const organization = await storage.getOrganization(req.user.organizationId);\n      if (!organization) {\n        return res.status(404).json({ message: \"Organisation not found\" });\n      }\n\n      const subscriptionInfo = await SubscriptionService.getSubscriptionInfo(req.user.organizationId);\n      res.json(subscriptionInfo);\n    } catch (error) {\n      console.error(\"Subscription info error:\", error);\n      res.status(500).json({ message: \"Failed to get subscription info\" });\n    }\n  });\n\n  // Check if organization can create event\n  app.get(\"/api/subscription/can-create-event\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      const result = await canCreateEvent(req.user.organizationId);\n      res.json(result);\n    } catch (error) {\n      console.error(\"Can create event check error:\", error);\n      res.status(500).json({ message: \"Failed to check event creation permission\" });\n    }\n  });\n\n  // Check if organization can send invitations\n  app.post(\"/api/subscription/can-send-invitations\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      const { count } = req.body;\n      if (!count || count <= 0) {\n        return res.status(400).json({ message: \"Invalid invitation count\" });\n      }\n      \n      const result = await canSendInvitations(req.user.organizationId, count);\n      res.json(result);\n    } catch (error) {\n      console.error(\"Can send invitations check error:\", error);\n      res.status(500).json({ message: \"Failed to check invitation permission\" });\n    }\n  });\n\n  // Create Stripe customer\n  app.post(\"/api/subscription/create-customer\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      const customer = await createStripeCustomer(req.user.organizationId);\n      res.json({ customerId: customer.id });\n    } catch (error) {\n      console.error(\"Create Stripe customer error:\", error);\n      res.status(500).json({ message: \"Failed to create Stripe customer\" });\n    }\n  });\n\n  // Upgrade subscription - LEGACY ENDPOINT (keep for compatibility)\n  app.post(\"/api/subscription/upgrade\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      const { billingInterval, paymentMethodId, planId } = req.body;\n      \n      if (!planId && (!billingInterval || !paymentMethodId)) {\n        return res.status(400).json({ message: \"Plan ID or billing details are required\" });\n      }\n\n      // Support both new plan-based and legacy billing-based upgrades\n      if (planId) {\n        const baseUrl = process.env.APP_URL || 'http://localhost:3000';\n        \n        const result = await SubscriptionService.createSubscription({\n          organizationId: req.user.organizationId,\n          planId,\n          successUrl: `${baseUrl}/dashboard?payment=success&session_id={CHECKOUT_SESSION_ID}`,\n          cancelUrl: `${baseUrl}/dashboard?payment=cancelled`,\n        });\n\n        res.json(result);\n      } else {\n        // Legacy flow - redirect to new system\n        return res.status(400).json({ \n          message: \"Legacy upgrade method deprecated. Use /api/subscriptions/create with planId instead.\",\n          availablePlans: Object.keys(SUBSCRIPTION_PLANS)\n        });\n      }\n    } catch (error) {\n      console.error(\"Subscription upgrade error:\", error);\n      res.status(500).json({ message: \"Failed to upgrade subscription\" });\n    }\n  });\n\n  // Cancel subscription\n  app.post(\"/api/subscription/cancel\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      const result = await cancelSubscription(req.user.organizationId);\n      \n      // Create notification\n      await createNotification({\n        organizationId: req.user.organizationId,\n        ...NotificationTemplates.SUBSCRIPTION_CANCELLED(),\n        sendEmail: true,\n      });\n\n      res.json(result);\n    } catch (error) {\n      console.error(\"Subscription cancellation error:\", error);\n      res.status(500).json({ message: \"Failed to cancel subscription\" });\n    }\n  });\n\n  // ========== USER PREFERENCES & THEME ROUTES ==========\n\n  // Get user preferences\n  app.get(\"/api/preferences\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      const preferences = await getUserPreferences(req.user.organizationId);\n      res.json(preferences);\n    } catch (error) {\n      console.error(\"Get preferences error:\", error);\n      res.status(500).json({ message: \"Failed to get user preferences\" });\n    }\n  });\n\n  // ========== NEW SUBSCRIPTION ROUTES (MODERNIZED) ==========\n  \n  // Get available subscription plans\n  app.get(\"/api/subscription/plans\", async (req, res) => {\n    try {\n      res.json({\n        plans: SUBSCRIPTION_PLANS,\n        stripeMode: StripeService.isTestMode() ? 'test' : 'production'\n      });\n    } catch (error) {\n      console.error(\"Plans fetch error:\", error);\n      res.status(500).json({ message: \"Failed to fetch subscription plans\" });\n    }\n  });\n\n  // Create subscription (for new purchases or upgrades) - NEW ENDPOINT\n  app.post(\"/api/subscriptions/create\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      console.log('ğŸ¯ Nouvelle demande de crÃ©ation de session de paiement');\n      console.log('ğŸ‘¤ OrganizationId:', req.user.organizationId);\n      console.log('ğŸ“¦ Body:', req.body);\n      \n      const { planId, successUrl, cancelUrl } = req.body;\n      \n      if (!planId) {\n        console.log('âŒ Plan ID manquant');\n        return res.status(400).json({ message: \"Plan ID is required\" });\n      }\n\n      const baseUrl = process.env.APP_URL || 'http://localhost:3000';\n      console.log('ğŸŒ Base URL:', baseUrl);\n      \n      const subscriptionParams = {\n        organizationId: req.user.organizationId,\n        planId,\n        successUrl: successUrl || `${baseUrl}/dashboard?payment=success&session_id={CHECKOUT_SESSION_ID}`,\n        cancelUrl: cancelUrl || `${baseUrl}/dashboard?payment=cancelled`,\n      };\n      \n      console.log('ğŸ“‹ ParamÃ¨tres de crÃ©ation:', subscriptionParams);\n      \n      const result = await SubscriptionService.createSubscription(subscriptionParams);\n      \n      console.log('âœ… RÃ©sultat de crÃ©ation:', result);\n      res.json(result);\n    } catch (error) {\n      console.error(\"âŒ Erreur de crÃ©ation d'abonnement:\", error);\n      \n      // Retourner des dÃ©tails d'erreur plus spÃ©cifiques en dÃ©veloppement\n      const isDev = process.env.NODE_ENV === 'development';\n      const errorResponse = {\n        message: \"Failed to create subscription\",\n        ...(isDev && { \n          error: error instanceof Error ? error.message : String(error),\n          stack: error instanceof Error ? error.stack : undefined\n        })\n      };\n      \n      res.status(500).json(errorResponse);\n    }\n  });\n\n  // Create subscription (for new purchases or upgrades) - LEGACY ENDPOINT\n  app.post(\"/api/subscription/create\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      const { planId, paymentMethodId } = req.body;\n      \n      if (!planId) {\n        return res.status(400).json({ message: \"Plan ID is required\" });\n      }\n\n      const baseUrl = process.env.APP_URL || 'http://localhost:3000';\n      \n      const result = await SubscriptionService.createSubscription({\n        organizationId: req.user.organizationId,\n        planId,\n        paymentMethodId,\n        successUrl: `${baseUrl}/dashboard?payment=success&session_id={CHECKOUT_SESSION_ID}`,\n        cancelUrl: `${baseUrl}/pricing?payment=cancelled`,\n      });\n\n      res.json(result);\n    } catch (error) {\n      console.error(\"Subscription creation error:\", error);\n      res.status(500).json({ message: \"Failed to create subscription\" });\n    }\n  });\n\n  // Upgrade subscription (from DÃ©couverte to paid plan)\n  app.post(\"/api/subscription/upgrade-from-decouverte\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      const { planId } = req.body;\n      \n      if (!planId) {\n        return res.status(400).json({ message: \"Plan ID is required\" });\n      }\n\n      const baseUrl = process.env.APP_URL || 'http://localhost:3000';\n      \n      const result = await SubscriptionService.upgradeSubscription({\n        organizationId: req.user.organizationId,\n        newPlanId: planId,\n        successUrl: `${baseUrl}/dashboard?upgrade=success&session_id={CHECKOUT_SESSION_ID}`,\n        cancelUrl: `${baseUrl}/dashboard?upgrade=cancelled`,\n      });\n\n      res.json(result);\n    } catch (error) {\n      console.error(\"Subscription upgrade error:\", error);\n      res.status(500).json({ message: \"Failed to upgrade subscription\" });\n    }\n  });\n\n  // Handle successful payment from Stripe redirect\n  app.get(\"/api/subscriptions/success\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      const { session_id } = req.query;\n      \n      if (!session_id) {\n        return res.status(400).json({ message: \"Session ID is required\" });\n      }\n\n      // RÃ©cupÃ©rer la session Stripe\n      const session = await StripeService.getSession(session_id as string);\n      \n      if (!session) {\n        return res.status(404).json({ message: \"Session not found\" });\n      }\n\n      // VÃ©rifier que la session appartient Ã  cette organisation\n      const organizationId = session.metadata?.organizationId;\n      if (organizationId !== req.user.organizationId) {\n        return res.status(403).json({ message: \"Unauthorized session access\" });\n      }\n\n      // Si le paiement est rÃ©ussi, traiter l'activation\n      if (session.payment_status === 'paid') {\n        const planId = session.metadata?.planId;\n        if (planId) {\n          await SubscriptionService.handlePaymentSuccess(session_id as string, organizationId, planId);\n        }\n      }\n\n      res.json({\n        success: true,\n        payment_status: session.payment_status,\n        subscription_status: session.subscription?.status,\n        message: \"Payment processed successfully\"\n      });\n    } catch (error) {\n      console.error(\"Payment success handling error:\", error);\n      res.status(500).json({ message: \"Failed to process payment success\" });\n    }\n  });\n\n  // Cancel subscription (downgrade to DÃ©couverte)\n  app.post(\"/api/subscription/cancel-to-decouverte\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      await SubscriptionService.cancelSubscription(req.user.organizationId);\n      \n      res.json({ \n        success: true, \n        message: \"Abonnement annulÃ© et rÃ©trogradation vers l'offre DÃ©couverte effectuÃ©e.\"\n      });\n    } catch (error) {\n      console.error(\"Subscription cancellation error:\", error);\n      res.status(500).json({ message: \"Failed to cancel subscription\" });\n    }\n  });\n\n  // Webhook Stripe (MODERNIZED)\n  app.post(\"/api/stripe/webhook-v2\", express.raw({ type: 'application/json' }), async (req, res) => {\n    try {\n      const signature = req.get('stripe-signature');\n      if (!signature) {\n        return res.status(400).send('Signature manquante');\n      }\n\n      await StripeService.handleWebhook(req.body, signature);\n      res.json({ received: true });\n    } catch (error: any) {\n      console.error('Erreur webhook Stripe:', error);\n      res.status(400).send(`Webhook Error: ${error.message}`);\n    }\n  });\n\n  // Get Stripe configuration for frontend\n  app.get(\"/api/stripe/config\", async (req, res) => {\n    try {\n      const config = await StripeService.verifyConfiguration();\n      res.json({\n        publishableKey: StripeService.getPublishableKey(),\n        mode: config.mode,\n        valid: config.valid\n      });\n    } catch (error) {\n      console.error(\"Stripe config error:\", error);\n      res.status(500).json({ message: \"Failed to get Stripe configuration\" });\n    }\n  });\n\n  // TEST ROUTE: Serve test page\n  app.get(\"/test-stripe\", (req, res) => {\n    res.sendFile(path.join(__dirname, '../test-stripe-integration.html'));\n  });\n\n  // TEST ROUTE: Simple checkout session creation (for testing)\n  app.post(\"/api/create-checkout-session-test\", async (req, res) => {\n    try {\n      const YOUR_DOMAIN = process.env.APP_URL || 'http://localhost:3000';\n      \n      const session = await StripeService.createCheckoutSession({\n        mode: 'payment',\n        priceData: {\n          currency: 'eur',\n          product_data: {\n            name: 'Pack Ã‰vÃ©nement TeamMove (Test)',\n            description: 'Un Ã©vÃ©nement sportif avec covoiturage organisÃ© - Mode Test',\n          },\n          unit_amount: 1500, // 15â‚¬ en centimes\n        },\n        quantity: 1,\n        successUrl: `${YOUR_DOMAIN}/test-stripe?success=true`,\n        cancelUrl: `${YOUR_DOMAIN}/test-stripe?canceled=true`,\n        metadata: {\n          organizationId: 'test-org-id',\n          planId: 'test-event-pack',\n          planType: 'evenementielle',\n        },\n      });\n\n      // Nouvelle approche : rediriger directement vers l'URL Stripe\n      if (session.url) {\n        res.redirect(303, session.url);\n      } else {\n        res.status(500).json({ error: 'No checkout URL generated' });\n      }\n    } catch (error) {\n      console.error('Test checkout session error:', error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Admin: Force run scheduler tasks\n  app.post(\"/api/admin/scheduler/run\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      // VÃ©rifier que c'est un admin\n      const organization = await storage.getOrganization(req.user.organizationId);\n      if (!organization || organization.role !== 'admin') {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n\n      const { taskName } = req.body;\n      if (!taskName) {\n        return res.status(400).json({ message: \"Task name required\" });\n      }\n\n      await SchedulerService.runTaskNow(taskName);\n      res.json({ success: true, message: `Task ${taskName} executed successfully` });\n    } catch (error) {\n      console.error(\"Scheduler task error:\", error);\n      res.status(500).json({ message: \"Failed to run scheduler task\" });\n    }\n  });\n\n  // Get scheduler status\n  app.get(\"/api/admin/scheduler/status\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      const organization = await storage.getOrganization(req.user.organizationId);\n      if (!organization || organization.role !== 'admin') {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n\n      const status = SchedulerService.getStatus();\n      res.json(status);\n    } catch (error) {\n      console.error(\"Scheduler status error:\", error);\n      res.status(500).json({ message: \"Failed to get scheduler status\" });\n    }\n  });\n\n  // ========== THEME & PREFERENCES ROUTES ==========\n  \n  // Update user preferences\n  app.put(\"/api/preferences\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      const { theme, language, emailNotifications, pushNotifications, marketingEmails } = req.body;\n      \n      const result = await updateUserPreferences(req.user.organizationId, {\n        theme,\n        language,\n        emailNotifications,\n        pushNotifications,\n        marketingEmails,\n      });\n\n      res.json(result);\n    } catch (error) {\n      console.error(\"Update preferences error:\", error);\n      res.status(500).json({ message: \"Failed to update user preferences\" });\n    }\n  });\n\n  // Reset user preferences\n  app.post(\"/api/preferences/reset\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      const result = await resetUserPreferences(req.user.organizationId);\n      res.json(result);\n    } catch (error) {\n      console.error(\"Reset preferences error:\", error);\n      res.status(500).json({ message: \"Failed to reset user preferences\" });\n    }\n  });\n\n  // ========== ENHANCED NOTIFICATIONS ROUTES ==========\n\n  // Get notifications for organization\n  app.get(\"/api/notifications\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      const limit = parseInt(req.query.limit as string) || 50;\n      const offset = parseInt(req.query.offset as string) || 0;\n      \n      const notifications = await getOrganizationNotifications(req.user.organizationId, limit, offset);\n      const unreadCount = await getUnreadNotificationCount(req.user.organizationId);\n      \n      res.json({ notifications, unreadCount });\n    } catch (error) {\n      console.error(\"Get notifications error:\", error);\n      res.status(500).json({ message: \"Failed to get notifications\" });\n    }\n  });\n\n  // Get unread notifications count\n  app.get(\"/api/notifications/unread-count\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      const count = await getUnreadNotificationCount(req.user.organizationId);\n      res.json({ count });\n    } catch (error) {\n      console.error(\"Get unread count error:\", error);\n      res.status(500).json({ message: \"Failed to get unread count\" });\n    }\n  });\n\n  // Mark notification as read\n  app.put(\"/api/notifications/:id/read\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      const { id } = req.params;\n      const result = await markNotificationAsRead(id, req.user.organizationId);\n      \n      if (!result) {\n        return res.status(404).json({ message: \"Notification not found\" });\n      }\n      \n      res.json(result);\n    } catch (error) {\n      console.error(\"Mark notification as read error:\", error);\n      res.status(500).json({ message: \"Failed to mark notification as read\" });\n    }\n  });\n\n  // Mark all notifications as read\n  app.put(\"/api/notifications/read-all\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      const result = await markAllNotificationsAsRead(req.user.organizationId);\n      res.json(result);\n    } catch (error) {\n      console.error(\"Mark all notifications as read error:\", error);\n      res.status(500).json({ message: \"Failed to mark all notifications as read\" });\n    }\n  });\n\n  // Delete notification\n  app.delete(\"/api/notifications/:id\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      const { id } = req.params;\n      const result = await deleteNotification(id, req.user.organizationId);\n      \n      if (!result) {\n        return res.status(404).json({ message: \"Notification not found\" });\n      }\n      \n      res.json(result);\n    } catch (error) {\n      console.error(\"Delete notification error:\", error);\n      res.status(500).json({ message: \"Failed to delete notification\" });\n    }\n  });\n\n  // ========== ADMIN COMMUNICATION ROUTES ==========\n\n  // Create conversation with admin\n  app.post(\"/api/admin/conversations\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      const { subject, message, priority, organizationId } = req.body;\n      \n      if (!subject || !message) {\n        return res.status(400).json({ message: \"Subject and message are required\" });\n      }\n\n      const organization = await storage.getOrganization(req.user.organizationId);\n      if (!organization) {\n        return res.status(404).json({ message: \"Organization not found\" });\n      }\n\n      let targetOrgId = req.user.organizationId;\n\n      // Si l'utilisateur est admin et a spÃ©cifiÃ© une organisation cible\n      if (organization.role === 'admin' && organizationId) {\n        targetOrgId = organizationId;\n      }\n\n      const conversation = await createConversation({\n        organizationId: targetOrgId,\n        subject,\n        message,\n        priority,\n      });\n\n      // Enrichir la rÃ©ponse avec les messages pour l'interface\n      const messages = await getConversationMessages(conversation.id);\n      \n      res.json({ conversation: { ...conversation, messages } });\n    } catch (error) {\n      console.error(\"Create conversation error:\", error);\n      res.status(500).json({ message: \"Failed to create conversation\" });\n    }\n  });\n\n  // Get conversations (for both admin and organizations)\n  app.get(\"/api/admin/conversations\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      const organization = await storage.getOrganization(req.user.organizationId);\n      if (!organization) {\n        return res.status(404).json({ message: \"Organization not found\" });\n      }\n\n      let conversations;\n      \n      if (organization.role === 'admin') {\n        // Admin voit toutes les conversations avec plus de dÃ©tails\n        const allConversations = await getAllConversationsForAdmin();\n        \n        // Enrichir avec le nombre de messages non lus et les messages\n        conversations = await Promise.all(allConversations.map(async (conv) => {\n          const messages = await getConversationMessages(conv.id);\n          const unreadCount = messages.filter(msg => !msg.read && msg.senderType === 'organization').length;\n          \n          return {\n            ...conv,\n            unreadCount,\n            messages\n          };\n        }));\n      } else {\n        // Organisation voit ses propres conversations\n        const orgConversations = await getOrganizationConversations(req.user.organizationId);\n        \n        // Enrichir avec le nombre de messages non lus et les messages\n        conversations = await Promise.all(orgConversations.map(async (conv) => {\n          const messages = await getConversationMessages(conv.id, req.user.organizationId);\n          const unreadCount = messages.filter(msg => !msg.read && msg.senderType === 'admin').length;\n          \n          return {\n            ...conv,\n            organizationName: organization.name,\n            organizationEmail: organization.email,\n            unreadCount,\n            messages\n          };\n        }));\n      }\n      \n      res.json(conversations);\n    } catch (error) {\n      console.error(\"Get conversations error:\", error);\n      res.status(500).json({ message: \"Failed to get conversations\" });\n    }\n  });\n\n  // Get conversation messages\n  app.get(\"/api/admin/conversations/:id/messages\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      const { id } = req.params;\n      const messages = await getConversationMessages(id, req.user.organizationId);\n      \n      // Mark messages as read\n      await markMessagesAsRead(id, req.user.organizationId, 'organization');\n      \n      res.json(messages);\n    } catch (error) {\n      console.error(\"Get conversation messages error:\", error);\n      res.status(500).json({ message: \"Failed to get conversation messages\" });\n    }\n  });\n\n  // Send message in conversation\n  app.post(\"/api/admin/conversations/:id/messages\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      const { id } = req.params;\n      const { message } = req.body;\n      \n      if (!message) {\n        return res.status(400).json({ message: \"Message is required\" });\n      }\n\n      const organization = await storage.getOrganization(req.user.organizationId);\n      if (!organization) {\n        return res.status(404).json({ message: \"Organization not found\" });\n      }\n\n      const senderType = organization.role === 'admin' ? 'admin' : 'organization';\n\n      const result = await sendMessage({\n        conversationId: id,\n        senderId: req.user.organizationId,\n        senderType,\n        message,\n      });\n\n      res.json(result);\n    } catch (error) {\n      console.error(\"Send message error:\", error);\n      res.status(500).json({ message: \"Failed to send message\" });\n    }\n  });\n\n  // Mark conversation messages as read\n  app.post(\"/api/admin/conversations/:id/mark-read\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      const { id } = req.params;\n      \n      const organization = await storage.getOrganization(req.user.organizationId);\n      if (!organization) {\n        return res.status(404).json({ message: \"Organization not found\" });\n      }\n\n      const userType = organization.role === 'admin' ? 'admin' : 'organization';\n\n      await markMessagesAsRead(id, req.user.organizationId, userType);\n      \n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Mark messages as read error:\", error);\n      res.status(500).json({ message: \"Failed to mark messages as read\" });\n    }\n  });\n\n  // Close conversation\n  app.put(\"/api/admin/conversations/:id/close\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      const { id } = req.params;\n      const result = await closeConversation(id, 'organization');\n      res.json(result);\n    } catch (error) {\n      console.error(\"Close conversation error:\", error);\n      res.status(500).json({ message: \"Failed to close conversation\" });\n    }\n  });\n\n  // ========== ADMIN ONLY ROUTES ==========\n\n  // Get all conversations for admin\n  app.get(\"/api/admin/all-conversations\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      // Check if user is admin\n      const organization = await storage.getOrganization(req.user.organizationId);\n      if (!organization || organization.role !== 'admin') {\n        return res.status(403).json({ message: \"Admin access required\" });\n      }\n\n      const conversations = await getAllConversationsForAdmin();\n      res.json(conversations);\n    } catch (error) {\n      console.error(\"Get all conversations error:\", error);\n      res.status(500).json({ message: \"Failed to get all conversations\" });\n    }\n  });\n\n  // Send admin message\n  app.post(\"/api/admin/conversations/:id/admin-message\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      // Check if user is admin\n      const organization = await storage.getOrganization(req.user.organizationId);\n      if (!organization || organization.role !== 'admin') {\n        return res.status(403).json({ message: \"Admin access required\" });\n      }\n\n      const { id } = req.params;\n      const { message } = req.body;\n      \n      if (!message) {\n        return res.status(400).json({ message: \"Message is required\" });\n      }\n\n      const result = await sendMessage({\n        conversationId: id,\n        senderId: req.user.organizationId,\n        senderType: 'admin',\n        message,\n      });\n\n      res.json(result);\n    } catch (error) {\n      console.error(\"Send admin message error:\", error);\n      res.status(500).json({ message: \"Failed to send admin message\" });\n    }\n  });\n\n  // Create system notification (admin only)\n  app.post(\"/api/admin/system-notification\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      // Check if user is admin\n      const organization = await storage.getOrganization(req.user.organizationId);\n      if (!organization || organization.role !== 'admin') {\n        return res.status(403).json({ message: \"Admin access required\" });\n      }\n\n      const { type, title, message, sendEmail } = req.body;\n      \n      if (!type || !title || !message) {\n        return res.status(400).json({ message: \"Type, title and message are required\" });\n      }\n\n      const result = await createSystemNotification({\n        type,\n        title,\n        message,\n        sendEmail,\n      });\n\n      res.json(result);\n    } catch (error) {\n      console.error(\"Create system notification error:\", error);\n      res.status(500).json({ message: \"Failed to create system notification\" });\n    }\n  });\n\n  // ========================\n  // STRIPE PAYMENT ROUTES\n  // ========================\n  \n  // CrÃ©er une session de checkout Stripe\n  app.post(\"/api/stripe/create-checkout-session\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      const { planId, interval } = req.body;\n      \n      if (!planId || !interval) {\n        return res.status(400).json({ error: \"Plan ID et interval requis\" });\n      }\n\n      const organization = await storage.getOrganization(req.user.organizationId);\n      if (!organization) {\n        return res.status(404).json({ error: \"Organisation non trouvÃ©e\" });\n      }\n\n      const { StripeService } = await import('./stripe');\n      \n      const baseUrl = process.env.APP_URL || 'http://localhost:3000';\n      const result = await StripeService.createCheckoutSession({\n        priceId: `price_${planId}`, // On construira l'ID Stripe\n        planId,\n        interval,\n        organizationId: organization.id,\n        organizationEmail: organization.email,\n        successUrl: `${baseUrl}/dashboard?payment=success&session_id={CHECKOUT_SESSION_ID}`,\n        cancelUrl: `${baseUrl}/dashboard?payment=cancelled`,\n      });\n\n      res.json(result);\n    } catch (error: any) {\n      console.error(\"Erreur crÃ©ation session checkout:\", error);\n      res.status(500).json({ error: error.message || \"Erreur lors de la crÃ©ation de la session de paiement\" });\n    }\n  });\n\n  // Webhook Stripe\n  app.post(\"/api/stripe/webhook\", express.raw({ type: 'application/json' }), async (req, res) => {\n    try {\n      const signature = req.get('stripe-signature');\n      if (!signature) {\n        return res.status(400).send('Signature manquante');\n      }\n\n      const { StripeService } = await import('./stripe');\n      await StripeService.handleWebhook(req.body, signature);\n\n      res.json({ received: true });\n    } catch (error: any) {\n      console.error('Erreur webhook Stripe:', error);\n      res.status(400).send(`Webhook Error: ${error.message}`);\n    }\n  });\n\n  // CrÃ©er un portail client Stripe\n  app.post(\"/api/stripe/create-portal-session\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      const organization = await storage.getOrganization(req.user.organizationId);\n      if (!organization || !organization.stripeCustomerId) {\n        return res.status(400).json({ error: \"Aucun customer Stripe associÃ©\" });\n      }\n\n      const { StripeService } = await import('./stripe');\n      const baseUrl = process.env.APP_URL || 'http://localhost:3000';\n      \n      const result = await StripeService.createCustomerPortal(\n        organization.stripeCustomerId,\n        `${baseUrl}/dashboard`\n      );\n\n      res.json(result);\n    } catch (error: any) {\n      console.error(\"Erreur crÃ©ation portail client:\", error);\n      res.status(500).json({ error: error.message || \"Erreur lors de la crÃ©ation du portail client\" });\n    }\n  });\n\n  // RÃ©cupÃ©rer les informations d'abonnement\n  app.get(\"/api/stripe/subscription-info\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      const organization = await storage.getOrganization(req.user.organizationId);\n      if (!organization) {\n        return res.status(404).json({ error: \"Organisation non trouvÃ©e\" });\n      }\n\n      if (!organization.stripeSubscriptionId) {\n        return res.json({ \n          hasSubscription: false,\n          subscriptionType: organization.subscriptionType || 'decouverte',\n          subscriptionStatus: 'inactive'\n        });\n      }\n\n      const { StripeService } = await import('./stripe');\n      const subscription = await StripeService.getSubscription(organization.stripeSubscriptionId);\n\n      res.json({\n        hasSubscription: true,\n        subscriptionType: organization.subscriptionType,\n        subscriptionStatus: subscription.status,\n        currentPeriodEnd: subscription.current_period_end,\n        cancelAtPeriodEnd: subscription.cancel_at_period_end,\n        stripeSubscription: subscription,\n      });\n    } catch (error: any) {\n      console.error(\"Erreur rÃ©cupÃ©ration info abonnement:\", error);\n      res.status(500).json({ error: error.message || \"Erreur lors de la rÃ©cupÃ©ration des informations d'abonnement\" });\n    }\n  });\n\n  // Annuler un abonnement\n  app.post(\"/api/stripe/cancel-subscription\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      const organization = await storage.getOrganization(req.user.organizationId);\n      if (!organization || !organization.stripeSubscriptionId) {\n        return res.status(400).json({ error: \"Aucun abonnement trouvÃ©\" });\n      }\n\n      const { StripeService } = await import('./stripe');\n      const subscription = await StripeService.cancelSubscription(organization.stripeSubscriptionId);\n\n      res.json({\n        success: true,\n        subscription: subscription,\n        message: \"Abonnement programmÃ© pour annulation Ã  la fin de la pÃ©riode de facturation\"\n      });\n    } catch (error: any) {\n      console.error(\"Erreur annulation abonnement:\", error);\n      res.status(500).json({ error: error.message || \"Erreur lors de l'annulation de l'abonnement\" });\n    }\n  });\n\n  // RÃ©cupÃ©rer les limites d'abonnement\n  app.get(\"/api/subscription/limits\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      const limits = await storage.getSubscriptionLimits(req.user.organizationId);\n      res.json(limits);\n    } catch (error: any) {\n      console.error(\"Erreur rÃ©cupÃ©ration limites:\", error);\n      res.status(500).json({ error: error.message || \"Erreur lors de la rÃ©cupÃ©ration des limites\" });\n    }\n  });\n\n  // ========== MODERN STRIPE CHECKOUT ROUTES ==========\n\n  // Create Payment Intent for Stripe Elements\n  app.post(\"/api/stripe/create-payment-intent\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      const { planId, amount, currency = 'eur' } = req.body;\n\n      if (!planId || !amount) {\n        return res.status(400).json({ message: \"Plan ID and amount are required\" });\n      }\n\n      const organization = await storage.getOrganization(req.user.organizationId);\n      if (!organization) {\n        return res.status(404).json({ message: \"Organization not found\" });\n      }\n\n      // Find or create Stripe customer\n      const customer = await StripeService.findOrCreateCustomer(\n        organization.id,\n        organization.email,\n        organization.name\n      );\n\n      // Create payment intent\n      const paymentIntent = await stripe.paymentIntents.create({\n        amount: amount,\n        currency: currency,\n        customer: customer.id,\n        automatic_payment_methods: {\n          enabled: true,\n        },\n        metadata: {\n          organizationId: organization.id,\n          planId: planId,\n          planType: planId,\n        },\n        description: `TeamMove - Plan ${planId}`,\n      });\n\n      res.json({\n        client_secret: paymentIntent.client_secret,\n        customer_id: customer.id,\n      });\n    } catch (error: any) {\n      console.error(\"Create payment intent error:\", error);\n      res.status(500).json({ message: \"Failed to create payment intent\" });\n    }\n  });\n\n  // Create Stripe Checkout Session (for redirect-based flow)\n  app.post(\"/api/stripe/create-checkout-session\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      const { planId, successUrl, cancelUrl } = req.body;\n\n      if (!planId) {\n        return res.status(400).json({ message: \"Plan ID is required\" });\n      }\n\n      const organization = await storage.getOrganization(req.user.organizationId);\n      if (!organization) {\n        return res.status(404).json({ message: \"Organization not found\" });\n      }\n\n      const plan = SUBSCRIPTION_PLANS[planId];\n      if (!plan) {\n        return res.status(400).json({ message: \"Invalid plan ID\" });\n      }\n\n      // Configuration de base pour la session\n      const baseUrl = process.env.APP_URL || 'http://localhost:3000';\n      const sessionConfig = {\n        mode: plan.billingInterval === 'monthly' || plan.billingInterval === 'annual' ? 'subscription' : 'payment',\n        priceData: {\n          currency: plan.currency.toLowerCase(),\n          product_data: {\n            name: plan.name,\n            description: plan.description,\n          },\n          unit_amount: plan.price,\n          ...(plan.billingInterval === 'monthly' || plan.billingInterval === 'annual' ? {\n            recurring: {\n              interval: plan.billingInterval === 'monthly' ? 'month' : 'year',\n            }\n          } : {})\n        },\n        quantity: 1,\n        successUrl: successUrl || `${baseUrl}/dashboard?payment=success&session_id={CHECKOUT_SESSION_ID}`,\n        cancelUrl: cancelUrl || `${baseUrl}/dashboard/subscription?payment=cancelled`,\n        metadata: {\n          organizationId: organization.id,\n          planId: planId,\n          planType: plan.type,\n        },\n        customerEmail: organization.email,\n      };\n\n      const session = await StripeService.createCheckoutSession(sessionConfig);\n\n      res.json({\n        sessionId: session.id,\n        url: `https://checkout.stripe.com/pay/${session.id}`,\n      });\n    } catch (error: any) {\n      console.error(\"Create checkout session error:\", error);\n      res.status(500).json({ message: \"Failed to create checkout session\" });\n    }\n  });\n\n  // Handle successful payment (webhook alternative)\n  app.post(\"/api/stripe/payment-success\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      const { paymentIntentId } = req.body;\n\n      if (!paymentIntentId) {\n        return res.status(400).json({ message: \"Payment Intent ID is required\" });\n      }\n\n      // RÃ©cupÃ©rer le Payment Intent depuis Stripe\n      const paymentIntent = await stripe.paymentIntents.retrieve(paymentIntentId);\n\n      if (paymentIntent.status !== 'succeeded') {\n        return res.status(400).json({ message: \"Payment not completed\" });\n      }\n\n      const organizationId = paymentIntent.metadata?.organizationId;\n      const planId = paymentIntent.metadata?.planId;\n\n      if (!organizationId || !planId || organizationId !== req.user.organizationId) {\n        return res.status(400).json({ message: \"Invalid payment metadata\" });\n      }\n\n      // Activer l'abonnement\n      await SubscriptionService.handlePaymentSuccess(paymentIntentId, organizationId, planId);\n\n      // CrÃ©er une notification\n      await createNotification({\n        organizationId: organizationId,\n        ...NotificationTemplates.SUBSCRIPTION_UPGRADED(SUBSCRIPTION_PLANS[planId].name),\n        sendEmail: true,\n      });\n\n      res.json({\n        success: true,\n        message: \"Payment processed and subscription activated\",\n      });\n    } catch (error: any) {\n      console.error(\"Payment success handling error:\", error);\n      res.status(500).json({ message: \"Failed to process payment success\" });\n    }\n  });\n\n  // Get Stripe public key for frontend\n  app.get(\"/api/stripe/public-key\", async (req, res) => {\n    try {\n      res.json({\n        publicKey: StripeService.getPublishableKey(),\n        mode: StripeService.isTestMode() ? 'test' : 'production',\n      });\n    } catch (error) {\n      console.error(\"Get Stripe public key error:\", error);\n      res.status(500).json({ message: \"Failed to get Stripe configuration\" });\n    }\n  });\n\n  // Create customer portal session (for subscription management)\n  app.post(\"/api/stripe/customer-portal\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      const organization = await storage.getOrganization(req.user.organizationId);\n      if (!organization) {\n        return res.status(404).json({ message: \"Organization not found\" });\n      }\n\n      // Trouve le customer Stripe\n      const customer = await StripeService.findOrCreateCustomer(\n        organization.id,\n        organization.email,\n        organization.name\n      );\n\n      const baseUrl = process.env.APP_URL || 'http://localhost:3000';\n      const portalSession = await StripeService.createCustomerPortal(\n        customer.id,\n        `${baseUrl}/dashboard/subscription`\n      );\n\n      res.json({\n        url: portalSession.url,\n      });\n    } catch (error: any) {\n      console.error(\"Customer portal creation error:\", error);\n      res.status(500).json({ message: \"Failed to create customer portal session\" });\n    }\n  });\n\n  // Enhanced webhook endpoint with better error handling\n  app.post(\"/api/stripe/webhook\", express.raw({ type: 'application/json' }), async (req, res) => {\n    try {\n      const signature = req.get('stripe-signature');\n      if (!signature) {\n        console.error('âŒ Stripe webhook: Signature manquante');\n        return res.status(400).send('Signature manquante');\n      }\n\n      await StripeService.handleWebhook(req.body, signature);\n      \n      console.log('âœ… Stripe webhook traitÃ© avec succÃ¨s');\n      res.json({ received: true, timestamp: new Date().toISOString() });\n    } catch (error: any) {\n      console.error('âŒ Erreur webhook Stripe:', error);\n      \n      // Logging dÃ©taillÃ© pour le debug\n      if (error.message?.includes('No signatures found')) {\n        console.error('Erreur de signature Stripe webhook - vÃ©rifier STRIPE_WEBHOOK_SECRET');\n      }\n      \n      res.status(400).send(`Webhook Error: ${error.message}`);\n    }\n  });\n\n  // Test Stripe configuration\n  app.get(\"/api/stripe/test\", requireAuth, async (req: AuthenticatedRequest, res) => {\n    try {\n      const config = await StripeService.verifyConfiguration();\n      \n      res.json({\n        configuration: config,\n        publishableKey: StripeService.getPublishableKey(),\n        isTestMode: StripeService.isTestMode(),\n        timestamp: new Date().toISOString(),\n      });\n    } catch (error: any) {\n      console.error(\"Stripe test error:\", error);\n      res.status(500).json({ \n        message: \"Stripe configuration test failed\",\n        error: error.message \n      });\n    }\n  });\n\n  // URL sanitization middleware for security\n  app.use((req, res, next) => {\n    // Prevent path traversal attacks\n    if (req.path.includes('..') || req.path.includes('%2e%2e')) {\n      return res.status(400).json({ error: \"Invalid path\" });\n    }\n    \n    // Prevent null bytes\n    if (req.path.includes('\\0')) {\n      return res.status(400).json({ error: \"Invalid characters in path\" });\n    }\n    \n    next();\n  });\n\n  const server = createServer(app);\n  return server;\n}","size_bytes":142875},"server/scheduler-service.ts":{"content":"import cron from 'node-cron';\nimport { SubscriptionService } from './subscription-service';\nimport { EmailService } from './email-service';\nimport { getDaysUntilExpiry, validateSubscription } from './subscription-config';\n\n// Import du storage - sera rÃ©solu Ã  l'exÃ©cution\nlet storage: any;\n\nexport interface ReminderConfig {\n  enabled: boolean;\n  daysBeforeExpiry: number[];\n  emailTemplate?: string;\n  notificationTypes: ('email' | 'dashboard')[];\n}\n\n// Configuration par dÃ©faut des rappels\nexport const DEFAULT_REMINDER_CONFIG: ReminderConfig = {\n  enabled: true,\n  daysBeforeExpiry: [7, 3, 1], // Rappels Ã  7, 3 et 1 jour(s)\n  notificationTypes: ['email', 'dashboard']\n};\n\nexport class SchedulerService {\n  private static initialized = false;\n  private static reminderConfig: ReminderConfig = DEFAULT_REMINDER_CONFIG;\n\n  // Initialiser le service de planification\n  static async initialize(): Promise<void> {\n    if (this.initialized) return;\n\n    try {\n      const { storage: storageInstance } = await import('./storage');\n      storage = storageInstance;\n\n      // Initialiser les services dÃ©pendants\n      await SubscriptionService.initialize();\n\n      // DÃ©marrer les tÃ¢ches programmÃ©es\n      this.startScheduledTasks();\n\n      this.initialized = true;\n      console.log('âœ… Scheduler service initialized successfully');\n    } catch (error) {\n      console.error('âŒ Failed to initialize scheduler service:', error);\n    }\n  }\n\n  // DÃ©marrer toutes les tÃ¢ches programmÃ©es\n  private static startScheduledTasks(): void {\n    // VÃ©rifier les abonnements expirÃ©s tous les jours Ã  9h00\n    cron.schedule('0 9 * * *', async () => {\n      console.log('ğŸ”„ Running daily subscription check...');\n      await this.checkExpiredSubscriptions();\n    });\n\n    // Envoyer les rappels de renouvellement tous les jours Ã  10h00\n    cron.schedule('0 10 * * *', async () => {\n      console.log('ğŸ”” Running daily renewal reminders...');\n      await this.sendRenewalReminders();\n    });\n\n    // Nettoyer les donnÃ©es anciennes toutes les semaines (dimanche Ã  2h00)\n    cron.schedule('0 2 * * 0', async () => {\n      console.log('ğŸ§¹ Running weekly cleanup...');\n      await this.cleanupOldData();\n    });\n\n    // GÃ©nÃ©rer les statistiques mensuelles (1er du mois Ã  8h00)\n    cron.schedule('0 8 1 * *', async () => {\n      console.log('ğŸ“Š Generating monthly statistics...');\n      await this.generateMonthlyStats();\n    });\n\n    console.log('â° Scheduled tasks started');\n  }\n\n  // VÃ©rifier les abonnements expirÃ©s et les dÃ©sactiver\n  static async checkExpiredSubscriptions(): Promise<void> {\n    try {\n      console.log('ğŸ” Checking for expired subscriptions...');\n\n      const organizations = await storage.getAllOrganizations();\n      let expiredCount = 0;\n\n      for (const org of organizations) {\n        // Ignorer les comptes admin et dÃ©couverte\n        if (org.role === 'admin' || org.subscriptionType === 'decouverte') {\n          continue;\n        }\n\n        const validation = validateSubscription(org);\n        \n        if (!validation.isValid && validation.needsRenewal) {\n          console.log(`âš ï¸ Subscription expired for organization ${org.id} (${org.name})`);\n          \n          // RÃ©trograder vers dÃ©couverte\n          await SubscriptionService.cancelSubscription(org.id);\n          \n          // CrÃ©er une notification dashboard\n          await this.createExpiryNotification(org);\n          \n          expiredCount++;\n        }\n      }\n\n      console.log(`âœ… Subscription check completed. ${expiredCount} subscriptions expired.`);\n    } catch (error) {\n      console.error('âŒ Error checking expired subscriptions:', error);\n    }\n  }\n\n  // Envoyer les rappels de renouvellement\n  static async sendRenewalReminders(): Promise<void> {\n    if (!this.reminderConfig.enabled) {\n      console.log('â„¹ï¸ Renewal reminders disabled');\n      return;\n    }\n\n    try {\n      console.log('ğŸ”” Sending renewal reminders...');\n\n      const organizations = await storage.getAllOrganizations();\n      let remindersSent = 0;\n\n      for (const org of organizations) {\n        // Ignorer les comptes admin et dÃ©couverte\n        if (org.role === 'admin' || org.subscriptionType === 'decouverte') {\n          continue;\n        }\n\n        const daysUntilExpiry = getDaysUntilExpiry(org);\n        \n        if (daysUntilExpiry !== null && daysUntilExpiry > 0) {\n          // VÃ©rifier si on doit envoyer un rappel\n          const shouldSendReminder = this.reminderConfig.daysBeforeExpiry.includes(daysUntilExpiry);\n          \n          if (shouldSendReminder) {\n            // VÃ©rifier si on n'a pas dÃ©jÃ  envoyÃ© ce rappel aujourd'hui\n            const lastReminder = await this.getLastReminderSent(org.id, daysUntilExpiry);\n            \n            if (!lastReminder || this.isNewDay(lastReminder)) {\n              await this.sendReminderToOrganization(org, daysUntilExpiry);\n              await this.recordReminderSent(org.id, daysUntilExpiry);\n              remindersSent++;\n            }\n          }\n        }\n      }\n\n      console.log(`âœ… Renewal reminders completed. ${remindersSent} reminders sent.`);\n    } catch (error) {\n      console.error('âŒ Error sending renewal reminders:', error);\n    }\n  }\n\n  // Envoyer un rappel Ã  une organisation\n  private static async sendReminderToOrganization(org: any, daysLeft: number): Promise<void> {\n    try {\n      const reminderTypes = this.reminderConfig.notificationTypes;\n\n      // Email reminder\n      if (reminderTypes.includes('email')) {\n        await EmailService.sendRenewalReminder(org);\n      }\n\n      // Dashboard notification\n      if (reminderTypes.includes('dashboard')) {\n        await this.createReminderNotification(org, daysLeft);\n      }\n\n      console.log(`ğŸ“§ Reminder sent to ${org.name} (${daysLeft} days left)`);\n    } catch (error) {\n      console.error(`âŒ Error sending reminder to ${org.id}:`, error);\n    }\n  }\n\n  // CrÃ©er une notification de rappel dans le dashboard\n  private static async createReminderNotification(org: any, daysLeft: number): Promise<void> {\n    try {\n      const message = daysLeft === 1 \n        ? 'Votre abonnement expire demain !'\n        : `Votre abonnement expire dans ${daysLeft} jours.`;\n\n      await storage.createNotification({\n        organizationId: org.id,\n        type: 'warning',\n        title: 'ğŸ”” Rappel de renouvellement',\n        message: message + ' Renouvelez dÃ¨s maintenant pour Ã©viter toute interruption.',\n        actionUrl: '/dashboard/billing',\n      });\n    } catch (error) {\n      console.error('Error creating reminder notification:', error);\n    }\n  }\n\n  // CrÃ©er une notification d'expiration\n  private static async createExpiryNotification(org: any): Promise<void> {\n    try {\n      await storage.createNotification({\n        organizationId: org.id,\n        type: 'error',\n        title: 'âš ï¸ Abonnement expirÃ©',\n        message: 'Votre abonnement a expirÃ© et vous avez Ã©tÃ© basculÃ© vers l\\'offre DÃ©couverte. Renouvelez pour retrouver toutes vos fonctionnalitÃ©s.',\n        actionUrl: '/pricing',\n      });\n    } catch (error) {\n      console.error('Error creating expiry notification:', error);\n    }\n  }\n\n  // Nettoyer les anciennes donnÃ©es\n  static async cleanupOldData(): Promise<void> {\n    try {\n      console.log('ğŸ§¹ Starting data cleanup...');\n\n      // Supprimer les anciens tokens expirÃ©s (plus de 30 jours)\n      const thirtyDaysAgo = new Date();\n      thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\n\n      await storage.cleanupExpiredTokens(thirtyDaysAgo);\n\n      // Supprimer les anciennes notifications lues (plus de 90 jours)\n      const ninetyDaysAgo = new Date();\n      ninetyDaysAgo.setDate(ninetyDaysAgo.getDate() - 90);\n\n      await storage.cleanupOldNotifications(ninetyDaysAgo);\n\n      // Supprimer les anciens logs de rappels (plus de 180 jours)\n      const oneEightyDaysAgo = new Date();\n      oneEightyDaysAgo.setDate(oneEightyDaysAgo.getDate() - 180);\n\n      await this.cleanupOldReminders(oneEightyDaysAgo);\n\n      console.log('âœ… Data cleanup completed');\n    } catch (error) {\n      console.error('âŒ Error during cleanup:', error);\n    }\n  }\n\n  // GÃ©nÃ©rer les statistiques mensuelles\n  static async generateMonthlyStats(): Promise<void> {\n    try {\n      console.log('ğŸ“Š Generating monthly statistics...');\n\n      const stats = await this.calculateMonthlyMetrics();\n      \n      // Sauvegarder les statistiques\n      await storage.saveMonthlyStats(stats);\n      \n      // Envoyer rapport aux admins si configurÃ©\n      if (process.env.ADMIN_EMAIL) {\n        await this.sendMonthlyReportToAdmins(stats);\n      }\n\n      console.log('âœ… Monthly statistics generated');\n    } catch (error) {\n      console.error('âŒ Error generating statistics:', error);\n    }\n  }\n\n  // Calculer les mÃ©triques mensuelles\n  private static async calculateMonthlyMetrics(): Promise<any> {\n    const now = new Date();\n    const lastMonth = new Date(now.getFullYear(), now.getMonth() - 1, 1);\n    const thisMonth = new Date(now.getFullYear(), now.getMonth(), 1);\n\n    const organizations = await storage.getAllOrganizations();\n    \n    const stats = {\n      period: `${lastMonth.getFullYear()}-${String(lastMonth.getMonth() + 1).padStart(2, '0')}`,\n      totalOrganizations: organizations.length,\n      activeSubscriptions: organizations.filter(org => org.subscriptionType !== 'decouverte' && org.subscriptionStatus === 'active').length,\n      newSubscriptions: 0, // Ã€ calculer avec les dates de crÃ©ation\n      subscriptionsByType: {\n        decouverte: organizations.filter(org => org.subscriptionType === 'decouverte').length,\n        evenementielle: organizations.filter(org => org.subscriptionType === 'evenementielle').length,\n        pro_club: organizations.filter(org => org.subscriptionType === 'pro_club').length,\n        pro_pme: organizations.filter(org => org.subscriptionType === 'pro_pme').length,\n        pro_entreprise: organizations.filter(org => org.subscriptionType === 'pro_entreprise').length,\n      },\n      totalRevenue: 0, // Ã€ calculer\n      eventsCreated: 0, // Ã€ rÃ©cupÃ©rer depuis la base\n      invitationsSent: 0, // Ã€ rÃ©cupÃ©rer depuis la base\n      generatedAt: new Date(),\n    };\n\n    return stats;\n  }\n\n  // Envoyer le rapport mensuel aux admins\n  private static async sendMonthlyReportToAdmins(stats: any): Promise<void> {\n    try {\n      const subject = `ğŸ“Š Rapport mensuel TeamMove - ${stats.period}`;\n      const message = `\n        Voici le rapport mensuel des activitÃ©s TeamMove :\n        \n        ğŸ“ˆ Organisations totales : ${stats.totalOrganizations}\n        ğŸ’¼ Abonnements actifs : ${stats.activeSubscriptions}\n        ğŸ†• Nouveaux abonnements : ${stats.newSubscriptions}\n        \n        RÃ©partition par offre :\n        - DÃ©couverte : ${stats.subscriptionsByType.decouverte}\n        - Ã‰vÃ©nementielle : ${stats.subscriptionsByType.evenementielle}\n        - Pro Club : ${stats.subscriptionsByType.pro_club}\n        - Pro PME : ${stats.subscriptionsByType.pro_pme}\n        - Pro Entreprise : ${stats.subscriptionsByType.pro_entreprise}\n        \n        ğŸ“… Ã‰vÃ©nements crÃ©Ã©s : ${stats.eventsCreated}\n        ğŸ“§ Invitations envoyÃ©es : ${stats.invitationsSent}\n      `;\n\n      await EmailService.sendNotificationEmail(\n        process.env.ADMIN_EMAIL!,\n        subject,\n        message,\n        `${process.env.APP_URL}/admin/stats`,\n        'Voir les dÃ©tails'\n      );\n    } catch (error) {\n      console.error('âŒ Error sending monthly report:', error);\n    }\n  }\n\n  // MÃ©thodes utilitaires pour le tracking des rappels\n  private static async getLastReminderSent(orgId: string, daysLeft: number): Promise<Date | null> {\n    // ImplÃ©mentation simplifiÃ©e - en pratique, cela irait chercher dans une table de logs\n    return null;\n  }\n\n  private static async recordReminderSent(orgId: string, daysLeft: number): Promise<void> {\n    // ImplÃ©mentation simplifiÃ©e - en pratique, cela sauvegarderait dans une table de logs\n    console.log(`ğŸ“ Recording reminder sent: org=${orgId}, days=${daysLeft}`);\n  }\n\n  private static isNewDay(lastDate: Date): boolean {\n    const now = new Date();\n    return now.getDate() !== lastDate.getDate() || \n           now.getMonth() !== lastDate.getMonth() || \n           now.getFullYear() !== lastDate.getFullYear();\n  }\n\n  private static async cleanupOldReminders(cutoffDate: Date): Promise<void> {\n    // ImplÃ©mentation pour nettoyer les anciens logs de rappels\n    console.log(`ğŸ—‘ï¸ Cleaning up reminders older than ${cutoffDate}`);\n  }\n\n  // Configuration dynamique des rappels\n  static updateReminderConfig(config: Partial<ReminderConfig>): void {\n    this.reminderConfig = { ...this.reminderConfig, ...config };\n    console.log('âš™ï¸ Reminder configuration updated:', this.reminderConfig);\n  }\n\n  static getReminderConfig(): ReminderConfig {\n    return { ...this.reminderConfig };\n  }\n\n  // Forcer l'exÃ©cution des tÃ¢ches (pour les tests ou l'admin)\n  static async runTaskNow(taskName: string): Promise<void> {\n    switch (taskName) {\n      case 'checkExpired':\n        await this.checkExpiredSubscriptions();\n        break;\n      case 'sendReminders':\n        await this.sendRenewalReminders();\n        break;\n      case 'cleanup':\n        await this.cleanupOldData();\n        break;\n      case 'generateStats':\n        await this.generateMonthlyStats();\n        break;\n      default:\n        throw new Error(`Unknown task: ${taskName}`);\n    }\n  }\n\n  // Obtenir le statut du scheduler\n  static getStatus(): { initialized: boolean; config: ReminderConfig; nextRuns: any[] } {\n    return {\n      initialized: this.initialized,\n      config: this.reminderConfig,\n      nextRuns: [] // En pratique, on retournerait les prochaines exÃ©cutions des tÃ¢ches cron\n    };\n  }\n}","size_bytes":13791},"server/storage.ts":{"content":"import {\n  organizations,\n  events,\n  eventParticipants,\n  eventInvitations,\n  messages,\n  notifications,\n  passwordResetTokens,\n  participantChangeRequests,\n  emailReplyTokens,\n  type Organization,\n  type InsertOrganization,\n  type Event,\n  type InsertEvent,\n  type EventParticipant,\n  type InsertEventParticipant,\n  type EventInvitation,\n  type InsertEventInvitation,\n  type Message,\n  type InsertMessage,\n  type Notification,\n  type InsertNotification,\n  type PasswordResetToken,\n  type InsertPasswordResetToken,\n  type ParticipantChangeRequest,\n  type InsertParticipantChangeRequest,\n  type EmailReplyToken,\n  type InsertEmailReplyToken,\n} from \"@shared/schema\";\nimport { db } from \"./db\";\nimport { eq, desc, and, or, sql, isNull } from \"drizzle-orm\";\nimport { randomUUID } from \"crypto\";\n\nexport interface IStorage {\n  // Organizations\n  getOrganization(id: string): Promise<Organization | undefined>;\n  getOrganizationByEmail(email: string): Promise<Organization | undefined>;\n  getOrganizations(): Promise<Organization[]>;\n  createOrganization(org: InsertOrganization): Promise<Organization>;\n  updateOrganization(id: string, data: Partial<InsertOrganization>): Promise<Organization>;\n  updateOrganizationPassword(email: string, hashedPassword: string): Promise<void>;\n  \n  // Admin methods\n  getAllOrganizationsForAdmin(): Promise<Organization[]>;\n  updateOrganizationStatus(id: string, isActive: boolean): Promise<Organization>;\n  updateOrganizationFeatures(id: string, features: string[]): Promise<Organization>;\n  deleteOrganization(id: string): Promise<void>;\n\n  // Events\n  getEvent(id: string): Promise<Event | undefined>;\n  getEvents(): Promise<Event[]>;\n  getEventsByOrganization(organizationId: string): Promise<Event[]>;\n  createEvent(event: InsertEvent): Promise<Event>;\n  updateEvent(id: string, data: Partial<InsertEvent>): Promise<Event>;\n  deleteEvent(id: string): Promise<void>;\n\n  // Event Participants\n  getEventParticipant(id: string): Promise<EventParticipant | undefined>;\n  getEventParticipants(eventId: string): Promise<EventParticipant[]>;\n  addEventParticipant(participant: InsertEventParticipant): Promise<EventParticipant>;\n  createEventParticipant(participant: InsertEventParticipant): Promise<EventParticipant>;\n  removeEventParticipant(id: string): Promise<void>;\n  updateEventParticipant(id: string, data: Partial<InsertEventParticipant>): Promise<EventParticipant>;\n\n  // Event Invitations\n  getEventInvitation(token: string): Promise<EventInvitation | undefined>;\n  getEventInvitations(eventId: string): Promise<EventInvitation[]>;\n  createEventInvitation(invitation: InsertEventInvitation): Promise<EventInvitation>;\n  updateEventInvitation(id: string, data: Partial<InsertEventInvitation>): Promise<EventInvitation>;\n\n  // Messages\n  getEventMessages(eventId: string): Promise<Message[]>;\n  getMessage(id: string): Promise<Message | undefined>;\n  createMessage(message: InsertMessage): Promise<Message>;\n  deleteMessage(id: string): Promise<void>;\n\n  // Password Reset Tokens\n  createPasswordResetToken(token: InsertPasswordResetToken): Promise<PasswordResetToken>;\n  getPasswordResetToken(token: string): Promise<PasswordResetToken | undefined>;\n  markPasswordResetTokenAsUsed(id: string): Promise<void>;\n  cleanupExpiredTokens(): Promise<void>;\n\n  // Notifications\n  getNotificationsByOrganization(organizationId: string): Promise<Notification[]>;\n  createNotification(notification: InsertNotification): Promise<Notification>;\n  markNotificationAsRead(id: string, organizationId: string): Promise<void>;\n  markAllNotificationsAsRead(organizationId: string): Promise<void>;\n  deleteNotification(id: string, organizationId: string): Promise<void>;\n\n  // Participant Change Requests\n  createParticipantChangeRequest(request: InsertParticipantChangeRequest): Promise<ParticipantChangeRequest>;\n  getParticipantChangeRequestsByEvent(eventId: string): Promise<ParticipantChangeRequest[]>;\n  getParticipantChangeRequest(id: string): Promise<ParticipantChangeRequest | undefined>;\n  updateParticipantChangeRequest(id: string, data: Partial<InsertParticipantChangeRequest>): Promise<ParticipantChangeRequest>;\n\n  // Email Reply Tokens\n  createEmailReplyToken(token: InsertEmailReplyToken): Promise<EmailReplyToken>;\n  getEmailReplyToken(token: string): Promise<EmailReplyToken | undefined>;\n  deactivateEmailReplyToken(token: string): Promise<void>;\n  getReplyTokenData(token: string): Promise<any>;\n  markReplyTokenAsUsed(token: string): Promise<void>;\n\n  // Subscription limits\n  checkEventLimit(organizationId: string): Promise<{ canCreate: boolean; currentCount: number; limit?: number }>;\n  checkInvitationLimit(eventId: string): Promise<{ canCreate: boolean; currentCount: number; limit?: number }>;\n  getSubscriptionLimits(organizationId: string): Promise<{ events: { current: number; limit?: number }; invitations: { current: number; limit?: number } }>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  // Organizations\n  async getOrganization(id: string): Promise<Organization | undefined> {\n    const [org] = await db.select().from(organizations).where(eq(organizations.id, id));\n    return org;\n  }\n\n  async getOrganizationByEmail(email: string): Promise<Organization | undefined> {\n    const [org] = await db.select().from(organizations).where(eq(organizations.email, email));\n    return org;\n  }\n\n  async createOrganization(org: InsertOrganization): Promise<Organization> {\n    const [newOrg] = await db.insert(organizations).values(org).returning();\n    return newOrg;\n  }\n\n  async getOrganizations(): Promise<Organization[]> {\n    return await db.select().from(organizations).orderBy(desc(organizations.createdAt));\n  }\n\n  async updateOrganization(id: string, data: Partial<InsertOrganization>): Promise<Organization> {\n    const updateData = {\n      ...data,\n      updatedAt: new Date()\n    };\n    const [updatedOrg] = await db\n      .update(organizations)\n      .set(updateData)\n      .where(eq(organizations.id, id))\n      .returning();\n    return updatedOrg;\n  }\n\n  async updateOrganizationPassword(email: string, hashedPassword: string): Promise<void> {\n    await db\n      .update(organizations)\n      .set({ password: hashedPassword, updatedAt: new Date() })\n      .where(eq(organizations.email, email));\n  }\n\n  // Admin methods\n  async getAllOrganizationsForAdmin(): Promise<Organization[]> {\n    return await db.select().from(organizations).orderBy(desc(organizations.createdAt));\n  }\n\n  async updateOrganizationStatus(id: string, isActive: boolean): Promise<Organization> {\n    const [updatedOrg] = await db\n      .update(organizations)\n      .set({ isActive, updatedAt: new Date() })\n      .where(eq(organizations.id, id))\n      .returning();\n    return updatedOrg;\n  }\n\n  async updateOrganizationFeatures(id: string, features: string[]): Promise<Organization> {\n    const [updatedOrg] = await db\n      .update(organizations)\n      .set({ features, updatedAt: new Date() })\n      .where(eq(organizations.id, id))\n      .returning();\n    return updatedOrg;\n  }\n\n  async deleteOrganization(id: string): Promise<void> {\n    // Delete associated events first (cascade should handle this but let's be explicit)\n    await db.delete(events).where(eq(events.organizationId, id));\n    // Delete the organization\n    await db.delete(organizations).where(eq(organizations.id, id));\n  }\n\n  // Events\n  async getEvent(id: string): Promise<Event | undefined> {\n    const [event] = await db.select().from(events).where(eq(events.id, id));\n    return event;\n  }\n\n  async getEvents(): Promise<Event[]> {\n    return await db.select().from(events).orderBy(desc(events.date));\n  }\n\n  async getEventsByOrganization(organizationId: string): Promise<Event[]> {\n    return await db\n      .select()\n      .from(events)\n      .where(eq(events.organizationId, organizationId))\n      .orderBy(desc(events.date));\n  }\n\n  async createEvent(event: InsertEvent): Promise<Event> {\n    // VÃ©rifier les limites d'abonnement\n    const organization = await this.getOrganization(event.organizationId);\n    if (!organization) {\n      throw new Error(\"Organisation non trouvÃ©e\");\n    }\n\n    // Pour l'offre dÃ©couverte, limiter Ã  1 Ã©vÃ©nement\n    if (organization.subscriptionType === 'decouverte') {\n      const existingEvents = await db\n        .select({ count: sql<number>`count(*)` })\n        .from(events)\n        .where(eq(events.organizationId, event.organizationId));\n      \n      if (existingEvents[0]?.count && existingEvents[0].count >= 1) {\n        throw new Error(\"Limite d'Ã©vÃ©nements atteinte pour l'offre DÃ©couverte (1 Ã©vÃ©nement maximum). Passez Ã  l'offre Premium pour crÃ©er plus d'Ã©vÃ©nements.\");\n      }\n    }\n\n    const [newEvent] = await db.insert(events).values(event).returning();\n    \n    // IncrÃ©menter le compteur d'Ã©vÃ©nements crÃ©Ã©s\n    await db\n      .update(organizations)\n      .set({ \n        eventCreatedCount: sql`${organizations.eventCreatedCount} + 1`,\n        updatedAt: new Date()\n      })\n      .where(eq(organizations.id, event.organizationId));\n    \n    return newEvent;\n  }\n\n  async updateEvent(id: string, data: Partial<InsertEvent>): Promise<Event> {\n    const [updatedEvent] = await db\n      .update(events)\n      .set({ ...data, updatedAt: new Date() })\n      .where(eq(events.id, id))\n      .returning();\n    return updatedEvent;\n  }\n\n  async deleteEvent(id: string): Promise<void> {\n    await db.delete(events).where(eq(events.id, id));\n  }\n\n  // Event Participants\n  async getEventParticipant(id: string): Promise<EventParticipant | undefined> {\n    const [participant] = await db\n      .select()\n      .from(eventParticipants)\n      .where(eq(eventParticipants.id, id));\n    return participant;\n  }\n\n  async getEventParticipants(eventId: string): Promise<EventParticipant[]> {\n    return await db\n      .select()\n      .from(eventParticipants)\n      .where(eq(eventParticipants.eventId, eventId))\n      .orderBy(desc(eventParticipants.createdAt));\n  }\n\n  async addEventParticipant(participant: InsertEventParticipant): Promise<EventParticipant> {\n    const [newParticipant] = await db.insert(eventParticipants).values(participant).returning();\n    return newParticipant;\n  }\n\n  // Alias for backwards compatibility\n  async createEventParticipant(participant: InsertEventParticipant): Promise<EventParticipant> {\n    return this.addEventParticipant(participant);\n  }\n\n  async removeEventParticipant(id: string): Promise<void> {\n    await db.delete(eventParticipants).where(eq(eventParticipants.id, id));\n  }\n\n  async updateEventParticipant(id: string, data: Partial<InsertEventParticipant>): Promise<EventParticipant> {\n    const [updatedParticipant] = await db\n      .update(eventParticipants)\n      .set(data)\n      .where(eq(eventParticipants.id, id))\n      .returning();\n    return updatedParticipant;\n  }\n\n  // Event Invitations\n  async getEventInvitation(token: string): Promise<EventInvitation | undefined> {\n    const [invitation] = await db\n      .select()\n      .from(eventInvitations)\n      .where(eq(eventInvitations.token, token));\n    return invitation;\n  }\n\n  async getEventInvitations(eventId: string): Promise<EventInvitation[]> {\n    return await db\n      .select()\n      .from(eventInvitations)\n      .where(eq(eventInvitations.eventId, eventId))\n      .orderBy(desc(eventInvitations.sentAt));\n  }\n\n  async createEventInvitation(invitation: InsertEventInvitation): Promise<EventInvitation> {\n    // VÃ©rifier les limites d'invitations\n    const event = await this.getEvent(invitation.eventId);\n    if (!event) {\n      throw new Error(\"Ã‰vÃ©nement non trouvÃ©\");\n    }\n\n    const organization = await this.getOrganization(event.organizationId);\n    if (!organization) {\n      throw new Error(\"Organisation non trouvÃ©e\");\n    }\n\n    // Pour l'offre dÃ©couverte, limiter Ã  20 invitations par Ã©vÃ©nement\n    if (organization.subscriptionType === 'decouverte') {\n      const existingInvitations = await db\n        .select({ count: sql<number>`count(*)` })\n        .from(eventInvitations)\n        .where(eq(eventInvitations.eventId, invitation.eventId));\n      \n      if (existingInvitations[0]?.count && existingInvitations[0].count >= 20) {\n        throw new Error(\"Limite d'invitations atteinte pour l'offre DÃ©couverte (20 invitations maximum par Ã©vÃ©nement). Passez Ã  l'offre Premium pour inviter plus de personnes.\");\n      }\n    }\n\n    const [newInvitation] = await db.insert(eventInvitations).values(invitation).returning();\n    \n    // IncrÃ©menter le compteur d'invitations envoyÃ©es\n    await db\n      .update(organizations)\n      .set({ \n        invitationsSentCount: sql`${organizations.invitationsSentCount} + 1`,\n        updatedAt: new Date()\n      })\n      .where(eq(organizations.id, event.organizationId));\n    \n    return newInvitation;\n  }\n\n  async updateEventInvitation(id: string, data: Partial<InsertEventInvitation>): Promise<EventInvitation> {\n    const [updatedInvitation] = await db\n      .update(eventInvitations)\n      .set({ ...data, respondedAt: new Date() })\n      .where(eq(eventInvitations.id, id))\n      .returning();\n    return updatedInvitation;\n  }\n\n  // Messages\n  async getMessage(id: string): Promise<Message | undefined> {\n    const [message] = await db\n      .select()\n      .from(messages)\n      .where(eq(messages.id, id));\n    return message;\n  }\n\n  async getEventMessages(eventId: string): Promise<Message[]> {\n    return await db\n      .select()\n      .from(messages)\n      .where(eq(messages.eventId, eventId))\n      .orderBy(desc(messages.createdAt));\n  }\n\n  async createMessage(message: InsertMessage): Promise<Message> {\n    const [newMessage] = await db.insert(messages).values(message).returning();\n    return newMessage;\n  }\n\n  async deleteMessage(id: string): Promise<void> {\n    await db.delete(messages).where(eq(messages.id, id));\n  }\n\n  // Password Reset Tokens\n  async createPasswordResetToken(token: InsertPasswordResetToken): Promise<PasswordResetToken> {\n    const [newToken] = await db.insert(passwordResetTokens).values(token).returning();\n    return newToken;\n  }\n\n  async getPasswordResetToken(token: string): Promise<PasswordResetToken | undefined> {\n    const [resetToken] = await db\n      .select()\n      .from(passwordResetTokens)\n      .where(and(\n        eq(passwordResetTokens.token, token),\n        isNull(passwordResetTokens.usedAt)\n      ));\n    return resetToken;\n  }\n\n  async markPasswordResetTokenAsUsed(id: string): Promise<void> {\n    await db\n      .update(passwordResetTokens)\n      .set({ usedAt: new Date() })\n      .where(eq(passwordResetTokens.id, id));\n  }\n\n\n\n  // Participant Change Requests\n  async createParticipantChangeRequest(request: InsertParticipantChangeRequest): Promise<ParticipantChangeRequest> {\n    const [newRequest] = await db\n      .insert(participantChangeRequests)\n      .values(request)\n      .returning();\n    return newRequest;\n  }\n\n  async getParticipantChangeRequestsByEvent(eventId: string): Promise<ParticipantChangeRequest[]> {\n    return await db\n      .select()\n      .from(participantChangeRequests)\n      .where(eq(participantChangeRequests.eventId, eventId))\n      .orderBy(desc(participantChangeRequests.createdAt));\n  }\n\n  async getParticipantChangeRequest(id: string): Promise<ParticipantChangeRequest | undefined> {\n    const [request] = await db\n      .select()\n      .from(participantChangeRequests)\n      .where(eq(participantChangeRequests.id, id));\n    return request;\n  }\n\n  async updateParticipantChangeRequest(id: string, data: Partial<InsertParticipantChangeRequest>): Promise<ParticipantChangeRequest> {\n    const [updatedRequest] = await db\n      .update(participantChangeRequests)\n      .set(data)\n      .where(eq(participantChangeRequests.id, id))\n      .returning();\n    return updatedRequest;\n  }\n\n  // Notifications\n  async getNotificationsByOrganization(organizationId: string): Promise<Notification[]> {\n    return await db\n      .select()\n      .from(notifications)\n      .where(eq(notifications.organizationId, organizationId))\n      .orderBy(desc(notifications.createdAt));\n  }\n\n  async createNotification(notification: InsertNotification): Promise<Notification> {\n    const [newNotification] = await db\n      .insert(notifications)\n      .values(notification)\n      .returning();\n    return newNotification;\n  }\n\n  async markNotificationAsRead(id: string, organizationId: string): Promise<void> {\n    await db\n      .update(notifications)\n      .set({ read: true })\n      .where(and(\n        eq(notifications.id, id),\n        eq(notifications.organizationId, organizationId)\n      ));\n  }\n\n  async markAllNotificationsAsRead(organizationId: string): Promise<void> {\n    await db\n      .update(notifications)\n      .set({ read: true })\n      .where(and(\n        eq(notifications.organizationId, organizationId),\n        eq(notifications.read, false)\n      ));\n  }\n\n  async deleteNotification(id: string, organizationId: string): Promise<void> {\n    await db\n      .delete(notifications)\n      .where(and(\n        eq(notifications.id, id),\n        eq(notifications.organizationId, organizationId)\n      ));\n  }\n\n  // Email Reply Tokens\n  async createEmailReplyToken(token: InsertEmailReplyToken): Promise<EmailReplyToken> {\n    const [newToken] = await db.insert(emailReplyTokens).values(token).returning();\n    return newToken;\n  }\n\n  async getEmailReplyToken(token: string): Promise<EmailReplyToken | undefined> {\n    const [replyToken] = await db\n      .select()\n      .from(emailReplyTokens)\n      .where(and(\n        eq(emailReplyTokens.token, token),\n        eq(emailReplyTokens.isActive, true)\n      ));\n    return replyToken;\n  }\n\n  async deactivateEmailReplyToken(token: string): Promise<void> {\n    await db\n      .update(emailReplyTokens)\n      .set({ isActive: false })\n      .where(eq(emailReplyTokens.token, token));\n  }\n\n  async getReplyTokenData(token: string): Promise<any> {\n    const replyToken = await this.getEmailReplyToken(token);\n    if (!replyToken) return null;\n    \n    return {\n      eventId: replyToken.eventId,\n      participantName: replyToken.participantName,\n      participantEmail: replyToken.participantEmail,\n      originalMessage: replyToken.originalMessage,\n      originalMessageId: replyToken.originalMessageId,\n      createdAt: replyToken.createdAt,\n    };\n  }\n\n  async markReplyTokenAsUsed(token: string): Promise<void> {\n    await db\n      .update(emailReplyTokens)\n      .set({ isActive: false })\n      .where(eq(emailReplyTokens.token, token));\n  }\n\n  // Subscription limits methods\n  async checkEventLimit(organizationId: string): Promise<{ canCreate: boolean; currentCount: number; limit?: number }> {\n    const organization = await this.getOrganization(organizationId);\n    if (!organization) {\n      throw new Error(\"Organisation non trouvÃ©e\");\n    }\n\n    const [result] = await db\n      .select({ count: sql<number>`count(*)` })\n      .from(events)\n      .where(eq(events.organizationId, organizationId));\n\n    const currentCount = result?.count || 0;\n\n    if (organization.subscriptionType === 'decouverte') {\n      return {\n        canCreate: currentCount < 1,\n        currentCount,\n        limit: 1\n      };\n    }\n\n    // Premium = illimitÃ©\n    return {\n      canCreate: true,\n      currentCount,\n      limit: undefined\n    };\n  }\n\n  async checkInvitationLimit(eventId: string): Promise<{ canCreate: boolean; currentCount: number; limit?: number }> {\n    const event = await this.getEvent(eventId);\n    if (!event) {\n      throw new Error(\"Ã‰vÃ©nement non trouvÃ©\");\n    }\n\n    const organization = await this.getOrganization(event.organizationId);\n    if (!organization) {\n      throw new Error(\"Organisation non trouvÃ©e\");\n    }\n\n    const [result] = await db\n      .select({ count: sql<number>`count(*)` })\n      .from(eventInvitations)\n      .where(eq(eventInvitations.eventId, eventId));\n\n    const currentCount = result?.count || 0;\n\n    if (organization.subscriptionType === 'decouverte') {\n      return {\n        canCreate: currentCount < 20,\n        currentCount,\n        limit: 20\n      };\n    }\n\n    // Premium = illimitÃ©\n    return {\n      canCreate: true,\n      currentCount,\n      limit: undefined\n    };\n  }\n\n  async getSubscriptionLimits(organizationId: string): Promise<{ events: { current: number; limit?: number }; invitations: { current: number; limit?: number } }> {\n    const organization = await this.getOrganization(organizationId);\n    if (!organization) {\n      throw new Error(\"Organisation non trouvÃ©e\");\n    }\n\n    // Import new subscription config\n    try {\n      const { NEW_SUBSCRIPTION_LIMITS, validateSubscription, getDaysUntilExpiry } = await import('./subscription-config');\n      \n      const subscriptionType = organization.subscriptionType || 'decouverte';\n      const limits = NEW_SUBSCRIPTION_LIMITS[subscriptionType];\n      const validation = validateSubscription(organization);\n      const daysUntilExpiry = getDaysUntilExpiry(organization);\n\n      // Compter les Ã©vÃ©nements\n      const [eventsResult] = await db\n        .select({ count: sql<number>`count(*)` })\n        .from(events)\n        .where(eq(events.organizationId, organizationId));\n\n      const eventsCount = eventsResult?.count || 0;\n\n      // Compter toutes les invitations\n      const [invitationsResult] = await db\n        .select({ count: sql<number>`count(*)` })\n        .from(eventInvitations)\n        .innerJoin(events, eq(eventInvitations.eventId, events.id))\n        .where(eq(events.organizationId, organizationId));\n\n      const invitationsCount = invitationsResult?.count || 0;\n\n      return {\n        events: { \n          current: eventsCount, \n          limit: limits.maxEvents,\n          remaining: organization.packageRemainingEvents || null\n        },\n        invitations: { \n          current: invitationsCount, \n          limit: limits.maxInvitations \n        },\n        validation: {\n          isValid: validation.isValid,\n          reason: validation.reason,\n          needsRenewal: validation.needsRenewal,\n          daysUntilExpiry\n        }\n      };\n    } catch (error) {\n      // Fallback to old system if new config fails to load\n      const [eventsResult] = await db\n        .select({ count: sql<number>`count(*)` })\n        .from(events)\n        .where(eq(events.organizationId, organizationId));\n\n      const eventsCount = eventsResult?.count || 0;\n\n      const [invitationsResult] = await db\n        .select({ count: sql<number>`count(*)` })\n        .from(eventInvitations)\n        .innerJoin(events, eq(eventInvitations.eventId, events.id))\n        .where(eq(events.organizationId, organizationId));\n\n      const invitationsCount = invitationsResult?.count || 0;\n\n      if (organization.subscriptionType === 'decouverte') {\n        return {\n          events: { current: eventsCount, limit: 1 },\n          invitations: { current: invitationsCount, limit: 20 }\n        };\n      }\n\n      return {\n        events: { current: eventsCount, limit: undefined },\n        invitations: { current: invitationsCount, limit: undefined }\n      };\n    }\n  }\n\n  // New methods for modernized subscription system\n  async getAllOrganizations(): Promise<Organization[]> {\n    return await db.select().from(organizations).orderBy(desc(organizations.createdAt));\n  }\n\n  async cleanupExpiredTokens(cutoffDate: Date): Promise<void> {\n    // Clean up old password reset tokens\n    await db.delete(passwordResetTokens)\n      .where(sql`${passwordResetTokens.createdAt} < ${cutoffDate} OR ${passwordResetTokens.expiresAt} < ${new Date()}`);\n    \n    // Clean up old email reply tokens\n    await db.delete(emailReplyTokens)\n      .where(sql`${emailReplyTokens.createdAt} < ${cutoffDate} OR ${emailReplyTokens.expiresAt} < ${new Date()}`);\n  }\n\n  async cleanupOldNotifications(cutoffDate: Date): Promise<void> {\n    // Clean up old read notifications\n    await db.delete(notifications)\n      .where(sql`${notifications.createdAt} < ${cutoffDate} AND ${notifications.read} = true`);\n  }\n\n  async saveMonthlyStats(stats: any): Promise<void> {\n    // This is a simplified version - in production you'd save to monthly_statistics table\n    console.log('ğŸ“Š Monthly stats generated:', {\n      period: stats.period,\n      totalOrganizations: stats.totalOrganizations,\n      activeSubscriptions: stats.activeSubscriptions,\n      newSubscriptions: stats.newSubscriptions\n    });\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","size_bytes":24348},"server/stripe-service.ts":{"content":"import Stripe from 'stripe';\n\nlet stripe: Stripe | null = null;\n\nfunction getStripeClient(): Stripe {\n  if (!stripe) {\n    if (!process.env.STRIPE_SECRET_KEY) {\n      throw new Error('STRIPE_SECRET_KEY is not configured. Please set this environment variable to use payment features.');\n    }\n    stripe = new Stripe(process.env.STRIPE_SECRET_KEY, {\n      apiVersion: '2025-08-27.basil',\n    });\n  }\n  return stripe;\n}\n\nexport interface CreateCheckoutSessionParams {\n  mode: 'payment' | 'subscription';\n  priceData: {\n    currency: string;\n    product_data: {\n      name: string;\n      description: string;\n    };\n    unit_amount: number;\n    recurring?: {\n      interval: 'day' | 'week' | 'month' | 'year';\n    };\n  };\n  quantity: number;\n  successUrl: string;\n  cancelUrl: string;\n  metadata: {\n    organizationId: string;\n    planId: string;\n    planType: string;\n  };\n  customerEmail?: string;\n}\n\nexport class StripeService {\n  \n  // CrÃ©er une session de checkout moderne\n  static async createCheckoutSession(params: CreateCheckoutSessionParams): Promise<{ id: string; url: string | null }> {\n    try {\n      const sessionConfig: Stripe.Checkout.SessionCreateParams = {\n        payment_method_types: ['card'],\n        mode: params.mode,\n        success_url: params.successUrl,\n        cancel_url: params.cancelUrl,\n        metadata: params.metadata,\n        allow_promotion_codes: true,\n        billing_address_collection: 'auto',\n        automatic_tax: {\n          enabled: true,\n        },\n        customer_creation: 'if_required',\n      };\n\n      // Configuration des line items selon le mode\n      if (params.mode === 'payment') {\n        // Paiement unique pour les packs Ã©vÃ©nementiels\n        sessionConfig.line_items = [{\n          price_data: params.priceData,\n          quantity: params.quantity,\n        }];\n\n        sessionConfig.payment_intent_data = {\n          description: `${params.priceData.product_data.name} - TeamMove`,\n          metadata: params.metadata,\n        };\n      } else {\n        // Abonnement pour les formules Pro\n        if (!params.priceData.recurring) {\n          throw new Error('Recurring configuration required for subscription mode');\n        }\n\n        sessionConfig.line_items = [{\n          price_data: params.priceData,\n          quantity: params.quantity,\n        }];\n\n        sessionConfig.subscription_data = {\n          description: `${params.priceData.product_data.name} - TeamMove`,\n          metadata: params.metadata,\n          trial_period_days: 0, // Pas d'essai gratuit pour le moment\n        };\n      }\n\n      // Ajouter l'email du client s'il est fourni\n      if (params.customerEmail) {\n        sessionConfig.customer_email = params.customerEmail;\n      }\n\n      const session = await getStripeClient().checkout.sessions.create(sessionConfig);\n\n      return { \n        id: session.id,\n        url: session.url || null\n      };\n    } catch (error: any) {\n      console.error('Erreur crÃ©ation session Stripe:', error);\n      throw new Error(`Erreur Stripe: ${error.message}`);\n    }\n  }\n\n  // RÃ©cupÃ©rer une session de checkout\n  static async getSession(sessionId: string): Promise<Stripe.Checkout.Session> {\n    try {\n      return await getStripeClient().checkout.sessions.retrieve(sessionId, {\n        expand: ['payment_intent', 'subscription']\n      });\n    } catch (error: any) {\n      console.error('Erreur rÃ©cupÃ©ration session:', error);\n      throw new Error(`Erreur rÃ©cupÃ©ration session: ${error.message}`);\n    }\n  }\n\n  // CrÃ©er un customer Stripe\n  static async createCustomer(organizationId: string, email: string, name?: string): Promise<Stripe.Customer> {\n    try {\n      const customer = await getStripeClient().customers.create({\n        email: email,\n        name: name,\n        metadata: {\n          organizationId: organizationId,\n        },\n      });\n\n      return customer;\n    } catch (error: any) {\n      console.error('Erreur crÃ©ation customer:', error);\n      throw new Error(`Erreur customer: ${error.message}`);\n    }\n  }\n\n  // Rechercher ou crÃ©er un customer\n  static async findOrCreateCustomer(organizationId: string, email: string, name?: string): Promise<Stripe.Customer> {\n    try {\n      // Chercher un customer existant par email\n      const existingCustomers = await getStripeClient().customers.list({\n        email: email,\n        limit: 1,\n      });\n\n      if (existingCustomers.data.length > 0) {\n        const customer = existingCustomers.data[0];\n        \n        // Mettre Ã  jour les mÃ©tadonnÃ©es si nÃ©cessaire\n        if (customer.metadata?.organizationId !== organizationId) {\n          return await getStripeClient().customers.update(customer.id, {\n            metadata: {\n              organizationId: organizationId,\n            },\n          }) as Stripe.Customer;\n        }\n        \n        return customer;\n      }\n\n      // CrÃ©er un nouveau customer\n      return await this.createCustomer(organizationId, email, name);\n    } catch (error: any) {\n      console.error('Erreur recherche/crÃ©ation customer:', error);\n      throw error;\n    }\n  }\n\n  // RÃ©cupÃ©rer les informations d'abonnement\n  static async getSubscription(subscriptionId: string): Promise<Stripe.Subscription> {\n    try {\n      return await getStripeClient().subscriptions.retrieve(subscriptionId, {\n        expand: ['default_payment_method', 'customer']\n      });\n    } catch (error: any) {\n      console.error('Erreur rÃ©cupÃ©ration abonnement:', error);\n      throw error;\n    }\n  }\n\n  // Annuler un abonnement\n  static async cancelSubscription(subscriptionId: string, immediately = false): Promise<Stripe.Subscription> {\n    try {\n      if (immediately) {\n        return await getStripeClient().subscriptions.cancel(subscriptionId);\n      } else {\n        return await getStripeClient().subscriptions.update(subscriptionId, {\n          cancel_at_period_end: true,\n        });\n      }\n    } catch (error: any) {\n      console.error('Erreur annulation abonnement:', error);\n      throw error;\n    }\n  }\n\n  // CrÃ©er un portail client pour la gestion de facturation\n  static async createCustomerPortal(customerId: string, returnUrl: string): Promise<{ url: string }> {\n    try {\n      const session = await getStripeClient().billingPortal.sessions.create({\n        customer: customerId,\n        return_url: returnUrl,\n      });\n\n      return { url: session.url };\n    } catch (error: any) {\n      console.error('Erreur crÃ©ation portail client:', error);\n      throw error;\n    }\n  }\n\n  // RÃ©cupÃ©rer les factures d'un client\n  static async getCustomerInvoices(customerId: string, limit = 10): Promise<Stripe.Invoice[]> {\n    try {\n      const invoices = await getStripeClient().invoices.list({\n        customer: customerId,\n        limit: limit,\n        expand: ['data.payment_intent']\n      });\n\n      return invoices.data;\n    } catch (error: any) {\n      console.error('Erreur rÃ©cupÃ©ration factures:', error);\n      throw error;\n    }\n  }\n\n  // RÃ©cupÃ©rer une facture spÃ©cifique\n  static async getInvoice(invoiceId: string): Promise<Stripe.Invoice> {\n    try {\n      return await getStripeClient().invoices.retrieve(invoiceId, {\n        expand: ['payment_intent', 'subscription', 'customer']\n      });\n    } catch (error: any) {\n      console.error('Erreur rÃ©cupÃ©ration facture:', error);\n      throw error;\n    }\n  }\n\n  // GÃ©nÃ©rer une facture proforma pour prÃ©visualisation\n  static async createProformaInvoice(customerId: string, items: any[]): Promise<Stripe.Invoice> {\n    try {\n      const invoice = await getStripeClient().invoices.create({\n        customer: customerId,\n        auto_advance: false, // Ne pas collecter automatiquement\n        collection_method: 'send_invoice',\n      });\n\n      // Ajouter les Ã©lÃ©ments de facturation\n      for (const item of items) {\n        await getStripeClient().invoiceItems.create({\n          customer: customerId,\n          invoice: invoice.id,\n          amount: item.amount,\n          currency: item.currency || 'eur',\n          description: item.description,\n        });\n      }\n\n      // Finaliser la facture pour calcul des taxes\n      return await getStripeClient().invoices.finalizeInvoice(invoice.id);\n    } catch (error: any) {\n      console.error('Erreur crÃ©ation facture proforma:', error);\n      throw error;\n    }\n  }\n\n  // GÃ©rer les webhooks Stripe\n  static async handleWebhook(payload: string | Buffer, signature: string): Promise<void> {\n    const webhookSecret = process.env.STRIPE_WEBHOOK_SECRET;\n    \n    if (!webhookSecret) {\n      console.warn('âš ï¸  STRIPE_WEBHOOK_SECRET non configurÃ© - webhook ignorÃ©');\n      return;\n    }\n\n    try {\n      const event = getStripeClient().webhooks.constructEvent(payload, signature, webhookSecret);\n\n      console.log(`ğŸ“¨ Webhook reÃ§u: ${event.type} - ID: ${event.id}`);\n\n      switch (event.type) {\n        case 'checkout.session.completed':\n          await this.handleCheckoutCompleted(event.data.object as Stripe.Checkout.Session);\n          break;\n\n        case 'payment_intent.succeeded':\n          await this.handlePaymentSucceeded(event.data.object as Stripe.PaymentIntent);\n          break;\n\n        case 'payment_intent.payment_failed':\n          await this.handlePaymentFailed(event.data.object as Stripe.PaymentIntent);\n          break;\n\n        case 'payment_intent.created':\n          await this.handlePaymentIntentCreated(event.data.object as Stripe.PaymentIntent);\n          break;\n\n        case 'payment_method.attached':\n          await this.handlePaymentMethodAttached(event.data.object as Stripe.PaymentMethod);\n          break;\n\n        case 'invoice.payment_succeeded':\n          await this.handleInvoicePaymentSucceeded(event.data.object as Stripe.Invoice);\n          break;\n\n        case 'invoice.payment_failed':\n          await this.handleInvoicePaymentFailed(event.data.object as Stripe.Invoice);\n          break;\n\n        case 'customer.subscription.created':\n          await this.handleSubscriptionCreated(event.data.object as Stripe.Subscription);\n          break;\n\n        case 'customer.subscription.updated':\n          await this.handleSubscriptionUpdated(event.data.object as Stripe.Subscription);\n          break;\n\n        case 'customer.subscription.deleted':\n          await this.handleSubscriptionDeleted(event.data.object as Stripe.Subscription);\n          break;\n\n        case 'customer.created':\n          await this.handleCustomerCreated(event.data.object as Stripe.Customer);\n          break;\n\n        case 'customer.updated':\n          await this.handleCustomerUpdated(event.data.object as Stripe.Customer);\n          break;\n\n        default:\n          console.log(`â„¹ï¸  Ã‰vÃ©nement webhook non gÃ©rÃ©: ${event.type}`);\n      }\n    } catch (error: any) {\n      console.error('âŒ Erreur webhook Stripe:', error);\n      throw new Error(`Erreur webhook: ${error.message}`);\n    }\n  }\n\n  // Gestion des Ã©vÃ©nements webhook\n  private static async handleCheckoutCompleted(session: Stripe.Checkout.Session): Promise<void> {\n    console.log('âœ… Checkout session completed:', session.id);\n    \n    const organizationId = session.metadata?.organizationId;\n    const planId = session.metadata?.planId;\n    \n    if (!organizationId || !planId) {\n      console.error('âŒ MÃ©tadonnÃ©es manquantes dans la session checkout');\n      return;\n    }\n\n    // Importer et utiliser le service d'abonnement pour traiter le paiement\n    try {\n      const { SubscriptionService } = await import('./subscription-service');\n      await SubscriptionService.handlePaymentSuccess(session.id, organizationId, planId);\n    } catch (error) {\n      console.error('âŒ Erreur traitement paiement rÃ©ussi:', error);\n    }\n  }\n\n  private static async handlePaymentSucceeded(paymentIntent: Stripe.PaymentIntent): Promise<void> {\n    console.log('ğŸ’³ Payment succeeded:', paymentIntent.id);\n    // Logique additionnelle si nÃ©cessaire\n  }\n\n  private static async handlePaymentFailed(paymentIntent: Stripe.PaymentIntent): Promise<void> {\n    console.log('âŒ Payment failed:', paymentIntent.id);\n    // Notifier l'utilisateur du paiement Ã©chouÃ©\n  }\n\n  private static async handleInvoicePaymentSucceeded(invoice: Stripe.Invoice): Promise<void> {\n    console.log('ğŸ“„ Invoice payment succeeded:', invoice.id);\n    // Traitement des paiements d'abonnement rÃ©ussis\n  }\n\n  private static async handleInvoicePaymentFailed(invoice: Stripe.Invoice): Promise<void> {\n    console.log('âŒ Invoice payment failed:', invoice.id);\n    // Traitement des paiements d'abonnement Ã©chouÃ©s\n  }\n\n  private static async handleSubscriptionCreated(subscription: Stripe.Subscription): Promise<void> {\n    console.log('ğŸ†• Subscription created:', subscription.id);\n    // Traitement de crÃ©ation d'abonnement\n  }\n\n  private static async handleSubscriptionUpdated(subscription: Stripe.Subscription): Promise<void> {\n    console.log('ğŸ”„ Subscription updated:', subscription.id);\n    // Traitement de mise Ã  jour d'abonnement\n  }\n\n  private static async handleSubscriptionDeleted(subscription: Stripe.Subscription): Promise<void> {\n    console.log('ğŸ—‘ï¸  Subscription deleted:', subscription.id);\n    // Traitement de suppression d'abonnement - rÃ©trograder l'utilisateur\n  }\n\n  private static async handlePaymentIntentCreated(paymentIntent: Stripe.PaymentIntent): Promise<void> {\n    console.log('ğŸ†• Payment Intent created:', paymentIntent.id);\n    // Peut Ãªtre utilisÃ© pour tracer les tentatives de paiement\n  }\n\n  private static async handlePaymentMethodAttached(paymentMethod: Stripe.PaymentMethod): Promise<void> {\n    console.log('ğŸ’³ Payment method attached:', paymentMethod.id);\n    // Traitement quand une mÃ©thode de paiement est attachÃ©e Ã  un client\n  }\n\n  private static async handleCustomerCreated(customer: Stripe.Customer): Promise<void> {\n    console.log('ğŸ‘¤ Customer created:', customer.id);\n    // Traitement lors de la crÃ©ation d'un nouveau client Stripe\n  }\n\n  private static async handleCustomerUpdated(customer: Stripe.Customer): Promise<void> {\n    console.log('ğŸ‘¤ Customer updated:', customer.id);\n    // Traitement lors de la mise Ã  jour d'un client\n  }\n\n  // Mode test/production\n  static isTestMode(): boolean {\n    const apiKey = process.env.STRIPE_SECRET_KEY || '';\n    return apiKey.includes('_test_') || apiKey.startsWith('sk_test_');\n  }\n\n  // Obtenir les clÃ©s publiques selon le mode\n  static getPublishableKey(): string {\n    if (this.isTestMode()) {\n      return process.env.STRIPE_PUBLISHABLE_TEST_KEY || 'pk_test_...';\n    }\n    return process.env.STRIPE_PUBLISHABLE_KEY || '';\n  }\n\n  // VÃ©rifier la configuration Stripe\n  static async verifyConfiguration(): Promise<{ valid: boolean; mode: string; issues?: string[] }> {\n    try {\n      const issues: string[] = [];\n      \n      // VÃ©rifier les clÃ©s d'API\n      if (!process.env.STRIPE_SECRET_KEY) {\n        issues.push('STRIPE_SECRET_KEY manquante');\n      }\n\n      const mode = this.isTestMode() ? 'test' : 'production';\n\n      // Test de connexion basique\n      try {\n        await getStripeClient().accounts.retrieve();\n      } catch (error) {\n        issues.push('Connexion Ã  Stripe Ã©chouÃ©e');\n      }\n\n      return {\n        valid: issues.length === 0,\n        mode,\n        issues: issues.length > 0 ? issues : undefined\n      };\n    } catch (error: any) {\n      return {\n        valid: false,\n        mode: 'unknown',\n        issues: [error.message]\n      };\n    }\n  }\n}\n\nexport { stripe };","size_bytes":15421},"server/subscription-config.ts":{"content":"export interface SubscriptionPlan {\n  id: string;\n  name: string;\n  type: 'decouverte' | 'evenementielle' | 'pro_club' | 'pro_pme' | 'pro_entreprise';\n  price: number; // Prix en centimes\n  currency: string;\n  billingInterval: 'monthly' | 'annual' | 'pack_single' | 'pack_10';\n  maxEvents: number | null; // null = illimitÃ©\n  maxInvitations: number | null; // null = illimitÃ©\n  validityMonths: number | null; // null = pas d'expiration\n  features: string[];\n  description: string;\n  stripePriceId?: string;\n}\n\nexport const SUBSCRIPTION_PLANS: { [key: string]: SubscriptionPlan } = {\n  // Offre dÃ©couverte (gratuite)\n  decouverte: {\n    id: 'decouverte',\n    name: 'DÃ©couverte',\n    type: 'decouverte',\n    price: 0,\n    currency: 'EUR',\n    billingInterval: 'monthly',\n    maxEvents: 1,\n    maxInvitations: 20,\n    validityMonths: null,\n    features: [\n      '1 Ã©vÃ©nement maximum',\n      'Jusqu\\'Ã  20 invitations',\n      'Gestion du covoiturage',\n      'Support par email'\n    ],\n    description: 'Parfait pour dÃ©couvrir TeamMove'\n  },\n\n  // Offres Ã©vÃ©nementielles\n  'evenementielle-single': {\n    id: 'evenementielle-single',\n    name: 'Pack Ã‰vÃ©nement',\n    type: 'evenementielle',\n    price: 1500, // 15â‚¬\n    currency: 'EUR',\n    billingInterval: 'pack_single',\n    maxEvents: 1,\n    maxInvitations: null, // IllimitÃ© pour un Ã©vÃ©nement\n    validityMonths: 12,\n    features: [\n      '1 Ã©vÃ©nement complet',\n      'Profil de personnalisation',\n      'Gestion conducteurs/passagers',\n      'Messagerie intÃ©grÃ©e',\n      'Suivi en temps rÃ©el',\n      'Support prioritaire'\n    ],\n    description: 'IdÃ©al pour organiser un Ã©vÃ©nement ponctuel'\n  },\n\n  'evenementielle-pack10': {\n    id: 'evenementielle-pack10',\n    name: 'Pack 10 Ã‰vÃ©nements',\n    type: 'evenementielle',\n    price: 15000, // 150â‚¬\n    currency: 'EUR',\n    billingInterval: 'pack_10',\n    maxEvents: 10,\n    maxInvitations: null, // IllimitÃ©\n    validityMonths: 12,\n    features: [\n      '10 Ã©vÃ©nements complets',\n      'Profil de personnalisation',\n      'Gestion conducteurs/passagers',\n      'Messagerie intÃ©grÃ©e',\n      'Suivi en temps rÃ©el',\n      'Support prioritaire',\n      'Valable 12 mois'\n    ],\n    description: 'Parfait pour les organisateurs rÃ©guliers'\n  },\n\n  // Formules Pro\n  'pro-club': {\n    id: 'pro-club',\n    name: 'Clubs & Associations',\n    type: 'pro_club',\n    price: 1999, // 19,99â‚¬\n    currency: 'EUR',\n    billingInterval: 'monthly',\n    maxEvents: null, // IllimitÃ©\n    maxInvitations: null, // IllimitÃ©\n    validityMonths: 1, // Mensuel\n    features: [\n      'Ã‰vÃ©nements illimitÃ©s',\n      'Invitations illimitÃ©es',\n      'Profil de personnalisation avancÃ©',\n      'Gestion multi-conducteurs',\n      'Messagerie avancÃ©e',\n      'Suivi en temps rÃ©el',\n      'Statistiques dÃ©taillÃ©es',\n      'Support prioritaire',\n      'API d\\'intÃ©gration',\n      'Branding personnalisÃ©'\n    ],\n    description: 'ConÃ§u pour les clubs sportifs et associations'\n  },\n\n  'pro-pme': {\n    id: 'pro-pme',\n    name: 'PME',\n    type: 'pro_pme',\n    price: 4900, // 49â‚¬\n    currency: 'EUR',\n    billingInterval: 'monthly',\n    maxEvents: null, // IllimitÃ©\n    maxInvitations: null, // IllimitÃ©\n    validityMonths: 1, // Mensuel\n    features: [\n      'Tout de Clubs & Associations',\n      'Multi-utilisateurs (5 admins)',\n      'Gestion des Ã©quipes',\n      'Reporting avancÃ©',\n      'IntÃ©grations tierces',\n      'Support tÃ©lÃ©phonique',\n      'Formation personnalisÃ©e',\n      'SLA garanti'\n    ],\n    description: 'IdÃ©al pour les petites et moyennes entreprises'\n  },\n\n  'pro-entreprise': {\n    id: 'pro-entreprise',\n    name: 'Grandes Entreprises',\n    type: 'pro_entreprise',\n    price: 9900, // 99â‚¬\n    currency: 'EUR',\n    billingInterval: 'monthly',\n    maxEvents: null, // IllimitÃ©\n    maxInvitations: null, // IllimitÃ©\n    validityMonths: 1, // Mensuel\n    features: [\n      'Tout de PME',\n      'Multi-utilisateurs illimitÃ©s',\n      'Gestion multi-sites',\n      'API complÃ¨te',\n      'SSO/SAML',\n      'HÃ©bergement dÃ©diÃ© (option)',\n      'Support 24/7',\n      'Account Manager dÃ©diÃ©',\n      'Personnalisation complÃ¨te',\n      'ConformitÃ© RGPD avancÃ©e'\n    ],\n    description: 'Solution entreprise complÃ¨te et sur-mesure'\n  }\n};\n\n// Configuration Stripe pour les nouveaux prix\nexport const STRIPE_PRICE_CONFIG = {\n  'evenementielle-single': {\n    price: 1500,\n    mode: 'payment', // Paiement unique\n    description: 'Pack Ã‰vÃ©nement - 15â‚¬'\n  },\n  'evenementielle-pack10': {\n    price: 15000,\n    mode: 'payment', // Paiement unique\n    description: 'Pack 10 Ã‰vÃ©nements - 150â‚¬'\n  },\n  'pro-club': {\n    price: 1999,\n    mode: 'subscription',\n    interval: 'month',\n    description: 'Clubs & Associations - 19,99â‚¬/mois'\n  },\n  'pro-pme': {\n    price: 4900,\n    mode: 'subscription',\n    interval: 'month',\n    description: 'PME - 49â‚¬/mois'\n  },\n  'pro-entreprise': {\n    price: 9900,\n    mode: 'subscription',\n    interval: 'month',\n    description: 'Grandes Entreprises - 99â‚¬/mois'\n  }\n};\n\n// Nouvelles limites d'abonnement (remplace les anciennes)\nexport const NEW_SUBSCRIPTION_LIMITS = {\n  decouverte: {\n    maxEvents: 1,\n    maxInvitations: 20,\n    name: 'DÃ©couverte',\n    price: 0,\n    features: SUBSCRIPTION_PLANS.decouverte.features\n  },\n  evenementielle: {\n    maxEvents: null, // GÃ©rÃ© par packageRemainingEvents\n    maxInvitations: null,\n    name: 'Ã‰vÃ©nementielle',\n    price: 1500, // Prix de base\n    features: SUBSCRIPTION_PLANS['evenementielle-single'].features\n  },\n  pro_club: {\n    maxEvents: null,\n    maxInvitations: null,\n    name: 'Clubs & Associations',\n    price: 1999,\n    features: SUBSCRIPTION_PLANS['pro-club'].features\n  },\n  pro_pme: {\n    maxEvents: null,\n    maxInvitations: null,\n    name: 'PME',\n    price: 4900,\n    features: SUBSCRIPTION_PLANS['pro-pme'].features\n  },\n  pro_entreprise: {\n    maxEvents: null,\n    maxInvitations: null,\n    name: 'Grandes Entreprises',\n    price: 9900,\n    features: SUBSCRIPTION_PLANS['pro-entreprise'].features\n  }\n};\n\n// Validation des abonnements\nexport function validateSubscription(organization: any): {\n  isValid: boolean;\n  reason?: string;\n  needsRenewal?: boolean;\n} {\n  if (!organization) {\n    return { isValid: false, reason: 'Organisation non trouvÃ©e' };\n  }\n\n  // L'offre dÃ©couverte est toujours valide\n  if (organization.subscriptionType === 'decouverte') {\n    return { isValid: true };\n  }\n\n  // Pour les offres Ã©vÃ©nementielles avec pack\n  if (organization.subscriptionType === 'evenementielle') {\n    // VÃ©rifier l'expiration du pack\n    if (organization.packageExpiryDate && new Date(organization.packageExpiryDate) < new Date()) {\n      return { \n        isValid: false, \n        reason: 'Pack Ã©vÃ©nementiel expirÃ©', \n        needsRenewal: true \n      };\n    }\n\n    // VÃ©rifier s'il reste des Ã©vÃ©nements\n    if (organization.packageRemainingEvents !== null && organization.packageRemainingEvents <= 0) {\n      return { \n        isValid: false, \n        reason: 'Plus d\\'Ã©vÃ©nements disponibles dans le pack', \n        needsRenewal: true \n      };\n    }\n\n    return { isValid: true };\n  }\n\n  // Pour les formules Pro (mensuel)\n  if (['pro_club', 'pro_pme', 'pro_entreprise'].includes(organization.subscriptionType)) {\n    // VÃ©rifier si l'abonnement est actif\n    if (organization.subscriptionStatus !== 'active') {\n      return { \n        isValid: false, \n        reason: 'Abonnement inactif', \n        needsRenewal: true \n      };\n    }\n\n    // VÃ©rifier l'expiration mensuelle\n    if (organization.subscriptionEndDate && new Date(organization.subscriptionEndDate) < new Date()) {\n      return { \n        isValid: false, \n        reason: 'Abonnement expirÃ©', \n        needsRenewal: true \n      };\n    }\n\n    return { isValid: true };\n  }\n\n  return { isValid: false, reason: 'Type d\\'abonnement non reconnu' };\n}\n\n// Calculer les jours restants avant expiration\nexport function getDaysUntilExpiry(organization: any): number | null {\n  if (!organization) return null;\n\n  let expiryDate: Date | null = null;\n\n  if (organization.subscriptionType === 'evenementielle' && organization.packageExpiryDate) {\n    expiryDate = new Date(organization.packageExpiryDate);\n  } else if (['pro_club', 'pro_pme', 'pro_entreprise'].includes(organization.subscriptionType) && organization.subscriptionEndDate) {\n    expiryDate = new Date(organization.subscriptionEndDate);\n  }\n\n  if (!expiryDate) return null;\n\n  const now = new Date();\n  const diffTime = expiryDate.getTime() - now.getTime();\n  const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n\n  return diffDays;\n}","size_bytes":8627},"server/subscription-service.ts":{"content":"import { \n  SUBSCRIPTION_PLANS, \n  STRIPE_PRICE_CONFIG, \n  NEW_SUBSCRIPTION_LIMITS,\n  validateSubscription,\n  getDaysUntilExpiry \n} from './subscription-config';\nimport { StripeService } from './stripe-service';\nimport { sendSubscriptionEmail } from './email-service';\n\n// Import du storage - sera rÃ©solu Ã  l'exÃ©cution\nlet storage: any;\n\nexport interface SubscriptionPermissionResult {\n  allowed: boolean;\n  reason?: string;\n  remainingEvents?: number;\n  remainingInvitations?: number;\n}\n\nexport interface CreateSubscriptionParams {\n  organizationId: string;\n  planId: string;\n  paymentMethodId?: string;\n  successUrl: string;\n  cancelUrl: string;\n}\n\nexport interface UpgradeSubscriptionParams {\n  organizationId: string;\n  newPlanId: string;\n  paymentMethodId?: string;\n  successUrl: string;\n  cancelUrl: string;\n}\n\nexport class SubscriptionService {\n  \n  // Initialiser le service\n  static async initialize(): Promise<void> {\n    try {\n      const { storage: storageInstance } = await import('./storage');\n      storage = storageInstance;\n      console.log('âœ… Subscription service initialized successfully');\n    } catch (error) {\n      console.error('âŒ Failed to initialize subscription service:', error);\n    }\n  }\n\n  // CrÃ©er un abonnement ou paiement\n  static async createSubscription(params: CreateSubscriptionParams): Promise<any> {\n    try {\n      console.log('ğŸ¢ Recherche de l\\'organisation:', params.organizationId);\n      const organization = await storage.getOrganization(params.organizationId);\n      if (!organization) {\n        throw new Error('Organization not found');\n      }\n      console.log('âœ… Organisation trouvÃ©e:', organization.name);\n\n      console.log('ğŸ“¦ Recherche du plan:', params.planId);\n      const plan = SUBSCRIPTION_PLANS[params.planId];\n      if (!plan) {\n        throw new Error(`Plan not found: ${params.planId}`);\n      }\n      console.log('âœ… Plan trouvÃ©:', plan.name);\n\n      console.log('âš™ï¸  Recherche de la configuration Stripe pour:', params.planId);\n      const stripeConfig = STRIPE_PRICE_CONFIG[params.planId];\n      if (!stripeConfig) {\n        throw new Error(`Stripe configuration not found for plan: ${params.planId}`);\n      }\n      console.log('âœ… Configuration Stripe trouvÃ©e:', stripeConfig);\n\n      // Pour les offres Ã©vÃ©nementielles (paiement unique)\n      if (plan.type === 'evenementielle') {\n        console.log('ğŸ’³ CrÃ©ation de paiement Ã©vÃ©nementiel');\n        return await this.createEventPackagePayment(params, plan, stripeConfig, organization);\n      }\n\n      // Pour les formules Pro (abonnement mensuel)\n      if (['pro_club', 'pro_pme', 'pro_entreprise'].includes(plan.type)) {\n        console.log('ğŸ’³ CrÃ©ation d\\'abonnement Pro');\n        return await this.createProSubscription(params, plan, stripeConfig, organization);\n      }\n\n      throw new Error(`Plan type not supported: ${plan.type}`);\n    } catch (error) {\n      console.error('âŒ Erreur crÃ©ation abonnement:', error);\n      throw error;\n    }\n  }\n\n  // CrÃ©er un paiement pour pack Ã©vÃ©nementiel\n  private static async createEventPackagePayment(\n    params: CreateSubscriptionParams, \n    plan: any, \n    stripeConfig: any,\n    organization: any\n  ): Promise<any> {\n    const session = await StripeService.createCheckoutSession({\n      mode: 'payment',\n      priceData: {\n        currency: plan.currency.toLowerCase(),\n        product_data: {\n          name: plan.name,\n          description: plan.description,\n        },\n        unit_amount: plan.price,\n      },\n      quantity: 1,\n      successUrl: params.successUrl,\n      cancelUrl: params.cancelUrl,\n      metadata: {\n        organizationId: params.organizationId,\n        planId: params.planId,\n        planType: 'evenementielle',\n      },\n      customerEmail: organization.contactEmail,\n    });\n\n    return { \n      sessionId: session.id, \n      url: session.url,\n      mode: 'payment' \n    };\n  }\n\n  // CrÃ©er un abonnement Pro\n  private static async createProSubscription(\n    params: CreateSubscriptionParams, \n    plan: any, \n    stripeConfig: any,\n    organization: any\n  ): Promise<any> {\n    const session = await StripeService.createCheckoutSession({\n      mode: 'subscription',\n      priceData: {\n        currency: plan.currency.toLowerCase(),\n        product_data: {\n          name: plan.name,\n          description: plan.description,\n        },\n        unit_amount: plan.price,\n        recurring: {\n          interval: stripeConfig.interval,\n        },\n      },\n      quantity: 1,\n      successUrl: params.successUrl,\n      cancelUrl: params.cancelUrl,\n      metadata: {\n        organizationId: params.organizationId,\n        planId: params.planId,\n        planType: plan.type,\n      },\n      customerEmail: organization.contactEmail,\n    });\n\n    return { \n      sessionId: session.id, \n      url: session.url,\n      mode: 'subscription' \n    };\n  }\n\n  // GÃ©rer la confirmation de paiement\n  static async handlePaymentSuccess(sessionId: string, organizationId: string, planId: string): Promise<void> {\n    try {\n      const plan = SUBSCRIPTION_PLANS[planId];\n      if (!plan) {\n        throw new Error('Plan not found');\n      }\n\n      const organization = await storage.getOrganization(organizationId);\n      if (!organization) {\n        throw new Error('Organization not found');\n      }\n\n      if (plan.type === 'evenementielle') {\n        await this.activateEventPackage(organization, plan);\n      } else if (['pro_club', 'pro_pme', 'pro_entreprise'].includes(plan.type)) {\n        await this.activateProSubscription(organization, plan);\n      }\n\n      // Envoyer email de confirmation\n      await sendSubscriptionEmail(organization, plan, 'activated');\n\n      console.log(`âœ… Subscription activated for organization ${organizationId}: ${plan.name}`);\n    } catch (error) {\n      console.error('Error handling payment success:', error);\n      throw error;\n    }\n  }\n\n  // Activer un pack Ã©vÃ©nementiel\n  private static async activateEventPackage(organization: any, plan: any): Promise<void> {\n    const expiryDate = new Date();\n    expiryDate.setMonth(expiryDate.getMonth() + (plan.validityMonths || 12));\n\n    const eventsCount = plan.id === 'evenementielle-single' ? 1 : 10;\n\n    await storage.updateOrganization(organization.id, {\n      subscriptionType: 'evenementielle',\n      subscriptionStatus: 'active',\n      paymentMethod: plan.billingInterval,\n      packageRemainingEvents: eventsCount,\n      packageExpiryDate: expiryDate,\n      subscriptionStartDate: new Date(),\n      // Reset des compteurs\n      eventCreatedCount: 0,\n      invitationsSentCount: 0,\n      lastResetDate: new Date(),\n    });\n  }\n\n  // Activer un abonnement Pro\n  private static async activateProSubscription(organization: any, plan: any): Promise<void> {\n    const endDate = new Date();\n    endDate.setMonth(endDate.getMonth() + 1); // Mensuel\n\n    await storage.updateOrganization(organization.id, {\n      subscriptionType: plan.type,\n      subscriptionStatus: 'active',\n      paymentMethod: 'monthly',\n      subscriptionStartDate: new Date(),\n      subscriptionEndDate: endDate,\n      // Reset des compteurs\n      eventCreatedCount: 0,\n      invitationsSentCount: 0,\n      lastResetDate: new Date(),\n      // Nettoyer les donnÃ©es de pack\n      packageRemainingEvents: null,\n      packageExpiryDate: null,\n    });\n  }\n\n  // VÃ©rifier si une organisation peut crÃ©er un Ã©vÃ©nement\n  static async canCreateEvent(organizationId: string): Promise<SubscriptionPermissionResult> {\n    try {\n      const organization = await storage.getOrganization(organizationId);\n      if (!organization) {\n        return { allowed: false, reason: 'Organization not found' };\n      }\n\n      // Admin peut toujours crÃ©er des Ã©vÃ©nements\n      if (organization.role === 'admin') {\n        return { allowed: true };\n      }\n\n      // Valider l'abonnement\n      const validation = validateSubscription(organization);\n      if (!validation.isValid) {\n        return { \n          allowed: false, \n          reason: validation.reason || 'Abonnement invalide'\n        };\n      }\n\n      // VÃ©rifier les limites selon le type d'abonnement\n      const limits = NEW_SUBSCRIPTION_LIMITS[organization.subscriptionType || 'decouverte'];\n      \n      if (!limits) {\n        return { allowed: false, reason: 'Type d\\'abonnement non reconnu' };\n      }\n\n      // Offre dÃ©couverte - limite stricte\n      if (organization.subscriptionType === 'decouverte') {\n        const currentEventCount = organization.eventCreatedCount || 0;\n        if (currentEventCount >= limits.maxEvents) {\n          return {\n            allowed: false,\n            reason: `Limite d'Ã©vÃ©nements atteinte (${limits.maxEvents}). Choisissez une offre payante pour crÃ©er plus d'Ã©vÃ©nements.`,\n            remainingEvents: 0\n          };\n        }\n        return { allowed: true, remainingEvents: limits.maxEvents - currentEventCount };\n      }\n\n      // Offre Ã©vÃ©nementielle - vÃ©rifier le pack\n      if (organization.subscriptionType === 'evenementielle') {\n        const remaining = organization.packageRemainingEvents || 0;\n        if (remaining <= 0) {\n          return {\n            allowed: false,\n            reason: 'Plus d\\'Ã©vÃ©nements disponibles dans votre pack. Achetez un nouveau pack.',\n            remainingEvents: 0\n          };\n        }\n        return { allowed: true, remainingEvents: remaining };\n      }\n\n      // Formules Pro - Ã©vÃ©nements illimitÃ©s\n      return { allowed: true };\n    } catch (error) {\n      console.error('Error checking event creation permission:', error);\n      return { allowed: false, reason: 'Erreur de vÃ©rification des permissions' };\n    }\n  }\n\n  // VÃ©rifier si une organisation peut envoyer des invitations\n  static async canSendInvitations(organizationId: string, count: number = 1): Promise<SubscriptionPermissionResult> {\n    try {\n      const organization = await storage.getOrganization(organizationId);\n      if (!organization) {\n        return { allowed: false, reason: 'Organization not found' };\n      }\n\n      // Admin peut toujours envoyer des invitations\n      if (organization.role === 'admin') {\n        return { allowed: true };\n      }\n\n      // Valider l'abonnement\n      const validation = validateSubscription(organization);\n      if (!validation.isValid) {\n        return { \n          allowed: false, \n          reason: validation.reason || 'Abonnement invalide'\n        };\n      }\n\n      const limits = NEW_SUBSCRIPTION_LIMITS[organization.subscriptionType || 'decouverte'];\n\n      // Offre dÃ©couverte - limite d'invitations\n      if (organization.subscriptionType === 'decouverte') {\n        const currentInvitationCount = organization.invitationsSentCount || 0;\n        const remaining = limits.maxInvitations - currentInvitationCount;\n        \n        if (remaining < count) {\n          return {\n            allowed: false,\n            reason: `Limite d'invitations atteinte (${limits.maxInvitations}). Choisissez une offre payante pour des invitations illimitÃ©es.`,\n            remainingInvitations: Math.max(0, remaining)\n          };\n        }\n        \n        return { allowed: true, remainingInvitations: remaining };\n      }\n\n      // Toutes les autres offres - invitations illimitÃ©es\n      return { allowed: true };\n    } catch (error) {\n      console.error('Error checking invitation permission:', error);\n      return { allowed: false, reason: 'Erreur de vÃ©rification des permissions' };\n    }\n  }\n\n  // IncrÃ©menter le compteur d'Ã©vÃ©nements (avec gestion des packs)\n  static async incrementEventCount(organizationId: string): Promise<void> {\n    try {\n      const organization = await storage.getOrganization(organizationId);\n      if (!organization) {\n        throw new Error('Organization not found');\n      }\n\n      const updateData: any = {\n        eventCreatedCount: (organization.eventCreatedCount || 0) + 1\n      };\n\n      // Pour les packs Ã©vÃ©nementiels, dÃ©crÃ©menter aussi le nombre restant\n      if (organization.subscriptionType === 'evenementielle' && organization.packageRemainingEvents > 0) {\n        updateData.packageRemainingEvents = organization.packageRemainingEvents - 1;\n      }\n\n      await storage.updateOrganization(organizationId, updateData);\n\n      console.log(`âœ… Event count incremented for organization ${organizationId}`);\n    } catch (error) {\n      console.error('Error incrementing event count:', error);\n    }\n  }\n\n  // IncrÃ©menter le compteur d'invitations\n  static async incrementInvitationCount(organizationId: string, count: number = 1): Promise<void> {\n    try {\n      const organization = await storage.getOrganization(organizationId);\n      if (!organization) {\n        throw new Error('Organization not found');\n      }\n\n      await storage.updateOrganization(organizationId, {\n        invitationsSentCount: (organization.invitationsSentCount || 0) + count\n      });\n\n      console.log(`âœ… Invitation count incremented for organization ${organizationId}: +${count}`);\n    } catch (error) {\n      console.error('Error incrementing invitation count:', error);\n    }\n  }\n\n  // Mettre Ã  niveau l'abonnement (pour les utilisateurs DÃ©couverte)\n  static async upgradeSubscription(params: UpgradeSubscriptionParams): Promise<any> {\n    try {\n      const organization = await storage.getOrganization(params.organizationId);\n      if (!organization) {\n        throw new Error('Organization not found');\n      }\n\n      // VÃ©rifier que c'est bien une mise Ã  niveau depuis DÃ©couverte\n      if (organization.subscriptionType !== 'decouverte') {\n        throw new Error('Mise Ã  niveau disponible uniquement depuis l\\'offre DÃ©couverte');\n      }\n\n      // CrÃ©er la session de paiement\n      return await this.createSubscription(params);\n    } catch (error) {\n      console.error('Error upgrading subscription:', error);\n      throw error;\n    }\n  }\n\n  // Annuler l'abonnement (retour Ã  DÃ©couverte)\n  static async cancelSubscription(organizationId: string): Promise<void> {\n    try {\n      const organization = await storage.getOrganization(organizationId);\n      if (!organization) {\n        throw new Error('Organization not found');\n      }\n\n      // Annuler l'abonnement Stripe s'il existe\n      if (organization.stripeSubscriptionId) {\n        await StripeService.cancelSubscription(organization.stripeSubscriptionId);\n      }\n\n      // RÃ©trograder vers l'offre DÃ©couverte\n      await storage.updateOrganization(organizationId, {\n        subscriptionType: 'decouverte',\n        subscriptionStatus: 'active',\n        paymentMethod: null,\n        stripeCustomerId: null,\n        stripeSubscriptionId: null,\n        subscriptionStartDate: null,\n        subscriptionEndDate: null,\n        packageRemainingEvents: null,\n        packageExpiryDate: null,\n        // Reset des compteurs selon les limites DÃ©couverte\n        eventCreatedCount: 0,\n        invitationsSentCount: 0,\n        lastResetDate: new Date(),\n      });\n\n      // Envoyer email de confirmation\n      await sendSubscriptionEmail(organization, SUBSCRIPTION_PLANS.decouverte, 'cancelled');\n\n      console.log(`âœ… Subscription cancelled for organization ${organizationId}`);\n    } catch (error) {\n      console.error('Error cancelling subscription:', error);\n      throw error;\n    }\n  }\n\n  // Obtenir les informations d'abonnement\n  static async getSubscriptionInfo(organizationId: string): Promise<any> {\n    try {\n      const organization = await storage.getOrganization(organizationId);\n      if (!organization) {\n        throw new Error('Organization not found');\n      }\n\n      const limits = NEW_SUBSCRIPTION_LIMITS[organization.subscriptionType || 'decouverte'];\n      const validation = validateSubscription(organization);\n      const daysUntilExpiry = getDaysUntilExpiry(organization);\n\n      return {\n        subscriptionType: organization.subscriptionType,\n        subscriptionStatus: organization.subscriptionStatus,\n        limits,\n        isValid: validation.isValid,\n        reason: validation.reason,\n        needsRenewal: validation.needsRenewal,\n        daysUntilExpiry,\n        packageRemainingEvents: organization.packageRemainingEvents,\n        packageExpiryDate: organization.packageExpiryDate,\n        subscriptionStartDate: organization.subscriptionStartDate,\n        subscriptionEndDate: organization.subscriptionEndDate,\n        eventCreatedCount: organization.eventCreatedCount || 0,\n        invitationsSentCount: organization.invitationsSentCount || 0,\n      };\n    } catch (error) {\n      console.error('Error getting subscription info:', error);\n      throw error;\n    }\n  }\n\n  // VÃ©rifier les abonnements expirÃ©s (tÃ¢che automatique)\n  static async checkExpiredSubscriptions(): Promise<void> {\n    try {\n      console.log('ğŸ”„ Checking for expired subscriptions...');\n\n      // Cette fonction sera appelÃ©e pÃ©riodiquement pour vÃ©rifier les expirations\n      // et basculer automatiquement vers l'offre DÃ©couverte\n\n      const organizations = await storage.getAllOrganizations();\n\n      for (const org of organizations) {\n        if (org.subscriptionType === 'decouverte') continue;\n\n        const validation = validateSubscription(org);\n        \n        if (!validation.isValid && validation.needsRenewal) {\n          console.log(`âš ï¸  Subscription expired for organization ${org.id}, downgrading to dÃ©couverte`);\n          \n          await this.cancelSubscription(org.id);\n          \n          // Envoyer notification d'expiration\n          await sendSubscriptionEmail(org, SUBSCRIPTION_PLANS.decouverte, 'expired');\n        }\n      }\n\n      console.log('âœ… Subscription check completed');\n    } catch (error) {\n      console.error('Error checking expired subscriptions:', error);\n    }\n  }\n}","size_bytes":17705},"server/theme.ts":{"content":"import { db } from './db';\nimport { userPreferences } from '../shared/schema';\nimport { eq } from 'drizzle-orm';\n\nexport interface ThemePreferences {\n  theme: 'light' | 'dark' | 'auto';\n  language: string;\n  emailNotifications: boolean;\n  pushNotifications: boolean;\n  marketingEmails: boolean;\n}\n\n/**\n * Obtient les prÃ©fÃ©rences d'un utilisateur\n */\nexport async function getUserPreferences(organizationId: string): Promise<ThemePreferences> {\n  try {\n    const preferences = await db.select()\n      .from(userPreferences)\n      .where(eq(userPreferences.organizationId, organizationId))\n      .limit(1);\n\n    if (preferences[0]) {\n      return {\n        theme: preferences[0].theme,\n        language: preferences[0].language,\n        emailNotifications: preferences[0].emailNotifications,\n        pushNotifications: preferences[0].pushNotifications,\n        marketingEmails: preferences[0].marketingEmails,\n      };\n    }\n\n    // CrÃ©er des prÃ©fÃ©rences par dÃ©faut si elles n'existent pas\n    const defaultPreferences: ThemePreferences = {\n      theme: 'auto',\n      language: 'fr',\n      emailNotifications: true,\n      pushNotifications: true,\n      marketingEmails: false,\n    };\n\n    await db.insert(userPreferences).values({\n      organizationId,\n      ...defaultPreferences,\n    });\n\n    return defaultPreferences;\n  } catch (error) {\n    console.error('Erreur lors de la rÃ©cupÃ©ration des prÃ©fÃ©rences:', error);\n    // Retourner les prÃ©fÃ©rences par dÃ©faut en cas d'erreur\n    return {\n      theme: 'auto',\n      language: 'fr',\n      emailNotifications: true,\n      pushNotifications: true,\n      marketingEmails: false,\n    };\n  }\n}\n\n/**\n * Met Ã  jour les prÃ©fÃ©rences d'un utilisateur\n */\nexport async function updateUserPreferences(organizationId: string, preferences: Partial<ThemePreferences>) {\n  try {\n    const existingPreferences = await db.select()\n      .from(userPreferences)\n      .where(eq(userPreferences.organizationId, organizationId))\n      .limit(1);\n\n    if (existingPreferences[0]) {\n      // Mettre Ã  jour les prÃ©fÃ©rences existantes\n      await db.update(userPreferences)\n        .set({\n          ...preferences,\n          updatedAt: new Date(),\n        })\n        .where(eq(userPreferences.organizationId, organizationId));\n    } else {\n      // CrÃ©er de nouvelles prÃ©fÃ©rences\n      await db.insert(userPreferences).values({\n        organizationId,\n        theme: preferences.theme || 'auto',\n        language: preferences.language || 'fr',\n        emailNotifications: preferences.emailNotifications !== undefined ? preferences.emailNotifications : true,\n        pushNotifications: preferences.pushNotifications !== undefined ? preferences.pushNotifications : true,\n        marketingEmails: preferences.marketingEmails !== undefined ? preferences.marketingEmails : false,\n      });\n    }\n\n    return { success: true };\n  } catch (error) {\n    console.error('Erreur lors de la mise Ã  jour des prÃ©fÃ©rences:', error);\n    throw error;\n  }\n}\n\n/**\n * RÃ©initialise les prÃ©fÃ©rences aux valeurs par dÃ©faut\n */\nexport async function resetUserPreferences(organizationId: string) {\n  try {\n    await db.update(userPreferences)\n      .set({\n        theme: 'auto',\n        language: 'fr',\n        emailNotifications: true,\n        pushNotifications: true,\n        marketingEmails: false,\n        updatedAt: new Date(),\n      })\n      .where(eq(userPreferences.organizationId, organizationId));\n\n    return { success: true };\n  } catch (error) {\n    console.error('Erreur lors de la rÃ©initialisation des prÃ©fÃ©rences:', error);\n    throw error;\n  }\n}","size_bytes":3594},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  // Try multiple possible paths for the build directory\n  const possiblePaths = [\n    path.resolve(import.meta.dirname, \"public\"),\n    path.resolve(import.meta.dirname, \"..\", \"dist\", \"public\"),\n    path.resolve(process.cwd(), \"dist\", \"public\"),\n  ];\n  \n  let distPath = possiblePaths[0];\n  \n  for (const possiblePath of possiblePaths) {\n    if (fs.existsSync(possiblePath)) {\n      distPath = possiblePath;\n      break;\n    }\n  }\n\n  if (!fs.existsSync(distPath)) {\n    console.warn(`Could not find build directory. Tried: ${possiblePaths.join(', ')}`);\n    // For Vercel, files are served statically, so we might not need this\n    return;\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    const indexPath = path.resolve(distPath, \"index.html\");\n    if (fs.existsSync(indexPath)) {\n      res.sendFile(indexPath);\n    } else {\n      res.status(404).send(\"File not found\");\n    }\n  });\n}\n","size_bytes":2818},"shared/schema.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { pgTable, text, varchar, timestamp, integer, boolean, json } from \"drizzle-orm/pg-core\";\nimport { relations } from \"drizzle-orm\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// Organizations table\nexport const organizations = pgTable(\"organizations\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull(),\n  type: varchar(\"type\", { enum: [\"club\", \"association\", \"company\"] }).notNull(),\n  email: text(\"email\").notNull().unique(),\n  phone: text(\"phone\"),\n  address: text(\"address\"),\n  description: text(\"description\"),\n  sports: json(\"sports\").$type<string[]>().default([]),\n  logoUrl: text(\"logo_url\"),\n  contactFirstName: text(\"contact_first_name\").notNull(),\n  contactLastName: text(\"contact_last_name\").notNull(),\n  sirenNumber: varchar(\"siren_number\", { length: 9 }), // NumÃ©ro SIREN (9 chiffres)\n  password: text(\"password\").notNull(),\n  role: varchar(\"role\", { enum: [\"organization\", \"admin\"] }).default(\"organization\"),\n  isActive: boolean(\"is_active\").default(true),\n  features: json(\"features\").$type<string[]>().default([]), // Features available to this organization\n  subscriptionType: varchar(\"subscription_type\", { enum: [\"decouverte\", \"evenementielle\", \"pro_club\", \"pro_pme\", \"pro_entreprise\"] }).default(\"decouverte\"),\n  subscriptionStatus: varchar(\"subscription_status\", { enum: [\"active\", \"inactive\", \"cancelled\", \"past_due\"] }).default(\"active\"),\n  stripeCustomerId: text(\"stripe_customer_id\"),\n  stripeSubscriptionId: text(\"stripe_subscription_id\"),\n  subscriptionStartDate: timestamp(\"subscription_start_date\"),\n  subscriptionEndDate: timestamp(\"subscription_end_date\"),\n  paymentMethod: varchar(\"payment_method\", { enum: [\"monthly\", \"annual\", \"pack_single\", \"pack_10\"] }),\n  packageRemainingEvents: integer(\"package_remaining_events\"), // Pour les packs Ã©vÃ©nementiels\n  packageExpiryDate: timestamp(\"package_expiry_date\"), // Date d'expiration du pack\n  eventCreatedCount: integer(\"event_created_count\").default(0), // Pour tracking des limites\n  invitationsSentCount: integer(\"invitations_sent_count\").default(0), // Pour tracking des invitations\n  lastResetDate: timestamp(\"last_reset_date\").defaultNow(), // Pour reset mensuel des compteurs\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Events table\nexport const events = pgTable(\"events\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  organizationId: varchar(\"organization_id\").notNull().references(() => organizations.id, { onDelete: \"cascade\" }),\n  name: text(\"name\").notNull(),\n  sport: text(\"sport\").notNull(),\n  description: text(\"description\"),\n  date: timestamp(\"date\").notNull(),\n  duration: text(\"duration\"),\n  meetingPoint: text(\"meeting_point\").notNull(),\n  destination: text(\"destination\").notNull(),\n  isRecurring: boolean(\"is_recurring\").default(false),\n  recurrencePattern: text(\"recurrence_pattern\"), // e.g., \"weekly\", \"monthly\"\n  status: varchar(\"status\", { enum: [\"draft\", \"confirmed\", \"cancelled\"] }).default(\"confirmed\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Event participants table\nexport const eventParticipants = pgTable(\"event_participants\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  eventId: varchar(\"event_id\").notNull().references(() => events.id, { onDelete: \"cascade\" }),\n  name: text(\"name\").notNull(),\n  email: text(\"email\").notNull(),\n  role: varchar(\"role\", { enum: [\"passenger\", \"driver\"] }).notNull(),\n  availableSeats: integer(\"available_seats\"), // null for passengers\n  comment: text(\"comment\"),\n  status: varchar(\"status\", { enum: [\"pending\", \"confirmed\", \"declined\"] }).default(\"confirmed\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Event invitations table\nexport const eventInvitations = pgTable(\"event_invitations\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  eventId: varchar(\"event_id\").notNull().references(() => events.id, { onDelete: \"cascade\" }),\n  email: text(\"email\").notNull(),\n  token: text(\"token\").notNull().unique(),\n  status: varchar(\"status\", { enum: [\"pending\", \"accepted\", \"declined\"] }).default(\"pending\"),\n  sentAt: timestamp(\"sent_at\").defaultNow(),\n  respondedAt: timestamp(\"responded_at\"),\n});\n\n// Messages table\nexport const messages = pgTable(\"messages\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  eventId: varchar(\"event_id\").notNull().references(() => events.id, { onDelete: \"cascade\" }),\n  senderName: text(\"sender_name\").notNull(),\n  senderEmail: text(\"sender_email\").notNull(),\n  content: text(\"content\").notNull(),\n  isFromOrganizer: boolean(\"is_from_organizer\").default(false),\n  isBroadcast: boolean(\"is_broadcast\").default(false),\n  replyToId: varchar(\"reply_to_id\").references(() => messages.id),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Password reset tokens table\nexport const passwordResetTokens = pgTable(\"password_reset_tokens\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  email: text(\"email\").notNull(),\n  token: text(\"token\").notNull().unique(),\n  expiresAt: timestamp(\"expires_at\").notNull(),\n  usedAt: timestamp(\"used_at\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Email reply tokens table for bidirectional messaging\nexport const emailReplyTokens = pgTable(\"email_reply_tokens\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  token: text(\"token\").notNull().unique(),\n  eventId: varchar(\"event_id\").notNull().references(() => events.id, { onDelete: \"cascade\" }),\n  participantEmail: text(\"participant_email\").notNull(),\n  participantName: text(\"participant_name\").notNull(),\n  organizerEmail: text(\"organizer_email\").notNull(),\n  organizerName: text(\"organizer_name\").notNull(),\n  originalMessage: text(\"original_message\"),\n  originalMessageId: varchar(\"original_message_id\").references(() => messages.id),\n  isActive: boolean(\"is_active\").default(true),\n  expiresAt: timestamp(\"expires_at\").notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Notifications table\nexport const notifications = pgTable(\"notifications\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  organizationId: varchar(\"organization_id\").notNull().references(() => organizations.id, { onDelete: \"cascade\" }),\n  type: varchar(\"type\", { enum: [\"info\", \"success\", \"warning\", \"error\"] }).notNull().default(\"info\"),\n  title: text(\"title\").notNull(),\n  message: text(\"message\").notNull(),\n  read: boolean(\"read\").default(false),\n  actionUrl: text(\"action_url\"),\n  eventId: varchar(\"event_id\").references(() => events.id, { onDelete: \"set null\" }),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Subscription plans table\nexport const subscriptionPlans = pgTable(\"subscription_plans\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull(), // \"DÃ©couverte\", \"Ã‰vÃ©nementielle\", ou formules \"Pro\"\n  type: varchar(\"type\", { enum: [\"decouverte\", \"evenementielle\", \"pro_club\", \"pro_pme\", \"pro_entreprise\"] }).notNull(),\n  description: text(\"description\"),\n  price: integer(\"price\").notNull(), // Prix en centimes\n  currency: varchar(\"currency\", { length: 3 }).default(\"EUR\"),\n  billingInterval: varchar(\"billing_interval\", { enum: [\"monthly\", \"annual\", \"pack_single\", \"pack_10\"] }).notNull(),\n  maxEvents: integer(\"max_events\"), // null pour illimitÃ©\n  maxInvitations: integer(\"max_invitations\"), // null pour illimitÃ©\n  features: json(\"features\").$type<string[]>().default([]),\n  stripePriceId: text(\"stripe_price_id\"),\n  isActive: boolean(\"is_active\").default(true),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Admin-User conversations table\nexport const adminConversations = pgTable(\"admin_conversations\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  organizationId: varchar(\"organization_id\").notNull().references(() => organizations.id, { onDelete: \"cascade\" }),\n  subject: text(\"subject\").notNull(),\n  status: varchar(\"status\", { enum: [\"open\", \"closed\", \"pending\"] }).default(\"open\"),\n  priority: varchar(\"priority\", { enum: [\"low\", \"medium\", \"high\", \"urgent\"] }).default(\"medium\"),\n  lastMessageAt: timestamp(\"last_message_at\").defaultNow(),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Admin-User messages table\nexport const adminMessages = pgTable(\"admin_messages\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  conversationId: varchar(\"conversation_id\").notNull().references(() => adminConversations.id, { onDelete: \"cascade\" }),\n  senderId: varchar(\"sender_id\").notNull().references(() => organizations.id),\n  senderType: varchar(\"sender_type\", { enum: [\"admin\", \"organization\"] }).notNull(),\n  message: text(\"message\").notNull(),\n  messageType: varchar(\"message_type\", { enum: [\"text\", \"system\", \"attachment\"] }).default(\"text\"),\n  attachmentUrl: text(\"attachment_url\"),\n  read: boolean(\"read\").default(false),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// User preferences table (for theme, notifications, etc.)\nexport const userPreferences = pgTable(\"user_preferences\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  organizationId: varchar(\"organization_id\").notNull().references(() => organizations.id, { onDelete: \"cascade\" }).unique(),\n  theme: varchar(\"theme\", { enum: [\"light\", \"dark\", \"auto\"] }).default(\"auto\"),\n  language: varchar(\"language\", { length: 5 }).default(\"fr\"),\n  emailNotifications: boolean(\"email_notifications\").default(true),\n  pushNotifications: boolean(\"push_notifications\").default(true),\n  marketingEmails: boolean(\"marketing_emails\").default(false),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Participant change requests table\nexport const participantChangeRequests = pgTable(\"participant_change_requests\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  participantId: varchar(\"participant_id\").notNull().references(() => eventParticipants.id, { onDelete: \"cascade\" }),\n  eventId: varchar(\"event_id\").notNull().references(() => events.id, { onDelete: \"cascade\" }),\n  requestType: varchar(\"request_type\", { enum: [\"role_change\", \"seat_change\", \"withdrawal\"] }).notNull(),\n  currentValue: text(\"current_value\"),\n  requestedValue: text(\"requested_value\"),\n  reason: text(\"reason\"),\n  status: varchar(\"status\", { enum: [\"pending\", \"approved\", \"rejected\"] }).default(\"pending\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  processedAt: timestamp(\"processed_at\"),\n});\n\n// Relations\nexport const organizationsRelations = relations(organizations, ({ many, one }) => ({\n  events: many(events),\n  notifications: many(notifications),\n  adminConversations: many(adminConversations),\n  adminMessages: many(adminMessages),\n  preferences: one(userPreferences),\n}));\n\nexport const eventsRelations = relations(events, ({ one, many }) => ({\n  organization: one(organizations, {\n    fields: [events.organizationId],\n    references: [organizations.id],\n  }),\n  participants: many(eventParticipants),\n  invitations: many(eventInvitations),\n  messages: many(messages),\n}));\n\nexport const eventParticipantsRelations = relations(eventParticipants, ({ one }) => ({\n  event: one(events, {\n    fields: [eventParticipants.eventId],\n    references: [events.id],\n  }),\n}));\n\nexport const eventInvitationsRelations = relations(eventInvitations, ({ one }) => ({\n  event: one(events, {\n    fields: [eventInvitations.eventId],\n    references: [events.id],\n  }),\n}));\n\nexport const messagesRelations = relations(messages, ({ one }) => ({\n  event: one(events, {\n    fields: [messages.eventId],\n    references: [events.id],\n  }),\n}));\n\nexport const participantChangeRequestsRelations = relations(participantChangeRequests, ({ one }) => ({\n  participant: one(eventParticipants, {\n    fields: [participantChangeRequests.participantId],\n    references: [eventParticipants.id],\n  }),\n  event: one(events, {\n    fields: [participantChangeRequests.eventId],\n    references: [events.id],\n  }),\n}));\n\nexport const adminConversationsRelations = relations(adminConversations, ({ one, many }) => ({\n  organization: one(organizations, {\n    fields: [adminConversations.organizationId],\n    references: [organizations.id],\n  }),\n  messages: many(adminMessages),\n}));\n\nexport const adminMessagesRelations = relations(adminMessages, ({ one }) => ({\n  conversation: one(adminConversations, {\n    fields: [adminMessages.conversationId],\n    references: [adminConversations.id],\n  }),\n  sender: one(organizations, {\n    fields: [adminMessages.senderId],\n    references: [organizations.id],\n  }),\n}));\n\nexport const userPreferencesRelations = relations(userPreferences, ({ one }) => ({\n  organization: one(organizations, {\n    fields: [userPreferences.organizationId],\n    references: [organizations.id],\n  }),\n}));\n\nexport const notificationsRelations = relations(notifications, ({ one }) => ({\n  organization: one(organizations, {\n    fields: [notifications.organizationId],\n    references: [organizations.id],\n  }),\n}));\n\n// Password reset tokens have no relations needed\n\n// Insert schemas\nexport const insertOrganizationSchema = createInsertSchema(organizations).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const insertEventSchema = createInsertSchema(events).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const insertEventParticipantSchema = createInsertSchema(eventParticipants).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertEventInvitationSchema = createInsertSchema(eventInvitations).omit({\n  id: true,\n  sentAt: true,\n  respondedAt: true,\n});\n\nexport const insertMessageSchema = createInsertSchema(messages).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertPasswordResetTokenSchema = createInsertSchema(passwordResetTokens).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertNotificationSchema = createInsertSchema(notifications).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertParticipantChangeRequestSchema = createInsertSchema(participantChangeRequests).omit({\n  id: true,\n  createdAt: true,\n  processedAt: true,\n});\n\nexport const insertEmailReplyTokenSchema = createInsertSchema(emailReplyTokens).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertSubscriptionPlanSchema = createInsertSchema(subscriptionPlans).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const insertAdminConversationSchema = createInsertSchema(adminConversations).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n  lastMessageAt: true,\n});\n\nexport const insertAdminMessageSchema = createInsertSchema(adminMessages).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertUserPreferencesSchema = createInsertSchema(userPreferences).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\n// Types\nexport type Organization = typeof organizations.$inferSelect;\nexport type InsertOrganization = z.infer<typeof insertOrganizationSchema>;\nexport type Event = typeof events.$inferSelect;\nexport type InsertEvent = z.infer<typeof insertEventSchema>;\nexport type EventParticipant = typeof eventParticipants.$inferSelect;\nexport type InsertEventParticipant = z.infer<typeof insertEventParticipantSchema>;\nexport type EventInvitation = typeof eventInvitations.$inferSelect;\nexport type InsertEventInvitation = z.infer<typeof insertEventInvitationSchema>;\nexport type Message = typeof messages.$inferSelect;\nexport type InsertMessage = z.infer<typeof insertMessageSchema>;\nexport type PasswordResetToken = typeof passwordResetTokens.$inferSelect;\nexport type InsertPasswordResetToken = z.infer<typeof insertPasswordResetTokenSchema>;\nexport type Notification = typeof notifications.$inferSelect;\nexport type InsertNotification = z.infer<typeof insertNotificationSchema>;\nexport type ParticipantChangeRequest = typeof participantChangeRequests.$inferSelect;\nexport type InsertParticipantChangeRequest = z.infer<typeof insertParticipantChangeRequestSchema>;\nexport type EmailReplyToken = typeof emailReplyTokens.$inferSelect;\nexport type InsertEmailReplyToken = z.infer<typeof insertEmailReplyTokenSchema>;\nexport type SubscriptionPlan = typeof subscriptionPlans.$inferSelect;\nexport type InsertSubscriptionPlan = z.infer<typeof insertSubscriptionPlanSchema>;\nexport type AdminConversation = typeof adminConversations.$inferSelect;\nexport type InsertAdminConversation = z.infer<typeof insertAdminConversationSchema>;\nexport type AdminMessage = typeof adminMessages.$inferSelect;\nexport type InsertAdminMessage = z.infer<typeof insertAdminMessageSchema>;\nexport type UserPreferences = typeof userPreferences.$inferSelect;\nexport type InsertUserPreferences = z.infer<typeof insertUserPreferencesSchema>;\n","size_bytes":17020},"tests/setup.ts":{"content":"import { beforeAll, afterAll } from 'vitest';\nimport dotenv from 'dotenv';\n\n// Load environment variables for tests\ndotenv.config({ path: '.env.test' });\n\nbeforeAll(() => {\n  console.log('Setting up tests...');\n});\n\nafterAll(() => {\n  console.log('Cleaning up tests...');\n});","size_bytes":275},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { NotificationProvider } from \"@/contexts/NotificationContext\";\nimport { StatsProvider } from \"@/contexts/StatsContext\";\nimport { MessagingProvider } from \"@/contexts/MessagingContext\";\nimport { ThemeProvider } from \"@/contexts/ThemeContext\";\nimport Home from \"@/pages/home\";\nimport Dashboard from \"@/pages/dashboard\";\nimport Admin from \"@/pages/admin\";\nimport Invitation from \"@/pages/invitation\";\nimport ResetPassword from \"@/pages/reset-password\";\nimport EventPublic from \"@/pages/event-public\";\nimport NotFound from \"@/pages/not-found\";\nimport ReplyMessage from \"@/pages/reply-message\";\nimport SubscriptionPlansPage from \"@/pages/subscription-plans\";\nimport Cookies from \"@/components/cookies/Cookies\";\nimport Chatbot from \"./components/chatbot/Chatbot\";\nimport Footer from \"./components/footer/Footer\";\n\nfunction Router() {\n  const { isAuthenticated, isLoading, organization } = useAuth();\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-primary\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <Switch>\n      <Route path=\"/\" component={isAuthenticated ? \n        (organization?.role === 'admin' ? Admin : Dashboard) \n        : Home} />\n      <Route path=\"/dashboard\" component={isAuthenticated ? Dashboard : Home} />\n      <Route path=\"/admin\" component={isAuthenticated ? Admin : Home} />\n      <Route path=\"/subscription\" component={isAuthenticated ? SubscriptionPlansPage : Home} />\n      <Route path=\"/subscription/plans\" component={isAuthenticated ? SubscriptionPlansPage : Home} />\n      <Route path=\"/subscription/:mode\" component={isAuthenticated ? SubscriptionPlansPage : Home} />\n      <Route path=\"/invitation/:token\" component={Invitation} />\n      <Route path=\"/events/:id\" component={EventPublic} />\n      <Route path=\"/reset-password\" component={ResetPassword} />\n      <Route path=\"/reply-message\" component={ReplyMessage} />\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <ThemeProvider>\n        <TooltipProvider>\n          <NotificationProvider>\n            <StatsProvider>\n              <MessagingProvider>\n                <Toaster />\n                <Router />\n                <Chatbot />\n                <Footer />\n                <Cookies />\n              </MessagingProvider>\n            </StatsProvider>\n          </NotificationProvider>\n        </TooltipProvider>\n      </ThemeProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":2908},"client/src/index.css":{"content":"@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n:root {\n  --background: hsl(0 0% 100%);\n  --foreground: hsl(210 25% 7.8431%);\n  --card: hsl(180 6.6667% 97.0588%);\n  --card-foreground: hsl(210 25% 7.8431%);\n  --popover: hsl(0 0% 100%);\n  --popover-foreground: hsl(210 25% 7.8431%);\n  --primary: hsl(217 91% 60%);\n  --primary-foreground: hsl(0 0% 100%);\n  --secondary: hsl(160 84% 39%);\n  --secondary-foreground: hsl(0 0% 100%);\n  --muted: hsl(240 1.9608% 90%);\n  --muted-foreground: hsl(210 25% 7.8431%);\n  --accent: hsl(0 84% 60%);\n  --accent-foreground: hsl(0 0% 100%);\n  --destructive: hsl(356.3033 90.5579% 54.3137%);\n  --destructive-foreground: hsl(0 0% 100%);\n  --border: hsl(201.4286 30.4348% 90.9804%);\n  --input: hsl(200 23.0769% 97.4510%);\n  --ring: hsl(217 91% 60%);\n  --chart-1: hsl(217 91% 60%);\n  --chart-2: hsl(160 84% 39%);\n  --chart-3: hsl(42.0290 92.8251% 56.2745%);\n  --chart-4: hsl(147.1429 78.5047% 41.9608%);\n  --chart-5: hsl(341.4894 75.2000% 50.9804%);\n  --sidebar: hsl(180 6.6667% 97.0588%);\n  --sidebar-foreground: hsl(210 25% 7.8431%);\n  --sidebar-primary: hsl(217 91% 60%);\n  --sidebar-primary-foreground: hsl(0 0% 100%);\n  --sidebar-accent: hsl(211.5789 51.3514% 92.7451%);\n  --sidebar-accent-foreground: hsl(217 91% 60%);\n  --sidebar-border: hsl(205.0000 25.0000% 90.5882%);\n  --sidebar-ring: hsl(217 91% 60%);\n  --font-sans: 'Inter', system-ui, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: Menlo, monospace;\n  --radius: 0.5rem;\n}\n\n.dark {\n  /* Ultra-modern dark theme with enhanced contrast and vibrancy */\n  --background: hsl(220 26% 6%);\n  --foreground: hsl(210 40% 98%);\n  --card: hsl(222 24% 10%);\n  --card-foreground: hsl(210 40% 96%);\n  --popover: hsl(220 26% 7%);\n  --popover-foreground: hsl(210 40% 98%);\n  --primary: hsl(217 91% 60%);\n  --primary-foreground: hsl(0 0% 100%);\n  --secondary: hsl(217 38% 22%);\n  --secondary-foreground: hsl(210 40% 98%);\n  --muted: hsl(217 35% 18%);\n  --muted-foreground: hsl(215 25% 70%);\n  --accent: hsl(217 91% 60%);\n  --accent-foreground: hsl(0 0% 100%);\n  --destructive: hsl(0 84% 60%);\n  --destructive-foreground: hsl(0 0% 100%);\n  --border: hsl(217 35% 15%);\n  --input: hsl(217 35% 15%);\n  --ring: hsl(217 91% 60%);\n  --sidebar: hsl(222 24% 9%);\n  --sidebar-foreground: hsl(210 40% 96%);\n  --sidebar-primary: hsl(217 91% 60%);\n  --sidebar-primary-foreground: hsl(0 0% 100%);\n  --sidebar-accent: hsl(217 38% 22%);\n  --sidebar-accent-foreground: hsl(210 40% 98%);\n  --sidebar-border: hsl(217 35% 15%);\n  --sidebar-ring: hsl(217 91% 60%);\n  \n  /* Enhanced vibrant color palette for better UX */\n  --success: hsl(142 76% 45%);\n  --success-foreground: hsl(0 0% 100%);\n  --warning: hsl(38 92% 55%);\n  --warning-foreground: hsl(220 26% 6%);\n  --info: hsl(199 89% 52%);\n  --info-foreground: hsl(0 0% 100%);\n  \n  /* Premium gradient accents */\n  --gradient-primary: linear-gradient(135deg, hsl(217 91% 60%) 0%, hsl(240 100% 70%) 100%);\n  --gradient-success: linear-gradient(135deg, hsl(142 76% 45%) 0%, hsl(160 84% 39%) 100%);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/* Custom animations */\n@keyframes fadeIn {\n  from { opacity: 0; transform: translateY(10px); }\n  to { opacity: 1; transform: translateY(0); }\n}\n\n.animate-fade-in {\n  animation: fadeIn 0.3s ease-out;\n}\n\n/* Hero gradient */\n.hero-gradient {\n  background: linear-gradient(135deg, hsl(217 91% 60%) 0%, hsl(160 84% 39%) 100%);\n}\n\n/* Glassmorphism effect */\n.glass {\n  backdrop-filter: blur(10px);\n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n}\n\n.dark .glass {\n  background: rgba(17, 24, 39, 0.8);\n  border: 1px solid rgba(55, 65, 81, 0.3);\n}\n\n/* Enhanced hover effects for better UX */\n.dark .hover\\:bg-gray-50:hover {\n  background-color: hsl(217 32% 14%);\n}\n\n.dark .hover\\:bg-gray-100:hover {\n  background-color: hsl(217 32% 17%);\n}\n\n/* Improved focus rings for dark mode */\n.dark .focus\\:ring-2:focus {\n  --tw-ring-color: hsl(217 91% 65%);\n}\n\n/* Better contrast for buttons in dark mode */\n.dark .bg-primary\\/10 {\n  background-color: hsl(217 91% 65% / 0.15);\n}\n\n.dark .bg-secondary\\/10 {\n  background-color: hsl(160 84% 39% / 0.15);\n}\n\n.dark .bg-accent\\/10 {\n  background-color: hsl(0 84% 60% / 0.15);\n}\n\n/* Smooth transitions for theme switching */\n* {\n  transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease;\n}\n\n/* Enhanced card shadows for depth in dark mode */\n.dark [class*=\"shadow\"] {\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.06);\n}\n\n/* Improved scrollbar styling */\n::-webkit-scrollbar {\n  width: 8px;\n  height: 8px;\n}\n\n::-webkit-scrollbar-track {\n  background: var(--muted);\n}\n\n::-webkit-scrollbar-thumb {\n  background: var(--border);\n  border-radius: 4px;\n}\n\n::-webkit-scrollbar-thumb:hover {\n  background: var(--muted-foreground);\n}\n","size_bytes":4999},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"public/assets/html2canvas.esm-CBrSDip1.js":{"content":"/*!\n * html2canvas 1.4.1 <https://html2canvas.hertzen.com>\n * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>\n * Released under MIT License\n *//*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */var mr=function(e,A){return mr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var B in r)Object.prototype.hasOwnProperty.call(r,B)&&(t[B]=r[B])},mr(e,A)};function tA(e,A){if(typeof A!=\"function\"&&A!==null)throw new TypeError(\"Class extends value \"+String(A)+\" is not a constructor or null\");mr(e,A);function t(){this.constructor=e}e.prototype=A===null?Object.create(A):(t.prototype=A.prototype,new t)}var Lr=function(){return Lr=Object.assign||function(A){for(var t,r=1,B=arguments.length;r<B;r++){t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(A[n]=t[n])}return A},Lr.apply(this,arguments)};function P(e,A,t,r){function B(n){return n instanceof t?n:new t(function(s){s(n)})}return new(t||(t=Promise))(function(n,s){function i(Q){try{o(r.next(Q))}catch(g){s(g)}}function a(Q){try{o(r.throw(Q))}catch(g){s(g)}}function o(Q){Q.done?n(Q.value):B(Q.value).then(i,a)}o((r=r.apply(e,[])).next())})}function _(e,A){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},r,B,n,s;return s={next:i(0),throw:i(1),return:i(2)},typeof Symbol==\"function\"&&(s[Symbol.iterator]=function(){return this}),s;function i(o){return function(Q){return a([o,Q])}}function a(o){if(r)throw new TypeError(\"Generator is already executing.\");for(;t;)try{if(r=1,B&&(n=o[0]&2?B.return:o[0]?B.throw||((n=B.return)&&n.call(B),0):B.next)&&!(n=n.call(B,o[1])).done)return n;switch(B=0,n&&(o=[o[0]&2,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,B=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!n||o[1]>n[0]&&o[1]<n[3])){t.label=o[1];break}if(o[0]===6&&t.label<n[1]){t.label=n[1],n=o;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(o);break}n[2]&&t.ops.pop(),t.trys.pop();continue}o=A.call(e,t)}catch(Q){o=[6,Q],B=0}finally{r=n=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function ue(e,A,t){if(arguments.length===2)for(var r=0,B=A.length,n;r<B;r++)(n||!(r in A))&&(n||(n=Array.prototype.slice.call(A,0,r)),n[r]=A[r]);return e.concat(n||A)}var cA=function(){function e(A,t,r,B){this.left=A,this.top=t,this.width=r,this.height=B}return e.prototype.add=function(A,t,r,B){return new e(this.left+A,this.top+t,this.width+r,this.height+B)},e.fromClientRect=function(A,t){return new e(t.left+A.windowBounds.left,t.top+A.windowBounds.top,t.width,t.height)},e.fromDOMRectList=function(A,t){var r=Array.from(t).find(function(B){return B.width!==0});return r?new e(r.left+A.windowBounds.left,r.top+A.windowBounds.top,r.width,r.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),ze=function(e,A){return cA.fromClientRect(e,A.getBoundingClientRect())},an=function(e){var A=e.body,t=e.documentElement;if(!A||!t)throw new Error(\"Unable to get document size\");var r=Math.max(Math.max(A.scrollWidth,t.scrollWidth),Math.max(A.offsetWidth,t.offsetWidth),Math.max(A.clientWidth,t.clientWidth)),B=Math.max(Math.max(A.scrollHeight,t.scrollHeight),Math.max(A.offsetHeight,t.offsetHeight),Math.max(A.clientHeight,t.clientHeight));return new cA(0,0,r,B)},$e=function(e){for(var A=[],t=0,r=e.length;t<r;){var B=e.charCodeAt(t++);if(B>=55296&&B<=56319&&t<r){var n=e.charCodeAt(t++);(n&64512)===56320?A.push(((B&1023)<<10)+(n&1023)+65536):(A.push(B),t--)}else A.push(B)}return A},S=function(){for(var e=[],A=0;A<arguments.length;A++)e[A]=arguments[A];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var t=e.length;if(!t)return\"\";for(var r=[],B=-1,n=\"\";++B<t;){var s=e[B];s<=65535?r.push(s):(s-=65536,r.push((s>>10)+55296,s%1024+56320)),(B+1===t||r.length>16384)&&(n+=String.fromCharCode.apply(String,r),r.length=0)}return n},nt=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",on=typeof Uint8Array>\"u\"?[]:new Uint8Array(256);for(var le=0;le<nt.length;le++)on[nt.charCodeAt(le)]=le;var st=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",zA=typeof Uint8Array>\"u\"?[]:new Uint8Array(256);for(var fe=0;fe<st.length;fe++)zA[st.charCodeAt(fe)]=fe;var Qn=function(e){var A=e.length*.75,t=e.length,r,B=0,n,s,i,a;e[e.length-1]===\"=\"&&(A--,e[e.length-2]===\"=\"&&A--);var o=typeof ArrayBuffer<\"u\"&&typeof Uint8Array<\"u\"&&typeof Uint8Array.prototype.slice<\"u\"?new ArrayBuffer(A):new Array(A),Q=Array.isArray(o)?o:new Uint8Array(o);for(r=0;r<t;r+=4)n=zA[e.charCodeAt(r)],s=zA[e.charCodeAt(r+1)],i=zA[e.charCodeAt(r+2)],a=zA[e.charCodeAt(r+3)],Q[B++]=n<<2|s>>4,Q[B++]=(s&15)<<4|i>>2,Q[B++]=(i&3)<<6|a&63;return o},gn=function(e){for(var A=e.length,t=[],r=0;r<A;r+=2)t.push(e[r+1]<<8|e[r]);return t},wn=function(e){for(var A=e.length,t=[],r=0;r<A;r+=4)t.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return t},bA=5,zr=11,ir=2,cn=zr-bA,BB=65536>>bA,Cn=1<<bA,or=Cn-1,un=1024>>bA,ln=BB+un,fn=ln,Un=32,Fn=fn+Un,hn=65536>>zr,dn=1<<cn,En=dn-1,at=function(e,A,t){return e.slice?e.slice(A,t):new Uint16Array(Array.prototype.slice.call(e,A,t))},Hn=function(e,A,t){return e.slice?e.slice(A,t):new Uint32Array(Array.prototype.slice.call(e,A,t))},pn=function(e,A){var t=Qn(e),r=Array.isArray(t)?wn(t):new Uint32Array(t),B=Array.isArray(t)?gn(t):new Uint16Array(t),n=24,s=at(B,n/2,r[4]/2),i=r[5]===2?at(B,(n+r[4])/2):Hn(r,Math.ceil((n+r[4])/4));return new In(r[0],r[1],r[2],r[3],s,i)},In=function(){function e(A,t,r,B,n,s){this.initialValue=A,this.errorValue=t,this.highStart=r,this.highValueIndex=B,this.index=n,this.data=s}return e.prototype.get=function(A){var t;if(A>=0){if(A<55296||A>56319&&A<=65535)return t=this.index[A>>bA],t=(t<<ir)+(A&or),this.data[t];if(A<=65535)return t=this.index[BB+(A-55296>>bA)],t=(t<<ir)+(A&or),this.data[t];if(A<this.highStart)return t=Fn-hn+(A>>zr),t=this.index[t],t+=A>>bA&En,t=this.index[t],t=(t<<ir)+(A&or),this.data[t];if(A<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),it=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",vn=typeof Uint8Array>\"u\"?[]:new Uint8Array(256);for(var Ue=0;Ue<it.length;Ue++)vn[it.charCodeAt(Ue)]=Ue;var yn=\"KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==\",ot=50,Kn=1,nB=2,sB=3,mn=4,Ln=5,Qt=7,aB=8,gt=9,FA=10,Dr=11,wt=12,br=13,Dn=14,$A=15,xr=16,Fe=17,WA=18,bn=19,ct=20,Tr=21,ZA=22,Qr=23,SA=24,j=25,Ae=26,ee=27,OA=28,xn=29,LA=30,Tn=31,he=32,de=33,Sr=34,Or=35,Mr=36,Qe=37,Gr=38,Ge=39,Re=40,gr=41,iB=42,Sn=43,On=[9001,65288],oB=\"!\",I=\"Ã—\",Ee=\"Ã·\",Rr=pn(yn),QA=[LA,Mr],Vr=[Kn,nB,sB,Ln],QB=[FA,aB],Ct=[ee,Ae],Mn=Vr.concat(QB),ut=[Gr,Ge,Re,Sr,Or],Gn=[$A,br],Rn=function(e,A){A===void 0&&(A=\"strict\");var t=[],r=[],B=[];return e.forEach(function(n,s){var i=Rr.get(n);if(i>ot?(B.push(!0),i-=ot):B.push(!1),[\"normal\",\"auto\",\"loose\"].indexOf(A)!==-1&&[8208,8211,12316,12448].indexOf(n)!==-1)return r.push(s),t.push(xr);if(i===mn||i===Dr){if(s===0)return r.push(s),t.push(LA);var a=t[s-1];return Mn.indexOf(a)===-1?(r.push(r[s-1]),t.push(a)):(r.push(s),t.push(LA))}if(r.push(s),i===Tn)return t.push(A===\"strict\"?Tr:Qe);if(i===iB||i===xn)return t.push(LA);if(i===Sn)return n>=131072&&n<=196605||n>=196608&&n<=262141?t.push(Qe):t.push(LA);t.push(i)}),[r,t,B]},wr=function(e,A,t,r){var B=r[t];if(Array.isArray(e)?e.indexOf(B)!==-1:e===B)for(var n=t;n<=r.length;){n++;var s=r[n];if(s===A)return!0;if(s!==FA)break}if(B===FA)for(var n=t;n>0;){n--;var i=r[n];if(Array.isArray(e)?e.indexOf(i)!==-1:e===i)for(var a=t;a<=r.length;){a++;var s=r[a];if(s===A)return!0;if(s!==FA)break}if(i!==FA)break}return!1},lt=function(e,A){for(var t=e;t>=0;){var r=A[t];if(r===FA)t--;else return r}return 0},Vn=function(e,A,t,r,B){if(t[r]===0)return I;var n=r-1;if(Array.isArray(B)&&B[n]===!0)return I;var s=n-1,i=n+1,a=A[n],o=s>=0?A[s]:0,Q=A[i];if(a===nB&&Q===sB)return I;if(Vr.indexOf(a)!==-1)return oB;if(Vr.indexOf(Q)!==-1||QB.indexOf(Q)!==-1)return I;if(lt(n,A)===aB)return Ee;if(Rr.get(e[n])===Dr||(a===he||a===de)&&Rr.get(e[i])===Dr||a===Qt||Q===Qt||a===gt||[FA,br,$A].indexOf(a)===-1&&Q===gt||[Fe,WA,bn,SA,OA].indexOf(Q)!==-1||lt(n,A)===ZA||wr(Qr,ZA,n,A)||wr([Fe,WA],Tr,n,A)||wr(wt,wt,n,A))return I;if(a===FA)return Ee;if(a===Qr||Q===Qr)return I;if(Q===xr||a===xr)return Ee;if([br,$A,Tr].indexOf(Q)!==-1||a===Dn||o===Mr&&Gn.indexOf(a)!==-1||a===OA&&Q===Mr||Q===ct||QA.indexOf(Q)!==-1&&a===j||QA.indexOf(a)!==-1&&Q===j||a===ee&&[Qe,he,de].indexOf(Q)!==-1||[Qe,he,de].indexOf(a)!==-1&&Q===Ae||QA.indexOf(a)!==-1&&Ct.indexOf(Q)!==-1||Ct.indexOf(a)!==-1&&QA.indexOf(Q)!==-1||[ee,Ae].indexOf(a)!==-1&&(Q===j||[ZA,$A].indexOf(Q)!==-1&&A[i+1]===j)||[ZA,$A].indexOf(a)!==-1&&Q===j||a===j&&[j,OA,SA].indexOf(Q)!==-1)return I;if([j,OA,SA,Fe,WA].indexOf(Q)!==-1)for(var g=n;g>=0;){var w=A[g];if(w===j)return I;if([OA,SA].indexOf(w)!==-1)g--;else break}if([ee,Ae].indexOf(Q)!==-1)for(var g=[Fe,WA].indexOf(a)!==-1?s:n;g>=0;){var w=A[g];if(w===j)return I;if([OA,SA].indexOf(w)!==-1)g--;else break}if(Gr===a&&[Gr,Ge,Sr,Or].indexOf(Q)!==-1||[Ge,Sr].indexOf(a)!==-1&&[Ge,Re].indexOf(Q)!==-1||[Re,Or].indexOf(a)!==-1&&Q===Re||ut.indexOf(a)!==-1&&[ct,Ae].indexOf(Q)!==-1||ut.indexOf(Q)!==-1&&a===ee||QA.indexOf(a)!==-1&&QA.indexOf(Q)!==-1||a===SA&&QA.indexOf(Q)!==-1||QA.concat(j).indexOf(a)!==-1&&Q===ZA&&On.indexOf(e[i])===-1||QA.concat(j).indexOf(Q)!==-1&&a===WA)return I;if(a===gr&&Q===gr){for(var f=t[n],c=1;f>0&&(f--,A[f]===gr);)c++;if(c%2!==0)return I}return a===he&&Q===de?I:Ee},Nn=function(e,A){A||(A={lineBreak:\"normal\",wordBreak:\"normal\"});var t=Rn(e,A.lineBreak),r=t[0],B=t[1],n=t[2];(A.wordBreak===\"break-all\"||A.wordBreak===\"break-word\")&&(B=B.map(function(i){return[j,LA,iB].indexOf(i)!==-1?Qe:i}));var s=A.wordBreak===\"keep-all\"?n.map(function(i,a){return i&&e[a]>=19968&&e[a]<=40959}):void 0;return[r,B,s]},Xn=function(){function e(A,t,r,B){this.codePoints=A,this.required=t===oB,this.start=r,this.end=B}return e.prototype.slice=function(){return S.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),_n=function(e,A){var t=$e(e),r=Nn(t,A),B=r[0],n=r[1],s=r[2],i=t.length,a=0,o=0;return{next:function(){if(o>=i)return{done:!0,value:null};for(var Q=I;o<i&&(Q=Vn(t,n,B,++o,s))===I;);if(Q!==I||o===i){var g=new Xn(t,Q,a,o);return a=o,{value:g,done:!1}}return{done:!0,value:null}}}},Jn=1,Pn=2,ce=4,ft=8,Xe=10,Ut=47,ne=92,kn=9,Yn=32,He=34,qA=61,Wn=35,Zn=36,qn=37,pe=39,Ie=40,jA=41,jn=95,Z=45,zn=33,$n=60,As=62,es=64,rs=91,ts=93,Bs=61,ns=123,ve=63,ss=125,Ft=124,as=126,is=128,ht=65533,cr=42,DA=43,os=44,Qs=58,gs=59,ge=46,ws=0,cs=8,Cs=11,us=14,ls=31,fs=127,nA=-1,gB=48,wB=97,cB=101,Us=102,Fs=117,hs=122,CB=65,uB=69,lB=70,ds=85,Es=90,J=function(e){return e>=gB&&e<=57},Hs=function(e){return e>=55296&&e<=57343},MA=function(e){return J(e)||e>=CB&&e<=lB||e>=wB&&e<=Us},ps=function(e){return e>=wB&&e<=hs},Is=function(e){return e>=CB&&e<=Es},vs=function(e){return ps(e)||Is(e)},ys=function(e){return e>=is},ye=function(e){return e===Xe||e===kn||e===Yn},_e=function(e){return vs(e)||ys(e)||e===jn},dt=function(e){return _e(e)||J(e)||e===Z},Ks=function(e){return e>=ws&&e<=cs||e===Cs||e>=us&&e<=ls||e===fs},UA=function(e,A){return e!==ne?!1:A!==Xe},Ke=function(e,A,t){return e===Z?_e(A)||UA(A,t):_e(e)?!0:!!(e===ne&&UA(e,A))},Cr=function(e,A,t){return e===DA||e===Z?J(A)?!0:A===ge&&J(t):J(e===ge?A:e)},ms=function(e){var A=0,t=1;(e[A]===DA||e[A]===Z)&&(e[A]===Z&&(t=-1),A++);for(var r=[];J(e[A]);)r.push(e[A++]);var B=r.length?parseInt(S.apply(void 0,r),10):0;e[A]===ge&&A++;for(var n=[];J(e[A]);)n.push(e[A++]);var s=n.length,i=s?parseInt(S.apply(void 0,n),10):0;(e[A]===uB||e[A]===cB)&&A++;var a=1;(e[A]===DA||e[A]===Z)&&(e[A]===Z&&(a=-1),A++);for(var o=[];J(e[A]);)o.push(e[A++]);var Q=o.length?parseInt(S.apply(void 0,o),10):0;return t*(B+i*Math.pow(10,-s))*Math.pow(10,a*Q)},Ls={type:2},Ds={type:3},bs={type:4},xs={type:13},Ts={type:8},Ss={type:21},Os={type:9},Ms={type:10},Gs={type:11},Rs={type:12},Vs={type:14},me={type:23},Ns={type:1},Xs={type:25},_s={type:24},Js={type:26},Ps={type:27},ks={type:28},Ys={type:29},Ws={type:31},Nr={type:32},fB=function(){function e(){this._value=[]}return e.prototype.write=function(A){this._value=this._value.concat($e(A))},e.prototype.read=function(){for(var A=[],t=this.consumeToken();t!==Nr;)A.push(t),t=this.consumeToken();return A},e.prototype.consumeToken=function(){var A=this.consumeCodePoint();switch(A){case He:return this.consumeStringToken(He);case Wn:var t=this.peekCodePoint(0),r=this.peekCodePoint(1),B=this.peekCodePoint(2);if(dt(t)||UA(r,B)){var n=Ke(t,r,B)?Pn:Jn,s=this.consumeName();return{type:5,value:s,flags:n}}break;case Zn:if(this.peekCodePoint(0)===qA)return this.consumeCodePoint(),xs;break;case pe:return this.consumeStringToken(pe);case Ie:return Ls;case jA:return Ds;case cr:if(this.peekCodePoint(0)===qA)return this.consumeCodePoint(),Vs;break;case DA:if(Cr(A,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(A),this.consumeNumericToken();break;case os:return bs;case Z:var i=A,a=this.peekCodePoint(0),o=this.peekCodePoint(1);if(Cr(i,a,o))return this.reconsumeCodePoint(A),this.consumeNumericToken();if(Ke(i,a,o))return this.reconsumeCodePoint(A),this.consumeIdentLikeToken();if(a===Z&&o===As)return this.consumeCodePoint(),this.consumeCodePoint(),_s;break;case ge:if(Cr(A,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(A),this.consumeNumericToken();break;case Ut:if(this.peekCodePoint(0)===cr)for(this.consumeCodePoint();;){var Q=this.consumeCodePoint();if(Q===cr&&(Q=this.consumeCodePoint(),Q===Ut))return this.consumeToken();if(Q===nA)return this.consumeToken()}break;case Qs:return Js;case gs:return Ps;case $n:if(this.peekCodePoint(0)===zn&&this.peekCodePoint(1)===Z&&this.peekCodePoint(2)===Z)return this.consumeCodePoint(),this.consumeCodePoint(),Xs;break;case es:var g=this.peekCodePoint(0),w=this.peekCodePoint(1),f=this.peekCodePoint(2);if(Ke(g,w,f)){var s=this.consumeName();return{type:7,value:s}}break;case rs:return ks;case ne:if(UA(A,this.peekCodePoint(0)))return this.reconsumeCodePoint(A),this.consumeIdentLikeToken();break;case ts:return Ys;case Bs:if(this.peekCodePoint(0)===qA)return this.consumeCodePoint(),Ts;break;case ns:return Gs;case ss:return Rs;case Fs:case ds:var c=this.peekCodePoint(0),C=this.peekCodePoint(1);return c===DA&&(MA(C)||C===ve)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(A),this.consumeIdentLikeToken();case Ft:if(this.peekCodePoint(0)===qA)return this.consumeCodePoint(),Os;if(this.peekCodePoint(0)===Ft)return this.consumeCodePoint(),Ss;break;case as:if(this.peekCodePoint(0)===qA)return this.consumeCodePoint(),Ms;break;case nA:return Nr}return ye(A)?(this.consumeWhiteSpace(),Ws):J(A)?(this.reconsumeCodePoint(A),this.consumeNumericToken()):_e(A)?(this.reconsumeCodePoint(A),this.consumeIdentLikeToken()):{type:6,value:S(A)}},e.prototype.consumeCodePoint=function(){var A=this._value.shift();return typeof A>\"u\"?-1:A},e.prototype.reconsumeCodePoint=function(A){this._value.unshift(A)},e.prototype.peekCodePoint=function(A){return A>=this._value.length?-1:this._value[A]},e.prototype.consumeUnicodeRangeToken=function(){for(var A=[],t=this.consumeCodePoint();MA(t)&&A.length<6;)A.push(t),t=this.consumeCodePoint();for(var r=!1;t===ve&&A.length<6;)A.push(t),t=this.consumeCodePoint(),r=!0;if(r){var B=parseInt(S.apply(void 0,A.map(function(a){return a===ve?gB:a})),16),n=parseInt(S.apply(void 0,A.map(function(a){return a===ve?lB:a})),16);return{type:30,start:B,end:n}}var s=parseInt(S.apply(void 0,A),16);if(this.peekCodePoint(0)===Z&&MA(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var i=[];MA(t)&&i.length<6;)i.push(t),t=this.consumeCodePoint();var n=parseInt(S.apply(void 0,i),16);return{type:30,start:s,end:n}}else return{type:30,start:s,end:s}},e.prototype.consumeIdentLikeToken=function(){var A=this.consumeName();return A.toLowerCase()===\"url\"&&this.peekCodePoint(0)===Ie?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Ie?(this.consumeCodePoint(),{type:19,value:A}):{type:20,value:A}},e.prototype.consumeUrlToken=function(){var A=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===nA)return{type:22,value:\"\"};var t=this.peekCodePoint(0);if(t===pe||t===He){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===nA||this.peekCodePoint(0)===jA)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),me)}for(;;){var B=this.consumeCodePoint();if(B===nA||B===jA)return{type:22,value:S.apply(void 0,A)};if(ye(B))return this.consumeWhiteSpace(),this.peekCodePoint(0)===nA||this.peekCodePoint(0)===jA?(this.consumeCodePoint(),{type:22,value:S.apply(void 0,A)}):(this.consumeBadUrlRemnants(),me);if(B===He||B===pe||B===Ie||Ks(B))return this.consumeBadUrlRemnants(),me;if(B===ne)if(UA(B,this.peekCodePoint(0)))A.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),me;else A.push(B)}},e.prototype.consumeWhiteSpace=function(){for(;ye(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var A=this.consumeCodePoint();if(A===jA||A===nA)return;UA(A,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(A){for(var t=5e4,r=\"\";A>0;){var B=Math.min(t,A);r+=S.apply(void 0,this._value.splice(0,B)),A-=B}return this._value.shift(),r},e.prototype.consumeStringToken=function(A){var t=\"\",r=0;do{var B=this._value[r];if(B===nA||B===void 0||B===A)return t+=this.consumeStringSlice(r),{type:0,value:t};if(B===Xe)return this._value.splice(0,r),Ns;if(B===ne){var n=this._value[r+1];n!==nA&&n!==void 0&&(n===Xe?(t+=this.consumeStringSlice(r),r=-1,this._value.shift()):UA(B,n)&&(t+=this.consumeStringSlice(r),t+=S(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},e.prototype.consumeNumber=function(){var A=[],t=ce,r=this.peekCodePoint(0);for((r===DA||r===Z)&&A.push(this.consumeCodePoint());J(this.peekCodePoint(0));)A.push(this.consumeCodePoint());r=this.peekCodePoint(0);var B=this.peekCodePoint(1);if(r===ge&&J(B))for(A.push(this.consumeCodePoint(),this.consumeCodePoint()),t=ft;J(this.peekCodePoint(0));)A.push(this.consumeCodePoint());r=this.peekCodePoint(0),B=this.peekCodePoint(1);var n=this.peekCodePoint(2);if((r===uB||r===cB)&&((B===DA||B===Z)&&J(n)||J(B)))for(A.push(this.consumeCodePoint(),this.consumeCodePoint()),t=ft;J(this.peekCodePoint(0));)A.push(this.consumeCodePoint());return[ms(A),t]},e.prototype.consumeNumericToken=function(){var A=this.consumeNumber(),t=A[0],r=A[1],B=this.peekCodePoint(0),n=this.peekCodePoint(1),s=this.peekCodePoint(2);if(Ke(B,n,s)){var i=this.consumeName();return{type:15,number:t,flags:r,unit:i}}return B===qn?(this.consumeCodePoint(),{type:16,number:t,flags:r}):{type:17,number:t,flags:r}},e.prototype.consumeEscapedCodePoint=function(){var A=this.consumeCodePoint();if(MA(A)){for(var t=S(A);MA(this.peekCodePoint(0))&&t.length<6;)t+=S(this.consumeCodePoint());ye(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(t,16);return r===0||Hs(r)||r>1114111?ht:r}return A===nA?ht:A},e.prototype.consumeName=function(){for(var A=\"\";;){var t=this.consumeCodePoint();if(dt(t))A+=S(t);else if(UA(t,this.peekCodePoint(0)))A+=S(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(t),A}},e}(),UB=function(){function e(A){this._tokens=A}return e.create=function(A){var t=new fB;return t.write(A),new e(t.read())},e.parseValue=function(A){return e.create(A).parseComponentValue()},e.parseValues=function(A){return e.create(A).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var A=this.consumeToken();A.type===31;)A=this.consumeToken();if(A.type===32)throw new SyntaxError(\"Error parsing CSS component value, unexpected EOF\");this.reconsumeToken(A);var t=this.consumeComponentValue();do A=this.consumeToken();while(A.type===31);if(A.type===32)return t;throw new SyntaxError(\"Error parsing CSS component value, multiple values found when expecting only one\")},e.prototype.parseComponentValues=function(){for(var A=[];;){var t=this.consumeComponentValue();if(t.type===32)return A;A.push(t),A.push()}},e.prototype.consumeComponentValue=function(){var A=this.consumeToken();switch(A.type){case 11:case 28:case 2:return this.consumeSimpleBlock(A.type);case 19:return this.consumeFunction(A)}return A},e.prototype.consumeSimpleBlock=function(A){for(var t={type:A,values:[]},r=this.consumeToken();;){if(r.type===32||qs(r,A))return t;this.reconsumeToken(r),t.values.push(this.consumeComponentValue()),r=this.consumeToken()}},e.prototype.consumeFunction=function(A){for(var t={name:A.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return t;this.reconsumeToken(r),t.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var A=this._tokens.shift();return typeof A>\"u\"?Nr:A},e.prototype.reconsumeToken=function(A){this._tokens.unshift(A)},e}(),Ce=function(e){return e.type===15},kA=function(e){return e.type===17},D=function(e){return e.type===20},Zs=function(e){return e.type===0},Xr=function(e,A){return D(e)&&e.value===A},FB=function(e){return e.type!==31},PA=function(e){return e.type!==31&&e.type!==4},sA=function(e){var A=[],t=[];return e.forEach(function(r){if(r.type===4){if(t.length===0)throw new Error(\"Error parsing function args, zero tokens for arg\");A.push(t),t=[];return}r.type!==31&&t.push(r)}),t.length&&A.push(t),A},qs=function(e,A){return A===11&&e.type===12||A===28&&e.type===29?!0:A===2&&e.type===3},pA=function(e){return e.type===17||e.type===15},M=function(e){return e.type===16||pA(e)},hB=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},X={type:17,number:0,flags:ce},$r={type:16,number:50,flags:ce},hA={type:16,number:100,flags:ce},re=function(e,A,t){var r=e[0],B=e[1];return[b(r,A),b(typeof B<\"u\"?B:r,t)]},b=function(e,A){if(e.type===16)return e.number/100*A;if(Ce(e))switch(e.unit){case\"rem\":case\"em\":return 16*e.number;case\"px\":default:return e.number}return e.number},dB=\"deg\",EB=\"grad\",HB=\"rad\",pB=\"turn\",Ar={name:\"angle\",parse:function(e,A){if(A.type===15)switch(A.unit){case dB:return Math.PI*A.number/180;case EB:return Math.PI/200*A.number;case HB:return A.number;case pB:return Math.PI*2*A.number}throw new Error(\"Unsupported angle type\")}},IB=function(e){return e.type===15&&(e.unit===dB||e.unit===EB||e.unit===HB||e.unit===pB)},vB=function(e){var A=e.filter(D).map(function(t){return t.value}).join(\" \");switch(A){case\"to bottom right\":case\"to right bottom\":case\"left top\":case\"top left\":return[X,X];case\"to top\":case\"bottom\":return AA(0);case\"to bottom left\":case\"to left bottom\":case\"right top\":case\"top right\":return[X,hA];case\"to right\":case\"left\":return AA(90);case\"to top left\":case\"to left top\":case\"right bottom\":case\"bottom right\":return[hA,hA];case\"to bottom\":case\"top\":return AA(180);case\"to top right\":case\"to right top\":case\"left bottom\":case\"bottom left\":return[hA,X];case\"to left\":case\"right\":return AA(270)}return 0},AA=function(e){return Math.PI*e/180},EA={name:\"color\",parse:function(e,A){if(A.type===18){var t=js[A.name];if(typeof t>\"u\")throw new Error('Attempting to parse an unsupported color function \"'+A.name+'\"');return t(e,A.values)}if(A.type===5){if(A.value.length===3){var r=A.value.substring(0,1),B=A.value.substring(1,2),n=A.value.substring(2,3);return dA(parseInt(r+r,16),parseInt(B+B,16),parseInt(n+n,16),1)}if(A.value.length===4){var r=A.value.substring(0,1),B=A.value.substring(1,2),n=A.value.substring(2,3),s=A.value.substring(3,4);return dA(parseInt(r+r,16),parseInt(B+B,16),parseInt(n+n,16),parseInt(s+s,16)/255)}if(A.value.length===6){var r=A.value.substring(0,2),B=A.value.substring(2,4),n=A.value.substring(4,6);return dA(parseInt(r,16),parseInt(B,16),parseInt(n,16),1)}if(A.value.length===8){var r=A.value.substring(0,2),B=A.value.substring(2,4),n=A.value.substring(4,6),s=A.value.substring(6,8);return dA(parseInt(r,16),parseInt(B,16),parseInt(n,16),parseInt(s,16)/255)}}if(A.type===20){var i=wA[A.value.toUpperCase()];if(typeof i<\"u\")return i}return wA.TRANSPARENT}},HA=function(e){return(255&e)===0},R=function(e){var A=255&e,t=255&e>>8,r=255&e>>16,B=255&e>>24;return A<255?\"rgba(\"+B+\",\"+r+\",\"+t+\",\"+A/255+\")\":\"rgb(\"+B+\",\"+r+\",\"+t+\")\"},dA=function(e,A,t,r){return(e<<24|A<<16|t<<8|Math.round(r*255)<<0)>>>0},Et=function(e,A){if(e.type===17)return e.number;if(e.type===16){var t=A===3?1:255;return A===3?e.number/100*t:Math.round(e.number/100*t)}return 0},Ht=function(e,A){var t=A.filter(PA);if(t.length===3){var r=t.map(Et),B=r[0],n=r[1],s=r[2];return dA(B,n,s,1)}if(t.length===4){var i=t.map(Et),B=i[0],n=i[1],s=i[2],a=i[3];return dA(B,n,s,a)}return 0};function ur(e,A,t){return t<0&&(t+=1),t>=1&&(t-=1),t<1/6?(A-e)*t*6+e:t<1/2?A:t<2/3?(A-e)*6*(2/3-t)+e:e}var pt=function(e,A){var t=A.filter(PA),r=t[0],B=t[1],n=t[2],s=t[3],i=(r.type===17?AA(r.number):Ar.parse(e,r))/(Math.PI*2),a=M(B)?B.number/100:0,o=M(n)?n.number/100:0,Q=typeof s<\"u\"&&M(s)?b(s,1):1;if(a===0)return dA(o*255,o*255,o*255,1);var g=o<=.5?o*(a+1):o+a-o*a,w=o*2-g,f=ur(w,g,i+1/3),c=ur(w,g,i),C=ur(w,g,i-1/3);return dA(f*255,c*255,C*255,Q)},js={hsl:pt,hsla:pt,rgb:Ht,rgba:Ht},se=function(e,A){return EA.parse(e,UB.create(A).parseComponentValue())},wA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},zs={name:\"background-clip\",initialValue:\"border-box\",prefix:!1,type:1,parse:function(e,A){return A.map(function(t){if(D(t))switch(t.value){case\"padding-box\":return 1;case\"content-box\":return 2}return 0})}},$s={name:\"background-color\",initialValue:\"transparent\",prefix:!1,type:3,format:\"color\"},er=function(e,A){var t=EA.parse(e,A[0]),r=A[1];return r&&M(r)?{color:t,stop:r}:{color:t,stop:null}},It=function(e,A){var t=e[0],r=e[e.length-1];t.stop===null&&(t.stop=X),r.stop===null&&(r.stop=hA);for(var B=[],n=0,s=0;s<e.length;s++){var i=e[s].stop;if(i!==null){var a=b(i,A);a>n?B.push(a):B.push(n),n=a}else B.push(null)}for(var o=null,s=0;s<B.length;s++){var Q=B[s];if(Q===null)o===null&&(o=s);else if(o!==null){for(var g=s-o,w=B[o-1],f=(Q-w)/(g+1),c=1;c<=g;c++)B[o+c-1]=f*c;o=null}}return e.map(function(C,H){var h=C.color;return{color:h,stop:Math.max(Math.min(1,B[H]/A),0)}})},Aa=function(e,A,t){var r=A/2,B=t/2,n=b(e[0],A)-r,s=B-b(e[1],t);return(Math.atan2(s,n)+Math.PI*2)%(Math.PI*2)},ea=function(e,A,t){var r=typeof e==\"number\"?e:Aa(e,A,t),B=Math.abs(A*Math.sin(r))+Math.abs(t*Math.cos(r)),n=A/2,s=t/2,i=B/2,a=Math.sin(r-Math.PI/2)*i,o=Math.cos(r-Math.PI/2)*i;return[B,n-o,n+o,s-a,s+a]},rA=function(e,A){return Math.sqrt(e*e+A*A)},vt=function(e,A,t,r,B){var n=[[0,0],[0,A],[e,0],[e,A]];return n.reduce(function(s,i){var a=i[0],o=i[1],Q=rA(t-a,r-o);return(B?Q<s.optimumDistance:Q>s.optimumDistance)?{optimumCorner:i,optimumDistance:Q}:s},{optimumDistance:B?1/0:-1/0,optimumCorner:null}).optimumCorner},ra=function(e,A,t,r,B){var n=0,s=0;switch(e.size){case 0:e.shape===0?n=s=Math.min(Math.abs(A),Math.abs(A-r),Math.abs(t),Math.abs(t-B)):e.shape===1&&(n=Math.min(Math.abs(A),Math.abs(A-r)),s=Math.min(Math.abs(t),Math.abs(t-B)));break;case 2:if(e.shape===0)n=s=Math.min(rA(A,t),rA(A,t-B),rA(A-r,t),rA(A-r,t-B));else if(e.shape===1){var i=Math.min(Math.abs(t),Math.abs(t-B))/Math.min(Math.abs(A),Math.abs(A-r)),a=vt(r,B,A,t,!0),o=a[0],Q=a[1];n=rA(o-A,(Q-t)/i),s=i*n}break;case 1:e.shape===0?n=s=Math.max(Math.abs(A),Math.abs(A-r),Math.abs(t),Math.abs(t-B)):e.shape===1&&(n=Math.max(Math.abs(A),Math.abs(A-r)),s=Math.max(Math.abs(t),Math.abs(t-B)));break;case 3:if(e.shape===0)n=s=Math.max(rA(A,t),rA(A,t-B),rA(A-r,t),rA(A-r,t-B));else if(e.shape===1){var i=Math.max(Math.abs(t),Math.abs(t-B))/Math.max(Math.abs(A),Math.abs(A-r)),g=vt(r,B,A,t,!1),o=g[0],Q=g[1];n=rA(o-A,(Q-t)/i),s=i*n}break}return Array.isArray(e.size)&&(n=b(e.size[0],r),s=e.size.length===2?b(e.size[1],B):n),[n,s]},ta=function(e,A){var t=AA(180),r=[];return sA(A).forEach(function(B,n){if(n===0){var s=B[0];if(s.type===20&&s.value===\"to\"){t=vB(B);return}else if(IB(s)){t=Ar.parse(e,s);return}}var i=er(e,B);r.push(i)}),{angle:t,stops:r,type:1}},Le=function(e,A){var t=AA(180),r=[];return sA(A).forEach(function(B,n){if(n===0){var s=B[0];if(s.type===20&&[\"top\",\"left\",\"right\",\"bottom\"].indexOf(s.value)!==-1){t=vB(B);return}else if(IB(s)){t=(Ar.parse(e,s)+AA(270))%AA(360);return}}var i=er(e,B);r.push(i)}),{angle:t,stops:r,type:1}},Ba=function(e,A){var t=AA(180),r=[],B=1,n=0,s=3,i=[];return sA(A).forEach(function(a,o){var Q=a[0];if(o===0){if(D(Q)&&Q.value===\"linear\"){B=1;return}else if(D(Q)&&Q.value===\"radial\"){B=2;return}}if(Q.type===18){if(Q.name===\"from\"){var g=EA.parse(e,Q.values[0]);r.push({stop:X,color:g})}else if(Q.name===\"to\"){var g=EA.parse(e,Q.values[0]);r.push({stop:hA,color:g})}else if(Q.name===\"color-stop\"){var w=Q.values.filter(PA);if(w.length===2){var g=EA.parse(e,w[1]),f=w[0];kA(f)&&r.push({stop:{type:16,number:f.number*100,flags:f.flags},color:g})}}}}),B===1?{angle:(t+AA(180))%AA(360),stops:r,type:B}:{size:s,shape:n,stops:r,position:i,type:B}},yB=\"closest-side\",KB=\"farthest-side\",mB=\"closest-corner\",LB=\"farthest-corner\",DB=\"circle\",bB=\"ellipse\",xB=\"cover\",TB=\"contain\",na=function(e,A){var t=0,r=3,B=[],n=[];return sA(A).forEach(function(s,i){var a=!0;if(i===0){var o=!1;a=s.reduce(function(g,w){if(o)if(D(w))switch(w.value){case\"center\":return n.push($r),g;case\"top\":case\"left\":return n.push(X),g;case\"right\":case\"bottom\":return n.push(hA),g}else(M(w)||pA(w))&&n.push(w);else if(D(w))switch(w.value){case DB:return t=0,!1;case bB:return t=1,!1;case\"at\":return o=!0,!1;case yB:return r=0,!1;case xB:case KB:return r=1,!1;case TB:case mB:return r=2,!1;case LB:return r=3,!1}else if(pA(w)||M(w))return Array.isArray(r)||(r=[]),r.push(w),!1;return g},a)}if(a){var Q=er(e,s);B.push(Q)}}),{size:r,shape:t,stops:B,position:n,type:2}},De=function(e,A){var t=0,r=3,B=[],n=[];return sA(A).forEach(function(s,i){var a=!0;if(i===0?a=s.reduce(function(Q,g){if(D(g))switch(g.value){case\"center\":return n.push($r),!1;case\"top\":case\"left\":return n.push(X),!1;case\"right\":case\"bottom\":return n.push(hA),!1}else if(M(g)||pA(g))return n.push(g),!1;return Q},a):i===1&&(a=s.reduce(function(Q,g){if(D(g))switch(g.value){case DB:return t=0,!1;case bB:return t=1,!1;case TB:case yB:return r=0,!1;case KB:return r=1,!1;case mB:return r=2,!1;case xB:case LB:return r=3,!1}else if(pA(g)||M(g))return Array.isArray(r)||(r=[]),r.push(g),!1;return Q},a)),a){var o=er(e,s);B.push(o)}}),{size:r,shape:t,stops:B,position:n,type:2}},sa=function(e){return e.type===1},aa=function(e){return e.type===2},At={name:\"image\",parse:function(e,A){if(A.type===22){var t={url:A.value,type:0};return e.cache.addImage(A.value),t}if(A.type===18){var r=SB[A.name];if(typeof r>\"u\")throw new Error('Attempting to parse an unsupported image function \"'+A.name+'\"');return r(e,A.values)}throw new Error(\"Unsupported image type \"+A.type)}};function ia(e){return!(e.type===20&&e.value===\"none\")&&(e.type!==18||!!SB[e.name])}var SB={\"linear-gradient\":ta,\"-moz-linear-gradient\":Le,\"-ms-linear-gradient\":Le,\"-o-linear-gradient\":Le,\"-webkit-linear-gradient\":Le,\"radial-gradient\":na,\"-moz-radial-gradient\":De,\"-ms-radial-gradient\":De,\"-o-radial-gradient\":De,\"-webkit-radial-gradient\":De,\"-webkit-gradient\":Ba},oa={name:\"background-image\",initialValue:\"none\",type:1,prefix:!1,parse:function(e,A){if(A.length===0)return[];var t=A[0];return t.type===20&&t.value===\"none\"?[]:A.filter(function(r){return PA(r)&&ia(r)}).map(function(r){return At.parse(e,r)})}},Qa={name:\"background-origin\",initialValue:\"border-box\",prefix:!1,type:1,parse:function(e,A){return A.map(function(t){if(D(t))switch(t.value){case\"padding-box\":return 1;case\"content-box\":return 2}return 0})}},ga={name:\"background-position\",initialValue:\"0% 0%\",type:1,prefix:!1,parse:function(e,A){return sA(A).map(function(t){return t.filter(M)}).map(hB)}},wa={name:\"background-repeat\",initialValue:\"repeat\",prefix:!1,type:1,parse:function(e,A){return sA(A).map(function(t){return t.filter(D).map(function(r){return r.value}).join(\" \")}).map(ca)}},ca=function(e){switch(e){case\"no-repeat\":return 1;case\"repeat-x\":case\"repeat no-repeat\":return 2;case\"repeat-y\":case\"no-repeat repeat\":return 3;case\"repeat\":default:return 0}},JA;(function(e){e.AUTO=\"auto\",e.CONTAIN=\"contain\",e.COVER=\"cover\"})(JA||(JA={}));var Ca={name:\"background-size\",initialValue:\"0\",prefix:!1,type:1,parse:function(e,A){return sA(A).map(function(t){return t.filter(ua)})}},ua=function(e){return D(e)||M(e)},rr=function(e){return{name:\"border-\"+e+\"-color\",initialValue:\"transparent\",prefix:!1,type:3,format:\"color\"}},la=rr(\"top\"),fa=rr(\"right\"),Ua=rr(\"bottom\"),Fa=rr(\"left\"),tr=function(e){return{name:\"border-radius-\"+e,initialValue:\"0 0\",prefix:!1,type:1,parse:function(A,t){return hB(t.filter(M))}}},ha=tr(\"top-left\"),da=tr(\"top-right\"),Ea=tr(\"bottom-right\"),Ha=tr(\"bottom-left\"),Br=function(e){return{name:\"border-\"+e+\"-style\",initialValue:\"solid\",prefix:!1,type:2,parse:function(A,t){switch(t){case\"none\":return 0;case\"dashed\":return 2;case\"dotted\":return 3;case\"double\":return 4}return 1}}},pa=Br(\"top\"),Ia=Br(\"right\"),va=Br(\"bottom\"),ya=Br(\"left\"),nr=function(e){return{name:\"border-\"+e+\"-width\",initialValue:\"0\",type:0,prefix:!1,parse:function(A,t){return Ce(t)?t.number:0}}},Ka=nr(\"top\"),ma=nr(\"right\"),La=nr(\"bottom\"),Da=nr(\"left\"),ba={name:\"color\",initialValue:\"transparent\",prefix:!1,type:3,format:\"color\"},xa={name:\"direction\",initialValue:\"ltr\",prefix:!1,type:2,parse:function(e,A){switch(A){case\"rtl\":return 1;case\"ltr\":default:return 0}}},Ta={name:\"display\",initialValue:\"inline-block\",prefix:!1,type:1,parse:function(e,A){return A.filter(D).reduce(function(t,r){return t|Sa(r.value)},0)}},Sa=function(e){switch(e){case\"block\":case\"-webkit-box\":return 2;case\"inline\":return 4;case\"run-in\":return 8;case\"flow\":return 16;case\"flow-root\":return 32;case\"table\":return 64;case\"flex\":case\"-webkit-flex\":return 128;case\"grid\":case\"-ms-grid\":return 256;case\"ruby\":return 512;case\"subgrid\":return 1024;case\"list-item\":return 2048;case\"table-row-group\":return 4096;case\"table-header-group\":return 8192;case\"table-footer-group\":return 16384;case\"table-row\":return 32768;case\"table-cell\":return 65536;case\"table-column-group\":return 131072;case\"table-column\":return 262144;case\"table-caption\":return 524288;case\"ruby-base\":return 1048576;case\"ruby-text\":return 2097152;case\"ruby-base-container\":return 4194304;case\"ruby-text-container\":return 8388608;case\"contents\":return 16777216;case\"inline-block\":return 33554432;case\"inline-list-item\":return 67108864;case\"inline-table\":return 134217728;case\"inline-flex\":return 268435456;case\"inline-grid\":return 536870912}return 0},Oa={name:\"float\",initialValue:\"none\",prefix:!1,type:2,parse:function(e,A){switch(A){case\"left\":return 1;case\"right\":return 2;case\"inline-start\":return 3;case\"inline-end\":return 4}return 0}},Ma={name:\"letter-spacing\",initialValue:\"0\",prefix:!1,type:0,parse:function(e,A){return A.type===20&&A.value===\"normal\"?0:A.type===17||A.type===15?A.number:0}},Je;(function(e){e.NORMAL=\"normal\",e.STRICT=\"strict\"})(Je||(Je={}));var Ga={name:\"line-break\",initialValue:\"normal\",prefix:!1,type:2,parse:function(e,A){switch(A){case\"strict\":return Je.STRICT;case\"normal\":default:return Je.NORMAL}}},Ra={name:\"line-height\",initialValue:\"normal\",prefix:!1,type:4},yt=function(e,A){return D(e)&&e.value===\"normal\"?1.2*A:e.type===17?A*e.number:M(e)?b(e,A):A},Va={name:\"list-style-image\",initialValue:\"none\",type:0,prefix:!1,parse:function(e,A){return A.type===20&&A.value===\"none\"?null:At.parse(e,A)}},Na={name:\"list-style-position\",initialValue:\"outside\",prefix:!1,type:2,parse:function(e,A){switch(A){case\"inside\":return 0;case\"outside\":default:return 1}}},_r={name:\"list-style-type\",initialValue:\"none\",prefix:!1,type:2,parse:function(e,A){switch(A){case\"disc\":return 0;case\"circle\":return 1;case\"square\":return 2;case\"decimal\":return 3;case\"cjk-decimal\":return 4;case\"decimal-leading-zero\":return 5;case\"lower-roman\":return 6;case\"upper-roman\":return 7;case\"lower-greek\":return 8;case\"lower-alpha\":return 9;case\"upper-alpha\":return 10;case\"arabic-indic\":return 11;case\"armenian\":return 12;case\"bengali\":return 13;case\"cambodian\":return 14;case\"cjk-earthly-branch\":return 15;case\"cjk-heavenly-stem\":return 16;case\"cjk-ideographic\":return 17;case\"devanagari\":return 18;case\"ethiopic-numeric\":return 19;case\"georgian\":return 20;case\"gujarati\":return 21;case\"gurmukhi\":return 22;case\"hebrew\":return 22;case\"hiragana\":return 23;case\"hiragana-iroha\":return 24;case\"japanese-formal\":return 25;case\"japanese-informal\":return 26;case\"kannada\":return 27;case\"katakana\":return 28;case\"katakana-iroha\":return 29;case\"khmer\":return 30;case\"korean-hangul-formal\":return 31;case\"korean-hanja-formal\":return 32;case\"korean-hanja-informal\":return 33;case\"lao\":return 34;case\"lower-armenian\":return 35;case\"malayalam\":return 36;case\"mongolian\":return 37;case\"myanmar\":return 38;case\"oriya\":return 39;case\"persian\":return 40;case\"simp-chinese-formal\":return 41;case\"simp-chinese-informal\":return 42;case\"tamil\":return 43;case\"telugu\":return 44;case\"thai\":return 45;case\"tibetan\":return 46;case\"trad-chinese-formal\":return 47;case\"trad-chinese-informal\":return 48;case\"upper-armenian\":return 49;case\"disclosure-open\":return 50;case\"disclosure-closed\":return 51;case\"none\":default:return-1}}},sr=function(e){return{name:\"margin-\"+e,initialValue:\"0\",prefix:!1,type:4}},Xa=sr(\"top\"),_a=sr(\"right\"),Ja=sr(\"bottom\"),Pa=sr(\"left\"),ka={name:\"overflow\",initialValue:\"visible\",prefix:!1,type:1,parse:function(e,A){return A.filter(D).map(function(t){switch(t.value){case\"hidden\":return 1;case\"scroll\":return 2;case\"clip\":return 3;case\"auto\":return 4;case\"visible\":default:return 0}})}},Ya={name:\"overflow-wrap\",initialValue:\"normal\",prefix:!1,type:2,parse:function(e,A){switch(A){case\"break-word\":return\"break-word\";case\"normal\":default:return\"normal\"}}},ar=function(e){return{name:\"padding-\"+e,initialValue:\"0\",prefix:!1,type:3,format:\"length-percentage\"}},Wa=ar(\"top\"),Za=ar(\"right\"),qa=ar(\"bottom\"),ja=ar(\"left\"),za={name:\"text-align\",initialValue:\"left\",prefix:!1,type:2,parse:function(e,A){switch(A){case\"right\":return 2;case\"center\":case\"justify\":return 1;case\"left\":default:return 0}}},$a={name:\"position\",initialValue:\"static\",prefix:!1,type:2,parse:function(e,A){switch(A){case\"relative\":return 1;case\"absolute\":return 2;case\"fixed\":return 3;case\"sticky\":return 4}return 0}},Ai={name:\"text-shadow\",initialValue:\"none\",type:1,prefix:!1,parse:function(e,A){return A.length===1&&Xr(A[0],\"none\")?[]:sA(A).map(function(t){for(var r={color:wA.TRANSPARENT,offsetX:X,offsetY:X,blur:X},B=0,n=0;n<t.length;n++){var s=t[n];pA(s)?(B===0?r.offsetX=s:B===1?r.offsetY=s:r.blur=s,B++):r.color=EA.parse(e,s)}return r})}},ei={name:\"text-transform\",initialValue:\"none\",prefix:!1,type:2,parse:function(e,A){switch(A){case\"uppercase\":return 2;case\"lowercase\":return 1;case\"capitalize\":return 3}return 0}},ri={name:\"transform\",initialValue:\"none\",prefix:!0,type:0,parse:function(e,A){if(A.type===20&&A.value===\"none\")return null;if(A.type===18){var t=ni[A.name];if(typeof t>\"u\")throw new Error('Attempting to parse an unsupported transform function \"'+A.name+'\"');return t(A.values)}return null}},ti=function(e){var A=e.filter(function(t){return t.type===17}).map(function(t){return t.number});return A.length===6?A:null},Bi=function(e){var A=e.filter(function(a){return a.type===17}).map(function(a){return a.number}),t=A[0],r=A[1];A[2],A[3];var B=A[4],n=A[5];A[6],A[7],A[8],A[9],A[10],A[11];var s=A[12],i=A[13];return A[14],A[15],A.length===16?[t,r,B,n,s,i]:null},ni={matrix:ti,matrix3d:Bi},Kt={type:16,number:50,flags:ce},si=[Kt,Kt],ai={name:\"transform-origin\",initialValue:\"50% 50%\",prefix:!0,type:1,parse:function(e,A){var t=A.filter(M);return t.length!==2?si:[t[0],t[1]]}},ii={name:\"visible\",initialValue:\"none\",prefix:!1,type:2,parse:function(e,A){switch(A){case\"hidden\":return 1;case\"collapse\":return 2;case\"visible\":default:return 0}}},ae;(function(e){e.NORMAL=\"normal\",e.BREAK_ALL=\"break-all\",e.KEEP_ALL=\"keep-all\"})(ae||(ae={}));var oi={name:\"word-break\",initialValue:\"normal\",prefix:!1,type:2,parse:function(e,A){switch(A){case\"break-all\":return ae.BREAK_ALL;case\"keep-all\":return ae.KEEP_ALL;case\"normal\":default:return ae.NORMAL}}},Qi={name:\"z-index\",initialValue:\"auto\",prefix:!1,type:0,parse:function(e,A){if(A.type===20)return{auto:!0,order:0};if(kA(A))return{auto:!1,order:A.number};throw new Error(\"Invalid z-index number parsed\")}},OB={name:\"time\",parse:function(e,A){if(A.type===15)switch(A.unit.toLowerCase()){case\"s\":return 1e3*A.number;case\"ms\":return A.number}throw new Error(\"Unsupported time type\")}},gi={name:\"opacity\",initialValue:\"1\",type:0,prefix:!1,parse:function(e,A){return kA(A)?A.number:1}},wi={name:\"text-decoration-color\",initialValue:\"transparent\",prefix:!1,type:3,format:\"color\"},ci={name:\"text-decoration-line\",initialValue:\"none\",prefix:!1,type:1,parse:function(e,A){return A.filter(D).map(function(t){switch(t.value){case\"underline\":return 1;case\"overline\":return 2;case\"line-through\":return 3;case\"none\":return 4}return 0}).filter(function(t){return t!==0})}},Ci={name:\"font-family\",initialValue:\"\",prefix:!1,type:1,parse:function(e,A){var t=[],r=[];return A.forEach(function(B){switch(B.type){case 20:case 0:t.push(B.value);break;case 17:t.push(B.number.toString());break;case 4:r.push(t.join(\" \")),t.length=0;break}}),t.length&&r.push(t.join(\" \")),r.map(function(B){return B.indexOf(\" \")===-1?B:\"'\"+B+\"'\"})}},ui={name:\"font-size\",initialValue:\"0\",prefix:!1,type:3,format:\"length\"},li={name:\"font-weight\",initialValue:\"normal\",type:0,prefix:!1,parse:function(e,A){if(kA(A))return A.number;if(D(A))switch(A.value){case\"bold\":return 700;case\"normal\":default:return 400}return 400}},fi={name:\"font-variant\",initialValue:\"none\",type:1,prefix:!1,parse:function(e,A){return A.filter(D).map(function(t){return t.value})}},Ui={name:\"font-style\",initialValue:\"normal\",prefix:!1,type:2,parse:function(e,A){switch(A){case\"oblique\":return\"oblique\";case\"italic\":return\"italic\";case\"normal\":default:return\"normal\"}}},G=function(e,A){return(e&A)!==0},Fi={name:\"content\",initialValue:\"none\",type:1,prefix:!1,parse:function(e,A){if(A.length===0)return[];var t=A[0];return t.type===20&&t.value===\"none\"?[]:A}},hi={name:\"counter-increment\",initialValue:\"none\",prefix:!0,type:1,parse:function(e,A){if(A.length===0)return null;var t=A[0];if(t.type===20&&t.value===\"none\")return null;for(var r=[],B=A.filter(FB),n=0;n<B.length;n++){var s=B[n],i=B[n+1];if(s.type===20){var a=i&&kA(i)?i.number:1;r.push({counter:s.value,increment:a})}}return r}},di={name:\"counter-reset\",initialValue:\"none\",prefix:!0,type:1,parse:function(e,A){if(A.length===0)return[];for(var t=[],r=A.filter(FB),B=0;B<r.length;B++){var n=r[B],s=r[B+1];if(D(n)&&n.value!==\"none\"){var i=s&&kA(s)?s.number:0;t.push({counter:n.value,reset:i})}}return t}},Ei={name:\"duration\",initialValue:\"0s\",prefix:!1,type:1,parse:function(e,A){return A.filter(Ce).map(function(t){return OB.parse(e,t)})}},Hi={name:\"quotes\",initialValue:\"none\",prefix:!0,type:1,parse:function(e,A){if(A.length===0)return null;var t=A[0];if(t.type===20&&t.value===\"none\")return null;var r=[],B=A.filter(Zs);if(B.length%2!==0)return null;for(var n=0;n<B.length;n+=2){var s=B[n].value,i=B[n+1].value;r.push({open:s,close:i})}return r}},mt=function(e,A,t){if(!e)return\"\";var r=e[Math.min(A,e.length-1)];return r?t?r.open:r.close:\"\"},pi={name:\"box-shadow\",initialValue:\"none\",type:1,prefix:!1,parse:function(e,A){return A.length===1&&Xr(A[0],\"none\")?[]:sA(A).map(function(t){for(var r={color:255,offsetX:X,offsetY:X,blur:X,spread:X,inset:!1},B=0,n=0;n<t.length;n++){var s=t[n];Xr(s,\"inset\")?r.inset=!0:pA(s)?(B===0?r.offsetX=s:B===1?r.offsetY=s:B===2?r.blur=s:r.spread=s,B++):r.color=EA.parse(e,s)}return r})}},Ii={name:\"paint-order\",initialValue:\"normal\",prefix:!1,type:1,parse:function(e,A){var t=[0,1,2],r=[];return A.filter(D).forEach(function(B){switch(B.value){case\"stroke\":r.push(1);break;case\"fill\":r.push(0);break;case\"markers\":r.push(2);break}}),t.forEach(function(B){r.indexOf(B)===-1&&r.push(B)}),r}},vi={name:\"-webkit-text-stroke-color\",initialValue:\"currentcolor\",prefix:!1,type:3,format:\"color\"},yi={name:\"-webkit-text-stroke-width\",initialValue:\"0\",type:0,prefix:!1,parse:function(e,A){return Ce(A)?A.number:0}},Ki=function(){function e(A,t){var r,B;this.animationDuration=U(A,Ei,t.animationDuration),this.backgroundClip=U(A,zs,t.backgroundClip),this.backgroundColor=U(A,$s,t.backgroundColor),this.backgroundImage=U(A,oa,t.backgroundImage),this.backgroundOrigin=U(A,Qa,t.backgroundOrigin),this.backgroundPosition=U(A,ga,t.backgroundPosition),this.backgroundRepeat=U(A,wa,t.backgroundRepeat),this.backgroundSize=U(A,Ca,t.backgroundSize),this.borderTopColor=U(A,la,t.borderTopColor),this.borderRightColor=U(A,fa,t.borderRightColor),this.borderBottomColor=U(A,Ua,t.borderBottomColor),this.borderLeftColor=U(A,Fa,t.borderLeftColor),this.borderTopLeftRadius=U(A,ha,t.borderTopLeftRadius),this.borderTopRightRadius=U(A,da,t.borderTopRightRadius),this.borderBottomRightRadius=U(A,Ea,t.borderBottomRightRadius),this.borderBottomLeftRadius=U(A,Ha,t.borderBottomLeftRadius),this.borderTopStyle=U(A,pa,t.borderTopStyle),this.borderRightStyle=U(A,Ia,t.borderRightStyle),this.borderBottomStyle=U(A,va,t.borderBottomStyle),this.borderLeftStyle=U(A,ya,t.borderLeftStyle),this.borderTopWidth=U(A,Ka,t.borderTopWidth),this.borderRightWidth=U(A,ma,t.borderRightWidth),this.borderBottomWidth=U(A,La,t.borderBottomWidth),this.borderLeftWidth=U(A,Da,t.borderLeftWidth),this.boxShadow=U(A,pi,t.boxShadow),this.color=U(A,ba,t.color),this.direction=U(A,xa,t.direction),this.display=U(A,Ta,t.display),this.float=U(A,Oa,t.cssFloat),this.fontFamily=U(A,Ci,t.fontFamily),this.fontSize=U(A,ui,t.fontSize),this.fontStyle=U(A,Ui,t.fontStyle),this.fontVariant=U(A,fi,t.fontVariant),this.fontWeight=U(A,li,t.fontWeight),this.letterSpacing=U(A,Ma,t.letterSpacing),this.lineBreak=U(A,Ga,t.lineBreak),this.lineHeight=U(A,Ra,t.lineHeight),this.listStyleImage=U(A,Va,t.listStyleImage),this.listStylePosition=U(A,Na,t.listStylePosition),this.listStyleType=U(A,_r,t.listStyleType),this.marginTop=U(A,Xa,t.marginTop),this.marginRight=U(A,_a,t.marginRight),this.marginBottom=U(A,Ja,t.marginBottom),this.marginLeft=U(A,Pa,t.marginLeft),this.opacity=U(A,gi,t.opacity);var n=U(A,ka,t.overflow);this.overflowX=n[0],this.overflowY=n[n.length>1?1:0],this.overflowWrap=U(A,Ya,t.overflowWrap),this.paddingTop=U(A,Wa,t.paddingTop),this.paddingRight=U(A,Za,t.paddingRight),this.paddingBottom=U(A,qa,t.paddingBottom),this.paddingLeft=U(A,ja,t.paddingLeft),this.paintOrder=U(A,Ii,t.paintOrder),this.position=U(A,$a,t.position),this.textAlign=U(A,za,t.textAlign),this.textDecorationColor=U(A,wi,(r=t.textDecorationColor)!==null&&r!==void 0?r:t.color),this.textDecorationLine=U(A,ci,(B=t.textDecorationLine)!==null&&B!==void 0?B:t.textDecoration),this.textShadow=U(A,Ai,t.textShadow),this.textTransform=U(A,ei,t.textTransform),this.transform=U(A,ri,t.transform),this.transformOrigin=U(A,ai,t.transformOrigin),this.visibility=U(A,ii,t.visibility),this.webkitTextStrokeColor=U(A,vi,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=U(A,yi,t.webkitTextStrokeWidth),this.wordBreak=U(A,oi,t.wordBreak),this.zIndex=U(A,Qi,t.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return HA(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return G(this.display,4)||G(this.display,33554432)||G(this.display,268435456)||G(this.display,536870912)||G(this.display,67108864)||G(this.display,134217728)},e}(),mi=function(){function e(A,t){this.content=U(A,Fi,t.content),this.quotes=U(A,Hi,t.quotes)}return e}(),Lt=function(){function e(A,t){this.counterIncrement=U(A,hi,t.counterIncrement),this.counterReset=U(A,di,t.counterReset)}return e}(),U=function(e,A,t){var r=new fB,B=t!==null&&typeof t<\"u\"?t.toString():A.initialValue;r.write(B);var n=new UB(r.read());switch(A.type){case 2:var s=n.parseComponentValue();return A.parse(e,D(s)?s.value:A.initialValue);case 0:return A.parse(e,n.parseComponentValue());case 1:return A.parse(e,n.parseComponentValues());case 4:return n.parseComponentValue();case 3:switch(A.format){case\"angle\":return Ar.parse(e,n.parseComponentValue());case\"color\":return EA.parse(e,n.parseComponentValue());case\"image\":return At.parse(e,n.parseComponentValue());case\"length\":var i=n.parseComponentValue();return pA(i)?i:X;case\"length-percentage\":var a=n.parseComponentValue();return M(a)?a:X;case\"time\":return OB.parse(e,n.parseComponentValue())}break}},Li=\"data-html2canvas-debug\",Di=function(e){var A=e.getAttribute(Li);switch(A){case\"all\":return 1;case\"clone\":return 2;case\"parse\":return 3;case\"render\":return 4;default:return 0}},Jr=function(e,A){var t=Di(e);return t===1||A===t},aA=function(){function e(A,t){if(this.context=A,this.textNodes=[],this.elements=[],this.flags=0,Jr(t,3))debugger;this.styles=new Ki(A,window.getComputedStyle(t,null)),Yr(t)&&(this.styles.animationDuration.some(function(r){return r>0})&&(t.style.animationDuration=\"0s\"),this.styles.transform!==null&&(t.style.transform=\"none\")),this.bounds=ze(this.context,t),Jr(t,4)&&(this.flags|=16)}return e}(),bi=\"AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=\",Dt=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",te=typeof Uint8Array>\"u\"?[]:new Uint8Array(256);for(var be=0;be<Dt.length;be++)te[Dt.charCodeAt(be)]=be;var xi=function(e){var A=e.length*.75,t=e.length,r,B=0,n,s,i,a;e[e.length-1]===\"=\"&&(A--,e[e.length-2]===\"=\"&&A--);var o=typeof ArrayBuffer<\"u\"&&typeof Uint8Array<\"u\"&&typeof Uint8Array.prototype.slice<\"u\"?new ArrayBuffer(A):new Array(A),Q=Array.isArray(o)?o:new Uint8Array(o);for(r=0;r<t;r+=4)n=te[e.charCodeAt(r)],s=te[e.charCodeAt(r+1)],i=te[e.charCodeAt(r+2)],a=te[e.charCodeAt(r+3)],Q[B++]=n<<2|s>>4,Q[B++]=(s&15)<<4|i>>2,Q[B++]=(i&3)<<6|a&63;return o},Ti=function(e){for(var A=e.length,t=[],r=0;r<A;r+=2)t.push(e[r+1]<<8|e[r]);return t},Si=function(e){for(var A=e.length,t=[],r=0;r<A;r+=4)t.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return t},xA=5,et=11,lr=2,Oi=et-xA,MB=65536>>xA,Mi=1<<xA,fr=Mi-1,Gi=1024>>xA,Ri=MB+Gi,Vi=Ri,Ni=32,Xi=Vi+Ni,_i=65536>>et,Ji=1<<Oi,Pi=Ji-1,bt=function(e,A,t){return e.slice?e.slice(A,t):new Uint16Array(Array.prototype.slice.call(e,A,t))},ki=function(e,A,t){return e.slice?e.slice(A,t):new Uint32Array(Array.prototype.slice.call(e,A,t))},Yi=function(e,A){var t=xi(e),r=Array.isArray(t)?Si(t):new Uint32Array(t),B=Array.isArray(t)?Ti(t):new Uint16Array(t),n=24,s=bt(B,n/2,r[4]/2),i=r[5]===2?bt(B,(n+r[4])/2):ki(r,Math.ceil((n+r[4])/4));return new Wi(r[0],r[1],r[2],r[3],s,i)},Wi=function(){function e(A,t,r,B,n,s){this.initialValue=A,this.errorValue=t,this.highStart=r,this.highValueIndex=B,this.index=n,this.data=s}return e.prototype.get=function(A){var t;if(A>=0){if(A<55296||A>56319&&A<=65535)return t=this.index[A>>xA],t=(t<<lr)+(A&fr),this.data[t];if(A<=65535)return t=this.index[MB+(A-55296>>xA)],t=(t<<lr)+(A&fr),this.data[t];if(A<this.highStart)return t=Xi-_i+(A>>et),t=this.index[t],t+=A>>xA&Pi,t=this.index[t],t=(t<<lr)+(A&fr),this.data[t];if(A<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),xt=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",Zi=typeof Uint8Array>\"u\"?[]:new Uint8Array(256);for(var xe=0;xe<xt.length;xe++)Zi[xt.charCodeAt(xe)]=xe;var qi=1,Ur=2,Fr=3,Tt=4,St=5,ji=7,Ot=8,hr=9,dr=10,Mt=11,Gt=12,Rt=13,Vt=14,Er=15,zi=function(e){for(var A=[],t=0,r=e.length;t<r;){var B=e.charCodeAt(t++);if(B>=55296&&B<=56319&&t<r){var n=e.charCodeAt(t++);(n&64512)===56320?A.push(((B&1023)<<10)+(n&1023)+65536):(A.push(B),t--)}else A.push(B)}return A},$i=function(){for(var e=[],A=0;A<arguments.length;A++)e[A]=arguments[A];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var t=e.length;if(!t)return\"\";for(var r=[],B=-1,n=\"\";++B<t;){var s=e[B];s<=65535?r.push(s):(s-=65536,r.push((s>>10)+55296,s%1024+56320)),(B+1===t||r.length>16384)&&(n+=String.fromCharCode.apply(String,r),r.length=0)}return n},Ao=Yi(bi),z=\"Ã—\",Hr=\"Ã·\",eo=function(e){return Ao.get(e)},ro=function(e,A,t){var r=t-2,B=A[r],n=A[t-1],s=A[t];if(n===Ur&&s===Fr)return z;if(n===Ur||n===Fr||n===Tt||s===Ur||s===Fr||s===Tt)return Hr;if(n===Ot&&[Ot,hr,Mt,Gt].indexOf(s)!==-1||(n===Mt||n===hr)&&(s===hr||s===dr)||(n===Gt||n===dr)&&s===dr||s===Rt||s===St||s===ji||n===qi)return z;if(n===Rt&&s===Vt){for(;B===St;)B=A[--r];if(B===Vt)return z}if(n===Er&&s===Er){for(var i=0;B===Er;)i++,B=A[--r];if(i%2===0)return z}return Hr},to=function(e){var A=zi(e),t=A.length,r=0,B=0,n=A.map(eo);return{next:function(){if(r>=t)return{done:!0,value:null};for(var s=z;r<t&&(s=ro(A,n,++r))===z;);if(s!==z||r===t){var i=$i.apply(null,A.slice(B,r));return B=r,{value:i,done:!1}}return{done:!0,value:null}}}},Bo=function(e){for(var A=to(e),t=[],r;!(r=A.next()).done;)r.value&&t.push(r.value.slice());return t},no=function(e){var A=123;if(e.createRange){var t=e.createRange();if(t.getBoundingClientRect){var r=e.createElement(\"boundtest\");r.style.height=A+\"px\",r.style.display=\"block\",e.body.appendChild(r),t.selectNode(r);var B=t.getBoundingClientRect(),n=Math.round(B.height);if(e.body.removeChild(r),n===A)return!0}}return!1},so=function(e){var A=e.createElement(\"boundtest\");A.style.width=\"50px\",A.style.display=\"block\",A.style.fontSize=\"12px\",A.style.letterSpacing=\"0px\",A.style.wordSpacing=\"0px\",e.body.appendChild(A);var t=e.createRange();A.innerHTML=typeof\"\".repeat==\"function\"?\"&#128104;\".repeat(10):\"\";var r=A.firstChild,B=$e(r.data).map(function(a){return S(a)}),n=0,s={},i=B.every(function(a,o){t.setStart(r,n),t.setEnd(r,n+a.length);var Q=t.getBoundingClientRect();n+=a.length;var g=Q.x>s.x||Q.y>s.y;return s=Q,o===0?!0:g});return e.body.removeChild(A),i},ao=function(){return typeof new Image().crossOrigin<\"u\"},io=function(){return typeof new XMLHttpRequest().responseType==\"string\"},oo=function(e){var A=new Image,t=e.createElement(\"canvas\"),r=t.getContext(\"2d\");if(!r)return!1;A.src=\"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>\";try{r.drawImage(A,0,0),t.toDataURL()}catch{return!1}return!0},Nt=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},Qo=function(e){var A=e.createElement(\"canvas\"),t=100;A.width=t,A.height=t;var r=A.getContext(\"2d\");if(!r)return Promise.reject(!1);r.fillStyle=\"rgb(0, 255, 0)\",r.fillRect(0,0,t,t);var B=new Image,n=A.toDataURL();B.src=n;var s=Pr(t,t,0,0,B);return r.fillStyle=\"red\",r.fillRect(0,0,t,t),Xt(s).then(function(i){r.drawImage(i,0,0);var a=r.getImageData(0,0,t,t).data;r.fillStyle=\"red\",r.fillRect(0,0,t,t);var o=e.createElement(\"div\");return o.style.backgroundImage=\"url(\"+n+\")\",o.style.height=t+\"px\",Nt(a)?Xt(Pr(t,t,0,0,o)):Promise.reject(!1)}).then(function(i){return r.drawImage(i,0,0),Nt(r.getImageData(0,0,t,t).data)}).catch(function(){return!1})},Pr=function(e,A,t,r,B){var n=\"http://www.w3.org/2000/svg\",s=document.createElementNS(n,\"svg\"),i=document.createElementNS(n,\"foreignObject\");return s.setAttributeNS(null,\"width\",e.toString()),s.setAttributeNS(null,\"height\",A.toString()),i.setAttributeNS(null,\"width\",\"100%\"),i.setAttributeNS(null,\"height\",\"100%\"),i.setAttributeNS(null,\"x\",t.toString()),i.setAttributeNS(null,\"y\",r.toString()),i.setAttributeNS(null,\"externalResourcesRequired\",\"true\"),s.appendChild(i),i.appendChild(B),s},Xt=function(e){return new Promise(function(A,t){var r=new Image;r.onload=function(){return A(r)},r.onerror=t,r.src=\"data:image/svg+xml;charset=utf-8,\"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},N={get SUPPORT_RANGE_BOUNDS(){var e=no(document);return Object.defineProperty(N,\"SUPPORT_RANGE_BOUNDS\",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=N.SUPPORT_RANGE_BOUNDS&&so(document);return Object.defineProperty(N,\"SUPPORT_WORD_BREAKING\",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=oo(document);return Object.defineProperty(N,\"SUPPORT_SVG_DRAWING\",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from==\"function\"&&typeof window.fetch==\"function\"?Qo(document):Promise.resolve(!1);return Object.defineProperty(N,\"SUPPORT_FOREIGNOBJECT_DRAWING\",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=ao();return Object.defineProperty(N,\"SUPPORT_CORS_IMAGES\",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=io();return Object.defineProperty(N,\"SUPPORT_RESPONSE_TYPE\",{value:e}),e},get SUPPORT_CORS_XHR(){var e=\"withCredentials\"in new XMLHttpRequest;return Object.defineProperty(N,\"SUPPORT_CORS_XHR\",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<\"u\"&&Intl.Segmenter);return Object.defineProperty(N,\"SUPPORT_NATIVE_TEXT_SEGMENTATION\",{value:e}),e}},ie=function(){function e(A,t){this.text=A,this.bounds=t}return e}(),go=function(e,A,t,r){var B=Co(A,t),n=[],s=0;return B.forEach(function(i){if(t.textDecorationLine.length||i.trim().length>0)if(N.SUPPORT_RANGE_BOUNDS){var a=_t(r,s,i.length).getClientRects();if(a.length>1){var o=rt(i),Q=0;o.forEach(function(w){n.push(new ie(w,cA.fromDOMRectList(e,_t(r,Q+s,w.length).getClientRects()))),Q+=w.length})}else n.push(new ie(i,cA.fromDOMRectList(e,a)))}else{var g=r.splitText(i.length);n.push(new ie(i,wo(e,r))),r=g}else N.SUPPORT_RANGE_BOUNDS||(r=r.splitText(i.length));s+=i.length}),n},wo=function(e,A){var t=A.ownerDocument;if(t){var r=t.createElement(\"html2canvaswrapper\");r.appendChild(A.cloneNode(!0));var B=A.parentNode;if(B){B.replaceChild(r,A);var n=ze(e,r);return r.firstChild&&B.replaceChild(r.firstChild,r),n}}return cA.EMPTY},_t=function(e,A,t){var r=e.ownerDocument;if(!r)throw new Error(\"Node has no owner document\");var B=r.createRange();return B.setStart(e,A),B.setEnd(e,A+t),B},rt=function(e){if(N.SUPPORT_NATIVE_TEXT_SEGMENTATION){var A=new Intl.Segmenter(void 0,{granularity:\"grapheme\"});return Array.from(A.segment(e)).map(function(t){return t.segment})}return Bo(e)},co=function(e,A){if(N.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:\"word\"});return Array.from(t.segment(e)).map(function(r){return r.segment})}return lo(e,A)},Co=function(e,A){return A.letterSpacing!==0?rt(e):co(e,A)},uo=[32,160,4961,65792,65793,4153,4241],lo=function(e,A){for(var t=_n(e,{lineBreak:A.lineBreak,wordBreak:A.overflowWrap===\"break-word\"?\"break-word\":A.wordBreak}),r=[],B,n=function(){if(B.value){var s=B.value.slice(),i=$e(s),a=\"\";i.forEach(function(o){uo.indexOf(o)===-1?a+=S(o):(a.length&&r.push(a),r.push(S(o)),a=\"\")}),a.length&&r.push(a)}};!(B=t.next()).done;)n();return r},fo=function(){function e(A,t,r){this.text=Uo(t.data,r.textTransform),this.textBounds=go(A,this.text,r,t)}return e}(),Uo=function(e,A){switch(A){case 1:return e.toLowerCase();case 3:return e.replace(Fo,ho);case 2:return e.toUpperCase();default:return e}},Fo=/(^|\\s|:|-|\\(|\\))([a-z])/g,ho=function(e,A,t){return e.length>0?A+t.toUpperCase():e},GB=function(e){tA(A,e);function A(t,r){var B=e.call(this,t,r)||this;return B.src=r.currentSrc||r.src,B.intrinsicWidth=r.naturalWidth,B.intrinsicHeight=r.naturalHeight,B.context.cache.addImage(B.src),B}return A}(aA),RB=function(e){tA(A,e);function A(t,r){var B=e.call(this,t,r)||this;return B.canvas=r,B.intrinsicWidth=r.width,B.intrinsicHeight=r.height,B}return A}(aA),VB=function(e){tA(A,e);function A(t,r){var B=e.call(this,t,r)||this,n=new XMLSerializer,s=ze(t,r);return r.setAttribute(\"width\",s.width+\"px\"),r.setAttribute(\"height\",s.height+\"px\"),B.svg=\"data:image/svg+xml,\"+encodeURIComponent(n.serializeToString(r)),B.intrinsicWidth=r.width.baseVal.value,B.intrinsicHeight=r.height.baseVal.value,B.context.cache.addImage(B.svg),B}return A}(aA),NB=function(e){tA(A,e);function A(t,r){var B=e.call(this,t,r)||this;return B.value=r.value,B}return A}(aA),kr=function(e){tA(A,e);function A(t,r){var B=e.call(this,t,r)||this;return B.start=r.start,B.reversed=typeof r.reversed==\"boolean\"&&r.reversed===!0,B}return A}(aA),Eo=[{type:15,flags:0,unit:\"px\",number:3}],Ho=[{type:16,flags:0,number:50}],po=function(e){return e.width>e.height?new cA(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new cA(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},Io=function(e){var A=e.type===vo?new Array(e.value.length+1).join(\"â€¢\"):e.value;return A.length===0?e.placeholder||\"\":A},Pe=\"checkbox\",ke=\"radio\",vo=\"password\",Jt=707406591,tt=function(e){tA(A,e);function A(t,r){var B=e.call(this,t,r)||this;switch(B.type=r.type.toLowerCase(),B.checked=r.checked,B.value=Io(r),(B.type===Pe||B.type===ke)&&(B.styles.backgroundColor=3739148031,B.styles.borderTopColor=B.styles.borderRightColor=B.styles.borderBottomColor=B.styles.borderLeftColor=2779096575,B.styles.borderTopWidth=B.styles.borderRightWidth=B.styles.borderBottomWidth=B.styles.borderLeftWidth=1,B.styles.borderTopStyle=B.styles.borderRightStyle=B.styles.borderBottomStyle=B.styles.borderLeftStyle=1,B.styles.backgroundClip=[0],B.styles.backgroundOrigin=[0],B.bounds=po(B.bounds)),B.type){case Pe:B.styles.borderTopRightRadius=B.styles.borderTopLeftRadius=B.styles.borderBottomRightRadius=B.styles.borderBottomLeftRadius=Eo;break;case ke:B.styles.borderTopRightRadius=B.styles.borderTopLeftRadius=B.styles.borderBottomRightRadius=B.styles.borderBottomLeftRadius=Ho;break}return B}return A}(aA),XB=function(e){tA(A,e);function A(t,r){var B=e.call(this,t,r)||this,n=r.options[r.selectedIndex||0];return B.value=n&&n.text||\"\",B}return A}(aA),_B=function(e){tA(A,e);function A(t,r){var B=e.call(this,t,r)||this;return B.value=r.value,B}return A}(aA),JB=function(e){tA(A,e);function A(t,r){var B=e.call(this,t,r)||this;B.src=r.src,B.width=parseInt(r.width,10)||0,B.height=parseInt(r.height,10)||0,B.backgroundColor=B.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){B.tree=kB(t,r.contentWindow.document.documentElement);var n=r.contentWindow.document.documentElement?se(t,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):wA.TRANSPARENT,s=r.contentWindow.document.body?se(t,getComputedStyle(r.contentWindow.document.body).backgroundColor):wA.TRANSPARENT;B.backgroundColor=HA(n)?HA(s)?B.styles.backgroundColor:s:n}}catch{}return B}return A}(aA),yo=[\"OL\",\"UL\",\"MENU\"],Ve=function(e,A,t,r){for(var B=A.firstChild,n=void 0;B;B=n)if(n=B.nextSibling,YB(B)&&B.data.trim().length>0)t.textNodes.push(new fo(e,B,t.styles));else if(_A(B))if(jB(B)&&B.assignedNodes)B.assignedNodes().forEach(function(i){return Ve(e,i,t,r)});else{var s=PB(e,B);s.styles.isVisible()&&(Ko(B,s,r)?s.flags|=4:mo(s.styles)&&(s.flags|=2),yo.indexOf(B.tagName)!==-1&&(s.flags|=8),t.elements.push(s),B.slot,B.shadowRoot?Ve(e,B.shadowRoot,s,r):!Ye(B)&&!WB(B)&&!We(B)&&Ve(e,B,s,r))}},PB=function(e,A){return Wr(A)?new GB(e,A):ZB(A)?new RB(e,A):WB(A)?new VB(e,A):Lo(A)?new NB(e,A):Do(A)?new kr(e,A):bo(A)?new tt(e,A):We(A)?new XB(e,A):Ye(A)?new _B(e,A):qB(A)?new JB(e,A):new aA(e,A)},kB=function(e,A){var t=PB(e,A);return t.flags|=4,Ve(e,A,t,t),t},Ko=function(e,A,t){return A.styles.isPositionedWithZIndex()||A.styles.opacity<1||A.styles.isTransformed()||Bt(e)&&t.styles.isTransparent()},mo=function(e){return e.isPositioned()||e.isFloating()},YB=function(e){return e.nodeType===Node.TEXT_NODE},_A=function(e){return e.nodeType===Node.ELEMENT_NODE},Yr=function(e){return _A(e)&&typeof e.style<\"u\"&&!Ne(e)},Ne=function(e){return typeof e.className==\"object\"},Lo=function(e){return e.tagName===\"LI\"},Do=function(e){return e.tagName===\"OL\"},bo=function(e){return e.tagName===\"INPUT\"},xo=function(e){return e.tagName===\"HTML\"},WB=function(e){return e.tagName===\"svg\"},Bt=function(e){return e.tagName===\"BODY\"},ZB=function(e){return e.tagName===\"CANVAS\"},Pt=function(e){return e.tagName===\"VIDEO\"},Wr=function(e){return e.tagName===\"IMG\"},qB=function(e){return e.tagName===\"IFRAME\"},kt=function(e){return e.tagName===\"STYLE\"},To=function(e){return e.tagName===\"SCRIPT\"},Ye=function(e){return e.tagName===\"TEXTAREA\"},We=function(e){return e.tagName===\"SELECT\"},jB=function(e){return e.tagName===\"SLOT\"},Yt=function(e){return e.tagName.indexOf(\"-\")>0},So=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(A){var t=this.counters[A];return t&&t.length?t[t.length-1]:1},e.prototype.getCounterValues=function(A){var t=this.counters[A];return t||[]},e.prototype.pop=function(A){var t=this;A.forEach(function(r){return t.counters[r].pop()})},e.prototype.parse=function(A){var t=this,r=A.counterIncrement,B=A.counterReset,n=!0;r!==null&&r.forEach(function(i){var a=t.counters[i.counter];a&&i.increment!==0&&(n=!1,a.length||a.push(1),a[Math.max(0,a.length-1)]+=i.increment)});var s=[];return n&&B.forEach(function(i){var a=t.counters[i.counter];s.push(i.counter),a||(a=t.counters[i.counter]=[]),a.push(i.reset)}),s},e}(),Wt={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:[\"M\",\"CM\",\"D\",\"CD\",\"C\",\"XC\",\"L\",\"XL\",\"X\",\"IX\",\"V\",\"IV\",\"I\"]},Zt={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:[\"Õ”\",\"Õ“\",\"Õ’\",\"Õ‘\",\"Õ\",\"Õ\",\"Õ\",\"Õ\",\"ÕŒ\",\"Õ‹\",\"ÕŠ\",\"Õ‰\",\"Õˆ\",\"Õ‡\",\"Õ†\",\"Õ…\",\"Õ„\",\"Õƒ\",\"Õ‚\",\"Õ\",\"Õ€\",\"Ô¿\",\"Ô¾\",\"Ô½\",\"Ô¼\",\"Ô»\",\"Ôº\",\"Ô¹\",\"Ô¸\",\"Ô·\",\"Ô¶\",\"Ôµ\",\"Ô´\",\"Ô³\",\"Ô²\",\"Ô±\"]},Oo={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:[\"×™×³\",\"×˜×³\",\"×—×³\",\"×–×³\",\"×•×³\",\"×”×³\",\"×“×³\",\"×’×³\",\"×‘×³\",\"××³\",\"×ª\",\"×©\",\"×¨\",\"×§\",\"×¦\",\"×¤\",\"×¢\",\"×¡\",\"× \",\"×\",\"×œ\",\"×›\",\"×™×˜\",\"×™×—\",\"×™×–\",\"×˜×–\",\"×˜×•\",\"×™\",\"×˜\",\"×—\",\"×–\",\"×•\",\"×”\",\"×“\",\"×’\",\"×‘\",\"×\"]},Mo={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:[\"áƒµ\",\"áƒ°\",\"áƒ¯\",\"áƒ´\",\"áƒ®\",\"áƒ­\",\"áƒ¬\",\"áƒ«\",\"áƒª\",\"áƒ©\",\"áƒ¨\",\"áƒ§\",\"áƒ¦\",\"áƒ¥\",\"áƒ¤\",\"áƒ³\",\"áƒ¢\",\"áƒ¡\",\"áƒ \",\"áƒŸ\",\"áƒ\",\"áƒ\",\"áƒ²\",\"áƒœ\",\"áƒ›\",\"áƒš\",\"áƒ™\",\"áƒ˜\",\"áƒ—\",\"áƒ±\",\"áƒ–\",\"áƒ•\",\"áƒ”\",\"áƒ“\",\"áƒ’\",\"áƒ‘\",\"áƒ\"]},GA=function(e,A,t,r,B,n){return e<A||e>t?we(e,B,n.length>0):r.integers.reduce(function(s,i,a){for(;e>=i;)e-=i,s+=r.values[a];return s},\"\")+n},zB=function(e,A,t,r){var B=\"\";do t||e--,B=r(e)+B,e/=A;while(e*A>=A);return B},T=function(e,A,t,r,B){var n=t-A+1;return(e<0?\"-\":\"\")+(zB(Math.abs(e),n,r,function(s){return S(Math.floor(s%n)+A)})+B)},mA=function(e,A,t){t===void 0&&(t=\". \");var r=A.length;return zB(Math.abs(e),r,!1,function(B){return A[Math.floor(B%r)]})+t},NA=1,lA=2,fA=4,Be=8,gA=function(e,A,t,r,B,n){if(e<-9999||e>9999)return we(e,4,B.length>0);var s=Math.abs(e),i=B;if(s===0)return A[0]+i;for(var a=0;s>0&&a<=4;a++){var o=s%10;o===0&&G(n,NA)&&i!==\"\"?i=A[o]+i:o>1||o===1&&a===0||o===1&&a===1&&G(n,lA)||o===1&&a===1&&G(n,fA)&&e>100||o===1&&a>1&&G(n,Be)?i=A[o]+(a>0?t[a-1]:\"\")+i:o===1&&a>0&&(i=t[a-1]+i),s=Math.floor(s/10)}return(e<0?r:\"\")+i},qt=\"åç™¾åƒè¬\",jt=\"æ‹¾ä½°ä»Ÿè¬\",zt=\"ãƒã‚¤ãƒŠã‚¹\",pr=\"ë§ˆì´ë„ˆìŠ¤\",we=function(e,A,t){var r=t?\". \":\"\",B=t?\"ã€\":\"\",n=t?\", \":\"\",s=t?\" \":\"\";switch(A){case 0:return\"â€¢\"+s;case 1:return\"â—¦\"+s;case 2:return\"â—¾\"+s;case 5:var i=T(e,48,57,!0,r);return i.length<4?\"0\"+i:i;case 4:return mA(e,\"ã€‡ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹\",B);case 6:return GA(e,1,3999,Wt,3,r).toLowerCase();case 7:return GA(e,1,3999,Wt,3,r);case 8:return T(e,945,969,!1,r);case 9:return T(e,97,122,!1,r);case 10:return T(e,65,90,!1,r);case 11:return T(e,1632,1641,!0,r);case 12:case 49:return GA(e,1,9999,Zt,3,r);case 35:return GA(e,1,9999,Zt,3,r).toLowerCase();case 13:return T(e,2534,2543,!0,r);case 14:case 30:return T(e,6112,6121,!0,r);case 15:return mA(e,\"å­ä¸‘å¯…å¯è¾°å·³åˆæœªç”³é…‰æˆŒäº¥\",B);case 16:return mA(e,\"ç”²ä¹™ä¸™ä¸æˆŠå·±åºšè¾›å£¬ç™¸\",B);case 17:case 48:return gA(e,\"é›¶ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹\",qt,\"è² \",B,lA|fA|Be);case 47:return gA(e,\"é›¶å£¹è²³åƒè‚†ä¼é™¸æŸ’æŒç–\",jt,\"è² \",B,NA|lA|fA|Be);case 42:return gA(e,\"é›¶ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹\",qt,\"è´Ÿ\",B,lA|fA|Be);case 41:return gA(e,\"é›¶å£¹è´°åè‚†ä¼é™†æŸ’æŒç–\",jt,\"è´Ÿ\",B,NA|lA|fA|Be);case 26:return gA(e,\"ã€‡ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹\",\"åç™¾åƒä¸‡\",zt,B,0);case 25:return gA(e,\"é›¶å£±å¼å‚å››ä¼å…­ä¸ƒå…«ä¹\",\"æ‹¾ç™¾åƒä¸‡\",zt,B,NA|lA|fA);case 31:return gA(e,\"ì˜ì¼ì´ì‚¼ì‚¬ì˜¤ìœ¡ì¹ íŒ”êµ¬\",\"ì‹­ë°±ì²œë§Œ\",pr,n,NA|lA|fA);case 33:return gA(e,\"é›¶ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹\",\"åç™¾åƒè¬\",pr,n,0);case 32:return gA(e,\"é›¶å£¹è²³åƒå››äº”å…­ä¸ƒå…«ä¹\",\"æ‹¾ç™¾åƒ\",pr,n,NA|lA|fA);case 18:return T(e,2406,2415,!0,r);case 20:return GA(e,1,19999,Mo,3,r);case 21:return T(e,2790,2799,!0,r);case 22:return T(e,2662,2671,!0,r);case 22:return GA(e,1,10999,Oo,3,r);case 23:return mA(e,\"ã‚ã„ã†ãˆãŠã‹ããã‘ã“ã•ã—ã™ã›ããŸã¡ã¤ã¦ã¨ãªã«ã¬ã­ã®ã¯ã²ãµã¸ã»ã¾ã¿ã‚€ã‚ã‚‚ã‚„ã‚†ã‚ˆã‚‰ã‚Šã‚‹ã‚Œã‚ã‚ã‚ã‚‘ã‚’ã‚“\");case 24:return mA(e,\"ã„ã‚ã¯ã«ã»ã¸ã¨ã¡ã‚Šã¬ã‚‹ã‚’ã‚ã‹ã‚ˆãŸã‚Œãã¤ã­ãªã‚‰ã‚€ã†ã‚ã®ãŠãã‚„ã¾ã‘ãµã“ãˆã¦ã‚ã•ãã‚†ã‚ã¿ã—ã‚‘ã²ã‚‚ã›ã™\");case 27:return T(e,3302,3311,!0,r);case 28:return mA(e,\"ã‚¢ã‚¤ã‚¦ã‚¨ã‚ªã‚«ã‚­ã‚¯ã‚±ã‚³ã‚µã‚·ã‚¹ã‚»ã‚½ã‚¿ãƒãƒ„ãƒ†ãƒˆãƒŠãƒ‹ãƒŒãƒãƒãƒãƒ’ãƒ•ãƒ˜ãƒ›ãƒãƒŸãƒ ãƒ¡ãƒ¢ãƒ¤ãƒ¦ãƒ¨ãƒ©ãƒªãƒ«ãƒ¬ãƒ­ãƒ¯ãƒ°ãƒ±ãƒ²ãƒ³\",B);case 29:return mA(e,\"ã‚¤ãƒ­ãƒãƒ‹ãƒ›ãƒ˜ãƒˆãƒãƒªãƒŒãƒ«ãƒ²ãƒ¯ã‚«ãƒ¨ã‚¿ãƒ¬ã‚½ãƒ„ãƒãƒŠãƒ©ãƒ ã‚¦ãƒ°ãƒã‚ªã‚¯ãƒ¤ãƒã‚±ãƒ•ã‚³ã‚¨ãƒ†ã‚¢ã‚µã‚­ãƒ¦ãƒ¡ãƒŸã‚·ãƒ±ãƒ’ãƒ¢ã‚»ã‚¹\",B);case 34:return T(e,3792,3801,!0,r);case 37:return T(e,6160,6169,!0,r);case 38:return T(e,4160,4169,!0,r);case 39:return T(e,2918,2927,!0,r);case 40:return T(e,1776,1785,!0,r);case 43:return T(e,3046,3055,!0,r);case 44:return T(e,3174,3183,!0,r);case 45:return T(e,3664,3673,!0,r);case 46:return T(e,3872,3881,!0,r);case 3:default:return T(e,48,57,!0,r)}},$B=\"data-html2canvas-ignore\",$t=function(){function e(A,t,r){if(this.context=A,this.options=r,this.scrolledElements=[],this.referenceElement=t,this.counters=new So,this.quoteDepth=0,!t.ownerDocument)throw new Error(\"Cloned element does not have an owner document\");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(A,t){var r=this,B=Go(A,t);if(!B.contentWindow)return Promise.reject(\"Unable to find iframe window\");var n=A.defaultView.pageXOffset,s=A.defaultView.pageYOffset,i=B.contentWindow,a=i.document,o=No(B).then(function(){return P(r,void 0,void 0,function(){var Q,g;return _(this,function(w){switch(w.label){case 0:return this.scrolledElements.forEach(Po),i&&(i.scrollTo(t.left,t.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(i.scrollY!==t.top||i.scrollX!==t.left)&&(this.context.logger.warn(\"Unable to restore scroll position for cloned document\"),this.context.windowBounds=this.context.windowBounds.add(i.scrollX-t.left,i.scrollY-t.top,0,0))),Q=this.options.onclone,g=this.clonedReferenceElement,typeof g>\"u\"?[2,Promise.reject(\"Error finding the \"+this.referenceElement.nodeName+\" in the cloned document\")]:a.fonts&&a.fonts.ready?[4,a.fonts.ready]:[3,2];case 1:w.sent(),w.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Vo(a)]:[3,4];case 3:w.sent(),w.label=4;case 4:return typeof Q==\"function\"?[2,Promise.resolve().then(function(){return Q(a,g)}).then(function(){return B})]:[2,B]}})})});return a.open(),a.write(_o(document.doctype)+\"<html></html>\"),Jo(this.referenceElement.ownerDocument,n,s),a.replaceChild(a.adoptNode(this.documentElement),a.documentElement),a.close(),o},e.prototype.createElementClone=function(A){if(Jr(A,2))debugger;if(ZB(A))return this.createCanvasClone(A);if(Pt(A))return this.createVideoClone(A);if(kt(A))return this.createStyleClone(A);var t=A.cloneNode(!1);return Wr(t)&&(Wr(A)&&A.currentSrc&&A.currentSrc!==A.src&&(t.src=A.currentSrc,t.srcset=\"\"),t.loading===\"lazy\"&&(t.loading=\"eager\")),Yt(t)?this.createCustomElementClone(t):t},e.prototype.createCustomElementClone=function(A){var t=document.createElement(\"html2canvascustomelement\");return Ir(A.style,t),t},e.prototype.createStyleClone=function(A){try{var t=A.sheet;if(t&&t.cssRules){var r=[].slice.call(t.cssRules,0).reduce(function(n,s){return s&&typeof s.cssText==\"string\"?n+s.cssText:n},\"\"),B=A.cloneNode(!1);return B.textContent=r,B}}catch(n){if(this.context.logger.error(\"Unable to access cssRules property\",n),n.name!==\"SecurityError\")throw n}return A.cloneNode(!1)},e.prototype.createCanvasClone=function(A){var t;if(this.options.inlineImages&&A.ownerDocument){var r=A.ownerDocument.createElement(\"img\");try{return r.src=A.toDataURL(),r}catch{this.context.logger.info(\"Unable to inline canvas contents, canvas is tainted\",A)}}var B=A.cloneNode(!1);try{B.width=A.width,B.height=A.height;var n=A.getContext(\"2d\"),s=B.getContext(\"2d\");if(s)if(!this.options.allowTaint&&n)s.putImageData(n.getImageData(0,0,A.width,A.height),0,0);else{var i=(t=A.getContext(\"webgl2\"))!==null&&t!==void 0?t:A.getContext(\"webgl\");if(i){var a=i.getContextAttributes();(a==null?void 0:a.preserveDrawingBuffer)===!1&&this.context.logger.warn(\"Unable to clone WebGL context as it has preserveDrawingBuffer=false\",A)}s.drawImage(A,0,0)}return B}catch{this.context.logger.info(\"Unable to clone canvas as it is tainted\",A)}return B},e.prototype.createVideoClone=function(A){var t=A.ownerDocument.createElement(\"canvas\");t.width=A.offsetWidth,t.height=A.offsetHeight;var r=t.getContext(\"2d\");try{return r&&(r.drawImage(A,0,0,t.width,t.height),this.options.allowTaint||r.getImageData(0,0,t.width,t.height)),t}catch{this.context.logger.info(\"Unable to clone video as it is tainted\",A)}var B=A.ownerDocument.createElement(\"canvas\");return B.width=A.offsetWidth,B.height=A.offsetHeight,B},e.prototype.appendChildNode=function(A,t,r){(!_A(t)||!To(t)&&!t.hasAttribute($B)&&(typeof this.options.ignoreElements!=\"function\"||!this.options.ignoreElements(t)))&&(!this.options.copyStyles||!_A(t)||!kt(t))&&A.appendChild(this.cloneNode(t,r))},e.prototype.cloneChildNodes=function(A,t,r){for(var B=this,n=A.shadowRoot?A.shadowRoot.firstChild:A.firstChild;n;n=n.nextSibling)if(_A(n)&&jB(n)&&typeof n.assignedNodes==\"function\"){var s=n.assignedNodes();s.length&&s.forEach(function(i){return B.appendChildNode(t,i,r)})}else this.appendChildNode(t,n,r)},e.prototype.cloneNode=function(A,t){if(YB(A))return document.createTextNode(A.data);if(!A.ownerDocument)return A.cloneNode(!1);var r=A.ownerDocument.defaultView;if(r&&_A(A)&&(Yr(A)||Ne(A))){var B=this.createElementClone(A);B.style.transitionProperty=\"none\";var n=r.getComputedStyle(A),s=r.getComputedStyle(A,\":before\"),i=r.getComputedStyle(A,\":after\");this.referenceElement===A&&Yr(B)&&(this.clonedReferenceElement=B),Bt(B)&&Wo(B);var a=this.counters.parse(new Lt(this.context,n)),o=this.resolvePseudoContent(A,B,s,oe.BEFORE);Yt(A)&&(t=!0),Pt(A)||this.cloneChildNodes(A,B,t),o&&B.insertBefore(o,B.firstChild);var Q=this.resolvePseudoContent(A,B,i,oe.AFTER);return Q&&B.appendChild(Q),this.counters.pop(a),(n&&(this.options.copyStyles||Ne(A))&&!qB(A)||t)&&Ir(n,B),(A.scrollTop!==0||A.scrollLeft!==0)&&this.scrolledElements.push([B,A.scrollLeft,A.scrollTop]),(Ye(A)||We(A))&&(Ye(B)||We(B))&&(B.value=A.value),B}return A.cloneNode(!1)},e.prototype.resolvePseudoContent=function(A,t,r,B){var n=this;if(r){var s=r.content,i=t.ownerDocument;if(!(!i||!s||s===\"none\"||s===\"-moz-alt-content\"||r.display===\"none\")){this.counters.parse(new Lt(this.context,r));var a=new mi(this.context,r),o=i.createElement(\"html2canvaspseudoelement\");Ir(r,o),a.content.forEach(function(g){if(g.type===0)o.appendChild(i.createTextNode(g.value));else if(g.type===22){var w=i.createElement(\"img\");w.src=g.value,w.style.opacity=\"1\",o.appendChild(w)}else if(g.type===18){if(g.name===\"attr\"){var f=g.values.filter(D);f.length&&o.appendChild(i.createTextNode(A.getAttribute(f[0].value)||\"\"))}else if(g.name===\"counter\"){var c=g.values.filter(PA),C=c[0],H=c[1];if(C&&D(C)){var h=n.counters.getCounterValue(C.value),F=H&&D(H)?_r.parse(n.context,H.value):3;o.appendChild(i.createTextNode(we(h,F,!1)))}}else if(g.name===\"counters\"){var K=g.values.filter(PA),C=K[0],p=K[1],H=K[2];if(C&&D(C)){var d=n.counters.getCounterValues(C.value),l=H&&D(H)?_r.parse(n.context,H.value):3,v=p&&p.type===0?p.value:\"\",y=d.map(function(k){return we(k,l,!1)}).join(v);o.appendChild(i.createTextNode(y))}}}else if(g.type===20)switch(g.value){case\"open-quote\":o.appendChild(i.createTextNode(mt(a.quotes,n.quoteDepth++,!0)));break;case\"close-quote\":o.appendChild(i.createTextNode(mt(a.quotes,--n.quoteDepth,!1)));break;default:o.appendChild(i.createTextNode(g.value))}}),o.className=Zr+\" \"+qr;var Q=B===oe.BEFORE?\" \"+Zr:\" \"+qr;return Ne(t)?t.className.baseValue+=Q:t.className+=Q,o}}},e.destroy=function(A){return A.parentNode?(A.parentNode.removeChild(A),!0):!1},e}(),oe;(function(e){e[e.BEFORE=0]=\"BEFORE\",e[e.AFTER=1]=\"AFTER\"})(oe||(oe={}));var Go=function(e,A){var t=e.createElement(\"iframe\");return t.className=\"html2canvas-container\",t.style.visibility=\"hidden\",t.style.position=\"fixed\",t.style.left=\"-10000px\",t.style.top=\"0px\",t.style.border=\"0\",t.width=A.width.toString(),t.height=A.height.toString(),t.scrolling=\"no\",t.setAttribute($B,\"true\"),e.body.appendChild(t),t},Ro=function(e){return new Promise(function(A){if(e.complete){A();return}if(!e.src){A();return}e.onload=A,e.onerror=A})},Vo=function(e){return Promise.all([].slice.call(e.images,0).map(Ro))},No=function(e){return new Promise(function(A,t){var r=e.contentWindow;if(!r)return t(\"No window assigned for iframe\");var B=r.document;r.onload=e.onload=function(){r.onload=e.onload=null;var n=setInterval(function(){B.body.childNodes.length>0&&B.readyState===\"complete\"&&(clearInterval(n),A(e))},50)}})},Xo=[\"all\",\"d\",\"content\"],Ir=function(e,A){for(var t=e.length-1;t>=0;t--){var r=e.item(t);Xo.indexOf(r)===-1&&A.style.setProperty(r,e.getPropertyValue(r))}return A},_o=function(e){var A=\"\";return e&&(A+=\"<!DOCTYPE \",e.name&&(A+=e.name),e.internalSubset&&(A+=e.internalSubset),e.publicId&&(A+='\"'+e.publicId+'\"'),e.systemId&&(A+='\"'+e.systemId+'\"'),A+=\">\"),A},Jo=function(e,A,t){e&&e.defaultView&&(A!==e.defaultView.pageXOffset||t!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(A,t)},Po=function(e){var A=e[0],t=e[1],r=e[2];A.scrollLeft=t,A.scrollTop=r},ko=\":before\",Yo=\":after\",Zr=\"___html2canvas___pseudoelement_before\",qr=\"___html2canvas___pseudoelement_after\",AB=`{\n    content: \"\" !important;\n    display: none !important;\n}`,Wo=function(e){Zo(e,\".\"+Zr+ko+AB+`\n         .`+qr+Yo+AB)},Zo=function(e,A){var t=e.ownerDocument;if(t){var r=t.createElement(\"style\");r.textContent=A,e.appendChild(r)}},An=function(){function e(){}return e.getOrigin=function(A){var t=e._link;return t?(t.href=A,t.href=t.href,t.protocol+t.hostname+t.port):\"about:blank\"},e.isSameOrigin=function(A){return e.getOrigin(A)===e._origin},e.setContext=function(A){e._link=A.document.createElement(\"a\"),e._origin=e.getOrigin(A.location.href)},e._origin=\"about:blank\",e}(),qo=function(){function e(A,t){this.context=A,this._options=t,this._cache={}}return e.prototype.addImage=function(A){var t=Promise.resolve();return this.has(A)||(yr(A)||AQ(A))&&(this._cache[A]=this.loadImage(A)).catch(function(){}),t},e.prototype.match=function(A){return this._cache[A]},e.prototype.loadImage=function(A){return P(this,void 0,void 0,function(){var t,r,B,n,s=this;return _(this,function(i){switch(i.label){case 0:return t=An.isSameOrigin(A),r=!vr(A)&&this._options.useCORS===!0&&N.SUPPORT_CORS_IMAGES&&!t,B=!vr(A)&&!t&&!yr(A)&&typeof this._options.proxy==\"string\"&&N.SUPPORT_CORS_XHR&&!r,!t&&this._options.allowTaint===!1&&!vr(A)&&!yr(A)&&!B&&!r?[2]:(n=A,B?[4,this.proxy(n)]:[3,2]);case 1:n=i.sent(),i.label=2;case 2:return this.context.logger.debug(\"Added image \"+A.substring(0,256)),[4,new Promise(function(a,o){var Q=new Image;Q.onload=function(){return a(Q)},Q.onerror=o,(eQ(n)||r)&&(Q.crossOrigin=\"anonymous\"),Q.src=n,Q.complete===!0&&setTimeout(function(){return a(Q)},500),s._options.imageTimeout>0&&setTimeout(function(){return o(\"Timed out (\"+s._options.imageTimeout+\"ms) loading image\")},s._options.imageTimeout)})];case 3:return[2,i.sent()]}})})},e.prototype.has=function(A){return typeof this._cache[A]<\"u\"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(A){var t=this,r=this._options.proxy;if(!r)throw new Error(\"No proxy defined\");var B=A.substring(0,256);return new Promise(function(n,s){var i=N.SUPPORT_RESPONSE_TYPE?\"blob\":\"text\",a=new XMLHttpRequest;a.onload=function(){if(a.status===200)if(i===\"text\")n(a.response);else{var g=new FileReader;g.addEventListener(\"load\",function(){return n(g.result)},!1),g.addEventListener(\"error\",function(w){return s(w)},!1),g.readAsDataURL(a.response)}else s(\"Failed to proxy resource \"+B+\" with status code \"+a.status)},a.onerror=s;var o=r.indexOf(\"?\")>-1?\"&\":\"?\";if(a.open(\"GET\",\"\"+r+o+\"url=\"+encodeURIComponent(A)+\"&responseType=\"+i),i!==\"text\"&&a instanceof XMLHttpRequest&&(a.responseType=i),t._options.imageTimeout){var Q=t._options.imageTimeout;a.timeout=Q,a.ontimeout=function(){return s(\"Timed out (\"+Q+\"ms) proxying \"+B)}}a.send()})},e}(),jo=/^data:image\\/svg\\+xml/i,zo=/^data:image\\/.*;base64,/i,$o=/^data:image\\/.*/i,AQ=function(e){return N.SUPPORT_SVG_DRAWING||!rQ(e)},vr=function(e){return $o.test(e)},eQ=function(e){return zo.test(e)},yr=function(e){return e.substr(0,4)===\"blob\"},rQ=function(e){return e.substr(-3).toLowerCase()===\"svg\"||jo.test(e)},u=function(){function e(A,t){this.type=0,this.x=A,this.y=t}return e.prototype.add=function(A,t){return new e(this.x+A,this.y+t)},e}(),RA=function(e,A,t){return new u(e.x+(A.x-e.x)*t,e.y+(A.y-e.y)*t)},Te=function(){function e(A,t,r,B){this.type=1,this.start=A,this.startControl=t,this.endControl=r,this.end=B}return e.prototype.subdivide=function(A,t){var r=RA(this.start,this.startControl,A),B=RA(this.startControl,this.endControl,A),n=RA(this.endControl,this.end,A),s=RA(r,B,A),i=RA(B,n,A),a=RA(s,i,A);return t?new e(this.start,r,s,a):new e(a,i,n,this.end)},e.prototype.add=function(A,t){return new e(this.start.add(A,t),this.startControl.add(A,t),this.endControl.add(A,t),this.end.add(A,t))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),$=function(e){return e.type===1},tQ=function(){function e(A){var t=A.styles,r=A.bounds,B=re(t.borderTopLeftRadius,r.width,r.height),n=B[0],s=B[1],i=re(t.borderTopRightRadius,r.width,r.height),a=i[0],o=i[1],Q=re(t.borderBottomRightRadius,r.width,r.height),g=Q[0],w=Q[1],f=re(t.borderBottomLeftRadius,r.width,r.height),c=f[0],C=f[1],H=[];H.push((n+a)/r.width),H.push((c+g)/r.width),H.push((s+C)/r.height),H.push((o+w)/r.height);var h=Math.max.apply(Math,H);h>1&&(n/=h,s/=h,a/=h,o/=h,g/=h,w/=h,c/=h,C/=h);var F=r.width-a,K=r.height-w,p=r.width-g,d=r.height-C,l=t.borderTopWidth,v=t.borderRightWidth,y=t.borderBottomWidth,E=t.borderLeftWidth,O=b(t.paddingTop,A.bounds.width),k=b(t.paddingRight,A.bounds.width),q=b(t.paddingBottom,A.bounds.width),L=b(t.paddingLeft,A.bounds.width);this.topLeftBorderDoubleOuterBox=n>0||s>0?x(r.left+E/3,r.top+l/3,n-E/3,s-l/3,m.TOP_LEFT):new u(r.left+E/3,r.top+l/3),this.topRightBorderDoubleOuterBox=n>0||s>0?x(r.left+F,r.top+l/3,a-v/3,o-l/3,m.TOP_RIGHT):new u(r.left+r.width-v/3,r.top+l/3),this.bottomRightBorderDoubleOuterBox=g>0||w>0?x(r.left+p,r.top+K,g-v/3,w-y/3,m.BOTTOM_RIGHT):new u(r.left+r.width-v/3,r.top+r.height-y/3),this.bottomLeftBorderDoubleOuterBox=c>0||C>0?x(r.left+E/3,r.top+d,c-E/3,C-y/3,m.BOTTOM_LEFT):new u(r.left+E/3,r.top+r.height-y/3),this.topLeftBorderDoubleInnerBox=n>0||s>0?x(r.left+E*2/3,r.top+l*2/3,n-E*2/3,s-l*2/3,m.TOP_LEFT):new u(r.left+E*2/3,r.top+l*2/3),this.topRightBorderDoubleInnerBox=n>0||s>0?x(r.left+F,r.top+l*2/3,a-v*2/3,o-l*2/3,m.TOP_RIGHT):new u(r.left+r.width-v*2/3,r.top+l*2/3),this.bottomRightBorderDoubleInnerBox=g>0||w>0?x(r.left+p,r.top+K,g-v*2/3,w-y*2/3,m.BOTTOM_RIGHT):new u(r.left+r.width-v*2/3,r.top+r.height-y*2/3),this.bottomLeftBorderDoubleInnerBox=c>0||C>0?x(r.left+E*2/3,r.top+d,c-E*2/3,C-y*2/3,m.BOTTOM_LEFT):new u(r.left+E*2/3,r.top+r.height-y*2/3),this.topLeftBorderStroke=n>0||s>0?x(r.left+E/2,r.top+l/2,n-E/2,s-l/2,m.TOP_LEFT):new u(r.left+E/2,r.top+l/2),this.topRightBorderStroke=n>0||s>0?x(r.left+F,r.top+l/2,a-v/2,o-l/2,m.TOP_RIGHT):new u(r.left+r.width-v/2,r.top+l/2),this.bottomRightBorderStroke=g>0||w>0?x(r.left+p,r.top+K,g-v/2,w-y/2,m.BOTTOM_RIGHT):new u(r.left+r.width-v/2,r.top+r.height-y/2),this.bottomLeftBorderStroke=c>0||C>0?x(r.left+E/2,r.top+d,c-E/2,C-y/2,m.BOTTOM_LEFT):new u(r.left+E/2,r.top+r.height-y/2),this.topLeftBorderBox=n>0||s>0?x(r.left,r.top,n,s,m.TOP_LEFT):new u(r.left,r.top),this.topRightBorderBox=a>0||o>0?x(r.left+F,r.top,a,o,m.TOP_RIGHT):new u(r.left+r.width,r.top),this.bottomRightBorderBox=g>0||w>0?x(r.left+p,r.top+K,g,w,m.BOTTOM_RIGHT):new u(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=c>0||C>0?x(r.left,r.top+d,c,C,m.BOTTOM_LEFT):new u(r.left,r.top+r.height),this.topLeftPaddingBox=n>0||s>0?x(r.left+E,r.top+l,Math.max(0,n-E),Math.max(0,s-l),m.TOP_LEFT):new u(r.left+E,r.top+l),this.topRightPaddingBox=a>0||o>0?x(r.left+Math.min(F,r.width-v),r.top+l,F>r.width+v?0:Math.max(0,a-v),Math.max(0,o-l),m.TOP_RIGHT):new u(r.left+r.width-v,r.top+l),this.bottomRightPaddingBox=g>0||w>0?x(r.left+Math.min(p,r.width-E),r.top+Math.min(K,r.height-y),Math.max(0,g-v),Math.max(0,w-y),m.BOTTOM_RIGHT):new u(r.left+r.width-v,r.top+r.height-y),this.bottomLeftPaddingBox=c>0||C>0?x(r.left+E,r.top+Math.min(d,r.height-y),Math.max(0,c-E),Math.max(0,C-y),m.BOTTOM_LEFT):new u(r.left+E,r.top+r.height-y),this.topLeftContentBox=n>0||s>0?x(r.left+E+L,r.top+l+O,Math.max(0,n-(E+L)),Math.max(0,s-(l+O)),m.TOP_LEFT):new u(r.left+E+L,r.top+l+O),this.topRightContentBox=a>0||o>0?x(r.left+Math.min(F,r.width+E+L),r.top+l+O,F>r.width+E+L?0:a-E+L,o-(l+O),m.TOP_RIGHT):new u(r.left+r.width-(v+k),r.top+l+O),this.bottomRightContentBox=g>0||w>0?x(r.left+Math.min(p,r.width-(E+L)),r.top+Math.min(K,r.height+l+O),Math.max(0,g-(v+k)),w-(y+q),m.BOTTOM_RIGHT):new u(r.left+r.width-(v+k),r.top+r.height-(y+q)),this.bottomLeftContentBox=c>0||C>0?x(r.left+E+L,r.top+d,Math.max(0,c-(E+L)),C-(y+q),m.BOTTOM_LEFT):new u(r.left+E+L,r.top+r.height-(y+q))}return e}(),m;(function(e){e[e.TOP_LEFT=0]=\"TOP_LEFT\",e[e.TOP_RIGHT=1]=\"TOP_RIGHT\",e[e.BOTTOM_RIGHT=2]=\"BOTTOM_RIGHT\",e[e.BOTTOM_LEFT=3]=\"BOTTOM_LEFT\"})(m||(m={}));var x=function(e,A,t,r,B){var n=4*((Math.sqrt(2)-1)/3),s=t*n,i=r*n,a=e+t,o=A+r;switch(B){case m.TOP_LEFT:return new Te(new u(e,o),new u(e,o-i),new u(a-s,A),new u(a,A));case m.TOP_RIGHT:return new Te(new u(e,A),new u(e+s,A),new u(a,o-i),new u(a,o));case m.BOTTOM_RIGHT:return new Te(new u(a,A),new u(a,A+i),new u(e+s,o),new u(e,o));case m.BOTTOM_LEFT:default:return new Te(new u(a,o),new u(a-s,o),new u(e,A+i),new u(e,A))}},Ze=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},BQ=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},qe=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},nQ=function(){function e(A,t,r){this.offsetX=A,this.offsetY=t,this.matrix=r,this.type=0,this.target=6}return e}(),Se=function(){function e(A,t){this.path=A,this.target=t,this.type=1}return e}(),sQ=function(){function e(A){this.opacity=A,this.type=2,this.target=6}return e}(),aQ=function(e){return e.type===0},en=function(e){return e.type===1},iQ=function(e){return e.type===2},eB=function(e,A){return e.length===A.length?e.some(function(t,r){return t===A[r]}):!1},oQ=function(e,A,t,r,B){return e.map(function(n,s){switch(s){case 0:return n.add(A,t);case 1:return n.add(A+r,t);case 2:return n.add(A+r,t+B);case 3:return n.add(A,t+B)}return n})},rn=function(){function e(A){this.element=A,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),tn=function(){function e(A,t){if(this.container=A,this.parent=t,this.effects=[],this.curves=new tQ(this.container),this.container.styles.opacity<1&&this.effects.push(new sQ(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,B=this.container.bounds.top+this.container.styles.transformOrigin[1].number,n=this.container.styles.transform;this.effects.push(new nQ(r,B,n))}if(this.container.styles.overflowX!==0){var s=Ze(this.curves),i=qe(this.curves);eB(s,i)?this.effects.push(new Se(s,6)):(this.effects.push(new Se(s,2)),this.effects.push(new Se(i,4)))}}return e.prototype.getEffects=function(A){for(var t=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,B=this.effects.slice(0);r;){var n=r.effects.filter(function(a){return!en(a)});if(t||r.container.styles.position!==0||!r.parent){if(B.unshift.apply(B,n),t=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var s=Ze(r.curves),i=qe(r.curves);eB(s,i)||B.unshift(new Se(i,6))}}else B.unshift.apply(B,n);r=r.parent}return B.filter(function(a){return G(a.target,A)})},e}(),jr=function(e,A,t,r){e.container.elements.forEach(function(B){var n=G(B.flags,4),s=G(B.flags,2),i=new tn(B,e);G(B.styles.display,2048)&&r.push(i);var a=G(B.flags,8)?[]:r;if(n||s){var o=n||B.styles.isPositioned()?t:A,Q=new rn(i);if(B.styles.isPositioned()||B.styles.opacity<1||B.styles.isTransformed()){var g=B.styles.zIndex.order;if(g<0){var w=0;o.negativeZIndex.some(function(c,C){return g>c.element.container.styles.zIndex.order?(w=C,!1):w>0}),o.negativeZIndex.splice(w,0,Q)}else if(g>0){var f=0;o.positiveZIndex.some(function(c,C){return g>=c.element.container.styles.zIndex.order?(f=C+1,!1):f>0}),o.positiveZIndex.splice(f,0,Q)}else o.zeroOrAutoZIndexOrTransformedOrOpacity.push(Q)}else B.styles.isFloating()?o.nonPositionedFloats.push(Q):o.nonPositionedInlineLevel.push(Q);jr(i,Q,n?Q:t,a)}else B.styles.isInlineLevel()?A.inlineLevel.push(i):A.nonInlineLevel.push(i),jr(i,A,t,a);G(B.flags,8)&&Bn(B,a)})},Bn=function(e,A){for(var t=e instanceof kr?e.start:1,r=e instanceof kr?e.reversed:!1,B=0;B<A.length;B++){var n=A[B];n.container instanceof NB&&typeof n.container.value==\"number\"&&n.container.value!==0&&(t=n.container.value),n.listValue=we(t,n.container.styles.listStyleType,!0),t+=r?-1:1}},QQ=function(e){var A=new tn(e,null),t=new rn(A),r=[];return jr(A,t,t,r),Bn(A.container,r),t},rB=function(e,A){switch(A){case 0:return eA(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return eA(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return eA(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return eA(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},gQ=function(e,A){switch(A){case 0:return eA(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return eA(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return eA(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return eA(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},wQ=function(e,A){switch(A){case 0:return eA(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return eA(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return eA(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return eA(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},cQ=function(e,A){switch(A){case 0:return Oe(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return Oe(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return Oe(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return Oe(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},Oe=function(e,A){var t=[];return $(e)?t.push(e.subdivide(.5,!1)):t.push(e),$(A)?t.push(A.subdivide(.5,!0)):t.push(A),t},eA=function(e,A,t,r){var B=[];return $(e)?B.push(e.subdivide(.5,!1)):B.push(e),$(t)?B.push(t.subdivide(.5,!0)):B.push(t),$(r)?B.push(r.subdivide(.5,!0).reverse()):B.push(r),$(A)?B.push(A.subdivide(.5,!1).reverse()):B.push(A),B},nn=function(e){var A=e.bounds,t=e.styles;return A.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},je=function(e){var A=e.styles,t=e.bounds,r=b(A.paddingLeft,t.width),B=b(A.paddingRight,t.width),n=b(A.paddingTop,t.width),s=b(A.paddingBottom,t.width);return t.add(r+A.borderLeftWidth,n+A.borderTopWidth,-(A.borderRightWidth+A.borderLeftWidth+r+B),-(A.borderTopWidth+A.borderBottomWidth+n+s))},CQ=function(e,A){return e===0?A.bounds:e===2?je(A):nn(A)},uQ=function(e,A){return e===0?A.bounds:e===2?je(A):nn(A)},Kr=function(e,A,t){var r=CQ(XA(e.styles.backgroundOrigin,A),e),B=uQ(XA(e.styles.backgroundClip,A),e),n=lQ(XA(e.styles.backgroundSize,A),t,r),s=n[0],i=n[1],a=re(XA(e.styles.backgroundPosition,A),r.width-s,r.height-i),o=fQ(XA(e.styles.backgroundRepeat,A),a,n,r,B),Q=Math.round(r.left+a[0]),g=Math.round(r.top+a[1]);return[o,Q,g,s,i]},VA=function(e){return D(e)&&e.value===JA.AUTO},Me=function(e){return typeof e==\"number\"},lQ=function(e,A,t){var r=A[0],B=A[1],n=A[2],s=e[0],i=e[1];if(!s)return[0,0];if(M(s)&&i&&M(i))return[b(s,t.width),b(i,t.height)];var a=Me(n);if(D(s)&&(s.value===JA.CONTAIN||s.value===JA.COVER)){if(Me(n)){var o=t.width/t.height;return o<n!=(s.value===JA.COVER)?[t.width,t.width/n]:[t.height*n,t.height]}return[t.width,t.height]}var Q=Me(r),g=Me(B),w=Q||g;if(VA(s)&&(!i||VA(i))){if(Q&&g)return[r,B];if(!a&&!w)return[t.width,t.height];if(w&&a){var f=Q?r:B*n,c=g?B:r/n;return[f,c]}var C=Q?r:t.width,H=g?B:t.height;return[C,H]}if(a){var h=0,F=0;return M(s)?h=b(s,t.width):M(i)&&(F=b(i,t.height)),VA(s)?h=F*n:(!i||VA(i))&&(F=h/n),[h,F]}var K=null,p=null;if(M(s)?K=b(s,t.width):i&&M(i)&&(p=b(i,t.height)),K!==null&&(!i||VA(i))&&(p=Q&&g?K/r*B:t.height),p!==null&&VA(s)&&(K=Q&&g?p/B*r:t.width),K!==null&&p!==null)return[K,p];throw new Error(\"Unable to calculate background-size for element\")},XA=function(e,A){var t=e[A];return typeof t>\"u\"?e[0]:t},fQ=function(e,A,t,r,B){var n=A[0],s=A[1],i=t[0],a=t[1];switch(e){case 2:return[new u(Math.round(r.left),Math.round(r.top+s)),new u(Math.round(r.left+r.width),Math.round(r.top+s)),new u(Math.round(r.left+r.width),Math.round(a+r.top+s)),new u(Math.round(r.left),Math.round(a+r.top+s))];case 3:return[new u(Math.round(r.left+n),Math.round(r.top)),new u(Math.round(r.left+n+i),Math.round(r.top)),new u(Math.round(r.left+n+i),Math.round(r.height+r.top)),new u(Math.round(r.left+n),Math.round(r.height+r.top))];case 1:return[new u(Math.round(r.left+n),Math.round(r.top+s)),new u(Math.round(r.left+n+i),Math.round(r.top+s)),new u(Math.round(r.left+n+i),Math.round(r.top+s+a)),new u(Math.round(r.left+n),Math.round(r.top+s+a))];default:return[new u(Math.round(B.left),Math.round(B.top)),new u(Math.round(B.left+B.width),Math.round(B.top)),new u(Math.round(B.left+B.width),Math.round(B.height+B.top)),new u(Math.round(B.left),Math.round(B.height+B.top))]}},UQ=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\",tB=\"Hidden Text\",FQ=function(){function e(A){this._data={},this._document=A}return e.prototype.parseMetrics=function(A,t){var r=this._document.createElement(\"div\"),B=this._document.createElement(\"img\"),n=this._document.createElement(\"span\"),s=this._document.body;r.style.visibility=\"hidden\",r.style.fontFamily=A,r.style.fontSize=t,r.style.margin=\"0\",r.style.padding=\"0\",r.style.whiteSpace=\"nowrap\",s.appendChild(r),B.src=UQ,B.width=1,B.height=1,B.style.margin=\"0\",B.style.padding=\"0\",B.style.verticalAlign=\"baseline\",n.style.fontFamily=A,n.style.fontSize=t,n.style.margin=\"0\",n.style.padding=\"0\",n.appendChild(this._document.createTextNode(tB)),r.appendChild(n),r.appendChild(B);var i=B.offsetTop-n.offsetTop+2;r.removeChild(n),r.appendChild(this._document.createTextNode(tB)),r.style.lineHeight=\"normal\",B.style.verticalAlign=\"super\";var a=B.offsetTop-r.offsetTop+2;return s.removeChild(r),{baseline:i,middle:a}},e.prototype.getMetrics=function(A,t){var r=A+\" \"+t;return typeof this._data[r]>\"u\"&&(this._data[r]=this.parseMetrics(A,t)),this._data[r]},e}(),sn=function(){function e(A,t){this.context=A,this.options=t}return e}(),hQ=1e4,dQ=function(e){tA(A,e);function A(t,r){var B=e.call(this,t,r)||this;return B._activeEffects=[],B.canvas=r.canvas?r.canvas:document.createElement(\"canvas\"),B.ctx=B.canvas.getContext(\"2d\"),r.canvas||(B.canvas.width=Math.floor(r.width*r.scale),B.canvas.height=Math.floor(r.height*r.scale),B.canvas.style.width=r.width+\"px\",B.canvas.style.height=r.height+\"px\"),B.fontMetrics=new FQ(document),B.ctx.scale(B.options.scale,B.options.scale),B.ctx.translate(-r.x,-r.y),B.ctx.textBaseline=\"bottom\",B._activeEffects=[],B.context.logger.debug(\"Canvas renderer initialized (\"+r.width+\"x\"+r.height+\") with scale \"+r.scale),B}return A.prototype.applyEffects=function(t){for(var r=this;this._activeEffects.length;)this.popEffect();t.forEach(function(B){return r.applyEffect(B)})},A.prototype.applyEffect=function(t){this.ctx.save(),iQ(t)&&(this.ctx.globalAlpha=t.opacity),aQ(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),en(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},A.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},A.prototype.renderStack=function(t){return P(this,void 0,void 0,function(){var r;return _(this,function(B){switch(B.label){case 0:return r=t.element.container.styles,r.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:B.sent(),B.label=2;case 2:return[2]}})})},A.prototype.renderNode=function(t){return P(this,void 0,void 0,function(){return _(this,function(r){switch(r.label){case 0:if(G(t.container.flags,16))debugger;return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(t)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},A.prototype.renderTextWithLetterSpacing=function(t,r,B){var n=this;if(r===0)this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+B);else{var s=rt(t.text);s.reduce(function(i,a){return n.ctx.fillText(a,i,t.bounds.top+B),i+n.ctx.measureText(a).width},t.bounds.left)}},A.prototype.createFontStyle=function(t){var r=t.fontVariant.filter(function(s){return s===\"normal\"||s===\"small-caps\"}).join(\"\"),B=vQ(t.fontFamily).join(\", \"),n=Ce(t.fontSize)?\"\"+t.fontSize.number+t.fontSize.unit:t.fontSize.number+\"px\";return[[t.fontStyle,r,t.fontWeight,n,B].join(\" \"),B,n]},A.prototype.renderTextNode=function(t,r){return P(this,void 0,void 0,function(){var B,n,s,i,a,o,Q,g,w=this;return _(this,function(f){return B=this.createFontStyle(r),n=B[0],s=B[1],i=B[2],this.ctx.font=n,this.ctx.direction=r.direction===1?\"rtl\":\"ltr\",this.ctx.textAlign=\"left\",this.ctx.textBaseline=\"alphabetic\",a=this.fontMetrics.getMetrics(s,i),o=a.baseline,Q=a.middle,g=r.paintOrder,t.textBounds.forEach(function(c){g.forEach(function(C){switch(C){case 0:w.ctx.fillStyle=R(r.color),w.renderTextWithLetterSpacing(c,r.letterSpacing,o);var H=r.textShadow;H.length&&c.text.trim().length&&(H.slice(0).reverse().forEach(function(h){w.ctx.shadowColor=R(h.color),w.ctx.shadowOffsetX=h.offsetX.number*w.options.scale,w.ctx.shadowOffsetY=h.offsetY.number*w.options.scale,w.ctx.shadowBlur=h.blur.number,w.renderTextWithLetterSpacing(c,r.letterSpacing,o)}),w.ctx.shadowColor=\"\",w.ctx.shadowOffsetX=0,w.ctx.shadowOffsetY=0,w.ctx.shadowBlur=0),r.textDecorationLine.length&&(w.ctx.fillStyle=R(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(h){switch(h){case 1:w.ctx.fillRect(c.bounds.left,Math.round(c.bounds.top+o),c.bounds.width,1);break;case 2:w.ctx.fillRect(c.bounds.left,Math.round(c.bounds.top),c.bounds.width,1);break;case 3:w.ctx.fillRect(c.bounds.left,Math.ceil(c.bounds.top+Q),c.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&c.text.trim().length&&(w.ctx.strokeStyle=R(r.webkitTextStrokeColor),w.ctx.lineWidth=r.webkitTextStrokeWidth,w.ctx.lineJoin=window.chrome?\"miter\":\"round\",w.ctx.strokeText(c.text,c.bounds.left,c.bounds.top+o)),w.ctx.strokeStyle=\"\",w.ctx.lineWidth=0,w.ctx.lineJoin=\"miter\";break}})}),[2]})})},A.prototype.renderReplacedElement=function(t,r,B){if(B&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var n=je(t),s=qe(r);this.path(s),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(B,0,0,t.intrinsicWidth,t.intrinsicHeight,n.left,n.top,n.width,n.height),this.ctx.restore()}},A.prototype.renderNodeContent=function(t){return P(this,void 0,void 0,function(){var r,B,n,s,i,a,F,F,o,Q,g,w,p,f,c,d,C,H,h,F,K,p,d;return _(this,function(l){switch(l.label){case 0:this.applyEffects(t.getEffects(4)),r=t.container,B=t.curves,n=r.styles,s=0,i=r.textNodes,l.label=1;case 1:return s<i.length?(a=i[s],[4,this.renderTextNode(a,n)]):[3,4];case 2:l.sent(),l.label=3;case 3:return s++,[3,1];case 4:if(!(r instanceof GB))return[3,8];l.label=5;case 5:return l.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return F=l.sent(),this.renderReplacedElement(r,B,F),[3,8];case 7:return l.sent(),this.context.logger.error(\"Error loading image \"+r.src),[3,8];case 8:if(r instanceof RB&&this.renderReplacedElement(r,B,r.canvas),!(r instanceof VB))return[3,12];l.label=9;case 9:return l.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return F=l.sent(),this.renderReplacedElement(r,B,F),[3,12];case 11:return l.sent(),this.context.logger.error(\"Error loading svg \"+r.svg.substring(0,255)),[3,12];case 12:return r instanceof JB&&r.tree?(o=new A(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,o.render(r.tree)]):[3,14];case 13:Q=l.sent(),r.width&&r.height&&this.ctx.drawImage(Q,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),l.label=14;case 14:if(r instanceof tt&&(g=Math.min(r.bounds.width,r.bounds.height),r.type===Pe?r.checked&&(this.ctx.save(),this.path([new u(r.bounds.left+g*.39363,r.bounds.top+g*.79),new u(r.bounds.left+g*.16,r.bounds.top+g*.5549),new u(r.bounds.left+g*.27347,r.bounds.top+g*.44071),new u(r.bounds.left+g*.39694,r.bounds.top+g*.5649),new u(r.bounds.left+g*.72983,r.bounds.top+g*.23),new u(r.bounds.left+g*.84,r.bounds.top+g*.34085),new u(r.bounds.left+g*.39363,r.bounds.top+g*.79)]),this.ctx.fillStyle=R(Jt),this.ctx.fill(),this.ctx.restore()):r.type===ke&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+g/2,r.bounds.top+g/2,g/4,0,Math.PI*2,!0),this.ctx.fillStyle=R(Jt),this.ctx.fill(),this.ctx.restore())),EQ(r)&&r.value.length){switch(w=this.createFontStyle(n),p=w[0],f=w[1],c=this.fontMetrics.getMetrics(p,f).baseline,this.ctx.font=p,this.ctx.fillStyle=R(n.color),this.ctx.textBaseline=\"alphabetic\",this.ctx.textAlign=pQ(r.styles.textAlign),d=je(r),C=0,r.styles.textAlign){case 1:C+=d.width/2;break;case 2:C+=d.width;break}H=d.add(C,0,0,-d.height/2+1),this.ctx.save(),this.path([new u(d.left,d.top),new u(d.left+d.width,d.top),new u(d.left+d.width,d.top+d.height),new u(d.left,d.top+d.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new ie(r.value,H),n.letterSpacing,c),this.ctx.restore(),this.ctx.textBaseline=\"alphabetic\",this.ctx.textAlign=\"left\"}if(!G(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(h=r.styles.listStyleImage,h.type!==0)return[3,18];F=void 0,K=h.url,l.label=15;case 15:return l.trys.push([15,17,,18]),[4,this.context.cache.match(K)];case 16:return F=l.sent(),this.ctx.drawImage(F,r.bounds.left-(F.width+10),r.bounds.top),[3,18];case 17:return l.sent(),this.context.logger.error(\"Error loading list-style-image \"+K),[3,18];case 18:return[3,20];case 19:t.listValue&&r.styles.listStyleType!==-1&&(p=this.createFontStyle(n)[0],this.ctx.font=p,this.ctx.fillStyle=R(n.color),this.ctx.textBaseline=\"middle\",this.ctx.textAlign=\"right\",d=new cA(r.bounds.left,r.bounds.top+b(r.styles.paddingTop,r.bounds.width),r.bounds.width,yt(n.lineHeight,n.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new ie(t.listValue,d),n.letterSpacing,yt(n.lineHeight,n.fontSize.number)/2+2),this.ctx.textBaseline=\"bottom\",this.ctx.textAlign=\"left\"),l.label=20;case 20:return[2]}})})},A.prototype.renderStackContent=function(t){return P(this,void 0,void 0,function(){var r,B,h,n,s,h,i,a,h,o,Q,h,g,w,h,f,c,h,C,H,h;return _(this,function(F){switch(F.label){case 0:if(G(t.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:F.sent(),r=0,B=t.negativeZIndex,F.label=2;case 2:return r<B.length?(h=B[r],[4,this.renderStack(h)]):[3,5];case 3:F.sent(),F.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:F.sent(),n=0,s=t.nonInlineLevel,F.label=7;case 7:return n<s.length?(h=s[n],[4,this.renderNode(h)]):[3,10];case 8:F.sent(),F.label=9;case 9:return n++,[3,7];case 10:i=0,a=t.nonPositionedFloats,F.label=11;case 11:return i<a.length?(h=a[i],[4,this.renderStack(h)]):[3,14];case 12:F.sent(),F.label=13;case 13:return i++,[3,11];case 14:o=0,Q=t.nonPositionedInlineLevel,F.label=15;case 15:return o<Q.length?(h=Q[o],[4,this.renderStack(h)]):[3,18];case 16:F.sent(),F.label=17;case 17:return o++,[3,15];case 18:g=0,w=t.inlineLevel,F.label=19;case 19:return g<w.length?(h=w[g],[4,this.renderNode(h)]):[3,22];case 20:F.sent(),F.label=21;case 21:return g++,[3,19];case 22:f=0,c=t.zeroOrAutoZIndexOrTransformedOrOpacity,F.label=23;case 23:return f<c.length?(h=c[f],[4,this.renderStack(h)]):[3,26];case 24:F.sent(),F.label=25;case 25:return f++,[3,23];case 26:C=0,H=t.positiveZIndex,F.label=27;case 27:return C<H.length?(h=H[C],[4,this.renderStack(h)]):[3,30];case 28:F.sent(),F.label=29;case 29:return C++,[3,27];case 30:return[2]}})})},A.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},A.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},A.prototype.formatPath=function(t){var r=this;t.forEach(function(B,n){var s=$(B)?B.start:B;n===0?r.ctx.moveTo(s.x,s.y):r.ctx.lineTo(s.x,s.y),$(B)&&r.ctx.bezierCurveTo(B.startControl.x,B.startControl.y,B.endControl.x,B.endControl.y,B.end.x,B.end.y)})},A.prototype.renderRepeat=function(t,r,B,n){this.path(t),this.ctx.fillStyle=r,this.ctx.translate(B,n),this.ctx.fill(),this.ctx.translate(-B,-n)},A.prototype.resizeImage=function(t,r,B){var n;if(t.width===r&&t.height===B)return t;var s=(n=this.canvas.ownerDocument)!==null&&n!==void 0?n:document,i=s.createElement(\"canvas\");i.width=Math.max(1,r),i.height=Math.max(1,B);var a=i.getContext(\"2d\");return a.drawImage(t,0,0,t.width,t.height,0,0,r,B),i},A.prototype.renderBackgroundImage=function(t){return P(this,void 0,void 0,function(){var r,B,n,s,i,a;return _(this,function(o){switch(o.label){case 0:r=t.styles.backgroundImage.length-1,B=function(Q){var g,w,f,O,Y,W,L,V,y,c,O,Y,W,L,V,C,H,h,F,K,p,d,l,v,y,E,O,k,q,L,V,CA,Y,W,IA,BA,uA,vA,yA,iA,KA,oA;return _(this,function(TA){switch(TA.label){case 0:if(Q.type!==0)return[3,5];g=void 0,w=Q.url,TA.label=1;case 1:return TA.trys.push([1,3,,4]),[4,n.context.cache.match(w)];case 2:return g=TA.sent(),[3,4];case 3:return TA.sent(),n.context.logger.error(\"Error loading background-image \"+w),[3,4];case 4:return g&&(f=Kr(t,r,[g.width,g.height,g.width/g.height]),O=f[0],Y=f[1],W=f[2],L=f[3],V=f[4],y=n.ctx.createPattern(n.resizeImage(g,L,V),\"repeat\"),n.renderRepeat(O,y,Y,W)),[3,6];case 5:sa(Q)?(c=Kr(t,r,[null,null,null]),O=c[0],Y=c[1],W=c[2],L=c[3],V=c[4],C=ea(Q.angle,L,V),H=C[0],h=C[1],F=C[2],K=C[3],p=C[4],d=document.createElement(\"canvas\"),d.width=L,d.height=V,l=d.getContext(\"2d\"),v=l.createLinearGradient(h,K,F,p),It(Q.stops,H).forEach(function(YA){return v.addColorStop(YA.stop,R(YA.color))}),l.fillStyle=v,l.fillRect(0,0,L,V),L>0&&V>0&&(y=n.ctx.createPattern(d,\"repeat\"),n.renderRepeat(O,y,Y,W))):aa(Q)&&(E=Kr(t,r,[null,null,null]),O=E[0],k=E[1],q=E[2],L=E[3],V=E[4],CA=Q.position.length===0?[$r]:Q.position,Y=b(CA[0],L),W=b(CA[CA.length-1],V),IA=ra(Q,Y,W,L,V),BA=IA[0],uA=IA[1],BA>0&&uA>0&&(vA=n.ctx.createRadialGradient(k+Y,q+W,0,k+Y,q+W,BA),It(Q.stops,BA*2).forEach(function(YA){return vA.addColorStop(YA.stop,R(YA.color))}),n.path(O),n.ctx.fillStyle=vA,BA!==uA?(yA=t.bounds.left+.5*t.bounds.width,iA=t.bounds.top+.5*t.bounds.height,KA=uA/BA,oA=1/KA,n.ctx.save(),n.ctx.translate(yA,iA),n.ctx.transform(1,0,0,KA,0,0),n.ctx.translate(-yA,-iA),n.ctx.fillRect(k,oA*(q-iA)+iA,L,V*oA),n.ctx.restore()):n.ctx.fill())),TA.label=6;case 6:return r--,[2]}})},n=this,s=0,i=t.styles.backgroundImage.slice(0).reverse(),o.label=1;case 1:return s<i.length?(a=i[s],[5,B(a)]):[3,4];case 2:o.sent(),o.label=3;case 3:return s++,[3,1];case 4:return[2]}})})},A.prototype.renderSolidBorder=function(t,r,B){return P(this,void 0,void 0,function(){return _(this,function(n){return this.path(rB(B,r)),this.ctx.fillStyle=R(t),this.ctx.fill(),[2]})})},A.prototype.renderDoubleBorder=function(t,r,B,n){return P(this,void 0,void 0,function(){var s,i;return _(this,function(a){switch(a.label){case 0:return r<3?[4,this.renderSolidBorder(t,B,n)]:[3,2];case 1:return a.sent(),[2];case 2:return s=gQ(n,B),this.path(s),this.ctx.fillStyle=R(t),this.ctx.fill(),i=wQ(n,B),this.path(i),this.ctx.fill(),[2]}})})},A.prototype.renderNodeBackgroundAndBorders=function(t){return P(this,void 0,void 0,function(){var r,B,n,s,i,a,o,Q,g=this;return _(this,function(w){switch(w.label){case 0:return this.applyEffects(t.getEffects(2)),r=t.container.styles,B=!HA(r.backgroundColor)||r.backgroundImage.length,n=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],s=HQ(XA(r.backgroundClip,0),t.curves),B||r.boxShadow.length?(this.ctx.save(),this.path(s),this.ctx.clip(),HA(r.backgroundColor)||(this.ctx.fillStyle=R(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:w.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(f){g.ctx.save();var c=Ze(t.curves),C=f.inset?0:hQ,H=oQ(c,-C+(f.inset?1:-1)*f.spread.number,(f.inset?1:-1)*f.spread.number,f.spread.number*(f.inset?-2:2),f.spread.number*(f.inset?-2:2));f.inset?(g.path(c),g.ctx.clip(),g.mask(H)):(g.mask(c),g.ctx.clip(),g.path(H)),g.ctx.shadowOffsetX=f.offsetX.number+C,g.ctx.shadowOffsetY=f.offsetY.number,g.ctx.shadowColor=R(f.color),g.ctx.shadowBlur=f.blur.number,g.ctx.fillStyle=f.inset?R(f.color):\"rgba(0,0,0,1)\",g.ctx.fill(),g.ctx.restore()}),w.label=2;case 2:i=0,a=0,o=n,w.label=3;case 3:return a<o.length?(Q=o[a],Q.style!==0&&!HA(Q.color)&&Q.width>0?Q.style!==2?[3,5]:[4,this.renderDashedDottedBorder(Q.color,Q.width,i,t.curves,2)]:[3,11]):[3,13];case 4:return w.sent(),[3,11];case 5:return Q.style!==3?[3,7]:[4,this.renderDashedDottedBorder(Q.color,Q.width,i,t.curves,3)];case 6:return w.sent(),[3,11];case 7:return Q.style!==4?[3,9]:[4,this.renderDoubleBorder(Q.color,Q.width,i,t.curves)];case 8:return w.sent(),[3,11];case 9:return[4,this.renderSolidBorder(Q.color,i,t.curves)];case 10:w.sent(),w.label=11;case 11:i++,w.label=12;case 12:return a++,[3,3];case 13:return[2]}})})},A.prototype.renderDashedDottedBorder=function(t,r,B,n,s){return P(this,void 0,void 0,function(){var i,a,o,Q,g,w,f,c,C,H,h,F,K,p,d,l,d,l;return _(this,function(v){return this.ctx.save(),i=cQ(n,B),a=rB(n,B),s===2&&(this.path(a),this.ctx.clip()),$(a[0])?(o=a[0].start.x,Q=a[0].start.y):(o=a[0].x,Q=a[0].y),$(a[1])?(g=a[1].end.x,w=a[1].end.y):(g=a[1].x,w=a[1].y),B===0||B===2?f=Math.abs(o-g):f=Math.abs(Q-w),this.ctx.beginPath(),s===3?this.formatPath(i):this.formatPath(a.slice(0,2)),c=r<3?r*3:r*2,C=r<3?r*2:r,s===3&&(c=r,C=r),H=!0,f<=c*2?H=!1:f<=c*2+C?(h=f/(2*c+C),c*=h,C*=h):(F=Math.floor((f+C)/(c+C)),K=(f-F*c)/(F-1),p=(f-(F+1)*c)/F,C=p<=0||Math.abs(C-K)<Math.abs(C-p)?K:p),H&&(s===3?this.ctx.setLineDash([0,c+C]):this.ctx.setLineDash([c,C])),s===3?(this.ctx.lineCap=\"round\",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=R(t),this.ctx.stroke(),this.ctx.setLineDash([]),s===2&&($(a[0])&&(d=a[3],l=a[0],this.ctx.beginPath(),this.formatPath([new u(d.end.x,d.end.y),new u(l.start.x,l.start.y)]),this.ctx.stroke()),$(a[1])&&(d=a[1],l=a[2],this.ctx.beginPath(),this.formatPath([new u(d.end.x,d.end.y),new u(l.start.x,l.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},A.prototype.render=function(t){return P(this,void 0,void 0,function(){var r;return _(this,function(B){switch(B.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=R(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=QQ(t),[4,this.renderStack(r)];case 1:return B.sent(),this.applyEffects([]),[2,this.canvas]}})})},A}(sn),EQ=function(e){return e instanceof _B||e instanceof XB?!0:e instanceof tt&&e.type!==ke&&e.type!==Pe},HQ=function(e,A){switch(e){case 0:return Ze(A);case 2:return BQ(A);case 1:default:return qe(A)}},pQ=function(e){switch(e){case 1:return\"center\";case 2:return\"right\";case 0:default:return\"left\"}},IQ=[\"-apple-system\",\"system-ui\"],vQ=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(A){return IQ.indexOf(A)===-1}):e},yQ=function(e){tA(A,e);function A(t,r){var B=e.call(this,t,r)||this;return B.canvas=r.canvas?r.canvas:document.createElement(\"canvas\"),B.ctx=B.canvas.getContext(\"2d\"),B.options=r,B.canvas.width=Math.floor(r.width*r.scale),B.canvas.height=Math.floor(r.height*r.scale),B.canvas.style.width=r.width+\"px\",B.canvas.style.height=r.height+\"px\",B.ctx.scale(B.options.scale,B.options.scale),B.ctx.translate(-r.x,-r.y),B.context.logger.debug(\"EXPERIMENTAL ForeignObject renderer initialized (\"+r.width+\"x\"+r.height+\" at \"+r.x+\",\"+r.y+\") with scale \"+r.scale),B}return A.prototype.render=function(t){return P(this,void 0,void 0,function(){var r,B;return _(this,function(n){switch(n.label){case 0:return r=Pr(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,KQ(r)];case 1:return B=n.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=R(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(B,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},A}(sn),KQ=function(e){return new Promise(function(A,t){var r=new Image;r.onload=function(){A(r)},r.onerror=t,r.src=\"data:image/svg+xml;charset=utf-8,\"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},mQ=function(){function e(A){var t=A.id,r=A.enabled;this.id=t,this.enabled=r,this.start=Date.now()}return e.prototype.debug=function(){for(var A=[],t=0;t<arguments.length;t++)A[t]=arguments[t];this.enabled&&(typeof window<\"u\"&&window.console&&typeof console.debug==\"function\"?console.debug.apply(console,ue([this.id,this.getTime()+\"ms\"],A)):this.info.apply(this,A))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var A=[],t=0;t<arguments.length;t++)A[t]=arguments[t];this.enabled&&typeof window<\"u\"&&window.console&&typeof console.info==\"function\"&&console.info.apply(console,ue([this.id,this.getTime()+\"ms\"],A))},e.prototype.warn=function(){for(var A=[],t=0;t<arguments.length;t++)A[t]=arguments[t];this.enabled&&(typeof window<\"u\"&&window.console&&typeof console.warn==\"function\"?console.warn.apply(console,ue([this.id,this.getTime()+\"ms\"],A)):this.info.apply(this,A))},e.prototype.error=function(){for(var A=[],t=0;t<arguments.length;t++)A[t]=arguments[t];this.enabled&&(typeof window<\"u\"&&window.console&&typeof console.error==\"function\"?console.error.apply(console,ue([this.id,this.getTime()+\"ms\"],A)):this.info.apply(this,A))},e.instances={},e}(),LQ=function(){function e(A,t){var r;this.windowBounds=t,this.instanceName=\"#\"+e.instanceCount++,this.logger=new mQ({id:this.instanceName,enabled:A.logging}),this.cache=(r=A.cache)!==null&&r!==void 0?r:new qo(this,A)}return e.instanceCount=1,e}(),xQ=function(e,A){return A===void 0&&(A={}),DQ(e,A)};typeof window<\"u\"&&An.setContext(window);var DQ=function(e,A){return P(void 0,void 0,void 0,function(){var t,r,B,n,s,i,a,o,Q,g,w,f,c,C,H,h,F,K,p,d,v,l,v,y,E,O,k,q,L,V,CA,Y,W,IA,BA,uA,vA,yA,iA,KA;return _(this,function(oA){switch(oA.label){case 0:if(!e||typeof e!=\"object\")return[2,Promise.reject(\"Invalid element provided as first argument\")];if(t=e.ownerDocument,!t)throw new Error(\"Element is not attached to a Document\");if(r=t.defaultView,!r)throw new Error(\"Document is not attached to a Window\");return B={allowTaint:(y=A.allowTaint)!==null&&y!==void 0?y:!1,imageTimeout:(E=A.imageTimeout)!==null&&E!==void 0?E:15e3,proxy:A.proxy,useCORS:(O=A.useCORS)!==null&&O!==void 0?O:!1},n=Lr({logging:(k=A.logging)!==null&&k!==void 0?k:!0,cache:A.cache},B),s={windowWidth:(q=A.windowWidth)!==null&&q!==void 0?q:r.innerWidth,windowHeight:(L=A.windowHeight)!==null&&L!==void 0?L:r.innerHeight,scrollX:(V=A.scrollX)!==null&&V!==void 0?V:r.pageXOffset,scrollY:(CA=A.scrollY)!==null&&CA!==void 0?CA:r.pageYOffset},i=new cA(s.scrollX,s.scrollY,s.windowWidth,s.windowHeight),a=new LQ(n,i),o=(Y=A.foreignObjectRendering)!==null&&Y!==void 0?Y:!1,Q={allowTaint:(W=A.allowTaint)!==null&&W!==void 0?W:!1,onclone:A.onclone,ignoreElements:A.ignoreElements,inlineImages:o,copyStyles:o},a.logger.debug(\"Starting document clone with size \"+i.width+\"x\"+i.height+\" scrolled to \"+-i.left+\",\"+-i.top),g=new $t(a,e,Q),w=g.clonedReferenceElement,w?[4,g.toIFrame(t,i)]:[2,Promise.reject(\"Unable to find element in cloned iframe\")];case 1:return f=oA.sent(),c=Bt(w)||xo(w)?an(w.ownerDocument):ze(a,w),C=c.width,H=c.height,h=c.left,F=c.top,K=bQ(a,w,A.backgroundColor),p={canvas:A.canvas,backgroundColor:K,scale:(BA=(IA=A.scale)!==null&&IA!==void 0?IA:r.devicePixelRatio)!==null&&BA!==void 0?BA:1,x:((uA=A.x)!==null&&uA!==void 0?uA:0)+h,y:((vA=A.y)!==null&&vA!==void 0?vA:0)+F,width:(yA=A.width)!==null&&yA!==void 0?yA:Math.ceil(C),height:(iA=A.height)!==null&&iA!==void 0?iA:Math.ceil(H)},o?(a.logger.debug(\"Document cloned, using foreign object rendering\"),v=new yQ(a,p),[4,v.render(w)]):[3,3];case 2:return d=oA.sent(),[3,5];case 3:return a.logger.debug(\"Document cloned, element located at \"+h+\",\"+F+\" with size \"+C+\"x\"+H+\" using computed rendering\"),a.logger.debug(\"Starting DOM parsing\"),l=kB(a,w),K===l.styles.backgroundColor&&(l.styles.backgroundColor=wA.TRANSPARENT),a.logger.debug(\"Starting renderer for element at \"+p.x+\",\"+p.y+\" with size \"+p.width+\"x\"+p.height),v=new dQ(a,p),[4,v.render(l)];case 4:d=oA.sent(),oA.label=5;case 5:return(!((KA=A.removeContainer)!==null&&KA!==void 0)||KA)&&($t.destroy(f)||a.logger.error(\"Cannot detach cloned iframe as it is not in the DOM anymore\")),a.logger.debug(\"Finished rendering\"),[2,d]}})})},bQ=function(e,A,t){var r=A.ownerDocument,B=r.documentElement?se(e,getComputedStyle(r.documentElement).backgroundColor):wA.TRANSPARENT,n=r.body?se(e,getComputedStyle(r.body).backgroundColor):wA.TRANSPARENT,s=typeof t==\"string\"?se(e,t):t===null?wA.TRANSPARENT:4294967295;return A===r.documentElement?HA(B)?HA(n)?s:n:B:s};export{xQ as default};\n","size_bytes":202301},"public/assets/index-CNopXcV6.js":{"content":"var d5=e=>{throw TypeError(e)};var f1=(e,t,n)=>t.has(e)||d5(\"Cannot \"+n);var ne=(e,t,n)=>(f1(e,t,\"read from private field\"),n?n.call(e):t.get(e)),lt=(e,t,n)=>t.has(e)?d5(\"Cannot add the same private member more than once\"):t instanceof WeakSet?t.add(e):t.set(e,n),Ze=(e,t,n,r)=>(f1(e,t,\"write to private field\"),r?r.call(e,n):t.set(e,n),n),At=(e,t,n)=>(f1(e,t,\"access private method\"),n);var Kh=(e,t,n,r)=>({set _(i){Ze(e,t,i,n)},get _(){return ne(e,t,r)}});function W_(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!=\"string\"&&!Array.isArray(r)){for(const i in r)if(i!==\"default\"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}))}(function(){const t=document.createElement(\"link\").relList;if(t&&t.supports&&t.supports(\"modulepreload\"))return;for(const i of document.querySelectorAll('link[rel=\"modulepreload\"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type===\"childList\")for(const a of s.addedNodes)a.tagName===\"LINK\"&&a.rel===\"modulepreload\"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin===\"use-credentials\"?s.credentials=\"include\":i.crossOrigin===\"anonymous\"?s.credentials=\"omit\":s.credentials=\"same-origin\",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var vd=typeof globalThis<\"u\"?globalThis:typeof window<\"u\"?window:typeof global<\"u\"?global:typeof self<\"u\"?self:{};function cb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,\"default\")?e.default:e}var ub={exports:{}},Dm={},db={exports:{}},It={};/**\n * @license React\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */var $f=Symbol.for(\"react.element\"),H_=Symbol.for(\"react.portal\"),G_=Symbol.for(\"react.fragment\"),K_=Symbol.for(\"react.strict_mode\"),Z_=Symbol.for(\"react.profiler\"),Q_=Symbol.for(\"react.provider\"),Y_=Symbol.for(\"react.context\"),X_=Symbol.for(\"react.forward_ref\"),J_=Symbol.for(\"react.suspense\"),eC=Symbol.for(\"react.memo\"),tC=Symbol.for(\"react.lazy\"),f5=Symbol.iterator;function nC(e){return e===null||typeof e!=\"object\"?null:(e=f5&&e[f5]||e[\"@@iterator\"],typeof e==\"function\"?e:null)}var fb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hb=Object.assign,pb={};function Tu(e,t,n){this.props=e,this.context=t,this.refs=pb,this.updater=n||fb}Tu.prototype.isReactComponent={};Tu.prototype.setState=function(e,t){if(typeof e!=\"object\"&&typeof e!=\"function\"&&e!=null)throw Error(\"setState(...): takes an object of state variables to update or a function which returns an object of state variables.\");this.updater.enqueueSetState(this,e,t,\"setState\")};Tu.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,\"forceUpdate\")};function mb(){}mb.prototype=Tu.prototype;function Xv(e,t,n){this.props=e,this.context=t,this.refs=pb,this.updater=n||fb}var Jv=Xv.prototype=new mb;Jv.constructor=Xv;hb(Jv,Tu.prototype);Jv.isPureReactComponent=!0;var h5=Array.isArray,gb=Object.prototype.hasOwnProperty,e2={current:null},vb={key:!0,ref:!0,__self:!0,__source:!0};function yb(e,t,n){var r,i={},s=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=\"\"+t.key),t)gb.call(t,r)&&!vb.hasOwnProperty(r)&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];i.children=c}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:$f,type:e,key:s,ref:a,props:i,_owner:e2.current}}function rC(e,t){return{$$typeof:$f,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function t2(e){return typeof e==\"object\"&&e!==null&&e.$$typeof===$f}function iC(e){var t={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+e.replace(/[=:]/g,function(n){return t[n]})}var p5=/\\/+/g;function h1(e,t){return typeof e==\"object\"&&e!==null&&e.key!=null?iC(\"\"+e.key):t.toString(36)}function jp(e,t,n,r,i){var s=typeof e;(s===\"undefined\"||s===\"boolean\")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case\"string\":case\"number\":a=!0;break;case\"object\":switch(e.$$typeof){case $f:case H_:a=!0}}if(a)return a=e,i=i(a),e=r===\"\"?\".\"+h1(a,0):r,h5(i)?(n=\"\",e!=null&&(n=e.replace(p5,\"$&/\")+\"/\"),jp(i,t,n,\"\",function(d){return d})):i!=null&&(t2(i)&&(i=rC(i,n+(!i.key||a&&a.key===i.key?\"\":(\"\"+i.key).replace(p5,\"$&/\")+\"/\")+e)),t.push(i)),1;if(a=0,r=r===\"\"?\".\":r+\":\",h5(e))for(var o=0;o<e.length;o++){s=e[o];var c=r+h1(s,o);a+=jp(s,t,n,c,i)}else if(c=nC(e),typeof c==\"function\")for(e=c.call(e),o=0;!(s=e.next()).done;)s=s.value,c=r+h1(s,o++),a+=jp(s,t,n,c,i);else if(s===\"object\")throw t=String(e),Error(\"Objects are not valid as a React child (found: \"+(t===\"[object Object]\"?\"object with keys {\"+Object.keys(e).join(\", \")+\"}\":t)+\"). If you meant to render a collection of children, use an array instead.\");return a}function Zh(e,t,n){if(e==null)return e;var r=[],i=0;return jp(e,r,\"\",\"\",function(s){return t.call(n,s,i++)}),r}function sC(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Fr={current:null},_p={transition:null},aC={ReactCurrentDispatcher:Fr,ReactCurrentBatchConfig:_p,ReactCurrentOwner:e2};function xb(){throw Error(\"act(...) is not supported in production builds of React.\")}It.Children={map:Zh,forEach:function(e,t,n){Zh(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Zh(e,function(){t++}),t},toArray:function(e){return Zh(e,function(t){return t})||[]},only:function(e){if(!t2(e))throw Error(\"React.Children.only expected to receive a single React element child.\");return e}};It.Component=Tu;It.Fragment=G_;It.Profiler=Z_;It.PureComponent=Xv;It.StrictMode=K_;It.Suspense=J_;It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aC;It.act=xb;It.cloneElement=function(e,t,n){if(e==null)throw Error(\"React.cloneElement(...): The argument must be a React element, but you passed \"+e+\".\");var r=hb({},e.props),i=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=e2.current),t.key!==void 0&&(i=\"\"+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)gb.call(t,c)&&!vb.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];r.children=o}return{$$typeof:$f,type:e.type,key:i,ref:s,props:r,_owner:a}};It.createContext=function(e){return e={$$typeof:Y_,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Q_,_context:e},e.Consumer=e};It.createElement=yb;It.createFactory=function(e){var t=yb.bind(null,e);return t.type=e,t};It.createRef=function(){return{current:null}};It.forwardRef=function(e){return{$$typeof:X_,render:e}};It.isValidElement=t2;It.lazy=function(e){return{$$typeof:tC,_payload:{_status:-1,_result:e},_init:sC}};It.memo=function(e,t){return{$$typeof:eC,type:e,compare:t===void 0?null:t}};It.startTransition=function(e){var t=_p.transition;_p.transition={};try{e()}finally{_p.transition=t}};It.unstable_act=xb;It.useCallback=function(e,t){return Fr.current.useCallback(e,t)};It.useContext=function(e){return Fr.current.useContext(e)};It.useDebugValue=function(){};It.useDeferredValue=function(e){return Fr.current.useDeferredValue(e)};It.useEffect=function(e,t){return Fr.current.useEffect(e,t)};It.useId=function(){return Fr.current.useId()};It.useImperativeHandle=function(e,t,n){return Fr.current.useImperativeHandle(e,t,n)};It.useInsertionEffect=function(e,t){return Fr.current.useInsertionEffect(e,t)};It.useLayoutEffect=function(e,t){return Fr.current.useLayoutEffect(e,t)};It.useMemo=function(e,t){return Fr.current.useMemo(e,t)};It.useReducer=function(e,t,n){return Fr.current.useReducer(e,t,n)};It.useRef=function(e){return Fr.current.useRef(e)};It.useState=function(e){return Fr.current.useState(e)};It.useSyncExternalStore=function(e,t,n){return Fr.current.useSyncExternalStore(e,t,n)};It.useTransition=function(){return Fr.current.useTransition()};It.version=\"18.3.1\";db.exports=It;var C=db.exports;const St=cb(C),wb=W_({__proto__:null,default:St},[C]);/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */var oC=C,lC=Symbol.for(\"react.element\"),cC=Symbol.for(\"react.fragment\"),uC=Object.prototype.hasOwnProperty,dC=oC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fC={key:!0,ref:!0,__self:!0,__source:!0};function bb(e,t,n){var r,i={},s=null,a=null;n!==void 0&&(s=\"\"+n),t.key!==void 0&&(s=\"\"+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)uC.call(t,r)&&!fC.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:lC,type:e,key:s,ref:a,props:i,_owner:dC.current}}Dm.Fragment=cC;Dm.jsx=bb;Dm.jsxs=bb;ub.exports=Dm;var l=ub.exports,Nb={exports:{}},hi={},Sb={exports:{}},jb={};/**\n * @license React\n * scheduler.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */(function(e){function t(V,ee){var ue=V.length;V.push(ee);e:for(;0<ue;){var je=ue-1>>>1,I=V[je];if(0<i(I,ee))V[je]=ee,V[ue]=I,ue=je;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var ee=V[0],ue=V.pop();if(ue!==ee){V[0]=ue;e:for(var je=0,I=V.length,$=I>>>1;je<$;){var Z=2*(je+1)-1,X=V[Z],oe=Z+1,re=V[oe];if(0>i(X,ue))oe<I&&0>i(re,X)?(V[je]=re,V[oe]=ue,je=oe):(V[je]=X,V[Z]=ue,je=Z);else if(oe<I&&0>i(re,ue))V[je]=re,V[oe]=ue,je=oe;else break e}}return ee}function i(V,ee){var ue=V.sortIndex-ee.sortIndex;return ue!==0?ue:V.id-ee.id}if(typeof performance==\"object\"&&typeof performance.now==\"function\"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var c=[],d=[],f=1,m=null,g=3,p=!1,S=!1,y=!1,j=typeof setTimeout==\"function\"?setTimeout:null,x=typeof clearTimeout==\"function\"?clearTimeout:null,b=typeof setImmediate<\"u\"?setImmediate:null;typeof navigator<\"u\"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(V){for(var ee=n(d);ee!==null;){if(ee.callback===null)r(d);else if(ee.startTime<=V)r(d),ee.sortIndex=ee.expirationTime,t(c,ee);else break;ee=n(d)}}function k(V){if(y=!1,N(V),!S)if(n(c)!==null)S=!0,J(P);else{var ee=n(d);ee!==null&&fe(k,ee.startTime-V)}}function P(V,ee){S=!1,y&&(y=!1,x(T),T=-1),p=!0;var ue=g;try{for(N(ee),m=n(c);m!==null&&(!(m.expirationTime>ee)||V&&!O());){var je=m.callback;if(typeof je==\"function\"){m.callback=null,g=m.priorityLevel;var I=je(m.expirationTime<=ee);ee=e.unstable_now(),typeof I==\"function\"?m.callback=I:m===n(c)&&r(c),N(ee)}else r(c);m=n(c)}if(m!==null)var $=!0;else{var Z=n(d);Z!==null&&fe(k,Z.startTime-ee),$=!1}return $}finally{m=null,g=ue,p=!1}}var H=!1,R=null,T=-1,G=5,Y=-1;function O(){return!(e.unstable_now()-Y<G)}function E(){if(R!==null){var V=e.unstable_now();Y=V;var ee=!0;try{ee=R(!0,V)}finally{ee?W():(H=!1,R=null)}}else H=!1}var W;if(typeof b==\"function\")W=function(){b(E)};else if(typeof MessageChannel<\"u\"){var z=new MessageChannel,le=z.port2;z.port1.onmessage=E,W=function(){le.postMessage(null)}}else W=function(){j(E,0)};function J(V){R=V,H||(H=!0,W())}function fe(V,ee){T=j(function(){V(e.unstable_now())},ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_continueExecution=function(){S||p||(S=!0,J(P))},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error(\"forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported\"):G=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(V){switch(g){case 1:case 2:case 3:var ee=3;break;default:ee=g}var ue=g;g=ee;try{return V()}finally{g=ue}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(V,ee){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var ue=g;g=V;try{return ee()}finally{g=ue}},e.unstable_scheduleCallback=function(V,ee,ue){var je=e.unstable_now();switch(typeof ue==\"object\"&&ue!==null?(ue=ue.delay,ue=typeof ue==\"number\"&&0<ue?je+ue:je):ue=je,V){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=ue+I,V={id:f++,callback:ee,priorityLevel:V,startTime:ue,expirationTime:I,sortIndex:-1},ue>je?(V.sortIndex=ue,t(d,V),n(c)===null&&V===n(d)&&(y?(x(T),T=-1):y=!0,fe(k,ue-je))):(V.sortIndex=I,t(c,V),S||p||(S=!0,J(P))),V},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(V){var ee=g;return function(){var ue=g;g=ee;try{return V.apply(this,arguments)}finally{g=ue}}}})(jb);Sb.exports=jb;var hC=Sb.exports;/**\n * @license React\n * react-dom.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */var pC=C,fi=hC;function Fe(e){for(var t=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+e,n=1;n<arguments.length;n++)t+=\"&args[]=\"+encodeURIComponent(arguments[n]);return\"Minified React error #\"+e+\"; visit \"+t+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}var _b=new Set,nf={};function Dl(e,t){gu(e,t),gu(e+\"Capture\",t)}function gu(e,t){for(nf[e]=t,e=0;e<t.length;e++)_b.add(t[e])}var wa=!(typeof window>\"u\"||typeof window.document>\"u\"||typeof window.document.createElement>\"u\"),fg=Object.prototype.hasOwnProperty,mC=/^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$/,m5={},g5={};function gC(e){return fg.call(g5,e)?!0:fg.call(m5,e)?!1:mC.test(e)?g5[e]=!0:(m5[e]=!0,!1)}function vC(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case\"function\":case\"symbol\":return!0;case\"boolean\":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!==\"data-\"&&e!==\"aria-\");default:return!1}}function yC(e,t,n,r){if(t===null||typeof t>\"u\"||vC(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Mr(e,t,n,r,i,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var ur={};\"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style\".split(\" \").forEach(function(e){ur[e]=new Mr(e,0,!1,e,null,!1,!1)});[[\"acceptCharset\",\"accept-charset\"],[\"className\",\"class\"],[\"htmlFor\",\"for\"],[\"httpEquiv\",\"http-equiv\"]].forEach(function(e){var t=e[0];ur[t]=new Mr(t,1,!1,e[1],null,!1,!1)});[\"contentEditable\",\"draggable\",\"spellCheck\",\"value\"].forEach(function(e){ur[e]=new Mr(e,2,!1,e.toLowerCase(),null,!1,!1)});[\"autoReverse\",\"externalResourcesRequired\",\"focusable\",\"preserveAlpha\"].forEach(function(e){ur[e]=new Mr(e,2,!1,e,null,!1,!1)});\"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope\".split(\" \").forEach(function(e){ur[e]=new Mr(e,3,!1,e.toLowerCase(),null,!1,!1)});[\"checked\",\"multiple\",\"muted\",\"selected\"].forEach(function(e){ur[e]=new Mr(e,3,!0,e,null,!1,!1)});[\"capture\",\"download\"].forEach(function(e){ur[e]=new Mr(e,4,!1,e,null,!1,!1)});[\"cols\",\"rows\",\"size\",\"span\"].forEach(function(e){ur[e]=new Mr(e,6,!1,e,null,!1,!1)});[\"rowSpan\",\"start\"].forEach(function(e){ur[e]=new Mr(e,5,!1,e.toLowerCase(),null,!1,!1)});var n2=/[\\-:]([a-z])/g;function r2(e){return e[1].toUpperCase()}\"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height\".split(\" \").forEach(function(e){var t=e.replace(n2,r2);ur[t]=new Mr(t,1,!1,e,null,!1,!1)});\"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type\".split(\" \").forEach(function(e){var t=e.replace(n2,r2);ur[t]=new Mr(t,1,!1,e,\"http://www.w3.org/1999/xlink\",!1,!1)});[\"xml:base\",\"xml:lang\",\"xml:space\"].forEach(function(e){var t=e.replace(n2,r2);ur[t]=new Mr(t,1,!1,e,\"http://www.w3.org/XML/1998/namespace\",!1,!1)});[\"tabIndex\",\"crossOrigin\"].forEach(function(e){ur[e]=new Mr(e,1,!1,e.toLowerCase(),null,!1,!1)});ur.xlinkHref=new Mr(\"xlinkHref\",1,!1,\"xlink:href\",\"http://www.w3.org/1999/xlink\",!0,!1);[\"src\",\"href\",\"action\",\"formAction\"].forEach(function(e){ur[e]=new Mr(e,1,!1,e.toLowerCase(),null,!0,!0)});function i2(e,t,n,r){var i=ur.hasOwnProperty(t)?ur[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!==\"o\"&&t[0]!==\"O\"||t[1]!==\"n\"&&t[1]!==\"N\")&&(yC(t,n,i,r)&&(n=null),r||i===null?gC(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,\"\"+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:\"\":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?\"\":\"\"+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Pa=pC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qh=Symbol.for(\"react.element\"),Ac=Symbol.for(\"react.portal\"),Pc=Symbol.for(\"react.fragment\"),s2=Symbol.for(\"react.strict_mode\"),hg=Symbol.for(\"react.profiler\"),Cb=Symbol.for(\"react.provider\"),kb=Symbol.for(\"react.context\"),a2=Symbol.for(\"react.forward_ref\"),pg=Symbol.for(\"react.suspense\"),mg=Symbol.for(\"react.suspense_list\"),o2=Symbol.for(\"react.memo\"),Xa=Symbol.for(\"react.lazy\"),Ab=Symbol.for(\"react.offscreen\"),v5=Symbol.iterator;function yd(e){return e===null||typeof e!=\"object\"?null:(e=v5&&e[v5]||e[\"@@iterator\"],typeof e==\"function\"?e:null)}var wn=Object.assign,p1;function Td(e){if(p1===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\\n( *(at )?)/);p1=t&&t[1]||\"\"}return`\n`+p1+e}var m1=!1;function g1(e,t){if(!e||m1)return\"\";m1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,\"props\",{set:function(){throw Error()}}),typeof Reflect==\"object\"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack==\"string\"){for(var i=d.stack.split(`\n`),s=r.stack.split(`\n`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var c=`\n`+i[a].replace(\" at new \",\" at \");return e.displayName&&c.includes(\"<anonymous>\")&&(c=c.replace(\"<anonymous>\",e.displayName)),c}while(1<=a&&0<=o);break}}}finally{m1=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:\"\")?Td(e):\"\"}function xC(e){switch(e.tag){case 5:return Td(e.type);case 16:return Td(\"Lazy\");case 13:return Td(\"Suspense\");case 19:return Td(\"SuspenseList\");case 0:case 2:case 15:return e=g1(e.type,!1),e;case 11:return e=g1(e.type.render,!1),e;case 1:return e=g1(e.type,!0),e;default:return\"\"}}function gg(e){if(e==null)return null;if(typeof e==\"function\")return e.displayName||e.name||null;if(typeof e==\"string\")return e;switch(e){case Pc:return\"Fragment\";case Ac:return\"Portal\";case hg:return\"Profiler\";case s2:return\"StrictMode\";case pg:return\"Suspense\";case mg:return\"SuspenseList\"}if(typeof e==\"object\")switch(e.$$typeof){case kb:return(e.displayName||\"Context\")+\".Consumer\";case Cb:return(e._context.displayName||\"Context\")+\".Provider\";case a2:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||\"\",e=e!==\"\"?\"ForwardRef(\"+e+\")\":\"ForwardRef\"),e;case o2:return t=e.displayName||null,t!==null?t:gg(e.type)||\"Memo\";case Xa:t=e._payload,e=e._init;try{return gg(e(t))}catch{}}return null}function wC(e){var t=e.type;switch(e.tag){case 24:return\"Cache\";case 9:return(t.displayName||\"Context\")+\".Consumer\";case 10:return(t._context.displayName||\"Context\")+\".Provider\";case 18:return\"DehydratedFragment\";case 11:return e=t.render,e=e.displayName||e.name||\"\",t.displayName||(e!==\"\"?\"ForwardRef(\"+e+\")\":\"ForwardRef\");case 7:return\"Fragment\";case 5:return t;case 4:return\"Portal\";case 3:return\"Root\";case 6:return\"Text\";case 16:return gg(t);case 8:return t===s2?\"StrictMode\":\"Mode\";case 22:return\"Offscreen\";case 12:return\"Profiler\";case 21:return\"Scope\";case 13:return\"Suspense\";case 19:return\"SuspenseList\";case 25:return\"TracingMarker\";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t==\"function\")return t.displayName||t.name||null;if(typeof t==\"string\")return t}return null}function _o(e){switch(typeof e){case\"boolean\":case\"number\":case\"string\":case\"undefined\":return e;case\"object\":return e;default:return\"\"}}function Pb(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()===\"input\"&&(t===\"checkbox\"||t===\"radio\")}function bC(e){var t=Pb(e)?\"checked\":\"value\",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=\"\"+e[t];if(!e.hasOwnProperty(t)&&typeof n<\"u\"&&typeof n.get==\"function\"&&typeof n.set==\"function\"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=\"\"+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=\"\"+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Yh(e){e._valueTracker||(e._valueTracker=bC(e))}function Lb(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r=\"\";return e&&(r=Pb(e)?e.checked?\"true\":\"false\":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Gp(e){if(e=e||(typeof document<\"u\"?document:void 0),typeof e>\"u\")return null;try{return e.activeElement||e.body}catch{return e.body}}function vg(e,t){var n=t.checked;return wn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function y5(e,t){var n=t.defaultValue==null?\"\":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=_o(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type===\"checkbox\"||t.type===\"radio\"?t.checked!=null:t.value!=null}}function Eb(e,t){t=t.checked,t!=null&&i2(e,\"checked\",t,!1)}function yg(e,t){Eb(e,t);var n=_o(t.value),r=t.type;if(n!=null)r===\"number\"?(n===0&&e.value===\"\"||e.value!=n)&&(e.value=\"\"+n):e.value!==\"\"+n&&(e.value=\"\"+n);else if(r===\"submit\"||r===\"reset\"){e.removeAttribute(\"value\");return}t.hasOwnProperty(\"value\")?xg(e,t.type,n):t.hasOwnProperty(\"defaultValue\")&&xg(e,t.type,_o(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function x5(e,t,n){if(t.hasOwnProperty(\"value\")||t.hasOwnProperty(\"defaultValue\")){var r=t.type;if(!(r!==\"submit\"&&r!==\"reset\"||t.value!==void 0&&t.value!==null))return;t=\"\"+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==\"\"&&(e.name=\"\"),e.defaultChecked=!!e._wrapperState.initialChecked,n!==\"\"&&(e.name=n)}function xg(e,t,n){(t!==\"number\"||Gp(e.ownerDocument)!==e)&&(n==null?e.defaultValue=\"\"+e._wrapperState.initialValue:e.defaultValue!==\"\"+n&&(e.defaultValue=\"\"+n))}var Rd=Array.isArray;function Uc(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t[\"$\"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty(\"$\"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=\"\"+_o(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function wg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Fe(91));return wn({},t,{value:void 0,defaultValue:void 0,children:\"\"+e._wrapperState.initialValue})}function w5(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Fe(92));if(Rd(n)){if(1<n.length)throw Error(Fe(93));n=n[0]}t=n}t==null&&(t=\"\"),n=t}e._wrapperState={initialValue:_o(n)}}function Tb(e,t){var n=_o(t.value),r=_o(t.defaultValue);n!=null&&(n=\"\"+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=\"\"+r)}function b5(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==\"\"&&t!==null&&(e.value=t)}function Rb(e){switch(e){case\"svg\":return\"http://www.w3.org/2000/svg\";case\"math\":return\"http://www.w3.org/1998/Math/MathML\";default:return\"http://www.w3.org/1999/xhtml\"}}function bg(e,t){return e==null||e===\"http://www.w3.org/1999/xhtml\"?Rb(t):e===\"http://www.w3.org/2000/svg\"&&t===\"foreignObject\"?\"http://www.w3.org/1999/xhtml\":e}var Xh,Ib=function(e){return typeof MSApp<\"u\"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!==\"http://www.w3.org/2000/svg\"||\"innerHTML\"in e)e.innerHTML=t;else{for(Xh=Xh||document.createElement(\"div\"),Xh.innerHTML=\"<svg>\"+t.valueOf().toString()+\"</svg>\",t=Xh.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function rf(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var qd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},NC=[\"Webkit\",\"ms\",\"Moz\",\"O\"];Object.keys(qd).forEach(function(e){NC.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),qd[t]=qd[e]})});function Ob(e,t,n){return t==null||typeof t==\"boolean\"||t===\"\"?\"\":n||typeof t!=\"number\"||t===0||qd.hasOwnProperty(e)&&qd[e]?(\"\"+t).trim():t+\"px\"}function Fb(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf(\"--\")===0,i=Ob(n,t[n],r);n===\"float\"&&(n=\"cssFloat\"),r?e.setProperty(n,i):e[n]=i}}var SC=wn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ng(e,t){if(t){if(SC[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Fe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Fe(60));if(typeof t.dangerouslySetInnerHTML!=\"object\"||!(\"__html\"in t.dangerouslySetInnerHTML))throw Error(Fe(61))}if(t.style!=null&&typeof t.style!=\"object\")throw Error(Fe(62))}}function Sg(e,t){if(e.indexOf(\"-\")===-1)return typeof t.is==\"string\";switch(e){case\"annotation-xml\":case\"color-profile\":case\"font-face\":case\"font-face-src\":case\"font-face-uri\":case\"font-face-format\":case\"font-face-name\":case\"missing-glyph\":return!1;default:return!0}}var jg=null;function l2(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _g=null,Vc=null,$c=null;function N5(e){if(e=Gf(e)){if(typeof _g!=\"function\")throw Error(Fe(280));var t=e.stateNode;t&&(t=Vm(t),_g(e.stateNode,e.type,t))}}function Mb(e){Vc?$c?$c.push(e):$c=[e]:Vc=e}function Db(){if(Vc){var e=Vc,t=$c;if($c=Vc=null,N5(e),t)for(e=0;e<t.length;e++)N5(t[e])}}function Bb(e,t){return e(t)}function zb(){}var v1=!1;function qb(e,t,n){if(v1)return e(t,n);v1=!0;try{return Bb(e,t,n)}finally{v1=!1,(Vc!==null||$c!==null)&&(zb(),Db())}}function sf(e,t){var n=e.stateNode;if(n===null)return null;var r=Vm(n);if(r===null)return null;n=r[t];e:switch(t){case\"onClick\":case\"onClickCapture\":case\"onDoubleClick\":case\"onDoubleClickCapture\":case\"onMouseDown\":case\"onMouseDownCapture\":case\"onMouseMove\":case\"onMouseMoveCapture\":case\"onMouseUp\":case\"onMouseUpCapture\":case\"onMouseEnter\":(r=!r.disabled)||(e=e.type,r=!(e===\"button\"||e===\"input\"||e===\"select\"||e===\"textarea\")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!=\"function\")throw Error(Fe(231,t,typeof n));return n}var Cg=!1;if(wa)try{var xd={};Object.defineProperty(xd,\"passive\",{get:function(){Cg=!0}}),window.addEventListener(\"test\",xd,xd),window.removeEventListener(\"test\",xd,xd)}catch{Cg=!1}function jC(e,t,n,r,i,s,a,o,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(f){this.onError(f)}}var Ud=!1,Kp=null,Zp=!1,kg=null,_C={onError:function(e){Ud=!0,Kp=e}};function CC(e,t,n,r,i,s,a,o,c){Ud=!1,Kp=null,jC.apply(_C,arguments)}function kC(e,t,n,r,i,s,a,o,c){if(CC.apply(this,arguments),Ud){if(Ud){var d=Kp;Ud=!1,Kp=null}else throw Error(Fe(198));Zp||(Zp=!0,kg=d)}}function Bl(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ub(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function S5(e){if(Bl(e)!==e)throw Error(Fe(188))}function AC(e){var t=e.alternate;if(!t){if(t=Bl(e),t===null)throw Error(Fe(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return S5(i),e;if(s===r)return S5(i),t;s=s.sibling}throw Error(Fe(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(Fe(189))}}if(n.alternate!==r)throw Error(Fe(190))}if(n.tag!==3)throw Error(Fe(188));return n.stateNode.current===n?e:t}function Vb(e){return e=AC(e),e!==null?$b(e):null}function $b(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=$b(e);if(t!==null)return t;e=e.sibling}return null}var Wb=fi.unstable_scheduleCallback,j5=fi.unstable_cancelCallback,PC=fi.unstable_shouldYield,LC=fi.unstable_requestPaint,Tn=fi.unstable_now,EC=fi.unstable_getCurrentPriorityLevel,c2=fi.unstable_ImmediatePriority,Hb=fi.unstable_UserBlockingPriority,Qp=fi.unstable_NormalPriority,TC=fi.unstable_LowPriority,Gb=fi.unstable_IdlePriority,Bm=null,Ms=null;function RC(e){if(Ms&&typeof Ms.onCommitFiberRoot==\"function\")try{Ms.onCommitFiberRoot(Bm,e,void 0,(e.current.flags&128)===128)}catch{}}var as=Math.clz32?Math.clz32:FC,IC=Math.log,OC=Math.LN2;function FC(e){return e>>>=0,e===0?32:31-(IC(e)/OC|0)|0}var Jh=64,ep=4194304;function Id(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Yp(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=Id(o):(s&=a,s!==0&&(r=Id(s)))}else a=n&~i,a!==0?r=Id(a):s!==0&&(r=Id(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-as(t),i=1<<n,r|=e[n],t&=~i;return r}function MC(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function DC(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-as(s),o=1<<a,c=i[a];c===-1?(!(o&n)||o&r)&&(i[a]=MC(o,t)):c<=t&&(e.expiredLanes|=o),s&=~o}}function Ag(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Kb(){var e=Jh;return Jh<<=1,!(Jh&4194240)&&(Jh=64),e}function y1(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Wf(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-as(t),e[t]=n}function BC(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-as(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function u2(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-as(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Jt=0;function Zb(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Qb,d2,Yb,Xb,Jb,Pg=!1,tp=[],go=null,vo=null,yo=null,af=new Map,of=new Map,eo=[],zC=\"mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit\".split(\" \");function _5(e,t){switch(e){case\"focusin\":case\"focusout\":go=null;break;case\"dragenter\":case\"dragleave\":vo=null;break;case\"mouseover\":case\"mouseout\":yo=null;break;case\"pointerover\":case\"pointerout\":af.delete(t.pointerId);break;case\"gotpointercapture\":case\"lostpointercapture\":of.delete(t.pointerId)}}function wd(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Gf(t),t!==null&&d2(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function qC(e,t,n,r,i){switch(t){case\"focusin\":return go=wd(go,e,t,n,r,i),!0;case\"dragenter\":return vo=wd(vo,e,t,n,r,i),!0;case\"mouseover\":return yo=wd(yo,e,t,n,r,i),!0;case\"pointerover\":var s=i.pointerId;return af.set(s,wd(af.get(s)||null,e,t,n,r,i)),!0;case\"gotpointercapture\":return s=i.pointerId,of.set(s,wd(of.get(s)||null,e,t,n,r,i)),!0}return!1}function e4(e){var t=sl(e.target);if(t!==null){var n=Bl(t);if(n!==null){if(t=n.tag,t===13){if(t=Ub(n),t!==null){e.blockedOn=t,Jb(e.priority,function(){Yb(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Cp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Lg(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);jg=r,n.target.dispatchEvent(r),jg=null}else return t=Gf(n),t!==null&&d2(t),e.blockedOn=n,!1;t.shift()}return!0}function C5(e,t,n){Cp(e)&&n.delete(t)}function UC(){Pg=!1,go!==null&&Cp(go)&&(go=null),vo!==null&&Cp(vo)&&(vo=null),yo!==null&&Cp(yo)&&(yo=null),af.forEach(C5),of.forEach(C5)}function bd(e,t){e.blockedOn===t&&(e.blockedOn=null,Pg||(Pg=!0,fi.unstable_scheduleCallback(fi.unstable_NormalPriority,UC)))}function lf(e){function t(i){return bd(i,e)}if(0<tp.length){bd(tp[0],e);for(var n=1;n<tp.length;n++){var r=tp[n];r.blockedOn===e&&(r.blockedOn=null)}}for(go!==null&&bd(go,e),vo!==null&&bd(vo,e),yo!==null&&bd(yo,e),af.forEach(t),of.forEach(t),n=0;n<eo.length;n++)r=eo[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<eo.length&&(n=eo[0],n.blockedOn===null);)e4(n),n.blockedOn===null&&eo.shift()}var Wc=Pa.ReactCurrentBatchConfig,Xp=!0;function VC(e,t,n,r){var i=Jt,s=Wc.transition;Wc.transition=null;try{Jt=1,f2(e,t,n,r)}finally{Jt=i,Wc.transition=s}}function $C(e,t,n,r){var i=Jt,s=Wc.transition;Wc.transition=null;try{Jt=4,f2(e,t,n,r)}finally{Jt=i,Wc.transition=s}}function f2(e,t,n,r){if(Xp){var i=Lg(e,t,n,r);if(i===null)A1(e,t,r,Jp,n),_5(e,r);else if(qC(i,e,t,n,r))r.stopPropagation();else if(_5(e,r),t&4&&-1<zC.indexOf(e)){for(;i!==null;){var s=Gf(i);if(s!==null&&Qb(s),s=Lg(e,t,n,r),s===null&&A1(e,t,r,Jp,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else A1(e,t,r,null,n)}}var Jp=null;function Lg(e,t,n,r){if(Jp=null,e=l2(r),e=sl(e),e!==null)if(t=Bl(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ub(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Jp=e,null}function t4(e){switch(e){case\"cancel\":case\"click\":case\"close\":case\"contextmenu\":case\"copy\":case\"cut\":case\"auxclick\":case\"dblclick\":case\"dragend\":case\"dragstart\":case\"drop\":case\"focusin\":case\"focusout\":case\"input\":case\"invalid\":case\"keydown\":case\"keypress\":case\"keyup\":case\"mousedown\":case\"mouseup\":case\"paste\":case\"pause\":case\"play\":case\"pointercancel\":case\"pointerdown\":case\"pointerup\":case\"ratechange\":case\"reset\":case\"resize\":case\"seeked\":case\"submit\":case\"touchcancel\":case\"touchend\":case\"touchstart\":case\"volumechange\":case\"change\":case\"selectionchange\":case\"textInput\":case\"compositionstart\":case\"compositionend\":case\"compositionupdate\":case\"beforeblur\":case\"afterblur\":case\"beforeinput\":case\"blur\":case\"fullscreenchange\":case\"focus\":case\"hashchange\":case\"popstate\":case\"select\":case\"selectstart\":return 1;case\"drag\":case\"dragenter\":case\"dragexit\":case\"dragleave\":case\"dragover\":case\"mousemove\":case\"mouseout\":case\"mouseover\":case\"pointermove\":case\"pointerout\":case\"pointerover\":case\"scroll\":case\"toggle\":case\"touchmove\":case\"wheel\":case\"mouseenter\":case\"mouseleave\":case\"pointerenter\":case\"pointerleave\":return 4;case\"message\":switch(EC()){case c2:return 1;case Hb:return 4;case Qp:case TC:return 16;case Gb:return 536870912;default:return 16}default:return 16}}var ho=null,h2=null,kp=null;function n4(){if(kp)return kp;var e,t=h2,n=t.length,r,i=\"value\"in ho?ho.value:ho.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[s-r];r++);return kp=i.slice(e,1<r?1-r:void 0)}function Ap(e){var t=e.keyCode;return\"charCode\"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function np(){return!0}function k5(){return!1}function pi(e){function t(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?np:k5,this.isPropagationStopped=k5,this}return wn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!=\"unknown\"&&(n.returnValue=!1),this.isDefaultPrevented=np)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!=\"unknown\"&&(n.cancelBubble=!0),this.isPropagationStopped=np)},persist:function(){},isPersistent:np}),t}var Ru={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},p2=pi(Ru),Hf=wn({},Ru,{view:0,detail:0}),WC=pi(Hf),x1,w1,Nd,zm=wn({},Hf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:m2,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return\"movementX\"in e?e.movementX:(e!==Nd&&(Nd&&e.type===\"mousemove\"?(x1=e.screenX-Nd.screenX,w1=e.screenY-Nd.screenY):w1=x1=0,Nd=e),x1)},movementY:function(e){return\"movementY\"in e?e.movementY:w1}}),A5=pi(zm),HC=wn({},zm,{dataTransfer:0}),GC=pi(HC),KC=wn({},Hf,{relatedTarget:0}),b1=pi(KC),ZC=wn({},Ru,{animationName:0,elapsedTime:0,pseudoElement:0}),QC=pi(ZC),YC=wn({},Ru,{clipboardData:function(e){return\"clipboardData\"in e?e.clipboardData:window.clipboardData}}),XC=pi(YC),JC=wn({},Ru,{data:0}),P5=pi(JC),ek={Esc:\"Escape\",Spacebar:\" \",Left:\"ArrowLeft\",Up:\"ArrowUp\",Right:\"ArrowRight\",Down:\"ArrowDown\",Del:\"Delete\",Win:\"OS\",Menu:\"ContextMenu\",Apps:\"ContextMenu\",Scroll:\"ScrollLock\",MozPrintableKey:\"Unidentified\"},tk={8:\"Backspace\",9:\"Tab\",12:\"Clear\",13:\"Enter\",16:\"Shift\",17:\"Control\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Escape\",32:\" \",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"ArrowLeft\",38:\"ArrowUp\",39:\"ArrowRight\",40:\"ArrowDown\",45:\"Insert\",46:\"Delete\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",116:\"F5\",117:\"F6\",118:\"F7\",119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"NumLock\",145:\"ScrollLock\",224:\"Meta\"},nk={Alt:\"altKey\",Control:\"ctrlKey\",Meta:\"metaKey\",Shift:\"shiftKey\"};function rk(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=nk[e])?!!t[e]:!1}function m2(){return rk}var ik=wn({},Hf,{key:function(e){if(e.key){var t=ek[e.key]||e.key;if(t!==\"Unidentified\")return t}return e.type===\"keypress\"?(e=Ap(e),e===13?\"Enter\":String.fromCharCode(e)):e.type===\"keydown\"||e.type===\"keyup\"?tk[e.keyCode]||\"Unidentified\":\"\"},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:m2,charCode:function(e){return e.type===\"keypress\"?Ap(e):0},keyCode:function(e){return e.type===\"keydown\"||e.type===\"keyup\"?e.keyCode:0},which:function(e){return e.type===\"keypress\"?Ap(e):e.type===\"keydown\"||e.type===\"keyup\"?e.keyCode:0}}),sk=pi(ik),ak=wn({},zm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),L5=pi(ak),ok=wn({},Hf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:m2}),lk=pi(ok),ck=wn({},Ru,{propertyName:0,elapsedTime:0,pseudoElement:0}),uk=pi(ck),dk=wn({},zm,{deltaX:function(e){return\"deltaX\"in e?e.deltaX:\"wheelDeltaX\"in e?-e.wheelDeltaX:0},deltaY:function(e){return\"deltaY\"in e?e.deltaY:\"wheelDeltaY\"in e?-e.wheelDeltaY:\"wheelDelta\"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),fk=pi(dk),hk=[9,13,27,32],g2=wa&&\"CompositionEvent\"in window,Vd=null;wa&&\"documentMode\"in document&&(Vd=document.documentMode);var pk=wa&&\"TextEvent\"in window&&!Vd,r4=wa&&(!g2||Vd&&8<Vd&&11>=Vd),E5=\" \",T5=!1;function i4(e,t){switch(e){case\"keyup\":return hk.indexOf(t.keyCode)!==-1;case\"keydown\":return t.keyCode!==229;case\"keypress\":case\"mousedown\":case\"focusout\":return!0;default:return!1}}function s4(e){return e=e.detail,typeof e==\"object\"&&\"data\"in e?e.data:null}var Lc=!1;function mk(e,t){switch(e){case\"compositionend\":return s4(t);case\"keypress\":return t.which!==32?null:(T5=!0,E5);case\"textInput\":return e=t.data,e===E5&&T5?null:e;default:return null}}function gk(e,t){if(Lc)return e===\"compositionend\"||!g2&&i4(e,t)?(e=n4(),kp=h2=ho=null,Lc=!1,e):null;switch(e){case\"paste\":return null;case\"keypress\":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case\"compositionend\":return r4&&t.locale!==\"ko\"?null:t.data;default:return null}}var vk={color:!0,date:!0,datetime:!0,\"datetime-local\":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function R5(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t===\"input\"?!!vk[e.type]:t===\"textarea\"}function a4(e,t,n,r){Mb(r),t=em(t,\"onChange\"),0<t.length&&(n=new p2(\"onChange\",\"change\",null,n,r),e.push({event:n,listeners:t}))}var $d=null,cf=null;function yk(e){v4(e,0)}function qm(e){var t=Rc(e);if(Lb(t))return e}function xk(e,t){if(e===\"change\")return t}var o4=!1;if(wa){var N1;if(wa){var S1=\"oninput\"in document;if(!S1){var I5=document.createElement(\"div\");I5.setAttribute(\"oninput\",\"return;\"),S1=typeof I5.oninput==\"function\"}N1=S1}else N1=!1;o4=N1&&(!document.documentMode||9<document.documentMode)}function O5(){$d&&($d.detachEvent(\"onpropertychange\",l4),cf=$d=null)}function l4(e){if(e.propertyName===\"value\"&&qm(cf)){var t=[];a4(t,cf,e,l2(e)),qb(yk,t)}}function wk(e,t,n){e===\"focusin\"?(O5(),$d=t,cf=n,$d.attachEvent(\"onpropertychange\",l4)):e===\"focusout\"&&O5()}function bk(e){if(e===\"selectionchange\"||e===\"keyup\"||e===\"keydown\")return qm(cf)}function Nk(e,t){if(e===\"click\")return qm(t)}function Sk(e,t){if(e===\"input\"||e===\"change\")return qm(t)}function jk(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cs=typeof Object.is==\"function\"?Object.is:jk;function uf(e,t){if(cs(e,t))return!0;if(typeof e!=\"object\"||e===null||typeof t!=\"object\"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!fg.call(t,i)||!cs(e[i],t[i]))return!1}return!0}function F5(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function M5(e,t){var n=F5(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=F5(n)}}function c4(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?c4(e,t.parentNode):\"contains\"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function u4(){for(var e=window,t=Gp();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href==\"string\"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Gp(e.document)}return t}function v2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t===\"input\"&&(e.type===\"text\"||e.type===\"search\"||e.type===\"tel\"||e.type===\"url\"||e.type===\"password\")||t===\"textarea\"||e.contentEditable===\"true\")}function _k(e){var t=u4(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&c4(n.ownerDocument.documentElement,n)){if(r!==null&&v2(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),\"selectionStart\"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=M5(n,s);var a=M5(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus==\"function\"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ck=wa&&\"documentMode\"in document&&11>=document.documentMode,Ec=null,Eg=null,Wd=null,Tg=!1;function D5(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Tg||Ec==null||Ec!==Gp(r)||(r=Ec,\"selectionStart\"in r&&v2(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Wd&&uf(Wd,r)||(Wd=r,r=em(Eg,\"onSelect\"),0<r.length&&(t=new p2(\"onSelect\",\"select\",null,t,n),e.push({event:t,listeners:r}),t.target=Ec)))}function rp(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n[\"Webkit\"+e]=\"webkit\"+t,n[\"Moz\"+e]=\"moz\"+t,n}var Tc={animationend:rp(\"Animation\",\"AnimationEnd\"),animationiteration:rp(\"Animation\",\"AnimationIteration\"),animationstart:rp(\"Animation\",\"AnimationStart\"),transitionend:rp(\"Transition\",\"TransitionEnd\")},j1={},d4={};wa&&(d4=document.createElement(\"div\").style,\"AnimationEvent\"in window||(delete Tc.animationend.animation,delete Tc.animationiteration.animation,delete Tc.animationstart.animation),\"TransitionEvent\"in window||delete Tc.transitionend.transition);function Um(e){if(j1[e])return j1[e];if(!Tc[e])return e;var t=Tc[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in d4)return j1[e]=t[n];return e}var f4=Um(\"animationend\"),h4=Um(\"animationiteration\"),p4=Um(\"animationstart\"),m4=Um(\"transitionend\"),g4=new Map,B5=\"abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel\".split(\" \");function Fo(e,t){g4.set(e,t),Dl(t,[e])}for(var _1=0;_1<B5.length;_1++){var C1=B5[_1],kk=C1.toLowerCase(),Ak=C1[0].toUpperCase()+C1.slice(1);Fo(kk,\"on\"+Ak)}Fo(f4,\"onAnimationEnd\");Fo(h4,\"onAnimationIteration\");Fo(p4,\"onAnimationStart\");Fo(\"dblclick\",\"onDoubleClick\");Fo(\"focusin\",\"onFocus\");Fo(\"focusout\",\"onBlur\");Fo(m4,\"onTransitionEnd\");gu(\"onMouseEnter\",[\"mouseout\",\"mouseover\"]);gu(\"onMouseLeave\",[\"mouseout\",\"mouseover\"]);gu(\"onPointerEnter\",[\"pointerout\",\"pointerover\"]);gu(\"onPointerLeave\",[\"pointerout\",\"pointerover\"]);Dl(\"onChange\",\"change click focusin focusout input keydown keyup selectionchange\".split(\" \"));Dl(\"onSelect\",\"focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange\".split(\" \"));Dl(\"onBeforeInput\",[\"compositionend\",\"keypress\",\"textInput\",\"paste\"]);Dl(\"onCompositionEnd\",\"compositionend focusout keydown keypress keyup mousedown\".split(\" \"));Dl(\"onCompositionStart\",\"compositionstart focusout keydown keypress keyup mousedown\".split(\" \"));Dl(\"onCompositionUpdate\",\"compositionupdate focusout keydown keypress keyup mousedown\".split(\" \"));var Od=\"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting\".split(\" \"),Pk=new Set(\"cancel close invalid load scroll toggle\".split(\" \").concat(Od));function z5(e,t,n){var r=e.type||\"unknown-event\";e.currentTarget=n,kC(r,t,void 0,e),e.currentTarget=null}function v4(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==s&&i.isPropagationStopped())break e;z5(i,o,d),s=c}else for(a=0;a<r.length;a++){if(o=r[a],c=o.instance,d=o.currentTarget,o=o.listener,c!==s&&i.isPropagationStopped())break e;z5(i,o,d),s=c}}}if(Zp)throw e=kg,Zp=!1,kg=null,e}function fn(e,t){var n=t[Mg];n===void 0&&(n=t[Mg]=new Set);var r=e+\"__bubble\";n.has(r)||(y4(t,e,2,!1),n.add(r))}function k1(e,t,n){var r=0;t&&(r|=4),y4(n,e,r,t)}var ip=\"_reactListening\"+Math.random().toString(36).slice(2);function df(e){if(!e[ip]){e[ip]=!0,_b.forEach(function(n){n!==\"selectionchange\"&&(Pk.has(n)||k1(n,!1,e),k1(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ip]||(t[ip]=!0,k1(\"selectionchange\",!1,t))}}function y4(e,t,n,r){switch(t4(t)){case 1:var i=VC;break;case 4:i=$C;break;default:i=f2}n=i.bind(null,t,n,e),i=void 0,!Cg||t!==\"touchstart\"&&t!==\"touchmove\"&&t!==\"wheel\"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function A1(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;o!==null;){if(a=sl(o),a===null)return;if(c=a.tag,c===5||c===6){r=s=a;continue e}o=o.parentNode}}r=r.return}qb(function(){var d=s,f=l2(n),m=[];e:{var g=g4.get(e);if(g!==void 0){var p=p2,S=e;switch(e){case\"keypress\":if(Ap(n)===0)break e;case\"keydown\":case\"keyup\":p=sk;break;case\"focusin\":S=\"focus\",p=b1;break;case\"focusout\":S=\"blur\",p=b1;break;case\"beforeblur\":case\"afterblur\":p=b1;break;case\"click\":if(n.button===2)break e;case\"auxclick\":case\"dblclick\":case\"mousedown\":case\"mousemove\":case\"mouseup\":case\"mouseout\":case\"mouseover\":case\"contextmenu\":p=A5;break;case\"drag\":case\"dragend\":case\"dragenter\":case\"dragexit\":case\"dragleave\":case\"dragover\":case\"dragstart\":case\"drop\":p=GC;break;case\"touchcancel\":case\"touchend\":case\"touchmove\":case\"touchstart\":p=lk;break;case f4:case h4:case p4:p=QC;break;case m4:p=uk;break;case\"scroll\":p=WC;break;case\"wheel\":p=fk;break;case\"copy\":case\"cut\":case\"paste\":p=XC;break;case\"gotpointercapture\":case\"lostpointercapture\":case\"pointercancel\":case\"pointerdown\":case\"pointermove\":case\"pointerout\":case\"pointerover\":case\"pointerup\":p=L5}var y=(t&4)!==0,j=!y&&e===\"scroll\",x=y?g!==null?g+\"Capture\":null:g;y=[];for(var b=d,N;b!==null;){N=b;var k=N.stateNode;if(N.tag===5&&k!==null&&(N=k,x!==null&&(k=sf(b,x),k!=null&&y.push(ff(b,k,N)))),j)break;b=b.return}0<y.length&&(g=new p(g,S,null,n,f),m.push({event:g,listeners:y}))}}if(!(t&7)){e:{if(g=e===\"mouseover\"||e===\"pointerover\",p=e===\"mouseout\"||e===\"pointerout\",g&&n!==jg&&(S=n.relatedTarget||n.fromElement)&&(sl(S)||S[ba]))break e;if((p||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,p?(S=n.relatedTarget||n.toElement,p=d,S=S?sl(S):null,S!==null&&(j=Bl(S),S!==j||S.tag!==5&&S.tag!==6)&&(S=null)):(p=null,S=d),p!==S)){if(y=A5,k=\"onMouseLeave\",x=\"onMouseEnter\",b=\"mouse\",(e===\"pointerout\"||e===\"pointerover\")&&(y=L5,k=\"onPointerLeave\",x=\"onPointerEnter\",b=\"pointer\"),j=p==null?g:Rc(p),N=S==null?g:Rc(S),g=new y(k,b+\"leave\",p,n,f),g.target=j,g.relatedTarget=N,k=null,sl(f)===d&&(y=new y(x,b+\"enter\",S,n,f),y.target=N,y.relatedTarget=j,k=y),j=k,p&&S)t:{for(y=p,x=S,b=0,N=y;N;N=vc(N))b++;for(N=0,k=x;k;k=vc(k))N++;for(;0<b-N;)y=vc(y),b--;for(;0<N-b;)x=vc(x),N--;for(;b--;){if(y===x||x!==null&&y===x.alternate)break t;y=vc(y),x=vc(x)}y=null}else y=null;p!==null&&q5(m,g,p,y,!1),S!==null&&j!==null&&q5(m,j,S,y,!0)}}e:{if(g=d?Rc(d):window,p=g.nodeName&&g.nodeName.toLowerCase(),p===\"select\"||p===\"input\"&&g.type===\"file\")var P=xk;else if(R5(g))if(o4)P=Sk;else{P=bk;var H=wk}else(p=g.nodeName)&&p.toLowerCase()===\"input\"&&(g.type===\"checkbox\"||g.type===\"radio\")&&(P=Nk);if(P&&(P=P(e,d))){a4(m,P,n,f);break e}H&&H(e,g,d),e===\"focusout\"&&(H=g._wrapperState)&&H.controlled&&g.type===\"number\"&&xg(g,\"number\",g.value)}switch(H=d?Rc(d):window,e){case\"focusin\":(R5(H)||H.contentEditable===\"true\")&&(Ec=H,Eg=d,Wd=null);break;case\"focusout\":Wd=Eg=Ec=null;break;case\"mousedown\":Tg=!0;break;case\"contextmenu\":case\"mouseup\":case\"dragend\":Tg=!1,D5(m,n,f);break;case\"selectionchange\":if(Ck)break;case\"keydown\":case\"keyup\":D5(m,n,f)}var R;if(g2)e:{switch(e){case\"compositionstart\":var T=\"onCompositionStart\";break e;case\"compositionend\":T=\"onCompositionEnd\";break e;case\"compositionupdate\":T=\"onCompositionUpdate\";break e}T=void 0}else Lc?i4(e,n)&&(T=\"onCompositionEnd\"):e===\"keydown\"&&n.keyCode===229&&(T=\"onCompositionStart\");T&&(r4&&n.locale!==\"ko\"&&(Lc||T!==\"onCompositionStart\"?T===\"onCompositionEnd\"&&Lc&&(R=n4()):(ho=f,h2=\"value\"in ho?ho.value:ho.textContent,Lc=!0)),H=em(d,T),0<H.length&&(T=new P5(T,e,null,n,f),m.push({event:T,listeners:H}),R?T.data=R:(R=s4(n),R!==null&&(T.data=R)))),(R=pk?mk(e,n):gk(e,n))&&(d=em(d,\"onBeforeInput\"),0<d.length&&(f=new P5(\"onBeforeInput\",\"beforeinput\",null,n,f),m.push({event:f,listeners:d}),f.data=R))}v4(m,t)})}function ff(e,t,n){return{instance:e,listener:t,currentTarget:n}}function em(e,t){for(var n=t+\"Capture\",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=sf(e,n),s!=null&&r.unshift(ff(e,s,i)),s=sf(e,t),s!=null&&r.push(ff(e,s,i))),e=e.return}return r}function vc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function q5(e,t,n,r,i){for(var s=t._reactName,a=[];n!==null&&n!==r;){var o=n,c=o.alternate,d=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&d!==null&&(o=d,i?(c=sf(n,s),c!=null&&a.unshift(ff(n,c,o))):i||(c=sf(n,s),c!=null&&a.push(ff(n,c,o)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Lk=/\\r\\n?/g,Ek=/\\u0000|\\uFFFD/g;function U5(e){return(typeof e==\"string\"?e:\"\"+e).replace(Lk,`\n`).replace(Ek,\"\")}function sp(e,t,n){if(t=U5(t),U5(e)!==t&&n)throw Error(Fe(425))}function tm(){}var Rg=null,Ig=null;function Og(e,t){return e===\"textarea\"||e===\"noscript\"||typeof t.children==\"string\"||typeof t.children==\"number\"||typeof t.dangerouslySetInnerHTML==\"object\"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Fg=typeof setTimeout==\"function\"?setTimeout:void 0,Tk=typeof clearTimeout==\"function\"?clearTimeout:void 0,V5=typeof Promise==\"function\"?Promise:void 0,Rk=typeof queueMicrotask==\"function\"?queueMicrotask:typeof V5<\"u\"?function(e){return V5.resolve(null).then(e).catch(Ik)}:Fg;function Ik(e){setTimeout(function(){throw e})}function P1(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n===\"/$\"){if(r===0){e.removeChild(i),lf(t);return}r--}else n!==\"$\"&&n!==\"$?\"&&n!==\"$!\"||r++;n=i}while(n);lf(t)}function xo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t===\"$\"||t===\"$!\"||t===\"$?\")break;if(t===\"/$\")return null}}return e}function $5(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===\"$\"||n===\"$!\"||n===\"$?\"){if(t===0)return e;t--}else n===\"/$\"&&t++}e=e.previousSibling}return null}var Iu=Math.random().toString(36).slice(2),Rs=\"__reactFiber$\"+Iu,hf=\"__reactProps$\"+Iu,ba=\"__reactContainer$\"+Iu,Mg=\"__reactEvents$\"+Iu,Ok=\"__reactListeners$\"+Iu,Fk=\"__reactHandles$\"+Iu;function sl(e){var t=e[Rs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ba]||n[Rs]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=$5(e);e!==null;){if(n=e[Rs])return n;e=$5(e)}return t}e=n,n=e.parentNode}return null}function Gf(e){return e=e[Rs]||e[ba],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Rc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Fe(33))}function Vm(e){return e[hf]||null}var Dg=[],Ic=-1;function Mo(e){return{current:e}}function pn(e){0>Ic||(e.current=Dg[Ic],Dg[Ic]=null,Ic--)}function un(e,t){Ic++,Dg[Ic]=e.current,e.current=t}var Co={},Nr=Mo(Co),Kr=Mo(!1),bl=Co;function vu(e,t){var n=e.type.contextTypes;if(!n)return Co;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Zr(e){return e=e.childContextTypes,e!=null}function nm(){pn(Kr),pn(Nr)}function W5(e,t,n){if(Nr.current!==Co)throw Error(Fe(168));un(Nr,t),un(Kr,n)}function x4(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!=\"function\")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(Fe(108,wC(e)||\"Unknown\",i));return wn({},n,r)}function rm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Co,bl=Nr.current,un(Nr,e),un(Kr,Kr.current),!0}function H5(e,t,n){var r=e.stateNode;if(!r)throw Error(Fe(169));n?(e=x4(e,t,bl),r.__reactInternalMemoizedMergedChildContext=e,pn(Kr),pn(Nr),un(Nr,e)):pn(Kr),un(Kr,n)}var ha=null,$m=!1,L1=!1;function w4(e){ha===null?ha=[e]:ha.push(e)}function Mk(e){$m=!0,w4(e)}function Do(){if(!L1&&ha!==null){L1=!0;var e=0,t=Jt;try{var n=ha;for(Jt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ha=null,$m=!1}catch(i){throw ha!==null&&(ha=ha.slice(e+1)),Wb(c2,Do),i}finally{Jt=t,L1=!1}}return null}var Oc=[],Fc=0,im=null,sm=0,ki=[],Ai=0,Nl=null,ga=1,va=\"\";function tl(e,t){Oc[Fc++]=sm,Oc[Fc++]=im,im=e,sm=t}function b4(e,t,n){ki[Ai++]=ga,ki[Ai++]=va,ki[Ai++]=Nl,Nl=e;var r=ga;e=va;var i=32-as(r)-1;r&=~(1<<i),n+=1;var s=32-as(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,ga=1<<32-as(t)+i|n<<i|r,va=s+e}else ga=1<<s|n<<i|r,va=e}function y2(e){e.return!==null&&(tl(e,1),b4(e,1,0))}function x2(e){for(;e===im;)im=Oc[--Fc],Oc[Fc]=null,sm=Oc[--Fc],Oc[Fc]=null;for(;e===Nl;)Nl=ki[--Ai],ki[Ai]=null,va=ki[--Ai],ki[Ai]=null,ga=ki[--Ai],ki[Ai]=null}var ci=null,oi=null,mn=!1,ts=null;function N4(e,t){var n=Pi(5,null,null,0);n.elementType=\"DELETED\",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function G5(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ci=e,oi=xo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===\"\"||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ci=e,oi=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Nl!==null?{id:ga,overflow:va}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Pi(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ci=e,oi=null,!0):!1;default:return!1}}function Bg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function zg(e){if(mn){var t=oi;if(t){var n=t;if(!G5(e,t)){if(Bg(e))throw Error(Fe(418));t=xo(n.nextSibling);var r=ci;t&&G5(e,t)?N4(r,n):(e.flags=e.flags&-4097|2,mn=!1,ci=e)}}else{if(Bg(e))throw Error(Fe(418));e.flags=e.flags&-4097|2,mn=!1,ci=e}}}function K5(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ci=e}function ap(e){if(e!==ci)return!1;if(!mn)return K5(e),mn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!==\"head\"&&t!==\"body\"&&!Og(e.type,e.memoizedProps)),t&&(t=oi)){if(Bg(e))throw S4(),Error(Fe(418));for(;t;)N4(e,t),t=xo(t.nextSibling)}if(K5(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Fe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n===\"/$\"){if(t===0){oi=xo(e.nextSibling);break e}t--}else n!==\"$\"&&n!==\"$!\"&&n!==\"$?\"||t++}e=e.nextSibling}oi=null}}else oi=ci?xo(e.stateNode.nextSibling):null;return!0}function S4(){for(var e=oi;e;)e=xo(e.nextSibling)}function yu(){oi=ci=null,mn=!1}function w2(e){ts===null?ts=[e]:ts.push(e)}var Dk=Pa.ReactCurrentBatchConfig;function Sd(e,t,n){if(e=n.ref,e!==null&&typeof e!=\"function\"&&typeof e!=\"object\"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Fe(309));var r=n.stateNode}if(!r)throw Error(Fe(147,e));var i=r,s=\"\"+e;return t!==null&&t.ref!==null&&typeof t.ref==\"function\"&&t.ref._stringRef===s?t.ref:(t=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},t._stringRef=s,t)}if(typeof e!=\"string\")throw Error(Fe(284));if(!n._owner)throw Error(Fe(290,e))}return e}function op(e,t){throw e=Object.prototype.toString.call(t),Error(Fe(31,e===\"[object Object]\"?\"object with keys {\"+Object.keys(t).join(\", \")+\"}\":e))}function Z5(e){var t=e._init;return t(e._payload)}function j4(e){function t(x,b){if(e){var N=x.deletions;N===null?(x.deletions=[b],x.flags|=16):N.push(b)}}function n(x,b){if(!e)return null;for(;b!==null;)t(x,b),b=b.sibling;return null}function r(x,b){for(x=new Map;b!==null;)b.key!==null?x.set(b.key,b):x.set(b.index,b),b=b.sibling;return x}function i(x,b){return x=So(x,b),x.index=0,x.sibling=null,x}function s(x,b,N){return x.index=N,e?(N=x.alternate,N!==null?(N=N.index,N<b?(x.flags|=2,b):N):(x.flags|=2,b)):(x.flags|=1048576,b)}function a(x){return e&&x.alternate===null&&(x.flags|=2),x}function o(x,b,N,k){return b===null||b.tag!==6?(b=M1(N,x.mode,k),b.return=x,b):(b=i(b,N),b.return=x,b)}function c(x,b,N,k){var P=N.type;return P===Pc?f(x,b,N.props.children,k,N.key):b!==null&&(b.elementType===P||typeof P==\"object\"&&P!==null&&P.$$typeof===Xa&&Z5(P)===b.type)?(k=i(b,N.props),k.ref=Sd(x,b,N),k.return=x,k):(k=Op(N.type,N.key,N.props,null,x.mode,k),k.ref=Sd(x,b,N),k.return=x,k)}function d(x,b,N,k){return b===null||b.tag!==4||b.stateNode.containerInfo!==N.containerInfo||b.stateNode.implementation!==N.implementation?(b=D1(N,x.mode,k),b.return=x,b):(b=i(b,N.children||[]),b.return=x,b)}function f(x,b,N,k,P){return b===null||b.tag!==7?(b=vl(N,x.mode,k,P),b.return=x,b):(b=i(b,N),b.return=x,b)}function m(x,b,N){if(typeof b==\"string\"&&b!==\"\"||typeof b==\"number\")return b=M1(\"\"+b,x.mode,N),b.return=x,b;if(typeof b==\"object\"&&b!==null){switch(b.$$typeof){case Qh:return N=Op(b.type,b.key,b.props,null,x.mode,N),N.ref=Sd(x,null,b),N.return=x,N;case Ac:return b=D1(b,x.mode,N),b.return=x,b;case Xa:var k=b._init;return m(x,k(b._payload),N)}if(Rd(b)||yd(b))return b=vl(b,x.mode,N,null),b.return=x,b;op(x,b)}return null}function g(x,b,N,k){var P=b!==null?b.key:null;if(typeof N==\"string\"&&N!==\"\"||typeof N==\"number\")return P!==null?null:o(x,b,\"\"+N,k);if(typeof N==\"object\"&&N!==null){switch(N.$$typeof){case Qh:return N.key===P?c(x,b,N,k):null;case Ac:return N.key===P?d(x,b,N,k):null;case Xa:return P=N._init,g(x,b,P(N._payload),k)}if(Rd(N)||yd(N))return P!==null?null:f(x,b,N,k,null);op(x,N)}return null}function p(x,b,N,k,P){if(typeof k==\"string\"&&k!==\"\"||typeof k==\"number\")return x=x.get(N)||null,o(b,x,\"\"+k,P);if(typeof k==\"object\"&&k!==null){switch(k.$$typeof){case Qh:return x=x.get(k.key===null?N:k.key)||null,c(b,x,k,P);case Ac:return x=x.get(k.key===null?N:k.key)||null,d(b,x,k,P);case Xa:var H=k._init;return p(x,b,N,H(k._payload),P)}if(Rd(k)||yd(k))return x=x.get(N)||null,f(b,x,k,P,null);op(b,k)}return null}function S(x,b,N,k){for(var P=null,H=null,R=b,T=b=0,G=null;R!==null&&T<N.length;T++){R.index>T?(G=R,R=null):G=R.sibling;var Y=g(x,R,N[T],k);if(Y===null){R===null&&(R=G);break}e&&R&&Y.alternate===null&&t(x,R),b=s(Y,b,T),H===null?P=Y:H.sibling=Y,H=Y,R=G}if(T===N.length)return n(x,R),mn&&tl(x,T),P;if(R===null){for(;T<N.length;T++)R=m(x,N[T],k),R!==null&&(b=s(R,b,T),H===null?P=R:H.sibling=R,H=R);return mn&&tl(x,T),P}for(R=r(x,R);T<N.length;T++)G=p(R,x,T,N[T],k),G!==null&&(e&&G.alternate!==null&&R.delete(G.key===null?T:G.key),b=s(G,b,T),H===null?P=G:H.sibling=G,H=G);return e&&R.forEach(function(O){return t(x,O)}),mn&&tl(x,T),P}function y(x,b,N,k){var P=yd(N);if(typeof P!=\"function\")throw Error(Fe(150));if(N=P.call(N),N==null)throw Error(Fe(151));for(var H=P=null,R=b,T=b=0,G=null,Y=N.next();R!==null&&!Y.done;T++,Y=N.next()){R.index>T?(G=R,R=null):G=R.sibling;var O=g(x,R,Y.value,k);if(O===null){R===null&&(R=G);break}e&&R&&O.alternate===null&&t(x,R),b=s(O,b,T),H===null?P=O:H.sibling=O,H=O,R=G}if(Y.done)return n(x,R),mn&&tl(x,T),P;if(R===null){for(;!Y.done;T++,Y=N.next())Y=m(x,Y.value,k),Y!==null&&(b=s(Y,b,T),H===null?P=Y:H.sibling=Y,H=Y);return mn&&tl(x,T),P}for(R=r(x,R);!Y.done;T++,Y=N.next())Y=p(R,x,T,Y.value,k),Y!==null&&(e&&Y.alternate!==null&&R.delete(Y.key===null?T:Y.key),b=s(Y,b,T),H===null?P=Y:H.sibling=Y,H=Y);return e&&R.forEach(function(E){return t(x,E)}),mn&&tl(x,T),P}function j(x,b,N,k){if(typeof N==\"object\"&&N!==null&&N.type===Pc&&N.key===null&&(N=N.props.children),typeof N==\"object\"&&N!==null){switch(N.$$typeof){case Qh:e:{for(var P=N.key,H=b;H!==null;){if(H.key===P){if(P=N.type,P===Pc){if(H.tag===7){n(x,H.sibling),b=i(H,N.props.children),b.return=x,x=b;break e}}else if(H.elementType===P||typeof P==\"object\"&&P!==null&&P.$$typeof===Xa&&Z5(P)===H.type){n(x,H.sibling),b=i(H,N.props),b.ref=Sd(x,H,N),b.return=x,x=b;break e}n(x,H);break}else t(x,H);H=H.sibling}N.type===Pc?(b=vl(N.props.children,x.mode,k,N.key),b.return=x,x=b):(k=Op(N.type,N.key,N.props,null,x.mode,k),k.ref=Sd(x,b,N),k.return=x,x=k)}return a(x);case Ac:e:{for(H=N.key;b!==null;){if(b.key===H)if(b.tag===4&&b.stateNode.containerInfo===N.containerInfo&&b.stateNode.implementation===N.implementation){n(x,b.sibling),b=i(b,N.children||[]),b.return=x,x=b;break e}else{n(x,b);break}else t(x,b);b=b.sibling}b=D1(N,x.mode,k),b.return=x,x=b}return a(x);case Xa:return H=N._init,j(x,b,H(N._payload),k)}if(Rd(N))return S(x,b,N,k);if(yd(N))return y(x,b,N,k);op(x,N)}return typeof N==\"string\"&&N!==\"\"||typeof N==\"number\"?(N=\"\"+N,b!==null&&b.tag===6?(n(x,b.sibling),b=i(b,N),b.return=x,x=b):(n(x,b),b=M1(N,x.mode,k),b.return=x,x=b),a(x)):n(x,b)}return j}var xu=j4(!0),_4=j4(!1),am=Mo(null),om=null,Mc=null,b2=null;function N2(){b2=Mc=om=null}function S2(e){var t=am.current;pn(am),e._currentValue=t}function qg(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Hc(e,t){om=e,b2=Mc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Gr=!0),e.firstContext=null)}function Ri(e){var t=e._currentValue;if(b2!==e)if(e={context:e,memoizedValue:t,next:null},Mc===null){if(om===null)throw Error(Fe(308));Mc=e,om.dependencies={lanes:0,firstContext:e}}else Mc=Mc.next=e;return t}var al=null;function j2(e){al===null?al=[e]:al.push(e)}function C4(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,j2(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ja=!1;function _2(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function k4(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ya(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function wo(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ut&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return i=r.interleaved,i===null?(t.next=t,j2(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function Pp(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,u2(e,n)}}function Q5(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function lm(e,t,n,r){var i=e.updateQueue;Ja=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,d=c.next;c.next=null,a===null?s=d:a.next=d,a=c;var f=e.alternate;f!==null&&(f=f.updateQueue,o=f.lastBaseUpdate,o!==a&&(o===null?f.firstBaseUpdate=d:o.next=d,f.lastBaseUpdate=c))}if(s!==null){var m=i.baseState;a=0,f=d=c=null,o=s;do{var g=o.lane,p=o.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var S=e,y=o;switch(g=t,p=n,y.tag){case 1:if(S=y.payload,typeof S==\"function\"){m=S.call(p,m,g);break e}m=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=y.payload,g=typeof S==\"function\"?S.call(p,m,g):S,g==null)break e;m=wn({},m,g);break e;case 2:Ja=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,g=i.effects,g===null?i.effects=[o]:g.push(o))}else p={eventTime:p,lane:g,tag:o.tag,payload:o.payload,callback:o.callback,next:null},f===null?(d=f=p,c=m):f=f.next=p,a|=g;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;g=o,o=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(f===null&&(c=m),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=f,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);jl|=a,e.lanes=a,e.memoizedState=m}}function Y5(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!=\"function\")throw Error(Fe(191,i));i.call(r)}}}var Kf={},Ds=Mo(Kf),pf=Mo(Kf),mf=Mo(Kf);function ol(e){if(e===Kf)throw Error(Fe(174));return e}function C2(e,t){switch(un(mf,t),un(pf,e),un(Ds,Kf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:bg(null,\"\");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=bg(t,e)}pn(Ds),un(Ds,t)}function wu(){pn(Ds),pn(pf),pn(mf)}function A4(e){ol(mf.current);var t=ol(Ds.current),n=bg(t,e.type);t!==n&&(un(pf,e),un(Ds,n))}function k2(e){pf.current===e&&(pn(Ds),pn(pf))}var yn=Mo(0);function cm(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data===\"$?\"||n.data===\"$!\"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var E1=[];function A2(){for(var e=0;e<E1.length;e++)E1[e]._workInProgressVersionPrimary=null;E1.length=0}var Lp=Pa.ReactCurrentDispatcher,T1=Pa.ReactCurrentBatchConfig,Sl=0,xn=null,Hn=null,er=null,um=!1,Hd=!1,gf=0,Bk=0;function hr(){throw Error(Fe(321))}function P2(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cs(e[n],t[n]))return!1;return!0}function L2(e,t,n,r,i,s){if(Sl=s,xn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Lp.current=e===null||e.memoizedState===null?Vk:$k,e=n(r,i),Hd){s=0;do{if(Hd=!1,gf=0,25<=s)throw Error(Fe(301));s+=1,er=Hn=null,t.updateQueue=null,Lp.current=Wk,e=n(r,i)}while(Hd)}if(Lp.current=dm,t=Hn!==null&&Hn.next!==null,Sl=0,er=Hn=xn=null,um=!1,t)throw Error(Fe(300));return e}function E2(){var e=gf!==0;return gf=0,e}function As(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return er===null?xn.memoizedState=er=e:er=er.next=e,er}function Ii(){if(Hn===null){var e=xn.alternate;e=e!==null?e.memoizedState:null}else e=Hn.next;var t=er===null?xn.memoizedState:er.next;if(t!==null)er=t,Hn=e;else{if(e===null)throw Error(Fe(310));Hn=e,e={memoizedState:Hn.memoizedState,baseState:Hn.baseState,baseQueue:Hn.baseQueue,queue:Hn.queue,next:null},er===null?xn.memoizedState=er=e:er=er.next=e}return er}function vf(e,t){return typeof t==\"function\"?t(e):t}function R1(e){var t=Ii(),n=t.queue;if(n===null)throw Error(Fe(311));n.lastRenderedReducer=e;var r=Hn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,c=null,d=s;do{var f=d.lane;if((Sl&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=m,a=r):c=c.next=m,xn.lanes|=f,jl|=f}d=d.next}while(d!==null&&d!==s);c===null?a=r:c.next=o,cs(r,t.memoizedState)||(Gr=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,xn.lanes|=s,jl|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function I1(e){var t=Ii(),n=t.queue;if(n===null)throw Error(Fe(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=e(s,a.action),a=a.next;while(a!==i);cs(s,t.memoizedState)||(Gr=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function P4(){}function L4(e,t){var n=xn,r=Ii(),i=t(),s=!cs(r.memoizedState,i);if(s&&(r.memoizedState=i,Gr=!0),r=r.queue,T2(R4.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||er!==null&&er.memoizedState.tag&1){if(n.flags|=2048,yf(9,T4.bind(null,n,r,i,t),void 0,null),nr===null)throw Error(Fe(349));Sl&30||E4(n,t,i)}return i}function E4(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=xn.updateQueue,t===null?(t={lastEffect:null,stores:null},xn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function T4(e,t,n,r){t.value=n,t.getSnapshot=r,I4(t)&&O4(e)}function R4(e,t,n){return n(function(){I4(t)&&O4(e)})}function I4(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!cs(e,n)}catch{return!0}}function O4(e){var t=Na(e,1);t!==null&&os(t,e,1,-1)}function X5(e){var t=As();return typeof e==\"function\"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vf,lastRenderedState:e},t.queue=e,e=e.dispatch=Uk.bind(null,xn,e),[t.memoizedState,e]}function yf(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=xn.updateQueue,t===null?(t={lastEffect:null,stores:null},xn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function F4(){return Ii().memoizedState}function Ep(e,t,n,r){var i=As();xn.flags|=e,i.memoizedState=yf(1|t,n,void 0,r===void 0?null:r)}function Wm(e,t,n,r){var i=Ii();r=r===void 0?null:r;var s=void 0;if(Hn!==null){var a=Hn.memoizedState;if(s=a.destroy,r!==null&&P2(r,a.deps)){i.memoizedState=yf(t,n,s,r);return}}xn.flags|=e,i.memoizedState=yf(1|t,n,s,r)}function J5(e,t){return Ep(8390656,8,e,t)}function T2(e,t){return Wm(2048,8,e,t)}function M4(e,t){return Wm(4,2,e,t)}function D4(e,t){return Wm(4,4,e,t)}function B4(e,t){if(typeof t==\"function\")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function z4(e,t,n){return n=n!=null?n.concat([e]):null,Wm(4,4,B4.bind(null,t,e),n)}function R2(){}function q4(e,t){var n=Ii();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&P2(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function U4(e,t){var n=Ii();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&P2(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function V4(e,t,n){return Sl&21?(cs(n,t)||(n=Kb(),xn.lanes|=n,jl|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Gr=!0),e.memoizedState=n)}function zk(e,t){var n=Jt;Jt=n!==0&&4>n?n:4,e(!0);var r=T1.transition;T1.transition={};try{e(!1),t()}finally{Jt=n,T1.transition=r}}function $4(){return Ii().memoizedState}function qk(e,t,n){var r=No(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},W4(e))H4(t,n);else if(n=C4(e,t,n,r),n!==null){var i=Rr();os(n,e,r,i),G4(n,t,r)}}function Uk(e,t,n){var r=No(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(W4(e))H4(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,cs(o,a)){var c=t.interleaved;c===null?(i.next=i,j2(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=C4(e,t,i,r),n!==null&&(i=Rr(),os(n,e,r,i),G4(n,t,r))}}function W4(e){var t=e.alternate;return e===xn||t!==null&&t===xn}function H4(e,t){Hd=um=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function G4(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,u2(e,n)}}var dm={readContext:Ri,useCallback:hr,useContext:hr,useEffect:hr,useImperativeHandle:hr,useInsertionEffect:hr,useLayoutEffect:hr,useMemo:hr,useReducer:hr,useRef:hr,useState:hr,useDebugValue:hr,useDeferredValue:hr,useTransition:hr,useMutableSource:hr,useSyncExternalStore:hr,useId:hr,unstable_isNewReconciler:!1},Vk={readContext:Ri,useCallback:function(e,t){return As().memoizedState=[e,t===void 0?null:t],e},useContext:Ri,useEffect:J5,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ep(4194308,4,B4.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ep(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ep(4,2,e,t)},useMemo:function(e,t){var n=As();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=As();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qk.bind(null,xn,e),[r.memoizedState,e]},useRef:function(e){var t=As();return e={current:e},t.memoizedState=e},useState:X5,useDebugValue:R2,useDeferredValue:function(e){return As().memoizedState=e},useTransition:function(){var e=X5(!1),t=e[0];return e=zk.bind(null,e[1]),As().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=xn,i=As();if(mn){if(n===void 0)throw Error(Fe(407));n=n()}else{if(n=t(),nr===null)throw Error(Fe(349));Sl&30||E4(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,J5(R4.bind(null,r,s,e),[e]),r.flags|=2048,yf(9,T4.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=As(),t=nr.identifierPrefix;if(mn){var n=va,r=ga;n=(r&~(1<<32-as(r)-1)).toString(32)+n,t=\":\"+t+\"R\"+n,n=gf++,0<n&&(t+=\"H\"+n.toString(32)),t+=\":\"}else n=Bk++,t=\":\"+t+\"r\"+n.toString(32)+\":\";return e.memoizedState=t},unstable_isNewReconciler:!1},$k={readContext:Ri,useCallback:q4,useContext:Ri,useEffect:T2,useImperativeHandle:z4,useInsertionEffect:M4,useLayoutEffect:D4,useMemo:U4,useReducer:R1,useRef:F4,useState:function(){return R1(vf)},useDebugValue:R2,useDeferredValue:function(e){var t=Ii();return V4(t,Hn.memoizedState,e)},useTransition:function(){var e=R1(vf)[0],t=Ii().memoizedState;return[e,t]},useMutableSource:P4,useSyncExternalStore:L4,useId:$4,unstable_isNewReconciler:!1},Wk={readContext:Ri,useCallback:q4,useContext:Ri,useEffect:T2,useImperativeHandle:z4,useInsertionEffect:M4,useLayoutEffect:D4,useMemo:U4,useReducer:I1,useRef:F4,useState:function(){return I1(vf)},useDebugValue:R2,useDeferredValue:function(e){var t=Ii();return Hn===null?t.memoizedState=e:V4(t,Hn.memoizedState,e)},useTransition:function(){var e=I1(vf)[0],t=Ii().memoizedState;return[e,t]},useMutableSource:P4,useSyncExternalStore:L4,useId:$4,unstable_isNewReconciler:!1};function Yi(e,t){if(e&&e.defaultProps){t=wn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ug(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:wn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Hm={isMounted:function(e){return(e=e._reactInternals)?Bl(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Rr(),i=No(e),s=ya(r,i);s.payload=t,n!=null&&(s.callback=n),t=wo(e,s,i),t!==null&&(os(t,e,i,r),Pp(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Rr(),i=No(e),s=ya(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=wo(e,s,i),t!==null&&(os(t,e,i,r),Pp(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Rr(),r=No(e),i=ya(n,r);i.tag=2,t!=null&&(i.callback=t),t=wo(e,i,r),t!==null&&(os(t,e,r,n),Pp(t,e,r))}};function ex(e,t,n,r,i,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate==\"function\"?e.shouldComponentUpdate(r,s,a):t.prototype&&t.prototype.isPureReactComponent?!uf(n,r)||!uf(i,s):!0}function K4(e,t,n){var r=!1,i=Co,s=t.contextType;return typeof s==\"object\"&&s!==null?s=Ri(s):(i=Zr(t)?bl:Nr.current,r=t.contextTypes,s=(r=r!=null)?vu(e,i):Co),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Hm,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function tx(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps==\"function\"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps==\"function\"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Hm.enqueueReplaceState(t,t.state,null)}function Vg(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},_2(e);var s=t.contextType;typeof s==\"object\"&&s!==null?i.context=Ri(s):(s=Zr(t)?bl:Nr.current,i.context=vu(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s==\"function\"&&(Ug(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps==\"function\"||typeof i.getSnapshotBeforeUpdate==\"function\"||typeof i.UNSAFE_componentWillMount!=\"function\"&&typeof i.componentWillMount!=\"function\"||(t=i.state,typeof i.componentWillMount==\"function\"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount==\"function\"&&i.UNSAFE_componentWillMount(),t!==i.state&&Hm.enqueueReplaceState(i,i.state,null),lm(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount==\"function\"&&(e.flags|=4194308)}function bu(e,t){try{var n=\"\",r=t;do n+=xC(r),r=r.return;while(r);var i=n}catch(s){i=`\nError generating stack: `+s.message+`\n`+s.stack}return{value:e,source:t,stack:i,digest:null}}function O1(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function $g(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Hk=typeof WeakMap==\"function\"?WeakMap:Map;function Z4(e,t,n){n=ya(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){hm||(hm=!0,ev=r),$g(e,t)},n}function Q4(e,t,n){n=ya(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r==\"function\"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){$g(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch==\"function\"&&(n.callback=function(){$g(e,t),typeof r!=\"function\"&&(bo===null?bo=new Set([this]):bo.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:\"\"})}),n}function nx(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Hk;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=aA.bind(null,e,t,n),t.then(e,e))}function rx(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ix(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ya(-1,1),t.tag=2,wo(n,t,1))),n.lanes|=1),e)}var Gk=Pa.ReactCurrentOwner,Gr=!1;function Er(e,t,n,r){t.child=e===null?_4(t,null,n,r):xu(t,e.child,n,r)}function sx(e,t,n,r,i){n=n.render;var s=t.ref;return Hc(t,i),r=L2(e,t,n,r,s,i),n=E2(),e!==null&&!Gr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Sa(e,t,i)):(mn&&n&&y2(t),t.flags|=1,Er(e,t,r,i),t.child)}function ax(e,t,n,r,i){if(e===null){var s=n.type;return typeof s==\"function\"&&!q2(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,Y4(e,t,s,r,i)):(e=Op(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:uf,n(a,r)&&e.ref===t.ref)return Sa(e,t,i)}return t.flags|=1,e=So(s,r),e.ref=t.ref,e.return=t,t.child=e}function Y4(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(uf(s,r)&&e.ref===t.ref)if(Gr=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Gr=!0);else return t.lanes=e.lanes,Sa(e,t,i)}return Wg(e,t,n,r,i)}function X4(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode===\"hidden\")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},un(Bc,ii),ii|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,un(Bc,ii),ii|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,un(Bc,ii),ii|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,un(Bc,ii),ii|=r;return Er(e,t,i,n),t.child}function J4(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Wg(e,t,n,r,i){var s=Zr(n)?bl:Nr.current;return s=vu(t,s),Hc(t,i),n=L2(e,t,n,r,s,i),r=E2(),e!==null&&!Gr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Sa(e,t,i)):(mn&&r&&y2(t),t.flags|=1,Er(e,t,n,i),t.child)}function ox(e,t,n,r,i){if(Zr(n)){var s=!0;rm(t)}else s=!1;if(Hc(t,i),t.stateNode===null)Tp(e,t),K4(t,n,r),Vg(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var c=a.context,d=n.contextType;typeof d==\"object\"&&d!==null?d=Ri(d):(d=Zr(n)?bl:Nr.current,d=vu(t,d));var f=n.getDerivedStateFromProps,m=typeof f==\"function\"||typeof a.getSnapshotBeforeUpdate==\"function\";m||typeof a.UNSAFE_componentWillReceiveProps!=\"function\"&&typeof a.componentWillReceiveProps!=\"function\"||(o!==r||c!==d)&&tx(t,a,r,d),Ja=!1;var g=t.memoizedState;a.state=g,lm(t,r,a,i),c=t.memoizedState,o!==r||g!==c||Kr.current||Ja?(typeof f==\"function\"&&(Ug(t,n,f,r),c=t.memoizedState),(o=Ja||ex(t,n,o,r,g,c,d))?(m||typeof a.UNSAFE_componentWillMount!=\"function\"&&typeof a.componentWillMount!=\"function\"||(typeof a.componentWillMount==\"function\"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==\"function\"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount==\"function\"&&(t.flags|=4194308)):(typeof a.componentDidMount==\"function\"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=d,r=o):(typeof a.componentDidMount==\"function\"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,k4(e,t),o=t.memoizedProps,d=t.type===t.elementType?o:Yi(t.type,o),a.props=d,m=t.pendingProps,g=a.context,c=n.contextType,typeof c==\"object\"&&c!==null?c=Ri(c):(c=Zr(n)?bl:Nr.current,c=vu(t,c));var p=n.getDerivedStateFromProps;(f=typeof p==\"function\"||typeof a.getSnapshotBeforeUpdate==\"function\")||typeof a.UNSAFE_componentWillReceiveProps!=\"function\"&&typeof a.componentWillReceiveProps!=\"function\"||(o!==m||g!==c)&&tx(t,a,r,c),Ja=!1,g=t.memoizedState,a.state=g,lm(t,r,a,i);var S=t.memoizedState;o!==m||g!==S||Kr.current||Ja?(typeof p==\"function\"&&(Ug(t,n,p,r),S=t.memoizedState),(d=Ja||ex(t,n,d,r,g,S,c)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!=\"function\"&&typeof a.componentWillUpdate!=\"function\"||(typeof a.componentWillUpdate==\"function\"&&a.componentWillUpdate(r,S,c),typeof a.UNSAFE_componentWillUpdate==\"function\"&&a.UNSAFE_componentWillUpdate(r,S,c)),typeof a.componentDidUpdate==\"function\"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate==\"function\"&&(t.flags|=1024)):(typeof a.componentDidUpdate!=\"function\"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=\"function\"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=S),a.props=r,a.state=S,a.context=c,r=d):(typeof a.componentDidUpdate!=\"function\"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=\"function\"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return Hg(e,t,n,r,s,i)}function Hg(e,t,n,r,i,s){J4(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&H5(t,n,!1),Sa(e,t,s);r=t.stateNode,Gk.current=t;var o=a&&typeof n.getDerivedStateFromError!=\"function\"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=xu(t,e.child,null,s),t.child=xu(t,null,o,s)):Er(e,t,o,s),t.memoizedState=r.state,i&&H5(t,n,!0),t.child}function e3(e){var t=e.stateNode;t.pendingContext?W5(e,t.pendingContext,t.pendingContext!==t.context):t.context&&W5(e,t.context,!1),C2(e,t.containerInfo)}function lx(e,t,n,r,i){return yu(),w2(i),t.flags|=256,Er(e,t,n,r),t.child}var Gg={dehydrated:null,treeContext:null,retryLane:0};function Kg(e){return{baseLanes:e,cachePool:null,transitions:null}}function t3(e,t,n){var r=t.pendingProps,i=yn.current,s=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),un(yn,i&1),e===null)return zg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data===\"$!\"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:\"hidden\",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Zm(a,r,0,null),e=vl(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Kg(n),t.memoizedState=Gg,e):I2(t,a));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Kk(e,t,a,r,o,i,n);if(s){s=r.fallback,a=t.mode,i=e.child,o=i.sibling;var c={mode:\"hidden\",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=So(i,c),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=So(o,s):(s=vl(s,a,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a=a===null?Kg(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~n,t.memoizedState=Gg,r}return s=e.child,e=s.sibling,r=So(s,{mode:\"visible\",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function I2(e,t){return t=Zm({mode:\"visible\",children:t},e.mode,0,null),t.return=e,e.child=t}function lp(e,t,n,r){return r!==null&&w2(r),xu(t,e.child,null,n),e=I2(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Kk(e,t,n,r,i,s,a){if(n)return t.flags&256?(t.flags&=-257,r=O1(Error(Fe(422))),lp(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Zm({mode:\"visible\",children:r.children},i,0,null),s=vl(s,i,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&xu(t,e.child,null,a),t.child.memoizedState=Kg(a),t.memoizedState=Gg,s);if(!(t.mode&1))return lp(e,t,a,null);if(i.data===\"$!\"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(Fe(419)),r=O1(s,r,void 0),lp(e,t,a,r)}if(o=(a&e.childLanes)!==0,Gr||o){if(r=nr,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Na(e,i),os(r,e,i,-1))}return z2(),r=O1(Error(Fe(421))),lp(e,t,a,r)}return i.data===\"$?\"?(t.flags|=128,t.child=e.child,t=oA.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,oi=xo(i.nextSibling),ci=t,mn=!0,ts=null,e!==null&&(ki[Ai++]=ga,ki[Ai++]=va,ki[Ai++]=Nl,ga=e.id,va=e.overflow,Nl=t),t=I2(t,r.children),t.flags|=4096,t)}function cx(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),qg(e.return,t,n)}function F1(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function n3(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Er(e,t,r.children,n),r=yn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&cx(e,n,t);else if(e.tag===19)cx(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(un(yn,r),!(t.mode&1))t.memoizedState=null;else switch(i){case\"forwards\":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&cm(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),F1(t,!1,i,n,s);break;case\"backwards\":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&cm(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}F1(t,!0,n,null,s);break;case\"together\":F1(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Tp(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Sa(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),jl|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Fe(153));if(t.child!==null){for(e=t.child,n=So(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=So(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Zk(e,t,n){switch(t.tag){case 3:e3(t),yu();break;case 5:A4(t);break;case 1:Zr(t.type)&&rm(t);break;case 4:C2(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;un(am,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(un(yn,yn.current&1),t.flags|=128,null):n&t.child.childLanes?t3(e,t,n):(un(yn,yn.current&1),e=Sa(e,t,n),e!==null?e.sibling:null);un(yn,yn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return n3(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),un(yn,yn.current),r)break;return null;case 22:case 23:return t.lanes=0,X4(e,t,n)}return Sa(e,t,n)}var r3,Zg,i3,s3;r3=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Zg=function(){};i3=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ol(Ds.current);var s=null;switch(n){case\"input\":i=vg(e,i),r=vg(e,r),s=[];break;case\"select\":i=wn({},i,{value:void 0}),r=wn({},r,{value:void 0}),s=[];break;case\"textarea\":i=wg(e,i),r=wg(e,r),s=[];break;default:typeof i.onClick!=\"function\"&&typeof r.onClick==\"function\"&&(e.onclick=tm)}Ng(n,r);var a;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d===\"style\"){var o=i[d];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]=\"\")}else d!==\"dangerouslySetInnerHTML\"&&d!==\"children\"&&d!==\"suppressContentEditableWarning\"&&d!==\"suppressHydrationWarning\"&&d!==\"autoFocus\"&&(nf.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var c=r[d];if(o=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d===\"style\")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]=\"\");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(d,n)),n=c;else d===\"dangerouslySetInnerHTML\"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(s=s||[]).push(d,c)):d===\"children\"?typeof c!=\"string\"&&typeof c!=\"number\"||(s=s||[]).push(d,\"\"+c):d!==\"suppressContentEditableWarning\"&&d!==\"suppressHydrationWarning\"&&(nf.hasOwnProperty(d)?(c!=null&&d===\"onScroll\"&&fn(\"scroll\",e),s||o===c||(s=[])):(s=s||[]).push(d,c))}n&&(s=s||[]).push(\"style\",n);var d=s;(t.updateQueue=d)&&(t.flags|=4)}};s3=function(e,t,n,r){n!==r&&(t.flags|=4)};function jd(e,t){if(!mn)switch(e.tailMode){case\"hidden\":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case\"collapsed\":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function pr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qk(e,t,n){var r=t.pendingProps;switch(x2(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pr(t),null;case 1:return Zr(t.type)&&nm(),pr(t),null;case 3:return r=t.stateNode,wu(),pn(Kr),pn(Nr),A2(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ap(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ts!==null&&(rv(ts),ts=null))),Zg(e,t),pr(t),null;case 5:k2(t);var i=ol(mf.current);if(n=t.type,e!==null&&t.stateNode!=null)i3(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Fe(166));return pr(t),null}if(e=ol(Ds.current),ap(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Rs]=t,r[hf]=s,e=(t.mode&1)!==0,n){case\"dialog\":fn(\"cancel\",r),fn(\"close\",r);break;case\"iframe\":case\"object\":case\"embed\":fn(\"load\",r);break;case\"video\":case\"audio\":for(i=0;i<Od.length;i++)fn(Od[i],r);break;case\"source\":fn(\"error\",r);break;case\"img\":case\"image\":case\"link\":fn(\"error\",r),fn(\"load\",r);break;case\"details\":fn(\"toggle\",r);break;case\"input\":y5(r,s),fn(\"invalid\",r);break;case\"select\":r._wrapperState={wasMultiple:!!s.multiple},fn(\"invalid\",r);break;case\"textarea\":w5(r,s),fn(\"invalid\",r)}Ng(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a===\"children\"?typeof o==\"string\"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&sp(r.textContent,o,e),i=[\"children\",o]):typeof o==\"number\"&&r.textContent!==\"\"+o&&(s.suppressHydrationWarning!==!0&&sp(r.textContent,o,e),i=[\"children\",\"\"+o]):nf.hasOwnProperty(a)&&o!=null&&a===\"onScroll\"&&fn(\"scroll\",r)}switch(n){case\"input\":Yh(r),x5(r,s,!0);break;case\"textarea\":Yh(r),b5(r);break;case\"select\":case\"option\":break;default:typeof s.onClick==\"function\"&&(r.onclick=tm)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e===\"http://www.w3.org/1999/xhtml\"&&(e=Rb(n)),e===\"http://www.w3.org/1999/xhtml\"?n===\"script\"?(e=a.createElement(\"div\"),e.innerHTML=\"<script><\\/script>\",e=e.removeChild(e.firstChild)):typeof r.is==\"string\"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n===\"select\"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Rs]=t,e[hf]=r,r3(e,t,!1,!1),t.stateNode=e;e:{switch(a=Sg(n,r),n){case\"dialog\":fn(\"cancel\",e),fn(\"close\",e),i=r;break;case\"iframe\":case\"object\":case\"embed\":fn(\"load\",e),i=r;break;case\"video\":case\"audio\":for(i=0;i<Od.length;i++)fn(Od[i],e);i=r;break;case\"source\":fn(\"error\",e),i=r;break;case\"img\":case\"image\":case\"link\":fn(\"error\",e),fn(\"load\",e),i=r;break;case\"details\":fn(\"toggle\",e),i=r;break;case\"input\":y5(e,r),i=vg(e,r),fn(\"invalid\",e);break;case\"option\":i=r;break;case\"select\":e._wrapperState={wasMultiple:!!r.multiple},i=wn({},r,{value:void 0}),fn(\"invalid\",e);break;case\"textarea\":w5(e,r),i=wg(e,r),fn(\"invalid\",e);break;default:i=r}Ng(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var c=o[s];s===\"style\"?Fb(e,c):s===\"dangerouslySetInnerHTML\"?(c=c?c.__html:void 0,c!=null&&Ib(e,c)):s===\"children\"?typeof c==\"string\"?(n!==\"textarea\"||c!==\"\")&&rf(e,c):typeof c==\"number\"&&rf(e,\"\"+c):s!==\"suppressContentEditableWarning\"&&s!==\"suppressHydrationWarning\"&&s!==\"autoFocus\"&&(nf.hasOwnProperty(s)?c!=null&&s===\"onScroll\"&&fn(\"scroll\",e):c!=null&&i2(e,s,c,a))}switch(n){case\"input\":Yh(e),x5(e,r,!1);break;case\"textarea\":Yh(e),b5(e);break;case\"option\":r.value!=null&&e.setAttribute(\"value\",\"\"+_o(r.value));break;case\"select\":e.multiple=!!r.multiple,s=r.value,s!=null?Uc(e,!!r.multiple,s,!1):r.defaultValue!=null&&Uc(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick==\"function\"&&(e.onclick=tm)}switch(n){case\"button\":case\"input\":case\"select\":case\"textarea\":r=!!r.autoFocus;break e;case\"img\":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return pr(t),null;case 6:if(e&&t.stateNode!=null)s3(e,t,e.memoizedProps,r);else{if(typeof r!=\"string\"&&t.stateNode===null)throw Error(Fe(166));if(n=ol(mf.current),ol(Ds.current),ap(t)){if(r=t.stateNode,n=t.memoizedProps,r[Rs]=t,(s=r.nodeValue!==n)&&(e=ci,e!==null))switch(e.tag){case 3:sp(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&sp(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Rs]=t,t.stateNode=r}return pr(t),null;case 13:if(pn(yn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(mn&&oi!==null&&t.mode&1&&!(t.flags&128))S4(),yu(),t.flags|=98560,s=!1;else if(s=ap(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(Fe(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Fe(317));s[Rs]=t}else yu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;pr(t),s=!1}else ts!==null&&(rv(ts),ts=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||yn.current&1?Kn===0&&(Kn=3):z2())),t.updateQueue!==null&&(t.flags|=4),pr(t),null);case 4:return wu(),Zg(e,t),e===null&&df(t.stateNode.containerInfo),pr(t),null;case 10:return S2(t.type._context),pr(t),null;case 17:return Zr(t.type)&&nm(),pr(t),null;case 19:if(pn(yn),s=t.memoizedState,s===null)return pr(t),null;if(r=(t.flags&128)!==0,a=s.rendering,a===null)if(r)jd(s,!1);else{if(Kn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=cm(e),a!==null){for(t.flags|=128,jd(s,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return un(yn,yn.current&1|2),t.child}e=e.sibling}s.tail!==null&&Tn()>Nu&&(t.flags|=128,r=!0,jd(s,!1),t.lanes=4194304)}else{if(!r)if(e=cm(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),jd(s,!0),s.tail===null&&s.tailMode===\"hidden\"&&!a.alternate&&!mn)return pr(t),null}else 2*Tn()-s.renderingStartTime>Nu&&n!==1073741824&&(t.flags|=128,r=!0,jd(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(n=s.last,n!==null?n.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Tn(),t.sibling=null,n=yn.current,un(yn,r?n&1|2:n&1),t):(pr(t),null);case 22:case 23:return B2(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ii&1073741824&&(pr(t),t.subtreeFlags&6&&(t.flags|=8192)):pr(t),null;case 24:return null;case 25:return null}throw Error(Fe(156,t.tag))}function Yk(e,t){switch(x2(t),t.tag){case 1:return Zr(t.type)&&nm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return wu(),pn(Kr),pn(Nr),A2(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return k2(t),null;case 13:if(pn(yn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Fe(340));yu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return pn(yn),null;case 4:return wu(),null;case 10:return S2(t.type._context),null;case 22:case 23:return B2(),null;case 24:return null;default:return null}}var cp=!1,wr=!1,Xk=typeof WeakSet==\"function\"?WeakSet:Set,Ye=null;function Dc(e,t){var n=e.ref;if(n!==null)if(typeof n==\"function\")try{n(null)}catch(r){kn(e,t,r)}else n.current=null}function Qg(e,t,n){try{n()}catch(r){kn(e,t,r)}}var ux=!1;function Jk(e,t){if(Rg=Xp,e=u4(),v2(e)){if(\"selectionStart\"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,c=-1,d=0,f=0,m=e,g=null;t:for(;;){for(var p;m!==n||i!==0&&m.nodeType!==3||(o=a+i),m!==s||r!==0&&m.nodeType!==3||(c=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(p=m.firstChild)!==null;)g=m,m=p;for(;;){if(m===e)break t;if(g===n&&++d===i&&(o=a),g===s&&++f===r&&(c=a),(p=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=p}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ig={focusedElem:e,selectionRange:n},Xp=!1,Ye=t;Ye!==null;)if(t=Ye,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ye=e;else for(;Ye!==null;){t=Ye;try{var S=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var y=S.memoizedProps,j=S.memoizedState,x=t.stateNode,b=x.getSnapshotBeforeUpdate(t.elementType===t.type?y:Yi(t.type,y),j);x.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent=\"\":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Fe(163))}}catch(k){kn(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,Ye=e;break}Ye=t.return}return S=ux,ux=!1,S}function Gd(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Qg(t,n,s)}i=i.next}while(i!==r)}}function Gm(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Yg(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t==\"function\"?t(e):t.current=e}}function a3(e){var t=e.alternate;t!==null&&(e.alternate=null,a3(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Rs],delete t[hf],delete t[Mg],delete t[Ok],delete t[Fk])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function o3(e){return e.tag===5||e.tag===3||e.tag===4}function dx(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||o3(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Xg(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=tm));else if(r!==4&&(e=e.child,e!==null))for(Xg(e,t,n),e=e.sibling;e!==null;)Xg(e,t,n),e=e.sibling}function Jg(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Jg(e,t,n),e=e.sibling;e!==null;)Jg(e,t,n),e=e.sibling}var or=null,es=!1;function Wa(e,t,n){for(n=n.child;n!==null;)l3(e,t,n),n=n.sibling}function l3(e,t,n){if(Ms&&typeof Ms.onCommitFiberUnmount==\"function\")try{Ms.onCommitFiberUnmount(Bm,n)}catch{}switch(n.tag){case 5:wr||Dc(n,t);case 6:var r=or,i=es;or=null,Wa(e,t,n),or=r,es=i,or!==null&&(es?(e=or,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):or.removeChild(n.stateNode));break;case 18:or!==null&&(es?(e=or,n=n.stateNode,e.nodeType===8?P1(e.parentNode,n):e.nodeType===1&&P1(e,n),lf(e)):P1(or,n.stateNode));break;case 4:r=or,i=es,or=n.stateNode.containerInfo,es=!0,Wa(e,t,n),or=r,es=i;break;case 0:case 11:case 14:case 15:if(!wr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Qg(n,t,a),i=i.next}while(i!==r)}Wa(e,t,n);break;case 1:if(!wr&&(Dc(n,t),r=n.stateNode,typeof r.componentWillUnmount==\"function\"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){kn(n,t,o)}Wa(e,t,n);break;case 21:Wa(e,t,n);break;case 22:n.mode&1?(wr=(r=wr)||n.memoizedState!==null,Wa(e,t,n),wr=r):Wa(e,t,n);break;default:Wa(e,t,n)}}function fx(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Xk),t.forEach(function(r){var i=lA.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Gi(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 5:or=o.stateNode,es=!1;break e;case 3:or=o.stateNode.containerInfo,es=!0;break e;case 4:or=o.stateNode.containerInfo,es=!0;break e}o=o.return}if(or===null)throw Error(Fe(160));l3(s,a,i),or=null,es=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){kn(i,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)c3(t,e),t=t.sibling}function c3(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Gi(t,e),Cs(e),r&4){try{Gd(3,e,e.return),Gm(3,e)}catch(y){kn(e,e.return,y)}try{Gd(5,e,e.return)}catch(y){kn(e,e.return,y)}}break;case 1:Gi(t,e),Cs(e),r&512&&n!==null&&Dc(n,n.return);break;case 5:if(Gi(t,e),Cs(e),r&512&&n!==null&&Dc(n,n.return),e.flags&32){var i=e.stateNode;try{rf(i,\"\")}catch(y){kn(e,e.return,y)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,a=n!==null?n.memoizedProps:s,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o===\"input\"&&s.type===\"radio\"&&s.name!=null&&Eb(i,s),Sg(o,a);var d=Sg(o,s);for(a=0;a<c.length;a+=2){var f=c[a],m=c[a+1];f===\"style\"?Fb(i,m):f===\"dangerouslySetInnerHTML\"?Ib(i,m):f===\"children\"?rf(i,m):i2(i,f,m,d)}switch(o){case\"input\":yg(i,s);break;case\"textarea\":Tb(i,s);break;case\"select\":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Uc(i,!!s.multiple,p,!1):g!==!!s.multiple&&(s.defaultValue!=null?Uc(i,!!s.multiple,s.defaultValue,!0):Uc(i,!!s.multiple,s.multiple?[]:\"\",!1))}i[hf]=s}catch(y){kn(e,e.return,y)}}break;case 6:if(Gi(t,e),Cs(e),r&4){if(e.stateNode===null)throw Error(Fe(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(y){kn(e,e.return,y)}}break;case 3:if(Gi(t,e),Cs(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{lf(t.containerInfo)}catch(y){kn(e,e.return,y)}break;case 4:Gi(t,e),Cs(e);break;case 13:Gi(t,e),Cs(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(M2=Tn())),r&4&&fx(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(wr=(d=wr)||f,Gi(t,e),wr=d):Gi(t,e),Cs(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!f&&e.mode&1)for(Ye=e,f=e.child;f!==null;){for(m=Ye=f;Ye!==null;){switch(g=Ye,p=g.child,g.tag){case 0:case 11:case 14:case 15:Gd(4,g,g.return);break;case 1:Dc(g,g.return);var S=g.stateNode;if(typeof S.componentWillUnmount==\"function\"){r=g,n=g.return;try{t=r,S.props=t.memoizedProps,S.state=t.memoizedState,S.componentWillUnmount()}catch(y){kn(r,n,y)}}break;case 5:Dc(g,g.return);break;case 22:if(g.memoizedState!==null){px(m);continue}}p!==null?(p.return=g,Ye=p):px(m)}f=f.sibling}e:for(f=null,m=e;;){if(m.tag===5){if(f===null){f=m;try{i=m.stateNode,d?(s=i.style,typeof s.setProperty==\"function\"?s.setProperty(\"display\",\"none\",\"important\"):s.display=\"none\"):(o=m.stateNode,c=m.memoizedProps.style,a=c!=null&&c.hasOwnProperty(\"display\")?c.display:null,o.style.display=Ob(\"display\",a))}catch(y){kn(e,e.return,y)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?\"\":m.memoizedProps}catch(y){kn(e,e.return,y)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Gi(t,e),Cs(e),r&4&&fx(e);break;case 21:break;default:Gi(t,e),Cs(e)}}function Cs(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(o3(n)){var r=n;break e}n=n.return}throw Error(Fe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(rf(i,\"\"),r.flags&=-33);var s=dx(e);Jg(e,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=dx(e);Xg(e,o,a);break;default:throw Error(Fe(161))}}catch(c){kn(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function eA(e,t,n){Ye=e,u3(e)}function u3(e,t,n){for(var r=(e.mode&1)!==0;Ye!==null;){var i=Ye,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||cp;if(!a){var o=i.alternate,c=o!==null&&o.memoizedState!==null||wr;o=cp;var d=wr;if(cp=a,(wr=c)&&!d)for(Ye=i;Ye!==null;)a=Ye,c=a.child,a.tag===22&&a.memoizedState!==null?mx(i):c!==null?(c.return=a,Ye=c):mx(i);for(;s!==null;)Ye=s,u3(s),s=s.sibling;Ye=i,cp=o,wr=d}hx(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ye=s):hx(e)}}function hx(e){for(;Ye!==null;){var t=Ye;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:wr||Gm(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!wr)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Yi(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Y5(t,s,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Y5(t,a,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var c=t.memoizedProps;switch(t.type){case\"button\":case\"input\":case\"select\":case\"textarea\":c.autoFocus&&n.focus();break;case\"img\":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&lf(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Fe(163))}wr||t.flags&512&&Yg(t)}catch(g){kn(t,t.return,g)}}if(t===e){Ye=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ye=n;break}Ye=t.return}}function px(e){for(;Ye!==null;){var t=Ye;if(t===e){Ye=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ye=n;break}Ye=t.return}}function mx(e){for(;Ye!==null;){var t=Ye;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Gm(4,t)}catch(c){kn(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount==\"function\"){var i=t.return;try{r.componentDidMount()}catch(c){kn(t,i,c)}}var s=t.return;try{Yg(t)}catch(c){kn(t,s,c)}break;case 5:var a=t.return;try{Yg(t)}catch(c){kn(t,a,c)}}}catch(c){kn(t,t.return,c)}if(t===e){Ye=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Ye=o;break}Ye=t.return}}var tA=Math.ceil,fm=Pa.ReactCurrentDispatcher,O2=Pa.ReactCurrentOwner,Ti=Pa.ReactCurrentBatchConfig,Ut=0,nr=null,qn=null,cr=0,ii=0,Bc=Mo(0),Kn=0,xf=null,jl=0,Km=0,F2=0,Kd=null,Hr=null,M2=0,Nu=1/0,fa=null,hm=!1,ev=null,bo=null,up=!1,po=null,pm=0,Zd=0,tv=null,Rp=-1,Ip=0;function Rr(){return Ut&6?Tn():Rp!==-1?Rp:Rp=Tn()}function No(e){return e.mode&1?Ut&2&&cr!==0?cr&-cr:Dk.transition!==null?(Ip===0&&(Ip=Kb()),Ip):(e=Jt,e!==0||(e=window.event,e=e===void 0?16:t4(e.type)),e):1}function os(e,t,n,r){if(50<Zd)throw Zd=0,tv=null,Error(Fe(185));Wf(e,n,r),(!(Ut&2)||e!==nr)&&(e===nr&&(!(Ut&2)&&(Km|=n),Kn===4&&to(e,cr)),Qr(e,r),n===1&&Ut===0&&!(t.mode&1)&&(Nu=Tn()+500,$m&&Do()))}function Qr(e,t){var n=e.callbackNode;DC(e,t);var r=Yp(e,e===nr?cr:0);if(r===0)n!==null&&j5(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&j5(n),t===1)e.tag===0?Mk(gx.bind(null,e)):w4(gx.bind(null,e)),Rk(function(){!(Ut&6)&&Do()}),n=null;else{switch(Zb(r)){case 1:n=c2;break;case 4:n=Hb;break;case 16:n=Qp;break;case 536870912:n=Gb;break;default:n=Qp}n=y3(n,d3.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function d3(e,t){if(Rp=-1,Ip=0,Ut&6)throw Error(Fe(327));var n=e.callbackNode;if(Gc()&&e.callbackNode!==n)return null;var r=Yp(e,e===nr?cr:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=mm(e,r);else{t=r;var i=Ut;Ut|=2;var s=h3();(nr!==e||cr!==t)&&(fa=null,Nu=Tn()+500,gl(e,t));do try{iA();break}catch(o){f3(e,o)}while(!0);N2(),fm.current=s,Ut=i,qn!==null?t=0:(nr=null,cr=0,t=Kn)}if(t!==0){if(t===2&&(i=Ag(e),i!==0&&(r=i,t=nv(e,i))),t===1)throw n=xf,gl(e,0),to(e,r),Qr(e,Tn()),n;if(t===6)to(e,r);else{if(i=e.current.alternate,!(r&30)&&!nA(i)&&(t=mm(e,r),t===2&&(s=Ag(e),s!==0&&(r=s,t=nv(e,s))),t===1))throw n=xf,gl(e,0),to(e,r),Qr(e,Tn()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(Fe(345));case 2:nl(e,Hr,fa);break;case 3:if(to(e,r),(r&130023424)===r&&(t=M2+500-Tn(),10<t)){if(Yp(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Rr(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Fg(nl.bind(null,e,Hr,fa),t);break}nl(e,Hr,fa);break;case 4:if(to(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-as(r);s=1<<a,a=t[a],a>i&&(i=a),r&=~s}if(r=i,r=Tn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*tA(r/1960))-r,10<r){e.timeoutHandle=Fg(nl.bind(null,e,Hr,fa),r);break}nl(e,Hr,fa);break;case 5:nl(e,Hr,fa);break;default:throw Error(Fe(329))}}}return Qr(e,Tn()),e.callbackNode===n?d3.bind(null,e):null}function nv(e,t){var n=Kd;return e.current.memoizedState.isDehydrated&&(gl(e,t).flags|=256),e=mm(e,t),e!==2&&(t=Hr,Hr=n,t!==null&&rv(t)),e}function rv(e){Hr===null?Hr=e:Hr.push.apply(Hr,e)}function nA(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!cs(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function to(e,t){for(t&=~F2,t&=~Km,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-as(t),r=1<<n;e[n]=-1,t&=~r}}function gx(e){if(Ut&6)throw Error(Fe(327));Gc();var t=Yp(e,0);if(!(t&1))return Qr(e,Tn()),null;var n=mm(e,t);if(e.tag!==0&&n===2){var r=Ag(e);r!==0&&(t=r,n=nv(e,r))}if(n===1)throw n=xf,gl(e,0),to(e,t),Qr(e,Tn()),n;if(n===6)throw Error(Fe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,nl(e,Hr,fa),Qr(e,Tn()),null}function D2(e,t){var n=Ut;Ut|=1;try{return e(t)}finally{Ut=n,Ut===0&&(Nu=Tn()+500,$m&&Do())}}function _l(e){po!==null&&po.tag===0&&!(Ut&6)&&Gc();var t=Ut;Ut|=1;var n=Ti.transition,r=Jt;try{if(Ti.transition=null,Jt=1,e)return e()}finally{Jt=r,Ti.transition=n,Ut=t,!(Ut&6)&&Do()}}function B2(){ii=Bc.current,pn(Bc)}function gl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Tk(n)),qn!==null)for(n=qn.return;n!==null;){var r=n;switch(x2(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&nm();break;case 3:wu(),pn(Kr),pn(Nr),A2();break;case 5:k2(r);break;case 4:wu();break;case 13:pn(yn);break;case 19:pn(yn);break;case 10:S2(r.type._context);break;case 22:case 23:B2()}n=n.return}if(nr=e,qn=e=So(e.current,null),cr=ii=t,Kn=0,xf=null,F2=Km=jl=0,Hr=Kd=null,al!==null){for(t=0;t<al.length;t++)if(n=al[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}al=null}return e}function f3(e,t){do{var n=qn;try{if(N2(),Lp.current=dm,um){for(var r=xn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}um=!1}if(Sl=0,er=Hn=xn=null,Hd=!1,gf=0,O2.current=null,n===null||n.return===null){Kn=1,xf=t,qn=null;break}e:{var s=e,a=n.return,o=n,c=t;if(t=cr,o.flags|=32768,c!==null&&typeof c==\"object\"&&typeof c.then==\"function\"){var d=c,f=o,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=rx(a);if(p!==null){p.flags&=-257,ix(p,a,o,s,t),p.mode&1&&nx(s,d,t),t=p,c=d;var S=t.updateQueue;if(S===null){var y=new Set;y.add(c),t.updateQueue=y}else S.add(c);break e}else{if(!(t&1)){nx(s,d,t),z2();break e}c=Error(Fe(426))}}else if(mn&&o.mode&1){var j=rx(a);if(j!==null){!(j.flags&65536)&&(j.flags|=256),ix(j,a,o,s,t),w2(bu(c,o));break e}}s=c=bu(c,o),Kn!==4&&(Kn=2),Kd===null?Kd=[s]:Kd.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var x=Z4(s,c,t);Q5(s,x);break e;case 1:o=c;var b=s.type,N=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError==\"function\"||N!==null&&typeof N.componentDidCatch==\"function\"&&(bo===null||!bo.has(N)))){s.flags|=65536,t&=-t,s.lanes|=t;var k=Q4(s,o,t);Q5(s,k);break e}}s=s.return}while(s!==null)}m3(n)}catch(P){t=P,qn===n&&n!==null&&(qn=n=n.return);continue}break}while(!0)}function h3(){var e=fm.current;return fm.current=dm,e===null?dm:e}function z2(){(Kn===0||Kn===3||Kn===2)&&(Kn=4),nr===null||!(jl&268435455)&&!(Km&268435455)||to(nr,cr)}function mm(e,t){var n=Ut;Ut|=2;var r=h3();(nr!==e||cr!==t)&&(fa=null,gl(e,t));do try{rA();break}catch(i){f3(e,i)}while(!0);if(N2(),Ut=n,fm.current=r,qn!==null)throw Error(Fe(261));return nr=null,cr=0,Kn}function rA(){for(;qn!==null;)p3(qn)}function iA(){for(;qn!==null&&!PC();)p3(qn)}function p3(e){var t=v3(e.alternate,e,ii);e.memoizedProps=e.pendingProps,t===null?m3(e):qn=t,O2.current=null}function m3(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Yk(n,t),n!==null){n.flags&=32767,qn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Kn=6,qn=null;return}}else if(n=Qk(n,t,ii),n!==null){qn=n;return}if(t=t.sibling,t!==null){qn=t;return}qn=t=e}while(t!==null);Kn===0&&(Kn=5)}function nl(e,t,n){var r=Jt,i=Ti.transition;try{Ti.transition=null,Jt=1,sA(e,t,n,r)}finally{Ti.transition=i,Jt=r}return null}function sA(e,t,n,r){do Gc();while(po!==null);if(Ut&6)throw Error(Fe(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Fe(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(BC(e,s),e===nr&&(qn=nr=null,cr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||up||(up=!0,y3(Qp,function(){return Gc(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ti.transition,Ti.transition=null;var a=Jt;Jt=1;var o=Ut;Ut|=4,O2.current=null,Jk(e,n),c3(n,e),_k(Ig),Xp=!!Rg,Ig=Rg=null,e.current=n,eA(n),LC(),Ut=o,Jt=a,Ti.transition=s}else e.current=n;if(up&&(up=!1,po=e,pm=i),s=e.pendingLanes,s===0&&(bo=null),RC(n.stateNode),Qr(e,Tn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(hm)throw hm=!1,e=ev,ev=null,e;return pm&1&&e.tag!==0&&Gc(),s=e.pendingLanes,s&1?e===tv?Zd++:(Zd=0,tv=e):Zd=0,Do(),null}function Gc(){if(po!==null){var e=Zb(pm),t=Ti.transition,n=Jt;try{if(Ti.transition=null,Jt=16>e?16:e,po===null)var r=!1;else{if(e=po,po=null,pm=0,Ut&6)throw Error(Fe(331));var i=Ut;for(Ut|=4,Ye=e.current;Ye!==null;){var s=Ye,a=s.child;if(Ye.flags&16){var o=s.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(Ye=d;Ye!==null;){var f=Ye;switch(f.tag){case 0:case 11:case 15:Gd(8,f,s)}var m=f.child;if(m!==null)m.return=f,Ye=m;else for(;Ye!==null;){f=Ye;var g=f.sibling,p=f.return;if(a3(f),f===d){Ye=null;break}if(g!==null){g.return=p,Ye=g;break}Ye=p}}}var S=s.alternate;if(S!==null){var y=S.child;if(y!==null){S.child=null;do{var j=y.sibling;y.sibling=null,y=j}while(y!==null)}}Ye=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Ye=a;else e:for(;Ye!==null;){if(s=Ye,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Gd(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,Ye=x;break e}Ye=s.return}}var b=e.current;for(Ye=b;Ye!==null;){a=Ye;var N=a.child;if(a.subtreeFlags&2064&&N!==null)N.return=a,Ye=N;else e:for(a=b;Ye!==null;){if(o=Ye,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Gm(9,o)}}catch(P){kn(o,o.return,P)}if(o===a){Ye=null;break e}var k=o.sibling;if(k!==null){k.return=o.return,Ye=k;break e}Ye=o.return}}if(Ut=i,Do(),Ms&&typeof Ms.onPostCommitFiberRoot==\"function\")try{Ms.onPostCommitFiberRoot(Bm,e)}catch{}r=!0}return r}finally{Jt=n,Ti.transition=t}}return!1}function vx(e,t,n){t=bu(n,t),t=Z4(e,t,1),e=wo(e,t,1),t=Rr(),e!==null&&(Wf(e,1,t),Qr(e,t))}function kn(e,t,n){if(e.tag===3)vx(e,e,n);else for(;t!==null;){if(t.tag===3){vx(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError==\"function\"||typeof r.componentDidCatch==\"function\"&&(bo===null||!bo.has(r))){e=bu(n,e),e=Q4(t,e,1),t=wo(t,e,1),e=Rr(),t!==null&&(Wf(t,1,e),Qr(t,e));break}}t=t.return}}function aA(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Rr(),e.pingedLanes|=e.suspendedLanes&n,nr===e&&(cr&n)===n&&(Kn===4||Kn===3&&(cr&130023424)===cr&&500>Tn()-M2?gl(e,0):F2|=n),Qr(e,t)}function g3(e,t){t===0&&(e.mode&1?(t=ep,ep<<=1,!(ep&130023424)&&(ep=4194304)):t=1);var n=Rr();e=Na(e,t),e!==null&&(Wf(e,t,n),Qr(e,n))}function oA(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),g3(e,n)}function lA(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Fe(314))}r!==null&&r.delete(t),g3(e,n)}var v3;v3=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Kr.current)Gr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Gr=!1,Zk(e,t,n);Gr=!!(e.flags&131072)}else Gr=!1,mn&&t.flags&1048576&&b4(t,sm,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Tp(e,t),e=t.pendingProps;var i=vu(t,Nr.current);Hc(t,n),i=L2(null,t,r,e,i,n);var s=E2();return t.flags|=1,typeof i==\"object\"&&i!==null&&typeof i.render==\"function\"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Zr(r)?(s=!0,rm(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,_2(t),i.updater=Hm,t.stateNode=i,i._reactInternals=t,Vg(t,r,e,n),t=Hg(null,t,r,!0,s,n)):(t.tag=0,mn&&s&&y2(t),Er(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Tp(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=uA(r),e=Yi(r,e),i){case 0:t=Wg(null,t,r,e,n);break e;case 1:t=ox(null,t,r,e,n);break e;case 11:t=sx(null,t,r,e,n);break e;case 14:t=ax(null,t,r,Yi(r.type,e),n);break e}throw Error(Fe(306,r,\"\"))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yi(r,i),Wg(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yi(r,i),ox(e,t,r,i,n);case 3:e:{if(e3(t),e===null)throw Error(Fe(387));r=t.pendingProps,s=t.memoizedState,i=s.element,k4(e,t),lm(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=bu(Error(Fe(423)),t),t=lx(e,t,r,n,i);break e}else if(r!==i){i=bu(Error(Fe(424)),t),t=lx(e,t,r,n,i);break e}else for(oi=xo(t.stateNode.containerInfo.firstChild),ci=t,mn=!0,ts=null,n=_4(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(yu(),r===i){t=Sa(e,t,n);break e}Er(e,t,r,n)}t=t.child}return t;case 5:return A4(t),e===null&&zg(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,a=i.children,Og(r,i)?a=null:s!==null&&Og(r,s)&&(t.flags|=32),J4(e,t),Er(e,t,a,n),t.child;case 6:return e===null&&zg(t),null;case 13:return t3(e,t,n);case 4:return C2(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=xu(t,null,r,n):Er(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yi(r,i),sx(e,t,r,i,n);case 7:return Er(e,t,t.pendingProps,n),t.child;case 8:return Er(e,t,t.pendingProps.children,n),t.child;case 12:return Er(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,un(am,r._currentValue),r._currentValue=a,s!==null)if(cs(s.value,a)){if(s.children===i.children&&!Kr.current){t=Sa(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=ya(-1,n&-n),c.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),qg(s.return,n,t),o.lanes|=n;break}c=c.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Fe(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),qg(a,n,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Er(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Hc(t,n),i=Ri(i),r=r(i),t.flags|=1,Er(e,t,r,n),t.child;case 14:return r=t.type,i=Yi(r,t.pendingProps),i=Yi(r.type,i),ax(e,t,r,i,n);case 15:return Y4(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yi(r,i),Tp(e,t),t.tag=1,Zr(r)?(e=!0,rm(t)):e=!1,Hc(t,n),K4(t,r,i),Vg(t,r,i,n),Hg(null,t,r,!0,e,n);case 19:return n3(e,t,n);case 22:return X4(e,t,n)}throw Error(Fe(156,t.tag))};function y3(e,t){return Wb(e,t)}function cA(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pi(e,t,n,r){return new cA(e,t,n,r)}function q2(e){return e=e.prototype,!(!e||!e.isReactComponent)}function uA(e){if(typeof e==\"function\")return q2(e)?1:0;if(e!=null){if(e=e.$$typeof,e===a2)return 11;if(e===o2)return 14}return 2}function So(e,t){var n=e.alternate;return n===null?(n=Pi(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Op(e,t,n,r,i,s){var a=2;if(r=e,typeof e==\"function\")q2(e)&&(a=1);else if(typeof e==\"string\")a=5;else e:switch(e){case Pc:return vl(n.children,i,s,t);case s2:a=8,i|=8;break;case hg:return e=Pi(12,n,t,i|2),e.elementType=hg,e.lanes=s,e;case pg:return e=Pi(13,n,t,i),e.elementType=pg,e.lanes=s,e;case mg:return e=Pi(19,n,t,i),e.elementType=mg,e.lanes=s,e;case Ab:return Zm(n,i,s,t);default:if(typeof e==\"object\"&&e!==null)switch(e.$$typeof){case Cb:a=10;break e;case kb:a=9;break e;case a2:a=11;break e;case o2:a=14;break e;case Xa:a=16,r=null;break e}throw Error(Fe(130,e==null?e:typeof e,\"\"))}return t=Pi(a,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function vl(e,t,n,r){return e=Pi(7,e,r,t),e.lanes=n,e}function Zm(e,t,n,r){return e=Pi(22,e,r,t),e.elementType=Ab,e.lanes=n,e.stateNode={isHidden:!1},e}function M1(e,t,n){return e=Pi(6,e,null,t),e.lanes=n,e}function D1(e,t,n){return t=Pi(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function dA(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=y1(0),this.expirationTimes=y1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=y1(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function U2(e,t,n,r,i,s,a,o,c){return e=new dA(e,t,n,o,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Pi(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_2(s),e}function fA(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ac,key:r==null?null:\"\"+r,children:e,containerInfo:t,implementation:n}}function x3(e){if(!e)return Co;e=e._reactInternals;e:{if(Bl(e)!==e||e.tag!==1)throw Error(Fe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Zr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Fe(171))}if(e.tag===1){var n=e.type;if(Zr(n))return x4(e,n,t)}return t}function w3(e,t,n,r,i,s,a,o,c){return e=U2(n,r,!0,e,i,s,a,o,c),e.context=x3(null),n=e.current,r=Rr(),i=No(n),s=ya(r,i),s.callback=t??null,wo(n,s,i),e.current.lanes=i,Wf(e,i,r),Qr(e,r),e}function Qm(e,t,n,r){var i=t.current,s=Rr(),a=No(i);return n=x3(n),t.context===null?t.context=n:t.pendingContext=n,t=ya(s,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=wo(i,t,a),e!==null&&(os(e,i,a,s),Pp(e,i,a)),a}function gm(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function yx(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function V2(e,t){yx(e,t),(e=e.alternate)&&yx(e,t)}function hA(){return null}var b3=typeof reportError==\"function\"?reportError:function(e){console.error(e)};function $2(e){this._internalRoot=e}Ym.prototype.render=$2.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Fe(409));Qm(e,t,null,null)};Ym.prototype.unmount=$2.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;_l(function(){Qm(null,e,null,null)}),t[ba]=null}};function Ym(e){this._internalRoot=e}Ym.prototype.unstable_scheduleHydration=function(e){if(e){var t=Xb();e={blockedOn:null,target:e,priority:t};for(var n=0;n<eo.length&&t!==0&&t<eo[n].priority;n++);eo.splice(n,0,e),n===0&&e4(e)}};function W2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Xm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==\" react-mount-point-unstable \"))}function xx(){}function pA(e,t,n,r,i){if(i){if(typeof r==\"function\"){var s=r;r=function(){var d=gm(a);s.call(d)}}var a=w3(t,r,e,0,null,!1,!1,\"\",xx);return e._reactRootContainer=a,e[ba]=a.current,df(e.nodeType===8?e.parentNode:e),_l(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r==\"function\"){var o=r;r=function(){var d=gm(c);o.call(d)}}var c=U2(e,0,!1,null,null,!1,!1,\"\",xx);return e._reactRootContainer=c,e[ba]=c.current,df(e.nodeType===8?e.parentNode:e),_l(function(){Qm(t,c,n,r)}),c}function Jm(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i==\"function\"){var o=i;i=function(){var c=gm(a);o.call(c)}}Qm(t,a,e,i)}else a=pA(n,t,e,i,r);return gm(a)}Qb=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Id(t.pendingLanes);n!==0&&(u2(t,n|1),Qr(t,Tn()),!(Ut&6)&&(Nu=Tn()+500,Do()))}break;case 13:_l(function(){var r=Na(e,1);if(r!==null){var i=Rr();os(r,e,1,i)}}),V2(e,1)}};d2=function(e){if(e.tag===13){var t=Na(e,134217728);if(t!==null){var n=Rr();os(t,e,134217728,n)}V2(e,134217728)}};Yb=function(e){if(e.tag===13){var t=No(e),n=Na(e,t);if(n!==null){var r=Rr();os(n,e,t,r)}V2(e,t)}};Xb=function(){return Jt};Jb=function(e,t){var n=Jt;try{return Jt=e,t()}finally{Jt=n}};_g=function(e,t,n){switch(t){case\"input\":if(yg(e,n),t=n.name,n.type===\"radio\"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll(\"input[name=\"+JSON.stringify(\"\"+t)+'][type=\"radio\"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Vm(r);if(!i)throw Error(Fe(90));Lb(r),yg(r,i)}}}break;case\"textarea\":Tb(e,n);break;case\"select\":t=n.value,t!=null&&Uc(e,!!n.multiple,t,!1)}};Bb=D2;zb=_l;var mA={usingClientEntryPoint:!1,Events:[Gf,Rc,Vm,Mb,Db,D2]},_d={findFiberByHostInstance:sl,bundleType:0,version:\"18.3.1\",rendererPackageName:\"react-dom\"},gA={bundleType:_d.bundleType,version:_d.version,rendererPackageName:_d.rendererPackageName,rendererConfig:_d.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pa.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Vb(e),e===null?null:e.stateNode},findFiberByHostInstance:_d.findFiberByHostInstance||hA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:\"18.3.1-next-f1338f8080-20240426\"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<\"u\"){var dp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dp.isDisabled&&dp.supportsFiber)try{Bm=dp.inject(gA),Ms=dp}catch{}}hi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mA;hi.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!W2(t))throw Error(Fe(200));return fA(e,t,null,n)};hi.createRoot=function(e,t){if(!W2(e))throw Error(Fe(299));var n=!1,r=\"\",i=b3;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=U2(e,1,!1,null,null,n,!1,r,i),e[ba]=t.current,df(e.nodeType===8?e.parentNode:e),new $2(t)};hi.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render==\"function\"?Error(Fe(188)):(e=Object.keys(e).join(\",\"),Error(Fe(268,e)));return e=Vb(t),e=e===null?null:e.stateNode,e};hi.flushSync=function(e){return _l(e)};hi.hydrate=function(e,t,n){if(!Xm(t))throw Error(Fe(200));return Jm(null,e,t,!0,n)};hi.hydrateRoot=function(e,t,n){if(!W2(e))throw Error(Fe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s=\"\",a=b3;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=w3(t,null,e,1,n??null,i,!1,s,a),e[ba]=t.current,df(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Ym(t)};hi.render=function(e,t,n){if(!Xm(t))throw Error(Fe(200));return Jm(null,e,t,!1,n)};hi.unmountComponentAtNode=function(e){if(!Xm(e))throw Error(Fe(40));return e._reactRootContainer?(_l(function(){Jm(null,null,e,!1,function(){e._reactRootContainer=null,e[ba]=null})}),!0):!1};hi.unstable_batchedUpdates=D2;hi.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xm(n))throw Error(Fe(200));if(e==null||e._reactInternals===void 0)throw Error(Fe(38));return Jm(e,t,n,!1,r)};hi.version=\"18.3.1-next-f1338f8080-20240426\";function N3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>\"u\"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=\"function\"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(N3)}catch(e){console.error(e)}}N3(),Nb.exports=hi;var zl=Nb.exports;const vA=cb(zl);var S3,wx=zl;S3=wx.createRoot,wx.hydrateRoot;function yA(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,r,i,s,a=[],o=\"\",c=e.split(\"/\");for(c[0]||c.shift();i=c.shift();)n=i[0],n===\"*\"?(a.push(n),o+=i[1]===\"?\"?\"(?:/(.*))?\":\"/(.*)\"):n===\":\"?(r=i.indexOf(\"?\",1),s=i.indexOf(\".\",1),a.push(i.substring(1,~r?r:~s?s:i.length)),o+=~r&&!~s?\"(?:/([^/]+?))?\":\"/([^/]+?)\",~s&&(o+=(~r?\"?\":\"\")+\"\\\\\"+i.substring(s))):o+=\"/\"+i;return{keys:a,pattern:new RegExp(\"^\"+o+(t?\"(?=$|/)\":\"/?$\"),\"i\")}}var j3={exports:{}},_3={};/**\n * @license React\n * use-sync-external-store-shim.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */var Su=C;function xA(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wA=typeof Object.is==\"function\"?Object.is:xA,bA=Su.useState,NA=Su.useEffect,SA=Su.useLayoutEffect,jA=Su.useDebugValue;function _A(e,t){var n=t(),r=bA({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return SA(function(){i.value=n,i.getSnapshot=t,B1(i)&&s({inst:i})},[e,n,t]),NA(function(){return B1(i)&&s({inst:i}),e(function(){B1(i)&&s({inst:i})})},[e]),jA(n),n}function B1(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!wA(e,n)}catch{return!0}}function CA(e,t){return t()}var kA=typeof window>\"u\"||typeof window.document>\"u\"||typeof window.document.createElement>\"u\"?CA:_A;_3.useSyncExternalStore=Su.useSyncExternalStore!==void 0?Su.useSyncExternalStore:kA;j3.exports=_3;var AA=j3.exports;const PA=wb.useInsertionEffect,LA=typeof window<\"u\"&&typeof window.document<\"u\"&&typeof window.document.createElement<\"u\",EA=LA?C.useLayoutEffect:C.useEffect,TA=PA||EA,C3=e=>{const t=C.useRef([e,(...n)=>t[0](...n)]).current;return TA(()=>{t[0]=e}),t[1]},RA=\"popstate\",H2=\"pushState\",G2=\"replaceState\",IA=\"hashchange\",bx=[RA,H2,G2,IA],OA=e=>{for(const t of bx)addEventListener(t,e);return()=>{for(const t of bx)removeEventListener(t,e)}},k3=(e,t)=>AA.useSyncExternalStore(OA,e,t),FA=()=>location.search,MA=({ssrSearch:e=\"\"}={})=>k3(FA,()=>e),Nx=()=>location.pathname,DA=({ssrPath:e}={})=>k3(Nx,e?()=>e:Nx),BA=(e,{replace:t=!1,state:n=null}={})=>history[t?G2:H2](n,\"\",e),zA=(e={})=>[DA(e),BA],Sx=Symbol.for(\"wouter_v3\");if(typeof history<\"u\"&&typeof window[Sx]>\"u\"){for(const e of[H2,G2]){const t=history[e];history[e]=function(){const n=t.apply(this,arguments),r=new Event(e);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,Sx,{value:!0})}const qA=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?\"~\"+t:t.slice(e.length)||\"/\",A3=(e=\"\")=>e===\"/\"?\"\":e,UA=(e,t)=>e[0]===\"~\"?e.slice(1):A3(t)+e,VA=(e=\"\",t)=>qA(jx(A3(e)),jx(t)),jx=e=>{try{return decodeURI(e)}catch{return e}},P3={hook:zA,searchHook:MA,parser:yA,base:\"\",ssrPath:void 0,ssrSearch:void 0,hrefs:e=>e},L3=C.createContext(P3),Ou=()=>C.useContext(L3),E3={},T3=C.createContext(E3),R3=()=>C.useContext(T3),e0=e=>{const[t,n]=e.hook(e);return[VA(e.base,t),C3((r,i)=>n(UA(r,e.base),i))]},Zf=()=>e0(Ou()),K2=(e,t,n,r)=>{const{pattern:i,keys:s}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||\"*\",r),a=i.exec(n)||[],[o,...c]=a;return o!==void 0?[!0,(()=>{const d=s!==!1?Object.fromEntries(s.map((m,g)=>[m,c[g]])):a.groups;let f={...c};return d&&Object.assign(f,d),f})(),...r?[o]:[]]:[!1,null]},$A=e=>K2(Ou().parser,e,Zf()[0]),WA=({children:e,...t})=>{var f,m;const n=Ou(),r=t.hook?P3:n;let i=r;const[s,a]=((f=t.ssrPath)==null?void 0:f.split(\"?\"))??[];a&&(t.ssrSearch=a,t.ssrPath=s),t.hrefs=t.hrefs??((m=t.hook)==null?void 0:m.hrefs);let o=C.useRef({}),c=o.current,d=c;for(let g in r){const p=g===\"base\"?r[g]+(t[g]||\"\"):t[g]||r[g];c===d&&p!==d[g]&&(o.current=d={...d}),d[g]=p,p!==r[g]&&(i=d)}return C.createElement(L3.Provider,{value:i,children:e})},_x=({children:e,component:t},n)=>t?C.createElement(t,{params:n}):typeof e==\"function\"?e(n):e,HA=e=>{let t=C.useRef(E3),n=t.current;for(const r in e)e[r]!==n[r]&&(n=e);return Object.keys(e).length===0&&(n=e),t.current=n},yc=({path:e,nest:t,match:n,...r})=>{const i=Ou(),[s]=e0(i),[a,o,c]=n??K2(i.parser,e,s,t),d=HA({...R3(),...o});if(!a)return null;const f=c?C.createElement(WA,{base:c},_x(r,d)):_x(r,d);return C.createElement(T3.Provider,{value:d,children:f})};C.forwardRef((e,t)=>{const n=Ou(),[r,i]=e0(n),{to:s=\"\",href:a=s,onClick:o,asChild:c,children:d,className:f,replace:m,state:g,...p}=e,S=C3(j=>{j.ctrlKey||j.metaKey||j.altKey||j.shiftKey||j.button!==0||(o==null||o(j),j.defaultPrevented||(j.preventDefault(),i(a,e)))}),y=n.hrefs(a[0]===\"~\"?a.slice(1):n.base+a,n);return c&&C.isValidElement(d)?C.cloneElement(d,{onClick:S,href:y}):C.createElement(\"a\",{...p,onClick:S,href:y,className:f!=null&&f.call?f(r===a):f,children:d,ref:t})});const I3=e=>Array.isArray(e)?e.flatMap(t=>I3(t&&t.type===C.Fragment?t.props.children:t)):[e],GA=({children:e,location:t})=>{const n=Ou(),[r]=e0(n);for(const i of I3(e)){let s=0;if(C.isValidElement(i)&&(s=K2(n.parser,i.props.path,t||r,i.props.nest))[0])return C.cloneElement(i,{match:s})}return null};var Fu=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Cl=typeof window>\"u\"||\"Deno\"in globalThis;function Ci(){}function KA(e,t){return typeof e==\"function\"?e(t):e}function iv(e){return typeof e==\"number\"&&e>=0&&e!==1/0}function O3(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Kc(e,t){return typeof e==\"function\"?e(t):e}function ns(e,t){return typeof e==\"function\"?e(t):e}function Cx(e,t){const{type:n=\"all\",exact:r,fetchStatus:i,predicate:s,queryKey:a,stale:o}=e;if(a){if(r){if(t.queryHash!==Z2(a,t.options))return!1}else if(!wf(t.queryKey,a))return!1}if(n!==\"all\"){const c=t.isActive();if(n===\"active\"&&!c||n===\"inactive\"&&c)return!1}return!(typeof o==\"boolean\"&&t.isStale()!==o||i&&i!==t.state.fetchStatus||s&&!s(t))}function kx(e,t){const{exact:n,status:r,predicate:i,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(n){if(kl(t.options.mutationKey)!==kl(s))return!1}else if(!wf(t.options.mutationKey,s))return!1}return!(r&&t.state.status!==r||i&&!i(t))}function Z2(e,t){return((t==null?void 0:t.queryKeyHashFn)||kl)(e)}function kl(e){return JSON.stringify(e,(t,n)=>sv(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function wf(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e==\"object\"&&typeof t==\"object\"?!Object.keys(t).some(n=>!wf(e[n],t[n])):!1}function F3(e,t){if(e===t)return e;const n=Ax(e)&&Ax(t);if(n||sv(e)&&sv(t)){const r=n?e:Object.keys(e),i=r.length,s=n?t:Object.keys(t),a=s.length,o=n?[]:{};let c=0;for(let d=0;d<a;d++){const f=n?d:s[d];(!n&&r.includes(f)||n)&&e[f]===void 0&&t[f]===void 0?(o[f]=void 0,c++):(o[f]=F3(e[f],t[f]),o[f]===e[f]&&e[f]!==void 0&&c++)}return i===a&&c===i?e:o}return t}function vm(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function Ax(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function sv(e){if(!Px(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Px(n)||!n.hasOwnProperty(\"isPrototypeOf\")||Object.getPrototypeOf(e)!==Object.prototype)}function Px(e){return Object.prototype.toString.call(e)===\"[object Object]\"}function ZA(e){return new Promise(t=>{setTimeout(t,e)})}function av(e,t,n){return typeof n.structuralSharing==\"function\"?n.structuralSharing(e,t):n.structuralSharing!==!1?F3(e,t):t}function QA(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function YA(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Q2=Symbol();function M3(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Q2?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var cl,ro,ru,Jw,XA=(Jw=class extends Fu{constructor(){super();lt(this,cl);lt(this,ro);lt(this,ru);Ze(this,ru,t=>{if(!Cl&&window.addEventListener){const n=()=>t();return window.addEventListener(\"visibilitychange\",n,!1),()=>{window.removeEventListener(\"visibilitychange\",n)}}})}onSubscribe(){ne(this,ro)||this.setEventListener(ne(this,ru))}onUnsubscribe(){var t;this.hasListeners()||((t=ne(this,ro))==null||t.call(this),Ze(this,ro,void 0))}setEventListener(t){var n;Ze(this,ru,t),(n=ne(this,ro))==null||n.call(this),Ze(this,ro,t(r=>{typeof r==\"boolean\"?this.setFocused(r):this.onFocus()}))}setFocused(t){ne(this,cl)!==t&&(Ze(this,cl,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof ne(this,cl)==\"boolean\"?ne(this,cl):((t=globalThis.document)==null?void 0:t.visibilityState)!==\"hidden\"}},cl=new WeakMap,ro=new WeakMap,ru=new WeakMap,Jw),Y2=new XA,iu,io,su,eb,JA=(eb=class extends Fu{constructor(){super();lt(this,iu,!0);lt(this,io);lt(this,su);Ze(this,su,t=>{if(!Cl&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener(\"online\",n,!1),window.addEventListener(\"offline\",r,!1),()=>{window.removeEventListener(\"online\",n),window.removeEventListener(\"offline\",r)}}})}onSubscribe(){ne(this,io)||this.setEventListener(ne(this,su))}onUnsubscribe(){var t;this.hasListeners()||((t=ne(this,io))==null||t.call(this),Ze(this,io,void 0))}setEventListener(t){var n;Ze(this,su,t),(n=ne(this,io))==null||n.call(this),Ze(this,io,t(this.setOnline.bind(this)))}setOnline(t){ne(this,iu)!==t&&(Ze(this,iu,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return ne(this,iu)}},iu=new WeakMap,io=new WeakMap,su=new WeakMap,eb),ym=new JA;function ov(){let e,t;const n=new Promise((i,s)=>{e=i,t=s});n.status=\"pending\",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:\"fulfilled\",value:i}),e(i)},n.reject=i=>{r({status:\"rejected\",reason:i}),t(i)},n}function eP(e){return Math.min(1e3*2**e,3e4)}function D3(e){return(e??\"online\")===\"online\"?ym.isOnline():!0}var B3=class extends Error{constructor(e){super(\"CancelledError\"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function z1(e){return e instanceof B3}function z3(e){let t=!1,n=0,r=!1,i;const s=ov(),a=y=>{var j;r||(g(new B3(y)),(j=e.abort)==null||j.call(e))},o=()=>{t=!0},c=()=>{t=!1},d=()=>Y2.isFocused()&&(e.networkMode===\"always\"||ym.isOnline())&&e.canRun(),f=()=>D3(e.networkMode)&&e.canRun(),m=y=>{var j;r||(r=!0,(j=e.onSuccess)==null||j.call(e,y),i==null||i(),s.resolve(y))},g=y=>{var j;r||(r=!0,(j=e.onError)==null||j.call(e,y),i==null||i(),s.reject(y))},p=()=>new Promise(y=>{var j;i=x=>{(r||d())&&y(x)},(j=e.onPause)==null||j.call(e)}).then(()=>{var y;i=void 0,r||(y=e.onContinue)==null||y.call(e)}),S=()=>{if(r)return;let y;const j=n===0?e.initialPromise:void 0;try{y=j??e.fn()}catch(x){y=Promise.reject(x)}Promise.resolve(y).then(m).catch(x=>{var H;if(r)return;const b=e.retry??(Cl?0:3),N=e.retryDelay??eP,k=typeof N==\"function\"?N(n,x):N,P=b===!0||typeof b==\"number\"&&n<b||typeof b==\"function\"&&b(n,x);if(t||!P){g(x);return}n++,(H=e.onFail)==null||H.call(e,n,x),ZA(k).then(()=>d()?void 0:p()).then(()=>{t?g(x):S()})})};return{promise:s,cancel:a,continue:()=>(i==null||i(),s),cancelRetry:o,continueRetry:c,canStart:f,start:()=>(f()?S():p().then(S),s)}}function tP(){let e=[],t=0,n=o=>{o()},r=o=>{o()},i=o=>setTimeout(o,0);const s=o=>{t?e.push(o):i(()=>{n(o)})},a=()=>{const o=e;e=[],o.length&&i(()=>{r(()=>{o.forEach(c=>{n(c)})})})};return{batch:o=>{let c;t++;try{c=o()}finally{t--,t||a()}return c},batchCalls:o=>(...c)=>{s(()=>{o(...c)})},schedule:s,setNotifyFunction:o=>{n=o},setBatchNotifyFunction:o=>{r=o},setScheduler:o=>{i=o}}}var Gn=tP(),ul,tb,q3=(tb=class{constructor(){lt(this,ul)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),iv(this.gcTime)&&Ze(this,ul,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Cl?1/0:5*60*1e3))}clearGcTimeout(){ne(this,ul)&&(clearTimeout(ne(this,ul)),Ze(this,ul,void 0))}},ul=new WeakMap,tb),au,ou,_i,xr,zf,dl,Ji,ua,nb,nP=(nb=class extends q3{constructor(t){super();lt(this,Ji);lt(this,au);lt(this,ou);lt(this,_i);lt(this,xr);lt(this,zf);lt(this,dl);Ze(this,dl,!1),Ze(this,zf,t.defaultOptions),this.setOptions(t.options),this.observers=[],Ze(this,_i,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Ze(this,au,rP(this.options)),this.state=t.state??ne(this,au),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=ne(this,xr))==null?void 0:t.promise}setOptions(t){this.options={...ne(this,zf),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus===\"idle\"&&ne(this,_i).remove(this)}setData(t,n){const r=av(this.state.data,t,this.options);return At(this,Ji,ua).call(this,{data:r,type:\"success\",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){At(this,Ji,ua).call(this,{type:\"setState\",state:t,setStateOptions:n})}cancel(t){var r,i;const n=(r=ne(this,xr))==null?void 0:r.promise;return(i=ne(this,xr))==null||i.cancel(t),n?n.then(Ci).catch(Ci):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ne(this,au))}isActive(){return this.observers.some(t=>ns(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Q2||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!O3(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=ne(this,xr))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=ne(this,xr))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),ne(this,_i).notify({type:\"observerAdded\",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(ne(this,xr)&&(ne(this,dl)?ne(this,xr).cancel({revert:!0}):ne(this,xr).cancelRetry()),this.scheduleGc()),ne(this,_i).notify({type:\"observerRemoved\",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||At(this,Ji,ua).call(this,{type:\"invalidate\"})}fetch(t,n){var c,d,f;if(this.state.fetchStatus!==\"idle\"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(ne(this,xr))return ne(this,xr).continueRetry(),ne(this,xr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const m=this.observers.find(g=>g.options.queryFn);m&&this.setOptions(m.options)}const r=new AbortController,i=m=>{Object.defineProperty(m,\"signal\",{enumerable:!0,get:()=>(Ze(this,dl,!0),r.signal)})},s=()=>{const m=M3(this.options,n),g={queryKey:this.queryKey,meta:this.meta};return i(g),Ze(this,dl,!1),this.options.persister?this.options.persister(m,g,this):m(g)},a={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:s};i(a),(c=this.options.behavior)==null||c.onFetch(a,this),Ze(this,ou,this.state),(this.state.fetchStatus===\"idle\"||this.state.fetchMeta!==((d=a.fetchOptions)==null?void 0:d.meta))&&At(this,Ji,ua).call(this,{type:\"fetch\",meta:(f=a.fetchOptions)==null?void 0:f.meta});const o=m=>{var g,p,S,y;z1(m)&&m.silent||At(this,Ji,ua).call(this,{type:\"error\",error:m}),z1(m)||((p=(g=ne(this,_i).config).onError)==null||p.call(g,m,this),(y=(S=ne(this,_i).config).onSettled)==null||y.call(S,this.state.data,m,this)),this.scheduleGc()};return Ze(this,xr,z3({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:m=>{var g,p,S,y;if(m===void 0){o(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(j){o(j);return}(p=(g=ne(this,_i).config).onSuccess)==null||p.call(g,m,this),(y=(S=ne(this,_i).config).onSettled)==null||y.call(S,m,this.state.error,this),this.scheduleGc()},onError:o,onFail:(m,g)=>{At(this,Ji,ua).call(this,{type:\"failed\",failureCount:m,error:g})},onPause:()=>{At(this,Ji,ua).call(this,{type:\"pause\"})},onContinue:()=>{At(this,Ji,ua).call(this,{type:\"continue\"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),ne(this,xr).start()}},au=new WeakMap,ou=new WeakMap,_i=new WeakMap,xr=new WeakMap,zf=new WeakMap,dl=new WeakMap,Ji=new WeakSet,ua=function(t){const n=r=>{switch(t.type){case\"failed\":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case\"pause\":return{...r,fetchStatus:\"paused\"};case\"continue\":return{...r,fetchStatus:\"fetching\"};case\"fetch\":return{...r,...U3(r.data,this.options),fetchMeta:t.meta??null};case\"success\":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:\"success\",...!t.manual&&{fetchStatus:\"idle\",fetchFailureCount:0,fetchFailureReason:null}};case\"error\":const i=t.error;return z1(i)&&i.revert&&ne(this,ou)?{...ne(this,ou),fetchStatus:\"idle\"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:\"idle\",status:\"error\"};case\"invalidate\":return{...r,isInvalidated:!0};case\"setState\":return{...r,...t.state}}};this.state=n(this.state),Gn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),ne(this,_i).notify({query:this,type:\"updated\",action:t})})},nb);function U3(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:D3(t.networkMode)?\"fetching\":\"paused\",...e===void 0&&{error:null,status:\"pending\"}}}function rP(e){const t=typeof e.initialData==\"function\"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt==\"function\"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?\"success\":\"pending\",fetchStatus:\"idle\"}}var Ps,rb,iP=(rb=class extends Fu{constructor(t={}){super();lt(this,Ps);this.config=t,Ze(this,Ps,new Map)}build(t,n,r){const i=n.queryKey,s=n.queryHash??Z2(i,n);let a=this.get(s);return a||(a=new nP({cache:this,queryKey:i,queryHash:s,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(i)}),this.add(a)),a}add(t){ne(this,Ps).has(t.queryHash)||(ne(this,Ps).set(t.queryHash,t),this.notify({type:\"added\",query:t}))}remove(t){const n=ne(this,Ps).get(t.queryHash);n&&(t.destroy(),n===t&&ne(this,Ps).delete(t.queryHash),this.notify({type:\"removed\",query:t}))}clear(){Gn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return ne(this,Ps).get(t)}getAll(){return[...ne(this,Ps).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Cx(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>Cx(t,r)):n}notify(t){Gn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Gn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Gn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ps=new WeakMap,rb),Ls,Ar,fl,Es,Qa,ib,sP=(ib=class extends q3{constructor(t){super();lt(this,Es);lt(this,Ls);lt(this,Ar);lt(this,fl);this.mutationId=t.mutationId,Ze(this,Ar,t.mutationCache),Ze(this,Ls,[]),this.state=t.state||V3(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){ne(this,Ls).includes(t)||(ne(this,Ls).push(t),this.clearGcTimeout(),ne(this,Ar).notify({type:\"observerAdded\",mutation:this,observer:t}))}removeObserver(t){Ze(this,Ls,ne(this,Ls).filter(n=>n!==t)),this.scheduleGc(),ne(this,Ar).notify({type:\"observerRemoved\",mutation:this,observer:t})}optionalRemove(){ne(this,Ls).length||(this.state.status===\"pending\"?this.scheduleGc():ne(this,Ar).remove(this))}continue(){var t;return((t=ne(this,fl))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,s,a,o,c,d,f,m,g,p,S,y,j,x,b,N,k,P,H,R;Ze(this,fl,z3({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error(\"No mutationFn found\")),onFail:(T,G)=>{At(this,Es,Qa).call(this,{type:\"failed\",failureCount:T,error:G})},onPause:()=>{At(this,Es,Qa).call(this,{type:\"pause\"})},onContinue:()=>{At(this,Es,Qa).call(this,{type:\"continue\"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ne(this,Ar).canRun(this)}));const n=this.state.status===\"pending\",r=!ne(this,fl).canStart();try{if(!n){At(this,Es,Qa).call(this,{type:\"pending\",variables:t,isPaused:r}),await((s=(i=ne(this,Ar).config).onMutate)==null?void 0:s.call(i,t,this));const G=await((o=(a=this.options).onMutate)==null?void 0:o.call(a,t));G!==this.state.context&&At(this,Es,Qa).call(this,{type:\"pending\",context:G,variables:t,isPaused:r})}const T=await ne(this,fl).start();return await((d=(c=ne(this,Ar).config).onSuccess)==null?void 0:d.call(c,T,t,this.state.context,this)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,T,t,this.state.context)),await((p=(g=ne(this,Ar).config).onSettled)==null?void 0:p.call(g,T,null,this.state.variables,this.state.context,this)),await((y=(S=this.options).onSettled)==null?void 0:y.call(S,T,null,t,this.state.context)),At(this,Es,Qa).call(this,{type:\"success\",data:T}),T}catch(T){try{throw await((x=(j=ne(this,Ar).config).onError)==null?void 0:x.call(j,T,t,this.state.context,this)),await((N=(b=this.options).onError)==null?void 0:N.call(b,T,t,this.state.context)),await((P=(k=ne(this,Ar).config).onSettled)==null?void 0:P.call(k,void 0,T,this.state.variables,this.state.context,this)),await((R=(H=this.options).onSettled)==null?void 0:R.call(H,void 0,T,t,this.state.context)),T}finally{At(this,Es,Qa).call(this,{type:\"error\",error:T})}}finally{ne(this,Ar).runNext(this)}}},Ls=new WeakMap,Ar=new WeakMap,fl=new WeakMap,Es=new WeakSet,Qa=function(t){const n=r=>{switch(t.type){case\"failed\":return{...r,failureCount:t.failureCount,failureReason:t.error};case\"pause\":return{...r,isPaused:!0};case\"continue\":return{...r,isPaused:!1};case\"pending\":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:\"pending\",variables:t.variables,submittedAt:Date.now()};case\"success\":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:\"success\",isPaused:!1};case\"error\":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:\"error\"}}};this.state=n(this.state),Gn.batch(()=>{ne(this,Ls).forEach(r=>{r.onMutationUpdate(t)}),ne(this,Ar).notify({mutation:this,type:\"updated\",action:t})})},ib);function V3(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:\"idle\",variables:void 0,submittedAt:0}}var ri,qf,sb,aP=(sb=class extends Fu{constructor(t={}){super();lt(this,ri);lt(this,qf);this.config=t,Ze(this,ri,new Map),Ze(this,qf,Date.now())}build(t,n,r){const i=new sP({mutationCache:this,mutationId:++Kh(this,qf)._,options:t.defaultMutationOptions(n),state:r});return this.add(i),i}add(t){const n=fp(t),r=ne(this,ri).get(n)??[];r.push(t),ne(this,ri).set(n,r),this.notify({type:\"added\",mutation:t})}remove(t){var r;const n=fp(t);if(ne(this,ri).has(n)){const i=(r=ne(this,ri).get(n))==null?void 0:r.filter(s=>s!==t);i&&(i.length===0?ne(this,ri).delete(n):ne(this,ri).set(n,i))}this.notify({type:\"removed\",mutation:t})}canRun(t){var r;const n=(r=ne(this,ri).get(fp(t)))==null?void 0:r.find(i=>i.state.status===\"pending\");return!n||n===t}runNext(t){var r;const n=(r=ne(this,ri).get(fp(t)))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){Gn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...ne(this,ri).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(r=>kx(n,r))}findAll(t={}){return this.getAll().filter(n=>kx(t,n))}notify(t){Gn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Gn.batch(()=>Promise.all(t.map(n=>n.continue().catch(Ci))))}},ri=new WeakMap,qf=new WeakMap,sb);function fp(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function Lx(e){return{onFetch:(t,n)=>{var f,m,g,p,S;const r=t.options,i=(g=(m=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:m.fetchMore)==null?void 0:g.direction,s=((p=t.state.data)==null?void 0:p.pages)||[],a=((S=t.state.data)==null?void 0:S.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const d=async()=>{let y=!1;const j=N=>{Object.defineProperty(N,\"signal\",{enumerable:!0,get:()=>(t.signal.aborted?y=!0:t.signal.addEventListener(\"abort\",()=>{y=!0}),t.signal)})},x=M3(t.options,t.fetchOptions),b=async(N,k,P)=>{if(y)return Promise.reject();if(k==null&&N.pages.length)return Promise.resolve(N);const H={queryKey:t.queryKey,pageParam:k,direction:P?\"backward\":\"forward\",meta:t.options.meta};j(H);const R=await x(H),{maxPages:T}=t.options,G=P?YA:QA;return{pages:G(N.pages,R,T),pageParams:G(N.pageParams,k,T)}};if(i&&s.length){const N=i===\"backward\",k=N?oP:Ex,P={pages:s,pageParams:a},H=k(r,P);o=await b(P,H,N)}else{const N=e??s.length;do{const k=c===0?a[0]??r.initialPageParam:Ex(r,o);if(c>0&&k==null)break;o=await b(o,k),c++}while(c<N)}return o};t.options.persister?t.fetchFn=()=>{var y,j;return(j=(y=t.options).persister)==null?void 0:j.call(y,d,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=d}}}function Ex(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function oP(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var _n,so,ao,lu,cu,oo,uu,du,ab,lP=(ab=class{constructor(e={}){lt(this,_n);lt(this,so);lt(this,ao);lt(this,lu);lt(this,cu);lt(this,oo);lt(this,uu);lt(this,du);Ze(this,_n,e.queryCache||new iP),Ze(this,so,e.mutationCache||new aP),Ze(this,ao,e.defaultOptions||{}),Ze(this,lu,new Map),Ze(this,cu,new Map),Ze(this,oo,0)}mount(){Kh(this,oo)._++,ne(this,oo)===1&&(Ze(this,uu,Y2.subscribe(async e=>{e&&(await this.resumePausedMutations(),ne(this,_n).onFocus())})),Ze(this,du,ym.subscribe(async e=>{e&&(await this.resumePausedMutations(),ne(this,_n).onOnline())})))}unmount(){var e,t;Kh(this,oo)._--,ne(this,oo)===0&&((e=ne(this,uu))==null||e.call(this),Ze(this,uu,void 0),(t=ne(this,du))==null||t.call(this),Ze(this,du,void 0))}isFetching(e){return ne(this,_n).findAll({...e,fetchStatus:\"fetching\"}).length}isMutating(e){return ne(this,so).findAll({...e,status:\"pending\"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=ne(this,_n).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=ne(this,_n).build(this,n);return e.revalidateIfStale&&r.isStaleByTime(Kc(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return ne(this,_n).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),i=ne(this,_n).get(r.queryHash),s=i==null?void 0:i.state.data,a=KA(t,s);if(a!==void 0)return ne(this,_n).build(this,r).setData(a,{...n,manual:!0})}setQueriesData(e,t,n){return Gn.batch(()=>ne(this,_n).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=ne(this,_n).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=ne(this,_n);Gn.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=ne(this,_n),r={type:\"active\",...e};return Gn.batch(()=>(n.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=Gn.batch(()=>ne(this,_n).findAll(e).map(i=>i.cancel(n)));return Promise.all(r).then(Ci).catch(Ci)}invalidateQueries(e={},t={}){return Gn.batch(()=>{if(ne(this,_n).findAll(e).forEach(r=>{r.invalidate()}),e.refetchType===\"none\")return Promise.resolve();const n={...e,type:e.refetchType??e.type??\"active\"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},r=Gn.batch(()=>ne(this,_n).findAll(e).filter(i=>!i.isDisabled()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(Ci)),i.state.fetchStatus===\"paused\"?Promise.resolve():s}));return Promise.all(r).then(Ci)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=ne(this,_n).build(this,t);return n.isStaleByTime(Kc(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ci).catch(Ci)}fetchInfiniteQuery(e){return e.behavior=Lx(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ci).catch(Ci)}ensureInfiniteQueryData(e){return e.behavior=Lx(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return ym.isOnline()?ne(this,so).resumePausedMutations():Promise.resolve()}getQueryCache(){return ne(this,_n)}getMutationCache(){return ne(this,so)}getDefaultOptions(){return ne(this,ao)}setDefaultOptions(e){Ze(this,ao,e)}setQueryDefaults(e,t){ne(this,lu).set(kl(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...ne(this,lu).values()];let n={};return t.forEach(r=>{wf(e,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(e,t){ne(this,cu).set(kl(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...ne(this,cu).values()];let n={};return t.forEach(r=>{wf(e,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...ne(this,ao).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Z2(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!==\"always\"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode=\"offlineFirst\"),t.enabled!==!0&&t.queryFn===Q2&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...ne(this,ao).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){ne(this,_n).clear(),ne(this,so).clear()}},_n=new WeakMap,so=new WeakMap,ao=new WeakMap,lu=new WeakMap,cu=new WeakMap,oo=new WeakMap,uu=new WeakMap,du=new WeakMap,ab),$r,Mt,Uf,Pr,hl,fu,lo,Ts,Vf,hu,pu,pl,ml,co,mu,Kt,Fd,lv,cv,uv,dv,fv,hv,pv,$3,ob,cP=(ob=class extends Fu{constructor(t,n){super();lt(this,Kt);lt(this,$r);lt(this,Mt);lt(this,Uf);lt(this,Pr);lt(this,hl);lt(this,fu);lt(this,lo);lt(this,Ts);lt(this,Vf);lt(this,hu);lt(this,pu);lt(this,pl);lt(this,ml);lt(this,co);lt(this,mu,new Set);this.options=n,Ze(this,$r,t),Ze(this,Ts,null),Ze(this,lo,ov()),this.options.experimental_prefetchInRender||ne(this,lo).reject(new Error(\"experimental_prefetchInRender feature flag is not enabled\")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(ne(this,Mt).addObserver(this),Tx(ne(this,Mt),this.options)?At(this,Kt,Fd).call(this):this.updateResult(),At(this,Kt,dv).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return mv(ne(this,Mt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return mv(ne(this,Mt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,At(this,Kt,fv).call(this),At(this,Kt,hv).call(this),ne(this,Mt).removeObserver(this)}setOptions(t,n){const r=this.options,i=ne(this,Mt);if(this.options=ne(this,$r).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!=\"boolean\"&&typeof this.options.enabled!=\"function\"&&typeof ns(this.options.enabled,ne(this,Mt))!=\"boolean\")throw new Error(\"Expected enabled to be a boolean or a callback that returns a boolean\");At(this,Kt,pv).call(this),ne(this,Mt).setOptions(this.options),r._defaulted&&!vm(this.options,r)&&ne(this,$r).getQueryCache().notify({type:\"observerOptionsUpdated\",query:ne(this,Mt),observer:this});const s=this.hasListeners();s&&Rx(ne(this,Mt),i,this.options,r)&&At(this,Kt,Fd).call(this),this.updateResult(n),s&&(ne(this,Mt)!==i||ns(this.options.enabled,ne(this,Mt))!==ns(r.enabled,ne(this,Mt))||Kc(this.options.staleTime,ne(this,Mt))!==Kc(r.staleTime,ne(this,Mt)))&&At(this,Kt,lv).call(this);const a=At(this,Kt,cv).call(this);s&&(ne(this,Mt)!==i||ns(this.options.enabled,ne(this,Mt))!==ns(r.enabled,ne(this,Mt))||a!==ne(this,co))&&At(this,Kt,uv).call(this,a)}getOptimisticResult(t){const n=ne(this,$r).getQueryCache().build(ne(this,$r),t),r=this.createResult(n,t);return dP(this,r)&&(Ze(this,Pr,r),Ze(this,fu,this.options),Ze(this,hl,ne(this,Mt).state)),r}getCurrentResult(){return ne(this,Pr)}trackResult(t,n){const r={};return Object.keys(t).forEach(i=>{Object.defineProperty(r,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),n==null||n(i),t[i])})}),r}trackProp(t){ne(this,mu).add(t)}getCurrentQuery(){return ne(this,Mt)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=ne(this,$r).defaultQueryOptions(t),r=ne(this,$r).getQueryCache().build(ne(this,$r),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return At(this,Kt,Fd).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),ne(this,Pr)))}createResult(t,n){var T;const r=ne(this,Mt),i=this.options,s=ne(this,Pr),a=ne(this,hl),o=ne(this,fu),d=t!==r?t.state:ne(this,Uf),{state:f}=t;let m={...f},g=!1,p;if(n._optimisticResults){const G=this.hasListeners(),Y=!G&&Tx(t,n),O=G&&Rx(t,r,n,i);(Y||O)&&(m={...m,...U3(f.data,t.options)}),n._optimisticResults===\"isRestoring\"&&(m.fetchStatus=\"idle\")}let{error:S,errorUpdatedAt:y,status:j}=m;if(n.select&&m.data!==void 0)if(s&&m.data===(a==null?void 0:a.data)&&n.select===ne(this,Vf))p=ne(this,hu);else try{Ze(this,Vf,n.select),p=n.select(m.data),p=av(s==null?void 0:s.data,p,n),Ze(this,hu,p),Ze(this,Ts,null)}catch(G){Ze(this,Ts,G)}else p=m.data;if(n.placeholderData!==void 0&&p===void 0&&j===\"pending\"){let G;if(s!=null&&s.isPlaceholderData&&n.placeholderData===(o==null?void 0:o.placeholderData))G=s.data;else if(G=typeof n.placeholderData==\"function\"?n.placeholderData((T=ne(this,pu))==null?void 0:T.state.data,ne(this,pu)):n.placeholderData,n.select&&G!==void 0)try{G=n.select(G),Ze(this,Ts,null)}catch(Y){Ze(this,Ts,Y)}G!==void 0&&(j=\"success\",p=av(s==null?void 0:s.data,G,n),g=!0)}ne(this,Ts)&&(S=ne(this,Ts),p=ne(this,hu),y=Date.now(),j=\"error\");const x=m.fetchStatus===\"fetching\",b=j===\"pending\",N=j===\"error\",k=b&&x,P=p!==void 0,R={status:j,fetchStatus:m.fetchStatus,isPending:b,isSuccess:j===\"success\",isError:N,isInitialLoading:k,isLoading:k,data:p,dataUpdatedAt:m.dataUpdatedAt,error:S,errorUpdatedAt:y,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>d.dataUpdateCount||m.errorUpdateCount>d.errorUpdateCount,isFetching:x,isRefetching:x&&!b,isLoadingError:N&&!P,isPaused:m.fetchStatus===\"paused\",isPlaceholderData:g,isRefetchError:N&&P,isStale:X2(t,n),refetch:this.refetch,promise:ne(this,lo)};if(this.options.experimental_prefetchInRender){const G=E=>{R.status===\"error\"?E.reject(R.error):R.data!==void 0&&E.resolve(R.data)},Y=()=>{const E=Ze(this,lo,R.promise=ov());G(E)},O=ne(this,lo);switch(O.status){case\"pending\":t.queryHash===r.queryHash&&G(O);break;case\"fulfilled\":(R.status===\"error\"||R.data!==O.value)&&Y();break;case\"rejected\":(R.status!==\"error\"||R.error!==O.reason)&&Y();break}}return R}updateResult(t){const n=ne(this,Pr),r=this.createResult(ne(this,Mt),this.options);if(Ze(this,hl,ne(this,Mt).state),Ze(this,fu,this.options),ne(this,hl).data!==void 0&&Ze(this,pu,ne(this,Mt)),vm(r,n))return;Ze(this,Pr,r);const i={},s=()=>{if(!n)return!0;const{notifyOnChangeProps:a}=this.options,o=typeof a==\"function\"?a():a;if(o===\"all\"||!o&&!ne(this,mu).size)return!0;const c=new Set(o??ne(this,mu));return this.options.throwOnError&&c.add(\"error\"),Object.keys(ne(this,Pr)).some(d=>{const f=d;return ne(this,Pr)[f]!==n[f]&&c.has(f)})};(t==null?void 0:t.listeners)!==!1&&s()&&(i.listeners=!0),At(this,Kt,$3).call(this,{...i,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&At(this,Kt,dv).call(this)}},$r=new WeakMap,Mt=new WeakMap,Uf=new WeakMap,Pr=new WeakMap,hl=new WeakMap,fu=new WeakMap,lo=new WeakMap,Ts=new WeakMap,Vf=new WeakMap,hu=new WeakMap,pu=new WeakMap,pl=new WeakMap,ml=new WeakMap,co=new WeakMap,mu=new WeakMap,Kt=new WeakSet,Fd=function(t){At(this,Kt,pv).call(this);let n=ne(this,Mt).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(Ci)),n},lv=function(){At(this,Kt,fv).call(this);const t=Kc(this.options.staleTime,ne(this,Mt));if(Cl||ne(this,Pr).isStale||!iv(t))return;const r=O3(ne(this,Pr).dataUpdatedAt,t)+1;Ze(this,pl,setTimeout(()=>{ne(this,Pr).isStale||this.updateResult()},r))},cv=function(){return(typeof this.options.refetchInterval==\"function\"?this.options.refetchInterval(ne(this,Mt)):this.options.refetchInterval)??!1},uv=function(t){At(this,Kt,hv).call(this),Ze(this,co,t),!(Cl||ns(this.options.enabled,ne(this,Mt))===!1||!iv(ne(this,co))||ne(this,co)===0)&&Ze(this,ml,setInterval(()=>{(this.options.refetchIntervalInBackground||Y2.isFocused())&&At(this,Kt,Fd).call(this)},ne(this,co)))},dv=function(){At(this,Kt,lv).call(this),At(this,Kt,uv).call(this,At(this,Kt,cv).call(this))},fv=function(){ne(this,pl)&&(clearTimeout(ne(this,pl)),Ze(this,pl,void 0))},hv=function(){ne(this,ml)&&(clearInterval(ne(this,ml)),Ze(this,ml,void 0))},pv=function(){const t=ne(this,$r).getQueryCache().build(ne(this,$r),this.options);if(t===ne(this,Mt))return;const n=ne(this,Mt);Ze(this,Mt,t),Ze(this,Uf,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},$3=function(t){Gn.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(ne(this,Pr))}),ne(this,$r).getQueryCache().notify({query:ne(this,Mt),type:\"observerResultsUpdated\"})})},ob);function uP(e,t){return ns(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status===\"error\"&&t.retryOnMount===!1)}function Tx(e,t){return uP(e,t)||e.state.data!==void 0&&mv(e,t,t.refetchOnMount)}function mv(e,t,n){if(ns(t.enabled,e)!==!1){const r=typeof n==\"function\"?n(e):n;return r===\"always\"||r!==!1&&X2(e,t)}return!1}function Rx(e,t,n,r){return(e!==t||ns(r.enabled,e)===!1)&&(!n.suspense||e.state.status!==\"error\")&&X2(e,n)}function X2(e,t){return ns(t.enabled,e)!==!1&&e.isStaleByTime(Kc(t.staleTime,e))}function dP(e,t){return!vm(e.getCurrentResult(),t)}var uo,fo,Wr,ma,xa,Fp,gv,lb,fP=(lb=class extends Fu{constructor(n,r){super();lt(this,xa);lt(this,uo);lt(this,fo);lt(this,Wr);lt(this,ma);Ze(this,uo,n),this.setOptions(r),this.bindMethods(),At(this,xa,Fp).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const r=this.options;this.options=ne(this,uo).defaultMutationOptions(n),vm(this.options,r)||ne(this,uo).getMutationCache().notify({type:\"observerOptionsUpdated\",mutation:ne(this,Wr),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&kl(r.mutationKey)!==kl(this.options.mutationKey)?this.reset():((i=ne(this,Wr))==null?void 0:i.state.status)===\"pending\"&&ne(this,Wr).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=ne(this,Wr))==null||n.removeObserver(this)}onMutationUpdate(n){At(this,xa,Fp).call(this),At(this,xa,gv).call(this,n)}getCurrentResult(){return ne(this,fo)}reset(){var n;(n=ne(this,Wr))==null||n.removeObserver(this),Ze(this,Wr,void 0),At(this,xa,Fp).call(this),At(this,xa,gv).call(this)}mutate(n,r){var i;return Ze(this,ma,r),(i=ne(this,Wr))==null||i.removeObserver(this),Ze(this,Wr,ne(this,uo).getMutationCache().build(ne(this,uo),this.options)),ne(this,Wr).addObserver(this),ne(this,Wr).execute(n)}},uo=new WeakMap,fo=new WeakMap,Wr=new WeakMap,ma=new WeakMap,xa=new WeakSet,Fp=function(){var r;const n=((r=ne(this,Wr))==null?void 0:r.state)??V3();Ze(this,fo,{...n,isPending:n.status===\"pending\",isSuccess:n.status===\"success\",isError:n.status===\"error\",isIdle:n.status===\"idle\",mutate:this.mutate,reset:this.reset})},gv=function(n){Gn.batch(()=>{var r,i,s,a,o,c,d,f;if(ne(this,ma)&&this.hasListeners()){const m=ne(this,fo).variables,g=ne(this,fo).context;(n==null?void 0:n.type)===\"success\"?((i=(r=ne(this,ma)).onSuccess)==null||i.call(r,n.data,m,g),(a=(s=ne(this,ma)).onSettled)==null||a.call(s,n.data,null,m,g)):(n==null?void 0:n.type)===\"error\"&&((c=(o=ne(this,ma)).onError)==null||c.call(o,n.error,m,g),(f=(d=ne(this,ma)).onSettled)==null||f.call(d,void 0,n.error,m,g))}this.listeners.forEach(m=>{m(ne(this,fo))})})},lb),W3=C.createContext(void 0),Fi=e=>{const t=C.useContext(W3);if(!t)throw new Error(\"No QueryClient set, use QueryClientProvider to set one\");return t},hP=({client:e,children:t})=>(C.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),l.jsx(W3.Provider,{value:e,children:t})),H3=C.createContext(!1),pP=()=>C.useContext(H3);H3.Provider;function mP(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var gP=C.createContext(mP()),vP=()=>C.useContext(gP);function G3(e,t){return typeof e==\"function\"?e(...t):!!e}function vv(){}var yP=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},xP=e=>{C.useEffect(()=>{e.clearReset()},[e])},wP=({result:e,errorResetBoundary:t,throwOnError:n,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&G3(n,[e.error,r]),bP=e=>{e.suspense&&(e.staleTime===void 0&&(e.staleTime=1e3),typeof e.gcTime==\"number\"&&(e.gcTime=Math.max(e.gcTime,1e3)))},NP=(e,t)=>e.isLoading&&e.isFetching&&!t,SP=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Ix=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function jP(e,t,n){var f,m,g,p,S;const r=Fi(),i=pP(),s=vP(),a=r.defaultQueryOptions(e);(m=(f=r.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||m.call(f,a),a._optimisticResults=i?\"isRestoring\":\"optimistic\",bP(a),yP(a,s),xP(s);const o=!r.getQueryCache().get(a.queryHash),[c]=C.useState(()=>new t(r,a)),d=c.getOptimisticResult(a);if(C.useSyncExternalStore(C.useCallback(y=>{const j=i?vv:c.subscribe(Gn.batchCalls(y));return c.updateResult(),j},[c,i]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),C.useEffect(()=>{c.setOptions(a,{listeners:!1})},[a,c]),SP(a,d))throw Ix(a,c,s);if(wP({result:d,errorResetBoundary:s,throwOnError:a.throwOnError,query:r.getQueryCache().get(a.queryHash)}))throw d.error;if((p=(g=r.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||p.call(g,a,d),a.experimental_prefetchInRender&&!Cl&&NP(d,i)){const y=o?Ix(a,c,s):(S=r.getQueryCache().get(a.queryHash))==null?void 0:S.promise;y==null||y.catch(vv).finally(()=>{c.updateResult()})}return a.notifyOnChangeProps?d:c.trackResult(d)}function Oi(e,t){return jP(e,cP)}function lr(e,t){const n=Fi(),[r]=C.useState(()=>new fP(n,e));C.useEffect(()=>{r.setOptions(e)},[r,e]);const i=C.useSyncExternalStore(C.useCallback(a=>r.subscribe(Gn.batchCalls(a)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=C.useCallback((a,o)=>{r.mutate(a,o).catch(vv)},[r]);if(i.error&&G3(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}async function K3(e){if(!e.ok){const t=await e.text()||e.statusText;throw new Error(`${e.status}: ${t}`)}}async function cn(e,t,n){const r=await fetch(t,{method:e,headers:n?{\"Content-Type\":\"application/json\"}:{},body:n?JSON.stringify(n):void 0,credentials:\"include\"});return await K3(r),r}const _P=({on401:e})=>async({queryKey:t})=>{const n=await fetch(t.join(\"/\"),{credentials:\"include\"});return e===\"returnNull\"&&n.status===401?null:(await K3(n),await n.json())},CP=new lP({defaultOptions:{queries:{queryFn:_P({on401:\"throw\"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),kP=1,AP=1e6;let q1=0;function PP(){return q1=(q1+1)%Number.MAX_SAFE_INTEGER,q1.toString()}const U1=new Map,Ox=e=>{if(U1.has(e))return;const t=setTimeout(()=>{U1.delete(e),Qd({type:\"REMOVE_TOAST\",toastId:e})},AP);U1.set(e,t)},LP=(e,t)=>{switch(t.type){case\"ADD_TOAST\":return{...e,toasts:[t.toast,...e.toasts].slice(0,kP)};case\"UPDATE_TOAST\":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case\"DISMISS_TOAST\":{const{toastId:n}=t;return n?Ox(n):e.toasts.forEach(r=>{Ox(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case\"REMOVE_TOAST\":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Mp=[];let Dp={toasts:[]};function Qd(e){Dp=LP(Dp,e),Mp.forEach(t=>{t(Dp)})}function EP({...e}){const t=PP(),n=i=>Qd({type:\"UPDATE_TOAST\",toast:{...i,id:t}}),r=()=>Qd({type:\"DISMISS_TOAST\",toastId:t});return Qd({type:\"ADD_TOAST\",toast:{...e,id:t,open:!0,onOpenChange:i=>{i||r()}}}),{id:t,dismiss:r,update:n}}function mi(){const[e,t]=C.useState(Dp);return C.useEffect(()=>(Mp.push(t),()=>{const n=Mp.indexOf(t);n>-1&&Mp.splice(n,1)}),[e]),{...e,toast:EP,dismiss:n=>Qd({type:\"DISMISS_TOAST\",toastId:n})}}function ot(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function Fx(e,t){if(typeof e==\"function\")return e(t);e!=null&&(e.current=t)}function Z3(...e){return t=>{let n=!1;const r=e.map(i=>{const s=Fx(i,t);return!n&&typeof s==\"function\"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s==\"function\"?s():Fx(e[i],null)}}}}function en(...e){return C.useCallback(Z3(...e),e)}function TP(e,t){const n=C.createContext(t),r=s=>{const{children:a,...o}=s,c=C.useMemo(()=>o,Object.values(o));return l.jsx(n.Provider,{value:c,children:a})};r.displayName=e+\"Provider\";function i(s){const a=C.useContext(n);if(a)return a;if(t!==void 0)return t;throw new Error(`\\`${s}\\` must be used within \\`${e}\\``)}return[r,i]}function hs(e,t=[]){let n=[];function r(s,a){const o=C.createContext(a),c=n.length;n=[...n,a];const d=m=>{var x;const{scope:g,children:p,...S}=m,y=((x=g==null?void 0:g[e])==null?void 0:x[c])||o,j=C.useMemo(()=>S,Object.values(S));return l.jsx(y.Provider,{value:j,children:p})};d.displayName=s+\"Provider\";function f(m,g){var y;const p=((y=g==null?void 0:g[e])==null?void 0:y[c])||o,S=C.useContext(p);if(S)return S;if(a!==void 0)return a;throw new Error(`\\`${m}\\` must be used within \\`${s}\\``)}return[d,f]}const i=()=>{const s=n.map(a=>C.createContext(a));return function(o){const c=(o==null?void 0:o[e])||s;return C.useMemo(()=>({[`__scope${e}`]:{...o,[e]:c}}),[o,c])}};return i.scopeName=e,[r,RP(i,...t)]}function RP(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((o,{useScope:c,scopeName:d})=>{const m=c(s)[`__scope${d}`];return{...o,...m}},{});return C.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}function ju(e){const t=IP(e),n=C.forwardRef((r,i)=>{const{children:s,...a}=r,o=C.Children.toArray(s),c=o.find(FP);if(c){const d=c.props.children,f=o.map(m=>m===c?C.Children.count(d)>1?C.Children.only(null):C.isValidElement(d)?d.props.children:null:m);return l.jsx(t,{...a,ref:i,children:C.isValidElement(d)?C.cloneElement(d,void 0,f):null})}return l.jsx(t,{...a,ref:i,children:s})});return n.displayName=`${e}.Slot`,n}var Q3=ju(\"Slot\");function IP(e){const t=C.forwardRef((n,r)=>{const{children:i,...s}=n;if(C.isValidElement(i)){const a=DP(i),o=MP(s,i.props);return i.type!==C.Fragment&&(o.ref=r?Z3(r,a):a),C.cloneElement(i,o)}return C.Children.count(i)>1?C.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Y3=Symbol(\"radix.slottable\");function OP(e){const t=({children:n})=>l.jsx(l.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=Y3,t}function FP(e){return C.isValidElement(e)&&typeof e.type==\"function\"&&\"__radixId\"in e.type&&e.type.__radixId===Y3}function MP(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...o)=>{s(...o),i(...o)}:i&&(n[r]=i):r===\"style\"?n[r]={...i,...s}:r===\"className\"&&(n[r]=[i,s].filter(Boolean).join(\" \"))}return{...e,...n}}function DP(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,\"ref\"))==null?void 0:r.get,n=t&&\"isReactWarning\"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,\"ref\"))==null?void 0:i.get,n=t&&\"isReactWarning\"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function J2(e){const t=e+\"CollectionProvider\",[n,r]=hs(t),[i,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=y=>{const{scope:j,children:x}=y,b=St.useRef(null),N=St.useRef(new Map).current;return l.jsx(i,{scope:j,itemMap:N,collectionRef:b,children:x})};a.displayName=t;const o=e+\"CollectionSlot\",c=ju(o),d=St.forwardRef((y,j)=>{const{scope:x,children:b}=y,N=s(o,x),k=en(j,N.collectionRef);return l.jsx(c,{ref:k,children:b})});d.displayName=o;const f=e+\"CollectionItemSlot\",m=\"data-radix-collection-item\",g=ju(f),p=St.forwardRef((y,j)=>{const{scope:x,children:b,...N}=y,k=St.useRef(null),P=en(j,k),H=s(f,x);return St.useEffect(()=>(H.itemMap.set(k,{ref:k,...N}),()=>void H.itemMap.delete(k))),l.jsx(g,{[m]:\"\",ref:P,children:b})});p.displayName=f;function S(y){const j=s(e+\"CollectionConsumer\",y);return St.useCallback(()=>{const b=j.collectionRef.current;if(!b)return[];const N=Array.from(b.querySelectorAll(`[${m}]`));return Array.from(j.itemMap.values()).sort((H,R)=>N.indexOf(H.ref.current)-N.indexOf(R.ref.current))},[j.collectionRef,j.itemMap])}return[{Provider:a,Slot:d,ItemSlot:p},S,r]}var BP=[\"a\",\"button\",\"div\",\"form\",\"h2\",\"h3\",\"img\",\"input\",\"label\",\"li\",\"nav\",\"ol\",\"p\",\"span\",\"svg\",\"ul\"],bt=BP.reduce((e,t)=>{const n=ju(`Primitive.${t}`),r=C.forwardRef((i,s)=>{const{asChild:a,...o}=i,c=a?n:t;return typeof window<\"u\"&&(window[Symbol.for(\"radix-ui\")]=!0),l.jsx(c,{...o,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function X3(e,t){e&&zl.flushSync(()=>e.dispatchEvent(t))}function Ir(e){const t=C.useRef(e);return C.useEffect(()=>{t.current=e}),C.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function zP(e,t=globalThis==null?void 0:globalThis.document){const n=Ir(e);C.useEffect(()=>{const r=i=>{i.key===\"Escape\"&&n(i)};return t.addEventListener(\"keydown\",r,{capture:!0}),()=>t.removeEventListener(\"keydown\",r,{capture:!0})},[n,t])}var qP=\"DismissableLayer\",yv=\"dismissableLayer.update\",UP=\"dismissableLayer.pointerDownOutside\",VP=\"dismissableLayer.focusOutside\",Mx,J3=C.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Qf=C.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:o,...c}=e,d=C.useContext(J3),[f,m]=C.useState(null),g=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=C.useState({}),S=en(t,R=>m(R)),y=Array.from(d.layers),[j]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),x=y.indexOf(j),b=f?y.indexOf(f):-1,N=d.layersWithOutsidePointerEventsDisabled.size>0,k=b>=x,P=WP(R=>{const T=R.target,G=[...d.branches].some(Y=>Y.contains(T));!k||G||(i==null||i(R),a==null||a(R),R.defaultPrevented||o==null||o())},g),H=HP(R=>{const T=R.target;[...d.branches].some(Y=>Y.contains(T))||(s==null||s(R),a==null||a(R),R.defaultPrevented||o==null||o())},g);return zP(R=>{b===d.layers.size-1&&(r==null||r(R),!R.defaultPrevented&&o&&(R.preventDefault(),o()))},g),C.useEffect(()=>{if(f)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(Mx=g.body.style.pointerEvents,g.body.style.pointerEvents=\"none\"),d.layersWithOutsidePointerEventsDisabled.add(f)),d.layers.add(f),Dx(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=Mx)}},[f,g,n,d]),C.useEffect(()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),Dx())},[f,d]),C.useEffect(()=>{const R=()=>p({});return document.addEventListener(yv,R),()=>document.removeEventListener(yv,R)},[]),l.jsx(bt.div,{...c,ref:S,style:{pointerEvents:N?k?\"auto\":\"none\":void 0,...e.style},onFocusCapture:ot(e.onFocusCapture,H.onFocusCapture),onBlurCapture:ot(e.onBlurCapture,H.onBlurCapture),onPointerDownCapture:ot(e.onPointerDownCapture,P.onPointerDownCapture)})});Qf.displayName=qP;var $P=\"DismissableLayerBranch\",eN=C.forwardRef((e,t)=>{const n=C.useContext(J3),r=C.useRef(null),i=en(t,r);return C.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),l.jsx(bt.div,{...e,ref:i})});eN.displayName=$P;function WP(e,t=globalThis==null?void 0:globalThis.document){const n=Ir(e),r=C.useRef(!1),i=C.useRef(()=>{});return C.useEffect(()=>{const s=o=>{if(o.target&&!r.current){let c=function(){tN(UP,n,d,{discrete:!0})};const d={originalEvent:o};o.pointerType===\"touch\"?(t.removeEventListener(\"click\",i.current),i.current=c,t.addEventListener(\"click\",i.current,{once:!0})):c()}else t.removeEventListener(\"click\",i.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener(\"pointerdown\",s)},0);return()=>{window.clearTimeout(a),t.removeEventListener(\"pointerdown\",s),t.removeEventListener(\"click\",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function HP(e,t=globalThis==null?void 0:globalThis.document){const n=Ir(e),r=C.useRef(!1);return C.useEffect(()=>{const i=s=>{s.target&&!r.current&&tN(VP,n,{originalEvent:s},{discrete:!1})};return t.addEventListener(\"focusin\",i),()=>t.removeEventListener(\"focusin\",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Dx(){const e=new CustomEvent(yv);document.dispatchEvent(e)}function tN(e,t,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?X3(i,s):i.dispatchEvent(s)}var GP=Qf,KP=eN,Zn=globalThis!=null&&globalThis.document?C.useLayoutEffect:()=>{},ZP=\"Portal\",t0=C.forwardRef((e,t)=>{var o;const{container:n,...r}=e,[i,s]=C.useState(!1);Zn(()=>s(!0),[]);const a=n||i&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return a?vA.createPortal(l.jsx(bt.div,{...r,ref:t}),a):null});t0.displayName=ZP;function QP(e,t){return C.useReducer((n,r)=>t[n][r]??n,e)}var Bo=e=>{const{present:t,children:n}=e,r=YP(t),i=typeof n==\"function\"?n({present:r.isPresent}):C.Children.only(n),s=en(r.ref,XP(i));return typeof n==\"function\"||r.isPresent?C.cloneElement(i,{ref:s}):null};Bo.displayName=\"Presence\";function YP(e){const[t,n]=C.useState(),r=C.useRef({}),i=C.useRef(e),s=C.useRef(\"none\"),a=e?\"mounted\":\"unmounted\",[o,c]=QP(a,{mounted:{UNMOUNT:\"unmounted\",ANIMATION_OUT:\"unmountSuspended\"},unmountSuspended:{MOUNT:\"mounted\",ANIMATION_END:\"unmounted\"},unmounted:{MOUNT:\"mounted\"}});return C.useEffect(()=>{const d=hp(r.current);s.current=o===\"mounted\"?d:\"none\"},[o]),Zn(()=>{const d=r.current,f=i.current;if(f!==e){const g=s.current,p=hp(d);e?c(\"MOUNT\"):p===\"none\"||(d==null?void 0:d.display)===\"none\"?c(\"UNMOUNT\"):c(f&&g!==p?\"ANIMATION_OUT\":\"UNMOUNT\"),i.current=e}},[e,c]),Zn(()=>{if(t){let d;const f=t.ownerDocument.defaultView??window,m=p=>{const y=hp(r.current).includes(p.animationName);if(p.target===t&&y&&(c(\"ANIMATION_END\"),!i.current)){const j=t.style.animationFillMode;t.style.animationFillMode=\"forwards\",d=f.setTimeout(()=>{t.style.animationFillMode===\"forwards\"&&(t.style.animationFillMode=j)})}},g=p=>{p.target===t&&(s.current=hp(r.current))};return t.addEventListener(\"animationstart\",g),t.addEventListener(\"animationcancel\",m),t.addEventListener(\"animationend\",m),()=>{f.clearTimeout(d),t.removeEventListener(\"animationstart\",g),t.removeEventListener(\"animationcancel\",m),t.removeEventListener(\"animationend\",m)}}else c(\"ANIMATION_END\")},[t,c]),{isPresent:[\"mounted\",\"unmountSuspended\"].includes(o),ref:C.useCallback(d=>{d&&(r.current=getComputedStyle(d)),n(d)},[])}}function hp(e){return(e==null?void 0:e.animationName)||\"none\"}function XP(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,\"ref\"))==null?void 0:r.get,n=t&&\"isReactWarning\"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,\"ref\"))==null?void 0:i.get,n=t&&\"isReactWarning\"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Al({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,i]=JP({defaultProp:t,onChange:n}),s=e!==void 0,a=s?e:r,o=Ir(n),c=C.useCallback(d=>{if(s){const m=typeof d==\"function\"?d(e):d;m!==e&&o(m)}else i(d)},[s,e,i,o]);return[a,c]}function JP({defaultProp:e,onChange:t}){const n=C.useState(e),[r]=n,i=C.useRef(r),s=Ir(t);return C.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}var eL=\"VisuallyHidden\",Yf=C.forwardRef((e,t)=>l.jsx(bt.span,{...e,ref:t,style:{position:\"absolute\",border:0,width:1,height:1,padding:0,margin:-1,overflow:\"hidden\",clip:\"rect(0, 0, 0, 0)\",whiteSpace:\"nowrap\",wordWrap:\"normal\",...e.style}}));Yf.displayName=eL;var tL=Yf,ey=\"ToastProvider\",[ty,nL,rL]=J2(\"Toast\"),[nN,lF]=hs(\"Toast\",[rL]),[iL,n0]=nN(ey),rN=e=>{const{__scopeToast:t,label:n=\"Notification\",duration:r=5e3,swipeDirection:i=\"right\",swipeThreshold:s=50,children:a}=e,[o,c]=C.useState(null),[d,f]=C.useState(0),m=C.useRef(!1),g=C.useRef(!1);return n.trim()||console.error(`Invalid prop \\`label\\` supplied to \\`${ey}\\`. Expected non-empty \\`string\\`.`),l.jsx(ty.Provider,{scope:t,children:l.jsx(iL,{scope:t,label:n,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:d,viewport:o,onViewportChange:c,onToastAdd:C.useCallback(()=>f(p=>p+1),[]),onToastRemove:C.useCallback(()=>f(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:g,children:a})})};rN.displayName=ey;var iN=\"ToastViewport\",sL=[\"F8\"],xv=\"toast.viewportPause\",wv=\"toast.viewportResume\",sN=C.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=sL,label:i=\"Notifications ({hotkey})\",...s}=e,a=n0(iN,n),o=nL(n),c=C.useRef(null),d=C.useRef(null),f=C.useRef(null),m=C.useRef(null),g=en(t,m,a.onViewportChange),p=r.join(\"+\").replace(/Key/g,\"\").replace(/Digit/g,\"\"),S=a.toastCount>0;C.useEffect(()=>{const j=x=>{var N;r.length!==0&&r.every(k=>x[k]||x.code===k)&&((N=m.current)==null||N.focus())};return document.addEventListener(\"keydown\",j),()=>document.removeEventListener(\"keydown\",j)},[r]),C.useEffect(()=>{const j=c.current,x=m.current;if(S&&j&&x){const b=()=>{if(!a.isClosePausedRef.current){const H=new CustomEvent(xv);x.dispatchEvent(H),a.isClosePausedRef.current=!0}},N=()=>{if(a.isClosePausedRef.current){const H=new CustomEvent(wv);x.dispatchEvent(H),a.isClosePausedRef.current=!1}},k=H=>{!j.contains(H.relatedTarget)&&N()},P=()=>{j.contains(document.activeElement)||N()};return j.addEventListener(\"focusin\",b),j.addEventListener(\"focusout\",k),j.addEventListener(\"pointermove\",b),j.addEventListener(\"pointerleave\",P),window.addEventListener(\"blur\",b),window.addEventListener(\"focus\",N),()=>{j.removeEventListener(\"focusin\",b),j.removeEventListener(\"focusout\",k),j.removeEventListener(\"pointermove\",b),j.removeEventListener(\"pointerleave\",P),window.removeEventListener(\"blur\",b),window.removeEventListener(\"focus\",N)}}},[S,a.isClosePausedRef]);const y=C.useCallback(({tabbingDirection:j})=>{const b=o().map(N=>{const k=N.ref.current,P=[k,...yL(k)];return j===\"forwards\"?P:P.reverse()});return(j===\"forwards\"?b.reverse():b).flat()},[o]);return C.useEffect(()=>{const j=m.current;if(j){const x=b=>{var P,H,R;const N=b.altKey||b.ctrlKey||b.metaKey;if(b.key===\"Tab\"&&!N){const T=document.activeElement,G=b.shiftKey;if(b.target===j&&G){(P=d.current)==null||P.focus();return}const E=y({tabbingDirection:G?\"backwards\":\"forwards\"}),W=E.findIndex(z=>z===T);V1(E.slice(W+1))?b.preventDefault():G?(H=d.current)==null||H.focus():(R=f.current)==null||R.focus()}};return j.addEventListener(\"keydown\",x),()=>j.removeEventListener(\"keydown\",x)}},[o,y]),l.jsxs(KP,{ref:c,role:\"region\",\"aria-label\":i.replace(\"{hotkey}\",p),tabIndex:-1,style:{pointerEvents:S?void 0:\"none\"},children:[S&&l.jsx(bv,{ref:d,onFocusFromOutsideViewport:()=>{const j=y({tabbingDirection:\"forwards\"});V1(j)}}),l.jsx(ty.Slot,{scope:n,children:l.jsx(bt.ol,{tabIndex:-1,...s,ref:g})}),S&&l.jsx(bv,{ref:f,onFocusFromOutsideViewport:()=>{const j=y({tabbingDirection:\"backwards\"});V1(j)}})]})});sN.displayName=iN;var aN=\"ToastFocusProxy\",bv=C.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=e,s=n0(aN,n);return l.jsx(Yf,{\"aria-hidden\":!0,tabIndex:0,...i,ref:t,style:{position:\"fixed\"},onFocus:a=>{var d;const o=a.relatedTarget;!((d=s.viewport)!=null&&d.contains(o))&&r()}})});bv.displayName=aN;var r0=\"Toast\",aL=\"toast.swipeStart\",oL=\"toast.swipeMove\",lL=\"toast.swipeCancel\",cL=\"toast.swipeEnd\",oN=C.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:s,...a}=e,[o=!0,c]=Al({prop:r,defaultProp:i,onChange:s});return l.jsx(Bo,{present:n||o,children:l.jsx(fL,{open:o,...a,ref:t,onClose:()=>c(!1),onPause:Ir(e.onPause),onResume:Ir(e.onResume),onSwipeStart:ot(e.onSwipeStart,d=>{d.currentTarget.setAttribute(\"data-swipe\",\"start\")}),onSwipeMove:ot(e.onSwipeMove,d=>{const{x:f,y:m}=d.detail.delta;d.currentTarget.setAttribute(\"data-swipe\",\"move\"),d.currentTarget.style.setProperty(\"--radix-toast-swipe-move-x\",`${f}px`),d.currentTarget.style.setProperty(\"--radix-toast-swipe-move-y\",`${m}px`)}),onSwipeCancel:ot(e.onSwipeCancel,d=>{d.currentTarget.setAttribute(\"data-swipe\",\"cancel\"),d.currentTarget.style.removeProperty(\"--radix-toast-swipe-move-x\"),d.currentTarget.style.removeProperty(\"--radix-toast-swipe-move-y\"),d.currentTarget.style.removeProperty(\"--radix-toast-swipe-end-x\"),d.currentTarget.style.removeProperty(\"--radix-toast-swipe-end-y\")}),onSwipeEnd:ot(e.onSwipeEnd,d=>{const{x:f,y:m}=d.detail.delta;d.currentTarget.setAttribute(\"data-swipe\",\"end\"),d.currentTarget.style.removeProperty(\"--radix-toast-swipe-move-x\"),d.currentTarget.style.removeProperty(\"--radix-toast-swipe-move-y\"),d.currentTarget.style.setProperty(\"--radix-toast-swipe-end-x\",`${f}px`),d.currentTarget.style.setProperty(\"--radix-toast-swipe-end-y\",`${m}px`),c(!1)})})})});oN.displayName=r0;var[uL,dL]=nN(r0,{onClose(){}}),fL=C.forwardRef((e,t)=>{const{__scopeToast:n,type:r=\"foreground\",duration:i,open:s,onClose:a,onEscapeKeyDown:o,onPause:c,onResume:d,onSwipeStart:f,onSwipeMove:m,onSwipeCancel:g,onSwipeEnd:p,...S}=e,y=n0(r0,n),[j,x]=C.useState(null),b=en(t,z=>x(z)),N=C.useRef(null),k=C.useRef(null),P=i||y.duration,H=C.useRef(0),R=C.useRef(P),T=C.useRef(0),{onToastAdd:G,onToastRemove:Y}=y,O=Ir(()=>{var le;(j==null?void 0:j.contains(document.activeElement))&&((le=y.viewport)==null||le.focus()),a()}),E=C.useCallback(z=>{!z||z===1/0||(window.clearTimeout(T.current),H.current=new Date().getTime(),T.current=window.setTimeout(O,z))},[O]);C.useEffect(()=>{const z=y.viewport;if(z){const le=()=>{E(R.current),d==null||d()},J=()=>{const fe=new Date().getTime()-H.current;R.current=R.current-fe,window.clearTimeout(T.current),c==null||c()};return z.addEventListener(xv,J),z.addEventListener(wv,le),()=>{z.removeEventListener(xv,J),z.removeEventListener(wv,le)}}},[y.viewport,P,c,d,E]),C.useEffect(()=>{s&&!y.isClosePausedRef.current&&E(P)},[s,P,y.isClosePausedRef,E]),C.useEffect(()=>(G(),()=>Y()),[G,Y]);const W=C.useMemo(()=>j?pN(j):null,[j]);return y.viewport?l.jsxs(l.Fragment,{children:[W&&l.jsx(hL,{__scopeToast:n,role:\"status\",\"aria-live\":r===\"foreground\"?\"assertive\":\"polite\",\"aria-atomic\":!0,children:W}),l.jsx(uL,{scope:n,onClose:O,children:zl.createPortal(l.jsx(ty.ItemSlot,{scope:n,children:l.jsx(GP,{asChild:!0,onEscapeKeyDown:ot(o,()=>{y.isFocusedToastEscapeKeyDownRef.current||O(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:l.jsx(bt.li,{role:\"status\",\"aria-live\":\"off\",\"aria-atomic\":!0,tabIndex:0,\"data-state\":s?\"open\":\"closed\",\"data-swipe-direction\":y.swipeDirection,...S,ref:b,style:{userSelect:\"none\",touchAction:\"none\",...e.style},onKeyDown:ot(e.onKeyDown,z=>{z.key===\"Escape\"&&(o==null||o(z.nativeEvent),z.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:ot(e.onPointerDown,z=>{z.button===0&&(N.current={x:z.clientX,y:z.clientY})}),onPointerMove:ot(e.onPointerMove,z=>{if(!N.current)return;const le=z.clientX-N.current.x,J=z.clientY-N.current.y,fe=!!k.current,V=[\"left\",\"right\"].includes(y.swipeDirection),ee=[\"left\",\"up\"].includes(y.swipeDirection)?Math.min:Math.max,ue=V?ee(0,le):0,je=V?0:ee(0,J),I=z.pointerType===\"touch\"?10:2,$={x:ue,y:je},Z={originalEvent:z,delta:$};fe?(k.current=$,pp(oL,m,Z,{discrete:!1})):Bx($,y.swipeDirection,I)?(k.current=$,pp(aL,f,Z,{discrete:!1}),z.target.setPointerCapture(z.pointerId)):(Math.abs(le)>I||Math.abs(J)>I)&&(N.current=null)}),onPointerUp:ot(e.onPointerUp,z=>{const le=k.current,J=z.target;if(J.hasPointerCapture(z.pointerId)&&J.releasePointerCapture(z.pointerId),k.current=null,N.current=null,le){const fe=z.currentTarget,V={originalEvent:z,delta:le};Bx(le,y.swipeDirection,y.swipeThreshold)?pp(cL,p,V,{discrete:!0}):pp(lL,g,V,{discrete:!0}),fe.addEventListener(\"click\",ee=>ee.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),hL=e=>{const{__scopeToast:t,children:n,...r}=e,i=n0(r0,t),[s,a]=C.useState(!1),[o,c]=C.useState(!1);return gL(()=>a(!0)),C.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),o?null:l.jsx(t0,{asChild:!0,children:l.jsx(Yf,{...r,children:s&&l.jsxs(l.Fragment,{children:[i.label,\" \",n]})})})},pL=\"ToastTitle\",lN=C.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return l.jsx(bt.div,{...r,ref:t})});lN.displayName=pL;var mL=\"ToastDescription\",cN=C.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return l.jsx(bt.div,{...r,ref:t})});cN.displayName=mL;var uN=\"ToastAction\",dN=C.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?l.jsx(hN,{altText:n,asChild:!0,children:l.jsx(ny,{...r,ref:t})}):(console.error(`Invalid prop \\`altText\\` supplied to \\`${uN}\\`. Expected non-empty \\`string\\`.`),null)});dN.displayName=uN;var fN=\"ToastClose\",ny=C.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,i=dL(fN,n);return l.jsx(hN,{asChild:!0,children:l.jsx(bt.button,{type:\"button\",...r,ref:t,onClick:ot(e.onClick,i.onClose)})})});ny.displayName=fN;var hN=C.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...i}=e;return l.jsx(bt.div,{\"data-radix-toast-announce-exclude\":\"\",\"data-radix-toast-announce-alt\":r||void 0,...i,ref:t})});function pN(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),vL(r)){const i=r.ariaHidden||r.hidden||r.style.display===\"none\",s=r.dataset.radixToastAnnounceExclude===\"\";if(!i)if(s){const a=r.dataset.radixToastAnnounceAlt;a&&t.push(a)}else t.push(...pN(r))}}),t}function pp(e,t,n,{discrete:r}){const i=n.originalEvent.currentTarget,s=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?X3(i,s):i.dispatchEvent(s)}var Bx=(e,t,n=0)=>{const r=Math.abs(e.x),i=Math.abs(e.y),s=r>i;return t===\"left\"||t===\"right\"?s&&r>n:!s&&i>n};function gL(e=()=>{}){const t=Ir(e);Zn(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function vL(e){return e.nodeType===e.ELEMENT_NODE}function yL(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName===\"INPUT\"&&r.type===\"hidden\";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function V1(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var xL=rN,mN=sN,gN=oN,vN=lN,yN=cN,xN=dN,wN=ny;function bN(e){var t,n,r=\"\";if(typeof e==\"string\"||typeof e==\"number\")r+=e;else if(typeof e==\"object\")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=bN(e[t]))&&(r&&(r+=\" \"),r+=n)}else for(n in e)e[n]&&(r&&(r+=\" \"),r+=n);return r}function NN(){for(var e,t,n=0,r=\"\",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=bN(e))&&(r&&(r+=\" \"),r+=t);return r}const zx=e=>typeof e==\"boolean\"?`${e}`:e===0?\"0\":e,qx=NN,i0=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return qx(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=t,a=Object.keys(i).map(d=>{const f=n==null?void 0:n[d],m=s==null?void 0:s[d];if(f===null)return null;const g=zx(f)||zx(m);return i[d][g]}),o=n&&Object.entries(n).reduce((d,f)=>{let[m,g]=f;return g===void 0||(d[m]=g),d},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((d,f)=>{let{class:m,className:g,...p}=f;return Object.entries(p).every(S=>{let[y,j]=S;return Array.isArray(j)?j.includes({...s,...o}[y]):{...s,...o}[y]===j})?[...d,m,g]:d},[]);return qx(e,a,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const wL=e=>e.replace(/([a-z0-9])([A-Z])/g,\"$1-$2\").toLowerCase(),SN=(...e)=>e.filter((t,n,r)=>!!t&&r.indexOf(t)===n).join(\" \");/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */var bL={xmlns:\"http://www.w3.org/2000/svg\",width:24,height:24,viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:2,strokeLinecap:\"round\",strokeLinejoin:\"round\"};/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const NL=C.forwardRef(({color:e=\"currentColor\",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i=\"\",children:s,iconNode:a,...o},c)=>C.createElement(\"svg\",{ref:c,...bL,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:SN(\"lucide\",i),...o},[...a.map(([d,f])=>C.createElement(d,f)),...Array.isArray(s)?s:[s]]));/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const La=(e,t)=>{const n=C.forwardRef(({className:r,...i},s)=>C.createElement(NL,{ref:s,iconNode:t,className:SN(`lucide-${wL(e)}`,r),...i}));return n.displayName=`${e}`,n};/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const jN=La(\"Check\",[[\"path\",{d:\"M20 6 9 17l-5-5\",key:\"1gmf2c\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const _N=La(\"ChevronDown\",[[\"path\",{d:\"m6 9 6 6 6-6\",key:\"qrunsl\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const SL=La(\"ChevronUp\",[[\"path\",{d:\"m18 15-6-6-6 6\",key:\"153udz\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const CN=La(\"CircleAlert\",[[\"circle\",{cx:\"12\",cy:\"12\",r:\"10\",key:\"1mglay\"}],[\"line\",{x1:\"12\",x2:\"12\",y1:\"8\",y2:\"12\",key:\"1pkeuh\"}],[\"line\",{x1:\"12\",x2:\"12.01\",y1:\"16\",y2:\"16\",key:\"4dfq90\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const kN=La(\"CircleCheckBig\",[[\"path\",{d:\"M21.801 10A10 10 0 1 1 17 3.335\",key:\"yps3ct\"}],[\"path\",{d:\"m9 11 3 3L22 4\",key:\"1pflzl\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const jL=La(\"Circle\",[[\"circle\",{cx:\"12\",cy:\"12\",r:\"10\",key:\"1mglay\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const Ux=La(\"EyeOff\",[[\"path\",{d:\"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49\",key:\"ct8e1f\"}],[\"path\",{d:\"M14.084 14.158a3 3 0 0 1-4.242-4.242\",key:\"151rxh\"}],[\"path\",{d:\"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143\",key:\"13bj9a\"}],[\"path\",{d:\"m2 2 20 20\",key:\"1ooewy\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const Vx=La(\"Eye\",[[\"path\",{d:\"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0\",key:\"1nclc0\"}],[\"circle\",{cx:\"12\",cy:\"12\",r:\"3\",key:\"1v7zrd\"}]]);/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */const AN=La(\"X\",[[\"path\",{d:\"M18 6 6 18\",key:\"1bl5f8\"}],[\"path\",{d:\"m6 6 12 12\",key:\"d8bk6v\"}]]),ry=\"-\",_L=e=>{const t=kL(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:a=>{const o=a.split(ry);return o[0]===\"\"&&o.length!==1&&o.shift(),PN(o,t)||CL(a)},getConflictingClassGroupIds:(a,o)=>{const c=n[a]||[];return o&&r[a]?[...c,...r[a]]:c}}},PN=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),i=r?PN(e.slice(1),r):void 0;if(i)return i;if(t.validators.length===0)return;const s=e.join(ry);return(a=t.validators.find(({validator:o})=>o(s)))==null?void 0:a.classGroupId},$x=/^\\[(.+)\\]$/,CL=e=>{if($x.test(e)){const t=$x.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(\":\"));if(n)return\"arbitrary..\"+n}},kL=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return PL(Object.entries(e.classGroups),n).forEach(([s,a])=>{Nv(a,r,s,t)}),r},Nv=(e,t,n,r)=>{e.forEach(i=>{if(typeof i==\"string\"){const s=i===\"\"?t:Wx(t,i);s.classGroupId=n;return}if(typeof i==\"function\"){if(AL(i)){Nv(i(r),t,n,r);return}t.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,a])=>{Nv(a,Wx(t,s),n,r)})})},Wx=(e,t)=>{let n=e;return t.split(ry).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},AL=e=>e.isThemeGetter,PL=(e,t)=>t?e.map(([n,r])=>{const i=r.map(s=>typeof s==\"string\"?t+s:typeof s==\"object\"?Object.fromEntries(Object.entries(s).map(([a,o])=>[t+a,o])):s);return[n,i]}):e,LL=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const i=(s,a)=>{n.set(s,a),t++,t>e&&(t=0,r=n,n=new Map)};return{get(s){let a=n.get(s);if(a!==void 0)return a;if((a=r.get(s))!==void 0)return i(s,a),a},set(s,a){n.has(s)?n.set(s,a):i(s,a)}}},LN=\"!\",EL=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,i=t[0],s=t.length,a=o=>{const c=[];let d=0,f=0,m;for(let j=0;j<o.length;j++){let x=o[j];if(d===0){if(x===i&&(r||o.slice(j,j+s)===t)){c.push(o.slice(f,j)),f=j+s;continue}if(x===\"/\"){m=j;continue}}x===\"[\"?d++:x===\"]\"&&d--}const g=c.length===0?o:o.substring(f),p=g.startsWith(LN),S=p?g.substring(1):g,y=m&&m>f?m-f:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:S,maybePostfixModifierPosition:y}};return n?o=>n({className:o,parseClassName:a}):a},TL=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]===\"[\"?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},RL=e=>({cache:LL(e.cacheSize),parseClassName:EL(e),..._L(e)}),IL=/\\s+/,OL=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=t,s=[],a=e.trim().split(IL);let o=\"\";for(let c=a.length-1;c>=0;c-=1){const d=a[c],{modifiers:f,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:p}=n(d);let S=!!p,y=r(S?g.substring(0,p):g);if(!y){if(!S){o=d+(o.length>0?\" \"+o:o);continue}if(y=r(g),!y){o=d+(o.length>0?\" \"+o:o);continue}S=!1}const j=TL(f).join(\":\"),x=m?j+LN:j,b=x+y;if(s.includes(b))continue;s.push(b);const N=i(y,S);for(let k=0;k<N.length;++k){const P=N[k];s.push(x+P)}o=d+(o.length>0?\" \"+o:o)}return o};function FL(){let e=0,t,n,r=\"\";for(;e<arguments.length;)(t=arguments[e++])&&(n=EN(t))&&(r&&(r+=\" \"),r+=n);return r}const EN=e=>{if(typeof e==\"string\")return e;let t,n=\"\";for(let r=0;r<e.length;r++)e[r]&&(t=EN(e[r]))&&(n&&(n+=\" \"),n+=t);return n};function ML(e,...t){let n,r,i,s=a;function a(c){const d=t.reduce((f,m)=>m(f),e());return n=RL(d),r=n.cache.get,i=n.cache.set,s=o,o(c)}function o(c){const d=r(c);if(d)return d;const f=OL(c,n);return i(c,f),f}return function(){return s(FL.apply(null,arguments))}}const dn=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},TN=/^\\[(?:([a-z-]+):)?(.+)\\]$/i,DL=/^\\d+\\/\\d+$/,BL=new Set([\"px\",\"full\",\"screen\"]),zL=/^(\\d+(\\.\\d+)?)?(xs|sm|md|lg|xl)$/,qL=/\\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\\b(calc|min|max|clamp)\\(.+\\)|^0$/,UL=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\\(.+\\)$/,VL=/^(inset_)?-?((\\d+)?\\.?(\\d+)[a-z]+|0)_-?((\\d+)?\\.?(\\d+)[a-z]+|0)/,$L=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\\(.+\\)$/,oa=e=>Zc(e)||BL.has(e)||DL.test(e),Ha=e=>Mu(e,\"length\",XL),Zc=e=>!!e&&!Number.isNaN(Number(e)),$1=e=>Mu(e,\"number\",Zc),Cd=e=>!!e&&Number.isInteger(Number(e)),WL=e=>e.endsWith(\"%\")&&Zc(e.slice(0,-1)),_t=e=>TN.test(e),Ga=e=>zL.test(e),HL=new Set([\"length\",\"size\",\"percentage\"]),GL=e=>Mu(e,HL,RN),KL=e=>Mu(e,\"position\",RN),ZL=new Set([\"image\",\"url\"]),QL=e=>Mu(e,ZL,e8),YL=e=>Mu(e,\"\",JL),kd=()=>!0,Mu=(e,t,n)=>{const r=TN.exec(e);return r?r[1]?typeof t==\"string\"?r[1]===t:t.has(r[1]):n(r[2]):!1},XL=e=>qL.test(e)&&!UL.test(e),RN=()=>!1,JL=e=>VL.test(e),e8=e=>$L.test(e),t8=()=>{const e=dn(\"colors\"),t=dn(\"spacing\"),n=dn(\"blur\"),r=dn(\"brightness\"),i=dn(\"borderColor\"),s=dn(\"borderRadius\"),a=dn(\"borderSpacing\"),o=dn(\"borderWidth\"),c=dn(\"contrast\"),d=dn(\"grayscale\"),f=dn(\"hueRotate\"),m=dn(\"invert\"),g=dn(\"gap\"),p=dn(\"gradientColorStops\"),S=dn(\"gradientColorStopPositions\"),y=dn(\"inset\"),j=dn(\"margin\"),x=dn(\"opacity\"),b=dn(\"padding\"),N=dn(\"saturate\"),k=dn(\"scale\"),P=dn(\"sepia\"),H=dn(\"skew\"),R=dn(\"space\"),T=dn(\"translate\"),G=()=>[\"auto\",\"contain\",\"none\"],Y=()=>[\"auto\",\"hidden\",\"clip\",\"visible\",\"scroll\"],O=()=>[\"auto\",_t,t],E=()=>[_t,t],W=()=>[\"\",oa,Ha],z=()=>[\"auto\",Zc,_t],le=()=>[\"bottom\",\"center\",\"left\",\"left-bottom\",\"left-top\",\"right\",\"right-bottom\",\"right-top\",\"top\"],J=()=>[\"solid\",\"dashed\",\"dotted\",\"double\",\"none\"],fe=()=>[\"normal\",\"multiply\",\"screen\",\"overlay\",\"darken\",\"lighten\",\"color-dodge\",\"color-burn\",\"hard-light\",\"soft-light\",\"difference\",\"exclusion\",\"hue\",\"saturation\",\"color\",\"luminosity\"],V=()=>[\"start\",\"end\",\"center\",\"between\",\"around\",\"evenly\",\"stretch\"],ee=()=>[\"\",\"0\",_t],ue=()=>[\"auto\",\"avoid\",\"all\",\"avoid-page\",\"page\",\"left\",\"right\",\"column\"],je=()=>[Zc,_t];return{cacheSize:500,separator:\":\",theme:{colors:[kd],spacing:[oa,Ha],blur:[\"none\",\"\",Ga,_t],brightness:je(),borderColor:[e],borderRadius:[\"none\",\"\",\"full\",Ga,_t],borderSpacing:E(),borderWidth:W(),contrast:je(),grayscale:ee(),hueRotate:je(),invert:ee(),gap:E(),gradientColorStops:[e],gradientColorStopPositions:[WL,Ha],inset:O(),margin:O(),opacity:je(),padding:E(),saturate:je(),scale:je(),sepia:ee(),skew:je(),space:E(),translate:E()},classGroups:{aspect:[{aspect:[\"auto\",\"square\",\"video\",_t]}],container:[\"container\"],columns:[{columns:[Ga]}],\"break-after\":[{\"break-after\":ue()}],\"break-before\":[{\"break-before\":ue()}],\"break-inside\":[{\"break-inside\":[\"auto\",\"avoid\",\"avoid-page\",\"avoid-column\"]}],\"box-decoration\":[{\"box-decoration\":[\"slice\",\"clone\"]}],box:[{box:[\"border\",\"content\"]}],display:[\"block\",\"inline-block\",\"inline\",\"flex\",\"inline-flex\",\"table\",\"inline-table\",\"table-caption\",\"table-cell\",\"table-column\",\"table-column-group\",\"table-footer-group\",\"table-header-group\",\"table-row-group\",\"table-row\",\"flow-root\",\"grid\",\"inline-grid\",\"contents\",\"list-item\",\"hidden\"],float:[{float:[\"right\",\"left\",\"none\",\"start\",\"end\"]}],clear:[{clear:[\"left\",\"right\",\"both\",\"none\",\"start\",\"end\"]}],isolation:[\"isolate\",\"isolation-auto\"],\"object-fit\":[{object:[\"contain\",\"cover\",\"fill\",\"none\",\"scale-down\"]}],\"object-position\":[{object:[...le(),_t]}],overflow:[{overflow:Y()}],\"overflow-x\":[{\"overflow-x\":Y()}],\"overflow-y\":[{\"overflow-y\":Y()}],overscroll:[{overscroll:G()}],\"overscroll-x\":[{\"overscroll-x\":G()}],\"overscroll-y\":[{\"overscroll-y\":G()}],position:[\"static\",\"fixed\",\"absolute\",\"relative\",\"sticky\"],inset:[{inset:[y]}],\"inset-x\":[{\"inset-x\":[y]}],\"inset-y\":[{\"inset-y\":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:[\"visible\",\"invisible\",\"collapse\"],z:[{z:[\"auto\",Cd,_t]}],basis:[{basis:O()}],\"flex-direction\":[{flex:[\"row\",\"row-reverse\",\"col\",\"col-reverse\"]}],\"flex-wrap\":[{flex:[\"wrap\",\"wrap-reverse\",\"nowrap\"]}],flex:[{flex:[\"1\",\"auto\",\"initial\",\"none\",_t]}],grow:[{grow:ee()}],shrink:[{shrink:ee()}],order:[{order:[\"first\",\"last\",\"none\",Cd,_t]}],\"grid-cols\":[{\"grid-cols\":[kd]}],\"col-start-end\":[{col:[\"auto\",{span:[\"full\",Cd,_t]},_t]}],\"col-start\":[{\"col-start\":z()}],\"col-end\":[{\"col-end\":z()}],\"grid-rows\":[{\"grid-rows\":[kd]}],\"row-start-end\":[{row:[\"auto\",{span:[Cd,_t]},_t]}],\"row-start\":[{\"row-start\":z()}],\"row-end\":[{\"row-end\":z()}],\"grid-flow\":[{\"grid-flow\":[\"row\",\"col\",\"dense\",\"row-dense\",\"col-dense\"]}],\"auto-cols\":[{\"auto-cols\":[\"auto\",\"min\",\"max\",\"fr\",_t]}],\"auto-rows\":[{\"auto-rows\":[\"auto\",\"min\",\"max\",\"fr\",_t]}],gap:[{gap:[g]}],\"gap-x\":[{\"gap-x\":[g]}],\"gap-y\":[{\"gap-y\":[g]}],\"justify-content\":[{justify:[\"normal\",...V()]}],\"justify-items\":[{\"justify-items\":[\"start\",\"end\",\"center\",\"stretch\"]}],\"justify-self\":[{\"justify-self\":[\"auto\",\"start\",\"end\",\"center\",\"stretch\"]}],\"align-content\":[{content:[\"normal\",...V(),\"baseline\"]}],\"align-items\":[{items:[\"start\",\"end\",\"center\",\"baseline\",\"stretch\"]}],\"align-self\":[{self:[\"auto\",\"start\",\"end\",\"center\",\"stretch\",\"baseline\"]}],\"place-content\":[{\"place-content\":[...V(),\"baseline\"]}],\"place-items\":[{\"place-items\":[\"start\",\"end\",\"center\",\"baseline\",\"stretch\"]}],\"place-self\":[{\"place-self\":[\"auto\",\"start\",\"end\",\"center\",\"stretch\"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[j]}],mx:[{mx:[j]}],my:[{my:[j]}],ms:[{ms:[j]}],me:[{me:[j]}],mt:[{mt:[j]}],mr:[{mr:[j]}],mb:[{mb:[j]}],ml:[{ml:[j]}],\"space-x\":[{\"space-x\":[R]}],\"space-x-reverse\":[\"space-x-reverse\"],\"space-y\":[{\"space-y\":[R]}],\"space-y-reverse\":[\"space-y-reverse\"],w:[{w:[\"auto\",\"min\",\"max\",\"fit\",\"svw\",\"lvw\",\"dvw\",_t,t]}],\"min-w\":[{\"min-w\":[_t,t,\"min\",\"max\",\"fit\"]}],\"max-w\":[{\"max-w\":[_t,t,\"none\",\"full\",\"min\",\"max\",\"fit\",\"prose\",{screen:[Ga]},Ga]}],h:[{h:[_t,t,\"auto\",\"min\",\"max\",\"fit\",\"svh\",\"lvh\",\"dvh\"]}],\"min-h\":[{\"min-h\":[_t,t,\"min\",\"max\",\"fit\",\"svh\",\"lvh\",\"dvh\"]}],\"max-h\":[{\"max-h\":[_t,t,\"min\",\"max\",\"fit\",\"svh\",\"lvh\",\"dvh\"]}],size:[{size:[_t,t,\"auto\",\"min\",\"max\",\"fit\"]}],\"font-size\":[{text:[\"base\",Ga,Ha]}],\"font-smoothing\":[\"antialiased\",\"subpixel-antialiased\"],\"font-style\":[\"italic\",\"not-italic\"],\"font-weight\":[{font:[\"thin\",\"extralight\",\"light\",\"normal\",\"medium\",\"semibold\",\"bold\",\"extrabold\",\"black\",$1]}],\"font-family\":[{font:[kd]}],\"fvn-normal\":[\"normal-nums\"],\"fvn-ordinal\":[\"ordinal\"],\"fvn-slashed-zero\":[\"slashed-zero\"],\"fvn-figure\":[\"lining-nums\",\"oldstyle-nums\"],\"fvn-spacing\":[\"proportional-nums\",\"tabular-nums\"],\"fvn-fraction\":[\"diagonal-fractions\",\"stacked-fractions\"],tracking:[{tracking:[\"tighter\",\"tight\",\"normal\",\"wide\",\"wider\",\"widest\",_t]}],\"line-clamp\":[{\"line-clamp\":[\"none\",Zc,$1]}],leading:[{leading:[\"none\",\"tight\",\"snug\",\"normal\",\"relaxed\",\"loose\",oa,_t]}],\"list-image\":[{\"list-image\":[\"none\",_t]}],\"list-style-type\":[{list:[\"none\",\"disc\",\"decimal\",_t]}],\"list-style-position\":[{list:[\"inside\",\"outside\"]}],\"placeholder-color\":[{placeholder:[e]}],\"placeholder-opacity\":[{\"placeholder-opacity\":[x]}],\"text-alignment\":[{text:[\"left\",\"center\",\"right\",\"justify\",\"start\",\"end\"]}],\"text-color\":[{text:[e]}],\"text-opacity\":[{\"text-opacity\":[x]}],\"text-decoration\":[\"underline\",\"overline\",\"line-through\",\"no-underline\"],\"text-decoration-style\":[{decoration:[...J(),\"wavy\"]}],\"text-decoration-thickness\":[{decoration:[\"auto\",\"from-font\",oa,Ha]}],\"underline-offset\":[{\"underline-offset\":[\"auto\",oa,_t]}],\"text-decoration-color\":[{decoration:[e]}],\"text-transform\":[\"uppercase\",\"lowercase\",\"capitalize\",\"normal-case\"],\"text-overflow\":[\"truncate\",\"text-ellipsis\",\"text-clip\"],\"text-wrap\":[{text:[\"wrap\",\"nowrap\",\"balance\",\"pretty\"]}],indent:[{indent:E()}],\"vertical-align\":[{align:[\"baseline\",\"top\",\"middle\",\"bottom\",\"text-top\",\"text-bottom\",\"sub\",\"super\",_t]}],whitespace:[{whitespace:[\"normal\",\"nowrap\",\"pre\",\"pre-line\",\"pre-wrap\",\"break-spaces\"]}],break:[{break:[\"normal\",\"words\",\"all\",\"keep\"]}],hyphens:[{hyphens:[\"none\",\"manual\",\"auto\"]}],content:[{content:[\"none\",_t]}],\"bg-attachment\":[{bg:[\"fixed\",\"local\",\"scroll\"]}],\"bg-clip\":[{\"bg-clip\":[\"border\",\"padding\",\"content\",\"text\"]}],\"bg-opacity\":[{\"bg-opacity\":[x]}],\"bg-origin\":[{\"bg-origin\":[\"border\",\"padding\",\"content\"]}],\"bg-position\":[{bg:[...le(),KL]}],\"bg-repeat\":[{bg:[\"no-repeat\",{repeat:[\"\",\"x\",\"y\",\"round\",\"space\"]}]}],\"bg-size\":[{bg:[\"auto\",\"cover\",\"contain\",GL]}],\"bg-image\":[{bg:[\"none\",{\"gradient-to\":[\"t\",\"tr\",\"r\",\"br\",\"b\",\"bl\",\"l\",\"tl\"]},QL]}],\"bg-color\":[{bg:[e]}],\"gradient-from-pos\":[{from:[S]}],\"gradient-via-pos\":[{via:[S]}],\"gradient-to-pos\":[{to:[S]}],\"gradient-from\":[{from:[p]}],\"gradient-via\":[{via:[p]}],\"gradient-to\":[{to:[p]}],rounded:[{rounded:[s]}],\"rounded-s\":[{\"rounded-s\":[s]}],\"rounded-e\":[{\"rounded-e\":[s]}],\"rounded-t\":[{\"rounded-t\":[s]}],\"rounded-r\":[{\"rounded-r\":[s]}],\"rounded-b\":[{\"rounded-b\":[s]}],\"rounded-l\":[{\"rounded-l\":[s]}],\"rounded-ss\":[{\"rounded-ss\":[s]}],\"rounded-se\":[{\"rounded-se\":[s]}],\"rounded-ee\":[{\"rounded-ee\":[s]}],\"rounded-es\":[{\"rounded-es\":[s]}],\"rounded-tl\":[{\"rounded-tl\":[s]}],\"rounded-tr\":[{\"rounded-tr\":[s]}],\"rounded-br\":[{\"rounded-br\":[s]}],\"rounded-bl\":[{\"rounded-bl\":[s]}],\"border-w\":[{border:[o]}],\"border-w-x\":[{\"border-x\":[o]}],\"border-w-y\":[{\"border-y\":[o]}],\"border-w-s\":[{\"border-s\":[o]}],\"border-w-e\":[{\"border-e\":[o]}],\"border-w-t\":[{\"border-t\":[o]}],\"border-w-r\":[{\"border-r\":[o]}],\"border-w-b\":[{\"border-b\":[o]}],\"border-w-l\":[{\"border-l\":[o]}],\"border-opacity\":[{\"border-opacity\":[x]}],\"border-style\":[{border:[...J(),\"hidden\"]}],\"divide-x\":[{\"divide-x\":[o]}],\"divide-x-reverse\":[\"divide-x-reverse\"],\"divide-y\":[{\"divide-y\":[o]}],\"divide-y-reverse\":[\"divide-y-reverse\"],\"divide-opacity\":[{\"divide-opacity\":[x]}],\"divide-style\":[{divide:J()}],\"border-color\":[{border:[i]}],\"border-color-x\":[{\"border-x\":[i]}],\"border-color-y\":[{\"border-y\":[i]}],\"border-color-s\":[{\"border-s\":[i]}],\"border-color-e\":[{\"border-e\":[i]}],\"border-color-t\":[{\"border-t\":[i]}],\"border-color-r\":[{\"border-r\":[i]}],\"border-color-b\":[{\"border-b\":[i]}],\"border-color-l\":[{\"border-l\":[i]}],\"divide-color\":[{divide:[i]}],\"outline-style\":[{outline:[\"\",...J()]}],\"outline-offset\":[{\"outline-offset\":[oa,_t]}],\"outline-w\":[{outline:[oa,Ha]}],\"outline-color\":[{outline:[e]}],\"ring-w\":[{ring:W()}],\"ring-w-inset\":[\"ring-inset\"],\"ring-color\":[{ring:[e]}],\"ring-opacity\":[{\"ring-opacity\":[x]}],\"ring-offset-w\":[{\"ring-offset\":[oa,Ha]}],\"ring-offset-color\":[{\"ring-offset\":[e]}],shadow:[{shadow:[\"\",\"inner\",\"none\",Ga,YL]}],\"shadow-color\":[{shadow:[kd]}],opacity:[{opacity:[x]}],\"mix-blend\":[{\"mix-blend\":[...fe(),\"plus-lighter\",\"plus-darker\"]}],\"bg-blend\":[{\"bg-blend\":fe()}],filter:[{filter:[\"\",\"none\"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],\"drop-shadow\":[{\"drop-shadow\":[\"\",\"none\",Ga,_t]}],grayscale:[{grayscale:[d]}],\"hue-rotate\":[{\"hue-rotate\":[f]}],invert:[{invert:[m]}],saturate:[{saturate:[N]}],sepia:[{sepia:[P]}],\"backdrop-filter\":[{\"backdrop-filter\":[\"\",\"none\"]}],\"backdrop-blur\":[{\"backdrop-blur\":[n]}],\"backdrop-brightness\":[{\"backdrop-brightness\":[r]}],\"backdrop-contrast\":[{\"backdrop-contrast\":[c]}],\"backdrop-grayscale\":[{\"backdrop-grayscale\":[d]}],\"backdrop-hue-rotate\":[{\"backdrop-hue-rotate\":[f]}],\"backdrop-invert\":[{\"backdrop-invert\":[m]}],\"backdrop-opacity\":[{\"backdrop-opacity\":[x]}],\"backdrop-saturate\":[{\"backdrop-saturate\":[N]}],\"backdrop-sepia\":[{\"backdrop-sepia\":[P]}],\"border-collapse\":[{border:[\"collapse\",\"separate\"]}],\"border-spacing\":[{\"border-spacing\":[a]}],\"border-spacing-x\":[{\"border-spacing-x\":[a]}],\"border-spacing-y\":[{\"border-spacing-y\":[a]}],\"table-layout\":[{table:[\"auto\",\"fixed\"]}],caption:[{caption:[\"top\",\"bottom\"]}],transition:[{transition:[\"none\",\"all\",\"\",\"colors\",\"opacity\",\"shadow\",\"transform\",_t]}],duration:[{duration:je()}],ease:[{ease:[\"linear\",\"in\",\"out\",\"in-out\",_t]}],delay:[{delay:je()}],animate:[{animate:[\"none\",\"spin\",\"ping\",\"pulse\",\"bounce\",_t]}],transform:[{transform:[\"\",\"gpu\",\"none\"]}],scale:[{scale:[k]}],\"scale-x\":[{\"scale-x\":[k]}],\"scale-y\":[{\"scale-y\":[k]}],rotate:[{rotate:[Cd,_t]}],\"translate-x\":[{\"translate-x\":[T]}],\"translate-y\":[{\"translate-y\":[T]}],\"skew-x\":[{\"skew-x\":[H]}],\"skew-y\":[{\"skew-y\":[H]}],\"transform-origin\":[{origin:[\"center\",\"top\",\"top-right\",\"right\",\"bottom-right\",\"bottom\",\"bottom-left\",\"left\",\"top-left\",_t]}],accent:[{accent:[\"auto\",e]}],appearance:[{appearance:[\"none\",\"auto\"]}],cursor:[{cursor:[\"auto\",\"default\",\"pointer\",\"wait\",\"text\",\"move\",\"help\",\"not-allowed\",\"none\",\"context-menu\",\"progress\",\"cell\",\"crosshair\",\"vertical-text\",\"alias\",\"copy\",\"no-drop\",\"grab\",\"grabbing\",\"all-scroll\",\"col-resize\",\"row-resize\",\"n-resize\",\"e-resize\",\"s-resize\",\"w-resize\",\"ne-resize\",\"nw-resize\",\"se-resize\",\"sw-resize\",\"ew-resize\",\"ns-resize\",\"nesw-resize\",\"nwse-resize\",\"zoom-in\",\"zoom-out\",_t]}],\"caret-color\":[{caret:[e]}],\"pointer-events\":[{\"pointer-events\":[\"none\",\"auto\"]}],resize:[{resize:[\"none\",\"y\",\"x\",\"\"]}],\"scroll-behavior\":[{scroll:[\"auto\",\"smooth\"]}],\"scroll-m\":[{\"scroll-m\":E()}],\"scroll-mx\":[{\"scroll-mx\":E()}],\"scroll-my\":[{\"scroll-my\":E()}],\"scroll-ms\":[{\"scroll-ms\":E()}],\"scroll-me\":[{\"scroll-me\":E()}],\"scroll-mt\":[{\"scroll-mt\":E()}],\"scroll-mr\":[{\"scroll-mr\":E()}],\"scroll-mb\":[{\"scroll-mb\":E()}],\"scroll-ml\":[{\"scroll-ml\":E()}],\"scroll-p\":[{\"scroll-p\":E()}],\"scroll-px\":[{\"scroll-px\":E()}],\"scroll-py\":[{\"scroll-py\":E()}],\"scroll-ps\":[{\"scroll-ps\":E()}],\"scroll-pe\":[{\"scroll-pe\":E()}],\"scroll-pt\":[{\"scroll-pt\":E()}],\"scroll-pr\":[{\"scroll-pr\":E()}],\"scroll-pb\":[{\"scroll-pb\":E()}],\"scroll-pl\":[{\"scroll-pl\":E()}],\"snap-align\":[{snap:[\"start\",\"end\",\"center\",\"align-none\"]}],\"snap-stop\":[{snap:[\"normal\",\"always\"]}],\"snap-type\":[{snap:[\"none\",\"x\",\"y\",\"both\"]}],\"snap-strictness\":[{snap:[\"mandatory\",\"proximity\"]}],touch:[{touch:[\"auto\",\"none\",\"manipulation\"]}],\"touch-x\":[{\"touch-pan\":[\"x\",\"left\",\"right\"]}],\"touch-y\":[{\"touch-pan\":[\"y\",\"up\",\"down\"]}],\"touch-pz\":[\"touch-pinch-zoom\"],select:[{select:[\"none\",\"text\",\"all\",\"auto\"]}],\"will-change\":[{\"will-change\":[\"auto\",\"scroll\",\"contents\",\"transform\",_t]}],fill:[{fill:[e,\"none\"]}],\"stroke-w\":[{stroke:[oa,Ha,$1]}],stroke:[{stroke:[e,\"none\"]}],sr:[\"sr-only\",\"not-sr-only\"],\"forced-color-adjust\":[{\"forced-color-adjust\":[\"auto\",\"none\"]}]},conflictingClassGroups:{overflow:[\"overflow-x\",\"overflow-y\"],overscroll:[\"overscroll-x\",\"overscroll-y\"],inset:[\"inset-x\",\"inset-y\",\"start\",\"end\",\"top\",\"right\",\"bottom\",\"left\"],\"inset-x\":[\"right\",\"left\"],\"inset-y\":[\"top\",\"bottom\"],flex:[\"basis\",\"grow\",\"shrink\"],gap:[\"gap-x\",\"gap-y\"],p:[\"px\",\"py\",\"ps\",\"pe\",\"pt\",\"pr\",\"pb\",\"pl\"],px:[\"pr\",\"pl\"],py:[\"pt\",\"pb\"],m:[\"mx\",\"my\",\"ms\",\"me\",\"mt\",\"mr\",\"mb\",\"ml\"],mx:[\"mr\",\"ml\"],my:[\"mt\",\"mb\"],size:[\"w\",\"h\"],\"font-size\":[\"leading\"],\"fvn-normal\":[\"fvn-ordinal\",\"fvn-slashed-zero\",\"fvn-figure\",\"fvn-spacing\",\"fvn-fraction\"],\"fvn-ordinal\":[\"fvn-normal\"],\"fvn-slashed-zero\":[\"fvn-normal\"],\"fvn-figure\":[\"fvn-normal\"],\"fvn-spacing\":[\"fvn-normal\"],\"fvn-fraction\":[\"fvn-normal\"],\"line-clamp\":[\"display\",\"overflow\"],rounded:[\"rounded-s\",\"rounded-e\",\"rounded-t\",\"rounded-r\",\"rounded-b\",\"rounded-l\",\"rounded-ss\",\"rounded-se\",\"rounded-ee\",\"rounded-es\",\"rounded-tl\",\"rounded-tr\",\"rounded-br\",\"rounded-bl\"],\"rounded-s\":[\"rounded-ss\",\"rounded-es\"],\"rounded-e\":[\"rounded-se\",\"rounded-ee\"],\"rounded-t\":[\"rounded-tl\",\"rounded-tr\"],\"rounded-r\":[\"rounded-tr\",\"rounded-br\"],\"rounded-b\":[\"rounded-br\",\"rounded-bl\"],\"rounded-l\":[\"rounded-tl\",\"rounded-bl\"],\"border-spacing\":[\"border-spacing-x\",\"border-spacing-y\"],\"border-w\":[\"border-w-s\",\"border-w-e\",\"border-w-t\",\"border-w-r\",\"border-w-b\",\"border-w-l\"],\"border-w-x\":[\"border-w-r\",\"border-w-l\"],\"border-w-y\":[\"border-w-t\",\"border-w-b\"],\"border-color\":[\"border-color-s\",\"border-color-e\",\"border-color-t\",\"border-color-r\",\"border-color-b\",\"border-color-l\"],\"border-color-x\":[\"border-color-r\",\"border-color-l\"],\"border-color-y\":[\"border-color-t\",\"border-color-b\"],\"scroll-m\":[\"scroll-mx\",\"scroll-my\",\"scroll-ms\",\"scroll-me\",\"scroll-mt\",\"scroll-mr\",\"scroll-mb\",\"scroll-ml\"],\"scroll-mx\":[\"scroll-mr\",\"scroll-ml\"],\"scroll-my\":[\"scroll-mt\",\"scroll-mb\"],\"scroll-p\":[\"scroll-px\",\"scroll-py\",\"scroll-ps\",\"scroll-pe\",\"scroll-pt\",\"scroll-pr\",\"scroll-pb\",\"scroll-pl\"],\"scroll-px\":[\"scroll-pr\",\"scroll-pl\"],\"scroll-py\":[\"scroll-pt\",\"scroll-pb\"],touch:[\"touch-x\",\"touch-y\",\"touch-pz\"],\"touch-x\":[\"touch\"],\"touch-y\":[\"touch\"],\"touch-pz\":[\"touch\"]},conflictingClassGroupModifiers:{\"font-size\":[\"leading\"]}}},n8=ML(t8);function wt(...e){return n8(NN(e))}const r8=xL,IN=C.forwardRef(({className:e,...t},n)=>l.jsx(mN,{ref:n,className:wt(\"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",e),...t}));IN.displayName=mN.displayName;const i8=i0(\"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",{variants:{variant:{default:\"border bg-background text-foreground\",destructive:\"destructive group border-destructive bg-destructive text-destructive-foreground\"}},defaultVariants:{variant:\"default\"}}),ON=C.forwardRef(({className:e,variant:t,...n},r)=>l.jsx(gN,{ref:r,className:wt(i8({variant:t}),e),...n}));ON.displayName=gN.displayName;const s8=C.forwardRef(({className:e,...t},n)=>l.jsx(xN,{ref:n,className:wt(\"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",e),...t}));s8.displayName=xN.displayName;const FN=C.forwardRef(({className:e,...t},n)=>l.jsx(wN,{ref:n,className:wt(\"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",e),\"toast-close\":\"\",...t,children:l.jsx(AN,{className:\"h-4 w-4\"})}));FN.displayName=wN.displayName;const MN=C.forwardRef(({className:e,...t},n)=>l.jsx(vN,{ref:n,className:wt(\"text-sm font-semibold\",e),...t}));MN.displayName=vN.displayName;const DN=C.forwardRef(({className:e,...t},n)=>l.jsx(yN,{ref:n,className:wt(\"text-sm opacity-90\",e),...t}));DN.displayName=yN.displayName;function a8(){const{toasts:e}=mi();return l.jsxs(r8,{children:[e.map(function({id:t,title:n,description:r,action:i,...s}){return l.jsxs(ON,{...s,children:[l.jsxs(\"div\",{className:\"grid gap-1\",children:[n&&l.jsx(MN,{children:n}),r&&l.jsx(DN,{children:r})]}),i,l.jsx(FN,{})]},t)}),l.jsx(IN,{})]})}var o8=wb[\" useId \".trim().toString()]||(()=>{}),l8=0;function yl(e){const[t,n]=C.useState(o8());return Zn(()=>{n(r=>r??String(l8++))},[e]),t?`radix-${t}`:\"\"}const c8=[\"top\",\"right\",\"bottom\",\"left\"],ko=Math.min,ai=Math.max,xm=Math.round,mp=Math.floor,Bs=e=>({x:e,y:e}),u8={left:\"right\",right:\"left\",bottom:\"top\",top:\"bottom\"},d8={start:\"end\",end:\"start\"};function Sv(e,t,n){return ai(e,ko(t,n))}function ja(e,t){return typeof e==\"function\"?e(t):e}function _a(e){return e.split(\"-\")[0]}function Du(e){return e.split(\"-\")[1]}function iy(e){return e===\"x\"?\"y\":\"x\"}function sy(e){return e===\"y\"?\"height\":\"width\"}function Ao(e){return[\"top\",\"bottom\"].includes(_a(e))?\"y\":\"x\"}function ay(e){return iy(Ao(e))}function f8(e,t,n){n===void 0&&(n=!1);const r=Du(e),i=ay(e),s=sy(i);let a=i===\"x\"?r===(n?\"end\":\"start\")?\"right\":\"left\":r===\"start\"?\"bottom\":\"top\";return t.reference[s]>t.floating[s]&&(a=wm(a)),[a,wm(a)]}function h8(e){const t=wm(e);return[jv(e),t,jv(t)]}function jv(e){return e.replace(/start|end/g,t=>d8[t])}function p8(e,t,n){const r=[\"left\",\"right\"],i=[\"right\",\"left\"],s=[\"top\",\"bottom\"],a=[\"bottom\",\"top\"];switch(e){case\"top\":case\"bottom\":return n?t?i:r:t?r:i;case\"left\":case\"right\":return t?s:a;default:return[]}}function m8(e,t,n,r){const i=Du(e);let s=p8(_a(e),n===\"start\",r);return i&&(s=s.map(a=>a+\"-\"+i),t&&(s=s.concat(s.map(jv)))),s}function wm(e){return e.replace(/left|right|bottom|top/g,t=>u8[t])}function g8(e){return{top:0,right:0,bottom:0,left:0,...e}}function BN(e){return typeof e!=\"number\"?g8(e):{top:e,right:e,bottom:e,left:e}}function bm(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Hx(e,t,n){let{reference:r,floating:i}=e;const s=Ao(t),a=ay(t),o=sy(a),c=_a(t),d=s===\"y\",f=r.x+r.width/2-i.width/2,m=r.y+r.height/2-i.height/2,g=r[o]/2-i[o]/2;let p;switch(c){case\"top\":p={x:f,y:r.y-i.height};break;case\"bottom\":p={x:f,y:r.y+r.height};break;case\"right\":p={x:r.x+r.width,y:m};break;case\"left\":p={x:r.x-i.width,y:m};break;default:p={x:r.x,y:r.y}}switch(Du(t)){case\"start\":p[a]-=g*(n&&d?-1:1);break;case\"end\":p[a]+=g*(n&&d?-1:1);break}return p}const v8=async(e,t,n)=>{const{placement:r=\"bottom\",strategy:i=\"absolute\",middleware:s=[],platform:a}=n,o=s.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let d=await a.getElementRects({reference:e,floating:t,strategy:i}),{x:f,y:m}=Hx(d,r,c),g=r,p={},S=0;for(let y=0;y<o.length;y++){const{name:j,fn:x}=o[y],{x:b,y:N,data:k,reset:P}=await x({x:f,y:m,initialPlacement:r,placement:g,strategy:i,middlewareData:p,rects:d,platform:a,elements:{reference:e,floating:t}});f=b??f,m=N??m,p={...p,[j]:{...p[j],...k}},P&&S<=50&&(S++,typeof P==\"object\"&&(P.placement&&(g=P.placement),P.rects&&(d=P.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:i}):P.rects),{x:f,y:m}=Hx(d,g,c)),y=-1)}return{x:f,y:m,placement:g,strategy:i,middlewareData:p}};async function bf(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:a,elements:o,strategy:c}=e,{boundary:d=\"clippingAncestors\",rootBoundary:f=\"viewport\",elementContext:m=\"floating\",altBoundary:g=!1,padding:p=0}=ja(t,e),S=BN(p),j=o[g?m===\"floating\"?\"reference\":\"floating\":m],x=bm(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(j)))==null||n?j:j.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:d,rootBoundary:f,strategy:c})),b=m===\"floating\"?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,N=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),k=await(s.isElement==null?void 0:s.isElement(N))?await(s.getScale==null?void 0:s.getScale(N))||{x:1,y:1}:{x:1,y:1},P=bm(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:b,offsetParent:N,strategy:c}):b);return{top:(x.top-P.top+S.top)/k.y,bottom:(P.bottom-x.bottom+S.bottom)/k.y,left:(x.left-P.left+S.left)/k.x,right:(P.right-x.right+S.right)/k.x}}const y8=e=>({name:\"arrow\",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:a,elements:o,middlewareData:c}=t,{element:d,padding:f=0}=ja(e,t)||{};if(d==null)return{};const m=BN(f),g={x:n,y:r},p=ay(i),S=sy(p),y=await a.getDimensions(d),j=p===\"y\",x=j?\"top\":\"left\",b=j?\"bottom\":\"right\",N=j?\"clientHeight\":\"clientWidth\",k=s.reference[S]+s.reference[p]-g[p]-s.floating[S],P=g[p]-s.reference[p],H=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d));let R=H?H[N]:0;(!R||!await(a.isElement==null?void 0:a.isElement(H)))&&(R=o.floating[N]||s.floating[S]);const T=k/2-P/2,G=R/2-y[S]/2-1,Y=ko(m[x],G),O=ko(m[b],G),E=Y,W=R-y[S]-O,z=R/2-y[S]/2+T,le=Sv(E,z,W),J=!c.arrow&&Du(i)!=null&&z!==le&&s.reference[S]/2-(z<E?Y:O)-y[S]/2<0,fe=J?z<E?z-E:z-W:0;return{[p]:g[p]+fe,data:{[p]:le,centerOffset:z-le-fe,...J&&{alignmentOffset:fe}},reset:J}}}),x8=function(e){return e===void 0&&(e={}),{name:\"flip\",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:a,initialPlacement:o,platform:c,elements:d}=t,{mainAxis:f=!0,crossAxis:m=!0,fallbackPlacements:g,fallbackStrategy:p=\"bestFit\",fallbackAxisSideDirection:S=\"none\",flipAlignment:y=!0,...j}=ja(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const x=_a(i),b=Ao(o),N=_a(o)===o,k=await(c.isRTL==null?void 0:c.isRTL(d.floating)),P=g||(N||!y?[wm(o)]:h8(o)),H=S!==\"none\";!g&&H&&P.push(...m8(o,y,S,k));const R=[o,...P],T=await bf(t,j),G=[];let Y=((r=s.flip)==null?void 0:r.overflows)||[];if(f&&G.push(T[x]),m){const z=f8(i,a,k);G.push(T[z[0]],T[z[1]])}if(Y=[...Y,{placement:i,overflows:G}],!G.every(z=>z<=0)){var O,E;const z=(((O=s.flip)==null?void 0:O.index)||0)+1,le=R[z];if(le)return{data:{index:z,overflows:Y},reset:{placement:le}};let J=(E=Y.filter(fe=>fe.overflows[0]<=0).sort((fe,V)=>fe.overflows[1]-V.overflows[1])[0])==null?void 0:E.placement;if(!J)switch(p){case\"bestFit\":{var W;const fe=(W=Y.filter(V=>{if(H){const ee=Ao(V.placement);return ee===b||ee===\"y\"}return!0}).map(V=>[V.placement,V.overflows.filter(ee=>ee>0).reduce((ee,ue)=>ee+ue,0)]).sort((V,ee)=>V[1]-ee[1])[0])==null?void 0:W[0];fe&&(J=fe);break}case\"initialPlacement\":J=o;break}if(i!==J)return{reset:{placement:J}}}return{}}}};function Gx(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Kx(e){return c8.some(t=>e[t]>=0)}const w8=function(e){return e===void 0&&(e={}),{name:\"hide\",options:e,async fn(t){const{rects:n}=t,{strategy:r=\"referenceHidden\",...i}=ja(e,t);switch(r){case\"referenceHidden\":{const s=await bf(t,{...i,elementContext:\"reference\"}),a=Gx(s,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:Kx(a)}}}case\"escaped\":{const s=await bf(t,{...i,altBoundary:!0}),a=Gx(s,n.floating);return{data:{escapedOffsets:a,escaped:Kx(a)}}}default:return{}}}}};async function b8(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),a=_a(n),o=Du(n),c=Ao(n)===\"y\",d=[\"left\",\"top\"].includes(a)?-1:1,f=s&&c?-1:1,m=ja(t,e);let{mainAxis:g,crossAxis:p,alignmentAxis:S}=typeof m==\"number\"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return o&&typeof S==\"number\"&&(p=o===\"end\"?S*-1:S),c?{x:p*f,y:g*d}:{x:g*d,y:p*f}}const N8=function(e){return e===void 0&&(e=0),{name:\"offset\",options:e,async fn(t){var n,r;const{x:i,y:s,placement:a,middlewareData:o}=t,c=await b8(t,e);return a===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:s+c.y,data:{...c,placement:a}}}}},S8=function(e){return e===void 0&&(e={}),{name:\"shift\",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:j=>{let{x,y:b}=j;return{x,y:b}}},...c}=ja(e,t),d={x:n,y:r},f=await bf(t,c),m=Ao(_a(i)),g=iy(m);let p=d[g],S=d[m];if(s){const j=g===\"y\"?\"top\":\"left\",x=g===\"y\"?\"bottom\":\"right\",b=p+f[j],N=p-f[x];p=Sv(b,p,N)}if(a){const j=m===\"y\"?\"top\":\"left\",x=m===\"y\"?\"bottom\":\"right\",b=S+f[j],N=S-f[x];S=Sv(b,S,N)}const y=o.fn({...t,[g]:p,[m]:S});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[g]:s,[m]:a}}}}}},j8=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:a}=t,{offset:o=0,mainAxis:c=!0,crossAxis:d=!0}=ja(e,t),f={x:n,y:r},m=Ao(i),g=iy(m);let p=f[g],S=f[m];const y=ja(o,t),j=typeof y==\"number\"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const N=g===\"y\"?\"height\":\"width\",k=s.reference[g]-s.floating[N]+j.mainAxis,P=s.reference[g]+s.reference[N]-j.mainAxis;p<k?p=k:p>P&&(p=P)}if(d){var x,b;const N=g===\"y\"?\"width\":\"height\",k=[\"top\",\"left\"].includes(_a(i)),P=s.reference[m]-s.floating[N]+(k&&((x=a.offset)==null?void 0:x[m])||0)+(k?0:j.crossAxis),H=s.reference[m]+s.reference[N]+(k?0:((b=a.offset)==null?void 0:b[m])||0)-(k?j.crossAxis:0);S<P?S=P:S>H&&(S=H)}return{[g]:p,[m]:S}}}},_8=function(e){return e===void 0&&(e={}),{name:\"size\",options:e,async fn(t){var n,r;const{placement:i,rects:s,platform:a,elements:o}=t,{apply:c=()=>{},...d}=ja(e,t),f=await bf(t,d),m=_a(i),g=Du(i),p=Ao(i)===\"y\",{width:S,height:y}=s.floating;let j,x;m===\"top\"||m===\"bottom\"?(j=m,x=g===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?\"start\":\"end\")?\"left\":\"right\"):(x=m,j=g===\"end\"?\"top\":\"bottom\");const b=y-f.top-f.bottom,N=S-f.left-f.right,k=ko(y-f[j],b),P=ko(S-f[x],N),H=!t.middlewareData.shift;let R=k,T=P;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(T=N),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(R=b),H&&!g){const Y=ai(f.left,0),O=ai(f.right,0),E=ai(f.top,0),W=ai(f.bottom,0);p?T=S-2*(Y!==0||O!==0?Y+O:ai(f.left,f.right)):R=y-2*(E!==0||W!==0?E+W:ai(f.top,f.bottom))}await c({...t,availableWidth:T,availableHeight:R});const G=await a.getDimensions(o.floating);return S!==G.width||y!==G.height?{reset:{rects:!0}}:{}}}};function s0(){return typeof window<\"u\"}function Bu(e){return zN(e)?(e.nodeName||\"\").toLowerCase():\"#document\"}function ui(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ks(e){var t;return(t=(zN(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function zN(e){return s0()?e instanceof Node||e instanceof ui(e).Node:!1}function us(e){return s0()?e instanceof Element||e instanceof ui(e).Element:!1}function Us(e){return s0()?e instanceof HTMLElement||e instanceof ui(e).HTMLElement:!1}function Zx(e){return!s0()||typeof ShadowRoot>\"u\"?!1:e instanceof ShadowRoot||e instanceof ui(e).ShadowRoot}function Xf(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=ds(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&![\"inline\",\"contents\"].includes(i)}function C8(e){return[\"table\",\"td\",\"th\"].includes(Bu(e))}function a0(e){return[\":popover-open\",\":modal\"].some(t=>{try{return e.matches(t)}catch{return!1}})}function oy(e){const t=ly(),n=us(e)?ds(e):e;return[\"transform\",\"translate\",\"scale\",\"rotate\",\"perspective\"].some(r=>n[r]?n[r]!==\"none\":!1)||(n.containerType?n.containerType!==\"normal\":!1)||!t&&(n.backdropFilter?n.backdropFilter!==\"none\":!1)||!t&&(n.filter?n.filter!==\"none\":!1)||[\"transform\",\"translate\",\"scale\",\"rotate\",\"perspective\",\"filter\"].some(r=>(n.willChange||\"\").includes(r))||[\"paint\",\"layout\",\"strict\",\"content\"].some(r=>(n.contain||\"\").includes(r))}function k8(e){let t=Po(e);for(;Us(t)&&!_u(t);){if(oy(t))return t;if(a0(t))return null;t=Po(t)}return null}function ly(){return typeof CSS>\"u\"||!CSS.supports?!1:CSS.supports(\"-webkit-backdrop-filter\",\"none\")}function _u(e){return[\"html\",\"body\",\"#document\"].includes(Bu(e))}function ds(e){return ui(e).getComputedStyle(e)}function o0(e){return us(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Po(e){if(Bu(e)===\"html\")return e;const t=e.assignedSlot||e.parentNode||Zx(e)&&e.host||Ks(e);return Zx(t)?t.host:t}function qN(e){const t=Po(e);return _u(t)?e.ownerDocument?e.ownerDocument.body:e.body:Us(t)&&Xf(t)?t:qN(t)}function Nf(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=qN(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),a=ui(i);if(s){const o=_v(a);return t.concat(a,a.visualViewport||[],Xf(i)?i:[],o&&n?Nf(o):[])}return t.concat(i,Nf(i,[],n))}function _v(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function UN(e){const t=ds(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Us(e),s=i?e.offsetWidth:n,a=i?e.offsetHeight:r,o=xm(n)!==s||xm(r)!==a;return o&&(n=s,r=a),{width:n,height:r,$:o}}function cy(e){return us(e)?e:e.contextElement}function Qc(e){const t=cy(e);if(!Us(t))return Bs(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=UN(t);let a=(s?xm(n.width):n.width)/r,o=(s?xm(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const A8=Bs(0);function VN(e){const t=ui(e);return!ly()||!t.visualViewport?A8:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function P8(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ui(e)?!1:t}function Pl(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=cy(e);let a=Bs(1);t&&(r?us(r)&&(a=Qc(r)):a=Qc(e));const o=P8(s,n,r)?VN(s):Bs(0);let c=(i.left+o.x)/a.x,d=(i.top+o.y)/a.y,f=i.width/a.x,m=i.height/a.y;if(s){const g=ui(s),p=r&&us(r)?ui(r):r;let S=g,y=_v(S);for(;y&&r&&p!==S;){const j=Qc(y),x=y.getBoundingClientRect(),b=ds(y),N=x.left+(y.clientLeft+parseFloat(b.paddingLeft))*j.x,k=x.top+(y.clientTop+parseFloat(b.paddingTop))*j.y;c*=j.x,d*=j.y,f*=j.x,m*=j.y,c+=N,d+=k,S=ui(y),y=_v(S)}}return bm({width:f,height:m,x:c,y:d})}function uy(e,t){const n=o0(e).scrollLeft;return t?t.left+n:Pl(Ks(e)).left+n}function $N(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),i=r.left+t.scrollLeft-(n?0:uy(e,r)),s=r.top+t.scrollTop;return{x:i,y:s}}function L8(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i===\"fixed\",a=Ks(r),o=t?a0(t.floating):!1;if(r===a||o&&s)return n;let c={scrollLeft:0,scrollTop:0},d=Bs(1);const f=Bs(0),m=Us(r);if((m||!m&&!s)&&((Bu(r)!==\"body\"||Xf(a))&&(c=o0(r)),Us(r))){const p=Pl(r);d=Qc(r),f.x=p.x+r.clientLeft,f.y=p.y+r.clientTop}const g=a&&!m&&!s?$N(a,c,!0):Bs(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+f.x+g.x,y:n.y*d.y-c.scrollTop*d.y+f.y+g.y}}function E8(e){return Array.from(e.getClientRects())}function T8(e){const t=Ks(e),n=o0(e),r=e.ownerDocument.body,i=ai(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=ai(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+uy(e);const o=-n.scrollTop;return ds(r).direction===\"rtl\"&&(a+=ai(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:a,y:o}}function R8(e,t){const n=ui(e),r=Ks(e),i=n.visualViewport;let s=r.clientWidth,a=r.clientHeight,o=0,c=0;if(i){s=i.width,a=i.height;const d=ly();(!d||d&&t===\"fixed\")&&(o=i.offsetLeft,c=i.offsetTop)}return{width:s,height:a,x:o,y:c}}function I8(e,t){const n=Pl(e,!0,t===\"fixed\"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Us(e)?Qc(e):Bs(1),a=e.clientWidth*s.x,o=e.clientHeight*s.y,c=i*s.x,d=r*s.y;return{width:a,height:o,x:c,y:d}}function Qx(e,t,n){let r;if(t===\"viewport\")r=R8(e,n);else if(t===\"document\")r=T8(Ks(e));else if(us(t))r=I8(t,n);else{const i=VN(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return bm(r)}function WN(e,t){const n=Po(e);return n===t||!us(n)||_u(n)?!1:ds(n).position===\"fixed\"||WN(n,t)}function O8(e,t){const n=t.get(e);if(n)return n;let r=Nf(e,[],!1).filter(o=>us(o)&&Bu(o)!==\"body\"),i=null;const s=ds(e).position===\"fixed\";let a=s?Po(e):e;for(;us(a)&&!_u(a);){const o=ds(a),c=oy(a);!c&&o.position===\"fixed\"&&(i=null),(s?!c&&!i:!c&&o.position===\"static\"&&!!i&&[\"absolute\",\"fixed\"].includes(i.position)||Xf(a)&&!c&&WN(e,a))?r=r.filter(f=>f!==a):i=o,a=Po(a)}return t.set(e,r),r}function F8(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const a=[...n===\"clippingAncestors\"?a0(t)?[]:O8(t,this._c):[].concat(n),r],o=a[0],c=a.reduce((d,f)=>{const m=Qx(t,f,i);return d.top=ai(m.top,d.top),d.right=ko(m.right,d.right),d.bottom=ko(m.bottom,d.bottom),d.left=ai(m.left,d.left),d},Qx(t,o,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function M8(e){const{width:t,height:n}=UN(e);return{width:t,height:n}}function D8(e,t,n){const r=Us(t),i=Ks(t),s=n===\"fixed\",a=Pl(e,!0,s,t);let o={scrollLeft:0,scrollTop:0};const c=Bs(0);if(r||!r&&!s)if((Bu(t)!==\"body\"||Xf(i))&&(o=o0(t)),r){const g=Pl(t,!0,s,t);c.x=g.x+t.clientLeft,c.y=g.y+t.clientTop}else i&&(c.x=uy(i));const d=i&&!r&&!s?$N(i,o):Bs(0),f=a.left+o.scrollLeft-c.x-d.x,m=a.top+o.scrollTop-c.y-d.y;return{x:f,y:m,width:a.width,height:a.height}}function W1(e){return ds(e).position===\"static\"}function Yx(e,t){if(!Us(e)||ds(e).position===\"fixed\")return null;if(t)return t(e);let n=e.offsetParent;return Ks(e)===n&&(n=n.ownerDocument.body),n}function HN(e,t){const n=ui(e);if(a0(e))return n;if(!Us(e)){let i=Po(e);for(;i&&!_u(i);){if(us(i)&&!W1(i))return i;i=Po(i)}return n}let r=Yx(e,t);for(;r&&C8(r)&&W1(r);)r=Yx(r,t);return r&&_u(r)&&W1(r)&&!oy(r)?n:r||k8(e)||n}const B8=async function(e){const t=this.getOffsetParent||HN,n=this.getDimensions,r=await n(e.floating);return{reference:D8(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function z8(e){return ds(e).direction===\"rtl\"}const q8={convertOffsetParentRelativeRectToViewportRelativeRect:L8,getDocumentElement:Ks,getClippingRect:F8,getOffsetParent:HN,getElementRects:B8,getClientRects:E8,getDimensions:M8,getScale:Qc,isElement:us,isRTL:z8};function GN(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function U8(e,t){let n=null,r;const i=Ks(e);function s(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function a(o,c){o===void 0&&(o=!1),c===void 0&&(c=1),s();const d=e.getBoundingClientRect(),{left:f,top:m,width:g,height:p}=d;if(o||t(),!g||!p)return;const S=mp(m),y=mp(i.clientWidth-(f+g)),j=mp(i.clientHeight-(m+p)),x=mp(f),N={rootMargin:-S+\"px \"+-y+\"px \"+-j+\"px \"+-x+\"px\",threshold:ai(0,ko(1,c))||1};let k=!0;function P(H){const R=H[0].intersectionRatio;if(R!==c){if(!k)return a();R?a(!1,R):r=setTimeout(()=>{a(!1,1e-7)},1e3)}R===1&&!GN(d,e.getBoundingClientRect())&&a(),k=!1}try{n=new IntersectionObserver(P,{...N,root:i.ownerDocument})}catch{n=new IntersectionObserver(P,N)}n.observe(e)}return a(!0),s}function V8(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver==\"function\",layoutShift:o=typeof IntersectionObserver==\"function\",animationFrame:c=!1}=r,d=cy(e),f=i||s?[...d?Nf(d):[],...Nf(t)]:[];f.forEach(x=>{i&&x.addEventListener(\"scroll\",n,{passive:!0}),s&&x.addEventListener(\"resize\",n)});const m=d&&o?U8(d,n):null;let g=-1,p=null;a&&(p=new ResizeObserver(x=>{let[b]=x;b&&b.target===d&&p&&(p.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var N;(N=p)==null||N.observe(t)})),n()}),d&&!c&&p.observe(d),p.observe(t));let S,y=c?Pl(e):null;c&&j();function j(){const x=Pl(e);y&&!GN(y,x)&&n(),y=x,S=requestAnimationFrame(j)}return n(),()=>{var x;f.forEach(b=>{i&&b.removeEventListener(\"scroll\",n),s&&b.removeEventListener(\"resize\",n)}),m==null||m(),(x=p)==null||x.disconnect(),p=null,c&&cancelAnimationFrame(S)}}const $8=N8,W8=S8,H8=x8,G8=_8,K8=w8,Xx=y8,Z8=j8,Q8=(e,t,n)=>{const r=new Map,i={platform:q8,...n},s={...i.platform,_c:r};return v8(e,t,{...i,platform:s})};var Bp=typeof document<\"u\"?C.useLayoutEffect:C.useEffect;function Nm(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e==\"function\"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e==\"object\"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Nm(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s===\"_owner\"&&e.$$typeof)&&!Nm(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function KN(e){return typeof window>\"u\"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Jx(e,t){const n=KN(e);return Math.round(t*n)/n}function H1(e){const t=C.useRef(e);return Bp(()=>{t.current=e}),t}function Y8(e){e===void 0&&(e={});const{placement:t=\"bottom\",strategy:n=\"absolute\",middleware:r=[],platform:i,elements:{reference:s,floating:a}={},transform:o=!0,whileElementsMounted:c,open:d}=e,[f,m]=C.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[g,p]=C.useState(r);Nm(g,r)||p(r);const[S,y]=C.useState(null),[j,x]=C.useState(null),b=C.useCallback(V=>{V!==H.current&&(H.current=V,y(V))},[]),N=C.useCallback(V=>{V!==R.current&&(R.current=V,x(V))},[]),k=s||S,P=a||j,H=C.useRef(null),R=C.useRef(null),T=C.useRef(f),G=c!=null,Y=H1(c),O=H1(i),E=H1(d),W=C.useCallback(()=>{if(!H.current||!R.current)return;const V={placement:t,strategy:n,middleware:g};O.current&&(V.platform=O.current),Q8(H.current,R.current,V).then(ee=>{const ue={...ee,isPositioned:E.current!==!1};z.current&&!Nm(T.current,ue)&&(T.current=ue,zl.flushSync(()=>{m(ue)}))})},[g,t,n,O,E]);Bp(()=>{d===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,m(V=>({...V,isPositioned:!1})))},[d]);const z=C.useRef(!1);Bp(()=>(z.current=!0,()=>{z.current=!1}),[]),Bp(()=>{if(k&&(H.current=k),P&&(R.current=P),k&&P){if(Y.current)return Y.current(k,P,W);W()}},[k,P,W,Y,G]);const le=C.useMemo(()=>({reference:H,floating:R,setReference:b,setFloating:N}),[b,N]),J=C.useMemo(()=>({reference:k,floating:P}),[k,P]),fe=C.useMemo(()=>{const V={position:n,left:0,top:0};if(!J.floating)return V;const ee=Jx(J.floating,f.x),ue=Jx(J.floating,f.y);return o?{...V,transform:\"translate(\"+ee+\"px, \"+ue+\"px)\",...KN(J.floating)>=1.5&&{willChange:\"transform\"}}:{position:n,left:ee,top:ue}},[n,o,J.floating,f.x,f.y]);return C.useMemo(()=>({...f,update:W,refs:le,elements:J,floatingStyles:fe}),[f,W,le,J,fe])}const X8=e=>{function t(n){return{}.hasOwnProperty.call(n,\"current\")}return{name:\"arrow\",options:e,fn(n){const{element:r,padding:i}=typeof e==\"function\"?e(n):e;return r&&t(r)?r.current!=null?Xx({element:r.current,padding:i}).fn(n):{}:r?Xx({element:r,padding:i}).fn(n):{}}}},J8=(e,t)=>({...$8(e),options:[e,t]}),eE=(e,t)=>({...W8(e),options:[e,t]}),tE=(e,t)=>({...Z8(e),options:[e,t]}),nE=(e,t)=>({...H8(e),options:[e,t]}),rE=(e,t)=>({...G8(e),options:[e,t]}),iE=(e,t)=>({...K8(e),options:[e,t]}),sE=(e,t)=>({...X8(e),options:[e,t]});var aE=\"Arrow\",ZN=C.forwardRef((e,t)=>{const{children:n,width:r=10,height:i=5,...s}=e;return l.jsx(bt.svg,{...s,ref:t,width:r,height:i,viewBox:\"0 0 30 10\",preserveAspectRatio:\"none\",children:e.asChild?n:l.jsx(\"polygon\",{points:\"0,0 30,0 15,10\"})})});ZN.displayName=aE;var oE=ZN;function dy(e){const[t,n]=C.useState(void 0);return Zn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let a,o;if(\"borderBoxSize\"in s){const c=s.borderBoxSize,d=Array.isArray(c)?c[0]:c;a=d.inlineSize,o=d.blockSize}else a=e.offsetWidth,o=e.offsetHeight;n({width:a,height:o})});return r.observe(e,{box:\"border-box\"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var fy=\"Popper\",[QN,l0]=hs(fy),[lE,YN]=QN(fy),XN=e=>{const{__scopePopper:t,children:n}=e,[r,i]=C.useState(null);return l.jsx(lE,{scope:t,anchor:r,onAnchorChange:i,children:n})};XN.displayName=fy;var JN=\"PopperAnchor\",eS=C.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,s=YN(JN,n),a=C.useRef(null),o=en(t,a);return C.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:l.jsx(bt.div,{...i,ref:o})});eS.displayName=JN;var hy=\"PopperContent\",[cE,uE]=QN(hy),tS=C.forwardRef((e,t)=>{var re,he,me,_e,Ne,Ee;const{__scopePopper:n,side:r=\"bottom\",sideOffset:i=0,align:s=\"center\",alignOffset:a=0,arrowPadding:o=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:f=0,sticky:m=\"partial\",hideWhenDetached:g=!1,updatePositionStrategy:p=\"optimized\",onPlaced:S,...y}=e,j=YN(hy,n),[x,b]=C.useState(null),N=en(t,Me=>b(Me)),[k,P]=C.useState(null),H=dy(k),R=(H==null?void 0:H.width)??0,T=(H==null?void 0:H.height)??0,G=r+(s!==\"center\"?\"-\"+s:\"\"),Y=typeof f==\"number\"?f:{top:0,right:0,bottom:0,left:0,...f},O=Array.isArray(d)?d:[d],E=O.length>0,W={padding:Y,boundary:O.filter(fE),altBoundary:E},{refs:z,floatingStyles:le,placement:J,isPositioned:fe,middlewareData:V}=Y8({strategy:\"fixed\",placement:G,whileElementsMounted:(...Me)=>V8(...Me,{animationFrame:p===\"always\"}),elements:{reference:j.anchor},middleware:[J8({mainAxis:i+T,alignmentAxis:a}),c&&eE({mainAxis:!0,crossAxis:!1,limiter:m===\"partial\"?tE():void 0,...W}),c&&nE({...W}),rE({...W,apply:({elements:Me,rects:tt,availableWidth:we,availableHeight:Q})=>{const{width:st,height:Je}=tt.reference,Ie=Me.floating.style;Ie.setProperty(\"--radix-popper-available-width\",`${we}px`),Ie.setProperty(\"--radix-popper-available-height\",`${Q}px`),Ie.setProperty(\"--radix-popper-anchor-width\",`${st}px`),Ie.setProperty(\"--radix-popper-anchor-height\",`${Je}px`)}}),k&&sE({element:k,padding:o}),hE({arrowWidth:R,arrowHeight:T}),g&&iE({strategy:\"referenceHidden\",...W})]}),[ee,ue]=iS(J),je=Ir(S);Zn(()=>{fe&&(je==null||je())},[fe,je]);const I=(re=V.arrow)==null?void 0:re.x,$=(he=V.arrow)==null?void 0:he.y,Z=((me=V.arrow)==null?void 0:me.centerOffset)!==0,[X,oe]=C.useState();return Zn(()=>{x&&oe(window.getComputedStyle(x).zIndex)},[x]),l.jsx(\"div\",{ref:z.setFloating,\"data-radix-popper-content-wrapper\":\"\",style:{...le,transform:fe?le.transform:\"translate(0, -200%)\",minWidth:\"max-content\",zIndex:X,\"--radix-popper-transform-origin\":[(_e=V.transformOrigin)==null?void 0:_e.x,(Ne=V.transformOrigin)==null?void 0:Ne.y].join(\" \"),...((Ee=V.hide)==null?void 0:Ee.referenceHidden)&&{visibility:\"hidden\",pointerEvents:\"none\"}},dir:e.dir,children:l.jsx(cE,{scope:n,placedSide:ee,onArrowChange:P,arrowX:I,arrowY:$,shouldHideArrow:Z,children:l.jsx(bt.div,{\"data-side\":ee,\"data-align\":ue,...y,ref:N,style:{...y.style,animation:fe?void 0:\"none\"}})})})});tS.displayName=hy;var nS=\"PopperArrow\",dE={top:\"bottom\",right:\"left\",bottom:\"top\",left:\"right\"},rS=C.forwardRef(function(t,n){const{__scopePopper:r,...i}=t,s=uE(nS,r),a=dE[s.placedSide];return l.jsx(\"span\",{ref:s.onArrowChange,style:{position:\"absolute\",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:\"\",right:\"0 0\",bottom:\"center 0\",left:\"100% 0\"}[s.placedSide],transform:{top:\"translateY(100%)\",right:\"translateY(50%) rotate(90deg) translateX(-50%)\",bottom:\"rotate(180deg)\",left:\"translateY(50%) rotate(-90deg) translateX(50%)\"}[s.placedSide],visibility:s.shouldHideArrow?\"hidden\":void 0},children:l.jsx(oE,{...i,ref:n,style:{...i.style,display:\"block\"}})})});rS.displayName=nS;function fE(e){return e!==null}var hE=e=>({name:\"transformOrigin\",options:e,fn(t){var j,x,b;const{placement:n,rects:r,middlewareData:i}=t,a=((j=i.arrow)==null?void 0:j.centerOffset)!==0,o=a?0:e.arrowWidth,c=a?0:e.arrowHeight,[d,f]=iS(n),m={start:\"0%\",center:\"50%\",end:\"100%\"}[f],g=(((x=i.arrow)==null?void 0:x.x)??0)+o/2,p=(((b=i.arrow)==null?void 0:b.y)??0)+c/2;let S=\"\",y=\"\";return d===\"bottom\"?(S=a?m:`${g}px`,y=`${-c}px`):d===\"top\"?(S=a?m:`${g}px`,y=`${r.floating.height+c}px`):d===\"right\"?(S=`${-c}px`,y=a?m:`${p}px`):d===\"left\"&&(S=`${r.floating.width+c}px`,y=a?m:`${p}px`),{data:{x:S,y}}}});function iS(e){const[t,n=\"center\"]=e.split(\"-\");return[t,n]}var pE=XN,sS=eS,aS=tS,oS=rS,[c0,cF]=hs(\"Tooltip\",[l0]),py=l0(),lS=\"TooltipProvider\",mE=700,ew=\"tooltip.open\",[gE,cS]=c0(lS),uS=e=>{const{__scopeTooltip:t,delayDuration:n=mE,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=e,a=C.useRef(!0),o=C.useRef(!1),c=C.useRef(0);return C.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),l.jsx(gE,{scope:t,isOpenDelayedRef:a,delayDuration:n,onOpen:C.useCallback(()=>{window.clearTimeout(c.current),a.current=!1},[]),onClose:C.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:o,onPointerInTransitChange:C.useCallback(d=>{o.current=d},[]),disableHoverableContent:i,children:s})};uS.displayName=lS;var dS=\"Tooltip\",[uF,u0]=c0(dS),Cv=\"TooltipTrigger\",vE=C.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=u0(Cv,n),s=cS(Cv,n),a=py(n),o=C.useRef(null),c=en(t,o,i.onTriggerChange),d=C.useRef(!1),f=C.useRef(!1),m=C.useCallback(()=>d.current=!1,[]);return C.useEffect(()=>()=>document.removeEventListener(\"pointerup\",m),[m]),l.jsx(sS,{asChild:!0,...a,children:l.jsx(bt.button,{\"aria-describedby\":i.open?i.contentId:void 0,\"data-state\":i.stateAttribute,...r,ref:c,onPointerMove:ot(e.onPointerMove,g=>{g.pointerType!==\"touch\"&&!f.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),f.current=!0)}),onPointerLeave:ot(e.onPointerLeave,()=>{i.onTriggerLeave(),f.current=!1}),onPointerDown:ot(e.onPointerDown,()=>{i.open&&i.onClose(),d.current=!0,document.addEventListener(\"pointerup\",m,{once:!0})}),onFocus:ot(e.onFocus,()=>{d.current||i.onOpen()}),onBlur:ot(e.onBlur,i.onClose),onClick:ot(e.onClick,i.onClose)})})});vE.displayName=Cv;var yE=\"TooltipPortal\",[dF,xE]=c0(yE,{forceMount:void 0}),Cu=\"TooltipContent\",fS=C.forwardRef((e,t)=>{const n=xE(Cu,e.__scopeTooltip),{forceMount:r=n.forceMount,side:i=\"top\",...s}=e,a=u0(Cu,e.__scopeTooltip);return l.jsx(Bo,{present:r||a.open,children:a.disableHoverableContent?l.jsx(hS,{side:i,...s,ref:t}):l.jsx(wE,{side:i,...s,ref:t})})}),wE=C.forwardRef((e,t)=>{const n=u0(Cu,e.__scopeTooltip),r=cS(Cu,e.__scopeTooltip),i=C.useRef(null),s=en(t,i),[a,o]=C.useState(null),{trigger:c,onClose:d}=n,f=i.current,{onPointerInTransitChange:m}=r,g=C.useCallback(()=>{o(null),m(!1)},[m]),p=C.useCallback((S,y)=>{const j=S.currentTarget,x={x:S.clientX,y:S.clientY},b=_E(x,j.getBoundingClientRect()),N=CE(x,b),k=kE(y.getBoundingClientRect()),P=PE([...N,...k]);o(P),m(!0)},[m]);return C.useEffect(()=>()=>g(),[g]),C.useEffect(()=>{if(c&&f){const S=j=>p(j,f),y=j=>p(j,c);return c.addEventListener(\"pointerleave\",S),f.addEventListener(\"pointerleave\",y),()=>{c.removeEventListener(\"pointerleave\",S),f.removeEventListener(\"pointerleave\",y)}}},[c,f,p,g]),C.useEffect(()=>{if(a){const S=y=>{const j=y.target,x={x:y.clientX,y:y.clientY},b=(c==null?void 0:c.contains(j))||(f==null?void 0:f.contains(j)),N=!AE(x,a);b?g():N&&(g(),d())};return document.addEventListener(\"pointermove\",S),()=>document.removeEventListener(\"pointermove\",S)}},[c,f,a,d,g]),l.jsx(hS,{...e,ref:s})}),[bE,NE]=c0(dS,{isInside:!1}),SE=OP(\"TooltipContent\"),hS=C.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,\"aria-label\":i,onEscapeKeyDown:s,onPointerDownOutside:a,...o}=e,c=u0(Cu,n),d=py(n),{onClose:f}=c;return C.useEffect(()=>(document.addEventListener(ew,f),()=>document.removeEventListener(ew,f)),[f]),C.useEffect(()=>{if(c.trigger){const m=g=>{const p=g.target;p!=null&&p.contains(c.trigger)&&f()};return window.addEventListener(\"scroll\",m,{capture:!0}),()=>window.removeEventListener(\"scroll\",m,{capture:!0})}},[c.trigger,f]),l.jsx(Qf,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:m=>m.preventDefault(),onDismiss:f,children:l.jsxs(aS,{\"data-state\":c.stateAttribute,...d,...o,ref:t,style:{...o.style,\"--radix-tooltip-content-transform-origin\":\"var(--radix-popper-transform-origin)\",\"--radix-tooltip-content-available-width\":\"var(--radix-popper-available-width)\",\"--radix-tooltip-content-available-height\":\"var(--radix-popper-available-height)\",\"--radix-tooltip-trigger-width\":\"var(--radix-popper-anchor-width)\",\"--radix-tooltip-trigger-height\":\"var(--radix-popper-anchor-height)\"},children:[l.jsx(SE,{children:r}),l.jsx(bE,{scope:n,isInside:!0,children:l.jsx(tL,{id:c.contentId,role:\"tooltip\",children:i||r})})]})})});fS.displayName=Cu;var pS=\"TooltipArrow\",jE=C.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=py(n);return NE(pS,n).isInside?null:l.jsx(oS,{...i,...r,ref:t})});jE.displayName=pS;function _E(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(n,r,i,s)){case s:return\"left\";case i:return\"right\";case n:return\"top\";case r:return\"bottom\";default:throw new Error(\"unreachable\")}}function CE(e,t,n=5){const r=[];switch(t){case\"top\":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case\"bottom\":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case\"left\":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case\"right\":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function kE(e){const{top:t,right:n,bottom:r,left:i}=e;return[{x:i,y:t},{x:n,y:t},{x:n,y:r},{x:i,y:r}]}function AE(e,t){const{x:n,y:r}=e;let i=!1;for(let s=0,a=t.length-1;s<t.length;a=s++){const o=t[s].x,c=t[s].y,d=t[a].x,f=t[a].y;c>r!=f>r&&n<(d-o)*(r-c)/(f-c)+o&&(i=!i)}return i}function PE(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),LE(t)}function LE(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const i=e[r];for(;t.length>=2;){const s=t[t.length-1],a=t[t.length-2];if((s.x-a.x)*(i.y-a.y)>=(s.y-a.y)*(i.x-a.x))t.pop();else break}t.push(i)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const i=e[r];for(;n.length>=2;){const s=n[n.length-1],a=n[n.length-2];if((s.x-a.x)*(i.y-a.y)>=(s.y-a.y)*(i.x-a.x))n.pop();else break}n.push(i)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var EE=uS,mS=fS;const TE=EE,RE=C.forwardRef(({className:e,sideOffset:t=4,...n},r)=>l.jsx(mS,{ref:r,sideOffset:t,className:wt(\"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",e),...n}));RE.displayName=mS.displayName;function d0(){const{data:e,isLoading:t,error:n}=Oi({queryKey:[\"/api/me\"],retry:!1,staleTime:0});return{organization:e,isLoading:t,isAuthenticated:!!e&&!n}}const IE=i0(\"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",{variants:{variant:{default:\"bg-primary text-primary-foreground hover:bg-primary/90\",destructive:\"bg-destructive text-destructive-foreground hover:bg-destructive/90\",outline:\"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",secondary:\"bg-secondary text-secondary-foreground hover:bg-secondary/80\",ghost:\"hover:bg-accent hover:text-accent-foreground\",link:\"text-primary underline-offset-4 hover:underline\"},size:{default:\"h-10 px-4 py-2\",sm:\"h-9 rounded-md px-3\",lg:\"h-11 rounded-md px-8\",icon:\"h-10 w-10\"}},defaultVariants:{variant:\"default\",size:\"default\"}}),Xe=C.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...i},s)=>{const a=r?Q3:\"button\";return l.jsx(a,{className:wt(IE({variant:t,size:n,className:e})),ref:s,...i})});Xe.displayName=\"Button\";var my=\"Avatar\",[OE,fF]=hs(my),[FE,gS]=OE(my),vS=C.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[i,s]=C.useState(\"idle\");return l.jsx(FE,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:s,children:l.jsx(bt.span,{...r,ref:t})})});vS.displayName=my;var yS=\"AvatarImage\",xS=C.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...s}=e,a=gS(yS,n),o=ME(r,s),c=Ir(d=>{i(d),a.onImageLoadingStatusChange(d)});return Zn(()=>{o!==\"idle\"&&c(o)},[o,c]),o===\"loaded\"?l.jsx(bt.img,{...s,ref:t,src:r}):null});xS.displayName=yS;var wS=\"AvatarFallback\",bS=C.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...i}=e,s=gS(wS,n),[a,o]=C.useState(r===void 0);return C.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>o(!0),r);return()=>window.clearTimeout(c)}},[r]),a&&s.imageLoadingStatus!==\"loaded\"?l.jsx(bt.span,{...i,ref:t}):null});bS.displayName=wS;function tw(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?\"loaded\":\"loading\"):\"error\":\"idle\"}function ME(e,{referrerPolicy:t,crossOrigin:n}){const r=BE(),i=C.useRef(null),s=r?(i.current||(i.current=new window.Image),i.current):null,[a,o]=C.useState(()=>tw(s,e));return Zn(()=>{o(tw(s,e))},[s,e]),Zn(()=>{const c=m=>()=>{o(m)};if(!s)return;const d=c(\"loaded\"),f=c(\"error\");return s.addEventListener(\"load\",d),s.addEventListener(\"error\",f),t&&(s.referrerPolicy=t),typeof n==\"string\"&&(s.crossOrigin=n),()=>{s.removeEventListener(\"load\",d),s.removeEventListener(\"error\",f)}},[s,n,t]),a}function DE(){return()=>{}}function BE(){return C.useSyncExternalStore(DE,()=>!0,()=>!1)}var NS=vS,SS=xS,jS=bS;const Yd=C.forwardRef(({className:e,...t},n)=>l.jsx(NS,{ref:n,className:wt(\"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",e),...t}));Yd.displayName=NS.displayName;const _S=C.forwardRef(({className:e,...t},n)=>l.jsx(SS,{ref:n,className:wt(\"aspect-square h-full w-full\",e),...t}));_S.displayName=SS.displayName;const Xd=C.forwardRef(({className:e,...t},n)=>l.jsx(jS,{ref:n,className:wt(\"flex h-full w-full items-center justify-center rounded-full bg-muted\",e),...t}));Xd.displayName=jS.displayName;function CS({isAuthenticated:e,organization:t,onShowLogin:n,onShowRegistration:r,onLogout:i}){return l.jsx(\"nav\",{className:\"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50\",children:l.jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",children:l.jsxs(\"div\",{className:\"flex justify-between items-center h-16\",children:[l.jsxs(\"div\",{className:\"flex items-center space-x-8\",children:[l.jsx(\"div\",{className:\"flex-shrink-0\",children:l.jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[l.jsx(\"i\",{className:\"fas fa-car text-primary text-2xl\"}),l.jsx(\"span\",{className:\"text-xl font-bold text-gray-900\",children:\"Covoit'Sports\"})]})}),!e&&l.jsxs(\"div\",{className:\"hidden md:flex items-center space-x-6\",children:[l.jsx(\"a\",{href:\"#features\",className:\"text-gray-600 hover:text-primary transition-colors\",children:\"FonctionnalitÃ©s\"}),l.jsx(\"a\",{href:\"#how-it-works\",className:\"text-gray-600 hover:text-primary transition-colors\",children:\"Comment Ã§a marche\"})]})]}),l.jsx(\"div\",{className:\"flex items-center space-x-4\",children:e&&t?l.jsxs(l.Fragment,{children:[l.jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[l.jsxs(Yd,{className:\"w-10 h-10\",children:[l.jsx(_S,{src:t.logoUrl,alt:t.name}),l.jsx(Xd,{children:t.name.slice(0,2).toUpperCase()})]}),l.jsx(\"span\",{className:\"font-medium text-gray-900\",children:t.name})]}),l.jsx(Xe,{variant:\"ghost\",size:\"sm\",onClick:i,className:\"text-gray-400 hover:text-gray-600\",children:l.jsx(\"i\",{className:\"fas fa-sign-out-alt\"})})]}):l.jsxs(l.Fragment,{children:[l.jsx(Xe,{onClick:n,className:\"bg-white text-gray-600 hover:text-primary\",children:\"Se connecter\"}),l.jsx(Xe,{onClick:r,className:\"bg-primary text-white hover:bg-blue-700\",children:\"S'inscrire\"})]})})]})})})}var G1=\"focusScope.autoFocusOnMount\",K1=\"focusScope.autoFocusOnUnmount\",nw={bubbles:!1,cancelable:!0},zE=\"FocusScope\",gy=C.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...a}=e,[o,c]=C.useState(null),d=Ir(i),f=Ir(s),m=C.useRef(null),g=en(t,y=>c(y)),p=C.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;C.useEffect(()=>{if(r){let y=function(N){if(p.paused||!o)return;const k=N.target;o.contains(k)?m.current=k:Ya(m.current,{select:!0})},j=function(N){if(p.paused||!o)return;const k=N.relatedTarget;k!==null&&(o.contains(k)||Ya(m.current,{select:!0}))},x=function(N){if(document.activeElement===document.body)for(const P of N)P.removedNodes.length>0&&Ya(o)};document.addEventListener(\"focusin\",y),document.addEventListener(\"focusout\",j);const b=new MutationObserver(x);return o&&b.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener(\"focusin\",y),document.removeEventListener(\"focusout\",j),b.disconnect()}}},[r,o,p.paused]),C.useEffect(()=>{if(o){iw.add(p);const y=document.activeElement;if(!o.contains(y)){const x=new CustomEvent(G1,nw);o.addEventListener(G1,d),o.dispatchEvent(x),x.defaultPrevented||(qE(HE(kS(o)),{select:!0}),document.activeElement===y&&Ya(o))}return()=>{o.removeEventListener(G1,d),setTimeout(()=>{const x=new CustomEvent(K1,nw);o.addEventListener(K1,f),o.dispatchEvent(x),x.defaultPrevented||Ya(y??document.body,{select:!0}),o.removeEventListener(K1,f),iw.remove(p)},0)}}},[o,d,f,p]);const S=C.useCallback(y=>{if(!n&&!r||p.paused)return;const j=y.key===\"Tab\"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,x=document.activeElement;if(j&&x){const b=y.currentTarget,[N,k]=UE(b);N&&k?!y.shiftKey&&x===k?(y.preventDefault(),n&&Ya(N,{select:!0})):y.shiftKey&&x===N&&(y.preventDefault(),n&&Ya(k,{select:!0})):x===b&&y.preventDefault()}},[n,r,p.paused]);return l.jsx(bt.div,{tabIndex:-1,...a,ref:g,onKeyDown:S})});gy.displayName=zE;function qE(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Ya(r,{select:t}),document.activeElement!==n)return}function UE(e){const t=kS(e),n=rw(t,e),r=rw(t.reverse(),e);return[n,r]}function kS(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName===\"INPUT\"&&r.type===\"hidden\";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function rw(e,t){for(const n of e)if(!VE(n,{upTo:t}))return n}function VE(e,{upTo:t}){if(getComputedStyle(e).visibility===\"hidden\")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display===\"none\")return!0;e=e.parentElement}return!1}function $E(e){return e instanceof HTMLInputElement&&\"select\"in e}function Ya(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&$E(e)&&t&&e.select()}}var iw=WE();function WE(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=sw(e,t),e.unshift(t)},remove(t){var n;e=sw(e,t),(n=e[0])==null||n.resume()}}}function sw(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function HE(e){return e.filter(t=>t.tagName!==\"A\")}var Z1=0;function AS(){C.useEffect(()=>{const e=document.querySelectorAll(\"[data-radix-focus-guard]\");return document.body.insertAdjacentElement(\"afterbegin\",e[0]??aw()),document.body.insertAdjacentElement(\"beforeend\",e[1]??aw()),Z1++,()=>{Z1===1&&document.querySelectorAll(\"[data-radix-focus-guard]\").forEach(t=>t.remove()),Z1--}},[])}function aw(){const e=document.createElement(\"span\");return e.setAttribute(\"data-radix-focus-guard\",\"\"),e.tabIndex=0,e.style.outline=\"none\",e.style.opacity=\"0\",e.style.position=\"fixed\",e.style.pointerEvents=\"none\",e}var Is=function(){return Is=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Is.apply(this,arguments)};function PS(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==\"function\")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function GE(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var zp=\"right-scroll-bar-position\",qp=\"width-before-scroll-bar\",KE=\"with-scroll-bars-hidden\",ZE=\"--removed-body-scroll-bar-size\";function Q1(e,t){return typeof e==\"function\"?e(t):e&&(e.current=t),e}function QE(e,t){var n=C.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var YE=typeof window<\"u\"?C.useLayoutEffect:C.useEffect,ow=new WeakMap;function XE(e,t){var n=QE(null,function(r){return e.forEach(function(i){return Q1(i,r)})});return YE(function(){var r=ow.get(n);if(r){var i=new Set(r),s=new Set(e),a=n.current;i.forEach(function(o){s.has(o)||Q1(o,null)}),s.forEach(function(o){i.has(o)||Q1(o,a)})}ow.set(n,e)},[e]),n}function JE(e){return e}function e7(e,t){t===void 0&&(t=JE);var n=[],r=!1,i={read:function(){if(r)throw new Error(\"Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.\");return n.length?n[n.length-1]:e},useMedium:function(s){var a=t(s,r);return n.push(a),function(){n=n.filter(function(o){return o!==a})}},assignSyncMedium:function(s){for(r=!0;n.length;){var a=n;n=[],a.forEach(s)}n={push:function(o){return s(o)},filter:function(){return n}}},assignMedium:function(s){r=!0;var a=[];if(n.length){var o=n;n=[],o.forEach(s),a=n}var c=function(){var f=a;a=[],f.forEach(s)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(f){a.push(f),d()},filter:function(f){return a=a.filter(f),n}}}};return i}function t7(e){e===void 0&&(e={});var t=e7(null);return t.options=Is({async:!0,ssr:!1},e),t}var LS=function(e){var t=e.sideCar,n=PS(e,[\"sideCar\"]);if(!t)throw new Error(\"Sidecar: please provide `sideCar` property to import the right car\");var r=t.read();if(!r)throw new Error(\"Sidecar medium not found\");return C.createElement(r,Is({},n))};LS.isSideCarExport=!0;function n7(e,t){return e.useMedium(t),LS}var ES=t7(),Y1=function(){},f0=C.forwardRef(function(e,t){var n=C.useRef(null),r=C.useState({onScrollCapture:Y1,onWheelCapture:Y1,onTouchMoveCapture:Y1}),i=r[0],s=r[1],a=e.forwardProps,o=e.children,c=e.className,d=e.removeScrollBar,f=e.enabled,m=e.shards,g=e.sideCar,p=e.noIsolation,S=e.inert,y=e.allowPinchZoom,j=e.as,x=j===void 0?\"div\":j,b=e.gapMode,N=PS(e,[\"forwardProps\",\"children\",\"className\",\"removeScrollBar\",\"enabled\",\"shards\",\"sideCar\",\"noIsolation\",\"inert\",\"allowPinchZoom\",\"as\",\"gapMode\"]),k=g,P=XE([n,t]),H=Is(Is({},N),i);return C.createElement(C.Fragment,null,f&&C.createElement(k,{sideCar:ES,removeScrollBar:d,shards:m,noIsolation:p,inert:S,setCallbacks:s,allowPinchZoom:!!y,lockRef:n,gapMode:b}),a?C.cloneElement(C.Children.only(o),Is(Is({},H),{ref:P})):C.createElement(x,Is({},H,{className:c,ref:P}),o))});f0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};f0.classNames={fullWidth:qp,zeroRight:zp};var r7=function(){if(typeof __webpack_nonce__<\"u\")return __webpack_nonce__};function i7(){if(!document)return null;var e=document.createElement(\"style\");e.type=\"text/css\";var t=r7();return t&&e.setAttribute(\"nonce\",t),e}function s7(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function a7(e){var t=document.head||document.getElementsByTagName(\"head\")[0];t.appendChild(e)}var o7=function(){var e=0,t=null;return{add:function(n){e==0&&(t=i7())&&(s7(t,n),a7(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},l7=function(){var e=o7();return function(t,n){C.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},TS=function(){var e=l7(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},c7={left:0,top:0,right:0,gap:0},X1=function(e){return parseInt(e||\"\",10)||0},u7=function(e){var t=window.getComputedStyle(document.body),n=t[e===\"padding\"?\"paddingLeft\":\"marginLeft\"],r=t[e===\"padding\"?\"paddingTop\":\"marginTop\"],i=t[e===\"padding\"?\"paddingRight\":\"marginRight\"];return[X1(n),X1(r),X1(i)]},d7=function(e){if(e===void 0&&(e=\"margin\"),typeof window>\"u\")return c7;var t=u7(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},f7=TS(),Yc=\"data-scroll-locked\",h7=function(e,t,n,r){var i=e.left,s=e.top,a=e.right,o=e.gap;return n===void 0&&(n=\"margin\"),`\n  .`.concat(KE,` {\n   overflow: hidden `).concat(r,`;\n   padding-right: `).concat(o,\"px \").concat(r,`;\n  }\n  body[`).concat(Yc,`] {\n    overflow: hidden `).concat(r,`;\n    overscroll-behavior: contain;\n    `).concat([t&&\"position: relative \".concat(r,\";\"),n===\"margin\"&&`\n    padding-left: `.concat(i,`px;\n    padding-top: `).concat(s,`px;\n    padding-right: `).concat(a,`px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: `).concat(o,\"px \").concat(r,`;\n    `),n===\"padding\"&&\"padding-right: \".concat(o,\"px \").concat(r,\";\")].filter(Boolean).join(\"\"),`\n  }\n  \n  .`).concat(zp,` {\n    right: `).concat(o,\"px \").concat(r,`;\n  }\n  \n  .`).concat(qp,` {\n    margin-right: `).concat(o,\"px \").concat(r,`;\n  }\n  \n  .`).concat(zp,\" .\").concat(zp,` {\n    right: 0 `).concat(r,`;\n  }\n  \n  .`).concat(qp,\" .\").concat(qp,` {\n    margin-right: 0 `).concat(r,`;\n  }\n  \n  body[`).concat(Yc,`] {\n    `).concat(ZE,\": \").concat(o,`px;\n  }\n`)},lw=function(){var e=parseInt(document.body.getAttribute(Yc)||\"0\",10);return isFinite(e)?e:0},p7=function(){C.useEffect(function(){return document.body.setAttribute(Yc,(lw()+1).toString()),function(){var e=lw()-1;e<=0?document.body.removeAttribute(Yc):document.body.setAttribute(Yc,e.toString())}},[])},m7=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?\"margin\":r;p7();var s=C.useMemo(function(){return d7(i)},[i]);return C.createElement(f7,{styles:h7(s,!t,i,n?\"\":\"!important\")})},kv=!1;if(typeof window<\"u\")try{var gp=Object.defineProperty({},\"passive\",{get:function(){return kv=!0,!0}});window.addEventListener(\"test\",gp,gp),window.removeEventListener(\"test\",gp,gp)}catch{kv=!1}var xc=kv?{passive:!1}:!1,g7=function(e){return e.tagName===\"TEXTAREA\"},RS=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!==\"hidden\"&&!(n.overflowY===n.overflowX&&!g7(e)&&n[t]===\"visible\")},v7=function(e){return RS(e,\"overflowY\")},y7=function(e){return RS(e,\"overflowX\")},cw=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<\"u\"&&r instanceof ShadowRoot&&(r=r.host);var i=IS(e,r);if(i){var s=OS(e,r),a=s[1],o=s[2];if(a>o)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},x7=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},w7=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},IS=function(e,t){return e===\"v\"?v7(t):y7(t)},OS=function(e,t){return e===\"v\"?x7(t):w7(t)},b7=function(e,t){return e===\"h\"&&t===\"rtl\"?-1:1},N7=function(e,t,n,r,i){var s=b7(e,window.getComputedStyle(t).direction),a=s*r,o=n.target,c=t.contains(o),d=!1,f=a>0,m=0,g=0;do{var p=OS(e,o),S=p[0],y=p[1],j=p[2],x=y-j-s*S;(S||x)&&IS(e,o)&&(m+=x,g+=S),o instanceof ShadowRoot?o=o.host:o=o.parentNode}while(!c&&o!==document.body||c&&(t.contains(o)||t===o));return(f&&(Math.abs(m)<1||!i)||!f&&(Math.abs(g)<1||!i))&&(d=!0),d},vp=function(e){return\"changedTouches\"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},uw=function(e){return[e.deltaX,e.deltaY]},dw=function(e){return e&&\"current\"in e?e.current:e},S7=function(e,t){return e[0]===t[0]&&e[1]===t[1]},j7=function(e){return`\n  .block-interactivity-`.concat(e,` {pointer-events: none;}\n  .allow-interactivity-`).concat(e,` {pointer-events: all;}\n`)},_7=0,wc=[];function C7(e){var t=C.useRef([]),n=C.useRef([0,0]),r=C.useRef(),i=C.useState(_7++)[0],s=C.useState(TS)[0],a=C.useRef(e);C.useEffect(function(){a.current=e},[e]),C.useEffect(function(){if(e.inert){document.body.classList.add(\"block-interactivity-\".concat(i));var y=GE([e.lockRef.current],(e.shards||[]).map(dw),!0).filter(Boolean);return y.forEach(function(j){return j.classList.add(\"allow-interactivity-\".concat(i))}),function(){document.body.classList.remove(\"block-interactivity-\".concat(i)),y.forEach(function(j){return j.classList.remove(\"allow-interactivity-\".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var o=C.useCallback(function(y,j){if(\"touches\"in y&&y.touches.length===2||y.type===\"wheel\"&&y.ctrlKey)return!a.current.allowPinchZoom;var x=vp(y),b=n.current,N=\"deltaX\"in y?y.deltaX:b[0]-x[0],k=\"deltaY\"in y?y.deltaY:b[1]-x[1],P,H=y.target,R=Math.abs(N)>Math.abs(k)?\"h\":\"v\";if(\"touches\"in y&&R===\"h\"&&H.type===\"range\")return!1;var T=cw(R,H);if(!T)return!0;if(T?P=R:(P=R===\"v\"?\"h\":\"v\",T=cw(R,H)),!T)return!1;if(!r.current&&\"changedTouches\"in y&&(N||k)&&(r.current=P),!P)return!0;var G=r.current||P;return N7(G,j,y,G===\"h\"?N:k,!0)},[]),c=C.useCallback(function(y){var j=y;if(!(!wc.length||wc[wc.length-1]!==s)){var x=\"deltaY\"in j?uw(j):vp(j),b=t.current.filter(function(P){return P.name===j.type&&(P.target===j.target||j.target===P.shadowParent)&&S7(P.delta,x)})[0];if(b&&b.should){j.cancelable&&j.preventDefault();return}if(!b){var N=(a.current.shards||[]).map(dw).filter(Boolean).filter(function(P){return P.contains(j.target)}),k=N.length>0?o(j,N[0]):!a.current.noIsolation;k&&j.cancelable&&j.preventDefault()}}},[]),d=C.useCallback(function(y,j,x,b){var N={name:y,delta:j,target:x,should:b,shadowParent:k7(x)};t.current.push(N),setTimeout(function(){t.current=t.current.filter(function(k){return k!==N})},1)},[]),f=C.useCallback(function(y){n.current=vp(y),r.current=void 0},[]),m=C.useCallback(function(y){d(y.type,uw(y),y.target,o(y,e.lockRef.current))},[]),g=C.useCallback(function(y){d(y.type,vp(y),y.target,o(y,e.lockRef.current))},[]);C.useEffect(function(){return wc.push(s),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:g}),document.addEventListener(\"wheel\",c,xc),document.addEventListener(\"touchmove\",c,xc),document.addEventListener(\"touchstart\",f,xc),function(){wc=wc.filter(function(y){return y!==s}),document.removeEventListener(\"wheel\",c,xc),document.removeEventListener(\"touchmove\",c,xc),document.removeEventListener(\"touchstart\",f,xc)}},[]);var p=e.removeScrollBar,S=e.inert;return C.createElement(C.Fragment,null,S?C.createElement(s,{styles:j7(i)}):null,p?C.createElement(m7,{gapMode:e.gapMode}):null)}function k7(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const A7=n7(ES,C7);var vy=C.forwardRef(function(e,t){return C.createElement(f0,Is({},e,{ref:t,sideCar:A7}))});vy.classNames=f0.classNames;var P7=function(e){if(typeof document>\"u\")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},bc=new WeakMap,yp=new WeakMap,xp={},J1=0,FS=function(e){return e&&(e.host||FS(e.parentNode))},L7=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=FS(n);return r&&e.contains(r)?r:(console.error(\"aria-hidden\",n,\"in not contained inside\",e,\". Doing nothing\"),null)}).filter(function(n){return!!n})},E7=function(e,t,n,r){var i=L7(t,Array.isArray(e)?e:[e]);xp[n]||(xp[n]=new WeakMap);var s=xp[n],a=[],o=new Set,c=new Set(i),d=function(m){!m||o.has(m)||(o.add(m),d(m.parentNode))};i.forEach(d);var f=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(g){if(o.has(g))f(g);else try{var p=g.getAttribute(r),S=p!==null&&p!==\"false\",y=(bc.get(g)||0)+1,j=(s.get(g)||0)+1;bc.set(g,y),s.set(g,j),a.push(g),y===1&&S&&yp.set(g,!0),j===1&&g.setAttribute(n,\"true\"),S||g.setAttribute(r,\"true\")}catch(x){console.error(\"aria-hidden: cannot operate on \",g,x)}})};return f(t),o.clear(),J1++,function(){a.forEach(function(m){var g=bc.get(m)-1,p=s.get(m)-1;bc.set(m,g),s.set(m,p),g||(yp.has(m)||m.removeAttribute(r),yp.delete(m)),p||m.removeAttribute(n)}),J1--,J1||(bc=new WeakMap,bc=new WeakMap,yp=new WeakMap,xp={})}},MS=function(e,t,n){n===void 0&&(n=\"data-aria-hidden\");var r=Array.from(Array.isArray(e)?e:[e]),i=P7(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll(\"[aria-live]\"))),E7(r,i,n,\"aria-hidden\")):function(){return null}},yy=\"Dialog\",[DS,hF]=hs(yy),[T7,ps]=DS(yy),BS=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:a=!0}=e,o=C.useRef(null),c=C.useRef(null),[d=!1,f]=Al({prop:r,defaultProp:i,onChange:s});return l.jsx(T7,{scope:t,triggerRef:o,contentRef:c,contentId:yl(),titleId:yl(),descriptionId:yl(),open:d,onOpenChange:f,onOpenToggle:C.useCallback(()=>f(m=>!m),[f]),modal:a,children:n})};BS.displayName=yy;var zS=\"DialogTrigger\",R7=C.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=ps(zS,n),s=en(t,i.triggerRef);return l.jsx(bt.button,{type:\"button\",\"aria-haspopup\":\"dialog\",\"aria-expanded\":i.open,\"aria-controls\":i.contentId,\"data-state\":by(i.open),...r,ref:s,onClick:ot(e.onClick,i.onOpenToggle)})});R7.displayName=zS;var xy=\"DialogPortal\",[I7,qS]=DS(xy,{forceMount:void 0}),US=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:i}=e,s=ps(xy,t);return l.jsx(I7,{scope:t,forceMount:n,children:C.Children.map(r,a=>l.jsx(Bo,{present:n||s.open,children:l.jsx(t0,{asChild:!0,container:i,children:a})}))})};US.displayName=xy;var Sm=\"DialogOverlay\",VS=C.forwardRef((e,t)=>{const n=qS(Sm,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,s=ps(Sm,e.__scopeDialog);return s.modal?l.jsx(Bo,{present:r||s.open,children:l.jsx(F7,{...i,ref:t})}):null});VS.displayName=Sm;var O7=ju(\"DialogOverlay.RemoveScroll\"),F7=C.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=ps(Sm,n);return l.jsx(vy,{as:O7,allowPinchZoom:!0,shards:[i.contentRef],children:l.jsx(bt.div,{\"data-state\":by(i.open),...r,ref:t,style:{pointerEvents:\"auto\",...r.style}})})}),Ll=\"DialogContent\",$S=C.forwardRef((e,t)=>{const n=qS(Ll,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,s=ps(Ll,e.__scopeDialog);return l.jsx(Bo,{present:r||s.open,children:s.modal?l.jsx(M7,{...i,ref:t}):l.jsx(D7,{...i,ref:t})})});$S.displayName=Ll;var M7=C.forwardRef((e,t)=>{const n=ps(Ll,e.__scopeDialog),r=C.useRef(null),i=en(t,n.contentRef,r);return C.useEffect(()=>{const s=r.current;if(s)return MS(s)},[]),l.jsx(WS,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ot(e.onCloseAutoFocus,s=>{var a;s.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:ot(e.onPointerDownOutside,s=>{const a=s.detail.originalEvent,o=a.button===0&&a.ctrlKey===!0;(a.button===2||o)&&s.preventDefault()}),onFocusOutside:ot(e.onFocusOutside,s=>s.preventDefault())})}),D7=C.forwardRef((e,t)=>{const n=ps(Ll,e.__scopeDialog),r=C.useRef(!1),i=C.useRef(!1);return l.jsx(WS,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var a,o;(a=e.onCloseAutoFocus)==null||a.call(e,s),s.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type===\"pointerdown\"&&(i.current=!0));const a=s.target;((d=n.triggerRef.current)==null?void 0:d.contains(a))&&s.preventDefault(),s.detail.originalEvent.type===\"focusin\"&&i.current&&s.preventDefault()}})}),WS=C.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...a}=e,o=ps(Ll,n),c=C.useRef(null),d=en(t,c);return AS(),l.jsxs(l.Fragment,{children:[l.jsx(gy,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:l.jsx(Qf,{role:\"dialog\",id:o.contentId,\"aria-describedby\":o.descriptionId,\"aria-labelledby\":o.titleId,\"data-state\":by(o.open),...a,ref:d,onDismiss:()=>o.onOpenChange(!1)})}),l.jsxs(l.Fragment,{children:[l.jsx(B7,{titleId:o.titleId}),l.jsx(q7,{contentRef:c,descriptionId:o.descriptionId})]})]})}),wy=\"DialogTitle\",HS=C.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=ps(wy,n);return l.jsx(bt.h2,{id:i.titleId,...r,ref:t})});HS.displayName=wy;var GS=\"DialogDescription\",KS=C.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=ps(GS,n);return l.jsx(bt.p,{id:i.descriptionId,...r,ref:t})});KS.displayName=GS;var ZS=\"DialogClose\",QS=C.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=ps(ZS,n);return l.jsx(bt.button,{type:\"button\",...r,ref:t,onClick:ot(e.onClick,()=>i.onOpenChange(!1))})});QS.displayName=ZS;function by(e){return e?\"open\":\"closed\"}var YS=\"DialogTitleWarning\",[pF,XS]=TP(YS,{contentName:Ll,titleName:wy,docsSlug:\"dialog\"}),B7=({titleId:e})=>{const t=XS(YS),n=`\\`${t.contentName}\\` requires a \\`${t.titleName}\\` for the component to be accessible for screen reader users.\n\nIf you want to hide the \\`${t.titleName}\\`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return C.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},z7=\"DialogDescriptionWarning\",q7=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \\`Description\\` or \\`aria-describedby={undefined}\\` for {${XS(z7).contentName}}.`;return C.useEffect(()=>{var s;const i=(s=e.current)==null?void 0:s.getAttribute(\"aria-describedby\");t&&i&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},U7=BS,V7=US,JS=VS,ej=$S,tj=HS,nj=KS,$7=QS;const Ca=U7,W7=V7,rj=C.forwardRef(({className:e,...t},n)=>l.jsx(JS,{ref:n,className:wt(\"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",e),...t}));rj.displayName=JS.displayName;const Vs=C.forwardRef(({className:e,children:t,...n},r)=>l.jsxs(W7,{children:[l.jsx(rj,{}),l.jsxs(ej,{ref:r,className:wt(\"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",e),...n,children:[t,l.jsxs($7,{className:\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\",children:[l.jsx(AN,{className:\"h-4 w-4\"}),l.jsx(\"span\",{className:\"sr-only\",children:\"Close\"})]})]})]}));Vs.displayName=ej.displayName;const $s=({className:e,...t})=>l.jsx(\"div\",{className:wt(\"flex flex-col space-y-1.5 text-center sm:text-left\",e),...t});$s.displayName=\"DialogHeader\";const Ws=C.forwardRef(({className:e,...t},n)=>l.jsx(tj,{ref:n,className:wt(\"text-lg font-semibold leading-none tracking-tight\",e),...t}));Ws.displayName=tj.displayName;const H7=C.forwardRef(({className:e,...t},n)=>l.jsx(nj,{ref:n,className:wt(\"text-sm text-muted-foreground\",e),...t}));H7.displayName=nj.displayName;const Tt=C.forwardRef(({className:e,type:t,...n},r)=>l.jsx(\"input\",{type:t,className:wt(\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",e),ref:r,...n}));Tt.displayName=\"Input\";var G7=\"Label\",ij=C.forwardRef((e,t)=>l.jsx(bt.label,{...e,ref:t,onMouseDown:n=>{var i;n.target.closest(\"button, input, select, textarea\")||((i=e.onMouseDown)==null||i.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));ij.displayName=G7;var sj=ij;const K7=i0(\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"),an=C.forwardRef(({className:e,...t},n)=>l.jsx(sj,{ref:n,className:wt(K7(),e),...t}));an.displayName=sj.displayName;function Ny(e){const t=C.useRef({value:e,previous:e});return C.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Sy=\"Checkbox\",[Z7,mF]=hs(Sy),[Q7,Y7]=Z7(Sy),aj=C.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:s,required:a,disabled:o,value:c=\"on\",onCheckedChange:d,form:f,...m}=e,[g,p]=C.useState(null),S=en(t,k=>p(k)),y=C.useRef(!1),j=g?f||!!g.closest(\"form\"):!0,[x=!1,b]=Al({prop:i,defaultProp:s,onChange:d}),N=C.useRef(x);return C.useEffect(()=>{const k=g==null?void 0:g.form;if(k){const P=()=>b(N.current);return k.addEventListener(\"reset\",P),()=>k.removeEventListener(\"reset\",P)}},[g,b]),l.jsxs(Q7,{scope:n,state:x,disabled:o,children:[l.jsx(bt.button,{type:\"button\",role:\"checkbox\",\"aria-checked\":jo(x)?\"mixed\":x,\"aria-required\":a,\"data-state\":cj(x),\"data-disabled\":o?\"\":void 0,disabled:o,value:c,...m,ref:S,onKeyDown:ot(e.onKeyDown,k=>{k.key===\"Enter\"&&k.preventDefault()}),onClick:ot(e.onClick,k=>{b(P=>jo(P)?!0:!P),j&&(y.current=k.isPropagationStopped(),y.current||k.stopPropagation())})}),j&&l.jsx(X7,{control:g,bubbles:!y.current,name:r,value:c,checked:x,required:a,disabled:o,form:f,style:{transform:\"translateX(-100%)\"},defaultChecked:jo(s)?!1:s})]})});aj.displayName=Sy;var oj=\"CheckboxIndicator\",lj=C.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...i}=e,s=Y7(oj,n);return l.jsx(Bo,{present:r||jo(s.state)||s.state===!0,children:l.jsx(bt.span,{\"data-state\":cj(s.state),\"data-disabled\":s.disabled?\"\":void 0,...i,ref:t,style:{pointerEvents:\"none\",...e.style}})})});lj.displayName=oj;var X7=e=>{const{control:t,checked:n,bubbles:r=!0,defaultChecked:i,...s}=e,a=C.useRef(null),o=Ny(n),c=dy(t);C.useEffect(()=>{const f=a.current,m=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(m,\"checked\").set;if(o!==n&&p){const S=new Event(\"click\",{bubbles:r});f.indeterminate=jo(n),p.call(f,jo(n)?!1:n),f.dispatchEvent(S)}},[o,n,r]);const d=C.useRef(jo(n)?!1:n);return l.jsx(\"input\",{type:\"checkbox\",\"aria-hidden\":!0,defaultChecked:i??d.current,...s,tabIndex:-1,ref:a,style:{...e.style,...c,position:\"absolute\",pointerEvents:\"none\",opacity:0,margin:0}})};function jo(e){return e===\"indeterminate\"}function cj(e){return jo(e)?\"indeterminate\":e?\"checked\":\"unchecked\"}var uj=aj,J7=lj;const Jf=C.forwardRef(({className:e,...t},n)=>l.jsx(uj,{ref:n,className:wt(\"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",e),...t,children:l.jsx(J7,{className:wt(\"flex items-center justify-center text-current\"),children:l.jsx(jN,{className:\"h-4 w-4\"})})}));Jf.displayName=uj.displayName;const jy={auth:{login:e=>cn(\"POST\",\"/api/login\",e),register:e=>cn(\"POST\",\"/api/register\",e),logout:()=>cn(\"POST\",\"/api/logout\"),getProfile:()=>fetch(\"/api/me\",{credentials:\"include\"})},events:{getAll:()=>fetch(\"/api/events\",{credentials:\"include\"}),create:e=>cn(\"POST\",\"/api/events\",e),update:(e,t)=>cn(\"PUT\",`/api/events/${e}`,t),delete:e=>cn(\"DELETE\",`/api/events/${e}`),getParticipants:e=>fetch(`/api/events/${e}/participants`,{credentials:\"include\"})},invitations:{get:e=>fetch(`/api/invitations/${e}`),respond:(e,t)=>cn(\"POST\",`/api/invitations/${e}/respond`,t)},messages:{getByEvent:e=>fetch(`/api/events/${e}/messages`,{credentials:\"include\"}),send:(e,t)=>cn(\"POST\",`/api/events/${e}/messages`,{content:t}),sendAsParticipant:(e,t,n,r)=>cn(\"POST\",`/api/events/${e}/messages/participant`,{senderName:t,senderEmail:n,content:r})},dashboard:{getStats:()=>fetch(\"/api/dashboard/stats\",{credentials:\"include\"})}};function eT({isOpen:e,onClose:t}){const[n,r]=C.useState(\"\"),[i,s]=C.useState(!1),{toast:a}=mi(),o=lr({mutationFn:f=>fetch(\"/api/forgot-password\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:f})}).then(async m=>{const g=await m.json();if(!m.ok)throw new Error(g.message||\"Une erreur s'est produite\");return g}),onSuccess:()=>{s(!0),a({title:\"Email envoyÃ©\",description:\"Si un compte existe avec cette adresse, un email de rÃ©initialisation a Ã©tÃ© envoyÃ©.\"})},onError:f=>{a({title:\"Erreur\",description:f.message||\"Une erreur s'est produite lors de l'envoi de l'email.\",variant:\"destructive\"})}}),c=f=>{if(f.preventDefault(),!n){a({title:\"Erreur\",description:\"Veuillez saisir votre adresse email.\",variant:\"destructive\"});return}o.mutate(n)},d=()=>{r(\"\"),s(!1),t()};return i?l.jsx(Ca,{open:e,onOpenChange:d,children:l.jsxs(Vs,{className:\"sm:max-w-md\",children:[l.jsx($s,{children:l.jsxs(Ws,{className:\"text-2xl font-bold text-gray-900 flex items-center\",children:[l.jsx(kN,{className:\"text-green-500 mr-2\",size:24}),\"Email envoyÃ©\"]})}),l.jsxs(\"div\",{className:\"space-y-4 text-center\",children:[l.jsxs(\"p\",{className:\"text-gray-600\",children:[\"Si un compte existe avec l'adresse \",l.jsx(\"strong\",{children:n}),\", vous recevrez sous peu un email contenant les instructions pour rÃ©initialiser votre mot de passe.\"]}),l.jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"VÃ©rifiez Ã©galement votre dossier de spams/courriers indÃ©sirables.\"}),l.jsx(Xe,{onClick:d,className:\"w-full\",children:\"Fermer\"})]})]})}):l.jsx(Ca,{open:e,onOpenChange:d,children:l.jsxs(Vs,{className:\"sm:max-w-md\",children:[l.jsx($s,{children:l.jsx(Ws,{className:\"text-2xl font-bold text-gray-900\",children:\"Mot de passe oubliÃ©\"})}),l.jsx(\"div\",{className:\"text-sm text-gray-600 mb-4\",children:\"Saisissez votre adresse email et nous vous enverrons un lien pour rÃ©initialiser votre mot de passe.\"}),l.jsxs(\"form\",{onSubmit:c,className:\"space-y-4\",children:[l.jsxs(\"div\",{children:[l.jsx(an,{htmlFor:\"reset-email\",children:\"Adresse email\"}),l.jsx(Tt,{id:\"reset-email\",type:\"email\",value:n,onChange:f=>r(f.target.value),placeholder:\"votre@email.com\",required:!0})]}),l.jsx(Xe,{type:\"submit\",className:\"w-full bg-primary hover:bg-blue-700\",disabled:o.isPending,children:o.isPending?l.jsxs(l.Fragment,{children:[l.jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"}),\"Envoi en cours...\"]}):\"Envoyer le lien de rÃ©initialisation\"}),l.jsx(Xe,{type:\"button\",variant:\"outline\",onClick:d,className:\"w-full\",children:\"Annuler\"})]})]})})}function tT({isOpen:e,onClose:t,onShowRegistration:n}){const[r,i]=C.useState(\"\"),[s,a]=C.useState(\"\"),[o,c]=C.useState(!1),[d,f]=C.useState(!1),{toast:m}=mi(),g=Fi(),[,p]=Zf(),S=lr({mutationFn:j=>jy.auth.login(j),onSuccess:()=>{g.invalidateQueries({queryKey:[\"/api/me\"]}),p(\"/dashboard\"),t(),m({title:\"Connexion rÃ©ussie\",description:\"Vous Ãªtes maintenant connectÃ©.\"})},onError:j=>{m({title:\"Erreur de connexion\",description:j.message||\"Email ou mot de passe incorrect.\",variant:\"destructive\"})}}),y=j=>{if(j.preventDefault(),!r||!s){m({title:\"Erreur\",description:\"Veuillez remplir tous les champs.\",variant:\"destructive\"});return}S.mutate({email:r,password:s})};return l.jsxs(Ca,{open:e,onOpenChange:t,children:[l.jsxs(Vs,{className:\"sm:max-w-md\",children:[l.jsx($s,{children:l.jsx(Ws,{className:\"text-2xl font-bold text-gray-900\",children:\"Connexion\"})}),l.jsxs(\"form\",{onSubmit:y,className:\"space-y-4\",children:[l.jsxs(\"div\",{children:[l.jsx(an,{htmlFor:\"email\",children:\"Email\"}),l.jsx(Tt,{id:\"email\",type:\"email\",value:r,onChange:j=>i(j.target.value),placeholder:\"votre@email.com\",required:!0})]}),l.jsxs(\"div\",{children:[l.jsx(an,{htmlFor:\"password\",children:\"Mot de passe\"}),l.jsx(Tt,{id:\"password\",type:\"password\",value:s,onChange:j=>a(j.target.value),placeholder:\"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢\",required:!0})]}),l.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[l.jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[l.jsx(Jf,{id:\"remember\",checked:o,onCheckedChange:j=>c(j===!0)}),l.jsx(an,{htmlFor:\"remember\",className:\"text-sm text-gray-600\",children:\"Se souvenir de moi\"})]}),l.jsx(Xe,{variant:\"link\",className:\"text-sm text-primary hover:text-blue-700 p-0\",onClick:()=>f(!0),type:\"button\",children:\"Mot de passe oubliÃ© ?\"})]}),l.jsx(Xe,{type:\"submit\",className:\"w-full bg-primary hover:bg-blue-700\",disabled:S.isPending,children:S.isPending?l.jsxs(l.Fragment,{children:[l.jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"}),\"Connexion...\"]}):\"Se connecter\"})]}),l.jsx(\"div\",{className:\"text-center\",children:l.jsxs(\"p\",{className:\"text-gray-600\",children:[\"Pas encore de compte ?\",\" \",l.jsx(Xe,{variant:\"link\",onClick:n,className:\"text-primary hover:text-blue-700 p-0\",children:\"S'inscrire\"})]})})]}),l.jsx(eT,{isOpen:d,onClose:()=>f(!1)})]})}var eh=e=>e.type===\"checkbox\",ll=e=>e instanceof Date,Tr=e=>e==null;const dj=e=>typeof e==\"object\";var Fn=e=>!Tr(e)&&!Array.isArray(e)&&dj(e)&&!ll(e),fj=e=>Fn(e)&&e.target?eh(e.target)?e.target.checked:e.target.value:e,nT=e=>e.substring(0,e.search(/\\.\\d+(\\.|$)/))||e,hj=(e,t)=>e.has(nT(t)),rT=e=>{const t=e.constructor&&e.constructor.prototype;return Fn(t)&&t.hasOwnProperty(\"isPrototypeOf\")},_y=typeof window<\"u\"&&typeof window.HTMLElement<\"u\"&&typeof document<\"u\";function ar(e){let t;const n=Array.isArray(e),r=typeof FileList<\"u\"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(_y&&(e instanceof Blob||r))&&(n||Fn(e)))if(t=n?[]:{},!n&&!rT(e))t=e;else for(const i in e)e.hasOwnProperty(i)&&(t[i]=ar(e[i]));else return e;return t}var h0=e=>Array.isArray(e)?e.filter(Boolean):[],En=e=>e===void 0,$e=(e,t,n)=>{if(!t||!Fn(e))return n;const r=h0(t.split(/[,[\\].]+?/)).reduce((i,s)=>Tr(i)?i:i[s],e);return En(r)||r===e?En(e[t])?n:e[t]:r},si=e=>typeof e==\"boolean\",Cy=e=>/^\\w*$/.test(e),pj=e=>h0(e.replace(/[\"|']|\\]/g,\"\").split(/\\.|\\[/)),Ht=(e,t,n)=>{let r=-1;const i=Cy(t)?[t]:pj(t),s=i.length,a=s-1;for(;++r<s;){const o=i[r];let c=n;if(r!==a){const d=e[o];c=Fn(d)||Array.isArray(d)?d:isNaN(+i[r+1])?{}:[]}if(o===\"__proto__\"||o===\"constructor\"||o===\"prototype\")return;e[o]=c,e=e[o]}};const jm={BLUR:\"blur\",FOCUS_OUT:\"focusout\",CHANGE:\"change\"},rs={onBlur:\"onBlur\",onChange:\"onChange\",onSubmit:\"onSubmit\",onTouched:\"onTouched\",all:\"all\"},la={max:\"max\",min:\"min\",maxLength:\"maxLength\",minLength:\"minLength\",pattern:\"pattern\",required:\"required\",validate:\"validate\"},mj=St.createContext(null),p0=()=>St.useContext(mj),iT=e=>{const{children:t,...n}=e;return St.createElement(mj.Provider,{value:n},t)};var gj=(e,t,n,r=!0)=>{const i={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(i,s,{get:()=>{const a=s;return t._proxyFormState[a]!==rs.all&&(t._proxyFormState[a]=!r||rs.all),n&&(n[a]=!0),e[a]}});return i};function sT(e){const t=p0(),{control:n=t.control,disabled:r,name:i,exact:s}=e||{},[a,o]=St.useState(n._formState),c=St.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=St.useRef(i);return d.current=i,St.useEffect(()=>n._subscribe({name:d.current,formState:c.current,exact:s,callback:f=>{!r&&o({...n._formState,...f})}}),[n,r,s]),St.useEffect(()=>{c.current.isValid&&n._setValid(!0)},[n]),St.useMemo(()=>gj(a,n,c.current,!1),[a,n])}var Os=e=>typeof e==\"string\",vj=(e,t,n,r,i)=>Os(e)?(r&&t.watch.add(e),$e(n,e,i)):Array.isArray(e)?e.map(s=>(r&&t.watch.add(s),$e(n,s))):(r&&(t.watchAll=!0),n);function aT(e){const t=p0(),{control:n=t.control,name:r,defaultValue:i,disabled:s,exact:a}=e||{},o=St.useRef(r),c=St.useRef(i);o.current=r,St.useEffect(()=>n._subscribe({name:o.current,formState:{values:!0},exact:a,callback:m=>!s&&f(vj(o.current,n._names,m.values||n._formValues,!1,c.current))}),[n,s,a]);const[d,f]=St.useState(n._getWatch(r,i));return St.useEffect(()=>n._removeUnmounted()),d}function oT(e){const t=p0(),{name:n,disabled:r,control:i=t.control,shouldUnregister:s}=e,a=hj(i._names.array,n),o=aT({control:i,name:n,defaultValue:$e(i._formValues,n,$e(i._defaultValues,n,e.defaultValue)),exact:!0}),c=sT({control:i,name:n,exact:!0}),d=St.useRef(e),f=St.useRef(i.register(n,{...e.rules,value:o,...si(e.disabled)?{disabled:e.disabled}:{}})),m=St.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!$e(c.errors,n)},isDirty:{enumerable:!0,get:()=>!!$e(c.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!$e(c.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!$e(c.validatingFields,n)},error:{enumerable:!0,get:()=>$e(c.errors,n)}}),[c,n]),g=St.useCallback(j=>f.current.onChange({target:{value:fj(j),name:n},type:jm.CHANGE}),[n]),p=St.useCallback(()=>f.current.onBlur({target:{value:$e(i._formValues,n),name:n},type:jm.BLUR}),[n,i._formValues]),S=St.useCallback(j=>{const x=$e(i._fields,n);x&&j&&(x._f.ref={focus:()=>j.focus(),select:()=>j.select(),setCustomValidity:b=>j.setCustomValidity(b),reportValidity:()=>j.reportValidity()})},[i._fields,n]),y=St.useMemo(()=>({name:n,value:o,...si(r)||c.disabled?{disabled:c.disabled||r}:{},onChange:g,onBlur:p,ref:S}),[n,r,c.disabled,g,p,S,o]);return St.useEffect(()=>{const j=i._options.shouldUnregister||s;i.register(n,{...d.current.rules,...si(d.current.disabled)?{disabled:d.current.disabled}:{}});const x=(b,N)=>{const k=$e(i._fields,b);k&&k._f&&(k._f.mount=N)};if(x(n,!0),j){const b=ar($e(i._options.defaultValues,n));Ht(i._defaultValues,n,b),En($e(i._formValues,n))&&Ht(i._formValues,n,b)}return!a&&i.register(n),()=>{(a?j&&!i._state.action:j)?i.unregister(n):x(n,!1)}},[n,i,a,s]),St.useEffect(()=>{i._setDisabledField({disabled:r,name:n})},[r,n,i]),St.useMemo(()=>({field:y,formState:c,fieldState:m}),[y,c,m])}const lT=e=>e.render(oT(e));var yj=(e,t,n,r,i)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:i||!0}}:{},Jd=e=>Array.isArray(e)?e:[e],fw=()=>{let e=[];return{get observers(){return e},next:i=>{for(const s of e)s.next&&s.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(s=>s!==i)}}),unsubscribe:()=>{e=[]}}},Av=e=>Tr(e)||!dj(e);function no(e,t){if(Av(e)||Av(t))return e===t;if(ll(e)&&ll(t))return e.getTime()===t.getTime();const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const i of n){const s=e[i];if(!r.includes(i))return!1;if(i!==\"ref\"){const a=t[i];if(ll(s)&&ll(a)||Fn(s)&&Fn(a)||Array.isArray(s)&&Array.isArray(a)?!no(s,a):s!==a)return!1}}return!0}var Lr=e=>Fn(e)&&!Object.keys(e).length,ky=e=>e.type===\"file\",is=e=>typeof e==\"function\",_m=e=>{if(!_y)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},xj=e=>e.type===\"select-multiple\",Ay=e=>e.type===\"radio\",cT=e=>Ay(e)||eh(e),eg=e=>_m(e)&&e.isConnected;function uT(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=En(e)?r++:e[t[r++]];return e}function dT(e){for(const t in e)if(e.hasOwnProperty(t)&&!En(e[t]))return!1;return!0}function $n(e,t){const n=Array.isArray(t)?t:Cy(t)?[t]:pj(t),r=n.length===1?e:uT(e,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(Fn(r)&&Lr(r)||Array.isArray(r)&&dT(r))&&$n(e,n.slice(0,-1)),e}var wj=e=>{for(const t in e)if(is(e[t]))return!0;return!1};function Cm(e,t={}){const n=Array.isArray(e);if(Fn(e)||n)for(const r in e)Array.isArray(e[r])||Fn(e[r])&&!wj(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Cm(e[r],t[r])):Tr(e[r])||(t[r]=!0);return t}function bj(e,t,n){const r=Array.isArray(e);if(Fn(e)||r)for(const i in e)Array.isArray(e[i])||Fn(e[i])&&!wj(e[i])?En(t)||Av(n[i])?n[i]=Array.isArray(e[i])?Cm(e[i],[]):{...Cm(e[i])}:bj(e[i],Tr(t)?{}:t[i],n[i]):n[i]=!no(e[i],t[i]);return n}var Ad=(e,t)=>bj(e,t,Cm(t));const hw={value:!1,isValid:!1},pw={value:!0,isValid:!0};var Nj=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!En(e[0].attributes.value)?En(e[0].value)||e[0].value===\"\"?pw:{value:e[0].value,isValid:!0}:pw:hw}return hw},Sj=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>En(e)?e:t?e===\"\"?NaN:e&&+e:n&&Os(e)?new Date(e):r?r(e):e;const mw={isValid:!1,value:null};var jj=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,mw):mw;function gw(e){const t=e.ref;return ky(t)?t.files:Ay(t)?jj(e.refs).value:xj(t)?[...t.selectedOptions].map(({value:n})=>n):eh(t)?Nj(e.refs).value:Sj(En(t.value)?e.ref.value:t.value,e)}var fT=(e,t,n,r)=>{const i={};for(const s of e){const a=$e(t,s);a&&Ht(i,s,a._f)}return{criteriaMode:n,names:[...e],fields:i,shouldUseNativeValidation:r}},km=e=>e instanceof RegExp,Pd=e=>En(e)?e:km(e)?e.source:Fn(e)?km(e.value)?e.value.source:e.value:e,vw=e=>({isOnSubmit:!e||e===rs.onSubmit,isOnBlur:e===rs.onBlur,isOnChange:e===rs.onChange,isOnAll:e===rs.all,isOnTouch:e===rs.onTouched});const yw=\"AsyncFunction\";var hT=e=>!!e&&!!e.validate&&!!(is(e.validate)&&e.validate.constructor.name===yw||Fn(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===yw)),pT=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),xw=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\\.\\w+/.test(e.slice(r.length))));const ef=(e,t,n,r)=>{for(const i of n||Object.keys(e)){const s=$e(e,i);if(s){const{_f:a,...o}=s;if(a){if(a.refs&&a.refs[0]&&t(a.refs[0],i)&&!r)return!0;if(a.ref&&t(a.ref,a.name)&&!r)return!0;if(ef(o,t))break}else if(Fn(o)&&ef(o,t))break}}};function ww(e,t,n){const r=$e(e,n);if(r||Cy(n))return{error:r,name:n};const i=n.split(\".\");for(;i.length;){const s=i.join(\".\"),a=$e(t,s),o=$e(e,s);if(a&&!Array.isArray(a)&&n!==s)return{name:n};if(o&&o.type)return{name:s,error:o};i.pop()}return{name:n}}var mT=(e,t,n,r)=>{n(e);const{name:i,...s}=e;return Lr(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(a=>t[a]===(!r||rs.all))},gT=(e,t,n)=>!e||!t||e===t||Jd(e).some(r=>r&&(n?r===t:r.startsWith(t)||t.startsWith(r))),vT=(e,t,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(t||e):(n?r.isOnBlur:i.isOnBlur)?!e:(n?r.isOnChange:i.isOnChange)?e:!0,yT=(e,t)=>!h0($e(e,t)).length&&$n(e,t),xT=(e,t,n)=>{const r=Jd($e(e,n));return Ht(r,\"root\",t[n]),Ht(e,n,r),e},Up=e=>Os(e);function bw(e,t,n=\"validate\"){if(Up(e)||Array.isArray(e)&&e.every(Up)||si(e)&&!e)return{type:n,message:Up(e)?e:\"\",ref:t}}var Nc=e=>Fn(e)&&!km(e)?e:{value:e,message:\"\"},Nw=async(e,t,n,r,i,s)=>{const{ref:a,refs:o,required:c,maxLength:d,minLength:f,min:m,max:g,pattern:p,validate:S,name:y,valueAsNumber:j,mount:x}=e._f,b=$e(n,y);if(!x||t.has(y))return{};const N=o?o[0]:a,k=E=>{i&&N.reportValidity&&(N.setCustomValidity(si(E)?\"\":E||\"\"),N.reportValidity())},P={},H=Ay(a),R=eh(a),T=H||R,G=(j||ky(a))&&En(a.value)&&En(b)||_m(a)&&a.value===\"\"||b===\"\"||Array.isArray(b)&&!b.length,Y=yj.bind(null,y,r,P),O=(E,W,z,le=la.maxLength,J=la.minLength)=>{const fe=E?W:z;P[y]={type:E?le:J,message:fe,ref:a,...Y(E?le:J,fe)}};if(s?!Array.isArray(b)||!b.length:c&&(!T&&(G||Tr(b))||si(b)&&!b||R&&!Nj(o).isValid||H&&!jj(o).isValid)){const{value:E,message:W}=Up(c)?{value:!!c,message:c}:Nc(c);if(E&&(P[y]={type:la.required,message:W,ref:N,...Y(la.required,W)},!r))return k(W),P}if(!G&&(!Tr(m)||!Tr(g))){let E,W;const z=Nc(g),le=Nc(m);if(!Tr(b)&&!isNaN(b)){const J=a.valueAsNumber||b&&+b;Tr(z.value)||(E=J>z.value),Tr(le.value)||(W=J<le.value)}else{const J=a.valueAsDate||new Date(b),fe=ue=>new Date(new Date().toDateString()+\" \"+ue),V=a.type==\"time\",ee=a.type==\"week\";Os(z.value)&&b&&(E=V?fe(b)>fe(z.value):ee?b>z.value:J>new Date(z.value)),Os(le.value)&&b&&(W=V?fe(b)<fe(le.value):ee?b<le.value:J<new Date(le.value))}if((E||W)&&(O(!!E,z.message,le.message,la.max,la.min),!r))return k(P[y].message),P}if((d||f)&&!G&&(Os(b)||s&&Array.isArray(b))){const E=Nc(d),W=Nc(f),z=!Tr(E.value)&&b.length>+E.value,le=!Tr(W.value)&&b.length<+W.value;if((z||le)&&(O(z,E.message,W.message),!r))return k(P[y].message),P}if(p&&!G&&Os(b)){const{value:E,message:W}=Nc(p);if(km(E)&&!b.match(E)&&(P[y]={type:la.pattern,message:W,ref:a,...Y(la.pattern,W)},!r))return k(W),P}if(S){if(is(S)){const E=await S(b,n),W=bw(E,N);if(W&&(P[y]={...W,...Y(la.validate,W.message)},!r))return k(W.message),P}else if(Fn(S)){let E={};for(const W in S){if(!Lr(E)&&!r)break;const z=bw(await S[W](b,n),N,W);z&&(E={...z,...Y(W,z.message)},k(z.message),r&&(P[y]=E))}if(!Lr(E)&&(P[y]={ref:N,...E},!r))return P}}return k(!0),P};const wT={mode:rs.onSubmit,reValidateMode:rs.onChange,shouldFocusError:!0};function bT(e={}){let t={...wT,...e},n={submitCount:0,isDirty:!1,isLoading:is(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1};const r={};let i=Fn(t.defaultValues)||Fn(t.values)?ar(t.values||t.defaultValues)||{}:{},s=t.shouldUnregister?{}:ar(i),a={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let m={...f};const g={array:fw(),state:fw()},p=vw(t.mode),S=vw(t.reValidateMode),y=t.criteriaMode===rs.all,j=q=>se=>{clearTimeout(d),d=setTimeout(q,se)},x=async q=>{if(!t.disabled&&(f.isValid||m.isValid||q)){const se=t.resolver?Lr((await G()).errors):await O(r,!0);se!==n.isValid&&g.state.next({isValid:se})}},b=(q,se)=>{!t.disabled&&(f.isValidating||f.validatingFields||m.isValidating||m.validatingFields)&&((q||Array.from(o.mount)).forEach(ge=>{ge&&(se?Ht(n.validatingFields,ge,se):$n(n.validatingFields,ge))}),g.state.next({validatingFields:n.validatingFields,isValidating:!Lr(n.validatingFields)}))},N=(q,se=[],ge,Le,ke=!0,Se=!0)=>{if(Le&&ge&&!t.disabled){if(a.action=!0,Se&&Array.isArray($e(r,q))){const De=ge($e(r,q),Le.argA,Le.argB);ke&&Ht(r,q,De)}if(Se&&Array.isArray($e(n.errors,q))){const De=ge($e(n.errors,q),Le.argA,Le.argB);ke&&Ht(n.errors,q,De),yT(n.errors,q)}if((f.touchedFields||m.touchedFields)&&Se&&Array.isArray($e(n.touchedFields,q))){const De=ge($e(n.touchedFields,q),Le.argA,Le.argB);ke&&Ht(n.touchedFields,q,De)}(f.dirtyFields||m.dirtyFields)&&(n.dirtyFields=Ad(i,s)),g.state.next({name:q,isDirty:W(q,se),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Ht(s,q,se)},k=(q,se)=>{Ht(n.errors,q,se),g.state.next({errors:n.errors})},P=q=>{n.errors=q,g.state.next({errors:n.errors,isValid:!1})},H=(q,se,ge,Le)=>{const ke=$e(r,q);if(ke){const Se=$e(s,q,En(ge)?$e(i,q):ge);En(Se)||Le&&Le.defaultChecked||se?Ht(s,q,se?Se:gw(ke._f)):J(q,Se),a.mount&&x()}},R=(q,se,ge,Le,ke)=>{let Se=!1,De=!1;const qe={name:q};if(!t.disabled){if(!ge||Le){(f.isDirty||m.isDirty)&&(De=n.isDirty,n.isDirty=qe.isDirty=W(),Se=De!==qe.isDirty);const rt=no($e(i,q),se);De=!!$e(n.dirtyFields,q),rt?$n(n.dirtyFields,q):Ht(n.dirtyFields,q,!0),qe.dirtyFields=n.dirtyFields,Se=Se||(f.dirtyFields||m.dirtyFields)&&De!==!rt}if(ge){const rt=$e(n.touchedFields,q);rt||(Ht(n.touchedFields,q,ge),qe.touchedFields=n.touchedFields,Se=Se||(f.touchedFields||m.touchedFields)&&rt!==ge)}Se&&ke&&g.state.next(qe)}return Se?qe:{}},T=(q,se,ge,Le)=>{const ke=$e(n.errors,q),Se=(f.isValid||m.isValid)&&si(se)&&n.isValid!==se;if(t.delayError&&ge?(c=j(()=>k(q,ge)),c(t.delayError)):(clearTimeout(d),c=null,ge?Ht(n.errors,q,ge):$n(n.errors,q)),(ge?!no(ke,ge):ke)||!Lr(Le)||Se){const De={...Le,...Se&&si(se)?{isValid:se}:{},errors:n.errors,name:q};n={...n,...De},g.state.next(De)}},G=async q=>{b(q,!0);const se=await t.resolver(s,t.context,fT(q||o.mount,r,t.criteriaMode,t.shouldUseNativeValidation));return b(q),se},Y=async q=>{const{errors:se}=await G(q);if(q)for(const ge of q){const Le=$e(se,ge);Le?Ht(n.errors,ge,Le):$n(n.errors,ge)}else n.errors=se;return se},O=async(q,se,ge={valid:!0})=>{for(const Le in q){const ke=q[Le];if(ke){const{_f:Se,...De}=ke;if(Se){const qe=o.array.has(Se.name),rt=ke._f&&hT(ke._f);rt&&f.validatingFields&&b([Le],!0);const Be=await Nw(ke,o.disabled,s,y,t.shouldUseNativeValidation&&!se,qe);if(rt&&f.validatingFields&&b([Le]),Be[Se.name]&&(ge.valid=!1,se))break;!se&&($e(Be,Se.name)?qe?xT(n.errors,Be,Se.name):Ht(n.errors,Se.name,Be[Se.name]):$n(n.errors,Se.name))}!Lr(De)&&await O(De,se,ge)}}return ge.valid},E=()=>{for(const q of o.unMount){const se=$e(r,q);se&&(se._f.refs?se._f.refs.every(ge=>!eg(ge)):!eg(se._f.ref))&&me(q)}o.unMount=new Set},W=(q,se)=>!t.disabled&&(q&&se&&Ht(s,q,se),!no(I(),i)),z=(q,se,ge)=>vj(q,o,{...a.mount?s:En(se)?i:Os(q)?{[q]:se}:se},ge,se),le=q=>h0($e(a.mount?s:i,q,t.shouldUnregister?$e(i,q,[]):[])),J=(q,se,ge={})=>{const Le=$e(r,q);let ke=se;if(Le){const Se=Le._f;Se&&(!Se.disabled&&Ht(s,q,Sj(se,Se)),ke=_m(Se.ref)&&Tr(se)?\"\":se,xj(Se.ref)?[...Se.ref.options].forEach(De=>De.selected=ke.includes(De.value)):Se.refs?eh(Se.ref)?Se.refs.length>1?Se.refs.forEach(De=>(!De.defaultChecked||!De.disabled)&&(De.checked=Array.isArray(ke)?!!ke.find(qe=>qe===De.value):ke===De.value)):Se.refs[0]&&(Se.refs[0].checked=!!ke):Se.refs.forEach(De=>De.checked=De.value===ke):ky(Se.ref)?Se.ref.value=\"\":(Se.ref.value=ke,Se.ref.type||g.state.next({name:q,values:ar(s)})))}(ge.shouldDirty||ge.shouldTouch)&&R(q,ke,ge.shouldTouch,ge.shouldDirty,!0),ge.shouldValidate&&je(q)},fe=(q,se,ge)=>{for(const Le in se){const ke=se[Le],Se=`${q}.${Le}`,De=$e(r,Se);(o.array.has(q)||Fn(ke)||De&&!De._f)&&!ll(ke)?fe(Se,ke,ge):J(Se,ke,ge)}},V=(q,se,ge={})=>{const Le=$e(r,q),ke=o.array.has(q),Se=ar(se);Ht(s,q,Se),ke?(g.array.next({name:q,values:ar(s)}),(f.isDirty||f.dirtyFields||m.isDirty||m.dirtyFields)&&ge.shouldDirty&&g.state.next({name:q,dirtyFields:Ad(i,s),isDirty:W(q,Se)})):Le&&!Le._f&&!Tr(Se)?fe(q,Se,ge):J(q,Se,ge),xw(q,o)&&g.state.next({...n}),g.state.next({name:a.mount?q:void 0,values:ar(s)})},ee=async q=>{a.mount=!0;const se=q.target;let ge=se.name,Le=!0;const ke=$e(r,ge),Se=De=>{Le=Number.isNaN(De)||ll(De)&&isNaN(De.getTime())||no(De,$e(s,ge,De))};if(ke){let De,qe;const rt=se.type?gw(ke._f):fj(q),Be=q.type===jm.BLUR||q.type===jm.FOCUS_OUT,Qn=!pT(ke._f)&&!t.resolver&&!$e(n.errors,ge)&&!ke._f.deps||vT(Be,$e(n.touchedFields,ge),n.isSubmitted,S,p),Ot=xw(ge,o,Be);Ht(s,ge,rt),Be?(ke._f.onBlur&&ke._f.onBlur(q),c&&c(0)):ke._f.onChange&&ke._f.onChange(q);const jr=R(ge,rt,Be),Zt=!Lr(jr)||Ot;if(!Be&&g.state.next({name:ge,type:q.type,values:ar(s)}),Qn)return(f.isValid||m.isValid)&&(t.mode===\"onBlur\"?Be&&x():Be||x()),Zt&&g.state.next({name:ge,...Ot?{}:jr});if(!Be&&Ot&&g.state.next({...n}),t.resolver){const{errors:nn}=await G([ge]);if(Se(rt),Le){const gi=ww(n.errors,r,ge),zt=ww(nn,r,gi.name||ge);De=zt.error,ge=zt.name,qe=Lr(nn)}}else b([ge],!0),De=(await Nw(ke,o.disabled,s,y,t.shouldUseNativeValidation))[ge],b([ge]),Se(rt),Le&&(De?qe=!1:(f.isValid||m.isValid)&&(qe=await O(r,!0)));Le&&(ke._f.deps&&je(ke._f.deps),T(ge,qe,De,jr))}},ue=(q,se)=>{if($e(n.errors,se)&&q.focus)return q.focus(),1},je=async(q,se={})=>{let ge,Le;const ke=Jd(q);if(t.resolver){const Se=await Y(En(q)?q:ke);ge=Lr(Se),Le=q?!ke.some(De=>$e(Se,De)):ge}else q?(Le=(await Promise.all(ke.map(async Se=>{const De=$e(r,Se);return await O(De&&De._f?{[Se]:De}:De)}))).every(Boolean),!(!Le&&!n.isValid)&&x()):Le=ge=await O(r);return g.state.next({...!Os(q)||(f.isValid||m.isValid)&&ge!==n.isValid?{}:{name:q},...t.resolver||!q?{isValid:ge}:{},errors:n.errors}),se.shouldFocus&&!Le&&ef(r,ue,q?ke:o.mount),Le},I=q=>{const se={...a.mount?s:i};return En(q)?se:Os(q)?$e(se,q):q.map(ge=>$e(se,ge))},$=(q,se)=>({invalid:!!$e((se||n).errors,q),isDirty:!!$e((se||n).dirtyFields,q),error:$e((se||n).errors,q),isValidating:!!$e(n.validatingFields,q),isTouched:!!$e((se||n).touchedFields,q)}),Z=q=>{q&&Jd(q).forEach(se=>$n(n.errors,se)),g.state.next({errors:q?n.errors:{}})},X=(q,se,ge)=>{const Le=($e(r,q,{_f:{}})._f||{}).ref,ke=$e(n.errors,q)||{},{ref:Se,message:De,type:qe,...rt}=ke;Ht(n.errors,q,{...rt,...se,ref:Le}),g.state.next({name:q,errors:n.errors,isValid:!1}),ge&&ge.shouldFocus&&Le&&Le.focus&&Le.focus()},oe=(q,se)=>is(q)?g.state.subscribe({next:ge=>q(z(void 0,se),ge)}):z(q,se,!0),re=q=>g.state.subscribe({next:se=>{gT(q.name,se.name,q.exact)&&mT(se,q.formState||f,Ie,q.reRenderRoot)&&q.callback({values:{...s},...n,...se})}}).unsubscribe,he=q=>(a.mount=!0,m={...m,...q.formState},re({...q,formState:m})),me=(q,se={})=>{for(const ge of q?Jd(q):o.mount)o.mount.delete(ge),o.array.delete(ge),se.keepValue||($n(r,ge),$n(s,ge)),!se.keepError&&$n(n.errors,ge),!se.keepDirty&&$n(n.dirtyFields,ge),!se.keepTouched&&$n(n.touchedFields,ge),!se.keepIsValidating&&$n(n.validatingFields,ge),!t.shouldUnregister&&!se.keepDefaultValue&&$n(i,ge);g.state.next({values:ar(s)}),g.state.next({...n,...se.keepDirty?{isDirty:W()}:{}}),!se.keepIsValid&&x()},_e=({disabled:q,name:se})=>{(si(q)&&a.mount||q||o.disabled.has(se))&&(q?o.disabled.add(se):o.disabled.delete(se))},Ne=(q,se={})=>{let ge=$e(r,q);const Le=si(se.disabled)||si(t.disabled);return Ht(r,q,{...ge||{},_f:{...ge&&ge._f?ge._f:{ref:{name:q}},name:q,mount:!0,...se}}),o.mount.add(q),ge?_e({disabled:si(se.disabled)?se.disabled:t.disabled,name:q}):H(q,!0,se.value),{...Le?{disabled:se.disabled||t.disabled}:{},...t.progressive?{required:!!se.required,min:Pd(se.min),max:Pd(se.max),minLength:Pd(se.minLength),maxLength:Pd(se.maxLength),pattern:Pd(se.pattern)}:{},name:q,onChange:ee,onBlur:ee,ref:ke=>{if(ke){Ne(q,se),ge=$e(r,q);const Se=En(ke.value)&&ke.querySelectorAll&&ke.querySelectorAll(\"input,select,textarea\")[0]||ke,De=cT(Se),qe=ge._f.refs||[];if(De?qe.find(rt=>rt===Se):Se===ge._f.ref)return;Ht(r,q,{_f:{...ge._f,...De?{refs:[...qe.filter(eg),Se,...Array.isArray($e(i,q))?[{}]:[]],ref:{type:Se.type,name:q}}:{ref:Se}}}),H(q,!1,void 0,Se)}else ge=$e(r,q,{}),ge._f&&(ge._f.mount=!1),(t.shouldUnregister||se.shouldUnregister)&&!(hj(o.array,q)&&a.action)&&o.unMount.add(q)}}},Ee=()=>t.shouldFocusError&&ef(r,ue,o.mount),Me=q=>{si(q)&&(g.state.next({disabled:q}),ef(r,(se,ge)=>{const Le=$e(r,ge);Le&&(se.disabled=Le._f.disabled||q,Array.isArray(Le._f.refs)&&Le._f.refs.forEach(ke=>{ke.disabled=Le._f.disabled||q}))},0,!1))},tt=(q,se)=>async ge=>{let Le;ge&&(ge.preventDefault&&ge.preventDefault(),ge.persist&&ge.persist());let ke=ar(s);if(g.state.next({isSubmitting:!0}),t.resolver){const{errors:Se,values:De}=await G();n.errors=Se,ke=De}else await O(r);if(o.disabled.size)for(const Se of o.disabled)Ht(ke,Se,void 0);if($n(n.errors,\"root\"),Lr(n.errors)){g.state.next({errors:{}});try{await q(ke,ge)}catch(Se){Le=Se}}else se&&await se({...n.errors},ge),Ee(),setTimeout(Ee);if(g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Lr(n.errors)&&!Le,submitCount:n.submitCount+1,errors:n.errors}),Le)throw Le},we=(q,se={})=>{$e(r,q)&&(En(se.defaultValue)?V(q,ar($e(i,q))):(V(q,se.defaultValue),Ht(i,q,ar(se.defaultValue))),se.keepTouched||$n(n.touchedFields,q),se.keepDirty||($n(n.dirtyFields,q),n.isDirty=se.defaultValue?W(q,ar($e(i,q))):W()),se.keepError||($n(n.errors,q),f.isValid&&x()),g.state.next({...n}))},Q=(q,se={})=>{const ge=q?ar(q):i,Le=ar(ge),ke=Lr(q),Se=ke?i:Le;if(se.keepDefaultValues||(i=ge),!se.keepValues){if(se.keepDirtyValues){const De=new Set([...o.mount,...Object.keys(Ad(i,s))]);for(const qe of Array.from(De))$e(n.dirtyFields,qe)?Ht(Se,qe,$e(s,qe)):V(qe,$e(Se,qe))}else{if(_y&&En(q))for(const De of o.mount){const qe=$e(r,De);if(qe&&qe._f){const rt=Array.isArray(qe._f.refs)?qe._f.refs[0]:qe._f.ref;if(_m(rt)){const Be=rt.closest(\"form\");if(Be){Be.reset();break}}}}for(const De of o.mount)V(De,$e(Se,De))}s=ar(Se),g.array.next({values:{...Se}}),g.state.next({values:{...Se}})}o={mount:se.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:\"\"},a.mount=!f.isValid||!!se.keepIsValid||!!se.keepDirtyValues,a.watch=!!t.shouldUnregister,g.state.next({submitCount:se.keepSubmitCount?n.submitCount:0,isDirty:ke?!1:se.keepDirty?n.isDirty:!!(se.keepDefaultValues&&!no(q,i)),isSubmitted:se.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:ke?{}:se.keepDirtyValues?se.keepDefaultValues&&s?Ad(i,s):n.dirtyFields:se.keepDefaultValues&&q?Ad(i,q):se.keepDirty?n.dirtyFields:{},touchedFields:se.keepTouched?n.touchedFields:{},errors:se.keepErrors?n.errors:{},isSubmitSuccessful:se.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},st=(q,se)=>Q(is(q)?q(s):q,se),Je=(q,se={})=>{const ge=$e(r,q),Le=ge&&ge._f;if(Le){const ke=Le.refs?Le.refs[0]:Le.ref;ke.focus&&(ke.focus(),se.shouldSelect&&is(ke.select)&&ke.select())}},Ie=q=>{n={...n,...q}},We={control:{register:Ne,unregister:me,getFieldState:$,handleSubmit:tt,setError:X,_subscribe:re,_runSchema:G,_getWatch:z,_getDirty:W,_setValid:x,_setFieldArray:N,_setDisabledField:_e,_setErrors:P,_getFieldArray:le,_reset:Q,_resetDefaultValues:()=>is(t.defaultValues)&&t.defaultValues().then(q=>{st(q,t.resetOptions),g.state.next({isLoading:!1})}),_removeUnmounted:E,_disableForm:Me,_subjects:g,_proxyFormState:f,get _fields(){return r},get _formValues(){return s},get _state(){return a},set _state(q){a=q},get _defaultValues(){return i},get _names(){return o},set _names(q){o=q},get _formState(){return n},get _options(){return t},set _options(q){t={...t,...q}}},subscribe:he,trigger:je,register:Ne,handleSubmit:tt,watch:oe,setValue:V,getValues:I,reset:st,resetField:we,clearErrors:Z,unregister:me,setError:X,setFocus:Je,getFieldState:$};return{...We,formControl:We}}function Sf(e={}){const t=St.useRef(void 0),n=St.useRef(void 0),[r,i]=St.useState({isDirty:!1,isValidating:!1,isLoading:is(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:is(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...e.formControl?e.formControl:bT(e),formState:r},e.formControl&&e.defaultValues&&!is(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));const s=t.current.control;return s._options=e,St.useLayoutEffect(()=>s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0}),[s]),St.useEffect(()=>s._disableForm(e.disabled),[s,e.disabled]),St.useEffect(()=>{if(s._proxyFormState.isDirty){const a=s._getDirty();a!==r.isDirty&&s._subjects.state.next({isDirty:a})}},[s,r.isDirty]),St.useEffect(()=>{e.values&&!no(e.values,n.current)?(s._reset(e.values,s._options.resetOptions),n.current=e.values,i(a=>({...a}))):s._resetDefaultValues()},[e.values,s]),St.useEffect(()=>{e.errors&&!Lr(e.errors)&&s._setErrors(e.errors)},[e.errors,s]),St.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),St.useEffect(()=>{e.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[e.shouldUnregister,s]),t.current.formState=gj(r,s),t.current}const Sw=(e,t,n)=>{if(e&&\"reportValidity\"in e){const r=$e(n,t);e.setCustomValidity(r&&r.message||\"\"),e.reportValidity()}},_j=(e,t)=>{for(const n in t.fields){const r=t.fields[n];r&&r.ref&&\"reportValidity\"in r.ref?Sw(r.ref,n,e):r.refs&&r.refs.forEach(i=>Sw(i,n,e))}},NT=(e,t)=>{t.shouldUseNativeValidation&&_j(e,t);const n={};for(const r in e){const i=$e(t.fields,r),s=Object.assign(e[r]||{},{ref:i&&i.ref});if(ST(t.names||Object.keys(e),r)){const a=Object.assign({},$e(n,r));Ht(a,\"root\",s),Ht(n,r,a)}else Ht(n,r,s)}return n},ST=(e,t)=>e.some(n=>n.startsWith(t+\".\"));var jT=function(e,t){for(var n={};e.length;){var r=e[0],i=r.code,s=r.message,a=r.path.join(\".\");if(!n[a])if(\"unionErrors\"in r){var o=r.unionErrors[0].errors[0];n[a]={message:o.message,type:o.code}}else n[a]={message:s,type:i};if(\"unionErrors\"in r&&r.unionErrors.forEach(function(f){return f.errors.forEach(function(m){return e.push(m)})}),t){var c=n[a].types,d=c&&c[r.code];n[a]=yj(a,t,n,i,d?[].concat(d,r.message):r.message)}e.shift()}return n},jf=function(e,t,n){return n===void 0&&(n={}),function(r,i,s){try{return Promise.resolve(function(a,o){try{var c=Promise.resolve(e[n.mode===\"sync\"?\"parse\":\"parseAsync\"](r,t)).then(function(d){return s.shouldUseNativeValidation&&_j({},s),{errors:{},values:n.raw?r:d}})}catch(d){return o(d)}return c&&c.then?c.then(void 0,o):c}(0,function(a){if(function(o){return Array.isArray(o==null?void 0:o.errors)}(a))return{values:{},errors:NT(jT(a.errors,!s.shouldUseNativeValidation&&s.criteriaMode===\"all\"),s)};throw a}))}catch(a){return Promise.reject(a)}}},Bt;(function(e){e.assertEqual=i=>i;function t(i){}e.assertIs=t;function n(i){throw new Error}e.assertNever=n,e.arrayToEnum=i=>{const s={};for(const a of i)s[a]=a;return s},e.getValidEnumValues=i=>{const s=e.objectKeys(i).filter(o=>typeof i[i[o]]!=\"number\"),a={};for(const o of s)a[o]=i[o];return e.objectValues(a)},e.objectValues=i=>e.objectKeys(i).map(function(s){return i[s]}),e.objectKeys=typeof Object.keys==\"function\"?i=>Object.keys(i):i=>{const s=[];for(const a in i)Object.prototype.hasOwnProperty.call(i,a)&&s.push(a);return s},e.find=(i,s)=>{for(const a of i)if(s(a))return a},e.isInteger=typeof Number.isInteger==\"function\"?i=>Number.isInteger(i):i=>typeof i==\"number\"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=\" | \"){return i.map(a=>typeof a==\"string\"?`'${a}'`:a).join(s)}e.joinValues=r,e.jsonStringifyReplacer=(i,s)=>typeof s==\"bigint\"?s.toString():s})(Bt||(Bt={}));var Pv;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(Pv||(Pv={}));const Qe=Bt.arrayToEnum([\"string\",\"nan\",\"number\",\"integer\",\"float\",\"boolean\",\"date\",\"bigint\",\"symbol\",\"function\",\"undefined\",\"null\",\"array\",\"object\",\"unknown\",\"promise\",\"void\",\"never\",\"map\",\"set\"]),pa=e=>{switch(typeof e){case\"undefined\":return Qe.undefined;case\"string\":return Qe.string;case\"number\":return isNaN(e)?Qe.nan:Qe.number;case\"boolean\":return Qe.boolean;case\"function\":return Qe.function;case\"bigint\":return Qe.bigint;case\"symbol\":return Qe.symbol;case\"object\":return Array.isArray(e)?Qe.array:e===null?Qe.null:e.then&&typeof e.then==\"function\"&&e.catch&&typeof e.catch==\"function\"?Qe.promise:typeof Map<\"u\"&&e instanceof Map?Qe.map:typeof Set<\"u\"&&e instanceof Set?Qe.set:typeof Date<\"u\"&&e instanceof Date?Qe.date:Qe.object;default:return Qe.unknown}},Oe=Bt.arrayToEnum([\"invalid_type\",\"invalid_literal\",\"custom\",\"invalid_union\",\"invalid_union_discriminator\",\"invalid_enum_value\",\"unrecognized_keys\",\"invalid_arguments\",\"invalid_return_type\",\"invalid_date\",\"invalid_string\",\"too_small\",\"too_big\",\"invalid_intersection_types\",\"not_multiple_of\",\"not_finite\"]),_T=e=>JSON.stringify(e,null,2).replace(/\"([^\"]+)\":/g,\"$1:\");class di extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name=\"ZodError\",this.issues=t}format(t){const n=t||function(s){return s.message},r={_errors:[]},i=s=>{for(const a of s.issues)if(a.code===\"invalid_union\")a.unionErrors.map(i);else if(a.code===\"invalid_return_type\")i(a.returnTypeError);else if(a.code===\"invalid_arguments\")i(a.argumentsError);else if(a.path.length===0)r._errors.push(n(a));else{let o=r,c=0;for(;c<a.path.length;){const d=a.path[c];c===a.path.length-1?(o[d]=o[d]||{_errors:[]},o[d]._errors.push(n(a))):o[d]=o[d]||{_errors:[]},o=o[d],c++}}};return i(this),r}static assert(t){if(!(t instanceof di))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Bt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):r.push(t(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}di.create=e=>new di(e);const ku=(e,t)=>{let n;switch(e.code){case Oe.invalid_type:e.received===Qe.undefined?n=\"Required\":n=`Expected ${e.expected}, received ${e.received}`;break;case Oe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Bt.jsonStringifyReplacer)}`;break;case Oe.unrecognized_keys:n=`Unrecognized key(s) in object: ${Bt.joinValues(e.keys,\", \")}`;break;case Oe.invalid_union:n=\"Invalid input\";break;case Oe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Bt.joinValues(e.options)}`;break;case Oe.invalid_enum_value:n=`Invalid enum value. Expected ${Bt.joinValues(e.options)}, received '${e.received}'`;break;case Oe.invalid_arguments:n=\"Invalid function arguments\";break;case Oe.invalid_return_type:n=\"Invalid function return type\";break;case Oe.invalid_date:n=\"Invalid date\";break;case Oe.invalid_string:typeof e.validation==\"object\"?\"includes\"in e.validation?(n=`Invalid input: must include \"${e.validation.includes}\"`,typeof e.validation.position==\"number\"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):\"startsWith\"in e.validation?n=`Invalid input: must start with \"${e.validation.startsWith}\"`:\"endsWith\"in e.validation?n=`Invalid input: must end with \"${e.validation.endsWith}\"`:Bt.assertNever(e.validation):e.validation!==\"regex\"?n=`Invalid ${e.validation}`:n=\"Invalid\";break;case Oe.too_small:e.type===\"array\"?n=`Array must contain ${e.exact?\"exactly\":e.inclusive?\"at least\":\"more than\"} ${e.minimum} element(s)`:e.type===\"string\"?n=`String must contain ${e.exact?\"exactly\":e.inclusive?\"at least\":\"over\"} ${e.minimum} character(s)`:e.type===\"number\"?n=`Number must be ${e.exact?\"exactly equal to \":e.inclusive?\"greater than or equal to \":\"greater than \"}${e.minimum}`:e.type===\"date\"?n=`Date must be ${e.exact?\"exactly equal to \":e.inclusive?\"greater than or equal to \":\"greater than \"}${new Date(Number(e.minimum))}`:n=\"Invalid input\";break;case Oe.too_big:e.type===\"array\"?n=`Array must contain ${e.exact?\"exactly\":e.inclusive?\"at most\":\"less than\"} ${e.maximum} element(s)`:e.type===\"string\"?n=`String must contain ${e.exact?\"exactly\":e.inclusive?\"at most\":\"under\"} ${e.maximum} character(s)`:e.type===\"number\"?n=`Number must be ${e.exact?\"exactly\":e.inclusive?\"less than or equal to\":\"less than\"} ${e.maximum}`:e.type===\"bigint\"?n=`BigInt must be ${e.exact?\"exactly\":e.inclusive?\"less than or equal to\":\"less than\"} ${e.maximum}`:e.type===\"date\"?n=`Date must be ${e.exact?\"exactly\":e.inclusive?\"smaller than or equal to\":\"smaller than\"} ${new Date(Number(e.maximum))}`:n=\"Invalid input\";break;case Oe.custom:n=\"Invalid input\";break;case Oe.invalid_intersection_types:n=\"Intersection results could not be merged\";break;case Oe.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Oe.not_finite:n=\"Number must be finite\";break;default:n=t.defaultError,Bt.assertNever(e)}return{message:n}};let Cj=ku;function CT(e){Cj=e}function Am(){return Cj}const Pm=e=>{const{data:t,path:n,errorMaps:r,issueData:i}=e,s=[...n,...i.path||[]],a={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let o=\"\";const c=r.filter(d=>!!d).slice().reverse();for(const d of c)o=d(a,{data:t,defaultError:o}).message;return{...i,path:s,message:o}},kT=[];function He(e,t){const n=Am(),r=Pm({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===ku?void 0:ku].filter(i=>!!i)});e.common.issues.push(r)}class Sr{constructor(){this.value=\"valid\"}dirty(){this.value===\"valid\"&&(this.value=\"dirty\")}abort(){this.value!==\"aborted\"&&(this.value=\"aborted\")}static mergeArray(t,n){const r=[];for(const i of n){if(i.status===\"aborted\")return ht;i.status===\"dirty\"&&t.dirty(),r.push(i.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const i of n){const s=await i.key,a=await i.value;r.push({key:s,value:a})}return Sr.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const i of n){const{key:s,value:a}=i;if(s.status===\"aborted\"||a.status===\"aborted\")return ht;s.status===\"dirty\"&&t.dirty(),a.status===\"dirty\"&&t.dirty(),s.value!==\"__proto__\"&&(typeof a.value<\"u\"||i.alwaysSet)&&(r[s.value]=a.value)}return{status:t.value,value:r}}}const ht=Object.freeze({status:\"aborted\"}),zc=e=>({status:\"dirty\",value:e}),Or=e=>({status:\"valid\",value:e}),Lv=e=>e.status===\"aborted\",Ev=e=>e.status===\"dirty\",El=e=>e.status===\"valid\",_f=e=>typeof Promise<\"u\"&&e instanceof Promise;function Lm(e,t,n,r){if(typeof t==\"function\"?e!==t||!r:!t.has(e))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return t.get(e)}function kj(e,t,n,r,i){if(typeof t==\"function\"?e!==t||!i:!t.has(e))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return t.set(e,n),n}var nt;(function(e){e.errToObj=t=>typeof t==\"string\"?{message:t}:t||{},e.toString=t=>typeof t==\"string\"?t:t==null?void 0:t.message})(nt||(nt={}));var Md,Dd;class Hs{constructor(t,n,r,i){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const jw=(e,t)=>{if(El(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error(\"Validation failed but no issues detected.\");return{success:!1,get error(){if(this._error)return this._error;const n=new di(e.common.issues);return this._error=n,this._error}}};function jt(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw new Error(`Can't use \"invalid_type_error\" or \"required_error\" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(a,o)=>{var c,d;const{message:f}=e;return a.code===\"invalid_enum_value\"?{message:f??o.defaultError}:typeof o.data>\"u\"?{message:(c=f??r)!==null&&c!==void 0?c:o.defaultError}:a.code!==\"invalid_type\"?{message:o.defaultError}:{message:(d=f??n)!==null&&d!==void 0?d:o.defaultError}},description:i}}class Pt{get description(){return this._def.description}_getType(t){return pa(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:pa(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Sr,ctx:{common:t.parent.common,data:t.data,parsedType:pa(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(_f(n))throw new Error(\"Synchronous parse encountered promise.\");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:pa(t)},s=this._parseSync({data:t,path:i.path,parent:i});return jw(i,s)}\"~validate\"(t){var n,r;const i={common:{issues:[],async:!!this[\"~standard\"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:pa(t)};if(!this[\"~standard\"].async)try{const s=this._parseSync({data:t,path:[],parent:i});return El(s)?{value:s.value}:{issues:i.common.issues}}catch(s){!((r=(n=s==null?void 0:s.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes(\"encountered\")&&(this[\"~standard\"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:i}).then(s=>El(s)?{value:s.value}:{issues:i.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:pa(t)},i=this._parse({data:t,path:r.path,parent:r}),s=await(_f(i)?i:Promise.resolve(i));return jw(r,s)}refine(t,n){const r=i=>typeof n==\"string\"||typeof n>\"u\"?{message:n}:typeof n==\"function\"?n(i):n;return this._refinement((i,s)=>{const a=t(i),o=()=>s.addIssue({code:Oe.custom,...r(i)});return typeof Promise<\"u\"&&a instanceof Promise?a.then(c=>c?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(t,n){return this._refinement((r,i)=>t(r)?!0:(i.addIssue(typeof n==\"function\"?n(r,i):n),!1))}_refinement(t){return new fs({schema:this,typeName:ft.ZodEffects,effect:{type:\"refinement\",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this[\"~standard\"]={version:1,vendor:\"zod\",validate:n=>this[\"~validate\"](n)}}optional(){return zs.create(this,this._def)}nullable(){return Ro.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ls.create(this)}promise(){return Pu.create(this,this._def)}or(t){return Pf.create([this,t],this._def)}and(t){return Lf.create(this,t,this._def)}transform(t){return new fs({...jt(this._def),schema:this,typeName:ft.ZodEffects,effect:{type:\"transform\",transform:t}})}default(t){const n=typeof t==\"function\"?t:()=>t;return new Of({...jt(this._def),innerType:this,defaultValue:n,typeName:ft.ZodDefault})}brand(){return new Py({typeName:ft.ZodBranded,type:this,...jt(this._def)})}catch(t){const n=typeof t==\"function\"?t:()=>t;return new Ff({...jt(this._def),innerType:this,catchValue:n,typeName:ft.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return th.create(this,t)}readonly(){return Mf.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const AT=/^c[^\\s-]{8,}$/i,PT=/^[0-9a-z]+$/,LT=/^[0-9A-HJKMNP-TV-Z]{26}$/i,ET=/^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/i,TT=/^[a-z0-9_-]{21}$/i,RT=/^[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]*$/,IT=/^[-+]?P(?!$)(?:(?:[-+]?\\d+Y)|(?:[-+]?\\d+[.,]\\d+Y$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:(?:[-+]?\\d+W)|(?:[-+]?\\d+[.,]\\d+W$))?(?:(?:[-+]?\\d+D)|(?:[-+]?\\d+[.,]\\d+D$))?(?:T(?=[\\d+-])(?:(?:[-+]?\\d+H)|(?:[-+]?\\d+[.,]\\d+H$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:[-+]?\\d+(?:[.,]\\d+)?S)?)??$/,OT=/^(?!\\.)(?!.*\\.\\.)([A-Z0-9_'+\\-\\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\\-]*\\.)+[A-Z]{2,}$/i,FT=\"^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$\";let tg;const MT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,DT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\/(3[0-2]|[12]?[0-9])$/,BT=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,zT=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,qT=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,UT=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Aj=\"((\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\\\d|30)|(02)-(0[1-9]|1\\\\d|2[0-8])))\",VT=new RegExp(`^${Aj}$`);function Pj(e){let t=\"([01]\\\\d|2[0-3]):[0-5]\\\\d:[0-5]\\\\d\";return e.precision?t=`${t}\\\\.\\\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\\\.\\\\d+)?`),t}function $T(e){return new RegExp(`^${Pj(e)}$`)}function Lj(e){let t=`${Aj}T${Pj(e)}`;const n=[];return n.push(e.local?\"Z?\":\"Z\"),e.offset&&n.push(\"([+-]\\\\d{2}:?\\\\d{2})\"),t=`${t}(${n.join(\"|\")})`,new RegExp(`^${t}$`)}function WT(e,t){return!!((t===\"v4\"||!t)&&MT.test(e)||(t===\"v6\"||!t)&&BT.test(e))}function HT(e,t){if(!RT.test(e))return!1;try{const[n]=e.split(\".\"),r=n.replace(/-/g,\"+\").replace(/_/g,\"/\").padEnd(n.length+(4-n.length%4)%4,\"=\"),i=JSON.parse(atob(r));return!(typeof i!=\"object\"||i===null||!i.typ||!i.alg||t&&i.alg!==t)}catch{return!1}}function GT(e,t){return!!((t===\"v4\"||!t)&&DT.test(e)||(t===\"v6\"||!t)&&zT.test(e))}class ss extends Pt{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Qe.string){const s=this._getOrReturnCtx(t);return He(s,{code:Oe.invalid_type,expected:Qe.string,received:s.parsedType}),ht}const r=new Sr;let i;for(const s of this._def.checks)if(s.kind===\"min\")t.data.length<s.value&&(i=this._getOrReturnCtx(t,i),He(i,{code:Oe.too_small,minimum:s.value,type:\"string\",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind===\"max\")t.data.length>s.value&&(i=this._getOrReturnCtx(t,i),He(i,{code:Oe.too_big,maximum:s.value,type:\"string\",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind===\"length\"){const a=t.data.length>s.value,o=t.data.length<s.value;(a||o)&&(i=this._getOrReturnCtx(t,i),a?He(i,{code:Oe.too_big,maximum:s.value,type:\"string\",inclusive:!0,exact:!0,message:s.message}):o&&He(i,{code:Oe.too_small,minimum:s.value,type:\"string\",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind===\"email\")OT.test(t.data)||(i=this._getOrReturnCtx(t,i),He(i,{validation:\"email\",code:Oe.invalid_string,message:s.message}),r.dirty());else if(s.kind===\"emoji\")tg||(tg=new RegExp(FT,\"u\")),tg.test(t.data)||(i=this._getOrReturnCtx(t,i),He(i,{validation:\"emoji\",code:Oe.invalid_string,message:s.message}),r.dirty());else if(s.kind===\"uuid\")ET.test(t.data)||(i=this._getOrReturnCtx(t,i),He(i,{validation:\"uuid\",code:Oe.invalid_string,message:s.message}),r.dirty());else if(s.kind===\"nanoid\")TT.test(t.data)||(i=this._getOrReturnCtx(t,i),He(i,{validation:\"nanoid\",code:Oe.invalid_string,message:s.message}),r.dirty());else if(s.kind===\"cuid\")AT.test(t.data)||(i=this._getOrReturnCtx(t,i),He(i,{validation:\"cuid\",code:Oe.invalid_string,message:s.message}),r.dirty());else if(s.kind===\"cuid2\")PT.test(t.data)||(i=this._getOrReturnCtx(t,i),He(i,{validation:\"cuid2\",code:Oe.invalid_string,message:s.message}),r.dirty());else if(s.kind===\"ulid\")LT.test(t.data)||(i=this._getOrReturnCtx(t,i),He(i,{validation:\"ulid\",code:Oe.invalid_string,message:s.message}),r.dirty());else if(s.kind===\"url\")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),He(i,{validation:\"url\",code:Oe.invalid_string,message:s.message}),r.dirty()}else s.kind===\"regex\"?(s.regex.lastIndex=0,s.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),He(i,{validation:\"regex\",code:Oe.invalid_string,message:s.message}),r.dirty())):s.kind===\"trim\"?t.data=t.data.trim():s.kind===\"includes\"?t.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(t,i),He(i,{code:Oe.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind===\"toLowerCase\"?t.data=t.data.toLowerCase():s.kind===\"toUpperCase\"?t.data=t.data.toUpperCase():s.k","size_bytes":360000},"public/assets/index-D7sWZrKL.css":{"content":"@import\"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap\";*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: \"\"}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:var(--font-sans);font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var(--font-mono);font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}*{border-color:var(--border)}body{background-color:var(--background);font-family:var(--font-sans);color:var(--foreground);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.pointer-events-none{pointer-events:none}.pointer-events-auto{pointer-events:auto}.visible{visibility:visible}.invisible{visibility:hidden}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.inset-0{top:0;right:0;bottom:0;left:0}.inset-x-0{left:0;right:0}.inset-x-2{left:.5rem;right:.5rem}.inset-y-0{top:0;bottom:0}.-bottom-12{bottom:-3rem}.-left-12{left:-3rem}.-right-12{right:-3rem}.-top-12{top:-3rem}.bottom-0{bottom:0}.bottom-4{bottom:1rem}.bottom-6{bottom:1.5rem}.left-0{left:0}.left-1{left:.25rem}.left-1\\/2{left:50%}.left-2{left:.5rem}.left-3{left:.75rem}.left-4{left:1rem}.left-\\[50\\%\\]{left:50%}.right-0{right:0}.right-1{right:.25rem}.right-2{right:.5rem}.right-3{right:.75rem}.right-4{right:1rem}.right-6{right:1.5rem}.top-0{top:0}.top-1{top:.25rem}.top-1\\.5{top:.375rem}.top-1\\/2{top:50%}.top-2{top:.5rem}.top-24{top:6rem}.top-3{top:.75rem}.top-3\\.5{top:.875rem}.top-4{top:1rem}.top-\\[1px\\]{top:1px}.top-\\[50\\%\\]{top:50%}.top-\\[60\\%\\]{top:60%}.top-full{top:100%}.z-10{z-index:10}.z-20{z-index:20}.z-50{z-index:50}.z-\\[100\\]{z-index:100}.z-\\[1\\]{z-index:1}.-mx-1{margin-left:-.25rem;margin-right:-.25rem}.mx-2{margin-left:.5rem;margin-right:.5rem}.mx-3{margin-left:.75rem;margin-right:.75rem}.mx-3\\.5{margin-left:.875rem;margin-right:.875rem}.mx-4{margin-left:1rem;margin-right:1rem}.mx-auto{margin-left:auto;margin-right:auto}.my-0\\.5{margin-top:.125rem;margin-bottom:.125rem}.my-1{margin-top:.25rem;margin-bottom:.25rem}.-ml-4{margin-left:-1rem}.-mt-4{margin-top:-1rem}.mb-1{margin-bottom:.25rem}.mb-16{margin-bottom:4rem}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.ml-1{margin-left:.25rem}.ml-4{margin-left:1rem}.ml-auto{margin-left:auto}.mr-1{margin-right:.25rem}.mr-2{margin-right:.5rem}.mr-3{margin-right:.75rem}.mt-1{margin-top:.25rem}.mt-1\\.5{margin-top:.375rem}.mt-2{margin-top:.5rem}.mt-24{margin-top:6rem}.mt-3{margin-top:.75rem}.mt-4{margin-top:1rem}.mt-6{margin-top:1.5rem}.mt-8{margin-top:2rem}.mt-auto{margin-top:auto}.block{display:block}.inline-block{display:inline-block}.flex{display:flex}.inline-flex{display:inline-flex}.table{display:table}.grid{display:grid}.hidden{display:none}.aspect-square{aspect-ratio:1 / 1}.aspect-video{aspect-ratio:16 / 9}.size-4{width:1rem;height:1rem}.h-1\\.5{height:.375rem}.h-10{height:2.5rem}.h-11{height:2.75rem}.h-12{height:3rem}.h-14{height:3.5rem}.h-16{height:4rem}.h-2{height:.5rem}.h-2\\.5{height:.625rem}.h-24{height:6rem}.h-3{height:.75rem}.h-3\\.5{height:.875rem}.h-32{height:8rem}.h-4{height:1rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-64{height:16rem}.h-7{height:1.75rem}.h-8{height:2rem}.h-9{height:2.25rem}.h-96{height:24rem}.h-\\[1px\\]{height:1px}.h-\\[var\\(--radix-navigation-menu-viewport-height\\)\\]{height:var(--radix-navigation-menu-viewport-height)}.h-\\[var\\(--radix-select-trigger-height\\)\\]{height:var(--radix-select-trigger-height)}.h-auto{height:auto}.h-full{height:100%}.h-px{height:1px}.h-svh{height:100svh}.max-h-\\[--radix-context-menu-content-available-height\\]{max-height:var(--radix-context-menu-content-available-height)}.max-h-\\[--radix-select-content-available-height\\]{max-height:var(--radix-select-content-available-height)}.max-h-\\[300px\\]{max-height:300px}.max-h-\\[80vh\\]{max-height:80vh}.max-h-\\[90vh\\]{max-height:90vh}.max-h-\\[var\\(--radix-dropdown-menu-content-available-height\\)\\]{max-height:var(--radix-dropdown-menu-content-available-height)}.max-h-screen{max-height:100vh}.min-h-0{min-height:0px}.min-h-\\[80px\\]{min-height:80px}.min-h-screen{min-height:100vh}.min-h-svh{min-height:100svh}.w-0{width:0px}.w-1{width:.25rem}.w-1\\/3{width:33.333333%}.w-10{width:2.5rem}.w-11{width:2.75rem}.w-12{width:3rem}.w-14{width:3.5rem}.w-16{width:4rem}.w-2{width:.5rem}.w-2\\.5{width:.625rem}.w-24{width:6rem}.w-3{width:.75rem}.w-3\\.5{width:.875rem}.w-3\\/4{width:75%}.w-32{width:8rem}.w-4{width:1rem}.w-48{width:12rem}.w-5{width:1.25rem}.w-64{width:16rem}.w-7{width:1.75rem}.w-72{width:18rem}.w-8{width:2rem}.w-80{width:20rem}.w-9{width:2.25rem}.w-\\[--sidebar-width\\]{width:var(--sidebar-width)}.w-\\[100px\\]{width:100px}.w-\\[1px\\]{width:1px}.w-auto{width:auto}.w-full{width:100%}.w-max{width:-moz-max-content;width:max-content}.w-px{width:1px}.min-w-0{min-width:0px}.min-w-10{min-width:2.5rem}.min-w-11{min-width:2.75rem}.min-w-5{min-width:1.25rem}.min-w-9{min-width:2.25rem}.min-w-\\[12rem\\]{min-width:12rem}.min-w-\\[8rem\\]{min-width:8rem}.min-w-\\[var\\(--radix-select-trigger-width\\)\\]{min-width:var(--radix-select-trigger-width)}.max-w-2xl{max-width:42rem}.max-w-3xl{max-width:48rem}.max-w-4xl{max-width:56rem}.max-w-7xl{max-width:80rem}.max-w-\\[--skeleton-width\\]{max-width:var(--skeleton-width)}.max-w-\\[75\\%\\]{max-width:75%}.max-w-lg{max-width:32rem}.max-w-max{max-width:-moz-max-content;max-width:max-content}.max-w-md{max-width:28rem}.max-w-xs{max-width:20rem}.flex-1{flex:1 1 0%}.flex-shrink-0,.shrink-0{flex-shrink:0}.grow{flex-grow:1}.grow-0{flex-grow:0}.basis-full{flex-basis:100%}.caption-bottom{caption-side:bottom}.border-collapse{border-collapse:collapse}.origin-\\[--radix-context-menu-content-transform-origin\\]{transform-origin:var(--radix-context-menu-content-transform-origin)}.origin-\\[--radix-dropdown-menu-content-transform-origin\\]{transform-origin:var(--radix-dropdown-menu-content-transform-origin)}.origin-\\[--radix-hover-card-content-transform-origin\\]{transform-origin:var(--radix-hover-card-content-transform-origin)}.origin-\\[--radix-menubar-content-transform-origin\\]{transform-origin:var(--radix-menubar-content-transform-origin)}.origin-\\[--radix-popover-content-transform-origin\\]{transform-origin:var(--radix-popover-content-transform-origin)}.origin-\\[--radix-select-content-transform-origin\\]{transform-origin:var(--radix-select-content-transform-origin)}.origin-\\[--radix-tooltip-content-transform-origin\\]{transform-origin:var(--radix-tooltip-content-transform-origin)}.-translate-x-1\\/2{--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-x-px{--tw-translate-x: -1px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-y-1\\/2{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-\\[-50\\%\\]{--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-px{--tw-translate-x: 1px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-\\[-50\\%\\]{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-45{--tw-rotate: 45deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-90{--tw-rotate: 90deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes pulse{50%{opacity:.5}}.animate-pulse{animation:pulse 2s cubic-bezier(.4,0,.6,1) infinite}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-default{cursor:default}.cursor-pointer{cursor:pointer}.touch-none{touch-action:none}.select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.resize-none{resize:none}.list-none{list-style-type:none}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.grid-cols-7{grid-template-columns:repeat(7,minmax(0,1fr))}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.flex-col-reverse{flex-direction:column-reverse}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-end{align-items:flex-end}.items-center{align-items:center}.items-stretch{align-items:stretch}.justify-start{justify-content:flex-start}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:.25rem}.gap-1\\.5{gap:.375rem}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.gap-4{gap:1rem}.gap-5{gap:1.25rem}.gap-6{gap:1.5rem}.gap-8{gap:2rem}.space-x-1>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.25rem * var(--tw-space-x-reverse));margin-left:calc(.25rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.5rem * var(--tw-space-x-reverse));margin-left:calc(.5rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-3>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.75rem * var(--tw-space-x-reverse));margin-left:calc(.75rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-4>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(1rem * var(--tw-space-x-reverse));margin-left:calc(1rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-6>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(1.5rem * var(--tw-space-x-reverse));margin-left:calc(1.5rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-8>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(2rem * var(--tw-space-x-reverse));margin-left:calc(2rem * calc(1 - var(--tw-space-x-reverse)))}.space-y-0>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(0px * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0px * var(--tw-space-y-reverse))}.space-y-1>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.25rem * var(--tw-space-y-reverse))}.space-y-1\\.5>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.375rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.375rem * var(--tw-space-y-reverse))}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.space-y-3>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.75rem * var(--tw-space-y-reverse))}.space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.space-y-6>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.5rem * var(--tw-space-y-reverse))}.self-end{align-self:flex-end}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.overflow-x-hidden{overflow-x:hidden}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.whitespace-nowrap{white-space:nowrap}.whitespace-pre-line{white-space:pre-line}.whitespace-pre-wrap{white-space:pre-wrap}.break-words{overflow-wrap:break-word}.rounded{border-radius:.25rem}.rounded-2xl{border-radius:1rem}.rounded-\\[2px\\]{border-radius:2px}.rounded-\\[inherit\\]{border-radius:inherit}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:var(--radius)}.rounded-md{border-radius:calc(var(--radius) - 2px)}.rounded-sm{border-radius:calc(var(--radius) - 4px)}.rounded-xl{border-radius:.75rem}.rounded-l{border-top-left-radius:.25rem;border-bottom-left-radius:.25rem}.rounded-r{border-top-right-radius:.25rem;border-bottom-right-radius:.25rem}.rounded-t-\\[10px\\]{border-top-left-radius:10px;border-top-right-radius:10px}.rounded-t-xl{border-top-left-radius:.75rem;border-top-right-radius:.75rem}.rounded-bl-none{border-bottom-left-radius:0}.rounded-bl-sm{border-bottom-left-radius:calc(var(--radius) - 4px)}.rounded-br-none{border-bottom-right-radius:0}.rounded-br-sm{border-bottom-right-radius:calc(var(--radius) - 4px)}.rounded-tl-sm{border-top-left-radius:calc(var(--radius) - 4px)}.border{border-width:1px}.border-2{border-width:2px}.border-\\[1\\.5px\\]{border-width:1.5px}.border-y{border-top-width:1px;border-bottom-width:1px}.border-b{border-bottom-width:1px}.border-b-2{border-bottom-width:2px}.border-l{border-left-width:1px}.border-r{border-right-width:1px}.border-t{border-top-width:1px}.border-dashed{border-style:dashed}.border-\\[--color-border\\]{border-color:var(--color-border)}.border-blue-600{--tw-border-opacity: 1;border-color:rgb(37 99 235 / var(--tw-border-opacity, 1))}.border-destructive{border-color:var(--destructive)}.border-gray-200{--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1))}.border-gray-300{--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.border-input{border-color:var(--input)}.border-primary{border-color:var(--primary)}.border-sidebar-border{border-color:var(--sidebar-border)}.border-sky-100{--tw-border-opacity: 1;border-color:rgb(224 242 254 / var(--tw-border-opacity, 1))}.border-sky-200{--tw-border-opacity: 1;border-color:rgb(186 230 253 / var(--tw-border-opacity, 1))}.border-transparent{border-color:transparent}.border-white{--tw-border-opacity: 1;border-color:rgb(255 255 255 / var(--tw-border-opacity, 1))}.border-white\\/30{border-color:#ffffff4d}.border-l-transparent{border-left-color:transparent}.border-t-transparent{border-top-color:transparent}.bg-\\[--color-bg\\]{background-color:var(--color-bg)}.bg-accent{background-color:var(--accent)}.bg-background{background-color:var(--background)}.bg-black\\/20{background-color:#0003}.bg-black\\/80{background-color:#000c}.bg-blue-100{--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}.bg-blue-50{--tw-bg-opacity: 1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.bg-blue-500{--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity, 1))}.bg-blue-600{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.bg-border{background-color:var(--border)}.bg-card{background-color:var(--card)}.bg-destructive{background-color:var(--destructive)}.bg-foreground{background-color:var(--foreground)}.bg-gray-100{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.bg-gray-200{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.bg-gray-50{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.bg-gray-900{--tw-bg-opacity: 1;background-color:rgb(17 24 39 / var(--tw-bg-opacity, 1))}.bg-green-100{--tw-bg-opacity: 1;background-color:rgb(220 252 231 / var(--tw-bg-opacity, 1))}.bg-green-50{--tw-bg-opacity: 1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.bg-green-600{--tw-bg-opacity: 1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1))}.bg-muted{background-color:var(--muted)}.bg-popover{background-color:var(--popover)}.bg-primary{background-color:var(--primary)}.bg-red-500{--tw-bg-opacity: 1;background-color:rgb(239 68 68 / var(--tw-bg-opacity, 1))}.bg-secondary{background-color:var(--secondary)}.bg-sidebar{background-color:var(--sidebar)}.bg-sidebar-border{background-color:var(--sidebar-border)}.bg-sky-100{--tw-bg-opacity: 1;background-color:rgb(224 242 254 / var(--tw-bg-opacity, 1))}.bg-sky-500{--tw-bg-opacity: 1;background-color:rgb(14 165 233 / var(--tw-bg-opacity, 1))}.bg-transparent{background-color:transparent}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-white\\/20{background-color:#fff3}.bg-white\\/80{background-color:#fffc}.bg-gradient-to-br{background-image:linear-gradient(to bottom right,var(--tw-gradient-stops))}.bg-gradient-to-tr{background-image:linear-gradient(to top right,var(--tw-gradient-stops))}.from-primary{--tw-gradient-from: var(--primary) var(--tw-gradient-from-position);--tw-gradient-to: rgb(255 255 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-sky-500{--tw-gradient-from: #0ea5e9 var(--tw-gradient-from-position);--tw-gradient-to: rgb(14 165 233 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-white\\/95{--tw-gradient-from: rgb(255 255 255 / .95) var(--tw-gradient-from-position);--tw-gradient-to: rgb(255 255 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.to-cyan-400{--tw-gradient-to: #22d3ee var(--tw-gradient-to-position)}.to-secondary{--tw-gradient-to: var(--secondary) var(--tw-gradient-to-position)}.to-sky-50{--tw-gradient-to: #f0f9ff var(--tw-gradient-to-position)}.fill-current{fill:currentColor}.object-cover{-o-object-fit:cover;object-fit:cover}.p-0{padding:0}.p-1{padding:.25rem}.p-12{padding:3rem}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.p-\\[1px\\]{padding:1px}.px-1{padding-left:.25rem;padding-right:.25rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-2\\.5{padding-left:.625rem;padding-right:.625rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-5{padding-left:1.25rem;padding-right:1.25rem}.px-8{padding-left:2rem;padding-right:2rem}.py-0\\.5{padding-top:.125rem;padding-bottom:.125rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-1\\.5{padding-top:.375rem;padding-bottom:.375rem}.py-12{padding-top:3rem;padding-bottom:3rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-20{padding-top:5rem;padding-bottom:5rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-6{padding-top:1.5rem;padding-bottom:1.5rem}.py-8{padding-top:2rem;padding-bottom:2rem}.pb-3{padding-bottom:.75rem}.pb-4{padding-bottom:1rem}.pl-10{padding-left:2.5rem}.pl-2\\.5{padding-left:.625rem}.pl-4{padding-left:1rem}.pl-8{padding-left:2rem}.pr-2{padding-right:.5rem}.pr-2\\.5{padding-right:.625rem}.pr-8{padding-right:2rem}.pt-0{padding-top:0}.pt-1{padding-top:.25rem}.pt-3{padding-top:.75rem}.pt-4{padding-top:1rem}.pt-6{padding-top:1.5rem}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.align-middle{vertical-align:middle}.font-mono{font-family:var(--font-mono)}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-6xl{font-size:3.75rem;line-height:1}.text-\\[0\\.8rem\\]{font-size:.8rem}.text-\\[10px\\]{font-size:10px}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-normal{font-weight:400}.font-semibold{font-weight:600}.tabular-nums{--tw-numeric-spacing: tabular-nums;font-variant-numeric:var(--tw-ordinal) var(--tw-slashed-zero) var(--tw-numeric-figure) var(--tw-numeric-spacing) var(--tw-numeric-fraction)}.leading-none{line-height:1}.leading-tight{line-height:1.25}.tracking-tight{letter-spacing:-.025em}.tracking-widest{letter-spacing:.1em}.text-accent{color:var(--accent)}.text-accent-foreground{color:var(--accent-foreground)}.text-blue-600{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.text-blue-800{--tw-text-opacity: 1;color:rgb(30 64 175 / var(--tw-text-opacity, 1))}.text-card-foreground{color:var(--card-foreground)}.text-current{color:currentColor}.text-destructive{color:var(--destructive)}.text-destructive-foreground{color:var(--destructive-foreground)}.text-foreground{color:var(--foreground)}.text-gray-400{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.text-gray-500{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-gray-600{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.text-gray-700{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.text-gray-800{--tw-text-opacity: 1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}.text-gray-900{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.text-green-500{--tw-text-opacity: 1;color:rgb(34 197 94 / var(--tw-text-opacity, 1))}.text-green-600{--tw-text-opacity: 1;color:rgb(22 163 74 / var(--tw-text-opacity, 1))}.text-green-800{--tw-text-opacity: 1;color:rgb(22 101 52 / var(--tw-text-opacity, 1))}.text-muted-foreground{color:var(--muted-foreground)}.text-orange-600{--tw-text-opacity: 1;color:rgb(234 88 12 / var(--tw-text-opacity, 1))}.text-popover-foreground{color:var(--popover-foreground)}.text-primary{color:var(--primary)}.text-primary-foreground{color:var(--primary-foreground)}.text-purple-600{--tw-text-opacity: 1;color:rgb(147 51 234 / var(--tw-text-opacity, 1))}.text-red-500{--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}.text-red-600{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.text-secondary{color:var(--secondary)}.text-secondary-foreground{color:var(--secondary-foreground)}.text-sidebar-foreground{color:var(--sidebar-foreground)}.text-sky-900{--tw-text-opacity: 1;color:rgb(12 74 110 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-white\\/60{color:#fff9}.text-white\\/80{color:#fffc}.text-white\\/90{color:#ffffffe6}.underline{text-decoration-line:underline}.underline-offset-4{text-underline-offset:4px}.opacity-0{opacity:0}.opacity-20{opacity:.2}.opacity-50{opacity:.5}.opacity-60{opacity:.6}.opacity-70{opacity:.7}.opacity-90{opacity:.9}.shadow{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-2xl{--tw-shadow: 0 25px 50px -12px rgb(0 0 0 / .25);--tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-\\[0_0_0_1px_hsl\\(var\\(--sidebar-border\\)\\)\\]{--tw-shadow: 0 0 0 1px hsl(var(--sidebar-border));--tw-shadow-colored: 0 0 0 1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-inner{--tw-shadow: inset 0 2px 4px 0 rgb(0 0 0 / .05);--tw-shadow-colored: inset 0 2px 4px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-md{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-none{--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-xl{--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.outline-none{outline:2px solid transparent;outline-offset:2px}.outline{outline-style:solid}.ring-0{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-2{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-ring{--tw-ring-color: var(--ring)}.ring-sidebar-ring{--tw-ring-color: var(--sidebar-ring)}.ring-offset-background{--tw-ring-offset-color: var(--background)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur-sm{--tw-backdrop-blur: blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[left\\,right\\,width\\]{transition-property:left,right,width;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[margin\\,opacity\\]{transition-property:margin,opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[width\\,height\\,padding\\]{transition-property:width,height,padding;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[width\\]{transition-property:width;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-1000{transition-duration:1s}.duration-200{transition-duration:.2s}.duration-300{transition-duration:.3s}.duration-500{transition-duration:.5s}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}.ease-linear{transition-timing-function:linear}@keyframes enter{0%{opacity:var(--tw-enter-opacity, 1);transform:translate3d(var(--tw-enter-translate-x, 0),var(--tw-enter-translate-y, 0),0) scale3d(var(--tw-enter-scale, 1),var(--tw-enter-scale, 1),var(--tw-enter-scale, 1)) rotate(var(--tw-enter-rotate, 0))}}@keyframes exit{to{opacity:var(--tw-exit-opacity, 1);transform:translate3d(var(--tw-exit-translate-x, 0),var(--tw-exit-translate-y, 0),0) scale3d(var(--tw-exit-scale, 1),var(--tw-exit-scale, 1),var(--tw-exit-scale, 1)) rotate(var(--tw-exit-rotate, 0))}}.animate-in{animation-name:enter;animation-duration:.15s;--tw-enter-opacity: initial;--tw-enter-scale: initial;--tw-enter-rotate: initial;--tw-enter-translate-x: initial;--tw-enter-translate-y: initial}.fade-in-0{--tw-enter-opacity: 0}.fade-in-80{--tw-enter-opacity: .8}.zoom-in-95{--tw-enter-scale: .95}.duration-1000{animation-duration:1s}.duration-200{animation-duration:.2s}.duration-300{animation-duration:.3s}.duration-500{animation-duration:.5s}.ease-in-out{animation-timing-function:cubic-bezier(.4,0,.2,1)}.ease-linear{animation-timing-function:linear}.running{animation-play-state:running}:root{--background: hsl(0 0% 100%);--foreground: hsl(210 25% 7.8431%);--card: hsl(180 6.6667% 97.0588%);--card-foreground: hsl(210 25% 7.8431%);--popover: hsl(0 0% 100%);--popover-foreground: hsl(210 25% 7.8431%);--primary: hsl(217 91% 60%);--primary-foreground: hsl(0 0% 100%);--secondary: hsl(160 84% 39%);--secondary-foreground: hsl(0 0% 100%);--muted: hsl(240 1.9608% 90%);--muted-foreground: hsl(210 25% 7.8431%);--accent: hsl(0 84% 60%);--accent-foreground: hsl(0 0% 100%);--destructive: hsl(356.3033 90.5579% 54.3137%);--destructive-foreground: hsl(0 0% 100%);--border: hsl(201.4286 30.4348% 90.9804%);--input: hsl(200 23.0769% 97.451%);--ring: hsl(217 91% 60%);--chart-1: hsl(217 91% 60%);--chart-2: hsl(160 84% 39%);--chart-3: hsl(42.029 92.8251% 56.2745%);--chart-4: hsl(147.1429 78.5047% 41.9608%);--chart-5: hsl(341.4894 75.2% 50.9804%);--sidebar: hsl(180 6.6667% 97.0588%);--sidebar-foreground: hsl(210 25% 7.8431%);--sidebar-primary: hsl(217 91% 60%);--sidebar-primary-foreground: hsl(0 0% 100%);--sidebar-accent: hsl(211.5789 51.3514% 92.7451%);--sidebar-accent-foreground: hsl(217 91% 60%);--sidebar-border: hsl(205 25% 90.5882%);--sidebar-ring: hsl(217 91% 60%);--font-sans: \"Inter\", system-ui, sans-serif;--font-serif: Georgia, serif;--font-mono: Menlo, monospace;--radius: .5rem}.dark{--background: hsl(0 0% 0%);--foreground: hsl(200 6.6667% 91.1765%);--card: hsl(228 9.8039% 10%);--card-foreground: hsl(0 0% 85.098%);--popover: hsl(0 0% 0%);--popover-foreground: hsl(200 6.6667% 91.1765%);--primary: hsl(217 91% 60%);--primary-foreground: hsl(0 0% 100%);--secondary: hsl(195 15.3846% 94.902%);--secondary-foreground: hsl(210 25% 7.8431%);--muted: hsl(0 0% 9.4118%);--muted-foreground: hsl(210 3.3898% 46.2745%);--accent: hsl(205.7143 70% 7.8431%);--accent-foreground: hsl(217 91% 60%);--destructive: hsl(356.3033 90.5579% 54.3137%);--destructive-foreground: hsl(0 0% 100%);--border: hsl(210 5.2632% 14.902%);--input: hsl(207.6923 27.6596% 18.4314%);--ring: hsl(217 91% 60%)}@keyframes fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in{animation:fadeIn .3s ease-out}.hero-gradient{background:linear-gradient(135deg,#3c83f6,#10b77f)}.glass{-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background:#ffffff1a;border:1px solid rgba(255,255,255,.2)}.file\\:border-0::file-selector-button{border-width:0px}.file\\:bg-transparent::file-selector-button{background-color:transparent}.file\\:text-sm::file-selector-button{font-size:.875rem;line-height:1.25rem}.file\\:font-medium::file-selector-button{font-weight:500}.file\\:text-foreground::file-selector-button{color:var(--foreground)}.placeholder\\:text-muted-foreground::-moz-placeholder{color:var(--muted-foreground)}.placeholder\\:text-muted-foreground::placeholder{color:var(--muted-foreground)}.after\\:absolute:after{content:var(--tw-content);position:absolute}.after\\:-inset-2:after{content:var(--tw-content);top:-.5rem;right:-.5rem;bottom:-.5rem;left:-.5rem}.after\\:inset-y-0:after{content:var(--tw-content);top:0;bottom:0}.after\\:left-1\\/2:after{content:var(--tw-content);left:50%}.after\\:w-1:after{content:var(--tw-content);width:.25rem}.after\\:w-\\[2px\\]:after{content:var(--tw-content);width:2px}.after\\:-translate-x-1\\/2:after{content:var(--tw-content);--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.first\\:rounded-l-md:first-child{border-top-left-radius:calc(var(--radius) - 2px);border-bottom-left-radius:calc(var(--radius) - 2px)}.first\\:border-l:first-child{border-left-width:1px}.last\\:rounded-r-md:last-child{border-top-right-radius:calc(var(--radius) - 2px);border-bottom-right-radius:calc(var(--radius) - 2px)}.focus-within\\:relative:focus-within{position:relative}.focus-within\\:z-20:focus-within{z-index:20}.hover\\:border-primary:hover{border-color:var(--primary)}.hover\\:bg-accent:hover{background-color:var(--accent)}.hover\\:bg-blue-100:hover{--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}.hover\\:bg-blue-700:hover{--tw-bg-opacity: 1;background-color:rgb(29 78 216 / var(--tw-bg-opacity, 1))}.hover\\:bg-gray-100:hover{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.hover\\:bg-gray-50:hover{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.hover\\:bg-green-700:hover{--tw-bg-opacity: 1;background-color:rgb(21 128 61 / var(--tw-bg-opacity, 1))}.hover\\:bg-muted:hover{background-color:var(--muted)}.hover\\:bg-primary:hover{background-color:var(--primary)}.hover\\:bg-secondary:hover{background-color:var(--secondary)}.hover\\:bg-sidebar-accent:hover{background-color:var(--sidebar-accent)}.hover\\:bg-sky-50:hover{--tw-bg-opacity: 1;background-color:rgb(240 249 255 / var(--tw-bg-opacity, 1))}.hover\\:bg-sky-600:hover{--tw-bg-opacity: 1;background-color:rgb(2 132 199 / var(--tw-bg-opacity, 1))}.hover\\:bg-transparent:hover{background-color:transparent}.hover\\:bg-white:hover{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.hover\\:bg-white\\/30:hover{background-color:#ffffff4d}.hover\\:from-cyan-600:hover{--tw-gradient-from: #0891b2 var(--tw-gradient-from-position);--tw-gradient-to: rgb(8 145 178 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.hover\\:text-accent-foreground:hover{color:var(--accent-foreground)}.hover\\:text-blue-700:hover{--tw-text-opacity: 1;color:rgb(29 78 216 / var(--tw-text-opacity, 1))}.hover\\:text-foreground:hover{color:var(--foreground)}.hover\\:text-gray-600:hover{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.hover\\:text-gray-700:hover{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.hover\\:text-muted-foreground:hover{color:var(--muted-foreground)}.hover\\:text-primary:hover{color:var(--primary)}.hover\\:text-primary-foreground:hover{color:var(--primary-foreground)}.hover\\:text-red-700:hover{--tw-text-opacity: 1;color:rgb(185 28 28 / var(--tw-text-opacity, 1))}.hover\\:text-red-800:hover{--tw-text-opacity: 1;color:rgb(153 27 27 / var(--tw-text-opacity, 1))}.hover\\:text-sidebar-accent-foreground:hover{color:var(--sidebar-accent-foreground)}.hover\\:underline:hover{text-decoration-line:underline}.hover\\:opacity-100:hover{opacity:1}.hover\\:shadow-\\[0_0_0_1px_hsl\\(var\\(--sidebar-accent\\)\\)\\]:hover{--tw-shadow: 0 0 0 1px hsl(var(--sidebar-accent));--tw-shadow-colored: 0 0 0 1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.hover\\:after\\:bg-sidebar-border:hover:after{content:var(--tw-content);background-color:var(--sidebar-border)}.focus\\:bg-accent:focus{background-color:var(--accent)}.focus\\:bg-primary:focus{background-color:var(--primary)}.focus\\:text-accent-foreground:focus{color:var(--accent-foreground)}.focus\\:text-primary-foreground:focus{color:var(--primary-foreground)}.focus\\:opacity-100:focus{opacity:1}.focus\\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\\:outline:focus{outline-style:solid}.focus\\:ring:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(3px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\\:ring-2:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\\:ring-blue-300:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(147 197 253 / var(--tw-ring-opacity, 1))}.focus\\:ring-ring:focus{--tw-ring-color: var(--ring)}.focus\\:ring-offset-2:focus{--tw-ring-offset-width: 2px}.focus-visible\\:outline-none:focus-visible{outline:2px solid transparent;outline-offset:2px}.focus-visible\\:ring-1:focus-visible{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus-visible\\:ring-2:focus-visible{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus-visible\\:ring-ring:focus-visible{--tw-ring-color: var(--ring)}.focus-visible\\:ring-sidebar-ring:focus-visible{--tw-ring-color: var(--sidebar-ring)}.focus-visible\\:ring-offset-1:focus-visible{--tw-ring-offset-width: 1px}.focus-visible\\:ring-offset-2:focus-visible{--tw-ring-offset-width: 2px}.focus-visible\\:ring-offset-background:focus-visible{--tw-ring-offset-color: var(--background)}.active\\:bg-sidebar-accent:active{background-color:var(--sidebar-accent)}.active\\:text-sidebar-accent-foreground:active{color:var(--sidebar-accent-foreground)}.disabled\\:pointer-events-none:disabled{pointer-events:none}.disabled\\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\\:opacity-50:disabled{opacity:.5}.group\\/menu-item:focus-within .group-focus-within\\/menu-item\\:opacity-100{opacity:1}.group\\/menu-item:hover .group-hover\\/menu-item\\:opacity-100,.group:hover .group-hover\\:opacity-100{opacity:1}.group.destructive .group-\\[\\.destructive\\]\\:text-red-300{--tw-text-opacity: 1;color:rgb(252 165 165 / var(--tw-text-opacity, 1))}.group.destructive .group-\\[\\.destructive\\]\\:hover\\:bg-destructive:hover{background-color:var(--destructive)}.group.destructive .group-\\[\\.destructive\\]\\:hover\\:text-destructive-foreground:hover{color:var(--destructive-foreground)}.group.destructive .group-\\[\\.destructive\\]\\:hover\\:text-red-50:hover{--tw-text-opacity: 1;color:rgb(254 242 242 / var(--tw-text-opacity, 1))}.group.destructive .group-\\[\\.destructive\\]\\:focus\\:ring-destructive:focus{--tw-ring-color: var(--destructive)}.group.destructive .group-\\[\\.destructive\\]\\:focus\\:ring-red-400:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(248 113 113 / var(--tw-ring-opacity, 1))}.group.destructive .group-\\[\\.destructive\\]\\:focus\\:ring-offset-red-600:focus{--tw-ring-offset-color: #dc2626}.peer:checked~.peer-checked\\:translate-x-5{--tw-translate-x: 1.25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.peer:checked~.peer-checked\\:scale-\\[1\\.02\\]{--tw-scale-x: 1.02;--tw-scale-y: 1.02;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.peer:checked~.peer-checked\\:border-primary{border-color:var(--primary)}.peer:checked~.peer-checked\\:bg-sky-500{--tw-bg-opacity: 1;background-color:rgb(14 165 233 / var(--tw-bg-opacity, 1))}.peer:checked~.peer-checked\\:shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.peer\\/menu-button:hover~.peer-hover\\/menu-button\\:text-sidebar-accent-foreground{color:var(--sidebar-accent-foreground)}.peer:focus~.peer-focus\\:ring-4{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.peer:focus~.peer-focus\\:ring-sky-300{--tw-ring-opacity: 1;--tw-ring-color: rgb(125 211 252 / var(--tw-ring-opacity, 1))}.peer:disabled~.peer-disabled\\:cursor-not-allowed{cursor:not-allowed}.peer:disabled~.peer-disabled\\:opacity-70{opacity:.7}.has-\\[\\[data-variant\\=inset\\]\\]\\:bg-sidebar:has([data-variant=inset]){background-color:var(--sidebar)}.has-\\[\\:disabled\\]\\:opacity-50:has(:disabled){opacity:.5}.group\\/menu-item:has([data-sidebar=menu-action]) .group-has-\\[\\[data-sidebar\\=menu-action\\]\\]\\/menu-item\\:pr-8{padding-right:2rem}.aria-disabled\\:pointer-events-none[aria-disabled=true]{pointer-events:none}.aria-disabled\\:opacity-50[aria-disabled=true]{opacity:.5}.aria-selected\\:bg-accent[aria-selected=true]{background-color:var(--accent)}.aria-selected\\:text-accent-foreground[aria-selected=true]{color:var(--accent-foreground)}.aria-selected\\:text-muted-foreground[aria-selected=true]{color:var(--muted-foreground)}.aria-selected\\:opacity-100[aria-selected=true]{opacity:1}.data-\\[disabled\\=true\\]\\:pointer-events-none[data-disabled=true],.data-\\[disabled\\]\\:pointer-events-none[data-disabled]{pointer-events:none}.data-\\[panel-group-direction\\=vertical\\]\\:h-px[data-panel-group-direction=vertical]{height:1px}.data-\\[panel-group-direction\\=vertical\\]\\:w-full[data-panel-group-direction=vertical]{width:100%}.data-\\[side\\=bottom\\]\\:translate-y-1[data-side=bottom]{--tw-translate-y: .25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[side\\=left\\]\\:-translate-x-1[data-side=left]{--tw-translate-x: -.25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[side\\=right\\]\\:translate-x-1[data-side=right]{--tw-translate-x: .25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[side\\=top\\]\\:-translate-y-1[data-side=top]{--tw-translate-y: -.25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[state\\=checked\\]\\:translate-x-5[data-state=checked]{--tw-translate-x: 1.25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[state\\=unchecked\\]\\:translate-x-0[data-state=unchecked],.data-\\[swipe\\=cancel\\]\\:translate-x-0[data-swipe=cancel]{--tw-translate-x: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[swipe\\=end\\]\\:translate-x-\\[var\\(--radix-toast-swipe-end-x\\)\\][data-swipe=end]{--tw-translate-x: var(--radix-toast-swipe-end-x);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[swipe\\=move\\]\\:translate-x-\\[var\\(--radix-toast-swipe-move-x\\)\\][data-swipe=move]{--tw-translate-x: var(--radix-toast-swipe-move-x);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes accordion-up{0%{height:var(--radix-accordion-content-height)}to{height:0}}.data-\\[state\\=closed\\]\\:animate-accordion-up[data-state=closed]{animation:accordion-up .2s ease-out}@keyframes accordion-down{0%{height:0}to{height:var(--radix-accordion-content-height)}}.data-\\[state\\=open\\]\\:animate-accordion-down[data-state=open]{animation:accordion-down .2s ease-out}.data-\\[panel-group-direction\\=vertical\\]\\:flex-col[data-panel-group-direction=vertical]{flex-direction:column}.data-\\[active\\=true\\]\\:bg-sidebar-accent[data-active=true]{background-color:var(--sidebar-accent)}.data-\\[selected\\=\\'true\\'\\]\\:bg-accent[data-selected=true]{background-color:var(--accent)}.data-\\[state\\=active\\]\\:bg-background[data-state=active]{background-color:var(--background)}.data-\\[state\\=checked\\]\\:bg-primary[data-state=checked]{background-color:var(--primary)}.data-\\[state\\=on\\]\\:bg-accent[data-state=on],.data-\\[state\\=open\\]\\:bg-accent[data-state=open]{background-color:var(--accent)}.data-\\[state\\=open\\]\\:bg-secondary[data-state=open]{background-color:var(--secondary)}.data-\\[state\\=selected\\]\\:bg-muted[data-state=selected]{background-color:var(--muted)}.data-\\[state\\=unchecked\\]\\:bg-input[data-state=unchecked]{background-color:var(--input)}.data-\\[active\\=true\\]\\:font-medium[data-active=true]{font-weight:500}.data-\\[active\\=true\\]\\:text-sidebar-accent-foreground[data-active=true]{color:var(--sidebar-accent-foreground)}.data-\\[placeholder\\]\\:text-muted-foreground[data-placeholder]{color:var(--muted-foreground)}.data-\\[selected\\=true\\]\\:text-accent-foreground[data-selected=true]{color:var(--accent-foreground)}.data-\\[state\\=active\\]\\:text-foreground[data-state=active]{color:var(--foreground)}.data-\\[state\\=checked\\]\\:text-primary-foreground[data-state=checked]{color:var(--primary-foreground)}.data-\\[state\\=on\\]\\:text-accent-foreground[data-state=on],.data-\\[state\\=open\\]\\:text-accent-foreground[data-state=open]{color:var(--accent-foreground)}.data-\\[state\\=open\\]\\:text-muted-foreground[data-state=open]{color:var(--muted-foreground)}.data-\\[disabled\\=true\\]\\:opacity-50[data-disabled=true],.data-\\[disabled\\]\\:opacity-50[data-disabled]{opacity:.5}.data-\\[state\\=open\\]\\:opacity-100[data-state=open]{opacity:1}.data-\\[state\\=active\\]\\:shadow-sm[data-state=active]{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.data-\\[swipe\\=move\\]\\:transition-none[data-swipe=move]{transition-property:none}.data-\\[state\\=closed\\]\\:duration-300[data-state=closed]{transition-duration:.3s}.data-\\[state\\=open\\]\\:duration-500[data-state=open]{transition-duration:.5s}.data-\\[motion\\^\\=from-\\]\\:animate-in[data-motion^=from-],.data-\\[state\\=open\\]\\:animate-in[data-state=open],.data-\\[state\\=visible\\]\\:animate-in[data-state=visible]{animation-name:enter;animation-duration:.15s;--tw-enter-opacity: initial;--tw-enter-scale: initial;--tw-enter-rotate: initial;--tw-enter-translate-x: initial;--tw-enter-translate-y: initial}.data-\\[motion\\^\\=to-\\]\\:animate-out[data-motion^=to-],.data-\\[state\\=closed\\]\\:animate-out[data-state=closed],.data-\\[state\\=hidden\\]\\:animate-out[data-state=hidden],.data-\\[swipe\\=end\\]\\:animate-out[data-swipe=end]{animation-name:exit;animation-duration:.15s;--tw-exit-opacity: initial;--tw-exit-scale: initial;--tw-exit-rotate: initial;--tw-exit-translate-x: initial;--tw-exit-translate-y: initial}.data-\\[motion\\^\\=from-\\]\\:fade-in[data-motion^=from-]{--tw-enter-opacity: 0}.data-\\[motion\\^\\=to-\\]\\:fade-out[data-motion^=to-],.data-\\[state\\=closed\\]\\:fade-out-0[data-state=closed]{--tw-exit-opacity: 0}.data-\\[state\\=closed\\]\\:fade-out-80[data-state=closed]{--tw-exit-opacity: .8}.data-\\[state\\=hidden\\]\\:fade-out[data-state=hidden]{--tw-exit-opacity: 0}.data-\\[state\\=open\\]\\:fade-in-0[data-state=open],.data-\\[state\\=visible\\]\\:fade-in[data-state=visible]{--tw-enter-opacity: 0}.data-\\[state\\=closed\\]\\:zoom-out-95[data-state=closed]{--tw-exit-scale: .95}.data-\\[state\\=open\\]\\:zoom-in-90[data-state=open]{--tw-enter-scale: .9}.data-\\[state\\=open\\]\\:zoom-in-95[data-state=open]{--tw-enter-scale: .95}.data-\\[motion\\=from-end\\]\\:slide-in-from-right-52[data-motion=from-end]{--tw-enter-translate-x: 13rem}.data-\\[motion\\=from-start\\]\\:slide-in-from-left-52[data-motion=from-start]{--tw-enter-translate-x: -13rem}.data-\\[motion\\=to-end\\]\\:slide-out-to-right-52[data-motion=to-end]{--tw-exit-translate-x: 13rem}.data-\\[motion\\=to-start\\]\\:slide-out-to-left-52[data-motion=to-start]{--tw-exit-translate-x: -13rem}.data-\\[side\\=bottom\\]\\:slide-in-from-top-2[data-side=bottom]{--tw-enter-translate-y: -.5rem}.data-\\[side\\=left\\]\\:slide-in-from-right-2[data-side=left]{--tw-enter-translate-x: .5rem}.data-\\[side\\=right\\]\\:slide-in-from-left-2[data-side=right]{--tw-enter-translate-x: -.5rem}.data-\\[side\\=top\\]\\:slide-in-from-bottom-2[data-side=top]{--tw-enter-translate-y: .5rem}.data-\\[state\\=closed\\]\\:slide-out-to-bottom[data-state=closed]{--tw-exit-translate-y: 100%}.data-\\[state\\=closed\\]\\:slide-out-to-left[data-state=closed]{--tw-exit-translate-x: -100%}.data-\\[state\\=closed\\]\\:slide-out-to-left-1\\/2[data-state=closed]{--tw-exit-translate-x: -50%}.data-\\[state\\=closed\\]\\:slide-out-to-right[data-state=closed],.data-\\[state\\=closed\\]\\:slide-out-to-right-full[data-state=closed]{--tw-exit-translate-x: 100%}.data-\\[state\\=closed\\]\\:slide-out-to-top[data-state=closed]{--tw-exit-translate-y: -100%}.data-\\[state\\=closed\\]\\:slide-out-to-top-\\[48\\%\\][data-state=closed]{--tw-exit-translate-y: -48%}.data-\\[state\\=open\\]\\:slide-in-from-bottom[data-state=open]{--tw-enter-translate-y: 100%}.data-\\[state\\=open\\]\\:slide-in-from-left[data-state=open]{--tw-enter-translate-x: -100%}.data-\\[state\\=open\\]\\:slide-in-from-left-1\\/2[data-state=open]{--tw-enter-translate-x: -50%}.data-\\[state\\=open\\]\\:slide-in-from-right[data-state=open]{--tw-enter-translate-x: 100%}.data-\\[state\\=open\\]\\:slide-in-from-top[data-state=open]{--tw-enter-translate-y: -100%}.data-\\[state\\=open\\]\\:slide-in-from-top-\\[48\\%\\][data-state=open]{--tw-enter-translate-y: -48%}.data-\\[state\\=open\\]\\:slide-in-from-top-full[data-state=open]{--tw-enter-translate-y: -100%}.data-\\[state\\=closed\\]\\:duration-300[data-state=closed]{animation-duration:.3s}.data-\\[state\\=open\\]\\:duration-500[data-state=open]{animation-duration:.5s}.data-\\[panel-group-direction\\=vertical\\]\\:after\\:left-0[data-panel-group-direction=vertical]:after{content:var(--tw-content);left:0}.data-\\[panel-group-direction\\=vertical\\]\\:after\\:h-1[data-panel-group-direction=vertical]:after{content:var(--tw-content);height:.25rem}.data-\\[panel-group-direction\\=vertical\\]\\:after\\:w-full[data-panel-group-direction=vertical]:after{content:var(--tw-content);width:100%}.data-\\[panel-group-direction\\=vertical\\]\\:after\\:-translate-y-1\\/2[data-panel-group-direction=vertical]:after{content:var(--tw-content);--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[panel-group-direction\\=vertical\\]\\:after\\:translate-x-0[data-panel-group-direction=vertical]:after{content:var(--tw-content);--tw-translate-x: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[state\\=open\\]\\:hover\\:bg-accent:hover[data-state=open]{background-color:var(--accent)}.data-\\[state\\=open\\]\\:hover\\:bg-sidebar-accent:hover[data-state=open]{background-color:var(--sidebar-accent)}.data-\\[state\\=open\\]\\:hover\\:text-sidebar-accent-foreground:hover[data-state=open]{color:var(--sidebar-accent-foreground)}.data-\\[state\\=open\\]\\:focus\\:bg-accent:focus[data-state=open]{background-color:var(--accent)}.group[data-collapsible=offcanvas] .group-data-\\[collapsible\\=offcanvas\\]\\:left-\\[calc\\(var\\(--sidebar-width\\)\\*-1\\)\\]{left:calc(var(--sidebar-width) * -1)}.group[data-collapsible=offcanvas] .group-data-\\[collapsible\\=offcanvas\\]\\:right-\\[calc\\(var\\(--sidebar-width\\)\\*-1\\)\\]{right:calc(var(--sidebar-width) * -1)}.group[data-side=left] .group-data-\\[side\\=left\\]\\:-right-4{right:-1rem}.group[data-side=right] .group-data-\\[side\\=right\\]\\:left-0{left:0}.group[data-collapsible=icon] .group-data-\\[collapsible\\=icon\\]\\:-mt-8{margin-top:-2rem}.group[data-collapsible=icon] .group-data-\\[collapsible\\=icon\\]\\:hidden{display:none}.group[data-collapsible=icon] .group-data-\\[collapsible\\=icon\\]\\:\\!size-8{width:2rem!important;height:2rem!important}.group[data-collapsible=icon] .group-data-\\[collapsible\\=icon\\]\\:w-\\[--sidebar-width-icon\\]{width:var(--sidebar-width-icon)}.group[data-collapsible=icon] .group-data-\\[collapsible\\=icon\\]\\:w-\\[calc\\(var\\(--sidebar-width-icon\\)_\\+_theme\\(spacing\\.4\\)\\)\\]{width:calc(var(--sidebar-width-icon) + 1rem)}.group[data-collapsible=icon] .group-data-\\[collapsible\\=icon\\]\\:w-\\[calc\\(var\\(--sidebar-width-icon\\)_\\+_theme\\(spacing\\.4\\)_\\+2px\\)\\]{width:calc(var(--sidebar-width-icon) + 1rem + 2px)}.group[data-collapsible=offcanvas] .group-data-\\[collapsible\\=offcanvas\\]\\:w-0{width:0px}.group[data-collapsible=offcanvas] .group-data-\\[collapsible\\=offcanvas\\]\\:translate-x-0{--tw-translate-x: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group[data-side=right] .group-data-\\[side\\=right\\]\\:rotate-180,.group[data-state=open] .group-data-\\[state\\=open\\]\\:rotate-180{--tw-rotate: 180deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group[data-collapsible=icon] .group-data-\\[collapsible\\=icon\\]\\:overflow-hidden{overflow:hidden}.group[data-variant=floating] .group-data-\\[variant\\=floating\\]\\:rounded-lg{border-radius:var(--radius)}.group[data-variant=floating] .group-data-\\[variant\\=floating\\]\\:border{border-width:1px}.group[data-side=left] .group-data-\\[side\\=left\\]\\:border-r{border-right-width:1px}.group[data-side=right] .group-data-\\[side\\=right\\]\\:border-l{border-left-width:1px}.group[data-variant=floating] .group-data-\\[variant\\=floating\\]\\:border-sidebar-border{border-color:var(--sidebar-border)}.group[data-collapsible=icon] .group-data-\\[collapsible\\=icon\\]\\:\\!p-0{padding:0!important}.group[data-collapsible=icon] .group-data-\\[collapsible\\=icon\\]\\:\\!p-2{padding:.5rem!important}.group[data-collapsible=icon] .group-data-\\[collapsible\\=icon\\]\\:opacity-0{opacity:0}.group[data-variant=floating] .group-data-\\[variant\\=floating\\]\\:shadow{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.group[data-collapsible=offcanvas] .group-data-\\[collapsible\\=offcanvas\\]\\:after\\:left-full:after{content:var(--tw-content);left:100%}.group[data-collapsible=offcanvas] .group-data-\\[collapsible\\=offcanvas\\]\\:hover\\:bg-sidebar:hover{background-color:var(--sidebar)}.peer\\/menu-button[data-size=default]~.peer-data-\\[size\\=default\\]\\/menu-button\\:top-1\\.5{top:.375rem}.peer\\/menu-button[data-size=lg]~.peer-data-\\[size\\=lg\\]\\/menu-button\\:top-2\\.5{top:.625rem}.peer\\/menu-button[data-size=sm]~.peer-data-\\[size\\=sm\\]\\/menu-button\\:top-1{top:.25rem}.peer\\/menu-button[data-active=true]~.peer-data-\\[active\\=true\\]\\/menu-button\\:text-sidebar-accent-foreground{color:var(--sidebar-accent-foreground)}.dark\\:border-destructive:is(.dark *){border-color:var(--destructive)}@media (min-width: 640px){.sm\\:bottom-0{bottom:0}.sm\\:right-0{right:0}.sm\\:top-auto{top:auto}.sm\\:mt-0{margin-top:0}.sm\\:flex{display:flex}.sm\\:max-w-2xl{max-width:42rem}.sm\\:max-w-3xl{max-width:48rem}.sm\\:max-w-4xl{max-width:56rem}.sm\\:max-w-md{max-width:28rem}.sm\\:max-w-sm{max-width:24rem}.sm\\:max-w-xl{max-width:36rem}.sm\\:flex-row{flex-direction:row}.sm\\:flex-col{flex-direction:column}.sm\\:justify-end{justify-content:flex-end}.sm\\:gap-2\\.5{gap:.625rem}.sm\\:space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.5rem * var(--tw-space-x-reverse));margin-left:calc(.5rem * calc(1 - var(--tw-space-x-reverse)))}.sm\\:space-x-4>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(1rem * var(--tw-space-x-reverse));margin-left:calc(1rem * calc(1 - var(--tw-space-x-reverse)))}.sm\\:space-y-0>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(0px * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0px * var(--tw-space-y-reverse))}.sm\\:rounded-lg{border-radius:var(--radius)}.sm\\:px-6{padding-left:1.5rem;padding-right:1.5rem}.sm\\:text-left{text-align:left}.data-\\[state\\=open\\]\\:sm\\:slide-in-from-bottom-full[data-state=open]{--tw-enter-translate-y: 100%}}@media (min-width: 768px){.md\\:absolute{position:absolute}.md\\:ml-4{margin-left:1rem}.md\\:block{display:block}.md\\:flex{display:flex}.md\\:w-\\[var\\(--radix-navigation-menu-viewport-width\\)\\]{width:var(--radix-navigation-menu-viewport-width)}.md\\:w-auto{width:auto}.md\\:max-w-\\[420px\\]{max-width:420px}.md\\:max-w-md{max-width:28rem}.md\\:max-w-xl{max-width:36rem}.md\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.md\\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.md\\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.md\\:flex-row{flex-direction:row}.md\\:gap-0{gap:0px}.md\\:text-4xl{font-size:2.25rem;line-height:2.5rem}.md\\:text-6xl{font-size:3.75rem;line-height:1}.md\\:text-sm{font-size:.875rem;line-height:1.25rem}.md\\:opacity-0{opacity:0}.after\\:md\\:hidden:after{content:var(--tw-content);display:none}.peer[data-variant=inset]~.md\\:peer-data-\\[variant\\=inset\\]\\:m-2{margin:.5rem}.peer[data-state=collapsed][data-variant=inset]~.md\\:peer-data-\\[state\\=collapsed\\]\\:peer-data-\\[variant\\=inset\\]\\:ml-2{margin-left:.5rem}.peer[data-variant=inset]~.md\\:peer-data-\\[variant\\=inset\\]\\:ml-0{margin-left:0}.peer[data-variant=inset]~.md\\:peer-data-\\[variant\\=inset\\]\\:rounded-xl{border-radius:.75rem}.peer[data-variant=inset]~.md\\:peer-data-\\[variant\\=inset\\]\\:shadow{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}}@media (min-width: 1024px){.lg\\:w-64{width:16rem}.lg\\:flex-row{flex-direction:row}.lg\\:px-8{padding-left:2rem;padding-right:2rem}}.\\[\\&\\:has\\(\\[aria-selected\\]\\)\\]\\:bg-accent:has([aria-selected]){background-color:var(--accent)}.first\\:\\[\\&\\:has\\(\\[aria-selected\\]\\)\\]\\:rounded-l-md:has([aria-selected]):first-child{border-top-left-radius:calc(var(--radius) - 2px);border-bottom-left-radius:calc(var(--radius) - 2px)}.last\\:\\[\\&\\:has\\(\\[aria-selected\\]\\)\\]\\:rounded-r-md:has([aria-selected]):last-child{border-top-right-radius:calc(var(--radius) - 2px);border-bottom-right-radius:calc(var(--radius) - 2px)}.\\[\\&\\:has\\(\\[aria-selected\\]\\.day-range-end\\)\\]\\:rounded-r-md:has([aria-selected].day-range-end){border-top-right-radius:calc(var(--radius) - 2px);border-bottom-right-radius:calc(var(--radius) - 2px)}.\\[\\&\\:has\\(\\[role\\=checkbox\\]\\)\\]\\:pr-0:has([role=checkbox]){padding-right:0}.\\[\\&\\>button\\]\\:hidden>button{display:none}.\\[\\&\\>span\\:last-child\\]\\:truncate>span:last-child{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.\\[\\&\\>span\\]\\:line-clamp-1>span{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.\\[\\&\\>svg\\+div\\]\\:translate-y-\\[-3px\\]>svg+div{--tw-translate-y: -3px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.\\[\\&\\>svg\\]\\:absolute>svg{position:absolute}.\\[\\&\\>svg\\]\\:left-4>svg{left:1rem}.\\[\\&\\>svg\\]\\:top-4>svg{top:1rem}.\\[\\&\\>svg\\]\\:size-4>svg{width:1rem;height:1rem}.\\[\\&\\>svg\\]\\:h-2\\.5>svg{height:.625rem}.\\[\\&\\>svg\\]\\:h-3>svg{height:.75rem}.\\[\\&\\>svg\\]\\:h-3\\.5>svg{height:.875rem}.\\[\\&\\>svg\\]\\:w-2\\.5>svg{width:.625rem}.\\[\\&\\>svg\\]\\:w-3>svg{width:.75rem}.\\[\\&\\>svg\\]\\:w-3\\.5>svg{width:.875rem}.\\[\\&\\>svg\\]\\:shrink-0>svg{flex-shrink:0}.\\[\\&\\>svg\\]\\:text-destructive>svg{color:var(--destructive)}.\\[\\&\\>svg\\]\\:text-foreground>svg{color:var(--foreground)}.\\[\\&\\>svg\\]\\:text-muted-foreground>svg{color:var(--muted-foreground)}.\\[\\&\\>svg\\]\\:text-sidebar-accent-foreground>svg{color:var(--sidebar-accent-foreground)}.\\[\\&\\>svg\\~\\*\\]\\:pl-7>svg~*{padding-left:1.75rem}.\\[\\&\\>tr\\]\\:last\\:border-b-0:last-child>tr{border-bottom-width:0px}.\\[\\&\\[data-panel-group-direction\\=vertical\\]\\>div\\]\\:rotate-90[data-panel-group-direction=vertical]>div{--tw-rotate: 90deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.\\[\\&\\[data-state\\=open\\]\\>svg\\]\\:rotate-180[data-state=open]>svg{--tw-rotate: 180deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.\\[\\&_\\.recharts-cartesian-axis-tick_text\\]\\:fill-muted-foreground .recharts-cartesian-axis-tick text{fill:var(--muted-foreground)}.\\[\\&_\\.recharts-curve\\.recharts-tooltip-cursor\\]\\:stroke-border .recharts-curve.recharts-tooltip-cursor{stroke:var(--border)}.\\[\\&_\\.recharts-dot\\[stroke\\=\\'\\#fff\\'\\]\\]\\:stroke-transparent .recharts-dot[stroke=\"#fff\"]{stroke:transparent}.\\[\\&_\\.recharts-layer\\]\\:outline-none .recharts-layer{outline:2px solid transparent;outline-offset:2px}.\\[\\&_\\.recharts-polar-grid_\\[stroke\\=\\'\\#ccc\\'\\]\\]\\:stroke-border .recharts-polar-grid [stroke=\"#ccc\"]{stroke:var(--border)}.\\[\\&_\\.recharts-radial-bar-background-sector\\]\\:fill-muted .recharts-radial-bar-background-sector,.\\[\\&_\\.recharts-rectangle\\.recharts-tooltip-cursor\\]\\:fill-muted .recharts-rectangle.recharts-tooltip-cursor{fill:var(--muted)}.\\[\\&_\\.recharts-reference-line_\\[stroke\\=\\'\\#ccc\\'\\]\\]\\:stroke-border .recharts-reference-line [stroke=\"#ccc\"]{stroke:var(--border)}.\\[\\&_\\.recharts-sector\\[stroke\\=\\'\\#fff\\'\\]\\]\\:stroke-transparent .recharts-sector[stroke=\"#fff\"]{stroke:transparent}.\\[\\&_\\.recharts-sector\\]\\:outline-none .recharts-sector,.\\[\\&_\\.recharts-surface\\]\\:outline-none .recharts-surface{outline:2px solid transparent;outline-offset:2px}.\\[\\&_\\[cmdk-group-heading\\]\\]\\:px-2 [cmdk-group-heading]{padding-left:.5rem;padding-right:.5rem}.\\[\\&_\\[cmdk-group-heading\\]\\]\\:py-1\\.5 [cmdk-group-heading]{padding-top:.375rem;padding-bottom:.375rem}.\\[\\&_\\[cmdk-group-heading\\]\\]\\:text-xs [cmdk-group-heading]{font-size:.75rem;line-height:1rem}.\\[\\&_\\[cmdk-group-heading\\]\\]\\:font-medium [cmdk-group-heading]{font-weight:500}.\\[\\&_\\[cmdk-group-heading\\]\\]\\:text-muted-foreground [cmdk-group-heading]{color:var(--muted-foreground)}.\\[\\&_\\[cmdk-group\\]\\:not\\(\\[hidden\\]\\)_\\~\\[cmdk-group\\]\\]\\:pt-0 [cmdk-group]:not([hidden])~[cmdk-group]{padding-top:0}.\\[\\&_\\[cmdk-group\\]\\]\\:px-2 [cmdk-group]{padding-left:.5rem;padding-right:.5rem}.\\[\\&_\\[cmdk-input-wrapper\\]_svg\\]\\:h-5 [cmdk-input-wrapper] svg{height:1.25rem}.\\[\\&_\\[cmdk-input-wrapper\\]_svg\\]\\:w-5 [cmdk-input-wrapper] svg{width:1.25rem}.\\[\\&_\\[cmdk-input\\]\\]\\:h-12 [cmdk-input]{height:3rem}.\\[\\&_\\[cmdk-item\\]\\]\\:px-2 [cmdk-item]{padding-left:.5rem;padding-right:.5rem}.\\[\\&_\\[cmdk-item\\]\\]\\:py-3 [cmdk-item]{padding-top:.75rem;padding-bottom:.75rem}.\\[\\&_\\[cmdk-item\\]_svg\\]\\:h-5 [cmdk-item] svg{height:1.25rem}.\\[\\&_\\[cmdk-item\\]_svg\\]\\:w-5 [cmdk-item] svg{width:1.25rem}.\\[\\&_p\\]\\:leading-relaxed p{line-height:1.625}.\\[\\&_svg\\]\\:pointer-events-none svg{pointer-events:none}.\\[\\&_svg\\]\\:size-4 svg{width:1rem;height:1rem}.\\[\\&_svg\\]\\:shrink-0 svg{flex-shrink:0}.\\[\\&_tr\\:last-child\\]\\:border-0 tr:last-child{border-width:0px}.\\[\\&_tr\\]\\:border-b tr{border-bottom-width:1px}[data-side=left][data-collapsible=offcanvas] .\\[\\[data-side\\=left\\]\\[data-collapsible\\=offcanvas\\]_\\&\\]\\:-right-2{right:-.5rem}[data-side=left][data-state=collapsed] .\\[\\[data-side\\=left\\]\\[data-state\\=collapsed\\]_\\&\\]\\:cursor-e-resize{cursor:e-resize}[data-side=left] .\\[\\[data-side\\=left\\]_\\&\\]\\:cursor-w-resize{cursor:w-resize}[data-side=right][data-collapsible=offcanvas] .\\[\\[data-side\\=right\\]\\[data-collapsible\\=offcanvas\\]_\\&\\]\\:-left-2{left:-.5rem}[data-side=right][data-state=collapsed] .\\[\\[data-side\\=right\\]\\[data-state\\=collapsed\\]_\\&\\]\\:cursor-w-resize{cursor:w-resize}[data-side=right] .\\[\\[data-side\\=right\\]_\\&\\]\\:cursor-e-resize{cursor:e-resize}\n","size_bytes":70995},"public/assets/index.es-DKlLbEMB.js":{"content":"import{c as Qe,_ as Ha,g as Lo}from\"./index-CNopXcV6.js\";var ht=function(a){return a&&a.Math===Math&&a},_=ht(typeof globalThis==\"object\"&&globalThis)||ht(typeof window==\"object\"&&window)||ht(typeof self==\"object\"&&self)||ht(typeof Qe==\"object\"&&Qe)||ht(typeof Qe==\"object\"&&Qe)||function(){return this}()||Function(\"return this\")(),Et={},D=function(a){try{return!!a()}catch{return!0}},Pl=D,he=!Pl(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),Rl=D,br=!Rl(function(){var a=(function(){}).bind();return typeof a!=\"function\"||a.hasOwnProperty(\"prototype\")}),Nl=br,Ft=Function.prototype.call,Y=Nl?Ft.bind(Ft):function(){return Ft.apply(Ft,arguments)},ko={},Bo={}.propertyIsEnumerable,jo=Object.getOwnPropertyDescriptor,Il=jo&&!Bo.call({1:2},1);ko.f=Il?function(e){var t=jo(this,e);return!!t&&t.enumerable}:Bo;var Oi=function(a,e){return{enumerable:!(a&1),configurable:!(a&2),writable:!(a&4),value:e}},Fo=br,Uo=Function.prototype,Ya=Uo.call,Ml=Fo&&Uo.bind.bind(Ya,Ya),L=Fo?Ml:function(a){return function(){return Ya.apply(a,arguments)}},Go=L,_l=Go({}.toString),Vl=Go(\"\".slice),je=function(a){return Vl(_l(a),8,-1)},Dl=L,Ll=D,kl=je,Zr=Object,Bl=Dl(\"\".split),zo=Ll(function(){return!Zr(\"z\").propertyIsEnumerable(0)})?function(a){return kl(a)===\"String\"?Bl(a,\"\"):Zr(a)}:Zr,xr=function(a){return a==null},jl=xr,Fl=TypeError,ve=function(a){if(jl(a))throw new Fl(\"Can't call method on \"+a);return a},Ul=zo,Gl=ve,$t=function(a){return Ul(Gl(a))},Jr=typeof document==\"object\"&&document.all,B=typeof Jr>\"u\"&&Jr!==void 0?function(a){return typeof a==\"function\"||a===Jr}:function(a){return typeof a==\"function\"},zl=B,ae=function(a){return typeof a==\"object\"?a!==null:zl(a)},ea=_,Hl=B,Yl=function(a){return Hl(a)?a:void 0},Fe=function(a,e){return arguments.length<2?Yl(ea[a]):ea[a]&&ea[a][e]},Xl=L,Tr=Xl({}.isPrototypeOf),Wl=_,yn=Wl.navigator,mn=yn&&yn.userAgent,wt=mn?String(mn):\"\",Ho=_,ta=wt,bn=Ho.process,xn=Ho.Deno,Tn=bn&&bn.versions||xn&&xn.version,On=Tn&&Tn.v8,le,cr;On&&(le=On.split(\".\"),cr=le[0]>0&&le[0]<4?1:+(le[0]+le[1]));!cr&&ta&&(le=ta.match(/Edge\\/(\\d+)/),(!le||le[1]>=74)&&(le=ta.match(/Chrome\\/(\\d+)/),le&&(cr=+le[1])));var Si=cr,Sn=Si,ql=D,Ql=_,Kl=Ql.String,Yo=!!Object.getOwnPropertySymbols&&!ql(function(){var a=Symbol(\"symbol detection\");return!Kl(a)||!(Object(a)instanceof Symbol)||!Symbol.sham&&Sn&&Sn<41}),Zl=Yo,Xo=Zl&&!Symbol.sham&&typeof Symbol.iterator==\"symbol\",Jl=Fe,eh=B,th=Tr,rh=Xo,ah=Object,Wo=rh?function(a){return typeof a==\"symbol\"}:function(a){var e=Jl(\"Symbol\");return eh(e)&&th(e.prototype,ah(a))},ih=String,Or=function(a){try{return ih(a)}catch{return\"Object\"}},nh=B,sh=Or,oh=TypeError,Te=function(a){if(nh(a))return a;throw new oh(sh(a)+\" is not a function\")},uh=Te,lh=xr,st=function(a,e){var t=a[e];return lh(t)?void 0:uh(t)},ra=Y,aa=B,ia=ae,hh=TypeError,vh=function(a,e){var t,r;if(e===\"string\"&&aa(t=a.toString)&&!ia(r=ra(t,a))||aa(t=a.valueOf)&&!ia(r=ra(t,a))||e!==\"string\"&&aa(t=a.toString)&&!ia(r=ra(t,a)))return r;throw new hh(\"Can't convert object to primitive value\")},qo={exports:{}},En=_,fh=Object.defineProperty,Ei=function(a,e){try{fh(En,a,{value:e,configurable:!0,writable:!0})}catch{En[a]=e}return e},ch=_,gh=Ei,$n=\"__core-js_shared__\",wn=qo.exports=ch[$n]||gh($n,{});(wn.versions||(wn.versions=[])).push({version:\"3.45.0\",mode:\"global\",copyright:\"Â© 2014-2025 Denis Pushkarev (zloirock.ru)\",license:\"https://github.com/zloirock/core-js/blob/v3.45.0/LICENSE\",source:\"https://github.com/zloirock/core-js\"});var $i=qo.exports,Cn=$i,wi=function(a,e){return Cn[a]||(Cn[a]=e||{})},dh=ve,ph=Object,Sr=function(a){return ph(dh(a))},yh=L,mh=Sr,bh=yh({}.hasOwnProperty),fe=Object.hasOwn||function(e,t){return bh(mh(e),t)},xh=L,Th=0,Oh=Math.random(),Sh=xh(1.1.toString),Qo=function(a){return\"Symbol(\"+(a===void 0?\"\":a)+\")_\"+Sh(++Th+Oh,36)},Eh=_,$h=wi,An=fe,wh=Qo,Ch=Yo,Ah=Xo,Ke=Eh.Symbol,na=$h(\"wks\"),Ph=Ah?Ke.for||Ke:Ke&&Ke.withoutSetter||wh,z=function(a){return An(na,a)||(na[a]=Ch&&An(Ke,a)?Ke[a]:Ph(\"Symbol.\"+a)),na[a]},Rh=Y,Pn=ae,Rn=Wo,Nh=st,Ih=vh,Mh=z,_h=TypeError,Vh=Mh(\"toPrimitive\"),Dh=function(a,e){if(!Pn(a)||Rn(a))return a;var t=Nh(a,Vh),r;if(t){if(e===void 0&&(e=\"default\"),r=Rh(t,a,e),!Pn(r)||Rn(r))return r;throw new _h(\"Can't convert object to primitive value\")}return e===void 0&&(e=\"number\"),Ih(a,e)},Lh=Dh,kh=Wo,Ko=function(a){var e=Lh(a,\"string\");return kh(e)?e:e+\"\"},Bh=_,Nn=ae,Xa=Bh.document,jh=Nn(Xa)&&Nn(Xa.createElement),Er=function(a){return jh?Xa.createElement(a):{}},Fh=he,Uh=D,Gh=Er,Zo=!Fh&&!Uh(function(){return Object.defineProperty(Gh(\"div\"),\"a\",{get:function(){return 7}}).a!==7}),zh=he,Hh=Y,Yh=ko,Xh=Oi,Wh=$t,qh=Ko,Qh=fe,Kh=Zo,In=Object.getOwnPropertyDescriptor;Et.f=zh?In:function(e,t){if(e=Wh(e),t=qh(t),Kh)try{return In(e,t)}catch{}if(Qh(e,t))return Xh(!Hh(Yh.f,e,t),e[t])};var Oe={},Zh=he,Jh=D,Jo=Zh&&Jh(function(){return Object.defineProperty(function(){},\"prototype\",{value:42,writable:!1}).prototype!==42}),ev=ae,tv=String,rv=TypeError,J=function(a){if(ev(a))return a;throw new rv(tv(a)+\" is not an object\")},av=he,iv=Zo,nv=Jo,Ut=J,Mn=Ko,sv=TypeError,sa=Object.defineProperty,ov=Object.getOwnPropertyDescriptor,oa=\"enumerable\",ua=\"configurable\",la=\"writable\";Oe.f=av?nv?function(e,t,r){if(Ut(e),t=Mn(t),Ut(r),typeof e==\"function\"&&t===\"prototype\"&&\"value\"in r&&la in r&&!r[la]){var i=ov(e,t);i&&i[la]&&(e[t]=r.value,r={configurable:ua in r?r[ua]:i[ua],enumerable:oa in r?r[oa]:i[oa],writable:!1})}return sa(e,t,r)}:sa:function(e,t,r){if(Ut(e),t=Mn(t),Ut(r),iv)try{return sa(e,t,r)}catch{}if(\"get\"in r||\"set\"in r)throw new sv(\"Accessors not supported\");return\"value\"in r&&(e[t]=r.value),e};var uv=he,lv=Oe,hv=Oi,Ct=uv?function(a,e,t){return lv.f(a,e,hv(1,t))}:function(a,e,t){return a[e]=t,a},eu={exports:{}},Wa=he,vv=fe,tu=Function.prototype,fv=Wa&&Object.getOwnPropertyDescriptor,Ci=vv(tu,\"name\"),cv=Ci&&(function(){}).name===\"something\",gv=Ci&&(!Wa||Wa&&fv(tu,\"name\").configurable),$r={EXISTS:Ci,PROPER:cv,CONFIGURABLE:gv},dv=L,pv=B,qa=$i,yv=dv(Function.toString);pv(qa.inspectSource)||(qa.inspectSource=function(a){return yv(a)});var Ai=qa.inspectSource,mv=_,bv=B,_n=mv.WeakMap,xv=bv(_n)&&/native code/.test(String(_n)),Tv=wi,Ov=Qo,Vn=Tv(\"keys\"),Pi=function(a){return Vn[a]||(Vn[a]=Ov(a))},Ri={},Sv=xv,ru=_,Ev=ae,$v=Ct,ha=fe,va=$i,wv=Pi,Cv=Ri,Dn=\"Object already initialized\",Qa=ru.TypeError,Av=ru.WeakMap,gr,Tt,dr,Pv=function(a){return dr(a)?Tt(a):gr(a,{})},Rv=function(a){return function(e){var t;if(!Ev(e)||(t=Tt(e)).type!==a)throw new Qa(\"Incompatible receiver, \"+a+\" required\");return t}};if(Sv||va.state){var de=va.state||(va.state=new Av);de.get=de.get,de.has=de.has,de.set=de.set,gr=function(a,e){if(de.has(a))throw new Qa(Dn);return e.facade=a,de.set(a,e),e},Tt=function(a){return de.get(a)||{}},dr=function(a){return de.has(a)}}else{var Ye=wv(\"state\");Cv[Ye]=!0,gr=function(a,e){if(ha(a,Ye))throw new Qa(Dn);return e.facade=a,$v(a,Ye,e),e},Tt=function(a){return ha(a,Ye)?a[Ye]:{}},dr=function(a){return ha(a,Ye)}}var wr={set:gr,get:Tt,has:dr,enforce:Pv,getterFor:Rv},Ni=L,Nv=D,Iv=B,Gt=fe,Ka=he,Mv=$r.CONFIGURABLE,_v=Ai,au=wr,Vv=au.enforce,Dv=au.get,Ln=String,or=Object.defineProperty,Lv=Ni(\"\".slice),kv=Ni(\"\".replace),Bv=Ni([].join),jv=Ka&&!Nv(function(){return or(function(){},\"length\",{value:8}).length!==8}),Fv=String(String).split(\"String\"),Uv=eu.exports=function(a,e,t){Lv(Ln(e),0,7)===\"Symbol(\"&&(e=\"[\"+kv(Ln(e),/^Symbol\\(([^)]*)\\).*$/,\"$1\")+\"]\"),t&&t.getter&&(e=\"get \"+e),t&&t.setter&&(e=\"set \"+e),(!Gt(a,\"name\")||Mv&&a.name!==e)&&(Ka?or(a,\"name\",{value:e,configurable:!0}):a.name=e),jv&&t&&Gt(t,\"arity\")&&a.length!==t.arity&&or(a,\"length\",{value:t.arity});try{t&&Gt(t,\"constructor\")&&t.constructor?Ka&&or(a,\"prototype\",{writable:!1}):a.prototype&&(a.prototype=void 0)}catch{}var r=Vv(a);return Gt(r,\"source\")||(r.source=Bv(Fv,typeof e==\"string\"?e:\"\")),a};Function.prototype.toString=Uv(function(){return Iv(this)&&Dv(this).source||_v(this)},\"toString\");var iu=eu.exports,Gv=B,zv=Oe,Hv=iu,Yv=Ei,Ue=function(a,e,t,r){r||(r={});var i=r.enumerable,n=r.name!==void 0?r.name:e;if(Gv(t)&&Hv(t,n,r),r.global)i?a[e]=t:Yv(e,t);else{try{r.unsafe?a[e]&&(i=!0):delete a[e]}catch{}i?a[e]=t:zv.f(a,e,{value:t,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return a},nu={},Xv=Math.ceil,Wv=Math.floor,qv=Math.trunc||function(e){var t=+e;return(t>0?Wv:Xv)(t)},Qv=qv,Cr=function(a){var e=+a;return e!==e||e===0?0:Qv(e)},Kv=Cr,Zv=Math.max,Jv=Math.min,ef=function(a,e){var t=Kv(a);return t<0?Zv(t+e,0):Jv(t,e)},tf=Cr,rf=Math.min,ot=function(a){var e=tf(a);return e>0?rf(e,9007199254740991):0},af=ot,Ii=function(a){return af(a.length)},nf=$t,sf=ef,of=Ii,kn=function(a){return function(e,t,r){var i=nf(e),n=of(i);if(n===0)return!a&&-1;var o=sf(r,n),s;if(a&&t!==t){for(;n>o;)if(s=i[o++],s!==s)return!0}else for(;n>o;o++)if((a||o in i)&&i[o]===t)return a||o||0;return!a&&-1}},su={includes:kn(!0),indexOf:kn(!1)},uf=L,fa=fe,lf=$t,hf=su.indexOf,vf=Ri,Bn=uf([].push),ou=function(a,e){var t=lf(a),r=0,i=[],n;for(n in t)!fa(vf,n)&&fa(t,n)&&Bn(i,n);for(;e.length>r;)fa(t,n=e[r++])&&(~hf(i,n)||Bn(i,n));return i},Mi=[\"constructor\",\"hasOwnProperty\",\"isPrototypeOf\",\"propertyIsEnumerable\",\"toLocaleString\",\"toString\",\"valueOf\"],ff=ou,cf=Mi,gf=cf.concat(\"length\",\"prototype\");nu.f=Object.getOwnPropertyNames||function(e){return ff(e,gf)};var uu={};uu.f=Object.getOwnPropertySymbols;var df=Fe,pf=L,yf=nu,mf=uu,bf=J,xf=pf([].concat),Tf=df(\"Reflect\",\"ownKeys\")||function(e){var t=yf.f(bf(e)),r=mf.f;return r?xf(t,r(e)):t},jn=fe,Of=Tf,Sf=Et,Ef=Oe,$f=function(a,e,t){for(var r=Of(e),i=Ef.f,n=Sf.f,o=0;o<r.length;o++){var s=r[o];!jn(a,s)&&!(t&&jn(t,s))&&i(a,s,n(e,s))}},wf=D,Cf=B,Af=/#|\\.prototype\\./,At=function(a,e){var t=Rf[Pf(a)];return t===If?!0:t===Nf?!1:Cf(e)?wf(e):!!e},Pf=At.normalize=function(a){return String(a).replace(Af,\".\").toLowerCase()},Rf=At.data={},Nf=At.NATIVE=\"N\",If=At.POLYFILL=\"P\",lu=At,zt=_,Mf=Et.f,_f=Ct,Vf=Ue,Df=Ei,Lf=$f,kf=lu,ee=function(a,e){var t=a.target,r=a.global,i=a.stat,n,o,s,u,l,h;if(r?o=zt:i?o=zt[t]||Df(t,{}):o=zt[t]&&zt[t].prototype,o)for(s in e){if(l=e[s],a.dontCallGetSet?(h=Mf(o,s),u=h&&h.value):u=o[s],n=kf(r?s:t+(i?\".\":\"#\")+s,a.forced),!n&&u!==void 0){if(typeof l==typeof u)continue;Lf(l,u)}(a.sham||u&&u.sham)&&_f(l,\"sham\",!0),Vf(o,s,l,a)}},vt=_,Bf=wt,jf=je,Ht=function(a){return Bf.slice(0,a.length)===a},hu=function(){return Ht(\"Bun/\")?\"BUN\":Ht(\"Cloudflare-Workers\")?\"CLOUDFLARE\":Ht(\"Deno/\")?\"DENO\":Ht(\"Node.js/\")?\"NODE\":vt.Bun&&typeof Bun.version==\"string\"?\"BUN\":vt.Deno&&typeof Deno.version==\"object\"?\"DENO\":jf(vt.process)===\"process\"?\"NODE\":vt.window&&vt.document?\"BROWSER\":\"REST\"}(),Ff=hu,Ar=Ff===\"NODE\",Uf=_,Gf=Uf,zf=L,Hf=Te,Yf=function(a,e,t){try{return zf(Hf(Object.getOwnPropertyDescriptor(a,e)[t]))}catch{}},Xf=ae,Wf=function(a){return Xf(a)||a===null},qf=Wf,Qf=String,Kf=TypeError,Zf=function(a){if(qf(a))return a;throw new Kf(\"Can't set \"+Qf(a)+\" as a prototype\")},Jf=Yf,ec=ae,tc=ve,rc=Zf,vu=Object.setPrototypeOf||(\"__proto__\"in{}?function(){var a=!1,e={},t;try{t=Jf(Object.prototype,\"__proto__\",\"set\"),t(e,[]),a=e instanceof Array}catch{}return function(i,n){return tc(i),rc(n),ec(i)&&(a?t(i,n):i.__proto__=n),i}}():void 0),ac=Oe.f,ic=fe,nc=z,Fn=nc(\"toStringTag\"),Pr=function(a,e,t){a&&!t&&(a=a.prototype),a&&!ic(a,Fn)&&ac(a,Fn,{configurable:!0,value:e})},Un=iu,sc=Oe,oc=function(a,e,t){return t.get&&Un(t.get,e,{getter:!0}),t.set&&Un(t.set,e,{setter:!0}),sc.f(a,e,t)},uc=Fe,lc=oc,hc=z,vc=he,Gn=hc(\"species\"),fc=function(a){var e=uc(a);vc&&e&&!e[Gn]&&lc(e,Gn,{configurable:!0,get:function(){return this}})},cc=Tr,gc=TypeError,dc=function(a,e){if(cc(e,a))return a;throw new gc(\"Incorrect invocation\")},pc=z,yc=pc(\"toStringTag\"),fu={};fu[yc]=\"z\";var mc=String(fu)===\"[object z]\",bc=mc,xc=B,ur=je,Tc=z,Oc=Tc(\"toStringTag\"),Sc=Object,Ec=ur(function(){return arguments}())===\"Arguments\",$c=function(a,e){try{return a[e]}catch{}},_i=bc?ur:function(a){var e,t,r;return a===void 0?\"Undefined\":a===null?\"Null\":typeof(t=$c(e=Sc(a),Oc))==\"string\"?t:Ec?ur(e):(r=ur(e))===\"Object\"&&xc(e.callee)?\"Arguments\":r},wc=L,Cc=D,cu=B,Ac=_i,Pc=Fe,Rc=Ai,gu=function(){},du=Pc(\"Reflect\",\"construct\"),Vi=/^\\s*(?:class|function)\\b/,Nc=wc(Vi.exec),Ic=!Vi.test(gu),ft=function(e){if(!cu(e))return!1;try{return du(gu,[],e),!0}catch{return!1}},pu=function(e){if(!cu(e))return!1;switch(Ac(e)){case\"AsyncFunction\":case\"GeneratorFunction\":case\"AsyncGeneratorFunction\":return!1}try{return Ic||!!Nc(Vi,Rc(e))}catch{return!0}};pu.sham=!0;var Mc=!du||Cc(function(){var a;return ft(ft.call)||!ft(Object)||!ft(function(){a=!0})||a})?pu:ft,_c=Mc,Vc=Or,Dc=TypeError,Lc=function(a){if(_c(a))return a;throw new Dc(Vc(a)+\" is not a constructor\")},zn=J,kc=Lc,Bc=xr,jc=z,Fc=jc(\"species\"),yu=function(a,e){var t=zn(a).constructor,r;return t===void 0||Bc(r=zn(t)[Fc])?e:kc(r)},Uc=br,mu=Function.prototype,Hn=mu.apply,Yn=mu.call,bu=typeof Reflect==\"object\"&&Reflect.apply||(Uc?Yn.bind(Hn):function(){return Yn.apply(Hn,arguments)}),Gc=je,zc=L,Rr=function(a){if(Gc(a)===\"Function\")return zc(a)},Xn=Rr,Hc=Te,Yc=br,Xc=Xn(Xn.bind),Di=function(a,e){return Hc(a),e===void 0?a:Yc?Xc(a,e):function(){return a.apply(e,arguments)}},Wc=Fe,xu=Wc(\"document\",\"documentElement\"),qc=L,Qc=qc([].slice),Kc=TypeError,Zc=function(a,e){if(a<e)throw new Kc(\"Not enough arguments\");return a},Jc=wt,Tu=/(?:ipad|iphone|ipod).*applewebkit/i.test(Jc),ie=_,eg=bu,tg=Di,Wn=B,rg=fe,Ou=D,qn=xu,ag=Qc,Qn=Er,ig=Zc,ng=Tu,sg=Ar,Za=ie.setImmediate,Ja=ie.clearImmediate,og=ie.process,ca=ie.Dispatch,ug=ie.Function,Kn=ie.MessageChannel,lg=ie.String,ga=0,bt={},Zn=\"onreadystatechange\",Ot,Ie,da,pa;Ou(function(){Ot=ie.location});var Li=function(a){if(rg(bt,a)){var e=bt[a];delete bt[a],e()}},ya=function(a){return function(){Li(a)}},Jn=function(a){Li(a.data)},es=function(a){ie.postMessage(lg(a),Ot.protocol+\"//\"+Ot.host)};(!Za||!Ja)&&(Za=function(e){ig(arguments.length,1);var t=Wn(e)?e:ug(e),r=ag(arguments,1);return bt[++ga]=function(){eg(t,void 0,r)},Ie(ga),ga},Ja=function(e){delete bt[e]},sg?Ie=function(a){og.nextTick(ya(a))}:ca&&ca.now?Ie=function(a){ca.now(ya(a))}:Kn&&!ng?(da=new Kn,pa=da.port2,da.port1.onmessage=Jn,Ie=tg(pa.postMessage,pa)):ie.addEventListener&&Wn(ie.postMessage)&&!ie.importScripts&&Ot&&Ot.protocol!==\"file:\"&&!Ou(es)?(Ie=es,ie.addEventListener(\"message\",Jn,!1)):Zn in Qn(\"script\")?Ie=function(a){qn.appendChild(Qn(\"script\"))[Zn]=function(){qn.removeChild(this),Li(a)}}:Ie=function(a){setTimeout(ya(a),0)});var Su={set:Za,clear:Ja},ts=_,hg=he,vg=Object.getOwnPropertyDescriptor,fg=function(a){if(!hg)return ts[a];var e=vg(ts,a);return e&&e.value},Eu=function(){this.head=null,this.tail=null};Eu.prototype={add:function(a){var e={item:a,next:null},t=this.tail;t?t.next=e:this.head=e,this.tail=e},get:function(){var a=this.head;if(a){var e=this.head=a.next;return e===null&&(this.tail=null),a.item}}};var $u=Eu,cg=wt,gg=/ipad|iphone|ipod/i.test(cg)&&typeof Pebble<\"u\",dg=wt,pg=/web0s(?!.*chrome)/i.test(dg),at=_,yg=fg,rs=Di,ma=Su.set,mg=$u,bg=Tu,xg=gg,Tg=pg,ba=Ar,as=at.MutationObserver||at.WebKitMutationObserver,is=at.document,ns=at.process,Yt=at.Promise,ei=yg(\"queueMicrotask\"),Xe,xa,Ta,Xt,ss;if(!ei){var Wt=new mg,qt=function(){var a,e;for(ba&&(a=ns.domain)&&a.exit();e=Wt.get();)try{e()}catch(t){throw Wt.head&&Xe(),t}a&&a.enter()};!bg&&!ba&&!Tg&&as&&is?(xa=!0,Ta=is.createTextNode(\"\"),new as(qt).observe(Ta,{characterData:!0}),Xe=function(){Ta.data=xa=!xa}):!xg&&Yt&&Yt.resolve?(Xt=Yt.resolve(void 0),Xt.constructor=Yt,ss=rs(Xt.then,Xt),Xe=function(){ss(qt)}):ba?Xe=function(){ns.nextTick(qt)}:(ma=rs(ma,at),Xe=function(){ma(qt)}),ei=function(a){Wt.head||Xe(),Wt.add(a)}}var Og=ei,Sg=function(a,e){try{arguments.length===1?console.error(a):console.error(a,e)}catch{}},ki=function(a){try{return{error:!1,value:a()}}catch(e){return{error:!0,value:e}}},Eg=_,Nr=Eg.Promise,$g=_,xt=Nr,wg=B,Cg=lu,Ag=Ai,Pg=z,os=hu,Oa=Si;xt&&xt.prototype;var Rg=Pg(\"species\"),ti=!1,wu=wg($g.PromiseRejectionEvent),Ng=Cg(\"Promise\",function(){var a=Ag(xt),e=a!==String(xt);if(!e&&Oa===66)return!0;if(!Oa||Oa<51||!/native code/.test(a)){var t=new xt(function(n){n(1)}),r=function(n){n(function(){},function(){})},i=t.constructor={};if(i[Rg]=r,ti=t.then(function(){})instanceof r,!ti)return!0}return!e&&(os===\"BROWSER\"||os===\"DENO\")&&!wu}),Pt={CONSTRUCTOR:Ng,REJECTION_EVENT:wu,SUBCLASSING:ti},ut={},us=Te,Ig=TypeError,Mg=function(a){var e,t;this.promise=new a(function(r,i){if(e!==void 0||t!==void 0)throw new Ig(\"Bad Promise constructor\");e=r,t=i}),this.resolve=us(e),this.reject=us(t)};ut.f=function(a){return new Mg(a)};var _g=ee,pr=Ar,we=_,Vg=Gf,it=Y,ls=Ue,hs=vu,Dg=Pr,Lg=fc,kg=Te,lr=B,Bg=ae,jg=dc,Fg=yu,Cu=Su.set,Bi=Og,Ug=Sg,Gg=ki,zg=$u,Au=wr,yr=Nr,ji=Pt,Pu=ut,Ir=\"Promise\",Ru=ji.CONSTRUCTOR,Hg=ji.REJECTION_EVENT,Yg=ji.SUBCLASSING,Sa=Au.getterFor(Ir),Xg=Au.set,qe=yr&&yr.prototype,Le=yr,Qt=qe,Nu=we.TypeError,ri=we.document,Fi=we.process,ai=Pu.f,Wg=ai,qg=!!(ri&&ri.createEvent&&we.dispatchEvent),Iu=\"unhandledrejection\",Qg=\"rejectionhandled\",vs=0,Mu=1,Kg=2,Ui=1,_u=2,Kt,fs,Vu,cs,Du=function(a){var e;return Bg(a)&&lr(e=a.then)?e:!1},Lu=function(a,e){var t=e.value,r=e.state===Mu,i=r?a.ok:a.fail,n=a.resolve,o=a.reject,s=a.domain,u,l,h;try{i?(r||(e.rejection===_u&&Jg(e),e.rejection=Ui),i===!0?u=t:(s&&s.enter(),u=i(t),s&&(s.exit(),h=!0)),u===a.promise?o(new Nu(\"Promise-chain cycle\")):(l=Du(u))?it(l,u,n,o):n(u)):o(t)}catch(f){s&&!h&&s.exit(),o(f)}},ku=function(a,e){a.notified||(a.notified=!0,Bi(function(){for(var t=a.reactions,r;r=t.get();)Lu(r,a);a.notified=!1,e&&!a.rejection&&Zg(a)}))},Bu=function(a,e,t){var r,i;qg?(r=ri.createEvent(\"Event\"),r.promise=e,r.reason=t,r.initEvent(a,!1,!0),we.dispatchEvent(r)):r={promise:e,reason:t},!Hg&&(i=we[\"on\"+a])?i(r):a===Iu&&Ug(\"Unhandled promise rejection\",t)},Zg=function(a){it(Cu,we,function(){var e=a.facade,t=a.value,r=gs(a),i;if(r&&(i=Gg(function(){pr?Fi.emit(\"unhandledRejection\",t,e):Bu(Iu,e,t)}),a.rejection=pr||gs(a)?_u:Ui,i.error))throw i.value})},gs=function(a){return a.rejection!==Ui&&!a.parent},Jg=function(a){it(Cu,we,function(){var e=a.facade;pr?Fi.emit(\"rejectionHandled\",e):Bu(Qg,e,a.value)})},Ze=function(a,e,t){return function(r){a(e,r,t)}},et=function(a,e,t){a.done||(a.done=!0,t&&(a=t),a.value=e,a.state=Kg,ku(a,!0))},ii=function(a,e,t){if(!a.done){a.done=!0,t&&(a=t);try{if(a.facade===e)throw new Nu(\"Promise can't be resolved itself\");var r=Du(e);r?Bi(function(){var i={done:!1};try{it(r,e,Ze(ii,i,a),Ze(et,i,a))}catch(n){et(i,n,a)}}):(a.value=e,a.state=Mu,ku(a,!1))}catch(i){et({done:!1},i,a)}}};if(Ru&&(Le=function(e){jg(this,Qt),kg(e),it(Kt,this);var t=Sa(this);try{e(Ze(ii,t),Ze(et,t))}catch(r){et(t,r)}},Qt=Le.prototype,Kt=function(e){Xg(this,{type:Ir,done:!1,notified:!1,parent:!1,reactions:new zg,rejection:!1,state:vs,value:null})},Kt.prototype=ls(Qt,\"then\",function(e,t){var r=Sa(this),i=ai(Fg(this,Le));return r.parent=!0,i.ok=lr(e)?e:!0,i.fail=lr(t)&&t,i.domain=pr?Fi.domain:void 0,r.state===vs?r.reactions.add(i):Bi(function(){Lu(i,r)}),i.promise}),fs=function(){var a=new Kt,e=Sa(a);this.promise=a,this.resolve=Ze(ii,e),this.reject=Ze(et,e)},Pu.f=ai=function(a){return a===Le||a===Vu?new fs(a):Wg(a)},lr(yr)&&qe!==Object.prototype)){cs=qe.then,Yg||ls(qe,\"then\",function(e,t){var r=this;return new Le(function(i,n){it(cs,r,i,n)}).then(e,t)},{unsafe:!0});try{delete qe.constructor}catch{}hs&&hs(qe,Qt)}_g({global:!0,constructor:!0,wrap:!0,forced:Ru},{Promise:Le});Vu=Vg.Promise;Dg(Le,Ir,!1);Lg(Ir);var Rt={},ed=z,td=Rt,rd=ed(\"iterator\"),ad=Array.prototype,id=function(a){return a!==void 0&&(td.Array===a||ad[rd]===a)},nd=_i,ds=st,sd=xr,od=Rt,ud=z,ld=ud(\"iterator\"),ju=function(a){if(!sd(a))return ds(a,ld)||ds(a,\"@@iterator\")||od[nd(a)]},hd=Y,vd=Te,fd=J,cd=Or,gd=ju,dd=TypeError,pd=function(a,e){var t=arguments.length<2?gd(a):e;if(vd(t))return fd(hd(t,a));throw new dd(cd(a)+\" is not iterable\")},yd=Y,ps=J,md=st,bd=function(a,e,t){var r,i;ps(a);try{if(r=md(a,\"return\"),!r){if(e===\"throw\")throw t;return t}r=yd(r,a)}catch(n){i=!0,r=n}if(e===\"throw\")throw t;if(i)throw r;return ps(r),t},xd=Di,Td=Y,Od=J,Sd=Or,Ed=id,$d=Ii,ys=Tr,wd=pd,Cd=ju,ms=bd,Ad=TypeError,hr=function(a,e){this.stopped=a,this.result=e},bs=hr.prototype,Fu=function(a,e,t){var r=t&&t.that,i=!!(t&&t.AS_ENTRIES),n=!!(t&&t.IS_RECORD),o=!!(t&&t.IS_ITERATOR),s=!!(t&&t.INTERRUPTED),u=xd(e,r),l,h,f,c,v,g,d,p=function(x){return l&&ms(l,\"normal\"),new hr(!0,x)},y=function(x){return i?(Od(x),s?u(x[0],x[1],p):u(x[0],x[1])):s?u(x,p):u(x)};if(n)l=a.iterator;else if(o)l=a;else{if(h=Cd(a),!h)throw new Ad(Sd(a)+\" is not iterable\");if(Ed(h)){for(f=0,c=$d(a);c>f;f++)if(v=y(a[f]),v&&ys(bs,v))return v;return new hr(!1)}l=wd(a,h)}for(g=n?a.next:l.next;!(d=Td(g,l)).done;){try{v=y(d.value)}catch(x){ms(l,\"throw\",x)}if(typeof v==\"object\"&&v&&ys(bs,v))return v}return new hr(!1)},Pd=z,Uu=Pd(\"iterator\"),Gu=!1;try{var Rd=0,xs={next:function(){return{done:!!Rd++}},return:function(){Gu=!0}};xs[Uu]=function(){return this},Array.from(xs,function(){throw 2})}catch{}var Nd=function(a,e){try{if(!e&&!Gu)return!1}catch{return!1}var t=!1;try{var r={};r[Uu]=function(){return{next:function(){return{done:t=!0}}}},a(r)}catch{}return t},Id=Nr,Md=Nd,_d=Pt.CONSTRUCTOR,zu=_d||!Md(function(a){Id.all(a).then(void 0,function(){})}),Vd=ee,Dd=Y,Ld=Te,kd=ut,Bd=ki,jd=Fu,Fd=zu;Vd({target:\"Promise\",stat:!0,forced:Fd},{all:function(e){var t=this,r=kd.f(t),i=r.resolve,n=r.reject,o=Bd(function(){var s=Ld(t.resolve),u=[],l=0,h=1;jd(e,function(f){var c=l++,v=!1;h++,Dd(s,t,f).then(function(g){v||(v=!0,u[c]=g,--h||i(u))},n)}),--h||i(u)});return o.error&&n(o.value),r.promise}});var Ud=ee,Gd=Pt.CONSTRUCTOR,ni=Nr,zd=Fe,Hd=B,Yd=Ue,Ts=ni&&ni.prototype;Ud({target:\"Promise\",proto:!0,forced:Gd,real:!0},{catch:function(a){return this.then(void 0,a)}});if(Hd(ni)){var Os=zd(\"Promise\").prototype.catch;Ts.catch!==Os&&Yd(Ts,\"catch\",Os,{unsafe:!0})}var Xd=ee,Wd=Y,qd=Te,Qd=ut,Kd=ki,Zd=Fu,Jd=zu;Xd({target:\"Promise\",stat:!0,forced:Jd},{race:function(e){var t=this,r=Qd.f(t),i=r.reject,n=Kd(function(){var o=qd(t.resolve);Zd(e,function(s){Wd(o,t,s).then(r.resolve,i)})});return n.error&&i(n.value),r.promise}});var ep=ee,tp=ut,rp=Pt.CONSTRUCTOR;ep({target:\"Promise\",stat:!0,forced:rp},{reject:function(e){var t=tp.f(this),r=t.reject;return r(e),t.promise}});var ap=J,ip=ae,np=ut,sp=function(a,e){if(ap(a),ip(e)&&e.constructor===a)return e;var t=np.f(a),r=t.resolve;return r(e),t.promise},op=ee,up=Fe,lp=Pt.CONSTRUCTOR,hp=sp;up(\"Promise\");op({target:\"Promise\",stat:!0,forced:lp},{resolve:function(e){return hp(this,e)}});function Ss(a,e,t,r,i,n,o){try{var s=a[n](o),u=s.value}catch(l){return void t(l)}s.done?e(u):Promise.resolve(u).then(r,i)}function xe(a){return function(){var e=this,t=arguments;return new Promise(function(r,i){var n=a.apply(e,t);function o(u){Ss(n,r,i,o,s,\"next\",u)}function s(u){Ss(n,r,i,o,s,\"throw\",u)}o(void 0)})}}var vp=_i,fp=String,pe=function(a){if(vp(a)===\"Symbol\")throw new TypeError(\"Cannot convert a Symbol value to a string\");return fp(a)},cp=J,Hu=function(){var a=cp(this),e=\"\";return a.hasIndices&&(e+=\"d\"),a.global&&(e+=\"g\"),a.ignoreCase&&(e+=\"i\"),a.multiline&&(e+=\"m\"),a.dotAll&&(e+=\"s\"),a.unicode&&(e+=\"u\"),a.unicodeSets&&(e+=\"v\"),a.sticky&&(e+=\"y\"),e},Gi=D,gp=_,zi=gp.RegExp,Hi=Gi(function(){var a=zi(\"a\",\"y\");return a.lastIndex=2,a.exec(\"abcd\")!==null}),dp=Hi||Gi(function(){return!zi(\"a\",\"y\").sticky}),pp=Hi||Gi(function(){var a=zi(\"^r\",\"gy\");return a.lastIndex=2,a.exec(\"str\")!==null}),Yu={BROKEN_CARET:pp,MISSED_STICKY:dp,UNSUPPORTED_Y:Hi},Xu={},yp=ou,mp=Mi,bp=Object.keys||function(e){return yp(e,mp)},xp=he,Tp=Jo,Op=Oe,Sp=J,Ep=$t,$p=bp;Xu.f=xp&&!Tp?Object.defineProperties:function(e,t){Sp(e);for(var r=Ep(t),i=$p(t),n=i.length,o=0,s;n>o;)Op.f(e,s=i[o++],r[s]);return e};var wp=J,Cp=Xu,Es=Mi,Ap=Ri,Pp=xu,Rp=Er,Np=Pi,$s=\">\",ws=\"<\",si=\"prototype\",oi=\"script\",Wu=Np(\"IE_PROTO\"),Ea=function(){},qu=function(a){return ws+oi+$s+a+ws+\"/\"+oi+$s},Cs=function(a){a.write(qu(\"\")),a.close();var e=a.parentWindow.Object;return a=null,e},Ip=function(){var a=Rp(\"iframe\"),e=\"java\"+oi+\":\",t;return a.style.display=\"none\",Pp.appendChild(a),a.src=String(e),t=a.contentWindow.document,t.open(),t.write(qu(\"document.F=Object\")),t.close(),t.F},Zt,vr=function(){try{Zt=new ActiveXObject(\"htmlfile\")}catch{}vr=typeof document<\"u\"?document.domain&&Zt?Cs(Zt):Ip():Cs(Zt);for(var a=Es.length;a--;)delete vr[si][Es[a]];return vr()};Ap[Wu]=!0;var Yi=Object.create||function(e,t){var r;return e!==null?(Ea[si]=wp(e),r=new Ea,Ea[si]=null,r[Wu]=e):r=vr(),t===void 0?r:Cp.f(r,t)},Mp=D,_p=_,Vp=_p.RegExp,Dp=Mp(function(){var a=Vp(\".\",\"s\");return!(a.dotAll&&a.test(`\n`)&&a.flags===\"s\")}),Lp=D,kp=_,Bp=kp.RegExp,jp=Lp(function(){var a=Bp(\"(?<a>b)\",\"g\");return a.exec(\"b\").groups.a!==\"b\"||\"b\".replace(a,\"$<a>c\")!==\"bc\"}),Je=Y,Mr=L,Fp=pe,Up=Hu,Gp=Yu,zp=wi,Hp=Yi,Yp=wr.get,Xp=Dp,Wp=jp,qp=zp(\"native-string-replace\",String.prototype.replace),mr=RegExp.prototype.exec,ui=mr,Qp=Mr(\"\".charAt),Kp=Mr(\"\".indexOf),Zp=Mr(\"\".replace),$a=Mr(\"\".slice),li=function(){var a=/a/,e=/b*/g;return Je(mr,a,\"a\"),Je(mr,e,\"a\"),a.lastIndex!==0||e.lastIndex!==0}(),Qu=Gp.BROKEN_CARET,hi=/()??/.exec(\"\")[1]!==void 0,Jp=li||hi||Qu||Xp||Wp;Jp&&(ui=function(e){var t=this,r=Yp(t),i=Fp(e),n=r.raw,o,s,u,l,h,f,c;if(n)return n.lastIndex=t.lastIndex,o=Je(ui,n,i),t.lastIndex=n.lastIndex,o;var v=r.groups,g=Qu&&t.sticky,d=Je(Up,t),p=t.source,y=0,x=i;if(g&&(d=Zp(d,\"y\",\"\"),Kp(d,\"g\")===-1&&(d+=\"g\"),x=$a(i,t.lastIndex),t.lastIndex>0&&(!t.multiline||t.multiline&&Qp(i,t.lastIndex-1)!==`\n`)&&(p=\"(?: \"+p+\")\",x=\" \"+x,y++),s=new RegExp(\"^(?:\"+p+\")\",d)),hi&&(s=new RegExp(\"^\"+p+\"$(?!\\\\s)\",d)),li&&(u=t.lastIndex),l=Je(mr,g?s:t,x),g?l?(l.input=$a(l.input,y),l[0]=$a(l[0],y),l.index=t.lastIndex,t.lastIndex+=l[0].length):t.lastIndex=0:li&&l&&(t.lastIndex=t.global?l.index+l[0].length:u),hi&&l&&l.length>1&&Je(qp,l[0],s,function(){for(h=1;h<arguments.length-2;h++)arguments[h]===void 0&&(l[h]=void 0)}),l&&v)for(l.groups=f=Hp(null),h=0;h<v.length;h++)c=v[h],f[c[0]]=l[c[1]];return l});var Xi=ui,ey=ee,As=Xi;ey({target:\"RegExp\",proto:!0,forced:/./.exec!==As},{exec:As});var Ps=Y,Rs=Ue,ty=Xi,Ns=D,Ku=z,ry=Ct,ay=Ku(\"species\"),wa=RegExp.prototype,Wi=function(a,e,t,r){var i=Ku(a),n=!Ns(function(){var l={};return l[i]=function(){return 7},\"\"[a](l)!==7}),o=n&&!Ns(function(){var l=!1,h=/a/;return a===\"split\"&&(h={},h.constructor={},h.constructor[ay]=function(){return h},h.flags=\"\",h[i]=/./[i]),h.exec=function(){return l=!0,null},h[i](\"\"),!l});if(!n||!o||t){var s=/./[i],u=e(i,\"\"[a],function(l,h,f,c,v){var g=h.exec;return g===ty||g===wa.exec?n&&!v?{done:!0,value:Ps(s,h,f,c)}:{done:!0,value:Ps(l,f,h,c)}:{done:!1}});Rs(String.prototype,a,u[0]),Rs(wa,i,u[1])}r&&ry(wa[i],\"sham\",!0)},qi=L,iy=Cr,ny=pe,sy=ve,oy=qi(\"\".charAt),Is=qi(\"\".charCodeAt),uy=qi(\"\".slice),Ms=function(a){return function(e,t){var r=ny(sy(e)),i=iy(t),n=r.length,o,s;return i<0||i>=n?a?\"\":void 0:(o=Is(r,i),o<55296||o>56319||i+1===n||(s=Is(r,i+1))<56320||s>57343?a?oy(r,i):o:a?uy(r,i,i+2):(o-55296<<10)+(s-56320)+65536)}},ly={codeAt:Ms(!1),charAt:Ms(!0)},hy=ly.charAt,Qi=function(a,e,t){return e+(t?hy(a,e).length:1)},vy=_,fy=D,_s=vy.RegExp,cy=!fy(function(){var a=!0;try{_s(\".\",\"d\")}catch{a=!1}var e={},t=\"\",r=a?\"dgimsy\":\"gimsy\",i=function(u,l){Object.defineProperty(e,u,{get:function(){return t+=l,!0}})},n={dotAll:\"s\",global:\"g\",ignoreCase:\"i\",multiline:\"m\",sticky:\"y\"};a&&(n.hasIndices=\"d\");for(var o in n)i(o,n[o]);var s=Object.getOwnPropertyDescriptor(_s.prototype,\"flags\").get.call(e);return s!==r||t!==r}),gy={correct:cy},dy=Y,py=fe,yy=Tr,Vs=gy,my=Hu,by=RegExp.prototype,Ki=Vs.correct?function(a){return a.flags}:function(a){return!Vs.correct&&yy(by,a)&&!py(a,\"flags\")?dy(my,a):a.flags},Ds=Y,xy=J,Ty=B,Oy=je,Sy=Xi,Ey=TypeError,Zi=function(a,e){var t=a.exec;if(Ty(t)){var r=Ds(t,a,e);return r!==null&&xy(r),r}if(Oy(a)===\"RegExp\")return Ds(Sy,a,e);throw new Ey(\"RegExp#exec called on incompatible receiver\")},$y=Y,wy=L,Cy=Wi,Ay=J,Py=ae,Ry=ot,Jt=pe,Ny=ve,Iy=st,My=Qi,_y=Ki,Ls=Zi,ks=wy(\"\".indexOf);Cy(\"match\",function(a,e,t){return[function(i){var n=Ny(this),o=Py(i)?Iy(i,a):void 0;return o?$y(o,i,n):new RegExp(i)[a](Jt(n))},function(r){var i=Ay(this),n=Jt(r),o=t(e,i,n);if(o.done)return o.value;var s=Jt(_y(i));if(ks(s,\"g\")===-1)return Ls(i,n);var u=ks(s,\"u\")!==-1;i.lastIndex=0;for(var l=[],h=0,f;(f=Ls(i,n))!==null;){var c=Jt(f[0]);l[h]=c,c===\"\"&&(i.lastIndex=My(n,Ry(i.lastIndex),u)),h++}return h===0?null:l}]});var Ji=L,Vy=Sr,Dy=Math.floor,Ca=Ji(\"\".charAt),Ly=Ji(\"\".replace),Aa=Ji(\"\".slice),ky=/\\$([$&'`]|\\d{1,2}|<[^>]*>)/g,By=/\\$([$&'`]|\\d{1,2})/g,jy=function(a,e,t,r,i,n){var o=t+a.length,s=r.length,u=By;return i!==void 0&&(i=Vy(i),u=ky),Ly(n,u,function(l,h){var f;switch(Ca(h,0)){case\"$\":return\"$\";case\"&\":return a;case\"`\":return Aa(e,0,t);case\"'\":return Aa(e,o);case\"<\":f=i[Aa(h,1,-1)];break;default:var c=+h;if(c===0)return l;if(c>s){var v=Dy(c/10);return v===0?l:v<=s?r[v-1]===void 0?Ca(h,1):r[v-1]+Ca(h,1):l}f=r[c-1]}return f===void 0?\"\":f})},Fy=bu,Bs=Y,_r=L,Uy=Wi,Gy=D,zy=J,Hy=B,Yy=ae,Xy=Cr,Wy=ot,Me=pe,qy=ve,Qy=Qi,Ky=st,Zy=jy,Jy=Ki,em=Zi,tm=z,vi=tm(\"replace\"),rm=Math.max,am=Math.min,im=_r([].concat),Pa=_r([].push),er=_r(\"\".indexOf),js=_r(\"\".slice),nm=function(a){return a===void 0?a:String(a)},sm=function(){return\"a\".replace(/./,\"$0\")===\"$0\"}(),Fs=function(){return/./[vi]?/./[vi](\"a\",\"$0\")===\"\":!1}(),om=!Gy(function(){var a=/./;return a.exec=function(){var e=[];return e.groups={a:\"7\"},e},\"\".replace(a,\"$<a>\")!==\"7\"});Uy(\"replace\",function(a,e,t){var r=Fs?\"$\":\"$0\";return[function(n,o){var s=qy(this),u=Yy(n)?Ky(n,vi):void 0;return u?Bs(u,n,s,o):Bs(e,Me(s),n,o)},function(i,n){var o=zy(this),s=Me(i);if(typeof n==\"string\"&&er(n,r)===-1&&er(n,\"$<\")===-1){var u=t(e,o,s,n);if(u.done)return u.value}var l=Hy(n);l||(n=Me(n));var h=Me(Jy(o)),f=er(h,\"g\")!==-1,c;f&&(c=er(h,\"u\")!==-1,o.lastIndex=0);for(var v=[],g;g=em(o,s),!(g===null||(Pa(v,g),!f));){var d=Me(g[0]);d===\"\"&&(o.lastIndex=Qy(s,Wy(o.lastIndex),c))}for(var p=\"\",y=0,x=0;x<v.length;x++){g=v[x];for(var b=Me(g[0]),T=rm(am(Xy(g.index),s.length),0),$=[],E,O=1;O<g.length;O++)Pa($,nm(g[O]));var C=g.groups;if(l){var P=im([b],$,T,s);C!==void 0&&Pa(P,C),E=Me(Fy(n,void 0,P))}else E=Zy(b,s,T,$,C,n);T>=y&&(p+=js(s,y,T)+E,y=T+b.length)}return p+js(s,y)}]},!om||!sm||Fs);var um=ae,lm=je,hm=z,vm=hm(\"match\"),fm=function(a){var e;return um(a)&&((e=a[vm])!==void 0?!!e:lm(a)===\"RegExp\")},cm=fm,gm=TypeError,en=function(a){if(cm(a))throw new gm(\"The method doesn't accept regular expressions\");return a},dm=z,pm=dm(\"match\"),tn=function(a){var e=/./;try{\"/./\"[a](e)}catch{try{return e[pm]=!1,\"/./\"[a](e)}catch{}}return!1},ym=ee,mm=Rr,bm=Et.f,xm=ot,Us=pe,Tm=en,Om=ve,Sm=tn,Em=mm(\"\".slice),$m=Math.min,Zu=Sm(\"startsWith\"),wm=!Zu&&!!function(){var a=bm(String.prototype,\"startsWith\");return a&&!a.writable}();ym({target:\"String\",proto:!0,forced:!wm&&!Zu},{startsWith:function(e){var t=Us(Om(this));Tm(e);var r=xm($m(arguments.length>1?arguments[1]:void 0,t.length)),i=Us(e);return Em(t,r,r+i.length)===i}});var Cm=z,Am=Yi,Pm=Oe.f,fi=Cm(\"unscopables\"),ci=Array.prototype;ci[fi]===void 0&&Pm(ci,fi,{configurable:!0,value:Am(null)});var Rm=function(a){ci[fi][a]=!0},Nm=D,Im=!Nm(function(){function a(){}return a.prototype.constructor=null,Object.getPrototypeOf(new a)!==a.prototype}),Mm=fe,_m=B,Vm=Sr,Dm=Pi,Lm=Im,Gs=Dm(\"IE_PROTO\"),gi=Object,km=gi.prototype,Ju=Lm?gi.getPrototypeOf:function(a){var e=Vm(a);if(Mm(e,Gs))return e[Gs];var t=e.constructor;return _m(t)&&e instanceof t?t.prototype:e instanceof gi?km:null},Bm=D,jm=B,Fm=ae,zs=Ju,Um=Ue,Gm=z,di=Gm(\"iterator\"),el=!1,ke,Ra,Na;[].keys&&(Na=[].keys(),\"next\"in Na?(Ra=zs(zs(Na)),Ra!==Object.prototype&&(ke=Ra)):el=!0);var zm=!Fm(ke)||Bm(function(){var a={};return ke[di].call(a)!==a});zm&&(ke={});jm(ke[di])||Um(ke,di,function(){return this});var tl={IteratorPrototype:ke,BUGGY_SAFARI_ITERATORS:el},Hm=tl.IteratorPrototype,Ym=Yi,Xm=Oi,Wm=Pr,qm=Rt,Qm=function(){return this},Km=function(a,e,t,r){var i=e+\" Iterator\";return a.prototype=Ym(Hm,{next:Xm(+!r,t)}),Wm(a,i,!1),qm[i]=Qm,a},Zm=ee,Jm=Y,rl=$r,e0=B,t0=Km,Hs=Ju,Ys=vu,r0=Pr,a0=Ct,Ia=Ue,i0=z,n0=Rt,al=tl,s0=rl.PROPER,o0=rl.CONFIGURABLE,Xs=al.IteratorPrototype,tr=al.BUGGY_SAFARI_ITERATORS,ct=i0(\"iterator\"),Ws=\"keys\",gt=\"values\",qs=\"entries\",u0=function(){return this},l0=function(a,e,t,r,i,n,o){t0(t,e,r);var s=function(y){if(y===i&&c)return c;if(!tr&&y&&y in h)return h[y];switch(y){case Ws:return function(){return new t(this,y)};case gt:return function(){return new t(this,y)};case qs:return function(){return new t(this,y)}}return function(){return new t(this)}},u=e+\" Iterator\",l=!1,h=a.prototype,f=h[ct]||h[\"@@iterator\"]||i&&h[i],c=!tr&&f||s(i),v=e===\"Array\"&&h.entries||f,g,d,p;if(v&&(g=Hs(v.call(new a)),g!==Object.prototype&&g.next&&(Hs(g)!==Xs&&(Ys?Ys(g,Xs):e0(g[ct])||Ia(g,ct,u0)),r0(g,u,!0))),s0&&i===gt&&f&&f.name!==gt&&(o0?a0(h,\"name\",gt):(l=!0,c=function(){return Jm(f,this)})),i)if(d={values:s(gt),keys:n?c:s(Ws),entries:s(qs)},o)for(p in d)(tr||l||!(p in h))&&Ia(h,p,d[p]);else Zm({target:e,proto:!0,forced:tr||l},d);return h[ct]!==c&&Ia(h,ct,c,{name:i}),n0[e]=c,d},h0=function(a,e){return{value:a,done:e}},v0=$t,rn=Rm,Qs=Rt,il=wr,f0=Oe.f,c0=l0,rr=h0,g0=he,nl=\"Array Iterator\",d0=il.set,p0=il.getterFor(nl),y0=c0(Array,\"Array\",function(a,e){d0(this,{type:nl,target:v0(a),index:0,kind:e})},function(){var a=p0(this),e=a.target,t=a.index++;if(!e||t>=e.length)return a.target=null,rr(void 0,!0);switch(a.kind){case\"keys\":return rr(t,!1);case\"values\":return rr(e[t],!1)}return rr([t,e[t]],!1)},\"values\"),Ks=Qs.Arguments=Qs.Array;rn(\"keys\");rn(\"values\");rn(\"entries\");if(g0&&Ks.name!==\"values\")try{f0(Ks,\"name\",{value:\"values\"})}catch{}var m0={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},b0=Er,Ma=b0(\"span\").classList,Zs=Ma&&Ma.constructor&&Ma.constructor.prototype,x0=Zs===Object.prototype?void 0:Zs,Js=_,sl=m0,T0=x0,pt=y0,eo=Ct,O0=Pr,S0=z,_a=S0(\"iterator\"),Va=pt.values,ol=function(a,e){if(a){if(a[_a]!==Va)try{eo(a,_a,Va)}catch{a[_a]=Va}if(O0(a,e,!0),sl[e]){for(var t in pt)if(a[t]!==pt[t])try{eo(a,t,pt[t])}catch{a[t]=pt[t]}}}};for(var Da in sl)ol(Js[Da]&&Js[Da].prototype,Da);ol(T0,\"DOMTokenList\");function E0(a,e){if(Ha(a)!=\"object\"||!a)return a;var t=a[Symbol.toPrimitive];if(t!==void 0){var r=t.call(a,e||\"default\");if(Ha(r)!=\"object\")return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(e===\"string\"?String:Number)(a)}function $0(a){var e=E0(a,\"string\");return Ha(e)==\"symbol\"?e:e+\"\"}function an(a,e,t){return(e=$0(e))in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}var w0=Te,C0=Sr,A0=zo,P0=Ii,to=TypeError,ro=\"Reduce of empty array with no initial value\",ao=function(a){return function(e,t,r,i){var n=C0(e),o=A0(n),s=P0(n);if(w0(t),s===0&&r<2)throw new to(ro);var u=a?s-1:0,l=a?-1:1;if(r<2)for(;;){if(u in o){i=o[u],u+=l;break}if(u+=l,a?u<0:s<=u)throw new to(ro)}for(;a?u>=0:s>u;u+=l)u in o&&(i=t(i,o[u],u,n));return i}},R0={left:ao(!1),right:ao(!0)},N0=D,ul=function(a,e){var t=[][a];return!!t&&N0(function(){t.call(null,e||function(){return 1},1)})},I0=ee,M0=R0.left,_0=ul,io=Si,V0=Ar,D0=!V0&&io>79&&io<83,L0=D0||!_0(\"reduce\");I0({target:\"Array\",proto:!0,forced:L0},{reduce:function(e){var t=arguments.length;return M0(this,e,t,t>1?arguments[1]:void 0)}});var k0=ee,B0=Rr,j0=Et.f,F0=ot,no=pe,U0=en,G0=ve,z0=tn,H0=B0(\"\".slice),Y0=Math.min,ll=z0(\"endsWith\"),X0=!ll&&!!function(){var a=j0(String.prototype,\"endsWith\");return a&&!a.writable}();k0({target:\"String\",proto:!0,forced:!X0&&!ll},{endsWith:function(e){var t=no(G0(this));U0(e);var r=arguments.length>1?arguments[1]:void 0,i=t.length,n=r===void 0?i:Y0(F0(r),i),o=no(e);return H0(t,n-o.length,n)===o}});var La=Y,hl=L,W0=Wi,q0=J,Q0=ae,K0=ve,Z0=yu,J0=Qi,eb=ot,so=pe,tb=st,oo=Zi,rb=Yu,ab=D,We=rb.UNSUPPORTED_Y,ib=4294967295,nb=Math.min,ka=hl([].push),Ba=hl(\"\".slice),sb=!ab(function(){var a=/(?:)/,e=a.exec;a.exec=function(){return e.apply(this,arguments)};var t=\"ab\".split(a);return t.length!==2||t[0]!==\"a\"||t[1]!==\"b\"}),uo=\"abbc\".split(/(b)*/)[1]===\"c\"||\"test\".split(/(?:)/,-1).length!==4||\"ab\".split(/(?:ab)*/).length!==2||\".\".split(/(.?)(.?)/).length!==4||\".\".split(/()()/).length>1||\"\".split(/.?/).length;W0(\"split\",function(a,e,t){var r=\"0\".split(void 0,0).length?function(i,n){return i===void 0&&n===0?[]:La(e,this,i,n)}:e;return[function(n,o){var s=K0(this),u=Q0(n)?tb(n,a):void 0;return u?La(u,n,s,o):La(r,so(s),n,o)},function(i,n){var o=q0(this),s=so(i);if(!uo){var u=t(r,o,s,n,r!==e);if(u.done)return u.value}var l=Z0(o,RegExp),h=o.unicode,f=(o.ignoreCase?\"i\":\"\")+(o.multiline?\"m\":\"\")+(o.unicode?\"u\":\"\")+(We?\"g\":\"y\"),c=new l(We?\"^(?:\"+o.source+\")\":o,f),v=n===void 0?ib:n>>>0;if(v===0)return[];if(s.length===0)return oo(c,s)===null?[s]:[];for(var g=0,d=0,p=[];d<s.length;){c.lastIndex=We?0:d;var y=oo(c,We?Ba(s,d):s),x;if(y===null||(x=nb(eb(c.lastIndex+(We?d:0)),s.length))===g)d=J0(s,d,h);else{if(ka(p,Ba(s,g,d)),p.length===v)return p;for(var b=1;b<=y.length-1;b++)if(ka(p,y[b]),p.length===v)return p;d=g=x}}return ka(p,Ba(s,g)),p}]},uo||!sb,We);var Vr={exports:{}},yt={exports:{}};(function(){var a,e,t,r,i,n;typeof performance<\"u\"&&performance!==null&&performance.now?yt.exports=function(){return performance.now()}:typeof process<\"u\"&&process!==null&&process.hrtime?(yt.exports=function(){return(a()-i)/1e6},e=process.hrtime,a=function(){var o;return o=e(),o[0]*1e9+o[1]},r=a(),n=process.uptime()*1e9,i=r-n):Date.now?(yt.exports=function(){return Date.now()-t},t=Date.now()):(yt.exports=function(){return new Date().getTime()-t},t=new Date().getTime())}).call(Qe);var ob=yt.exports,ub=ob,be=typeof window>\"u\"?Qe:window,ar=[\"moz\",\"webkit\"],tt=\"AnimationFrame\",nt=be[\"request\"+tt],St=be[\"cancel\"+tt]||be[\"cancelRequest\"+tt];for(var dt=0;!nt&&dt<ar.length;dt++)nt=be[ar[dt]+\"Request\"+tt],St=be[ar[dt]+\"Cancel\"+tt]||be[ar[dt]+\"CancelRequest\"+tt];if(!nt||!St){var ja=0,lo=0,_e=[],lb=1e3/60;nt=function(a){if(_e.length===0){var e=ub(),t=Math.max(0,lb-(e-ja));ja=t+e,setTimeout(function(){var r=_e.slice(0);_e.length=0;for(var i=0;i<r.length;i++)if(!r[i].cancelled)try{r[i].callback(ja)}catch(n){setTimeout(function(){throw n},0)}},Math.round(t))}return _e.push({handle:++lo,callback:a,cancelled:!1}),lo},St=function(a){for(var e=0;e<_e.length;e++)_e[e].handle===a&&(_e[e].cancelled=!0)}}Vr.exports=function(a){return nt.call(be,a)};Vr.exports.cancel=function(){St.apply(be,arguments)};Vr.exports.polyfill=function(a){a||(a=be),a.requestAnimationFrame=nt,a.cancelAnimationFrame=St};var hb=Vr.exports;const Fa=Lo(hb);var vl=`\t\n\\v\\f\\r Â áš€â€€â€â€‚â€ƒâ€„â€…â€†â€‡â€ˆâ€‰â€Šâ€¯âŸã€€\\u2028\\u2029\\uFEFF`,vb=L,fb=ve,cb=pe,pi=vl,ho=vb(\"\".replace),gb=RegExp(\"^[\"+pi+\"]+\"),db=RegExp(\"(^|[^\"+pi+\"])[\"+pi+\"]+$\"),Ua=function(a){return function(e){var t=cb(fb(e));return a&1&&(t=ho(t,gb,\"\")),a&2&&(t=ho(t,db,\"$1\")),t}},pb={start:Ua(1),end:Ua(2),trim:Ua(3)},yb=$r.PROPER,mb=D,vo=vl,fo=\"â€‹Â…á \",bb=function(a){return mb(function(){return!!vo[a]()||fo[a]()!==fo||yb&&vo[a].name!==a})},xb=ee,Tb=pb.trim,Ob=bb;xb({target:\"String\",proto:!0,forced:Ob(\"trim\")},{trim:function(){return Tb(this)}});var Sb=function(a){this.ok=!1,this.alpha=1,a.charAt(0)==\"#\"&&(a=a.substr(1,6)),a=a.replace(/ /g,\"\"),a=a.toLowerCase();var e={aliceblue:\"f0f8ff\",antiquewhite:\"faebd7\",aqua:\"00ffff\",aquamarine:\"7fffd4\",azure:\"f0ffff\",beige:\"f5f5dc\",bisque:\"ffe4c4\",black:\"000000\",blanchedalmond:\"ffebcd\",blue:\"0000ff\",blueviolet:\"8a2be2\",brown:\"a52a2a\",burlywood:\"deb887\",cadetblue:\"5f9ea0\",chartreuse:\"7fff00\",chocolate:\"d2691e\",coral:\"ff7f50\",cornflowerblue:\"6495ed\",cornsilk:\"fff8dc\",crimson:\"dc143c\",cyan:\"00ffff\",darkblue:\"00008b\",darkcyan:\"008b8b\",darkgoldenrod:\"b8860b\",darkgray:\"a9a9a9\",darkgreen:\"006400\",darkkhaki:\"bdb76b\",darkmagenta:\"8b008b\",darkolivegreen:\"556b2f\",darkorange:\"ff8c00\",darkorchid:\"9932cc\",darkred:\"8b0000\",darksalmon:\"e9967a\",darkseagreen:\"8fbc8f\",darkslateblue:\"483d8b\",darkslategray:\"2f4f4f\",darkturquoise:\"00ced1\",darkviolet:\"9400d3\",deeppink:\"ff1493\",deepskyblue:\"00bfff\",dimgray:\"696969\",dodgerblue:\"1e90ff\",feldspar:\"d19275\",firebrick:\"b22222\",floralwhite:\"fffaf0\",forestgreen:\"228b22\",fuchsia:\"ff00ff\",gainsboro:\"dcdcdc\",ghostwhite:\"f8f8ff\",gold:\"ffd700\",goldenrod:\"daa520\",gray:\"808080\",green:\"008000\",greenyellow:\"adff2f\",honeydew:\"f0fff0\",hotpink:\"ff69b4\",indianred:\"cd5c5c\",indigo:\"4b0082\",ivory:\"fffff0\",khaki:\"f0e68c\",lavender:\"e6e6fa\",lavenderblush:\"fff0f5\",lawngreen:\"7cfc00\",lemonchiffon:\"fffacd\",lightblue:\"add8e6\",lightcoral:\"f08080\",lightcyan:\"e0ffff\",lightgoldenrodyellow:\"fafad2\",lightgrey:\"d3d3d3\",lightgreen:\"90ee90\",lightpink:\"ffb6c1\",lightsalmon:\"ffa07a\",lightseagreen:\"20b2aa\",lightskyblue:\"87cefa\",lightslateblue:\"8470ff\",lightslategray:\"778899\",lightsteelblue:\"b0c4de\",lightyellow:\"ffffe0\",lime:\"00ff00\",limegreen:\"32cd32\",linen:\"faf0e6\",magenta:\"ff00ff\",maroon:\"800000\",mediumaquamarine:\"66cdaa\",mediumblue:\"0000cd\",mediumorchid:\"ba55d3\",mediumpurple:\"9370d8\",mediumseagreen:\"3cb371\",mediumslateblue:\"7b68ee\",mediumspringgreen:\"00fa9a\",mediumturquoise:\"48d1cc\",mediumvioletred:\"c71585\",midnightblue:\"191970\",mintcream:\"f5fffa\",mistyrose:\"ffe4e1\",moccasin:\"ffe4b5\",navajowhite:\"ffdead\",navy:\"000080\",oldlace:\"fdf5e6\",olive:\"808000\",olivedrab:\"6b8e23\",orange:\"ffa500\",orangered:\"ff4500\",orchid:\"da70d6\",palegoldenrod:\"eee8aa\",palegreen:\"98fb98\",paleturquoise:\"afeeee\",palevioletred:\"d87093\",papayawhip:\"ffefd5\",peachpuff:\"ffdab9\",peru:\"cd853f\",pink:\"ffc0cb\",plum:\"dda0dd\",powderblue:\"b0e0e6\",purple:\"800080\",rebeccapurple:\"663399\",red:\"ff0000\",rosybrown:\"bc8f8f\",royalblue:\"4169e1\",saddlebrown:\"8b4513\",salmon:\"fa8072\",sandybrown:\"f4a460\",seagreen:\"2e8b57\",seashell:\"fff5ee\",sienna:\"a0522d\",silver:\"c0c0c0\",skyblue:\"87ceeb\",slateblue:\"6a5acd\",slategray:\"708090\",snow:\"fffafa\",springgreen:\"00ff7f\",steelblue:\"4682b4\",tan:\"d2b48c\",teal:\"008080\",thistle:\"d8bfd8\",tomato:\"ff6347\",turquoise:\"40e0d0\",violet:\"ee82ee\",violetred:\"d02090\",wheat:\"f5deb3\",white:\"ffffff\",whitesmoke:\"f5f5f5\",yellow:\"ffff00\",yellowgreen:\"9acd32\"};a=e[a]||a;for(var t=[{re:/^rgba\\((\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3}),\\s*((?:\\d?\\.)?\\d)\\)$/,example:[\"rgba(123, 234, 45, 0.8)\",\"rgba(255,234,245,1.0)\"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3]),parseFloat(u[4])]}},{re:/^rgb\\((\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3})\\)$/,example:[\"rgb(123, 234, 45)\",\"rgb(255,234,245)\"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:[\"#00ff00\",\"336699\"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:[\"#fb0\",\"f0f\"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,n=t[r].process,o=i.exec(a);if(o){var s=n(o);this.r=s[0],this.g=s[1],this.b=s[2],s.length>3&&(this.alpha=s[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return\"rgb(\"+this.r+\", \"+this.g+\", \"+this.b+\")\"},this.toRGBA=function(){return\"rgba(\"+this.r+\", \"+this.g+\", \"+this.b+\", \"+this.alpha+\")\"},this.toHex=function(){var u=this.r.toString(16),l=this.g.toString(16),h=this.b.toString(16);return u.length==1&&(u=\"0\"+u),l.length==1&&(l=\"0\"+l),h.length==1&&(h=\"0\"+h),\"#\"+u+l+h},this.getHelpXML=function(){for(var u=new Array,l=0;l<t.length;l++)for(var h=t[l].example,f=0;f<h.length;f++)u[u.length]=h[f];for(var c in e)u[u.length]=c;var v=document.createElement(\"ul\");v.setAttribute(\"id\",\"rgbcolor-examples\");for(var l=0;l<u.length;l++)try{var g=document.createElement(\"li\"),d=new RGBColor(u[l]),p=document.createElement(\"div\");p.style.cssText=\"margin: 3px; border: 1px solid black; background:\"+d.toHex()+\"; color:\"+d.toHex(),p.appendChild(document.createTextNode(\"test\"));var y=document.createTextNode(\" \"+u[l]+\" -> \"+d.toRGB()+\" -> \"+d.toHex());g.appendChild(p),g.appendChild(y),v.appendChild(g)}catch{}return v}};const yi=Lo(Sb);var Eb=ee,$b=Rr,wb=su.indexOf,Cb=ul,mi=$b([].indexOf),fl=!!mi&&1/mi([1],1,-0)<0,Ab=fl||!Cb(\"indexOf\");Eb({target:\"Array\",proto:!0,forced:Ab},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return fl?mi(this,e,t)||0:wb(this,e,t)}});var Pb=ee,Rb=L,Nb=en,Ib=ve,co=pe,Mb=tn,_b=Rb(\"\".indexOf);Pb({target:\"String\",proto:!0,forced:!Mb(\"includes\")},{includes:function(e){return!!~_b(co(Ib(this)),co(Nb(e)),arguments.length>1?arguments[1]:void 0)}});var Vb=je,Db=Array.isArray||function(e){return Vb(e)===\"Array\"},Lb=ee,kb=L,Bb=Db,jb=kb([].reverse),go=[1,2];Lb({target:\"Array\",proto:!0,forced:String(go)===String(go.reverse())},{reverse:function(){return Bb(this)&&(this.length=this.length),jb(this)}});/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */var cl=function(a,e){return(cl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])})(a,e)};function gl(a,e){if(typeof e!=\"function\"&&e!==null)throw new TypeError(\"Class extends value \"+String(e)+\" is not a constructor or null\");function t(){this.constructor=a}cl(a,e),a.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Fb(a){var e=\"\";Array.isArray(a)||(a=[a]);for(var t=0;t<a.length;t++){var r=a[t];if(r.type===m.CLOSE_PATH)e+=\"z\";else if(r.type===m.HORIZ_LINE_TO)e+=(r.relative?\"h\":\"H\")+r.x;else if(r.type===m.VERT_LINE_TO)e+=(r.relative?\"v\":\"V\")+r.y;else if(r.type===m.MOVE_TO)e+=(r.relative?\"m\":\"M\")+r.x+\" \"+r.y;else if(r.type===m.LINE_TO)e+=(r.relative?\"l\":\"L\")+r.x+\" \"+r.y;else if(r.type===m.CURVE_TO)e+=(r.relative?\"c\":\"C\")+r.x1+\" \"+r.y1+\" \"+r.x2+\" \"+r.y2+\" \"+r.x+\" \"+r.y;else if(r.type===m.SMOOTH_CURVE_TO)e+=(r.relative?\"s\":\"S\")+r.x2+\" \"+r.y2+\" \"+r.x+\" \"+r.y;else if(r.type===m.QUAD_TO)e+=(r.relative?\"q\":\"Q\")+r.x1+\" \"+r.y1+\" \"+r.x+\" \"+r.y;else if(r.type===m.SMOOTH_QUAD_TO)e+=(r.relative?\"t\":\"T\")+r.x+\" \"+r.y;else{if(r.type!==m.ARC)throw new Error('Unexpected command type \"'+r.type+'\" at index '+t+\".\");e+=(r.relative?\"a\":\"A\")+r.rX+\" \"+r.rY+\" \"+r.xRot+\" \"+ +r.lArcFlag+\" \"+ +r.sweepFlag+\" \"+r.x+\" \"+r.y}}return e}function bi(a,e){var t=a[0],r=a[1];return[t*Math.cos(e)-r*Math.sin(e),t*Math.sin(e)+r*Math.cos(e)]}function ue(){for(var a=[],e=0;e<arguments.length;e++)a[e]=arguments[e];for(var t=0;t<a.length;t++)if(typeof a[t]!=\"number\")throw new Error(\"assertNumbers arguments[\"+t+\"] is not a number. \"+typeof a[t]+\" == typeof \"+a[t]);return!0}var Ee=Math.PI;function Ga(a,e,t){a.lArcFlag=a.lArcFlag===0?0:1,a.sweepFlag=a.sweepFlag===0?0:1;var r=a.rX,i=a.rY,n=a.x,o=a.y;r=Math.abs(a.rX),i=Math.abs(a.rY);var s=bi([(e-n)/2,(t-o)/2],-a.xRot/180*Ee),u=s[0],l=s[1],h=Math.pow(u,2)/Math.pow(r,2)+Math.pow(l,2)/Math.pow(i,2);1<h&&(r*=Math.sqrt(h),i*=Math.sqrt(h)),a.rX=r,a.rY=i;var f=Math.pow(r,2)*Math.pow(l,2)+Math.pow(i,2)*Math.pow(u,2),c=(a.lArcFlag!==a.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(r,2)*Math.pow(i,2)-f)/f)),v=r*l/i*c,g=-i*u/r*c,d=bi([v,g],a.xRot/180*Ee);a.cX=d[0]+(e+n)/2,a.cY=d[1]+(t+o)/2,a.phi1=Math.atan2((l-g)/i,(u-v)/r),a.phi2=Math.atan2((-l-g)/i,(-u-v)/r),a.sweepFlag===0&&a.phi2>a.phi1&&(a.phi2-=2*Ee),a.sweepFlag===1&&a.phi2<a.phi1&&(a.phi2+=2*Ee),a.phi1*=180/Ee,a.phi2*=180/Ee}function po(a,e,t){ue(a,e,t);var r=a*a+e*e-t*t;if(0>r)return[];if(r===0)return[[a*t/(a*a+e*e),e*t/(a*a+e*e)]];var i=Math.sqrt(r);return[[(a*t+e*i)/(a*a+e*e),(e*t-a*i)/(a*a+e*e)],[(a*t-e*i)/(a*a+e*e),(e*t+a*i)/(a*a+e*e)]]}var U,ye=Math.PI/180;function yo(a,e,t){return(1-t)*a+t*e}function mo(a,e,t,r){return a+Math.cos(r/180*Ee)*e+Math.sin(r/180*Ee)*t}function bo(a,e,t,r){var i=1e-6,n=e-a,o=t-e,s=3*n+3*(r-t)-6*o,u=6*(o-n),l=3*n;return Math.abs(s)<i?[-l/u]:function(h,f,c){var v=h*h/4-f;if(v<-c)return[];if(v<=c)return[-h/2];var g=Math.sqrt(v);return[-h/2-g,-h/2+g]}(u/s,l/s,i)}function xo(a,e,t,r,i){var n=1-i;return a*(n*n*n)+e*(3*n*n*i)+t*(3*n*i*i)+r*(i*i*i)}(function(a){function e(){return i(function(s,u,l){return s.relative&&(s.x1!==void 0&&(s.x1+=u),s.y1!==void 0&&(s.y1+=l),s.x2!==void 0&&(s.x2+=u),s.y2!==void 0&&(s.y2+=l),s.x!==void 0&&(s.x+=u),s.y!==void 0&&(s.y+=l),s.relative=!1),s})}function t(){var s=NaN,u=NaN,l=NaN,h=NaN;return i(function(f,c,v){return f.type&m.SMOOTH_CURVE_TO&&(f.type=m.CURVE_TO,s=isNaN(s)?c:s,u=isNaN(u)?v:u,f.x1=f.relative?c-s:2*c-s,f.y1=f.relative?v-u:2*v-u),f.type&m.CURVE_TO?(s=f.relative?c+f.x2:f.x2,u=f.relative?v+f.y2:f.y2):(s=NaN,u=NaN),f.type&m.SMOOTH_QUAD_TO&&(f.type=m.QUAD_TO,l=isNaN(l)?c:l,h=isNaN(h)?v:h,f.x1=f.relative?c-l:2*c-l,f.y1=f.relative?v-h:2*v-h),f.type&m.QUAD_TO?(l=f.relative?c+f.x1:f.x1,h=f.relative?v+f.y1:f.y1):(l=NaN,h=NaN),f})}function r(){var s=NaN,u=NaN;return i(function(l,h,f){if(l.type&m.SMOOTH_QUAD_TO&&(l.type=m.QUAD_TO,s=isNaN(s)?h:s,u=isNaN(u)?f:u,l.x1=l.relative?h-s:2*h-s,l.y1=l.relative?f-u:2*f-u),l.type&m.QUAD_TO){s=l.relative?h+l.x1:l.x1,u=l.relative?f+l.y1:l.y1;var c=l.x1,v=l.y1;l.type=m.CURVE_TO,l.x1=((l.relative?0:h)+2*c)/3,l.y1=((l.relative?0:f)+2*v)/3,l.x2=(l.x+2*c)/3,l.y2=(l.y+2*v)/3}else s=NaN,u=NaN;return l})}function i(s){var u=0,l=0,h=NaN,f=NaN;return function(c){if(isNaN(h)&&!(c.type&m.MOVE_TO))throw new Error(\"path must start with moveto\");var v=s(c,u,l,h,f);return c.type&m.CLOSE_PATH&&(u=h,l=f),c.x!==void 0&&(u=c.relative?u+c.x:c.x),c.y!==void 0&&(l=c.relative?l+c.y:c.y),c.type&m.MOVE_TO&&(h=u,f=l),v}}function n(s,u,l,h,f,c){return ue(s,u,l,h,f,c),i(function(v,g,d,p){var y=v.x1,x=v.x2,b=v.relative&&!isNaN(p),T=v.x!==void 0?v.x:b?0:g,$=v.y!==void 0?v.y:b?0:d;function E(se){return se*se}v.type&m.HORIZ_LINE_TO&&u!==0&&(v.type=m.LINE_TO,v.y=v.relative?0:d),v.type&m.VERT_LINE_TO&&l!==0&&(v.type=m.LINE_TO,v.x=v.relative?0:g),v.x!==void 0&&(v.x=v.x*s+$*l+(b?0:f)),v.y!==void 0&&(v.y=T*u+v.y*h+(b?0:c)),v.x1!==void 0&&(v.x1=v.x1*s+v.y1*l+(b?0:f)),v.y1!==void 0&&(v.y1=y*u+v.y1*h+(b?0:c)),v.x2!==void 0&&(v.x2=v.x2*s+v.y2*l+(b?0:f)),v.y2!==void 0&&(v.y2=x*u+v.y2*h+(b?0:c));var O=s*h-u*l;if(v.xRot!==void 0&&(s!==1||u!==0||l!==0||h!==1))if(O===0)delete v.rX,delete v.rY,delete v.xRot,delete v.lArcFlag,delete v.sweepFlag,v.type=m.LINE_TO;else{var C=v.xRot*Math.PI/180,P=Math.sin(C),V=Math.cos(C),j=1/E(v.rX),R=1/E(v.rY),X=E(V)*j+E(P)*R,W=2*P*V*(j-R),G=E(P)*j+E(V)*R,q=X*h*h-W*u*h+G*u*u,H=W*(s*h+u*l)-2*(X*l*h+G*s*u),Q=X*l*l-W*s*l+G*s*s,N=(Math.atan2(H,q-Q)+Math.PI)%Math.PI/2,M=Math.sin(N),K=Math.cos(N);v.rX=Math.abs(O)/Math.sqrt(q*E(K)+H*M*K+Q*E(M)),v.rY=Math.abs(O)/Math.sqrt(q*E(M)-H*M*K+Q*E(K)),v.xRot=180*N/Math.PI}return v.sweepFlag!==void 0&&0>O&&(v.sweepFlag=+!v.sweepFlag),v})}function o(){return function(s){var u={};for(var l in s)u[l]=s[l];return u}}a.ROUND=function(s){function u(l){return Math.round(l*s)/s}return s===void 0&&(s=1e13),ue(s),function(l){return l.x1!==void 0&&(l.x1=u(l.x1)),l.y1!==void 0&&(l.y1=u(l.y1)),l.x2!==void 0&&(l.x2=u(l.x2)),l.y2!==void 0&&(l.y2=u(l.y2)),l.x!==void 0&&(l.x=u(l.x)),l.y!==void 0&&(l.y=u(l.y)),l.rX!==void 0&&(l.rX=u(l.rX)),l.rY!==void 0&&(l.rY=u(l.rY)),l}},a.TO_ABS=e,a.TO_REL=function(){return i(function(s,u,l){return s.relative||(s.x1!==void 0&&(s.x1-=u),s.y1!==void 0&&(s.y1-=l),s.x2!==void 0&&(s.x2-=u),s.y2!==void 0&&(s.y2-=l),s.x!==void 0&&(s.x-=u),s.y!==void 0&&(s.y-=l),s.relative=!0),s})},a.NORMALIZE_HVZ=function(s,u,l){return s===void 0&&(s=!0),u===void 0&&(u=!0),l===void 0&&(l=!0),i(function(h,f,c,v,g){if(isNaN(v)&&!(h.type&m.MOVE_TO))throw new Error(\"path must start with moveto\");return u&&h.type&m.HORIZ_LINE_TO&&(h.type=m.LINE_TO,h.y=h.relative?0:c),l&&h.type&m.VERT_LINE_TO&&(h.type=m.LINE_TO,h.x=h.relative?0:f),s&&h.type&m.CLOSE_PATH&&(h.type=m.LINE_TO,h.x=h.relative?v-f:v,h.y=h.relative?g-c:g),h.type&m.ARC&&(h.rX===0||h.rY===0)&&(h.type=m.LINE_TO,delete h.rX,delete h.rY,delete h.xRot,delete h.lArcFlag,delete h.sweepFlag),h})},a.NORMALIZE_ST=t,a.QT_TO_C=r,a.INFO=i,a.SANITIZE=function(s){s===void 0&&(s=0),ue(s);var u=NaN,l=NaN,h=NaN,f=NaN;return i(function(c,v,g,d,p){var y=Math.abs,x=!1,b=0,T=0;if(c.type&m.SMOOTH_CURVE_TO&&(b=isNaN(u)?0:v-u,T=isNaN(l)?0:g-l),c.type&(m.CURVE_TO|m.SMOOTH_CURVE_TO)?(u=c.relative?v+c.x2:c.x2,l=c.relative?g+c.y2:c.y2):(u=NaN,l=NaN),c.type&m.SMOOTH_QUAD_TO?(h=isNaN(h)?v:2*v-h,f=isNaN(f)?g:2*g-f):c.type&m.QUAD_TO?(h=c.relative?v+c.x1:c.x1,f=c.relative?g+c.y1:c.y2):(h=NaN,f=NaN),c.type&m.LINE_COMMANDS||c.type&m.ARC&&(c.rX===0||c.rY===0||!c.lArcFlag)||c.type&m.CURVE_TO||c.type&m.SMOOTH_CURVE_TO||c.type&m.QUAD_TO||c.type&m.SMOOTH_QUAD_TO){var $=c.x===void 0?0:c.relative?c.x:c.x-v,E=c.y===void 0?0:c.relative?c.y:c.y-g;b=isNaN(h)?c.x1===void 0?b:c.relative?c.x:c.x1-v:h-v,T=isNaN(f)?c.y1===void 0?T:c.relative?c.y:c.y1-g:f-g;var O=c.x2===void 0?0:c.relative?c.x:c.x2-v,C=c.y2===void 0?0:c.relative?c.y:c.y2-g;y($)<=s&&y(E)<=s&&y(b)<=s&&y(T)<=s&&y(O)<=s&&y(C)<=s&&(x=!0)}return c.type&m.CLOSE_PATH&&y(v-d)<=s&&y(g-p)<=s&&(x=!0),x?[]:c})},a.MATRIX=n,a.ROTATE=function(s,u,l){u===void 0&&(u=0),l===void 0&&(l=0),ue(s,u,l);var h=Math.sin(s),f=Math.cos(s);return n(f,h,-h,f,u-u*f+l*h,l-u*h-l*f)},a.TRANSLATE=function(s,u){return u===void 0&&(u=0),ue(s,u),n(1,0,0,1,s,u)},a.SCALE=function(s,u){return u===void 0&&(u=s),ue(s,u),n(s,0,0,u,0,0)},a.SKEW_X=function(s){return ue(s),n(1,0,Math.atan(s),1,0,0)},a.SKEW_Y=function(s){return ue(s),n(1,Math.atan(s),0,1,0,0)},a.X_AXIS_SYMMETRY=function(s){return s===void 0&&(s=0),ue(s),n(-1,0,0,1,s,0)},a.Y_AXIS_SYMMETRY=function(s){return s===void 0&&(s=0),ue(s),n(1,0,0,-1,0,s)},a.A_TO_C=function(){return i(function(s,u,l){return m.ARC===s.type?function(h,f,c){var v,g,d,p;h.cX||Ga(h,f,c);for(var y=Math.min(h.phi1,h.phi2),x=Math.max(h.phi1,h.phi2)-y,b=Math.ceil(x/90),T=new Array(b),$=f,E=c,O=0;O<b;O++){var C=yo(h.phi1,h.phi2,O/b),P=yo(h.phi1,h.phi2,(O+1)/b),V=P-C,j=4/3*Math.tan(V*ye/4),R=[Math.cos(C*ye)-j*Math.sin(C*ye),Math.sin(C*ye)+j*Math.cos(C*ye)],X=R[0],W=R[1],G=[Math.cos(P*ye),Math.sin(P*ye)],q=G[0],H=G[1],Q=[q+j*Math.sin(P*ye),H-j*Math.cos(P*ye)],N=Q[0],M=Q[1];T[O]={relative:h.relative,type:m.CURVE_TO};var K=function(se,ge){var Se=bi([se*h.rX,ge*h.rY],h.xRot),ze=Se[0],It=Se[1];return[h.cX+ze,h.cY+It]};v=K(X,W),T[O].x1=v[0],T[O].y1=v[1],g=K(N,M),T[O].x2=g[0],T[O].y2=g[1],d=K(q,H),T[O].x=d[0],T[O].y=d[1],h.relative&&(T[O].x1-=$,T[O].y1-=E,T[O].x2-=$,T[O].y2-=E,T[O].x-=$,T[O].y-=E),$=(p=[T[O].x,T[O].y])[0],E=p[1]}return T}(s,s.relative?0:u,s.relative?0:l):s})},a.ANNOTATE_ARCS=function(){return i(function(s,u,l){return s.relative&&(u=0,l=0),m.ARC===s.type&&Ga(s,u,l),s})},a.CLONE=o,a.CALCULATE_BOUNDS=function(){var s=function(c){var v={};for(var g in c)v[g]=c[g];return v},u=e(),l=r(),h=t(),f=i(function(c,v,g){var d=h(l(u(s(c))));function p(M){M>f.maxX&&(f.maxX=M),M<f.minX&&(f.minX=M)}function y(M){M>f.maxY&&(f.maxY=M),M<f.minY&&(f.minY=M)}if(d.type&m.DRAWING_COMMANDS&&(p(v),y(g)),d.type&m.HORIZ_LINE_TO&&p(d.x),d.type&m.VERT_LINE_TO&&y(d.y),d.type&m.LINE_TO&&(p(d.x),y(d.y)),d.type&m.CURVE_TO){p(d.x),y(d.y);for(var x=0,b=bo(v,d.x1,d.x2,d.x);x<b.length;x++)0<(N=b[x])&&1>N&&p(xo(v,d.x1,d.x2,d.x,N));for(var T=0,$=bo(g,d.y1,d.y2,d.y);T<$.length;T++)0<(N=$[T])&&1>N&&y(xo(g,d.y1,d.y2,d.y,N))}if(d.type&m.ARC){p(d.x),y(d.y),Ga(d,v,g);for(var E=d.xRot/180*Math.PI,O=Math.cos(E)*d.rX,C=Math.sin(E)*d.rX,P=-Math.sin(E)*d.rY,V=Math.cos(E)*d.rY,j=d.phi1<d.phi2?[d.phi1,d.phi2]:-180>d.phi2?[d.phi2+360,d.phi1+360]:[d.phi2,d.phi1],R=j[0],X=j[1],W=function(M){var K=M[0],se=M[1],ge=180*Math.atan2(se,K)/Math.PI;return ge<R?ge+360:ge},G=0,q=po(P,-O,0).map(W);G<q.length;G++)(N=q[G])>R&&N<X&&p(mo(d.cX,O,P,N));for(var H=0,Q=po(V,-C,0).map(W);H<Q.length;H++){var N;(N=Q[H])>R&&N<X&&y(mo(d.cY,C,V,N))}}return c});return f.minX=1/0,f.maxX=-1/0,f.minY=1/0,f.maxY=-1/0,f}})(U||(U={}));var oe,dl=function(){function a(){}return a.prototype.round=function(e){return this.transform(U.ROUND(e))},a.prototype.toAbs=function(){return this.transform(U.TO_ABS())},a.prototype.toRel=function(){return this.transform(U.TO_REL())},a.prototype.normalizeHVZ=function(e,t,r){return this.transform(U.NORMALIZE_HVZ(e,t,r))},a.prototype.normalizeST=function(){return this.transform(U.NORMALIZE_ST())},a.prototype.qtToC=function(){return this.transform(U.QT_TO_C())},a.prototype.aToC=function(){return this.transform(U.A_TO_C())},a.prototype.sanitize=function(e){return this.transform(U.SANITIZE(e))},a.prototype.translate=function(e,t){return this.transform(U.TRANSLATE(e,t))},a.prototype.scale=function(e,t){return this.transform(U.SCALE(e,t))},a.prototype.rotate=function(e,t,r){return this.transform(U.ROTATE(e,t,r))},a.prototype.matrix=function(e,t,r,i,n,o){return this.transform(U.MATRIX(e,t,r,i,n,o))},a.prototype.skewX=function(e){return this.transform(U.SKEW_X(e))},a.prototype.skewY=function(e){return this.transform(U.SKEW_Y(e))},a.prototype.xSymmetry=function(e){return this.transform(U.X_AXIS_SYMMETRY(e))},a.prototype.ySymmetry=function(e){return this.transform(U.Y_AXIS_SYMMETRY(e))},a.prototype.annotateArcs=function(){return this.transform(U.ANNOTATE_ARCS())},a}(),Ub=function(a){return a===\" \"||a===\"\t\"||a===\"\\r\"||a===`\n`},To=function(a){return 48<=a.charCodeAt(0)&&a.charCodeAt(0)<=57},Gb=function(a){function e(){var t=a.call(this)||this;return t.curNumber=\"\",t.curCommandType=-1,t.curCommandRelative=!1,t.canParseCommandOrComma=!0,t.curNumberHasExp=!1,t.curNumberHasExpDigits=!1,t.curNumberHasDecimal=!1,t.curArgs=[],t}return gl(e,a),e.prototype.finish=function(t){if(t===void 0&&(t=[]),this.parse(\" \",t),this.curArgs.length!==0||!this.canParseCommandOrComma)throw new SyntaxError(\"Unterminated command at the path end.\");return t},e.prototype.parse=function(t,r){var i=this;r===void 0&&(r=[]);for(var n=function(f){r.push(f),i.curArgs.length=0,i.canParseCommandOrComma=!0},o=0;o<t.length;o++){var s=t[o],u=!(this.curCommandType!==m.ARC||this.curArgs.length!==3&&this.curArgs.length!==4||this.curNumber.length!==1||this.curNumber!==\"0\"&&this.curNumber!==\"1\"),l=To(s)&&(this.curNumber===\"0\"&&s===\"0\"||u);if(!To(s)||l)if(s!==\"e\"&&s!==\"E\")if(s!==\"-\"&&s!==\"+\"||!this.curNumberHasExp||this.curNumberHasExpDigits)if(s!==\".\"||this.curNumberHasExp||this.curNumberHasDecimal||u){if(this.curNumber&&this.curCommandType!==-1){var h=Number(this.curNumber);if(isNaN(h))throw new SyntaxError(\"Invalid number ending at \"+o);if(this.curCommandType===m.ARC){if(this.curArgs.length===0||this.curArgs.length===1){if(0>h)throw new SyntaxError('Expected positive number, got \"'+h+'\" at index \"'+o+'\"')}else if((this.curArgs.length===3||this.curArgs.length===4)&&this.curNumber!==\"0\"&&this.curNumber!==\"1\")throw new SyntaxError('Expected a flag, got \"'+this.curNumber+'\" at index \"'+o+'\"')}this.curArgs.push(h),this.curArgs.length===zb[this.curCommandType]&&(m.HORIZ_LINE_TO===this.curCommandType?n({type:m.HORIZ_LINE_TO,relative:this.curCommandRelative,x:h}):m.VERT_LINE_TO===this.curCommandType?n({type:m.VERT_LINE_TO,relative:this.curCommandRelative,y:h}):this.curCommandType===m.MOVE_TO||this.curCommandType===m.LINE_TO||this.curCommandType===m.SMOOTH_QUAD_TO?(n({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),m.MOVE_TO===this.curCommandType&&(this.curCommandType=m.LINE_TO)):this.curCommandType===m.CURVE_TO?n({type:m.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===m.SMOOTH_CURVE_TO?n({type:m.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===m.QUAD_TO?n({type:m.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===m.ARC&&n({type:m.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber=\"\",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!Ub(s))if(s===\",\"&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if(s!==\"+\"&&s!==\"-\"&&s!==\".\")if(l)this.curNumber=s,this.curNumberHasDecimal=!1;else{if(this.curArgs.length!==0)throw new SyntaxError(\"Unterminated command at index \"+o+\".\");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character \"'+s+'\" at index '+o+\". Command cannot follow comma\");if(this.canParseCommandOrComma=!1,s!==\"z\"&&s!==\"Z\")if(s===\"h\"||s===\"H\")this.curCommandType=m.HORIZ_LINE_TO,this.curCommandRelative=s===\"h\";else if(s===\"v\"||s===\"V\")this.curCommandType=m.VERT_LINE_TO,this.curCommandRelative=s===\"v\";else if(s===\"m\"||s===\"M\")this.curCommandType=m.MOVE_TO,this.curCommandRelative=s===\"m\";else if(s===\"l\"||s===\"L\")this.curCommandType=m.LINE_TO,this.curCommandRelative=s===\"l\";else if(s===\"c\"||s===\"C\")this.curCommandType=m.CURVE_TO,this.curCommandRelative=s===\"c\";else if(s===\"s\"||s===\"S\")this.curCommandType=m.SMOOTH_CURVE_TO,this.curCommandRelative=s===\"s\";else if(s===\"q\"||s===\"Q\")this.curCommandType=m.QUAD_TO,this.curCommandRelative=s===\"q\";else if(s===\"t\"||s===\"T\")this.curCommandType=m.SMOOTH_QUAD_TO,this.curCommandRelative=s===\"t\";else{if(s!==\"a\"&&s!==\"A\")throw new SyntaxError('Unexpected character \"'+s+'\" at index '+o+\".\");this.curCommandType=m.ARC,this.curCommandRelative=s===\"a\"}else r.push({type:m.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=s,this.curNumberHasDecimal=s===\".\"}else this.curNumber+=s,this.curNumberHasDecimal=!0;else this.curNumber+=s;else this.curNumber+=s,this.curNumberHasExp=!0;else this.curNumber+=s,this.curNumberHasExpDigits=this.curNumberHasExp}return r},e.prototype.transform=function(t){return Object.create(this,{parse:{value:function(r,i){i===void 0&&(i=[]);for(var n=0,o=Object.getPrototypeOf(this).parse.call(this,r);n<o.length;n++){var s=o[n],u=t(s);Array.isArray(u)?i.push.apply(i,u):i.push(u)}return i}}})},e}(dl),m=function(a){function e(t){var r=a.call(this)||this;return r.commands=typeof t==\"string\"?e.parse(t):t,r}return gl(e,a),e.prototype.encode=function(){return e.encode(this.commands)},e.prototype.getBounds=function(){var t=U.CALCULATE_BOUNDS();return this.transform(t),t},e.prototype.transform=function(t){for(var r=[],i=0,n=this.commands;i<n.length;i++){var o=t(n[i]);Array.isArray(o)?r.push.apply(r,o):r.push(o)}return this.commands=r,this},e.encode=function(t){return Fb(t)},e.parse=function(t){var r=new Gb,i=[];return r.parse(t,i),r.finish(i),i},e.CLOSE_PATH=1,e.MOVE_TO=2,e.HORIZ_LINE_TO=4,e.VERT_LINE_TO=8,e.LINE_TO=16,e.CURVE_TO=32,e.SMOOTH_CURVE_TO=64,e.QUAD_TO=128,e.SMOOTH_QUAD_TO=256,e.ARC=512,e.LINE_COMMANDS=e.LINE_TO|e.HORIZ_LINE_TO|e.VERT_LINE_TO,e.DRAWING_COMMANDS=e.HORIZ_LINE_TO|e.VERT_LINE_TO|e.LINE_TO|e.CURVE_TO|e.SMOOTH_CURVE_TO|e.QUAD_TO|e.SMOOTH_QUAD_TO|e.ARC,e}(dl),zb=((oe={})[m.MOVE_TO]=2,oe[m.LINE_TO]=2,oe[m.HORIZ_LINE_TO]=1,oe[m.VERT_LINE_TO]=1,oe[m.CLOSE_PATH]=0,oe[m.QUAD_TO]=4,oe[m.SMOOTH_QUAD_TO]=2,oe[m.CURVE_TO]=6,oe[m.SMOOTH_CURVE_TO]=4,oe[m.ARC]=7,oe),Hb=$r.PROPER,Yb=Ue,Xb=J,Oo=pe,Wb=D,qb=Ki,nn=\"toString\",pl=RegExp.prototype,yl=pl[nn],Qb=Wb(function(){return yl.call({source:\"a\",flags:\"b\"})!==\"/a/b\"}),Kb=Hb&&yl.name!==nn;(Qb||Kb)&&Yb(pl,nn,function(){var e=Xb(this),t=Oo(e.source),r=Oo(qb(e));return\"/\"+t+\"/\"+r},{unsafe:!0});function fr(a){\"@babel/helpers - typeof\";return typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?fr=function(e){return typeof e}:fr=function(e){return e&&typeof Symbol==\"function\"&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},fr(a)}function Zb(a,e){if(!(a instanceof e))throw new TypeError(\"Cannot call a class as a function\")}var Jb=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],e1=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function t1(a,e,t,r,i){if(typeof a==\"string\"&&(a=document.getElementById(a)),!a||fr(a)!==\"object\"||!(\"getContext\"in a))throw new TypeError(\"Expecting canvas with `getContext` method in processCanvasRGB(A) calls!\");var n=a.getContext(\"2d\");try{return n.getImageData(e,t,r,i)}catch(o){throw new Error(\"unable to access image data: \"+o)}}function r1(a,e,t,r,i,n){if(!(isNaN(n)||n<1)){n|=0;var o=t1(a,e,t,r,i);o=a1(o,e,t,r,i,n),a.getContext(\"2d\").putImageData(o,e,t)}}function a1(a,e,t,r,i,n){for(var o=a.data,s=2*n+1,u=r-1,l=i-1,h=n+1,f=h*(h+1)/2,c=new So,v=c,g,d=1;d<s;d++)v=v.next=new So,d===h&&(g=v);v.next=c;for(var p=null,y=null,x=0,b=0,T=Jb[n],$=e1[n],E=0;E<i;E++){v=c;for(var O=o[b],C=o[b+1],P=o[b+2],V=o[b+3],j=0;j<h;j++)v.r=O,v.g=C,v.b=P,v.a=V,v=v.next;for(var R=0,X=0,W=0,G=0,q=h*O,H=h*C,Q=h*P,N=h*V,M=f*O,K=f*C,se=f*P,ge=f*V,Se=1;Se<h;Se++){var ze=b+((u<Se?u:Se)<<2),It=o[ze],un=o[ze+1],ln=o[ze+2],hn=o[ze+3],Mt=h-Se;M+=(v.r=It)*Mt,K+=(v.g=un)*Mt,se+=(v.b=ln)*Mt,ge+=(v.a=hn)*Mt,R+=It,X+=un,W+=ln,G+=hn,v=v.next}p=c,y=g;for(var jr=0;jr<r;jr++){var Fr=ge*T>>>$;if(o[b+3]=Fr,Fr!==0){var Ur=255/Fr;o[b]=(M*T>>>$)*Ur,o[b+1]=(K*T>>>$)*Ur,o[b+2]=(se*T>>>$)*Ur}else o[b]=o[b+1]=o[b+2]=0;M-=q,K-=H,se-=Q,ge-=N,q-=p.r,H-=p.g,Q-=p.b,N-=p.a;var Ae=jr+n+1;Ae=x+(Ae<u?Ae:u)<<2,R+=p.r=o[Ae],X+=p.g=o[Ae+1],W+=p.b=o[Ae+2],G+=p.a=o[Ae+3],M+=R,K+=X,se+=W,ge+=G,p=p.next;var _t=y,vn=_t.r,fn=_t.g,cn=_t.b,gn=_t.a;q+=vn,H+=fn,Q+=cn,N+=gn,R-=vn,X-=fn,W-=cn,G-=gn,y=y.next,b+=4}x+=r}for(var He=0;He<r;He++){b=He<<2;var Pe=o[b],Re=o[b+1],Ne=o[b+2],te=o[b+3],Gr=h*Pe,zr=h*Re,Hr=h*Ne,Yr=h*te,Vt=f*Pe,Dt=f*Re,Lt=f*Ne,kt=f*te;v=c;for(var dn=0;dn<h;dn++)v.r=Pe,v.g=Re,v.b=Ne,v.a=te,v=v.next;for(var pn=r,Xr=0,Wr=0,qr=0,Qr=0,Bt=1;Bt<=n;Bt++){b=pn+He<<2;var jt=h-Bt;Vt+=(v.r=Pe=o[b])*jt,Dt+=(v.g=Re=o[b+1])*jt,Lt+=(v.b=Ne=o[b+2])*jt,kt+=(v.a=te=o[b+3])*jt,Qr+=Pe,Xr+=Re,Wr+=Ne,qr+=te,v=v.next,Bt<l&&(pn+=r)}b=He,p=c,y=g;for(var Kr=0;Kr<i;Kr++){var re=b<<2;o[re+3]=te=kt*T>>>$,te>0?(te=255/te,o[re]=(Vt*T>>>$)*te,o[re+1]=(Dt*T>>>$)*te,o[re+2]=(Lt*T>>>$)*te):o[re]=o[re+1]=o[re+2]=0,Vt-=Gr,Dt-=zr,Lt-=Hr,kt-=Yr,Gr-=p.r,zr-=p.g,Hr-=p.b,Yr-=p.a,re=He+((re=Kr+h)<l?re:l)*r<<2,Vt+=Qr+=p.r=o[re],Dt+=Xr+=p.g=o[re+1],Lt+=Wr+=p.b=o[re+2],kt+=qr+=p.a=o[re+3],p=p.next,Gr+=Pe=y.r,zr+=Re=y.g,Hr+=Ne=y.b,Yr+=te=y.a,Qr-=Pe,Xr-=Re,Wr-=Ne,qr-=te,y=y.next,b+=r}}return a}var So=function a(){Zb(this,a),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};function i1(){var{DOMParser:a}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e={window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:a,createCanvas(t,r){return new OffscreenCanvas(t,r)},createImage(t){return xe(function*(){var r=yield fetch(t),i=yield r.blob(),n=yield createImageBitmap(i);return n})()}};return(typeof DOMParser<\"u\"||typeof a>\"u\")&&Reflect.deleteProperty(e,\"DOMParser\"),e}function n1(a){var{DOMParser:e,canvas:t,fetch:r}=a;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:e,fetch:r,createCanvas:t.createCanvas,createImage:t.loadImage}}var y2=Object.freeze({__proto__:null,offscreen:i1,node:n1});function lt(a){return a.replace(/(?!\\u3000)\\s+/gm,\" \")}function s1(a){return a.replace(/^[\\n \\t]+/,\"\")}function o1(a){return a.replace(/[\\n \\t]+$/,\"\")}function ne(a){var e=(a||\"\").match(/-?(\\d+(?:\\.\\d*(?:[eE][+-]?\\d+)?)?|\\.\\d+)(?=\\D|$)/gm)||[];return e.map(parseFloat)}var u1=/^[A-Z-]+$/;function l1(a){return u1.test(a)?a.toLowerCase():a}function ml(a){var e=/url\\(('([^']+)'|\"([^\"]+)\"|([^'\")]+))\\)/.exec(a)||[];return e[2]||e[3]||e[4]}function h1(a){if(!a.startsWith(\"rgb\"))return a;var e=3,t=a.replace(/\\d+(\\.\\d+)?/g,(r,i)=>e--&&i?String(Math.round(parseFloat(r))):r);return t}var v1=/(\\[[^\\]]+\\])/g,f1=/(#[^\\s+>~.[:]+)/g,c1=/(\\.[^\\s+>~.[:]+)/g,g1=/(::[^\\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,d1=/(:[\\w-]+\\([^)]*\\))/gi,p1=/(:[^\\s+>~.[:]+)/g,y1=/([^\\s+>~.[:]+)/g;function Ve(a,e){var t=e.exec(a);return t?[a.replace(e,\" \"),t.length]:[a,0]}function m1(a){var e=[0,0,0],t=a.replace(/:not\\(([^)]*)\\)/g,\"     $1 \").replace(/{[\\s\\S]*/gm,\" \"),r=0;return[t,r]=Ve(t,v1),e[1]+=r,[t,r]=Ve(t,f1),e[0]+=r,[t,r]=Ve(t,c1),e[1]+=r,[t,r]=Ve(t,g1),e[2]+=r,[t,r]=Ve(t,d1),e[1]+=r,[t,r]=Ve(t,p1),e[1]+=r,t=t.replace(/[*\\s+>~]/g,\" \").replace(/[#.]/g,\" \"),[t,r]=Ve(t,y1),e[2]+=r,e.join(\"\")}var rt=1e-8;function Eo(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2))}function xi(a,e){return(a[0]*e[0]+a[1]*e[1])/(Eo(a)*Eo(e))}function $o(a,e){return(a[0]*e[1]<a[1]*e[0]?-1:1)*Math.acos(xi(a,e))}function wo(a){return a*a*a}function Co(a){return 3*a*a*(1-a)}function Ao(a){return 3*a*(1-a)*(1-a)}function Po(a){return(1-a)*(1-a)*(1-a)}function Ro(a){return a*a}function No(a){return 2*a*(1-a)}function Io(a){return(1-a)*(1-a)}class S{constructor(e,t,r){this.document=e,this.name=t,this.value=r,this.isNormalizedColor=!1}static empty(e){return new S(e,\"EMPTY\",\"\")}split(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:\" \",{document:t,name:r}=this;return lt(this.getString()).trim().split(e).map(i=>new S(t,r,i))}hasValue(e){var{value:t}=this;return t!==null&&t!==\"\"&&(e||t!==0)&&typeof t<\"u\"}isString(e){var{value:t}=this,r=typeof t==\"string\";return!r||!e?r:e.test(t)}isUrlDefinition(){return this.isString(/^url\\(/)}isPixels(){if(!this.hasValue())return!1;var e=this.getString();switch(!0){case e.endsWith(\"px\"):case/^[0-9]+$/.test(e):return!0;default:return!1}}setValue(e){return this.value=e,this}getValue(e){return typeof e>\"u\"||this.hasValue()?this.value:e}getNumber(e){if(!this.hasValue())return typeof e>\"u\"?0:parseFloat(e);var{value:t}=this,r=parseFloat(t);return this.isString(/%$/)&&(r/=100),r}getString(e){return typeof e>\"u\"||this.hasValue()?typeof this.value>\"u\"?\"\":String(this.value):String(e)}getColor(e){var t=this.getString(e);return this.isNormalizedColor||(this.isNormalizedColor=!0,t=h1(t),this.value=t),t}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,\"\")}getPixels(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!this.hasValue())return 0;var[r,i]=typeof e==\"boolean\"?[void 0,e]:[e],{viewPort:n}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(n.computeSize(\"x\"),n.computeSize(\"y\"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(n.computeSize(\"x\"),n.computeSize(\"y\"));case this.isString(/vw$/):return this.getNumber()/100*n.computeSize(\"x\");case this.isString(/vh$/):return this.getNumber()/100*n.computeSize(\"y\");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return this.getNumber()*15;case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case(this.isString(/%$/)&&i):return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*n.computeSize(r);default:{var o=this.getNumber();return t&&o<1?o*n.computeSize(r):o}}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():this.getNumber()*1e3:0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){var e=this.getString(),t=/#([^)'\"]+)/.exec(e);return t&&(t=t[1]),t||(t=e),this.document.definitions[t]}getFillStyleDefinition(e,t){var r=this.getDefinition();if(!r)return null;if(typeof r.createGradient==\"function\")return r.createGradient(this.document.ctx,e,t);if(typeof r.createPattern==\"function\"){if(r.getHrefAttribute().hasValue()){var i=r.getAttribute(\"patternTransform\");r=r.getHrefAttribute().getDefinition(),i.hasValue()&&r.getAttribute(\"patternTransform\",!0).setValue(i.value)}return r.createPattern(this.document.ctx,e,t)}return null}getTextBaseline(){return this.hasValue()?S.textBaselineMapping[this.getString()]:null}addOpacity(e){for(var t=this.getColor(),r=t.length,i=0,n=0;n<r&&(t[n]===\",\"&&i++,i!==3);n++);if(e.hasValue()&&this.isString()&&i!==3){var o=new yi(t);o.ok&&(o.alpha=e.getNumber(),t=o.toRGBA())}return new S(this.document,this.name,t)}}S.textBaselineMapping={baseline:\"alphabetic\",\"before-edge\":\"top\",\"text-before-edge\":\"top\",middle:\"middle\",central:\"middle\",\"after-edge\":\"bottom\",\"text-after-edge\":\"bottom\",ideographic:\"ideographic\",alphabetic:\"alphabetic\",hanging:\"hanging\",mathematical:\"alphabetic\"};class b1{constructor(){this.viewPorts=[]}clear(){this.viewPorts=[]}setCurrent(e,t){this.viewPorts.push({width:e,height:t})}removeCurrent(){this.viewPorts.pop()}getCurrent(){var{viewPorts:e}=this;return e[e.length-1]}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(e){return typeof e==\"number\"?e:e===\"x\"?this.width:e===\"y\"?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}}class k{constructor(e,t){this.x=e,this.y=t}static parse(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,[r=t,i=t]=ne(e);return new k(r,i)}static parseScale(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,[r=t,i=r]=ne(e);return new k(r,i)}static parsePath(e){for(var t=ne(e),r=t.length,i=[],n=0;n<r;n+=2)i.push(new k(t[n],t[n+1]));return i}angleTo(e){return Math.atan2(e.y-this.y,e.x-this.x)}applyTransform(e){var{x:t,y:r}=this,i=t*e[0]+r*e[2]+e[4],n=t*e[1]+r*e[3]+e[5];this.x=i,this.y=n}}class x1{constructor(e){this.screen=e,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}isWorking(){return this.working}start(){if(!this.working){var{screen:e,onClick:t,onMouseMove:r}=this,i=e.ctx.canvas;i.onclick=t,i.onmousemove=r,this.working=!0}}stop(){if(this.working){var e=this.screen.ctx.canvas;this.working=!1,e.onclick=null,e.onmousemove=null}}hasEvents(){return this.working&&this.events.length>0}runEvents(){if(this.working){var{screen:e,events:t,eventElements:r}=this,{style:i}=e.ctx.canvas;i&&(i.cursor=\"\"),t.forEach((n,o)=>{for(var{run:s}=n,u=r[o];u;)s(u),u=u.parent}),this.events=[],this.eventElements=[]}}checkPath(e,t){if(!(!this.working||!t)){var{events:r,eventElements:i}=this;r.forEach((n,o)=>{var{x:s,y:u}=n;!i[o]&&t.isPointInPath&&t.isPointInPath(s,u)&&(i[o]=e)})}}checkBoundingBox(e,t){if(!(!this.working||!t)){var{events:r,eventElements:i}=this;r.forEach((n,o)=>{var{x:s,y:u}=n;!i[o]&&t.isPointInBox(s,u)&&(i[o]=e)})}}mapXY(e,t){for(var{window:r,ctx:i}=this.screen,n=new k(e,t),o=i.canvas;o;)n.x-=o.offsetLeft,n.y-=o.offsetTop,o=o.offsetParent;return r.scrollX&&(n.x+=r.scrollX),r.scrollY&&(n.y+=r.scrollY),n}onClick(e){var{x:t,y:r}=this.mapXY(e.clientX,e.clientY);this.events.push({type:\"onclick\",x:t,y:r,run(i){i.onClick&&i.onClick()}})}onMouseMove(e){var{x:t,y:r}=this.mapXY(e.clientX,e.clientY);this.events.push({type:\"onmousemove\",x:t,y:r,run(i){i.onMouseMove&&i.onMouseMove()}})}}var bl=typeof window<\"u\"?window:null,xl=typeof fetch<\"u\"?fetch.bind(void 0):null;class Dr{constructor(e){var{fetch:t=xl,window:r=bl}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.ctx=e,this.FRAMERATE=30,this.MAX_VIRTUAL_PIXELS=3e4,this.CLIENT_WIDTH=800,this.CLIENT_HEIGHT=600,this.viewPort=new b1,this.mouse=new x1(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=r,this.fetch=t}wait(e){this.waits.push(e)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;var e=this.waits.every(t=>t());return e&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=e,e}setDefaults(e){e.strokeStyle=\"rgba(0,0,0,0)\",e.lineCap=\"butt\",e.lineJoin=\"miter\",e.miterLimit=4}setViewBox(e){var{document:t,ctx:r,aspectRatio:i,width:n,desiredWidth:o,height:s,desiredHeight:u,minX:l=0,minY:h=0,refX:f,refY:c,clip:v=!1,clipX:g=0,clipY:d=0}=e,p=lt(i).replace(/^defer\\s/,\"\"),[y,x]=p.split(\" \"),b=y||\"xMidYMid\",T=x||\"meet\",$=n/o,E=s/u,O=Math.min($,E),C=Math.max($,E),P=o,V=u;T===\"meet\"&&(P*=O,V*=O),T===\"slice\"&&(P*=C,V*=C);var j=new S(t,\"refX\",f),R=new S(t,\"refY\",c),X=j.hasValue()&&R.hasValue();if(X&&r.translate(-O*j.getPixels(\"x\"),-O*R.getPixels(\"y\")),v){var W=O*g,G=O*d;r.beginPath(),r.moveTo(W,G),r.lineTo(n,G),r.lineTo(n,s),r.lineTo(W,s),r.closePath(),r.clip()}if(!X){var q=T===\"meet\"&&O===E,H=T===\"slice\"&&C===E,Q=T===\"meet\"&&O===$,N=T===\"slice\"&&C===$;b.startsWith(\"xMid\")&&(q||H)&&r.translate(n/2-P/2,0),b.endsWith(\"YMid\")&&(Q||N)&&r.translate(0,s/2-V/2),b.startsWith(\"xMax\")&&(q||H)&&r.translate(n-P,0),b.endsWith(\"YMax\")&&(Q||N)&&r.translate(0,s-V)}switch(!0){case b===\"none\":r.scale($,E);break;case T===\"meet\":r.scale(O,O);break;case T===\"slice\":r.scale(C,C);break}r.translate(-l,-h)}start(e){var{enableRedraw:t=!1,ignoreMouse:r=!1,ignoreAnimation:i=!1,ignoreDimensions:n=!1,ignoreClear:o=!1,forceRedraw:s,scaleWidth:u,scaleHeight:l,offsetX:h,offsetY:f}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{FRAMERATE:c,mouse:v}=this,g=1e3/c;if(this.frameDuration=g,this.readyPromise=new Promise(b=>{this.resolveReady=b}),this.isReady()&&this.render(e,n,o,u,l,h,f),!!t){var d=Date.now(),p=d,y=0,x=()=>{d=Date.now(),y=d-p,y>=g&&(p=d-y%g,this.shouldUpdate(i,s)&&(this.render(e,n,o,u,l,h,f),v.runEvents())),this.intervalId=Fa(x)};r||v.start(),this.intervalId=Fa(x)}}stop(){this.intervalId&&(Fa.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(e,t){if(!e){var{frameDuration:r}=this,i=this.animations.reduce((n,o)=>o.update(r)||n,!1);if(i)return!0}return!!(typeof t==\"function\"&&t()||!this.isReadyLock&&this.isReady()||this.mouse.hasEvents())}render(e,t,r,i,n,o,s){var{CLIENT_WIDTH:u,CLIENT_HEIGHT:l,viewPort:h,ctx:f,isFirstRender:c}=this,v=f.canvas;h.clear(),v.width&&v.height?h.setCurrent(v.width,v.height):h.setCurrent(u,l);var g=e.getStyle(\"width\"),d=e.getStyle(\"height\");!t&&(c||typeof i!=\"number\"&&typeof n!=\"number\")&&(g.hasValue()&&(v.width=g.getPixels(\"x\"),v.style&&(v.style.width=\"\".concat(v.width,\"px\"))),d.hasValue()&&(v.height=d.getPixels(\"y\"),v.style&&(v.style.height=\"\".concat(v.height,\"px\"))));var p=v.clientWidth||v.width,y=v.clientHeight||v.height;if(t&&g.hasValue()&&d.hasValue()&&(p=g.getPixels(\"x\"),y=d.getPixels(\"y\")),h.setCurrent(p,y),typeof o==\"number\"&&e.getAttribute(\"x\",!0).setValue(o),typeof s==\"number\"&&e.getAttribute(\"y\",!0).setValue(s),typeof i==\"number\"||typeof n==\"number\"){var x=ne(e.getAttribute(\"viewBox\").getString()),b=0,T=0;if(typeof i==\"number\"){var $=e.getStyle(\"width\");$.hasValue()?b=$.getPixels(\"x\")/i:isNaN(x[2])||(b=x[2]/i)}if(typeof n==\"number\"){var E=e.getStyle(\"height\");E.hasValue()?T=E.getPixels(\"y\")/n:isNaN(x[3])||(T=x[3]/n)}b||(b=T),T||(T=b),e.getAttribute(\"width\",!0).setValue(i),e.getAttribute(\"height\",!0).setValue(n);var O=e.getStyle(\"transform\",!0,!0);O.setValue(\"\".concat(O.getString(),\" scale(\").concat(1/b,\", \").concat(1/T,\")\"))}r||f.clearRect(0,0,p,y),e.render(f),c&&(this.isFirstRender=!1)}}Dr.defaultWindow=bl;Dr.defaultFetch=xl;var{defaultFetch:T1}=Dr,O1=typeof DOMParser<\"u\"?DOMParser:null;class za{constructor(){var{fetch:e=T1,DOMParser:t=O1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fetch=e,this.DOMParser=t}parse(e){var t=this;return xe(function*(){return e.startsWith(\"<\")?t.parseFromString(e):t.load(e)})()}parseFromString(e){var t=new this.DOMParser;try{return this.checkDocument(t.parseFromString(e,\"image/svg+xml\"))}catch{return this.checkDocument(t.parseFromString(e,\"text/xml\"))}}checkDocument(e){var t=e.getElementsByTagName(\"parsererror\")[0];if(t)throw new Error(t.textContent);return e}load(e){var t=this;return xe(function*(){var r=yield t.fetch(e),i=yield r.text();return t.parseFromString(i)})()}}class S1{constructor(e,t){this.type=\"translate\",this.point=null,this.point=k.parse(t)}apply(e){var{x:t,y:r}=this.point;e.translate(t||0,r||0)}unapply(e){var{x:t,y:r}=this.point;e.translate(-1*t||0,-1*r||0)}applyToPoint(e){var{x:t,y:r}=this.point;e.applyTransform([1,0,0,1,t||0,r||0])}}class E1{constructor(e,t,r){this.type=\"rotate\",this.angle=null,this.originX=null,this.originY=null,this.cx=0,this.cy=0;var i=ne(t);this.angle=new S(e,\"angle\",i[0]),this.originX=r[0],this.originY=r[1],this.cx=i[1]||0,this.cy=i[2]||0}apply(e){var{cx:t,cy:r,originX:i,originY:n,angle:o}=this,s=t+i.getPixels(\"x\"),u=r+n.getPixels(\"y\");e.translate(s,u),e.rotate(o.getRadians()),e.translate(-s,-u)}unapply(e){var{cx:t,cy:r,originX:i,originY:n,angle:o}=this,s=t+i.getPixels(\"x\"),u=r+n.getPixels(\"y\");e.translate(s,u),e.rotate(-1*o.getRadians()),e.translate(-s,-u)}applyToPoint(e){var{cx:t,cy:r,angle:i}=this,n=i.getRadians();e.applyTransform([1,0,0,1,t||0,r||0]),e.applyTransform([Math.cos(n),Math.sin(n),-Math.sin(n),Math.cos(n),0,0]),e.applyTransform([1,0,0,1,-t||0,-r||0])}}class $1{constructor(e,t,r){this.type=\"scale\",this.scale=null,this.originX=null,this.originY=null;var i=k.parseScale(t);(i.x===0||i.y===0)&&(i.x=rt,i.y=rt),this.scale=i,this.originX=r[0],this.originY=r[1]}apply(e){var{scale:{x:t,y:r},originX:i,originY:n}=this,o=i.getPixels(\"x\"),s=n.getPixels(\"y\");e.translate(o,s),e.scale(t,r||t),e.translate(-o,-s)}unapply(e){var{scale:{x:t,y:r},originX:i,originY:n}=this,o=i.getPixels(\"x\"),s=n.getPixels(\"y\");e.translate(o,s),e.scale(1/t,1/r||t),e.translate(-o,-s)}applyToPoint(e){var{x:t,y:r}=this.scale;e.applyTransform([t||0,0,0,r||0,0,0])}}class Tl{constructor(e,t,r){this.type=\"matrix\",this.matrix=[],this.originX=null,this.originY=null,this.matrix=ne(t),this.originX=r[0],this.originY=r[1]}apply(e){var{originX:t,originY:r,matrix:i}=this,n=t.getPixels(\"x\"),o=r.getPixels(\"y\");e.translate(n,o),e.transform(i[0],i[1],i[2],i[3],i[4],i[5]),e.translate(-n,-o)}unapply(e){var{originX:t,originY:r,matrix:i}=this,n=i[0],o=i[2],s=i[4],u=i[1],l=i[3],h=i[5],f=0,c=0,v=1,g=1/(n*(l*v-h*c)-o*(u*v-h*f)+s*(u*c-l*f)),d=t.getPixels(\"x\"),p=r.getPixels(\"y\");e.translate(d,p),e.transform(g*(l*v-h*c),g*(h*f-u*v),g*(s*c-o*v),g*(n*v-s*f),g*(o*h-s*l),g*(s*u-n*h)),e.translate(-d,-p)}applyToPoint(e){e.applyTransform(this.matrix)}}class Ol extends Tl{constructor(e,t,r){super(e,t,r),this.type=\"skew\",this.angle=null,this.angle=new S(e,\"angle\",t)}}class w1 extends Ol{constructor(e,t,r){super(e,t,r),this.type=\"skewX\",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}}class C1 extends Ol{constructor(e,t,r){super(e,t,r),this.type=\"skewY\",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}}function A1(a){return lt(a).trim().replace(/\\)([a-zA-Z])/g,\") $1\").replace(/\\)(\\s?,\\s?)/g,\") \").split(/\\s(?=[a-z])/)}function P1(a){var[e,t]=a.split(\"(\");return[e.trim(),t.trim().replace(\")\",\"\")]}class Be{constructor(e,t,r){this.document=e,this.transforms=[];var i=A1(t);i.forEach(n=>{if(n!==\"none\"){var[o,s]=P1(n),u=Be.transformTypes[o];typeof u<\"u\"&&this.transforms.push(new u(this.document,s,r))}})}static fromElement(e,t){var r=t.getStyle(\"transform\",!1,!0),[i,n=i]=t.getStyle(\"transform-origin\",!1,!0).split(),o=[i,n];return r.hasValue()?new Be(e,r.getString(),o):null}apply(e){for(var{transforms:t}=this,r=t.length,i=0;i<r;i++)t[i].apply(e)}unapply(e){for(var{transforms:t}=this,r=t.length,i=r-1;i>=0;i--)t[i].unapply(e)}applyToPoint(e){for(var{transforms:t}=this,r=t.length,i=0;i<r;i++)t[i].applyToPoint(e)}}Be.transformTypes={translate:S1,rotate:E1,scale:$1,matrix:Tl,skewX:w1,skewY:C1};class I{constructor(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(this.document=e,this.node=t,this.captureTextNodes=r,this.attributes=Object.create(null),this.styles=Object.create(null),this.stylesSpecificity=Object.create(null),this.animationFrozen=!1,this.animationFrozenValue=\"\",this.parent=null,this.children=[],!(!t||t.nodeType!==1)){if(Array.from(t.attributes).forEach(s=>{var u=l1(s.nodeName);this.attributes[u]=new S(e,u,s.value)}),this.addStylesFromStyleDefinition(),this.getAttribute(\"style\").hasValue()){var i=this.getAttribute(\"style\").getString().split(\";\").map(s=>s.trim());i.forEach(s=>{if(s){var[u,l]=s.split(\":\").map(h=>h.trim());this.styles[u]=new S(e,u,l)}})}var{definitions:n}=e,o=this.getAttribute(\"id\");o.hasValue()&&(n[o.getString()]||(n[o.getString()]=this)),Array.from(t.childNodes).forEach(s=>{if(s.nodeType===1)this.addChild(s);else if(r&&(s.nodeType===3||s.nodeType===4)){var u=e.createTextNode(s);u.getText().length>0&&this.addChild(u)}})}}getAttribute(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=this.attributes[e];if(!r&&t){var i=new S(this.document,e,\"\");return this.attributes[e]=i,i}return r||S.empty(this.document)}getHrefAttribute(){for(var e in this.attributes)if(e===\"href\"||e.endsWith(\":href\"))return this.attributes[e];return S.empty(this.document)}getStyle(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=this.styles[e];if(i)return i;var n=this.getAttribute(e);if(n!=null&&n.hasValue())return this.styles[e]=n,n;if(!r){var{parent:o}=this;if(o){var s=o.getStyle(e);if(s!=null&&s.hasValue())return s}}if(t){var u=new S(this.document,e,\"\");return this.styles[e]=u,u}return i||S.empty(this.document)}render(e){if(!(this.getStyle(\"display\").getString()===\"none\"||this.getStyle(\"visibility\").getString()===\"hidden\")){if(e.save(),this.getStyle(\"mask\").hasValue()){var t=this.getStyle(\"mask\").getDefinition();t&&(this.applyEffects(e),t.apply(e,this))}else if(this.getStyle(\"filter\").getValue(\"none\")!==\"none\"){var r=this.getStyle(\"filter\").getDefinition();r&&(this.applyEffects(e),r.apply(e,this))}else this.setContext(e),this.renderChildren(e),this.clearContext(e);e.restore()}}setContext(e){}applyEffects(e){var t=Be.fromElement(this.document,this);t&&t.apply(e);var r=this.getStyle(\"clip-path\",!1,!0);if(r.hasValue()){var i=r.getDefinition();i&&i.apply(e)}}clearContext(e){}renderChildren(e){this.children.forEach(t=>{t.render(e)})}addChild(e){var t=e instanceof I?e:this.document.createElement(e);t.parent=this,I.ignoreChildTypes.includes(t.type)||this.children.push(t)}matchesSelector(e){var t,{node:r}=this;if(typeof r.matches==\"function\")return r.matches(e);var i=(t=r.getAttribute)===null||t===void 0?void 0:t.call(r,\"class\");return!i||i===\"\"?!1:i.split(\" \").some(n=>\".\".concat(n)===e)}addStylesFromStyleDefinition(){var{styles:e,stylesSpecificity:t}=this.document;for(var r in e)if(!r.startsWith(\"@\")&&this.matchesSelector(r)){var i=e[r],n=t[r];if(i)for(var o in i){var s=this.stylesSpecificity[o];typeof s>\"u\"&&(s=\"000\"),n>=s&&(this.styles[o]=i[o],this.stylesSpecificity[o]=n)}}}removeStyles(e,t){var r=t.reduce((i,n)=>{var o=e.getStyle(n);if(!o.hasValue())return i;var s=o.getString();return o.setValue(\"\"),[...i,[n,s]]},[]);return r}restoreStyles(e,t){t.forEach(r=>{var[i,n]=r;e.getStyle(i,!0).setValue(n)})}isFirstChild(){var e;return((e=this.parent)===null||e===void 0?void 0:e.children.indexOf(this))===0}}I.ignoreChildTypes=[\"title\"];class R1 extends I{constructor(e,t,r){super(e,t,r)}}function N1(a){var e=a.trim();return/^('|\")/.test(e)?e:'\"'.concat(e,'\"')}function I1(a){return typeof process>\"u\"?a:a.trim().split(\",\").map(N1).join(\",\")}function M1(a){if(!a)return\"\";var e=a.trim().toLowerCase();switch(e){case\"normal\":case\"italic\":case\"oblique\":case\"inherit\":case\"initial\":case\"unset\":return e;default:return/^oblique\\s+(-|)\\d+deg$/.test(e)?e:\"\"}}function _1(a){if(!a)return\"\";var e=a.trim().toLowerCase();switch(e){case\"normal\":case\"bold\":case\"lighter\":case\"bolder\":case\"inherit\":case\"initial\":case\"unset\":return e;default:return/^[\\d.]+$/.test(e)?e:\"\"}}class Z{constructor(e,t,r,i,n,o){var s=o?typeof o==\"string\"?Z.parse(o):o:{};this.fontFamily=n||s.fontFamily,this.fontSize=i||s.fontSize,this.fontStyle=e||s.fontStyle,this.fontWeight=r||s.fontWeight,this.fontVariant=t||s.fontVariant}static parse(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:\"\",t=arguments.length>1?arguments[1]:void 0,r=\"\",i=\"\",n=\"\",o=\"\",s=\"\",u=lt(e).trim().split(\" \"),l={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return u.forEach(h=>{switch(!0){case(!l.fontStyle&&Z.styles.includes(h)):h!==\"inherit\"&&(r=h),l.fontStyle=!0;break;case(!l.fontVariant&&Z.variants.includes(h)):h!==\"inherit\"&&(i=h),l.fontStyle=!0,l.fontVariant=!0;break;case(!l.fontWeight&&Z.weights.includes(h)):h!==\"inherit\"&&(n=h),l.fontStyle=!0,l.fontVariant=!0,l.fontWeight=!0;break;case!l.fontSize:h!==\"inherit\"&&([o]=h.split(\"/\")),l.fontStyle=!0,l.fontVariant=!0,l.fontWeight=!0,l.fontSize=!0;break;default:h!==\"inherit\"&&(s+=h)}}),new Z(r,i,n,o,s,t)}toString(){return[M1(this.fontStyle),this.fontVariant,_1(this.fontWeight),this.fontSize,I1(this.fontFamily)].join(\" \").trim()}}Z.styles=\"normal|italic|oblique|inherit\";Z.variants=\"normal|small-caps|inherit\";Z.weights=\"normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit\";class ce{constructor(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.NaN,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.NaN,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Number.NaN,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Number.NaN;this.x1=e,this.y1=t,this.x2=r,this.y2=i,this.addPoint(e,t),this.addPoint(r,i)}get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(e,t){typeof e<\"u\"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),typeof t<\"u\"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))}addX(e){this.addPoint(e,null)}addY(e){this.addPoint(null,e)}addBoundingBox(e){if(e){var{x1:t,y1:r,x2:i,y2:n}=e;this.addPoint(t,r),this.addPoint(i,n)}}sumCubic(e,t,r,i,n){return Math.pow(1-e,3)*t+3*Math.pow(1-e,2)*e*r+3*(1-e)*Math.pow(e,2)*i+Math.pow(e,3)*n}bezierCurveAdd(e,t,r,i,n){var o=6*t-12*r+6*i,s=-3*t+9*r-9*i+3*n,u=3*r-3*t;if(s===0){if(o===0)return;var l=-u/o;0<l&&l<1&&(e?this.addX(this.sumCubic(l,t,r,i,n)):this.addY(this.sumCubic(l,t,r,i,n)));return}var h=Math.pow(o,2)-4*u*s;if(!(h<0)){var f=(-o+Math.sqrt(h))/(2*s);0<f&&f<1&&(e?this.addX(this.sumCubic(f,t,r,i,n)):this.addY(this.sumCubic(f,t,r,i,n)));var c=(-o-Math.sqrt(h))/(2*s);0<c&&c<1&&(e?this.addX(this.sumCubic(c,t,r,i,n)):this.addY(this.sumCubic(c,t,r,i,n)))}}addBezierCurve(e,t,r,i,n,o,s,u){this.addPoint(e,t),this.addPoint(s,u),this.bezierCurveAdd(!0,e,r,n,s),this.bezierCurveAdd(!1,t,i,o,u)}addQuadraticCurve(e,t,r,i,n,o){var s=e+.6666666666666666*(r-e),u=t+2/3*(i-t),l=s+1/3*(n-e),h=u+1/3*(o-t);this.addBezierCurve(e,t,s,l,u,h,n,o)}isPointInBox(e,t){var{x1:r,y1:i,x2:n,y2:o}=this;return r<=e&&e<=n&&i<=t&&t<=o}}class w extends m{constructor(e){super(e.replace(/([+\\-.])\\s+/gm,\"$1\").replace(/[^MmZzLlHhVvCcSsQqTtAae\\d\\s.,+-].*/g,\"\")),this.control=null,this.start=null,this.current=null,this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new k(0,0),this.control=new k(0,0),this.current=new k(0,0),this.points=[],this.angles=[]}isEnd(){var{i:e,commands:t}=this;return e>=t.length-1}next(){var e=this.commands[++this.i];return this.previousCommand=this.command,this.command=e,e}getPoint(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:\"x\",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:\"y\",r=new k(this.command[e],this.command[t]);return this.makeAbsolute(r)}getAsControlPoint(e,t){var r=this.getPoint(e,t);return this.control=r,r}getAsCurrentPoint(e,t){var r=this.getPoint(e,t);return this.current=r,r}getReflectedControlPoint(){var e=this.previousCommand.type;if(e!==m.CURVE_TO&&e!==m.SMOOTH_CURVE_TO&&e!==m.QUAD_TO&&e!==m.SMOOTH_QUAD_TO)return this.current;var{current:{x:t,y:r},control:{x:i,y:n}}=this,o=new k(2*t-i,2*r-n);return o}makeAbsolute(e){if(this.command.relative){var{x:t,y:r}=this.current;e.x+=t,e.y+=r}return e}addMarker(e,t,r){var{points:i,angles:n}=this;r&&n.length>0&&!n[n.length-1]&&(n[n.length-1]=i[i.length-1].angleTo(r)),this.addMarkerAngle(e,t?t.angleTo(e):null)}addMarkerAngle(e,t){this.points.push(e),this.angles.push(t)}getMarkerPoints(){return this.points}getMarkerAngles(){for(var{angles:e}=this,t=e.length,r=0;r<t;r++)if(!e[r]){for(var i=r+1;i<t;i++)if(e[i]){e[r]=e[i];break}}return e}}class Ge extends I{constructor(){super(...arguments),this.modifiedEmSizeStack=!1}calculateOpacity(){for(var e=1,t=this;t;){var r=t.getStyle(\"opacity\",!1,!0);r.hasValue(!0)&&(e*=r.getNumber()),t=t.parent}return e}setContext(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!t){var r=this.getStyle(\"fill\"),i=this.getStyle(\"fill-opacity\"),n=this.getStyle(\"stroke\"),o=this.getStyle(\"stroke-opacity\");if(r.isUrlDefinition()){var s=r.getFillStyleDefinition(this,i);s&&(e.fillStyle=s)}else if(r.hasValue()){r.getString()===\"currentColor\"&&r.setValue(this.getStyle(\"color\").getColor());var u=r.getColor();u!==\"inherit\"&&(e.fillStyle=u===\"none\"?\"rgba(0,0,0,0)\":u)}if(i.hasValue()){var l=new S(this.document,\"fill\",e.fillStyle).addOpacity(i).getColor();e.fillStyle=l}if(n.isUrlDefinition()){var h=n.getFillStyleDefinition(this,o);h&&(e.strokeStyle=h)}else if(n.hasValue()){n.getString()===\"currentColor\"&&n.setValue(this.getStyle(\"color\").getColor());var f=n.getString();f!==\"inherit\"&&(e.strokeStyle=f===\"none\"?\"rgba(0,0,0,0)\":f)}if(o.hasValue()){var c=new S(this.document,\"stroke\",e.strokeStyle).addOpacity(o).getString();e.strokeStyle=c}var v=this.getStyle(\"stroke-width\");if(v.hasValue()){var g=v.getPixels();e.lineWidth=g||rt}var d=this.getStyle(\"stroke-linecap\"),p=this.getStyle(\"stroke-linejoin\"),y=this.getStyle(\"stroke-miterlimit\"),x=this.getStyle(\"stroke-dasharray\"),b=this.getStyle(\"stroke-dashoffset\");if(d.hasValue()&&(e.lineCap=d.getString()),p.hasValue()&&(e.lineJoin=p.getString()),y.hasValue()&&(e.miterLimit=y.getNumber()),x.hasValue()&&x.getString()!==\"none\"){var T=ne(x.getString());typeof e.setLineDash<\"u\"?e.setLineDash(T):typeof e.webkitLineDash<\"u\"?e.webkitLineDash=T:typeof e.mozDash<\"u\"&&!(T.length===1&&T[0]===0)&&(e.mozDash=T);var $=b.getPixels();typeof e.lineDashOffset<\"u\"?e.lineDashOffset=$:typeof e.webkitLineDashOffset<\"u\"?e.webkitLineDashOffset=$:typeof e.mozDashOffset<\"u\"&&(e.mozDashOffset=$)}}if(this.modifiedEmSizeStack=!1,typeof e.font<\"u\"){var E=this.getStyle(\"font\"),O=this.getStyle(\"font-style\"),C=this.getStyle(\"font-variant\"),P=this.getStyle(\"font-weight\"),V=this.getStyle(\"font-size\"),j=this.getStyle(\"font-family\"),R=new Z(O.getString(),C.getString(),P.getString(),V.hasValue()?\"\".concat(V.getPixels(!0),\"px\"):\"\",j.getString(),Z.parse(E.getString(),e.font));O.setValue(R.fontStyle),C.setValue(R.fontVariant),P.setValue(R.fontWeight),V.setValue(R.fontSize),j.setValue(R.fontFamily),e.font=R.toString(),V.isPixels()&&(this.document.emSize=V.getPixels(),this.modifiedEmSizeStack=!0)}t||(this.applyEffects(e),e.globalAlpha=this.calculateOpacity())}clearContext(e){super.clearContext(e),this.modifiedEmSizeStack&&this.document.popEmSize()}}class A extends Ge{constructor(e,t,r){super(e,t,r),this.type=\"path\",this.pathParser=null,this.pathParser=new w(this.getAttribute(\"d\").getString())}path(e){var{pathParser:t}=this,r=new ce;for(t.reset(),e&&e.beginPath();!t.isEnd();)switch(t.next().type){case w.MOVE_TO:this.pathM(e,r);break;case w.LINE_TO:this.pathL(e,r);break;case w.HORIZ_LINE_TO:this.pathH(e,r);break;case w.VERT_LINE_TO:this.pathV(e,r);break;case w.CURVE_TO:this.pathC(e,r);break;case w.SMOOTH_CURVE_TO:this.pathS(e,r);break;case w.QUAD_TO:this.pathQ(e,r);break;case w.SMOOTH_QUAD_TO:this.pathT(e,r);break;case w.ARC:this.pathA(e,r);break;case w.CLOSE_PATH:this.pathZ(e,r);break}return r}getBoundingBox(e){return this.path()}getMarkers(){var{pathParser:e}=this,t=e.getMarkerPoints(),r=e.getMarkerAngles(),i=t.map((n,o)=>[n,r[o]]);return i}renderChildren(e){this.path(e),this.document.screen.mouse.checkPath(this,e);var t=this.getStyle(\"fill-rule\");e.fillStyle!==\"\"&&(t.getString(\"inherit\")!==\"inherit\"?e.fill(t.getString()):e.fill()),e.strokeStyle!==\"\"&&(this.getAttribute(\"vector-effect\").getString()===\"non-scaling-stroke\"?(e.save(),e.setTransform(1,0,0,1,0,0),e.stroke(),e.restore()):e.stroke());var r=this.getMarkers();if(r){var i=r.length-1,n=this.getStyle(\"marker-start\"),o=this.getStyle(\"marker-mid\"),s=this.getStyle(\"marker-end\");if(n.isUrlDefinition()){var u=n.getDefinition(),[l,h]=r[0];u.render(e,l,h)}if(o.isUrlDefinition())for(var f=o.getDefinition(),c=1;c<i;c++){var[v,g]=r[c];f.render(e,v,g)}if(s.isUrlDefinition()){var d=s.getDefinition(),[p,y]=r[i];d.render(e,p,y)}}}static pathM(e){var t=e.getAsCurrentPoint();return e.start=e.current,{point:t}}pathM(e,t){var{pathParser:r}=this,{point:i}=A.pathM(r),{x:n,y:o}=i;r.addMarker(i),t.addPoint(n,o),e&&e.moveTo(n,o)}static pathL(e){var{current:t}=e,r=e.getAsCurrentPoint();return{current:t,point:r}}pathL(e,t){var{pathParser:r}=this,{current:i,point:n}=A.pathL(r),{x:o,y:s}=n;r.addMarker(n,i),t.addPoint(o,s),e&&e.lineTo(o,s)}static pathH(e){var{current:t,command:r}=e,i=new k((r.relative?t.x:0)+r.x,t.y);return e.current=i,{current:t,point:i}}pathH(e,t){var{pathParser:r}=this,{current:i,point:n}=A.pathH(r),{x:o,y:s}=n;r.addMarker(n,i),t.addPoint(o,s),e&&e.lineTo(o,s)}static pathV(e){var{current:t,command:r}=e,i=new k(t.x,(r.relative?t.y:0)+r.y);return e.current=i,{current:t,point:i}}pathV(e,t){var{pathParser:r}=this,{current:i,point:n}=A.pathV(r),{x:o,y:s}=n;r.addMarker(n,i),t.addPoint(o,s),e&&e.lineTo(o,s)}static pathC(e){var{current:t}=e,r=e.getPoint(\"x1\",\"y1\"),i=e.getAsControlPoint(\"x2\",\"y2\"),n=e.getAsCurrentPoint();return{current:t,point:r,controlPoint:i,currentPoint:n}}pathC(e,t){var{pathParser:r}=this,{current:i,point:n,controlPoint:o,currentPoint:s}=A.pathC(r);r.addMarker(s,o,n),t.addBezierCurve(i.x,i.y,n.x,n.y,o.x,o.y,s.x,s.y),e&&e.bezierCurveTo(n.x,n.y,o.x,o.y,s.x,s.y)}static pathS(e){var{current:t}=e,r=e.getReflectedControlPoint(),i=e.getAsControlPoint(\"x2\",\"y2\"),n=e.getAsCurrentPoint();return{current:t,point:r,controlPoint:i,currentPoint:n}}pathS(e,t){var{pathParser:r}=this,{current:i,point:n,controlPoint:o,currentPoint:s}=A.pathS(r);r.addMarker(s,o,n),t.addBezierCurve(i.x,i.y,n.x,n.y,o.x,o.y,s.x,s.y),e&&e.bezierCurveTo(n.x,n.y,o.x,o.y,s.x,s.y)}static pathQ(e){var{current:t}=e,r=e.getAsControlPoint(\"x1\",\"y1\"),i=e.getAsCurrentPoint();return{current:t,controlPoint:r,currentPoint:i}}pathQ(e,t){var{pathParser:r}=this,{current:i,controlPoint:n,currentPoint:o}=A.pathQ(r);r.addMarker(o,n,n),t.addQuadraticCurve(i.x,i.y,n.x,n.y,o.x,o.y),e&&e.quadraticCurveTo(n.x,n.y,o.x,o.y)}static pathT(e){var{current:t}=e,r=e.getReflectedControlPoint();e.control=r;var i=e.getAsCurrentPoint();return{current:t,controlPoint:r,currentPoint:i}}pathT(e,t){var{pathParser:r}=this,{current:i,controlPoint:n,currentPoint:o}=A.pathT(r);r.addMarker(o,n,n),t.addQuadraticCurve(i.x,i.y,n.x,n.y,o.x,o.y),e&&e.quadraticCurveTo(n.x,n.y,o.x,o.y)}static pathA(e){var{current:t,command:r}=e,{rX:i,rY:n,xRot:o,lArcFlag:s,sweepFlag:u}=r,l=o*(Math.PI/180),h=e.getAsCurrentPoint(),f=new k(Math.cos(l)*(t.x-h.x)/2+Math.sin(l)*(t.y-h.y)/2,-Math.sin(l)*(t.x-h.x)/2+Math.cos(l)*(t.y-h.y)/2),c=Math.pow(f.x,2)/Math.pow(i,2)+Math.pow(f.y,2)/Math.pow(n,2);c>1&&(i*=Math.sqrt(c),n*=Math.sqrt(c));var v=(s===u?-1:1)*Math.sqrt((Math.pow(i,2)*Math.pow(n,2)-Math.pow(i,2)*Math.pow(f.y,2)-Math.pow(n,2)*Math.pow(f.x,2))/(Math.pow(i,2)*Math.pow(f.y,2)+Math.pow(n,2)*Math.pow(f.x,2)));isNaN(v)&&(v=0);var g=new k(v*i*f.y/n,v*-n*f.x/i),d=new k((t.x+h.x)/2+Math.cos(l)*g.x-Math.sin(l)*g.y,(t.y+h.y)/2+Math.sin(l)*g.x+Math.cos(l)*g.y),p=$o([1,0],[(f.x-g.x)/i,(f.y-g.y)/n]),y=[(f.x-g.x)/i,(f.y-g.y)/n],x=[(-f.x-g.x)/i,(-f.y-g.y)/n],b=$o(y,x);return xi(y,x)<=-1&&(b=Math.PI),xi(y,x)>=1&&(b=0),{currentPoint:h,rX:i,rY:n,sweepFlag:u,xAxisRotation:l,centp:d,a1:p,ad:b}}pathA(e,t){var{pathParser:r}=this,{currentPoint:i,rX:n,rY:o,sweepFlag:s,xAxisRotation:u,centp:l,a1:h,ad:f}=A.pathA(r),c=1-s?1:-1,v=h+c*(f/2),g=new k(l.x+n*Math.cos(v),l.y+o*Math.sin(v));if(r.addMarkerAngle(g,v-c*Math.PI/2),r.addMarkerAngle(i,v-c*Math.PI),t.addPoint(i.x,i.y),e&&!isNaN(h)&&!isNaN(f)){var d=n>o?n:o,p=n>o?1:n/o,y=n>o?o/n:1;e.translate(l.x,l.y),e.rotate(u),e.scale(p,y),e.arc(0,0,d,h,h+f,!!(1-s)),e.scale(1/p,1/y),e.rotate(-u),e.translate(-l.x,-l.y)}}static pathZ(e){e.current=e.start}pathZ(e,t){A.pathZ(this.pathParser),e&&t.x1!==t.x2&&t.y1!==t.y2&&e.closePath()}}class Sl extends A{constructor(e,t,r){super(e,t,r),this.type=\"glyph\",this.horizAdvX=this.getAttribute(\"horiz-adv-x\").getNumber(),this.unicode=this.getAttribute(\"unicode\").getString(),this.arabicForm=this.getAttribute(\"arabic-form\").getString()}}class Ce extends Ge{constructor(e,t,r){super(e,t,new.target===Ce?!0:r),this.type=\"text\",this.x=0,this.y=0,this.measureCache=-1}setContext(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.setContext(e,t);var r=this.getStyle(\"dominant-baseline\").getTextBaseline()||this.getStyle(\"alignment-baseline\").getTextBaseline();r&&(e.textBaseline=r)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(e){if(this.type!==\"text\")return this.getTElementBoundingBox(e);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(e);var t=null;return this.children.forEach((r,i)=>{var n=this.getChildBoundingBox(e,this,this,i);t?t.addBoundingBox(n):t=n}),t}getFontSize(){var{document:e,parent:t}=this,r=Z.parse(e.ctx.font).fontSize,i=t.getStyle(\"font-size\").getNumber(r);return i}getTElementBoundingBox(e){var t=this.getFontSize();return new ce(this.x,this.y-t,this.x+this.measureText(e),this.y)}getGlyph(e,t,r){var i=t[r],n=null;if(e.isArabic){var o=t.length,s=t[r-1],u=t[r+1],l=\"isolated\";if((r===0||s===\" \")&&r<o-1&&u!==\" \"&&(l=\"terminal\"),r>0&&s!==\" \"&&r<o-1&&u!==\" \"&&(l=\"medial\"),r>0&&s!==\" \"&&(r===o-1||u===\" \")&&(l=\"initial\"),typeof e.glyphs[i]<\"u\"){var h=e.glyphs[i];n=h instanceof Sl?h:h[l]}}else n=e.glyphs[i];return n||(n=e.missingGlyph),n}getText(){return\"\"}getTextFromNode(e){var t=e||this.node,r=Array.from(t.parentNode.childNodes),i=r.indexOf(t),n=r.length-1,o=lt(t.textContent||\"\");return i===0&&(o=s1(o)),i===n&&(o=o1(o)),o}renderChildren(e){if(this.type!==\"text\"){this.renderTElementChildren(e);return}this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(e),this.children.forEach((r,i)=>{this.renderChild(e,this,this,i)});var{mouse:t}=this.document.screen;t.isWorking()&&t.checkBoundingBox(this,this.getBoundingBox(e))}renderTElementChildren(e){var{document:t,parent:r}=this,i=this.getText(),n=r.getStyle(\"font-family\").getDefinition();if(n){for(var{unitsPerEm:o}=n.fontFace,s=Z.parse(t.ctx.font),u=r.getStyle(\"font-size\").getNumber(s.fontSize),l=r.getStyle(\"font-style\").getString(s.fontStyle),h=u/o,f=n.isRTL?i.split(\"\").reverse().join(\"\"):i,c=ne(r.getAttribute(\"dx\").getString()),v=f.length,g=0;g<v;g++){var d=this.getGlyph(n,f,g);e.translate(this.x,this.y),e.scale(h,-h);var p=e.lineWidth;e.lineWidth=e.lineWidth*o/u,l===\"italic\"&&e.transform(1,0,.4,1,0,0),d.render(e),l===\"italic\"&&e.transform(1,0,-.4,1,0,0),e.lineWidth=p,e.scale(1/h,-1/h),e.translate(-this.x,-this.y),this.x+=u*(d.horizAdvX||n.horizAdvX)/o,typeof c[g]<\"u\"&&!isNaN(c[g])&&(this.x+=c[g])}return}var{x:y,y:x}=this;e.fillStyle&&e.fillText(i,y,x),e.strokeStyle&&e.strokeText(i,y,x)}applyAnchoring(){if(!(this.textChunkStart>=this.leafTexts.length)){var e=this.leafTexts[this.textChunkStart],t=e.getStyle(\"text-anchor\").getString(\"start\"),r=!1,i=0;t===\"start\"&&!r||t===\"end\"&&r?i=e.x-this.minX:t===\"end\"&&!r||t===\"start\"&&r?i=e.x-this.maxX:i=e.x-(this.minX+this.maxX)/2;for(var n=this.textChunkStart;n<this.leafTexts.length;n++)this.leafTexts[n].x+=i;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}}adjustChildCoordinatesRecursive(e){this.children.forEach((t,r)=>{this.adjustChildCoordinatesRecursiveCore(e,this,this,r)}),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(e,t,r,i){var n=r.children[i];n.children.length>0?n.children.forEach((o,s)=>{t.adjustChildCoordinatesRecursiveCore(e,t,n,s)}):this.adjustChildCoordinates(e,t,r,i)}adjustChildCoordinates(e,t,r,i){var n=r.children[i];if(typeof n.measureText!=\"function\")return n;e.save(),n.setContext(e,!0);var o=n.getAttribute(\"x\"),s=n.getAttribute(\"y\"),u=n.getAttribute(\"dx\"),l=n.getAttribute(\"dy\"),h=n.getStyle(\"font-family\").getDefinition(),f=!!h&&h.isRTL;i===0&&(o.hasValue()||o.setValue(n.getInheritedAttribute(\"x\")),s.hasValue()||s.setValue(n.getInheritedAttribute(\"y\")),u.hasValue()||u.setValue(n.getInheritedAttribute(\"dx\")),l.hasValue()||l.setValue(n.getInheritedAttribute(\"dy\")));var c=n.measureText(e);return f&&(t.x-=c),o.hasValue()?(t.applyAnchoring(),n.x=o.getPixels(\"x\"),u.hasValue()&&(n.x+=u.getPixels(\"x\"))):(u.hasValue()&&(t.x+=u.getPixels(\"x\")),n.x=t.x),t.x=n.x,f||(t.x+=c),s.hasValue()?(n.y=s.getPixels(\"y\"),l.hasValue()&&(n.y+=l.getPixels(\"y\"))):(l.hasValue()&&(t.y+=l.getPixels(\"y\")),n.y=t.y),t.y=n.y,t.leafTexts.push(n),t.minX=Math.min(t.minX,n.x,n.x+c),t.maxX=Math.max(t.maxX,n.x,n.x+c),n.clearContext(e),e.restore(),n}getChildBoundingBox(e,t,r,i){var n=r.children[i];if(typeof n.getBoundingBox!=\"function\")return null;var o=n.getBoundingBox(e);return o?(n.children.forEach((s,u)=>{var l=t.getChildBoundingBox(e,t,n,u);o.addBoundingBox(l)}),o):null}renderChild(e,t,r,i){var n=r.children[i];n.render(e),n.children.forEach((o,s)=>{t.renderChild(e,t,n,s)})}measureText(e){var{measureCache:t}=this;if(~t)return t;var r=this.getText(),i=this.measureTargetText(e,r);return this.measureCache=i,i}measureTargetText(e,t){if(!t.length)return 0;var{parent:r}=this,i=r.getStyle(\"font-family\").getDefinition();if(i){for(var n=this.getFontSize(),o=i.isRTL?t.split(\"\").reverse().join(\"\"):t,s=ne(r.getAttribute(\"dx\").getString()),u=o.length,l=0,h=0;h<u;h++){var f=this.getGlyph(i,o,h);l+=(f.horizAdvX||i.horizAdvX)*n/i.fontFace.unitsPerEm,typeof s[h]<\"u\"&&!isNaN(s[h])&&(l+=s[h])}return l}if(!e.measureText)return t.length*10;e.save(),this.setContext(e,!0);var{width:c}=e.measureText(t);return this.clearContext(e),e.restore(),c}getInheritedAttribute(e){for(var t=this;t instanceof Ce&&t.isFirstChild();){var r=t.parent.getAttribute(e);if(r.hasValue(!0))return r.getValue(\"0\");t=t.parent}return null}}class Lr extends Ce{constructor(e,t,r){super(e,t,new.target===Lr?!0:r),this.type=\"tspan\",this.text=this.children.length>0?\"\":this.getTextFromNode()}getText(){return this.text}}class V1 extends Lr{constructor(){super(...arguments),this.type=\"textNode\"}}class Nt extends Ge{constructor(){super(...arguments),this.type=\"svg\",this.root=!1}setContext(e){var t,{document:r}=this,{screen:i,window:n}=r,o=e.canvas;if(i.setDefaults(e),o.style&&typeof e.font<\"u\"&&n&&typeof n.getComputedStyle<\"u\"){e.font=n.getComputedStyle(o).getPropertyValue(\"font\");var s=new S(r,\"fontSize\",Z.parse(e.font).fontSize);s.hasValue()&&(r.rootEmSize=s.getPixels(\"y\"),r.emSize=r.rootEmSize)}this.getAttribute(\"x\").hasValue()||this.getAttribute(\"x\",!0).setValue(0),this.getAttribute(\"y\").hasValue()||this.getAttribute(\"y\",!0).setValue(0);var{width:u,height:l}=i.viewPort;this.getStyle(\"width\").hasValue()||this.getStyle(\"width\",!0).setValue(\"100%\"),this.getStyle(\"height\").hasValue()||this.getStyle(\"height\",!0).setValue(\"100%\"),this.getStyle(\"color\").hasValue()||this.getStyle(\"color\",!0).setValue(\"black\");var h=this.getAttribute(\"refX\"),f=this.getAttribute(\"refY\"),c=this.getAttribute(\"viewBox\"),v=c.hasValue()?ne(c.getString()):null,g=!this.root&&this.getStyle(\"overflow\").getValue(\"hidden\")!==\"visible\",d=0,p=0,y=0,x=0;v&&(d=v[0],p=v[1]),this.root||(u=this.getStyle(\"width\").getPixels(\"x\"),l=this.getStyle(\"height\").getPixels(\"y\"),this.type===\"marker\"&&(y=d,x=p,d=0,p=0)),i.viewPort.setCurrent(u,l),this.node&&(!this.parent||((t=this.node.parentNode)===null||t===void 0?void 0:t.nodeName)===\"foreignObject\")&&this.getStyle(\"transform\",!1,!0).hasValue()&&!this.getStyle(\"transform-origin\",!1,!0).hasValue()&&this.getStyle(\"transform-origin\",!0,!0).setValue(\"50% 50%\"),super.setContext(e),e.translate(this.getAttribute(\"x\").getPixels(\"x\"),this.getAttribute(\"y\").getPixels(\"y\")),v&&(u=v[2],l=v[3]),r.setViewBox({ctx:e,aspectRatio:this.getAttribute(\"preserveAspectRatio\").getString(),width:i.viewPort.width,desiredWidth:u,height:i.viewPort.height,desiredHeight:l,minX:d,minY:p,refX:h.getValue(),refY:f.getValue(),clip:g,clipX:y,clipY:x}),v&&(i.viewPort.removeCurrent(),i.viewPort.setCurrent(u,l))}clearContext(e){super.clearContext(e),this.document.screen.viewPort.removeCurrent()}resize(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=this.getAttribute(\"width\",!0),n=this.getAttribute(\"height\",!0),o=this.getAttribute(\"viewBox\"),s=this.getAttribute(\"style\"),u=i.getNumber(0),l=n.getNumber(0);if(r)if(typeof r==\"string\")this.getAttribute(\"preserveAspectRatio\",!0).setValue(r);else{var h=this.getAttribute(\"preserveAspectRatio\");h.hasValue()&&h.setValue(h.getString().replace(/^\\s*(\\S.*\\S)\\s*$/,\"$1\"))}if(i.setValue(e),n.setValue(t),o.hasValue()||o.setValue(\"0 0 \".concat(u||e,\" \").concat(l||t)),s.hasValue()){var f=this.getStyle(\"width\"),c=this.getStyle(\"height\");f.hasValue()&&f.setValue(\"\".concat(e,\"px\")),c.hasValue()&&c.setValue(\"\".concat(t,\"px\"))}}}class El extends A{constructor(){super(...arguments),this.type=\"rect\"}path(e){var t=this.getAttribute(\"x\").getPixels(\"x\"),r=this.getAttribute(\"y\").getPixels(\"y\"),i=this.getStyle(\"width\",!1,!0).getPixels(\"x\"),n=this.getStyle(\"height\",!1,!0).getPixels(\"y\"),o=this.getAttribute(\"rx\"),s=this.getAttribute(\"ry\"),u=o.getPixels(\"x\"),l=s.getPixels(\"y\");if(o.hasValue()&&!s.hasValue()&&(l=u),s.hasValue()&&!o.hasValue()&&(u=l),u=Math.min(u,i/2),l=Math.min(l,n/2),e){var h=4*((Math.sqrt(2)-1)/3);e.beginPath(),n>0&&i>0&&(e.moveTo(t+u,r),e.lineTo(t+i-u,r),e.bezierCurveTo(t+i-u+h*u,r,t+i,r+l-h*l,t+i,r+l),e.lineTo(t+i,r+n-l),e.bezierCurveTo(t+i,r+n-l+h*l,t+i-u+h*u,r+n,t+i-u,r+n),e.lineTo(t+u,r+n),e.bezierCurveTo(t+u-h*u,r+n,t,r+n-l+h*l,t,r+n-l),e.lineTo(t,r+l),e.bezierCurveTo(t,r+l-h*l,t+u-h*u,r,t+u,r),e.closePath())}return new ce(t,r,t+i,r+n)}getMarkers(){return null}}class D1 extends A{constructor(){super(...arguments),this.type=\"circle\"}path(e){var t=this.getAttribute(\"cx\").getPixels(\"x\"),r=this.getAttribute(\"cy\").getPixels(\"y\"),i=this.getAttribute(\"r\").getPixels();return e&&i>0&&(e.beginPath(),e.arc(t,r,i,0,Math.PI*2,!1),e.closePath()),new ce(t-i,r-i,t+i,r+i)}getMarkers(){return null}}class L1 extends A{constructor(){super(...arguments),this.type=\"ellipse\"}path(e){var t=4*((Math.sqrt(2)-1)/3),r=this.getAttribute(\"rx\").getPixels(\"x\"),i=this.getAttribute(\"ry\").getPixels(\"y\"),n=this.getAttribute(\"cx\").getPixels(\"x\"),o=this.getAttribute(\"cy\").getPixels(\"y\");return e&&r>0&&i>0&&(e.beginPath(),e.moveTo(n+r,o),e.bezierCurveTo(n+r,o+t*i,n+t*r,o+i,n,o+i),e.bezierCurveTo(n-t*r,o+i,n-r,o+t*i,n-r,o),e.bezierCurveTo(n-r,o-t*i,n-t*r,o-i,n,o-i),e.bezierCurveTo(n+t*r,o-i,n+r,o-t*i,n+r,o),e.closePath()),new ce(n-r,o-i,n+r,o+i)}getMarkers(){return null}}class k1 extends A{constructor(){super(...arguments),this.type=\"line\"}getPoints(){return[new k(this.getAttribute(\"x1\").getPixels(\"x\"),this.getAttribute(\"y1\").getPixels(\"y\")),new k(this.getAttribute(\"x2\").getPixels(\"x\"),this.getAttribute(\"y2\").getPixels(\"y\"))]}path(e){var[{x:t,y:r},{x:i,y:n}]=this.getPoints();return e&&(e.beginPath(),e.moveTo(t,r),e.lineTo(i,n)),new ce(t,r,i,n)}getMarkers(){var[e,t]=this.getPoints(),r=e.angleTo(t);return[[e,r],[t,r]]}}class $l extends A{constructor(e,t,r){super(e,t,r),this.type=\"polyline\",this.points=[],this.points=k.parsePath(this.getAttribute(\"points\").getString())}path(e){var{points:t}=this,[{x:r,y:i}]=t,n=new ce(r,i);return e&&(e.beginPath(),e.moveTo(r,i)),t.forEach(o=>{var{x:s,y:u}=o;n.addPoint(s,u),e&&e.lineTo(s,u)}),n}getMarkers(){var{points:e}=this,t=e.length-1,r=[];return e.forEach((i,n)=>{n!==t&&r.push([i,i.angleTo(e[n+1])])}),r.length>0&&r.push([e[e.length-1],r[r.length-1][1]]),r}}class B1 extends $l{constructor(){super(...arguments),this.type=\"polygon\"}path(e){var t=super.path(e),[{x:r,y:i}]=this.points;return e&&(e.lineTo(r,i),e.closePath()),t}}class j1 extends I{constructor(){super(...arguments),this.type=\"pattern\"}createPattern(e,t,r){var i=this.getStyle(\"width\").getPixels(\"x\",!0),n=this.getStyle(\"height\").getPixels(\"y\",!0),o=new Nt(this.document,null);o.attributes.viewBox=new S(this.document,\"viewBox\",this.getAttribute(\"viewBox\").getValue()),o.attributes.width=new S(this.document,\"width\",\"\".concat(i,\"px\")),o.attributes.height=new S(this.document,\"height\",\"\".concat(n,\"px\")),o.attributes.transform=new S(this.document,\"transform\",this.getAttribute(\"patternTransform\").getValue()),o.children=this.children;var s=this.document.createCanvas(i,n),u=s.getContext(\"2d\"),l=this.getAttribute(\"x\"),h=this.getAttribute(\"y\");l.hasValue()&&h.hasValue()&&u.translate(l.getPixels(\"x\",!0),h.getPixels(\"y\",!0)),r.hasValue()?this.styles[\"fill-opacity\"]=r:Reflect.deleteProperty(this.styles,\"fill-opacity\");for(var f=-1;f<=1;f++)for(var c=-1;c<=1;c++)u.save(),o.attributes.x=new S(this.document,\"x\",f*s.width),o.attributes.y=new S(this.document,\"y\",c*s.height),o.render(u),u.restore();var v=e.createPattern(s,\"repeat\");return v}}class F1 extends I{constructor(){super(...arguments),this.type=\"marker\"}render(e,t,r){if(t){var{x:i,y:n}=t,o=this.getAttribute(\"orient\").getString(\"auto\"),s=this.getAttribute(\"markerUnits\").getString(\"strokeWidth\");e.translate(i,n),o===\"auto\"&&e.rotate(r),s===\"strokeWidth\"&&e.scale(e.lineWidth,e.lineWidth),e.save();var u=new Nt(this.document,null);u.type=this.type,u.attributes.viewBox=new S(this.document,\"viewBox\",this.getAttribute(\"viewBox\").getValue()),u.attributes.refX=new S(this.document,\"refX\",this.getAttribute(\"refX\").getValue()),u.attributes.refY=new S(this.document,\"refY\",this.getAttribute(\"refY\").getValue()),u.attributes.width=new S(this.document,\"width\",this.getAttribute(\"markerWidth\").getValue()),u.attributes.height=new S(this.document,\"height\",this.getAttribute(\"markerHeight\").getValue()),u.attributes.overflow=new S(this.document,\"overflow\",this.getAttribute(\"overflow\").getValue()),u.attributes.fill=new S(this.document,\"fill\",this.getAttribute(\"fill\").getColor(\"black\")),u.attributes.stroke=new S(this.document,\"stroke\",this.getAttribute(\"stroke\").getValue(\"none\")),u.children=this.children,u.render(e),e.restore(),s===\"strokeWidth\"&&e.scale(1/e.lineWidth,1/e.lineWidth),o===\"auto\"&&e.rotate(-r),e.translate(-i,-n)}}}class U1 extends I{constructor(){super(...arguments),this.type=\"defs\"}render(){}}class sn extends Ge{constructor(){super(...arguments),this.type=\"g\"}getBoundingBox(e){var t=new ce;return this.children.forEach(r=>{t.addBoundingBox(r.getBoundingBox(e))}),t}}class wl extends I{constructor(e,t,r){super(e,t,r),this.attributesToInherit=[\"gradientUnits\"],this.stops=[];var{stops:i,children:n}=this;n.forEach(o=>{o.type===\"stop\"&&i.push(o)})}getGradientUnits(){return this.getAttribute(\"gradientUnits\").getString(\"objectBoundingBox\")}createGradient(e,t,r){var i=this;this.getHrefAttribute().hasValue()&&(i=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(i));var{stops:n}=i,o=this.getGradient(e,t);if(!o)return this.addParentOpacity(r,n[n.length-1].color);if(n.forEach(p=>{o.addColorStop(p.offset,this.addParentOpacity(r,p.color))}),this.getAttribute(\"gradientTransform\").hasValue()){var{document:s}=this,{MAX_VIRTUAL_PIXELS:u,viewPort:l}=s.screen,[h]=l.viewPorts,f=new El(s,null);f.attributes.x=new S(s,\"x\",-u/3),f.attributes.y=new S(s,\"y\",-u/3),f.attributes.width=new S(s,\"width\",u),f.attributes.height=new S(s,\"height\",u);var c=new sn(s,null);c.attributes.transform=new S(s,\"transform\",this.getAttribute(\"gradientTransform\").getValue()),c.children=[f];var v=new Nt(s,null);v.attributes.x=new S(s,\"x\",0),v.attributes.y=new S(s,\"y\",0),v.attributes.width=new S(s,\"width\",h.width),v.attributes.height=new S(s,\"height\",h.height),v.children=[c];var g=s.createCanvas(h.width,h.height),d=g.getContext(\"2d\");return d.fillStyle=o,v.render(d),d.createPattern(g,\"no-repeat\")}return o}inheritStopContainer(e){this.attributesToInherit.forEach(t=>{!this.getAttribute(t).hasValue()&&e.getAttribute(t).hasValue()&&this.getAttribute(t,!0).setValue(e.getAttribute(t).getValue())})}addParentOpacity(e,t){if(e.hasValue()){var r=new S(this.document,\"color\",t);return r.addOpacity(e).getColor()}return t}}class G1 extends wl{constructor(e,t,r){super(e,t,r),this.type=\"linearGradient\",this.attributesToInherit.push(\"x1\",\"y1\",\"x2\",\"y2\")}getGradient(e,t){var r=this.getGradientUnits()===\"objectBoundingBox\",i=r?t.getBoundingBox(e):null;if(r&&!i)return null;!this.getAttribute(\"x1\").hasValue()&&!this.getAttribute(\"y1\").hasValue()&&!this.getAttribute(\"x2\").hasValue()&&!this.getAttribute(\"y2\").hasValue()&&(this.getAttribute(\"x1\",!0).setValue(0),this.getAttribute(\"y1\",!0).setValue(0),this.getAttribute(\"x2\",!0).setValue(1),this.getAttribute(\"y2\",!0).setValue(0));var n=r?i.x+i.width*this.getAttribute(\"x1\").getNumber():this.getAttribute(\"x1\").getPixels(\"x\"),o=r?i.y+i.height*this.getAttribute(\"y1\").getNumber():this.getAttribute(\"y1\").getPixels(\"y\"),s=r?i.x+i.width*this.getAttribute(\"x2\").getNumber():this.getAttribute(\"x2\").getPixels(\"x\"),u=r?i.y+i.height*this.getAttribute(\"y2\").getNumber():this.getAttribute(\"y2\").getPixels(\"y\");return n===s&&o===u?null:e.createLinearGradient(n,o,s,u)}}class z1 extends wl{constructor(e,t,r){super(e,t,r),this.type=\"radialGradient\",this.attributesToInherit.push(\"cx\",\"cy\",\"r\",\"fx\",\"fy\",\"fr\")}getGradient(e,t){var r=this.getGradientUnits()===\"objectBoundingBox\",i=t.getBoundingBox(e);if(r&&!i)return null;this.getAttribute(\"cx\").hasValue()||this.getAttribute(\"cx\",!0).setValue(\"50%\"),this.getAttribute(\"cy\").hasValue()||this.getAttribute(\"cy\",!0).setValue(\"50%\"),this.getAttribute(\"r\").hasValue()||this.getAttribute(\"r\",!0).setValue(\"50%\");var n=r?i.x+i.width*this.getAttribute(\"cx\").getNumber():this.getAttribute(\"cx\").getPixels(\"x\"),o=r?i.y+i.height*this.getAttribute(\"cy\").getNumber():this.getAttribute(\"cy\").getPixels(\"y\"),s=n,u=o;this.getAttribute(\"fx\").hasValue()&&(s=r?i.x+i.width*this.getAttribute(\"fx\").getNumber():this.getAttribute(\"fx\").getPixels(\"x\")),this.getAttribute(\"fy\").hasValue()&&(u=r?i.y+i.height*this.getAttribute(\"fy\").getNumber():this.getAttribute(\"fy\").getPixels(\"y\"));var l=r?(i.width+i.height)/2*this.getAttribute(\"r\").getNumber():this.getAttribute(\"r\").getPixels(),h=this.getAttribute(\"fr\").getPixels();return e.createRadialGradient(s,u,h,n,o,l)}}class H1 extends I{constructor(e,t,r){super(e,t,r),this.type=\"stop\";var i=Math.max(0,Math.min(1,this.getAttribute(\"offset\").getNumber())),n=this.getStyle(\"stop-opacity\"),o=this.getStyle(\"stop-color\",!0);o.getString()===\"\"&&o.setValue(\"#000\"),n.hasValue()&&(o=o.addOpacity(n)),this.offset=i,this.color=o.getColor()}}class on extends I{constructor(e,t,r){super(e,t,r),this.type=\"animate\",this.duration=0,this.initialValue=null,this.initialUnits=\"\",this.removed=!1,this.frozen=!1,e.screen.animations.push(this),this.begin=this.getAttribute(\"begin\").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute(\"dur\").getMilliseconds(),this.from=this.getAttribute(\"from\"),this.to=this.getAttribute(\"to\"),this.values=new S(e,\"values\",null);var i=this.getAttribute(\"values\");i.hasValue()&&this.values.setValue(i.getString().split(\";\"))}getProperty(){var e=this.getAttribute(\"attributeType\").getString(),t=this.getAttribute(\"attributeName\").getString();return e===\"CSS\"?this.parent.getStyle(t,!0):this.parent.getAttribute(t,!0)}calcValue(){var{initialUnits:e}=this,{progress:t,from:r,to:i}=this.getProgress(),n=r.getNumber()+(i.getNumber()-r.getNumber())*t;return e===\"%\"&&(n*=100),\"\".concat(n).concat(e)}update(e){var{parent:t}=this,r=this.getProperty();if(this.initialValue||(this.initialValue=r.getString(),this.initialUnits=r.getUnits()),this.duration>this.maxDuration){var i=this.getAttribute(\"fill\").getString(\"remove\");if(this.getAttribute(\"repeatCount\").getString()===\"indefinite\"||this.getAttribute(\"repeatDur\").getString()===\"indefinite\")this.duration=0;else if(i===\"freeze\"&&!this.frozen)this.frozen=!0,t.animationFrozen=!0,t.animationFrozenValue=r.getString();else if(i===\"remove\"&&!this.removed)return this.removed=!0,r.setValue(t.animationFrozen?t.animationFrozenValue:this.initialValue),!0;return!1}this.duration+=e;var n=!1;if(this.begin<this.duration){var o=this.calcValue(),s=this.getAttribute(\"type\");if(s.hasValue()){var u=s.getString();o=\"\".concat(u,\"(\").concat(o,\")\")}r.setValue(o),n=!0}return n}getProgress(){var{document:e,values:t}=this,r={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(t.hasValue()){var i=r.progress*(t.getValue().length-1),n=Math.floor(i),o=Math.ceil(i);r.from=new S(e,\"from\",parseFloat(t.getValue()[n])),r.to=new S(e,\"to\",parseFloat(t.getValue()[o])),r.progress=(i-n)/(o-n)}else r.from=this.from,r.to=this.to;return r}}class Y1 extends on{constructor(){super(...arguments),this.type=\"animateColor\"}calcValue(){var{progress:e,from:t,to:r}=this.getProgress(),i=new yi(t.getColor()),n=new yi(r.getColor());if(i.ok&&n.ok){var o=i.r+(n.r-i.r)*e,s=i.g+(n.g-i.g)*e,u=i.b+(n.b-i.b)*e;return\"rgb(\".concat(Math.floor(o),\", \").concat(Math.floor(s),\", \").concat(Math.floor(u),\")\")}return this.getAttribute(\"from\").getColor()}}class X1 extends on{constructor(){super(...arguments),this.type=\"animateTransform\"}calcValue(){var{progress:e,from:t,to:r}=this.getProgress(),i=ne(t.getString()),n=ne(r.getString()),o=i.map((s,u)=>{var l=n[u];return s+(l-s)*e}).join(\" \");return o}}class W1 extends I{constructor(e,t,r){super(e,t,r),this.type=\"font\",this.glyphs=Object.create(null),this.horizAdvX=this.getAttribute(\"horiz-adv-x\").getNumber();var{definitions:i}=e,{children:n}=this;for(var o of n)switch(o.type){case\"font-face\":{this.fontFace=o;var s=o.getStyle(\"font-family\");s.hasValue()&&(i[s.getString()]=this);break}case\"missing-glyph\":this.missingGlyph=o;break;case\"glyph\":{var u=o;u.arabicForm?(this.isRTL=!0,this.isArabic=!0,typeof this.glyphs[u.unicode]>\"u\"&&(this.glyphs[u.unicode]=Object.create(null)),this.glyphs[u.unicode][u.arabicForm]=u):this.glyphs[u.unicode]=u;break}}}render(){}}class q1 extends I{constructor(e,t,r){super(e,t,r),this.type=\"font-face\",this.ascent=this.getAttribute(\"ascent\").getNumber(),this.descent=this.getAttribute(\"descent\").getNumber(),this.unitsPerEm=this.getAttribute(\"units-per-em\").getNumber()}}class Q1 extends A{constructor(){super(...arguments),this.type=\"missing-glyph\",this.horizAdvX=0}}class K1 extends Ce{constructor(){super(...arguments),this.type=\"tref\"}getText(){var e=this.getHrefAttribute().getDefinition();if(e){var t=e.children[0];if(t)return t.getText()}return\"\"}}class Z1 extends Ce{constructor(e,t,r){super(e,t,r),this.type=\"a\";var{childNodes:i}=t,n=i[0],o=i.length>0&&Array.from(i).every(s=>s.nodeType===3);this.hasText=o,this.text=o?this.getTextFromNode(n):\"\"}getText(){return this.text}renderChildren(e){if(this.hasText){super.renderChildren(e);var{document:t,x:r,y:i}=this,{mouse:n}=t.screen,o=new S(t,\"fontSize\",Z.parse(t.ctx.font).fontSize);n.isWorking()&&n.checkBoundingBox(this,new ce(r,i-o.getPixels(\"y\"),r+this.measureText(e),i))}else if(this.children.length>0){var s=new sn(this.document,null);s.children=this.children,s.parent=this,s.render(e)}}onClick(){var{window:e}=this.document;e&&e.open(this.getHrefAttribute().getString())}onMouseMove(){var e=this.document.ctx;e.canvas.style.cursor=\"pointer\"}}function Mo(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(a,i).enumerable})),t.push.apply(t,r)}return t}function ir(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Mo(Object(t),!0).forEach(function(r){an(a,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):Mo(Object(t)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(t,r))})}return a}class J1 extends Ce{constructor(e,t,r){super(e,t,r),this.type=\"textPath\",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([[\"\",0]]);var i=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(i)}getText(){return this.text}path(e){var{dataArray:t}=this;e&&e.beginPath(),t.forEach(r=>{var{type:i,points:n}=r;switch(i){case w.LINE_TO:e&&e.lineTo(n[0],n[1]);break;case w.MOVE_TO:e&&e.moveTo(n[0],n[1]);break;case w.CURVE_TO:e&&e.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]);break;case w.QUAD_TO:e&&e.quadraticCurveTo(n[0],n[1],n[2],n[3]);break;case w.ARC:{var[o,s,u,l,h,f,c,v]=n,g=u>l?u:l,d=u>l?1:u/l,p=u>l?l/u:1;e&&(e.translate(o,s),e.rotate(c),e.scale(d,p),e.arc(0,0,g,h,h+f,!!(1-v)),e.scale(1/d,1/p),e.rotate(-c),e.translate(-o,-s));break}case w.CLOSE_PATH:e&&e.closePath();break}})}renderChildren(e){this.setTextData(e),e.save();var t=this.parent.getStyle(\"text-decoration\").getString(),r=this.getFontSize(),{glyphInfo:i}=this,n=e.fillStyle;t===\"underline\"&&e.beginPath(),i.forEach((o,s)=>{var{p0:u,p1:l,rotation:h,text:f}=o;e.save(),e.translate(u.x,u.y),e.rotate(h),e.fillStyle&&e.fillText(f,0,0),e.strokeStyle&&e.strokeText(f,0,0),e.restore(),t===\"underline\"&&(s===0&&e.moveTo(u.x,u.y+r/8),e.lineTo(l.x,l.y+r/5))}),t===\"underline\"&&(e.lineWidth=r/20,e.strokeStyle=n,e.stroke(),e.closePath()),e.restore()}getLetterSpacingAt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.letterSpacingCache[e]||0}findSegmentToFitChar(e,t,r,i,n,o,s,u,l){var h=o,f=this.measureText(e,u);u===\" \"&&t===\"justify\"&&r<i&&(f+=(i-r)/n),l>-1&&(h+=this.getLetterSpacingAt(l));var c=this.textHeight/20,v=this.getEquidistantPointOnPath(h,c,0),g=this.getEquidistantPointOnPath(h+f,c,0),d={p0:v,p1:g},p=v&&g?Math.atan2(g.y-v.y,g.x-v.x):0;if(s){var y=Math.cos(Math.PI/2+p)*s,x=Math.cos(-p)*s;d.p0=ir(ir({},v),{},{x:v.x+y,y:v.y+x}),d.p1=ir(ir({},g),{},{x:g.x+y,y:g.y+x})}return h+=f,{offset:h,segment:d,rotation:p}}measureText(e,t){var{measuresCache:r}=this,i=t||this.getText();if(r.has(i))return r.get(i);var n=this.measureTargetText(e,i);return r.set(i,n),n}setTextData(e){if(!this.glyphInfo){var t=this.getText(),r=t.split(\"\"),i=t.split(\" \").length-1,n=this.parent.getAttribute(\"dx\").split().map(T=>T.getPixels(\"x\")),o=this.parent.getAttribute(\"dy\").getPixels(\"y\"),s=this.parent.getStyle(\"text-anchor\").getString(\"start\"),u=this.getStyle(\"letter-spacing\"),l=this.parent.getStyle(\"letter-spacing\"),h=0;!u.hasValue()||u.getValue()===\"inherit\"?h=l.getPixels():u.hasValue()&&u.getValue()!==\"initial\"&&u.getValue()!==\"unset\"&&(h=u.getPixels());var f=[],c=t.length;this.letterSpacingCache=f;for(var v=0;v<c;v++)f.push(typeof n[v]<\"u\"?n[v]:h);var g=f.reduce((T,$,E)=>E===0?0:T+$||0,0),d=this.measureText(e),p=Math.max(d+g,0);this.textWidth=d,this.textHeight=this.getFontSize(),this.glyphInfo=[];var y=this.getPathLength(),x=this.getStyle(\"startOffset\").getNumber(0)*y,b=0;(s===\"middle\"||s===\"center\")&&(b=-p/2),(s===\"end\"||s===\"right\")&&(b=-p),b+=x,r.forEach((T,$)=>{var{offset:E,segment:O,rotation:C}=this.findSegmentToFitChar(e,s,p,y,i,b,o,T,$);b=E,!(!O.p0||!O.p1)&&this.glyphInfo.push({text:r[$],p0:O.p0,p1:O.p1,rotation:C})})}}parsePathData(e){if(this.pathLength=-1,!e)return[];var t=[],{pathParser:r}=e;for(r.reset();!r.isEnd();){var{current:i}=r,n=i?i.x:0,o=i?i.y:0,s=r.next(),u=s.type,l=[];switch(s.type){case w.MOVE_TO:this.pathM(r,l);break;case w.LINE_TO:u=this.pathL(r,l);break;case w.HORIZ_LINE_TO:u=this.pathH(r,l);break;case w.VERT_LINE_TO:u=this.pathV(r,l);break;case w.CURVE_TO:this.pathC(r,l);break;case w.SMOOTH_CURVE_TO:u=this.pathS(r,l);break;case w.QUAD_TO:this.pathQ(r,l);break;case w.SMOOTH_QUAD_TO:u=this.pathT(r,l);break;case w.ARC:l=this.pathA(r);break;case w.CLOSE_PATH:A.pathZ(r);break}s.type!==w.CLOSE_PATH?t.push({type:u,points:l,start:{x:n,y:o},pathLength:this.calcLength(n,o,u,l)}):t.push({type:w.CLOSE_PATH,points:[],pathLength:0})}return t}pathM(e,t){var{x:r,y:i}=A.pathM(e).point;t.push(r,i)}pathL(e,t){var{x:r,y:i}=A.pathL(e).point;return t.push(r,i),w.LINE_TO}pathH(e,t){var{x:r,y:i}=A.pathH(e).point;return t.push(r,i),w.LINE_TO}pathV(e,t){var{x:r,y:i}=A.pathV(e).point;return t.push(r,i),w.LINE_TO}pathC(e,t){var{point:r,controlPoint:i,currentPoint:n}=A.pathC(e);t.push(r.x,r.y,i.x,i.y,n.x,n.y)}pathS(e,t){var{point:r,controlPoint:i,currentPoint:n}=A.pathS(e);return t.push(r.x,r.y,i.x,i.y,n.x,n.y),w.CURVE_TO}pathQ(e,t){var{controlPoint:r,currentPoint:i}=A.pathQ(e);t.push(r.x,r.y,i.x,i.y)}pathT(e,t){var{controlPoint:r,currentPoint:i}=A.pathT(e);return t.push(r.x,r.y,i.x,i.y),w.QUAD_TO}pathA(e){var{rX:t,rY:r,sweepFlag:i,xAxisRotation:n,centp:o,a1:s,ad:u}=A.pathA(e);return i===0&&u>0&&(u-=2*Math.PI),i===1&&u<0&&(u+=2*Math.PI),[o.x,o.y,t,r,s,u,n,i]}calcLength(e,t,r,i){var n=0,o=null,s=null,u=0;switch(r){case w.LINE_TO:return this.getLineLength(e,t,i[0],i[1]);case w.CURVE_TO:for(n=0,o=this.getPointOnCubicBezier(0,e,t,i[0],i[1],i[2],i[3],i[4],i[5]),u=.01;u<=1;u+=.01)s=this.getPointOnCubicBezier(u,e,t,i[0],i[1],i[2],i[3],i[4],i[5]),n+=this.getLineLength(o.x,o.y,s.x,s.y),o=s;return n;case w.QUAD_TO:for(n=0,o=this.getPointOnQuadraticBezier(0,e,t,i[0],i[1],i[2],i[3]),u=.01;u<=1;u+=.01)s=this.getPointOnQuadraticBezier(u,e,t,i[0],i[1],i[2],i[3]),n+=this.getLineLength(o.x,o.y,s.x,s.y),o=s;return n;case w.ARC:{n=0;var l=i[4],h=i[5],f=i[4]+h,c=Math.PI/180;if(Math.abs(l-f)<c&&(c=Math.abs(l-f)),o=this.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),h<0)for(u=l-c;u>f;u-=c)s=this.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],u,0),n+=this.getLineLength(o.x,o.y,s.x,s.y),o=s;else for(u=l+c;u<f;u+=c)s=this.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],u,0),n+=this.getLineLength(o.x,o.y,s.x,s.y),o=s;return s=this.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],f,0),n+=this.getLineLength(o.x,o.y,s.x,s.y),n}}return 0}getPointOnLine(e,t,r,i,n){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:t,s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:r,u=(n-r)/(i-t+rt),l=Math.sqrt(e*e/(1+u*u));i<t&&(l*=-1);var h=u*l,f=null;if(i===t)f={x:o,y:s+h};else if((s-r)/(o-t+rt)===u)f={x:o+l,y:s+h};else{var c=0,v=0,g=this.getLineLength(t,r,i,n);if(g<rt)return null;var d=(o-t)*(i-t)+(s-r)*(n-r);d/=g*g,c=t+d*(i-t),v=r+d*(n-r);var p=this.getLineLength(o,s,c,v),y=Math.sqrt(e*e-p*p);l=Math.sqrt(y*y/(1+u*u)),i<t&&(l*=-1),h=u*l,f={x:c+l,y:v+h}}return f}getPointOnPath(e){var t=this.getPathLength(),r=0,i=null;if(e<-5e-5||e-5e-5>t)return null;var{dataArray:n}=this;for(var o of n){if(o&&(o.pathLength<5e-5||r+o.pathLength+5e-5<e)){r+=o.pathLength;continue}var s=e-r,u=0;switch(o.type){case w.LINE_TO:i=this.getPointOnLine(s,o.start.x,o.start.y,o.points[0],o.points[1],o.start.x,o.start.y);break;case w.ARC:{var l=o.points[4],h=o.points[5],f=o.points[4]+h;if(u=l+s/o.pathLength*h,h<0&&u<f||h>=0&&u>f)break;i=this.getPointOnEllipticalArc(o.points[0],o.points[1],o.points[2],o.points[3],u,o.points[6]);break}case w.CURVE_TO:u=s/o.pathLength,u>1&&(u=1),i=this.getPointOnCubicBezier(u,o.start.x,o.start.y,o.points[0],o.points[1],o.points[2],o.points[3],o.points[4],o.points[5]);break;case w.QUAD_TO:u=s/o.pathLength,u>1&&(u=1),i=this.getPointOnQuadraticBezier(u,o.start.x,o.start.y,o.points[0],o.points[1],o.points[2],o.points[3]);break}if(i)return i;break}return null}getLineLength(e,t,r,i){return Math.sqrt((r-e)*(r-e)+(i-t)*(i-t))}getPathLength(){return this.pathLength===-1&&(this.pathLength=this.dataArray.reduce((e,t)=>t.pathLength>0?e+t.pathLength:e,0)),this.pathLength}getPointOnCubicBezier(e,t,r,i,n,o,s,u,l){var h=u*wo(e)+o*Co(e)+i*Ao(e)+t*Po(e),f=l*wo(e)+s*Co(e)+n*Ao(e)+r*Po(e);return{x:h,y:f}}getPointOnQuadraticBezier(e,t,r,i,n,o,s){var u=o*Ro(e)+i*No(e)+t*Io(e),l=s*Ro(e)+n*No(e)+r*Io(e);return{x:u,y:l}}getPointOnEllipticalArc(e,t,r,i,n,o){var s=Math.cos(o),u=Math.sin(o),l={x:r*Math.cos(n),y:i*Math.sin(n)};return{x:e+(l.x*s-l.y*u),y:t+(l.x*u+l.y*s)}}buildEquidistantCache(e,t){var r=this.getPathLength(),i=t||.25,n=e||r/100;if(!this.equidistantCache||this.equidistantCache.step!==n||this.equidistantCache.precision!==i){this.equidistantCache={step:n,precision:i,points:[]};for(var o=0,s=0;s<=r;s+=i){var u=this.getPointOnPath(s),l=this.getPointOnPath(s+i);!u||!l||(o+=this.getLineLength(u.x,u.y,l.x,l.y),o>=n&&(this.equidistantCache.points.push({x:u.x,y:u.y,distance:s}),o-=n))}}}getEquidistantPointOnPath(e,t,r){if(this.buildEquidistantCache(t,r),e<0||e-this.getPathLength()>5e-5)return null;var i=Math.round(e/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[i]||null}}var e2=/^\\s*data:(([^/,;]+\\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i;class t2 extends Ge{constructor(e,t,r){super(e,t,r),this.type=\"image\",this.loaded=!1;var i=this.getHrefAttribute().getString();if(i){var n=i.endsWith(\".svg\")||/^\\s*data:image\\/svg\\+xml/i.test(i);e.images.push(this),n?this.loadSvg(i):this.loadImage(i),this.isSvg=n}}loadImage(e){var t=this;return xe(function*(){try{var r=yield t.document.createImage(e);t.image=r}catch(i){console.error('Error while loading image \"'.concat(e,'\":'),i)}t.loaded=!0})()}loadSvg(e){var t=this;return xe(function*(){var r=e2.exec(e);if(r){var i=r[5];r[4]===\"base64\"?t.image=atob(i):t.image=decodeURIComponent(i)}else try{var n=yield t.document.fetch(e),o=yield n.text();t.image=o}catch(s){console.error('Error while loading image \"'.concat(e,'\":'),s)}t.loaded=!0})()}renderChildren(e){var{document:t,image:r,loaded:i}=this,n=this.getAttribute(\"x\").getPixels(\"x\"),o=this.getAttribute(\"y\").getPixels(\"y\"),s=this.getStyle(\"width\").getPixels(\"x\"),u=this.getStyle(\"height\").getPixels(\"y\");if(!(!i||!r||!s||!u)){if(e.save(),e.translate(n,o),this.isSvg){var l=t.canvg.forkString(e,this.image,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:s,scaleHeight:u});l.document.documentElement.parent=this,l.render()}else{var h=this.image;t.setViewBox({ctx:e,aspectRatio:this.getAttribute(\"preserveAspectRatio\").getString(),width:s,desiredWidth:h.width,height:u,desiredHeight:h.height}),this.loaded&&(typeof h.complete>\"u\"||h.complete)&&e.drawImage(h,0,0)}e.restore()}}getBoundingBox(){var e=this.getAttribute(\"x\").getPixels(\"x\"),t=this.getAttribute(\"y\").getPixels(\"y\"),r=this.getStyle(\"width\").getPixels(\"x\"),i=this.getStyle(\"height\").getPixels(\"y\");return new ce(e,t,e+r,t+i)}}class r2 extends Ge{constructor(){super(...arguments),this.type=\"symbol\"}render(e){}}class a2{constructor(e){this.document=e,this.loaded=!1,e.fonts.push(this)}load(e,t){var r=this;return xe(function*(){try{var{document:i}=r,n=yield i.canvg.parser.load(t),o=n.getElementsByTagName(\"font\");Array.from(o).forEach(s=>{var u=i.createElement(s);i.definitions[e]=u})}catch(s){console.error('Error while loading font \"'.concat(t,'\":'),s)}r.loaded=!0})()}}class Cl extends I{constructor(e,t,r){super(e,t,r),this.type=\"style\";var i=lt(Array.from(t.childNodes).map(o=>o.textContent).join(\"\").replace(/(\\/\\*([^*]|[\\r\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+\\/)|(^[\\s]*\\/\\/.*)/gm,\"\").replace(/@import.*;/g,\"\")),n=i.split(\"}\");n.forEach(o=>{var s=o.trim();if(s){var u=s.split(\"{\"),l=u[0].split(\",\"),h=u[1].split(\";\");l.forEach(f=>{var c=f.trim();if(c){var v=e.styles[c]||{};if(h.forEach(p=>{var y=p.indexOf(\":\"),x=p.substr(0,y).trim(),b=p.substr(y+1,p.length-y).trim();x&&b&&(v[x]=new S(e,x,b))}),e.styles[c]=v,e.stylesSpecificity[c]=m1(c),c===\"@font-face\"){var g=v[\"font-family\"].getString().replace(/\"|'/g,\"\"),d=v.src.getString().split(\",\");d.forEach(p=>{if(p.indexOf('format(\"svg\")')>0){var y=ml(p);y&&new a2(e).load(g,y)}})}}})}})}}Cl.parseExternalUrl=ml;class i2 extends Ge{constructor(){super(...arguments),this.type=\"use\"}setContext(e){super.setContext(e);var t=this.getAttribute(\"x\"),r=this.getAttribute(\"y\");t.hasValue()&&e.translate(t.getPixels(\"x\"),0),r.hasValue()&&e.translate(0,r.getPixels(\"y\"))}path(e){var{element:t}=this;t&&t.path(e)}renderChildren(e){var{document:t,element:r}=this;if(r){var i=r;if(r.type===\"symbol\"&&(i=new Nt(t,null),i.attributes.viewBox=new S(t,\"viewBox\",r.getAttribute(\"viewBox\").getString()),i.attributes.preserveAspectRatio=new S(t,\"preserveAspectRatio\",r.getAttribute(\"preserveAspectRatio\").getString()),i.attributes.overflow=new S(t,\"overflow\",r.getAttribute(\"overflow\").getString()),i.children=r.children,r.styles.opacity=new S(t,\"opacity\",this.calculateOpacity())),i.type===\"svg\"){var n=this.getStyle(\"width\",!1,!0),o=this.getStyle(\"height\",!1,!0);n.hasValue()&&(i.attributes.width=new S(t,\"width\",n.getString())),o.hasValue()&&(i.attributes.height=new S(t,\"height\",o.getString()))}var s=i.parent;i.parent=this,i.render(e),i.parent=s}}getBoundingBox(e){var{element:t}=this;return t?t.getBoundingBox(e):null}elementTransform(){var{document:e,element:t}=this;return Be.fromElement(e,t)}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}}function nr(a,e,t,r,i,n){return a[t*r*4+e*4+n]}function sr(a,e,t,r,i,n,o){a[t*r*4+e*4+n]=o}function F(a,e,t){var r=a[e];return r*t}function me(a,e,t,r){return e+Math.cos(a)*t+Math.sin(a)*r}class Al extends I{constructor(e,t,r){super(e,t,r),this.type=\"feColorMatrix\";var i=ne(this.getAttribute(\"values\").getString());switch(this.getAttribute(\"type\").getString(\"matrix\")){case\"saturate\":{var n=i[0];i=[.213+.787*n,.715-.715*n,.072-.072*n,0,0,.213-.213*n,.715+.285*n,.072-.072*n,0,0,.213-.213*n,.715-.715*n,.072+.928*n,0,0,0,0,0,1,0,0,0,0,0,1];break}case\"hueRotate\":{var o=i[0]*Math.PI/180;i=[me(o,.213,.787,-.213),me(o,.715,-.715,-.715),me(o,.072,-.072,.928),0,0,me(o,.213,-.213,.143),me(o,.715,.285,.14),me(o,.072,-.072,-.283),0,0,me(o,.213,-.213,-.787),me(o,.715,-.715,.715),me(o,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break}case\"luminanceToAlpha\":i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1];break}this.matrix=i,this.includeOpacity=this.getAttribute(\"includeOpacity\").hasValue()}apply(e,t,r,i,n){for(var{includeOpacity:o,matrix:s}=this,u=e.getImageData(0,0,i,n),l=0;l<n;l++)for(var h=0;h<i;h++){var f=nr(u.data,h,l,i,n,0),c=nr(u.data,h,l,i,n,1),v=nr(u.data,h,l,i,n,2),g=nr(u.data,h,l,i,n,3),d=F(s,0,f)+F(s,1,c)+F(s,2,v)+F(s,3,g)+F(s,4,1),p=F(s,5,f)+F(s,6,c)+F(s,7,v)+F(s,8,g)+F(s,9,1),y=F(s,10,f)+F(s,11,c)+F(s,12,v)+F(s,13,g)+F(s,14,1),x=F(s,15,f)+F(s,16,c)+F(s,17,v)+F(s,18,g)+F(s,19,1);o&&(d=0,p=0,y=0,x*=g/255),sr(u.data,h,l,i,n,0,d),sr(u.data,h,l,i,n,1,p),sr(u.data,h,l,i,n,2,y),sr(u.data,h,l,i,n,3,x)}e.clearRect(0,0,i,n),e.putImageData(u,0,0)}}class kr extends I{constructor(){super(...arguments),this.type=\"mask\"}apply(e,t){var{document:r}=this,i=this.getAttribute(\"x\").getPixels(\"x\"),n=this.getAttribute(\"y\").getPixels(\"y\"),o=this.getStyle(\"width\").getPixels(\"x\"),s=this.getStyle(\"height\").getPixels(\"y\");if(!o&&!s){var u=new ce;this.children.forEach(g=>{u.addBoundingBox(g.getBoundingBox(e))}),i=Math.floor(u.x1),n=Math.floor(u.y1),o=Math.floor(u.width),s=Math.floor(u.height)}var l=this.removeStyles(t,kr.ignoreStyles),h=r.createCanvas(i+o,n+s),f=h.getContext(\"2d\");r.screen.setDefaults(f),this.renderChildren(f),new Al(r,{nodeType:1,childNodes:[],attributes:[{nodeName:\"type\",value:\"luminanceToAlpha\"},{nodeName:\"includeOpacity\",value:\"true\"}]}).apply(f,0,0,i+o,n+s);var c=r.createCanvas(i+o,n+s),v=c.getContext(\"2d\");r.screen.setDefaults(v),t.render(v),v.globalCompositeOperation=\"destination-in\",v.fillStyle=f.createPattern(h,\"no-repeat\"),v.fillRect(0,0,i+o,n+s),e.fillStyle=v.createPattern(c,\"no-repeat\"),e.fillRect(0,0,i+o,n+s),this.restoreStyles(t,l)}render(e){}}kr.ignoreStyles=[\"mask\",\"transform\",\"clip-path\"];var _o=()=>{};class n2 extends I{constructor(){super(...arguments),this.type=\"clipPath\"}apply(e){var{document:t}=this,r=Reflect.getPrototypeOf(e),{beginPath:i,closePath:n}=e;r&&(r.beginPath=_o,r.closePath=_o),Reflect.apply(i,e,[]),this.children.forEach(o=>{if(!(typeof o.path>\"u\")){var s=typeof o.elementTransform<\"u\"?o.elementTransform():null;s||(s=Be.fromElement(t,o)),s&&s.apply(e),o.path(e),r&&(r.closePath=n),s&&s.unapply(e)}}),Reflect.apply(n,e,[]),e.clip(),r&&(r.beginPath=i,r.closePath=n)}render(e){}}class Br extends I{constructor(){super(...arguments),this.type=\"filter\"}apply(e,t){var{document:r,children:i}=this,n=t.getBoundingBox(e);if(n){var o=0,s=0;i.forEach(y=>{var x=y.extraFilterDistance||0;o=Math.max(o,x),s=Math.max(s,x)});var u=Math.floor(n.width),l=Math.floor(n.height),h=u+2*o,f=l+2*s;if(!(h<1||f<1)){var c=Math.floor(n.x),v=Math.floor(n.y),g=this.removeStyles(t,Br.ignoreStyles),d=r.createCanvas(h,f),p=d.getContext(\"2d\");r.screen.setDefaults(p),p.translate(-c+o,-v+s),t.render(p),i.forEach(y=>{typeof y.apply==\"function\"&&y.apply(p,0,0,h,f)}),e.drawImage(d,0,0,h,f,c-o,v-s,h,f),this.restoreStyles(t,g)}}}render(e){}}Br.ignoreStyles=[\"filter\",\"transform\",\"clip-path\"];class s2 extends I{constructor(e,t,r){super(e,t,r),this.type=\"feDropShadow\",this.addStylesFromStyleDefinition()}apply(e,t,r,i,n){}}class o2 extends I{constructor(){super(...arguments),this.type=\"feMorphology\"}apply(e,t,r,i,n){}}class u2 extends I{constructor(){super(...arguments),this.type=\"feComposite\"}apply(e,t,r,i,n){}}class l2 extends I{constructor(e,t,r){super(e,t,r),this.type=\"feGaussianBlur\",this.blurRadius=Math.floor(this.getAttribute(\"stdDeviation\").getNumber()),this.extraFilterDistance=this.blurRadius}apply(e,t,r,i,n){var{document:o,blurRadius:s}=this,u=o.window?o.window.document.body:null,l=e.canvas;l.id=o.getUniqueId(),u&&(l.style.display=\"none\",u.appendChild(l)),r1(l,t,r,i,n,s),u&&u.removeChild(l)}}class h2 extends I{constructor(){super(...arguments),this.type=\"title\"}}class v2 extends I{constructor(){super(...arguments),this.type=\"desc\"}}var f2={svg:Nt,rect:El,circle:D1,ellipse:L1,line:k1,polyline:$l,polygon:B1,path:A,pattern:j1,marker:F1,defs:U1,linearGradient:G1,radialGradient:z1,stop:H1,animate:on,animateColor:Y1,animateTransform:X1,font:W1,\"font-face\":q1,\"missing-glyph\":Q1,glyph:Sl,text:Ce,tspan:Lr,tref:K1,a:Z1,textPath:J1,image:t2,g:sn,symbol:r2,style:Cl,use:i2,mask:kr,clipPath:n2,filter:Br,feDropShadow:s2,feMorphology:o2,feComposite:u2,feColorMatrix:Al,feGaussianBlur:l2,title:h2,desc:v2};function Vo(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(a,i).enumerable})),t.push.apply(t,r)}return t}function c2(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Vo(Object(t),!0).forEach(function(r){an(a,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):Vo(Object(t)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(t,r))})}return a}function g2(a,e){var t=document.createElement(\"canvas\");return t.width=a,t.height=e,t}function d2(a){return Ti.apply(this,arguments)}function Ti(){return Ti=xe(function*(a){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=document.createElement(\"img\");return e&&(t.crossOrigin=\"Anonymous\"),new Promise((r,i)=>{t.onload=()=>{r(t)},t.onerror=(n,o,s,u,l)=>{i(l)},t.src=a})}),Ti.apply(this,arguments)}class $e{constructor(e){var{rootEmSize:t=12,emSize:r=12,createCanvas:i=$e.createCanvas,createImage:n=$e.createImage,anonymousCrossOrigin:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.canvg=e,this.definitions=Object.create(null),this.styles=Object.create(null),this.stylesSpecificity=Object.create(null),this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=e.screen,this.rootEmSize=t,this.emSize=r,this.createCanvas=i,this.createImage=this.bindCreateImage(n,o),this.screen.wait(this.isImagesLoaded.bind(this)),this.screen.wait(this.isFontsLoaded.bind(this))}bindCreateImage(e,t){return typeof t==\"boolean\"?(r,i)=>e(r,typeof i==\"boolean\"?i:t):e}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){var{emSizeStack:e}=this;return e[e.length-1]}set emSize(e){var{emSizeStack:t}=this;t.push(e)}popEmSize(){var{emSizeStack:e}=this;e.pop()}getUniqueId(){return\"canvg\".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every(e=>e.loaded)}isFontsLoaded(){return this.fonts.every(e=>e.loaded)}createDocumentElement(e){var t=this.createElement(e.documentElement);return t.root=!0,t.addStylesFromStyleDefinition(),this.documentElement=t,t}createElement(e){var t=e.nodeName.replace(/^[^:]+:/,\"\"),r=$e.elementTypes[t];return typeof r<\"u\"?new r(this,e):new R1(this,e)}createTextNode(e){return new V1(this,e)}setViewBox(e){this.screen.setViewBox(c2({document:this},e))}}$e.createCanvas=g2;$e.createImage=d2;$e.elementTypes=f2;function Do(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(a,i).enumerable})),t.push.apply(t,r)}return t}function De(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Do(Object(t),!0).forEach(function(r){an(a,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):Do(Object(t)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(t,r))})}return a}class mt{constructor(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.parser=new za(r),this.screen=new Dr(e,r),this.options=r;var i=new $e(this,r),n=i.createDocumentElement(t);this.document=i,this.documentElement=n}static from(e,t){var r=arguments;return xe(function*(){var i=r.length>2&&r[2]!==void 0?r[2]:{},n=new za(i),o=yield n.parse(t);return new mt(e,o,i)})()}static fromString(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=new za(r),n=i.parseFromString(t);return new mt(e,n,r)}fork(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return mt.from(e,t,De(De({},this.options),r))}forkString(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return mt.fromString(e,t,De(De({},this.options),r))}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}render(){var e=arguments,t=this;return xe(function*(){var r=e.length>0&&e[0]!==void 0?e[0]:{};t.start(De({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0},r)),yield t.ready(),t.stop()})()}start(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{documentElement:t,screen:r,options:i}=this;r.start(t,De(De({enableRedraw:!0},i),e))}stop(){this.screen.stop()}resize(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.documentElement.resize(e,t,r)}}export{Z1 as AElement,Y1 as AnimateColorElement,on as AnimateElement,X1 as AnimateTransformElement,ce as BoundingBox,wo as CB1,Co as CB2,Ao as CB3,Po as CB4,mt as Canvg,D1 as CircleElement,n2 as ClipPathElement,U1 as DefsElement,v2 as DescElement,$e as Document,I as Element,L1 as EllipseElement,Al as FeColorMatrixElement,u2 as FeCompositeElement,s2 as FeDropShadowElement,l2 as FeGaussianBlurElement,o2 as FeMorphologyElement,Br as FilterElement,Z as Font,W1 as FontElement,q1 as FontFaceElement,sn as GElement,Sl as GlyphElement,wl as GradientElement,t2 as ImageElement,k1 as LineElement,G1 as LinearGradientElement,F1 as MarkerElement,kr as MaskElement,Tl as Matrix,Q1 as MissingGlyphElement,x1 as Mouse,rt as PSEUDO_ZERO,za as Parser,A as PathElement,w as PathParser,j1 as PatternElement,k as Point,B1 as PolygonElement,$l as PolylineElement,S as Property,Ro as QB1,No as QB2,Io as QB3,z1 as RadialGradientElement,El as RectElement,Ge as RenderedElement,E1 as Rotate,Nt as SVGElement,a2 as SVGFontLoader,$1 as Scale,Dr as Screen,Ol as Skew,w1 as SkewX,C1 as SkewY,H1 as StopElement,Cl as StyleElement,r2 as SymbolElement,K1 as TRefElement,Lr as TSpanElement,Ce as TextElement,J1 as TextPathElement,h2 as TitleElement,Be as Transform,S1 as Translate,R1 as UnknownElement,i2 as UseElement,b1 as ViewPort,lt as compressSpaces,mt as default,m1 as getSelectorSpecificity,l1 as normalizeAttributeName,h1 as normalizeColor,ml as parseExternalUrl,y2 as presets,ne as toNumbers,s1 as trimLeft,o1 as trimRight,Eo as vectorMagnitude,$o as vectorsAngle,xi as vectorsRatio};\n","size_bytes":150565},"public/assets/purify.es-BFmuJLeH.js":{"content":"/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:Tt,setPrototypeOf:rt,isFrozen:Bt,getPrototypeOf:Yt,getOwnPropertyDescriptor:Xt}=Object;let{freeze:S,seal:O,create:_t}=Object,{apply:we,construct:xe}=typeof Reflect<\"u\"&&Reflect;S||(S=function(o){return o});O||(O=function(o){return o});we||(we=function(o,l,s){return o.apply(l,s)});xe||(xe=function(o,l){return new o(...l)});const le=R(Array.prototype.forEach),jt=R(Array.prototype.lastIndexOf),st=R(Array.prototype.pop),$=R(Array.prototype.push),Vt=R(Array.prototype.splice),fe=R(String.prototype.toLowerCase),Ne=R(String.prototype.toString),lt=R(String.prototype.match),q=R(String.prototype.replace),$t=R(String.prototype.indexOf),qt=R(String.prototype.trim),L=R(Object.prototype.hasOwnProperty),A=R(RegExp.prototype.test),K=Kt(TypeError);function R(r){return function(o){o instanceof RegExp&&(o.lastIndex=0);for(var l=arguments.length,s=new Array(l>1?l-1:0),T=1;T<l;T++)s[T-1]=arguments[T];return we(r,o,s)}}function Kt(r){return function(){for(var o=arguments.length,l=new Array(o),s=0;s<o;s++)l[s]=arguments[s];return xe(r,l)}}function a(r,o){let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:fe;rt&&rt(r,null);let s=o.length;for(;s--;){let T=o[s];if(typeof T==\"string\"){const N=l(T);N!==T&&(Bt(o)||(o[s]=N),T=N)}r[T]=!0}return r}function Zt(r){for(let o=0;o<r.length;o++)L(r,o)||(r[o]=null);return r}function C(r){const o=_t(null);for(const[l,s]of Tt(r))L(r,l)&&(Array.isArray(s)?o[l]=Zt(s):s&&typeof s==\"object\"&&s.constructor===Object?o[l]=C(s):o[l]=s);return o}function Z(r,o){for(;r!==null;){const s=Xt(r,o);if(s){if(s.get)return R(s.get);if(typeof s.value==\"function\")return R(s.value)}r=Yt(r)}function l(){return null}return l}const ct=S([\"a\",\"abbr\",\"acronym\",\"address\",\"area\",\"article\",\"aside\",\"audio\",\"b\",\"bdi\",\"bdo\",\"big\",\"blink\",\"blockquote\",\"body\",\"br\",\"button\",\"canvas\",\"caption\",\"center\",\"cite\",\"code\",\"col\",\"colgroup\",\"content\",\"data\",\"datalist\",\"dd\",\"decorator\",\"del\",\"details\",\"dfn\",\"dialog\",\"dir\",\"div\",\"dl\",\"dt\",\"element\",\"em\",\"fieldset\",\"figcaption\",\"figure\",\"font\",\"footer\",\"form\",\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\",\"head\",\"header\",\"hgroup\",\"hr\",\"html\",\"i\",\"img\",\"input\",\"ins\",\"kbd\",\"label\",\"legend\",\"li\",\"main\",\"map\",\"mark\",\"marquee\",\"menu\",\"menuitem\",\"meter\",\"nav\",\"nobr\",\"ol\",\"optgroup\",\"option\",\"output\",\"p\",\"picture\",\"pre\",\"progress\",\"q\",\"rp\",\"rt\",\"ruby\",\"s\",\"samp\",\"section\",\"select\",\"shadow\",\"small\",\"source\",\"spacer\",\"span\",\"strike\",\"strong\",\"style\",\"sub\",\"summary\",\"sup\",\"table\",\"tbody\",\"td\",\"template\",\"textarea\",\"tfoot\",\"th\",\"thead\",\"time\",\"tr\",\"track\",\"tt\",\"u\",\"ul\",\"var\",\"video\",\"wbr\"]),be=S([\"svg\",\"a\",\"altglyph\",\"altglyphdef\",\"altglyphitem\",\"animatecolor\",\"animatemotion\",\"animatetransform\",\"circle\",\"clippath\",\"defs\",\"desc\",\"ellipse\",\"filter\",\"font\",\"g\",\"glyph\",\"glyphref\",\"hkern\",\"image\",\"line\",\"lineargradient\",\"marker\",\"mask\",\"metadata\",\"mpath\",\"path\",\"pattern\",\"polygon\",\"polyline\",\"radialgradient\",\"rect\",\"stop\",\"style\",\"switch\",\"symbol\",\"text\",\"textpath\",\"title\",\"tref\",\"tspan\",\"view\",\"vkern\"]),Ie=S([\"feBlend\",\"feColorMatrix\",\"feComponentTransfer\",\"feComposite\",\"feConvolveMatrix\",\"feDiffuseLighting\",\"feDisplacementMap\",\"feDistantLight\",\"feDropShadow\",\"feFlood\",\"feFuncA\",\"feFuncB\",\"feFuncG\",\"feFuncR\",\"feGaussianBlur\",\"feImage\",\"feMerge\",\"feMergeNode\",\"feMorphology\",\"feOffset\",\"fePointLight\",\"feSpecularLighting\",\"feSpotLight\",\"feTile\",\"feTurbulence\"]),Jt=S([\"animate\",\"color-profile\",\"cursor\",\"discard\",\"font-face\",\"font-face-format\",\"font-face-name\",\"font-face-src\",\"font-face-uri\",\"foreignobject\",\"hatch\",\"hatchpath\",\"mesh\",\"meshgradient\",\"meshpatch\",\"meshrow\",\"missing-glyph\",\"script\",\"set\",\"solidcolor\",\"unknown\",\"use\"]),Me=S([\"math\",\"menclose\",\"merror\",\"mfenced\",\"mfrac\",\"mglyph\",\"mi\",\"mlabeledtr\",\"mmultiscripts\",\"mn\",\"mo\",\"mover\",\"mpadded\",\"mphantom\",\"mroot\",\"mrow\",\"ms\",\"mspace\",\"msqrt\",\"mstyle\",\"msub\",\"msup\",\"msubsup\",\"mtable\",\"mtd\",\"mtext\",\"mtr\",\"munder\",\"munderover\",\"mprescripts\"]),Qt=S([\"maction\",\"maligngroup\",\"malignmark\",\"mlongdiv\",\"mscarries\",\"mscarry\",\"msgroup\",\"mstack\",\"msline\",\"msrow\",\"semantics\",\"annotation\",\"annotation-xml\",\"mprescripts\",\"none\"]),ft=S([\"#text\"]),ut=S([\"accept\",\"action\",\"align\",\"alt\",\"autocapitalize\",\"autocomplete\",\"autopictureinpicture\",\"autoplay\",\"background\",\"bgcolor\",\"border\",\"capture\",\"cellpadding\",\"cellspacing\",\"checked\",\"cite\",\"class\",\"clear\",\"color\",\"cols\",\"colspan\",\"controls\",\"controlslist\",\"coords\",\"crossorigin\",\"datetime\",\"decoding\",\"default\",\"dir\",\"disabled\",\"disablepictureinpicture\",\"disableremoteplayback\",\"download\",\"draggable\",\"enctype\",\"enterkeyhint\",\"face\",\"for\",\"headers\",\"height\",\"hidden\",\"high\",\"href\",\"hreflang\",\"id\",\"inputmode\",\"integrity\",\"ismap\",\"kind\",\"label\",\"lang\",\"list\",\"loading\",\"loop\",\"low\",\"max\",\"maxlength\",\"media\",\"method\",\"min\",\"minlength\",\"multiple\",\"muted\",\"name\",\"nonce\",\"noshade\",\"novalidate\",\"nowrap\",\"open\",\"optimum\",\"pattern\",\"placeholder\",\"playsinline\",\"popover\",\"popovertarget\",\"popovertargetaction\",\"poster\",\"preload\",\"pubdate\",\"radiogroup\",\"readonly\",\"rel\",\"required\",\"rev\",\"reversed\",\"role\",\"rows\",\"rowspan\",\"spellcheck\",\"scope\",\"selected\",\"shape\",\"size\",\"sizes\",\"span\",\"srclang\",\"start\",\"src\",\"srcset\",\"step\",\"style\",\"summary\",\"tabindex\",\"title\",\"translate\",\"type\",\"usemap\",\"valign\",\"value\",\"width\",\"wrap\",\"xmlns\",\"slot\"]),Ce=S([\"accent-height\",\"accumulate\",\"additive\",\"alignment-baseline\",\"amplitude\",\"ascent\",\"attributename\",\"attributetype\",\"azimuth\",\"basefrequency\",\"baseline-shift\",\"begin\",\"bias\",\"by\",\"class\",\"clip\",\"clippathunits\",\"clip-path\",\"clip-rule\",\"color\",\"color-interpolation\",\"color-interpolation-filters\",\"color-profile\",\"color-rendering\",\"cx\",\"cy\",\"d\",\"dx\",\"dy\",\"diffuseconstant\",\"direction\",\"display\",\"divisor\",\"dur\",\"edgemode\",\"elevation\",\"end\",\"exponent\",\"fill\",\"fill-opacity\",\"fill-rule\",\"filter\",\"filterunits\",\"flood-color\",\"flood-opacity\",\"font-family\",\"font-size\",\"font-size-adjust\",\"font-stretch\",\"font-style\",\"font-variant\",\"font-weight\",\"fx\",\"fy\",\"g1\",\"g2\",\"glyph-name\",\"glyphref\",\"gradientunits\",\"gradienttransform\",\"height\",\"href\",\"id\",\"image-rendering\",\"in\",\"in2\",\"intercept\",\"k\",\"k1\",\"k2\",\"k3\",\"k4\",\"kerning\",\"keypoints\",\"keysplines\",\"keytimes\",\"lang\",\"lengthadjust\",\"letter-spacing\",\"kernelmatrix\",\"kernelunitlength\",\"lighting-color\",\"local\",\"marker-end\",\"marker-mid\",\"marker-start\",\"markerheight\",\"markerunits\",\"markerwidth\",\"maskcontentunits\",\"maskunits\",\"max\",\"mask\",\"media\",\"method\",\"mode\",\"min\",\"name\",\"numoctaves\",\"offset\",\"operator\",\"opacity\",\"order\",\"orient\",\"orientation\",\"origin\",\"overflow\",\"paint-order\",\"path\",\"pathlength\",\"patterncontentunits\",\"patterntransform\",\"patternunits\",\"points\",\"preservealpha\",\"preserveaspectratio\",\"primitiveunits\",\"r\",\"rx\",\"ry\",\"radius\",\"refx\",\"refy\",\"repeatcount\",\"repeatdur\",\"restart\",\"result\",\"rotate\",\"scale\",\"seed\",\"shape-rendering\",\"slope\",\"specularconstant\",\"specularexponent\",\"spreadmethod\",\"startoffset\",\"stddeviation\",\"stitchtiles\",\"stop-color\",\"stop-opacity\",\"stroke-dasharray\",\"stroke-dashoffset\",\"stroke-linecap\",\"stroke-linejoin\",\"stroke-miterlimit\",\"stroke-opacity\",\"stroke\",\"stroke-width\",\"style\",\"surfacescale\",\"systemlanguage\",\"tabindex\",\"tablevalues\",\"targetx\",\"targety\",\"transform\",\"transform-origin\",\"text-anchor\",\"text-decoration\",\"text-rendering\",\"textlength\",\"type\",\"u1\",\"u2\",\"unicode\",\"values\",\"viewbox\",\"visibility\",\"version\",\"vert-adv-y\",\"vert-origin-x\",\"vert-origin-y\",\"width\",\"word-spacing\",\"wrap\",\"writing-mode\",\"xchannelselector\",\"ychannelselector\",\"x\",\"x1\",\"x2\",\"xmlns\",\"y\",\"y1\",\"y2\",\"z\",\"zoomandpan\"]),mt=S([\"accent\",\"accentunder\",\"align\",\"bevelled\",\"close\",\"columnsalign\",\"columnlines\",\"columnspan\",\"denomalign\",\"depth\",\"dir\",\"display\",\"displaystyle\",\"encoding\",\"fence\",\"frame\",\"height\",\"href\",\"id\",\"largeop\",\"length\",\"linethickness\",\"lspace\",\"lquote\",\"mathbackground\",\"mathcolor\",\"mathsize\",\"mathvariant\",\"maxsize\",\"minsize\",\"movablelimits\",\"notation\",\"numalign\",\"open\",\"rowalign\",\"rowlines\",\"rowspacing\",\"rowspan\",\"rspace\",\"rquote\",\"scriptlevel\",\"scriptminsize\",\"scriptsizemultiplier\",\"selection\",\"separator\",\"separators\",\"stretchy\",\"subscriptshift\",\"supscriptshift\",\"symmetric\",\"voffset\",\"width\",\"xmlns\"]),ce=S([\"xlink:href\",\"xml:id\",\"xlink:title\",\"xml:space\",\"xmlns:xlink\"]),en=O(/\\{\\{[\\w\\W]*|[\\w\\W]*\\}\\}/gm),tn=O(/<%[\\w\\W]*|[\\w\\W]*%>/gm),nn=O(/\\$\\{[\\w\\W]*/gm),on=O(/^data-[\\-\\w.\\u00B7-\\uFFFF]+$/),an=O(/^aria-[\\-\\w]+$/),Et=O(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i),rn=O(/^(?:\\w+script|data):/i),sn=O(/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g),gt=O(/^html$/i),ln=O(/^[a-z][.\\w]*(-[.\\w]+)+$/i);var pt=Object.freeze({__proto__:null,ARIA_ATTR:an,ATTR_WHITESPACE:sn,CUSTOM_ELEMENT:ln,DATA_ATTR:on,DOCTYPE_NAME:gt,ERB_EXPR:tn,IS_ALLOWED_URI:Et,IS_SCRIPT_OR_DATA:rn,MUSTACHE_EXPR:en,TMPLIT_EXPR:nn});const J={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},cn=function(){return typeof window>\"u\"?null:window},fn=function(o,l){if(typeof o!=\"object\"||typeof o.createPolicy!=\"function\")return null;let s=null;const T=\"data-tt-policy-suffix\";l&&l.hasAttribute(T)&&(s=l.getAttribute(T));const N=\"dompurify\"+(s?\"#\"+s:\"\");try{return o.createPolicy(N,{createHTML(x){return x},createScriptURL(x){return x}})}catch{return console.warn(\"TrustedTypes policy \"+N+\" could not be created.\"),null}},dt=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function ht(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:cn();const o=i=>ht(i);if(o.version=\"3.2.6\",o.removed=[],!r||!r.document||r.document.nodeType!==J.document||!r.Element)return o.isSupported=!1,o;let{document:l}=r;const s=l,T=s.currentScript,{DocumentFragment:N,HTMLTemplateElement:x,Node:ue,Element:Pe,NodeFilter:G,NamedNodeMap:At=r.NamedNodeMap||r.MozNamedAttrMap,HTMLFormElement:St,DOMParser:Rt,trustedTypes:Q}=r,W=Pe.prototype,yt=Z(W,\"cloneNode\"),Ot=Z(W,\"remove\"),Lt=Z(W,\"nextSibling\"),Dt=Z(W,\"childNodes\"),ee=Z(W,\"parentNode\");if(typeof x==\"function\"){const i=l.createElement(\"template\");i.content&&i.content.ownerDocument&&(l=i.content.ownerDocument)}let g,B=\"\";const{implementation:me,createNodeIterator:Nt,createDocumentFragment:bt,getElementsByTagName:It}=l,{importNode:Mt}=s;let h=dt();o.isSupported=typeof Tt==\"function\"&&typeof ee==\"function\"&&me&&me.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:pe,ERB_EXPR:de,TMPLIT_EXPR:Te,DATA_ATTR:Ct,ARIA_ATTR:wt,IS_SCRIPT_OR_DATA:xt,ATTR_WHITESPACE:ve,CUSTOM_ELEMENT:Pt}=pt;let{IS_ALLOWED_URI:ke}=pt,m=null;const Ue=a({},[...ct,...be,...Ie,...Me,...ft]);let d=null;const Fe=a({},[...ut,...Ce,...mt,...ce]);let f=Object.seal(_t(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Y=null,_e=null,He=!0,Ee=!0,ze=!1,Ge=!0,P=!1,te=!0,w=!1,ge=!1,he=!1,v=!1,ne=!1,oe=!1,We=!0,Be=!1;const vt=\"user-content-\";let Ae=!0,X=!1,k={},U=null;const Ye=a({},[\"annotation-xml\",\"audio\",\"colgroup\",\"desc\",\"foreignobject\",\"head\",\"iframe\",\"math\",\"mi\",\"mn\",\"mo\",\"ms\",\"mtext\",\"noembed\",\"noframes\",\"noscript\",\"plaintext\",\"script\",\"style\",\"svg\",\"template\",\"thead\",\"title\",\"video\",\"xmp\"]);let Xe=null;const je=a({},[\"audio\",\"video\",\"img\",\"source\",\"image\",\"track\"]);let Se=null;const Ve=a({},[\"alt\",\"class\",\"for\",\"id\",\"label\",\"name\",\"pattern\",\"placeholder\",\"role\",\"summary\",\"title\",\"value\",\"style\",\"xmlns\"]),ie=\"http://www.w3.org/1998/Math/MathML\",ae=\"http://www.w3.org/2000/svg\",b=\"http://www.w3.org/1999/xhtml\";let F=b,Re=!1,ye=null;const kt=a({},[ie,ae,b],Ne);let re=a({},[\"mi\",\"mo\",\"mn\",\"ms\",\"mtext\"]),se=a({},[\"annotation-xml\"]);const Ut=a({},[\"title\",\"style\",\"font\",\"a\",\"script\"]);let j=null;const Ft=[\"application/xhtml+xml\",\"text/html\"],Ht=\"text/html\";let p=null,H=null;const zt=l.createElement(\"form\"),$e=function(e){return e instanceof RegExp||e instanceof Function},Oe=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(H&&H===e)){if((!e||typeof e!=\"object\")&&(e={}),e=C(e),j=Ft.indexOf(e.PARSER_MEDIA_TYPE)===-1?Ht:e.PARSER_MEDIA_TYPE,p=j===\"application/xhtml+xml\"?Ne:fe,m=L(e,\"ALLOWED_TAGS\")?a({},e.ALLOWED_TAGS,p):Ue,d=L(e,\"ALLOWED_ATTR\")?a({},e.ALLOWED_ATTR,p):Fe,ye=L(e,\"ALLOWED_NAMESPACES\")?a({},e.ALLOWED_NAMESPACES,Ne):kt,Se=L(e,\"ADD_URI_SAFE_ATTR\")?a(C(Ve),e.ADD_URI_SAFE_ATTR,p):Ve,Xe=L(e,\"ADD_DATA_URI_TAGS\")?a(C(je),e.ADD_DATA_URI_TAGS,p):je,U=L(e,\"FORBID_CONTENTS\")?a({},e.FORBID_CONTENTS,p):Ye,Y=L(e,\"FORBID_TAGS\")?a({},e.FORBID_TAGS,p):C({}),_e=L(e,\"FORBID_ATTR\")?a({},e.FORBID_ATTR,p):C({}),k=L(e,\"USE_PROFILES\")?e.USE_PROFILES:!1,He=e.ALLOW_ARIA_ATTR!==!1,Ee=e.ALLOW_DATA_ATTR!==!1,ze=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Ge=e.ALLOW_SELF_CLOSE_IN_ATTR!==!1,P=e.SAFE_FOR_TEMPLATES||!1,te=e.SAFE_FOR_XML!==!1,w=e.WHOLE_DOCUMENT||!1,v=e.RETURN_DOM||!1,ne=e.RETURN_DOM_FRAGMENT||!1,oe=e.RETURN_TRUSTED_TYPE||!1,he=e.FORCE_BODY||!1,We=e.SANITIZE_DOM!==!1,Be=e.SANITIZE_NAMED_PROPS||!1,Ae=e.KEEP_CONTENT!==!1,X=e.IN_PLACE||!1,ke=e.ALLOWED_URI_REGEXP||Et,F=e.NAMESPACE||b,re=e.MATHML_TEXT_INTEGRATION_POINTS||re,se=e.HTML_INTEGRATION_POINTS||se,f=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&$e(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(f.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&$e(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(f.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements==\"boolean\"&&(f.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),P&&(Ee=!1),ne&&(v=!0),k&&(m=a({},ft),d=[],k.html===!0&&(a(m,ct),a(d,ut)),k.svg===!0&&(a(m,be),a(d,Ce),a(d,ce)),k.svgFilters===!0&&(a(m,Ie),a(d,Ce),a(d,ce)),k.mathMl===!0&&(a(m,Me),a(d,mt),a(d,ce))),e.ADD_TAGS&&(m===Ue&&(m=C(m)),a(m,e.ADD_TAGS,p)),e.ADD_ATTR&&(d===Fe&&(d=C(d)),a(d,e.ADD_ATTR,p)),e.ADD_URI_SAFE_ATTR&&a(Se,e.ADD_URI_SAFE_ATTR,p),e.FORBID_CONTENTS&&(U===Ye&&(U=C(U)),a(U,e.FORBID_CONTENTS,p)),Ae&&(m[\"#text\"]=!0),w&&a(m,[\"html\",\"head\",\"body\"]),m.table&&(a(m,[\"tbody\"]),delete Y.tbody),e.TRUSTED_TYPES_POLICY){if(typeof e.TRUSTED_TYPES_POLICY.createHTML!=\"function\")throw K('TRUSTED_TYPES_POLICY configuration option must provide a \"createHTML\" hook.');if(typeof e.TRUSTED_TYPES_POLICY.createScriptURL!=\"function\")throw K('TRUSTED_TYPES_POLICY configuration option must provide a \"createScriptURL\" hook.');g=e.TRUSTED_TYPES_POLICY,B=g.createHTML(\"\")}else g===void 0&&(g=fn(Q,T)),g!==null&&typeof B==\"string\"&&(B=g.createHTML(\"\"));S&&S(e),H=e}},qe=a({},[...be,...Ie,...Jt]),Ke=a({},[...Me,...Qt]),Gt=function(e){let t=ee(e);(!t||!t.tagName)&&(t={namespaceURI:F,tagName:\"template\"});const n=fe(e.tagName),c=fe(t.tagName);return ye[e.namespaceURI]?e.namespaceURI===ae?t.namespaceURI===b?n===\"svg\":t.namespaceURI===ie?n===\"svg\"&&(c===\"annotation-xml\"||re[c]):!!qe[n]:e.namespaceURI===ie?t.namespaceURI===b?n===\"math\":t.namespaceURI===ae?n===\"math\"&&se[c]:!!Ke[n]:e.namespaceURI===b?t.namespaceURI===ae&&!se[c]||t.namespaceURI===ie&&!re[c]?!1:!Ke[n]&&(Ut[n]||!qe[n]):!!(j===\"application/xhtml+xml\"&&ye[e.namespaceURI]):!1},D=function(e){$(o.removed,{element:e});try{ee(e).removeChild(e)}catch{Ot(e)}},z=function(e,t){try{$(o.removed,{attribute:t.getAttributeNode(e),from:t})}catch{$(o.removed,{attribute:null,from:t})}if(t.removeAttribute(e),e===\"is\")if(v||ne)try{D(t)}catch{}else try{t.setAttribute(e,\"\")}catch{}},Ze=function(e){let t=null,n=null;if(he)e=\"<remove></remove>\"+e;else{const u=lt(e,/^[\\r\\n\\t ]+/);n=u&&u[0]}j===\"application/xhtml+xml\"&&F===b&&(e='<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>'+e+\"</body></html>\");const c=g?g.createHTML(e):e;if(F===b)try{t=new Rt().parseFromString(c,j)}catch{}if(!t||!t.documentElement){t=me.createDocument(F,\"template\",null);try{t.documentElement.innerHTML=Re?B:c}catch{}}const _=t.body||t.documentElement;return e&&n&&_.insertBefore(l.createTextNode(n),_.childNodes[0]||null),F===b?It.call(t,w?\"html\":\"body\")[0]:w?t.documentElement:_},Je=function(e){return Nt.call(e.ownerDocument||e,e,G.SHOW_ELEMENT|G.SHOW_COMMENT|G.SHOW_TEXT|G.SHOW_PROCESSING_INSTRUCTION|G.SHOW_CDATA_SECTION,null)},Le=function(e){return e instanceof St&&(typeof e.nodeName!=\"string\"||typeof e.textContent!=\"string\"||typeof e.removeChild!=\"function\"||!(e.attributes instanceof At)||typeof e.removeAttribute!=\"function\"||typeof e.setAttribute!=\"function\"||typeof e.namespaceURI!=\"string\"||typeof e.insertBefore!=\"function\"||typeof e.hasChildNodes!=\"function\")},Qe=function(e){return typeof ue==\"function\"&&e instanceof ue};function I(i,e,t){le(i,n=>{n.call(o,e,t,H)})}const et=function(e){let t=null;if(I(h.beforeSanitizeElements,e,null),Le(e))return D(e),!0;const n=p(e.nodeName);if(I(h.uponSanitizeElement,e,{tagName:n,allowedTags:m}),te&&e.hasChildNodes()&&!Qe(e.firstElementChild)&&A(/<[/\\w!]/g,e.innerHTML)&&A(/<[/\\w!]/g,e.textContent)||e.nodeType===J.progressingInstruction||te&&e.nodeType===J.comment&&A(/<[/\\w]/g,e.data))return D(e),!0;if(!m[n]||Y[n]){if(!Y[n]&&nt(n)&&(f.tagNameCheck instanceof RegExp&&A(f.tagNameCheck,n)||f.tagNameCheck instanceof Function&&f.tagNameCheck(n)))return!1;if(Ae&&!U[n]){const c=ee(e)||e.parentNode,_=Dt(e)||e.childNodes;if(_&&c){const u=_.length;for(let y=u-1;y>=0;--y){const M=yt(_[y],!0);M.__removalCount=(e.__removalCount||0)+1,c.insertBefore(M,Lt(e))}}}return D(e),!0}return e instanceof Pe&&!Gt(e)||(n===\"noscript\"||n===\"noembed\"||n===\"noframes\")&&A(/<\\/no(script|embed|frames)/i,e.innerHTML)?(D(e),!0):(P&&e.nodeType===J.text&&(t=e.textContent,le([pe,de,Te],c=>{t=q(t,c,\" \")}),e.textContent!==t&&($(o.removed,{element:e.cloneNode()}),e.textContent=t)),I(h.afterSanitizeElements,e,null),!1)},tt=function(e,t,n){if(We&&(t===\"id\"||t===\"name\")&&(n in l||n in zt))return!1;if(!(Ee&&!_e[t]&&A(Ct,t))){if(!(He&&A(wt,t))){if(!d[t]||_e[t]){if(!(nt(e)&&(f.tagNameCheck instanceof RegExp&&A(f.tagNameCheck,e)||f.tagNameCheck instanceof Function&&f.tagNameCheck(e))&&(f.attributeNameCheck instanceof RegExp&&A(f.attributeNameCheck,t)||f.attributeNameCheck instanceof Function&&f.attributeNameCheck(t))||t===\"is\"&&f.allowCustomizedBuiltInElements&&(f.tagNameCheck instanceof RegExp&&A(f.tagNameCheck,n)||f.tagNameCheck instanceof Function&&f.tagNameCheck(n))))return!1}else if(!Se[t]){if(!A(ke,q(n,ve,\"\"))){if(!((t===\"src\"||t===\"xlink:href\"||t===\"href\")&&e!==\"script\"&&$t(n,\"data:\")===0&&Xe[e])){if(!(ze&&!A(xt,q(n,ve,\"\")))){if(n)return!1}}}}}}return!0},nt=function(e){return e!==\"annotation-xml\"&&lt(e,Pt)},ot=function(e){I(h.beforeSanitizeAttributes,e,null);const{attributes:t}=e;if(!t||Le(e))return;const n={attrName:\"\",attrValue:\"\",keepAttr:!0,allowedAttributes:d,forceKeepAttr:void 0};let c=t.length;for(;c--;){const _=t[c],{name:u,namespaceURI:y,value:M}=_,V=p(u),De=M;let E=u===\"value\"?De:qt(De);if(n.attrName=V,n.attrValue=E,n.keepAttr=!0,n.forceKeepAttr=void 0,I(h.uponSanitizeAttribute,e,n),E=n.attrValue,Be&&(V===\"id\"||V===\"name\")&&(z(u,e),E=vt+E),te&&A(/((--!?|])>)|<\\/(style|title)/i,E)){z(u,e);continue}if(n.forceKeepAttr)continue;if(!n.keepAttr){z(u,e);continue}if(!Ge&&A(/\\/>/i,E)){z(u,e);continue}P&&le([pe,de,Te],at=>{E=q(E,at,\" \")});const it=p(e.nodeName);if(!tt(it,V,E)){z(u,e);continue}if(g&&typeof Q==\"object\"&&typeof Q.getAttributeType==\"function\"&&!y)switch(Q.getAttributeType(it,V)){case\"TrustedHTML\":{E=g.createHTML(E);break}case\"TrustedScriptURL\":{E=g.createScriptURL(E);break}}if(E!==De)try{y?e.setAttributeNS(y,u,E):e.setAttribute(u,E),Le(e)?D(e):st(o.removed)}catch{z(u,e)}}I(h.afterSanitizeAttributes,e,null)},Wt=function i(e){let t=null;const n=Je(e);for(I(h.beforeSanitizeShadowDOM,e,null);t=n.nextNode();)I(h.uponSanitizeShadowNode,t,null),et(t),ot(t),t.content instanceof N&&i(t.content);I(h.afterSanitizeShadowDOM,e,null)};return o.sanitize=function(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=null,n=null,c=null,_=null;if(Re=!i,Re&&(i=\"<!-->\"),typeof i!=\"string\"&&!Qe(i))if(typeof i.toString==\"function\"){if(i=i.toString(),typeof i!=\"string\")throw K(\"dirty is not a string, aborting\")}else throw K(\"toString is not a function\");if(!o.isSupported)return i;if(ge||Oe(e),o.removed=[],typeof i==\"string\"&&(X=!1),X){if(i.nodeName){const M=p(i.nodeName);if(!m[M]||Y[M])throw K(\"root node is forbidden and cannot be sanitized in-place\")}}else if(i instanceof ue)t=Ze(\"<!---->\"),n=t.ownerDocument.importNode(i,!0),n.nodeType===J.element&&n.nodeName===\"BODY\"||n.nodeName===\"HTML\"?t=n:t.appendChild(n);else{if(!v&&!P&&!w&&i.indexOf(\"<\")===-1)return g&&oe?g.createHTML(i):i;if(t=Ze(i),!t)return v?null:oe?B:\"\"}t&&he&&D(t.firstChild);const u=Je(X?i:t);for(;c=u.nextNode();)et(c),ot(c),c.content instanceof N&&Wt(c.content);if(X)return i;if(v){if(ne)for(_=bt.call(t.ownerDocument);t.firstChild;)_.appendChild(t.firstChild);else _=t;return(d.shadowroot||d.shadowrootmode)&&(_=Mt.call(s,_,!0)),_}let y=w?t.outerHTML:t.innerHTML;return w&&m[\"!doctype\"]&&t.ownerDocument&&t.ownerDocument.doctype&&t.ownerDocument.doctype.name&&A(gt,t.ownerDocument.doctype.name)&&(y=\"<!DOCTYPE \"+t.ownerDocument.doctype.name+`>\n`+y),P&&le([pe,de,Te],M=>{y=q(y,M,\" \")}),g&&oe?g.createHTML(y):y},o.setConfig=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Oe(i),ge=!0},o.clearConfig=function(){H=null,ge=!1},o.isValidAttribute=function(i,e,t){H||Oe({});const n=p(i),c=p(e);return tt(n,c,t)},o.addHook=function(i,e){typeof e==\"function\"&&$(h[i],e)},o.removeHook=function(i,e){if(e!==void 0){const t=jt(h[i],e);return t===-1?void 0:Vt(h[i],t,1)[0]}return st(h[i])},o.removeHooks=function(i){h[i]=[]},o.removeAllHooks=function(){h=dt()},o}var un=ht();export{un as default};\n","size_bytes":21925},"tests/e2e/chatbot.spec.ts":{"content":"import { test, expect } from '@playwright/test';\n\ntest.describe('Chatbot', () => {\n  test.beforeEach(async ({ page }) => {\n    // Mock OpenAI API responses\n    await page.route('**/api/chatbot/**', async (route) => {\n      const url = route.request().url();\n      const method = route.request().method();\n      \n      if (method === 'POST' && url.includes('/message')) {\n        await route.fulfill({\n          status: 200,\n          contentType: 'application/json',\n          body: JSON.stringify({\n            message: 'Bonjour ! Je suis lÃ  pour vous aider avec vos Ã©vÃ©nements. Comment puis-je vous assister ?',\n            success: true\n          })\n        });\n      } else if (url.includes('/event-suggestions')) {\n        await route.fulfill({\n          status: 200,\n          contentType: 'application/json',\n          body: JSON.stringify({\n            message: 'Voici quelques suggestions d\\'Ã©vÃ©nements : 1. Match de football amical, 2. Tournoi de tennis, 3. RandonnÃ©e en montagne',\n            success: true\n          })\n        });\n      } else if (url.includes('/organization-help')) {\n        await route.fulfill({\n          status: 200,\n          contentType: 'application/json',\n          body: JSON.stringify({\n            message: 'Pour votre organisation, je recommande d\\'utiliser les fonctionnalitÃ©s de gestion des membres et d\\'organisation d\\'Ã©vÃ©nements rÃ©currents.',\n            success: true\n          })\n        });\n      }\n    });\n  });\n\n  test('chatbot responds to general questions', async ({ page }) => {\n    await page.goto('/chatbot');\n    \n    // Type message in chat input\n    await page.fill('[data-testid=\"chat-input\"]', 'Comment crÃ©er un Ã©vÃ©nement ?');\n    await page.click('[data-testid=\"send-button\"]');\n    \n    // Wait for response\n    await expect(page.locator('[data-testid=\"chat-messages\"]')).toContainText('Bonjour');\n    await expect(page.locator('[data-testid=\"chat-messages\"]')).toContainText('Ã©vÃ©nements');\n  });\n\n  test('chatbot provides event suggestions', async ({ page }) => {\n    await page.goto('/chatbot');\n    \n    // Ask for event suggestions\n    await page.fill('[data-testid=\"chat-input\"]', 'SuggÃ¨re-moi des Ã©vÃ©nements sportifs');\n    await page.click('[data-testid=\"send-button\"]');\n    \n    // Should show suggestions\n    await expect(page.locator('[data-testid=\"chat-messages\"]')).toContainText('suggestions');\n    await expect(page.locator('[data-testid=\"chat-messages\"]')).toContainText('football');\n  });\n\n  test('chatbot provides organization-specific help when logged in', async ({ page }) => {\n    // First register and login\n    await page.goto('/register');\n    await page.fill('[name=\"name\"]', 'Test Club');\n    await page.selectOption('[name=\"type\"]', 'club');\n    await page.fill('[name=\"email\"]', `chatbot-test-${Date.now()}@example.com`);\n    await page.fill('[name=\"contactFirstName\"]', 'Chat');\n    await page.fill('[name=\"contactLastName\"]', 'Bot');\n    await page.fill('[name=\"password\"]', 'password123');\n    await page.click('button[type=\"submit\"]');\n    \n    // Go to chatbot\n    await page.goto('/chatbot');\n    \n    // Ask organization-specific question\n    await page.fill('[data-testid=\"chat-input\"]', 'Comment gÃ©rer mes membres ?');\n    await page.click('[data-testid=\"send-button\"]');\n    \n    // Should provide organization-specific advice\n    await expect(page.locator('[data-testid=\"chat-messages\"]')).toContainText('organisation');\n    await expect(page.locator('[data-testid=\"chat-messages\"]')).toContainText('membres');\n  });\n\n  test('chatbot handles API errors gracefully', async ({ page }) => {\n    // Mock API error\n    await page.route('**/api/chatbot/message', async (route) => {\n      await route.fulfill({\n        status: 500,\n        contentType: 'application/json',\n        body: JSON.stringify({\n          message: 'Je rencontre un problÃ¨me technique. Veuillez rÃ©essayer.',\n          success: false,\n          error: 'API Error'\n        })\n      });\n    });\n    \n    await page.goto('/chatbot');\n    \n    await page.fill('[data-testid=\"chat-input\"]', 'Test message');\n    await page.click('[data-testid=\"send-button\"]');\n    \n    // Should show error message\n    await expect(page.locator('[data-testid=\"chat-messages\"]')).toContainText('problÃ¨me technique');\n  });\n\n  test('chatbot maintains conversation history', async ({ page }) => {\n    await page.goto('/chatbot');\n    \n    // Send first message\n    await page.fill('[data-testid=\"chat-input\"]', 'Bonjour');\n    await page.click('[data-testid=\"send-button\"]');\n    \n    await expect(page.locator('[data-testid=\"chat-messages\"]')).toContainText('Bonjour');\n    \n    // Send follow-up message\n    await page.fill('[data-testid=\"chat-input\"]', 'Merci pour votre aide');\n    await page.click('[data-testid=\"send-button\"]');\n    \n    // Both messages should be visible\n    const messages = page.locator('[data-testid=\"chat-messages\"] .message');\n    await expect(messages).toHaveCount(4); // 2 user messages + 2 bot responses\n  });\n\n  test('chatbot input validation', async ({ page }) => {\n    await page.goto('/chatbot');\n    \n    // Try to send empty message\n    await page.click('[data-testid=\"send-button\"]');\n    \n    // Should not send empty message\n    const messages = page.locator('[data-testid=\"chat-messages\"] .message');\n    await expect(messages).toHaveCount(0);\n    \n    // Input should still be focused or show validation message\n    await expect(page.locator('[data-testid=\"chat-input\"]')).toBeFocused();\n  });\n});","size_bytes":5507},"tests/e2e/events.spec.ts":{"content":"import { test, expect } from '@playwright/test';\n\ntest.describe('Events Management', () => {\n  let organizationId: string;\n\n  test.beforeEach(async ({ page }) => {\n    // Register and login as organization\n    await page.goto('/register');\n    await page.fill('[name=\"name\"]', 'Test Sports Club');\n    await page.selectOption('[name=\"type\"]', 'club');\n    await page.fill('[name=\"email\"]', `test-${Date.now()}@example.com`);\n    await page.fill('[name=\"contactFirstName\"]', 'Test');\n    await page.fill('[name=\"contactLastName\"]', 'Manager');\n    await page.fill('[name=\"password\"]', 'password123');\n    await page.click('button[type=\"submit\"]');\n    \n    // Wait for redirect to dashboard\n    await expect(page).toHaveURL(/\\/dashboard/);\n  });\n\n  test('create new event updates active events counter', async ({ page }) => {\n    // Get initial active events count\n    const initialCount = await page.locator('[data-testid=\"active-events-count\"]').textContent();\n    \n    // Create new event\n    await page.click('a[href=\"/events/new\"]');\n    await page.fill('[name=\"name\"]', 'Match de Football Test');\n    await page.fill('[name=\"sport\"]', 'Football');\n    await page.fill('[name=\"description\"]', 'Un match de test');\n    \n    // Set future date\n    const futureDate = new Date();\n    futureDate.setDate(futureDate.getDate() + 7);\n    await page.fill('[name=\"date\"]', futureDate.toISOString().slice(0, 16));\n    \n    await page.fill('[name=\"duration\"]', '2 heures');\n    await page.fill('[name=\"meetingPoint\"]', 'Stade Municipal');\n    await page.fill('[name=\"destination\"]', 'Terrain A');\n    \n    await page.click('button[type=\"submit\"]');\n    \n    // Should redirect back to events or dashboard\n    await expect(page).toHaveURL(/\\/(dashboard|events)/);\n    \n    // Check that active events counter increased\n    await page.goto('/dashboard');\n    const newCount = await page.locator('[data-testid=\"active-events-count\"]').textContent();\n    expect(parseInt(newCount || '0')).toBeGreaterThan(parseInt(initialCount || '0'));\n  });\n\n  test('participant confirmation updates counters', async ({ page }) => {\n    // First create an event\n    await page.click('a[href=\"/events/new\"]');\n    await page.fill('[name=\"name\"]', 'RandonnÃ©e Test');\n    await page.fill('[name=\"sport\"]', 'RandonnÃ©e');\n    await page.fill('[name=\"description\"]', 'Une randonnÃ©e de test');\n    \n    const futureDate = new Date();\n    futureDate.setDate(futureDate.getDate() + 10);\n    await page.fill('[name=\"date\"]', futureDate.toISOString().slice(0, 16));\n    \n    await page.fill('[name=\"meetingPoint\"]', 'Parking Central');\n    await page.fill('[name=\"destination\"]', 'Sommet du Mont');\n    \n    // Add invitation email\n    await page.fill('[name=\"inviteEmails\"]', 'participant@example.com');\n    \n    await page.click('button[type=\"submit\"]');\n    \n    // Get event ID from URL or response\n    await page.waitForURL(/\\/events\\/\\w+/);\n    const eventUrl = page.url();\n    const eventId = eventUrl.match(/\\/events\\/(\\w+)/)?.[1];\n    \n    if (eventId) {\n      // Simulate participant response (would normally come via email link)\n      await page.goto(`/invitation/mock-token-${eventId}`);\n      \n      // Fill participation form\n      await page.fill('[name=\"name\"]', 'Jean Dupont');\n      await page.selectOption('[name=\"role\"]', 'driver');\n      await page.fill('[name=\"availableSeats\"]', '4');\n      await page.fill('[name=\"comment\"]', 'J\\'ai une voiture spacieuse');\n      \n      await page.click('button:has-text(\"Confirmer ma participation\")');\n      \n      // Go back to dashboard to check updated counters\n      await page.goto('/dashboard');\n      \n      // Check that counters were updated\n      const participantsCount = await page.locator('[data-testid=\"participants-count\"]').textContent();\n      const driversCount = await page.locator('[data-testid=\"drivers-count\"]').textContent();\n      const availableSeatsCount = await page.locator('[data-testid=\"available-seats-count\"]').textContent();\n      \n      expect(parseInt(participantsCount || '0')).toBeGreaterThan(0);\n      expect(parseInt(driversCount || '0')).toBeGreaterThan(0);\n      expect(parseInt(availableSeatsCount || '0')).toBeGreaterThan(0);\n    }\n  });\n\n  test('passenger participation reduces available seats', async ({ page }) => {\n    // Similar setup as above but test passenger role\n    await page.click('a[href=\"/events/new\"]');\n    await page.fill('[name=\"name\"]', 'Match Tennis Test');\n    await page.fill('[name=\"sport\"]', 'Tennis');\n    \n    const futureDate = new Date();\n    futureDate.setDate(futureDate.getDate() + 5);\n    await page.fill('[name=\"date\"]', futureDate.toISOString().slice(0, 16));\n    \n    await page.fill('[name=\"meetingPoint\"]', 'Club de Tennis');\n    await page.fill('[name=\"destination\"]', 'Courts ExtÃ©rieurs');\n    \n    await page.click('button[type=\"submit\"]');\n    \n    // Get initial stats\n    await page.goto('/dashboard');\n    const initialSeats = parseInt(await page.locator('[data-testid=\"available-seats-count\"]').textContent() || '0');\n    \n    // Add a driver first (to have available seats)\n    // This would typically be done through invitation flow\n    // For test, we'll simulate API calls or use the UI\n    \n    // Then add a passenger\n    // Simulate passenger response\n    const eventUrl = page.url();\n    if (eventUrl.includes('/events/')) {\n      // Mock passenger participation\n      await page.evaluate(() => {\n        // This would normally be done through the invitation system\n        fetch('/api/events/mock-event/participants', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            name: 'Marie Martin',\n            email: 'marie@example.com',\n            role: 'passenger'\n          })\n        });\n      });\n      \n      // Refresh dashboard to see updates\n      await page.reload();\n      \n      // Available seats should decrease\n      const newSeats = parseInt(await page.locator('[data-testid=\"available-seats-count\"]').textContent() || '0');\n      expect(newSeats).toBeLessThanOrEqual(initialSeats);\n    }\n  });\n});","size_bytes":6114},"tests/e2e/registration.spec.ts":{"content":"import { test, expect } from '@playwright/test';\n\ntest.describe('Registration', () => {\n  test('successful organization registration with SIREN number', async ({ page }) => {\n    await page.goto('/register');\n\n    // Fill registration form\n    await page.fill('[name=\"name\"]', 'Test Organization');\n    await page.selectOption('[name=\"type\"]', 'association');\n    await page.fill('[name=\"email\"]', 'test@example.com');\n    await page.fill('[name=\"phone\"]', '0123456789');\n    await page.fill('[name=\"address\"]', '123 Rue de Test');\n    await page.fill('[name=\"description\"]', 'Une organisation de test');\n    await page.fill('[name=\"contactFirstName\"]', 'John');\n    await page.fill('[name=\"contactLastName\"]', 'Doe');\n    await page.fill('[name=\"sirenNumber\"]', '123456789');\n    await page.fill('[name=\"password\"]', 'motdepasse123');\n\n    // Submit form\n    await page.click('button[type=\"submit\"]');\n\n    // Should redirect to dashboard\n    await expect(page).toHaveURL(/\\/dashboard/);\n    \n    // Should show success message\n    await expect(page.locator('.success, .alert-success')).toBeVisible();\n  });\n\n  test('registration fails with invalid SIREN number', async ({ page }) => {\n    await page.goto('/register');\n\n    // Fill form with invalid SIREN\n    await page.fill('[name=\"name\"]', 'Test Organization');\n    await page.selectOption('[name=\"type\"]', 'association');\n    await page.fill('[name=\"email\"]', 'test@example.com');\n    await page.fill('[name=\"contactFirstName\"]', 'John');\n    await page.fill('[name=\"contactLastName\"]', 'Doe');\n    await page.fill('[name=\"sirenNumber\"]', '12345'); // Invalid SIREN\n    await page.fill('[name=\"password\"]', 'motdepasse123');\n\n    await page.click('button[type=\"submit\"]');\n\n    // Should show error message\n    await expect(page.locator('.error, .alert-error')).toContainText('SIREN');\n  });\n\n  test('registration fails with existing email', async ({ page }) => {\n    // First registration\n    await page.goto('/register');\n    await page.fill('[name=\"name\"]', 'First Organization');\n    await page.selectOption('[name=\"type\"]', 'club');\n    await page.fill('[name=\"email\"]', 'duplicate@example.com');\n    await page.fill('[name=\"contactFirstName\"]', 'Jane');\n    await page.fill('[name=\"contactLastName\"]', 'Smith');\n    await page.fill('[name=\"password\"]', 'password123');\n    await page.click('button[type=\"submit\"]');\n\n    // Logout\n    await page.click('button:has-text(\"DÃ©connexion\")');\n\n    // Try to register with same email\n    await page.goto('/register');\n    await page.fill('[name=\"name\"]', 'Second Organization');\n    await page.selectOption('[name=\"type\"]', 'association');\n    await page.fill('[name=\"email\"]', 'duplicate@example.com');\n    await page.fill('[name=\"contactFirstName\"]', 'Bob');\n    await page.fill('[name=\"contactLastName\"]', 'Wilson');\n    await page.fill('[name=\"password\"]', 'password456');\n    await page.click('button[type=\"submit\"]');\n\n    // Should show error\n    await expect(page.locator('.error, .alert-error')).toContainText('existe dÃ©jÃ ');\n  });\n});","size_bytes":3052},"tests/step-definitions/registration.steps.ts":{"content":"import { Given, When, Then } from '@cucumber/cucumber';\nimport { expect } from '@playwright/test';\nimport { page } from './world';\n\nGiven('que je suis sur la page d\\'inscription', async () => {\n  await page.goto('/register');\n  await expect(page).toHaveTitle(/Inscription/);\n});\n\nWhen('je remplis le formulaire d\\'inscription avec :', async (dataTable) => {\n  const data = dataTable.rowsHash();\n  \n  if (data.name) await page.fill('[name=\"name\"]', data.name);\n  if (data.type) await page.selectOption('[name=\"type\"]', data.type);\n  if (data.email) await page.fill('[name=\"email\"]', data.email);\n  if (data.phone) await page.fill('[name=\"phone\"]', data.phone);\n  if (data.address) await page.fill('[name=\"address\"]', data.address);\n  if (data.description) await page.fill('[name=\"description\"]', data.description);\n  if (data.contactFirstName) await page.fill('[name=\"contactFirstName\"]', data.contactFirstName);\n  if (data.contactLastName) await page.fill('[name=\"contactLastName\"]', data.contactLastName);\n  if (data.sirenNumber) await page.fill('[name=\"sirenNumber\"]', data.sirenNumber);\n  if (data.password) await page.fill('[name=\"password\"]', data.password);\n});\n\nWhen('je remplis le formulaire d\\'inscription avec l\\'email {string}', async (email: string) => {\n  await page.fill('[name=\"name\"]', 'Test Org');\n  await page.selectOption('[name=\"type\"]', 'association');\n  await page.fill('[name=\"email\"]', email);\n  await page.fill('[name=\"contactFirstName\"]', 'John');\n  await page.fill('[name=\"contactLastName\"]', 'Doe');\n  await page.fill('[name=\"password\"]', 'password123');\n});\n\nWhen('je clique sur le bouton {string}', async (buttonText: string) => {\n  await page.click(`button:has-text(\"${buttonText}\")`);\n});\n\nThen('je devrais Ãªtre redirigÃ© vers le tableau de bord', async () => {\n  await expect(page).toHaveURL(/\\/dashboard/);\n});\n\nThen('je devrais voir un message de confirmation', async () => {\n  await expect(page.locator('.success, .alert-success')).toBeVisible();\n});\n\nThen('je devrais voir une erreur {string}', async (errorMessage: string) => {\n  await expect(page.locator('.error, .alert-error')).toContainText(errorMessage);\n});\n\nGiven('qu\\'une organisation existe dÃ©jÃ  avec l\\'email {string}', async (email: string) => {\n  // Cette Ã©tape nÃ©cessiterait une setup de donnÃ©es de test\n  // Pour l'instant, on simule avec des donnÃ©es mock\n  console.log(`Setting up existing organization with email: ${email}`);\n});","size_bytes":2440},"tests/step-definitions/world.ts":{"content":"import { Browser, BrowserContext, Page, chromium } from '@playwright/test';\nimport { BeforeAll, AfterAll, Before, After } from '@cucumber/cucumber';\n\nlet browser: Browser;\nlet context: BrowserContext;\nexport let page: Page;\n\nBeforeAll(async () => {\n  browser = await chromium.launch({ headless: true });\n});\n\nBefore(async () => {\n  context = await browser.newContext();\n  page = await context.newPage();\n});\n\nAfter(async () => {\n  await page.close();\n  await context.close();\n});\n\nAfterAll(async () => {\n  await browser.close();\n});","size_bytes":532},"tests/unit/chatbot.test.ts":{"content":"import { describe, it, expect, beforeEach, vi } from 'vitest';\nimport { chatbotService } from '../../server/openai';\n\n// Mock OpenAI\nvi.mock('openai', () => ({\n  default: class {\n    chat = {\n      completions: {\n        create: vi.fn()\n      }\n    };\n  }\n}));\n\ndescribe('ChatbotService', () => {\n  beforeEach(() => {\n    vi.clearAllMocks();\n  });\n\n  describe('sendMessage', () => {\n    it('should return successful response when OpenAI responds', async () => {\n      const mockOpenAI = await import('openai');\n      const mockCreate = mockOpenAI.default.prototype.chat.completions.create as any;\n      \n      mockCreate.mockResolvedValue({\n        choices: [{\n          message: {\n            content: 'Bonjour ! Je suis lÃ  pour vous aider avec vos Ã©vÃ©nements.'\n          }\n        }]\n      });\n\n      const result = await chatbotService.sendMessage('Bonjour');\n\n      expect(result.success).toBe(true);\n      expect(result.message).toContain('Bonjour');\n    });\n\n    it('should handle OpenAI API errors gracefully', async () => {\n      const mockOpenAI = await import('openai');\n      const mockCreate = mockOpenAI.default.prototype.chat.completions.create as any;\n      \n      mockCreate.mockRejectedValue(new Error('API Error'));\n\n      const result = await chatbotService.sendMessage('Hello');\n\n      expect(result.success).toBe(false);\n      expect(result.error).toBe('OpenAI API Error');\n      expect(result.message).toContain('problÃ¨me technique');\n    });\n\n    it('should include conversation history in request', async () => {\n      const mockOpenAI = await import('openai');\n      const mockCreate = mockOpenAI.default.prototype.chat.completions.create as any;\n      \n      mockCreate.mockResolvedValue({\n        choices: [{\n          message: {\n            content: 'Je comprends votre demande.'\n          }\n        }]\n      });\n\n      const history = [\n        { role: 'user' as const, content: 'Bonjour' },\n        { role: 'assistant' as const, content: 'Bonjour ! Comment puis-je vous aider ?' }\n      ];\n\n      await chatbotService.sendMessage('Comment crÃ©er un Ã©vÃ©nement ?', history);\n\n      expect(mockCreate).toHaveBeenCalledWith(\n        expect.objectContaining({\n          messages: expect.arrayContaining([\n            expect.objectContaining({ role: 'system' }),\n            ...history,\n            expect.objectContaining({ role: 'user', content: 'Comment crÃ©er un Ã©vÃ©nement ?' })\n          ])\n        })\n      );\n    });\n  });\n\n  describe('getEventSuggestions', () => {\n    it('should provide event suggestions based on query', async () => {\n      const mockOpenAI = await import('openai');\n      const mockCreate = mockOpenAI.default.prototype.chat.completions.create as any;\n      \n      mockCreate.mockResolvedValue({\n        choices: [{\n          message: {\n            content: 'Voici quelques suggestions d\\'Ã©vÃ©nements de football : 1. Match amical, 2. Tournoi...'\n          }\n        }]\n      });\n\n      const result = await chatbotService.getEventSuggestions('football');\n\n      expect(result.success).toBe(true);\n      expect(result.message).toContain('football');\n    });\n  });\n\n  describe('getOrganizationHelp', () => {\n    it('should provide organization-specific help', async () => {\n      const mockOpenAI = await import('openai');\n      const mockCreate = mockOpenAI.default.prototype.chat.completions.create as any;\n      \n      mockCreate.mockResolvedValue({\n        choices: [{\n          message: {\n            content: 'Pour une association, je recommande...'\n          }\n        }]\n      });\n\n      const result = await chatbotService.getOrganizationHelp(\n        'Comment gÃ©rer mes membres ?',\n        'association'\n      );\n\n      expect(result.success).toBe(true);\n      expect(result.message).toContain('association');\n    });\n  });\n});","size_bytes":3798},"tests/unit/email.test.ts":{"content":"import { describe, it, expect, beforeEach, vi } from 'vitest';\nimport { emailService } from '../../server/email';\n\n// Mock mailjet\nvi.mock('node-mailjet', () => ({\n  default: {\n    apiConnect: () => ({\n      post: () => ({\n        request: vi.fn().mockResolvedValue({\n          body: { Messages: [{ Status: 'success' }] }\n        })\n      })\n    })\n  }\n}));\n\ndescribe('EmailService', () => {\n  beforeEach(() => {\n    vi.clearAllMocks();\n  });\n\n  describe('sendCustomTemplateEmail', () => {\n    it('should send email with custom template successfully', async () => {\n      const result = await emailService.sendCustomTemplateEmail(\n        'test@example.com',\n        'Test User',\n        'Hello from test!',\n        'Test Subject'\n      );\n\n      expect(result).toBe(true);\n    });\n\n    it('should handle missing required fields', async () => {\n      try {\n        await emailService.sendCustomTemplateEmail('', '', '', '');\n      } catch (error) {\n        expect(error).toBeDefined();\n      }\n    });\n  });\n\n  describe('sendEventNotificationTemplate', () => {\n    it('should send event notification with template', async () => {\n      const result = await emailService.sendEventNotificationTemplate(\n        'participant@example.com',\n        'John Doe',\n        'Match de Football',\n        '25 dÃ©cembre 2024 Ã  15h00',\n        'Club Sportif'\n      );\n\n      expect(result).toBe(true);\n    });\n  });\n\n  describe('sendPasswordResetEmail', () => {\n    it('should send password reset email', async () => {\n      const result = await emailService.sendPasswordResetEmail(\n        'user@example.com',\n        'John Doe',\n        'reset-token-123'\n      );\n\n      expect(result).toBe(true);\n    });\n  });\n\n  describe('sendEventInvitationEmail', () => {\n    it('should send event invitation email', async () => {\n      const eventDate = new Date('2024-12-25T15:00:00');\n      \n      const result = await emailService.sendEventInvitationEmail(\n        'invitee@example.com',\n        'Match de Football',\n        'Club Sportif',\n        eventDate,\n        'invitation-token-123'\n      );\n\n      expect(result).toBe(true);\n    });\n  });\n});","size_bytes":2132},"client/src/contexts/MessagingContext.tsx":{"content":"import React, { createContext, useContext, useState, ReactNode } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { useAuth } from '@/hooks/useAuth';\nimport { apiRequest } from '@/lib/queryClient';\nimport { useToast } from '@/hooks/use-toast';\n\ninterface Message {\n  id: string;\n  eventId: string;\n  content: string;\n  senderName: string;\n  senderEmail: string;\n  isFromOrganizer: boolean;\n  createdAt: string;\n  replyToId?: string;\n}\n\ninterface MessagingContextType {\n  sendBroadcastMessage: (eventId: string, message: string) => Promise<void>;\n  sendReplyMessage: (eventId: string, message: string, replyToId?: string) => Promise<void>;\n  getEventMessages: (eventId: string) => Message[];\n  isLoading: boolean;\n  error: any;\n}\n\nconst MessagingContext = createContext<MessagingContextType | undefined>(undefined);\n\nexport function MessagingProvider({ children }: { children: ReactNode }) {\n  const { isAuthenticated } = useAuth();\n  const queryClient = useQueryClient();\n  const { toast } = useToast();\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Mutation for sending broadcast messages to all event participants\n  const broadcastMutation = useMutation({\n    mutationFn: async ({ eventId, message }: { eventId: string; message: string }) => {\n      return await apiRequest('POST', `/api/events/${eventId}/broadcast`, {\n        message,\n      });\n    },\n    onSuccess: (_, { eventId }) => {\n      queryClient.invalidateQueries({ queryKey: [`/api/events/${eventId}/messages`] });\n      toast({\n        title: 'Message envoyÃ©',\n        description: 'Votre message a Ã©tÃ© envoyÃ© Ã  tous les participants.',\n      });\n    },\n    onError: (error: any) => {\n      console.error('Broadcast message error:', error);\n      toast({\n        title: 'Erreur',\n        description: 'Impossible d\\'envoyer le message. Veuillez rÃ©essayer.',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  // Mutation for sending reply messages\n  const replyMutation = useMutation({\n    mutationFn: async ({ \n      eventId, \n      message, \n      replyToId \n    }: { \n      eventId: string; \n      message: string; \n      replyToId?: string \n    }) => {\n      return await apiRequest('POST', `/api/events/${eventId}/messages`, {\n        content: message,\n        replyToId,\n      });\n    },\n    onSuccess: (_, { eventId }) => {\n      queryClient.invalidateQueries({ queryKey: [`/api/events/${eventId}/messages`] });\n      toast({\n        title: 'RÃ©ponse envoyÃ©e',\n        description: 'Votre rÃ©ponse a Ã©tÃ© envoyÃ©e.',\n      });\n    },\n    onError: (error: any) => {\n      console.error('Reply message error:', error);\n      toast({\n        title: 'Erreur',\n        description: 'Impossible d\\'envoyer la rÃ©ponse. Veuillez rÃ©essayer.',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  const sendBroadcastMessage = async (eventId: string, message: string) => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      await broadcastMutation.mutateAsync({ eventId, message });\n    } catch (err) {\n      setError(err);\n      throw err;\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const sendReplyMessage = async (eventId: string, message: string, replyToId?: string) => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      await replyMutation.mutateAsync({ eventId, message, replyToId });\n    } catch (err) {\n      setError(err);\n      throw err;\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const getEventMessages = (eventId: string): Message[] => {\n    const queryKey = [`/api/events/${eventId}/messages`];\n    const data = queryClient.getQueryData<Message[]>(queryKey);\n    return data || [];\n  };\n\n  const value: MessagingContextType = {\n    sendBroadcastMessage,\n    sendReplyMessage,\n    getEventMessages,\n    isLoading: isLoading || broadcastMutation.isPending || replyMutation.isPending,\n    error: error || broadcastMutation.error || replyMutation.error,\n  };\n\n  return (\n    <MessagingContext.Provider value={value}>\n      {children}\n    </MessagingContext.Provider>\n  );\n}\n\nexport function useMessaging() {\n  const context = useContext(MessagingContext);\n  if (context === undefined) {\n    throw new Error('useMessaging must be used within a MessagingProvider');\n  }\n  return context;\n}","size_bytes":4337},"client/src/contexts/NotificationContext.tsx":{"content":"import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\nimport { useAuth } from '@/hooks/useAuth';\n\ninterface Notification {\n  id: string;\n  type: 'info' | 'success' | 'warning' | 'error';\n  title: string;\n  message: string;\n  read: boolean;\n  createdAt: string;\n  actionUrl?: string;\n  eventId?: string;\n}\n\ninterface NotificationContextType {\n  notifications: Notification[];\n  unreadCount: number;\n  markAsRead: (id: string) => void;\n  markAllAsRead: () => void;\n  removeNotification: (id: string) => void;\n  addNotification: (notification: Omit<Notification, 'id' | 'createdAt'>) => void;\n}\n\nconst NotificationContext = createContext<NotificationContextType | undefined>(undefined);\n\nexport function NotificationProvider({ children }: { children: ReactNode }) {\n  const [notifications, setNotifications] = useState<Notification[]>([]);\n  const { isAuthenticated } = useAuth();\n  const queryClient = useQueryClient();\n\n  // Fetch notifications from API\n  const { data: apiNotifications = [] } = useQuery<Notification[]>({\n    queryKey: ['/api/notifications'],\n    enabled: isAuthenticated,\n    refetchInterval: 30000, // Refetch every 30 seconds\n    staleTime: 15000,\n  });\n\n  // Update local notifications when API data changes\n  useEffect(() => {\n    if (apiNotifications.length > 0) {\n      setNotifications(prev => {\n        // Merge API notifications with local ones, avoid duplicates\n        const existingIds = prev.map(n => n.id);\n        const newNotifications = apiNotifications.filter(n => !existingIds.includes(n.id));\n        return [...prev, ...newNotifications];\n      });\n    }\n  }, [apiNotifications]);\n\n  const unreadCount = notifications.filter(n => !n.read).length;\n\n  const markAsRead = async (id: string) => {\n    setNotifications(prev => \n      prev.map(n => n.id === id ? { ...n, read: true } : n)\n    );\n    \n    try {\n      await fetch(`/api/notifications/${id}/read`, { method: 'PUT' });\n      queryClient.invalidateQueries({ queryKey: ['/api/notifications'] });\n    } catch (error) {\n      console.error('Failed to mark notification as read:', error);\n    }\n  };\n\n  const markAllAsRead = async () => {\n    setNotifications(prev => prev.map(n => ({ ...n, read: true })));\n    \n    try {\n      await fetch('/api/notifications/mark-all-read', { method: 'PUT' });\n      queryClient.invalidateQueries({ queryKey: ['/api/notifications'] });\n    } catch (error) {\n      console.error('Failed to mark all notifications as read:', error);\n    }\n  };\n\n  const removeNotification = async (id: string) => {\n    setNotifications(prev => prev.filter(n => n.id !== id));\n    \n    try {\n      await fetch(`/api/notifications/${id}`, { method: 'DELETE' });\n      queryClient.invalidateQueries({ queryKey: ['/api/notifications'] });\n    } catch (error) {\n      console.error('Failed to remove notification:', error);\n    }\n  };\n\n  const addNotification = (notification: Omit<Notification, 'id' | 'createdAt'>) => {\n    const newNotification: Notification = {\n      ...notification,\n      id: `local-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n      createdAt: new Date().toISOString(),\n    };\n    \n    setNotifications(prev => [newNotification, ...prev]);\n  };\n\n  // Listen for real-time events (WebSocket or Server-Sent Events would be better in production)\n  useEffect(() => {\n    if (!isAuthenticated) return;\n\n    const pollForUpdates = setInterval(async () => {\n      try {\n        queryClient.invalidateQueries({ queryKey: ['/api/notifications'] });\n      } catch (error) {\n        console.error('Failed to poll for notification updates:', error);\n      }\n    }, 60000); // Poll every minute\n\n    return () => clearInterval(pollForUpdates);\n  }, [isAuthenticated, queryClient]);\n\n  const value: NotificationContextType = {\n    notifications,\n    unreadCount,\n    markAsRead,\n    markAllAsRead,\n    removeNotification,\n    addNotification,\n  };\n\n  return (\n    <NotificationContext.Provider value={value}>\n      {children}\n    </NotificationContext.Provider>\n  );\n}\n\nexport function useNotifications() {\n  const context = useContext(NotificationContext);\n  if (context === undefined) {\n    throw new Error('useNotifications must be used within a NotificationProvider');\n  }\n  return context;\n}","size_bytes":4325},"client/src/contexts/StatsContext.tsx":{"content":"import React, { createContext, useContext, ReactNode, useEffect } from 'react';\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\nimport { useAuth } from '@/hooks/useAuth';\n\ninterface DashboardStats {\n  activeEvents: number;\n  totalParticipants: number;\n  totalDrivers: number;\n  totalSeats: number;\n  occupiedSeats?: number;\n  availableSeatsRemaining?: number;\n}\n\ninterface StatsContextType {\n  stats: DashboardStats | undefined;\n  isLoading: boolean;\n  error: any;\n  refreshStats: () => void;\n}\n\nconst StatsContext = createContext<StatsContextType | undefined>(undefined);\n\nexport function StatsProvider({ children }: { children: ReactNode }) {\n  const { isAuthenticated } = useAuth();\n  const queryClient = useQueryClient();\n\n  // Main stats query with aggressive real-time updates\n  const { \n    data: stats, \n    isLoading, \n    error, \n    refetch: refreshStats \n  } = useQuery<DashboardStats>({\n    queryKey: ['/api/dashboard/stats'],\n    enabled: isAuthenticated,\n    refetchInterval: 5000, // Refetch every 5 seconds\n    refetchOnWindowFocus: true,\n    refetchOnReconnect: true,\n    staleTime: 0, // Always consider stale for real-time updates\n    retry: 3,\n    retryDelay: (attemptIndex) => Math.min(1000 * 2 ** attemptIndex, 30000),\n  });\n\n  // Set up event listeners for real-time updates\n  useEffect(() => {\n    if (!isAuthenticated) return;\n\n    // Listen for custom events that might trigger stats updates\n    const handleStatsUpdate = () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/dashboard/stats'] });\n    };\n\n    const handleEventCreated = () => {\n      // Immediately update stats when events are created\n      queryClient.invalidateQueries({ queryKey: ['/api/dashboard/stats'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/events'] });\n    };\n\n    const handleParticipantUpdate = () => {\n      // Immediately update stats when participants change\n      queryClient.invalidateQueries({ queryKey: ['/api/dashboard/stats'] });\n    };\n\n    // Custom event listeners\n    window.addEventListener('stats-update', handleStatsUpdate);\n    window.addEventListener('event-created', handleEventCreated);\n    window.addEventListener('participant-updated', handleParticipantUpdate);\n\n    // Periodic invalidation for real-time updates\n    const intervalId = setInterval(() => {\n      queryClient.invalidateQueries({ queryKey: ['/api/dashboard/stats'] });\n    }, 10000); // Every 10 seconds\n\n    return () => {\n      window.removeEventListener('stats-update', handleStatsUpdate);\n      window.removeEventListener('event-created', handleEventCreated);\n      window.removeEventListener('participant-updated', handleParticipantUpdate);\n      clearInterval(intervalId);\n    };\n  }, [isAuthenticated, queryClient]);\n\n  const value: StatsContextType = {\n    stats,\n    isLoading,\n    error,\n    refreshStats,\n  };\n\n  return (\n    <StatsContext.Provider value={value}>\n      {children}\n    </StatsContext.Provider>\n  );\n}\n\nexport function useStats() {\n  const context = useContext(StatsContext);\n  if (context === undefined) {\n    throw new Error('useStats must be used within a StatsProvider');\n  }\n  return context;\n}\n\n// Helper functions to trigger real-time updates\nexport const triggerStatsUpdate = () => {\n  window.dispatchEvent(new CustomEvent('stats-update'));\n};\n\nexport const triggerEventCreated = () => {\n  window.dispatchEvent(new CustomEvent('event-created'));\n};\n\nexport const triggerParticipantUpdate = () => {\n  window.dispatchEvent(new CustomEvent('participant-updated'));\n};","size_bytes":3536},"client/src/contexts/ThemeContext.tsx":{"content":"import React, { createContext, useContext, useEffect, useState, ReactNode } from 'react';\n\ntype Theme = 'light' | 'dark' | 'system';\n\ninterface ThemeContextType {\n  theme: Theme;\n  resolvedTheme: 'light' | 'dark';\n  setTheme: (theme: Theme) => void;\n  toggleTheme: () => void;\n}\n\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined);\n\nconst THEME_STORAGE_KEY = 'TeamMove_theme';\n\nfunction getInitialTheme(): Theme {\n  // Check localStorage first\n  if (typeof window !== 'undefined') {\n    const stored = localStorage.getItem(THEME_STORAGE_KEY) as Theme | null;\n    if (stored && ['light', 'dark', 'system'].includes(stored)) {\n      return stored;\n    }\n  }\n  \n  // Default to system\n  return 'system';\n}\n\nfunction getSystemTheme(): 'light' | 'dark' {\n  if (typeof window === 'undefined') return 'light';\n  return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n}\n\nfunction resolveTheme(theme: Theme): 'light' | 'dark' {\n  if (theme === 'system') {\n    return getSystemTheme();\n  }\n  return theme;\n}\n\nexport function ThemeProvider({ children }: { children: ReactNode }) {\n  const [theme, setThemeState] = useState<Theme>(getInitialTheme);\n  const [resolvedTheme, setResolvedTheme] = useState<'light' | 'dark'>(() => resolveTheme(getInitialTheme()));\n\n  const setTheme = (newTheme: Theme) => {\n    setThemeState(newTheme);\n    localStorage.setItem(THEME_STORAGE_KEY, newTheme);\n    \n    const resolved = resolveTheme(newTheme);\n    setResolvedTheme(resolved);\n    \n    // Apply theme to document\n    if (resolved === 'dark') {\n      document.documentElement.classList.add('dark');\n    } else {\n      document.documentElement.classList.remove('dark');\n    }\n  };\n\n  const toggleTheme = () => {\n    if (theme === 'light') {\n      setTheme('dark');\n    } else if (theme === 'dark') {\n      setTheme('system');\n    } else {\n      setTheme('light');\n    }\n  };\n\n  useEffect(() => {\n    // Initial theme application\n    const resolved = resolveTheme(theme);\n    setResolvedTheme(resolved);\n    \n    if (resolved === 'dark') {\n      document.documentElement.classList.add('dark');\n    } else {\n      document.documentElement.classList.remove('dark');\n    }\n\n    // Listen for system theme changes when theme is set to 'system'\n    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n    \n    const handleSystemThemeChange = (e: MediaQueryListEvent) => {\n      if (theme === 'system') {\n        const newResolved = e.matches ? 'dark' : 'light';\n        setResolvedTheme(newResolved);\n        \n        if (newResolved === 'dark') {\n          document.documentElement.classList.add('dark');\n        } else {\n          document.documentElement.classList.remove('dark');\n        }\n      }\n    };\n\n    if (theme === 'system') {\n      mediaQuery.addEventListener('change', handleSystemThemeChange);\n    }\n\n    return () => {\n      mediaQuery.removeEventListener('change', handleSystemThemeChange);\n    };\n  }, [theme]);\n\n  const value: ThemeContextType = {\n    theme,\n    resolvedTheme,\n    setTheme,\n    toggleTheme,\n  };\n\n  return (\n    <ThemeContext.Provider value={value}>\n      {children}\n    </ThemeContext.Provider>\n  );\n}\n\nexport function useTheme() {\n  const context = useContext(ThemeContext);\n  if (context === undefined) {\n    throw new Error('useTheme must be used within a ThemeProvider');\n  }\n  return context;\n}","size_bytes":3383},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/hooks/useAuth.ts":{"content":"import { useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface Organization {\n  id: string;\n  name: string;\n  email: string;\n  contactFirstName: string;\n  contactLastName: string;\n  logoUrl?: string;\n  planType: string;\n}\n\ninterface AuthTokens {\n  accessToken: string;\n  refreshToken: string;\n  expiresIn: string;\n}\n\n// Gestion du stockage sÃ©curisÃ© des tokens\nclass TokenManager {\n  private static readonly ACCESS_TOKEN_KEY = \"TeamMove_access_token\";\n  private static readonly REFRESH_TOKEN_KEY = \"TeamMove_refresh_token\";\n\n  static getAccessToken(): string | null {\n    if (typeof window === 'undefined') return null;\n    return localStorage.getItem(this.ACCESS_TOKEN_KEY);\n  }\n\n  static getRefreshToken(): string | null {\n    if (typeof window === 'undefined') return null;\n    return localStorage.getItem(this.REFRESH_TOKEN_KEY);\n  }\n\n  static setTokens(tokens: AuthTokens): void {\n    if (typeof window === 'undefined') return;\n    localStorage.setItem(this.ACCESS_TOKEN_KEY, tokens.accessToken);\n    localStorage.setItem(this.REFRESH_TOKEN_KEY, tokens.refreshToken);\n  }\n\n  static clearTokens(): void {\n    if (typeof window === 'undefined') return;\n    localStorage.removeItem(this.ACCESS_TOKEN_KEY);\n    localStorage.removeItem(this.REFRESH_TOKEN_KEY);\n  }\n\n  static isTokenExpired(token: string): boolean {\n    try {\n      const payload = JSON.parse(atob(token.split('.')[1]));\n      const currentTime = Date.now() / 1000;\n      return payload.exp < currentTime;\n    } catch {\n      return true;\n    }\n  }\n}\n\n// Service d'authentification JWT\nexport class AuthService {\n  private static queryClient: ReturnType<typeof useQueryClient> | null = null;\n\n  static setQueryClient(client: ReturnType<typeof useQueryClient>) {\n    this.queryClient = client;\n  }\n\n  static getQueryClient() {\n    return this.queryClient;\n  }\n\n  static async refreshAccessToken(): Promise<string | null> {\n    const refreshToken = TokenManager.getRefreshToken();\n    if (!refreshToken) return null;\n\n    try {\n      const response = await apiRequest(\"POST\", \"/api/refresh-token\", {\n        refreshToken\n      });\n\n      const data = await response.json();\n      const accessToken = data.accessToken;\n\n      // Update only the access token\n      if (typeof window !== 'undefined') {\n        localStorage.setItem(\"TeamMove_access_token\", accessToken);\n      }\n\n      return accessToken;\n    } catch (error) {\n      console.error(\"Failed to refresh token:\", error);\n      this.logout();\n      return null;\n    }\n  }\n\n  static async login(email: string, password: string, rememberMe?: boolean): Promise<{ success: boolean; error?: string; organization?: Organization }> {\n    try {\n      const response = await apiRequest(\"POST\", \"/api/login\", {\n        email,\n        password,\n        rememberMe\n      });\n\n      const data = await response.json();\n      \n      // Store tokens\n      TokenManager.setTokens({\n        accessToken: data.accessToken,\n        refreshToken: data.refreshToken,\n        expiresIn: data.expiresIn\n      });\n\n      // Invalider les requÃªtes d'auth pour forcer un rechargement\n      const currentQueryClient = this.queryClient || this.getQueryClient();\n      if (currentQueryClient) {\n        try {\n          await currentQueryClient.invalidateQueries({ queryKey: [\"/api/me\"] });\n          await currentQueryClient.invalidateQueries({ queryKey: [\"/api/dashboard/stats\"] });\n        } catch (error) {\n          console.error(\"Error invalidating queries during login:\", error);\n        }\n      } else {\n        // If no query client available, we'll handle this gracefully\n        console.log(\"No query client available for cache invalidation during login\");\n      }\n\n      return {\n        success: true,\n        organization: data.organization\n      };\n    } catch (error: any) {\n      console.error(\"Login error:\", error);\n      return {\n        success: false,\n        error: error.message || \"Login failed\"\n      };\n    }\n  }\n\n  static async register(organizationData: any): Promise<{ success: boolean; error?: string; organization?: Organization }> {\n    try {\n      const response = await apiRequest(\"POST\", \"/api/register\", organizationData);\n      const data = await response.json();\n      \n      // Store tokens\n      TokenManager.setTokens({\n        accessToken: data.accessToken,\n        refreshToken: data.refreshToken,\n        expiresIn: data.expiresIn\n      });\n\n      // Invalider les requÃªtes d'auth pour forcer un rechargement\n      const currentQueryClient = this.queryClient || this.getQueryClient();\n      if (currentQueryClient) {\n        try {\n          await currentQueryClient.invalidateQueries({ queryKey: [\"/api/me\"] });\n          await currentQueryClient.invalidateQueries({ queryKey: [\"/api/dashboard/stats\"] });\n        } catch (error) {\n          console.error(\"Error invalidating queries during registration:\", error);\n        }\n      } else {\n        // If no query client available, we'll handle this gracefully\n        console.log(\"No query client available for cache invalidation during registration\");\n      }\n\n      return {\n        success: true,\n        organization: data.organization\n      };\n    } catch (error: any) {\n      console.error(\"Registration error:\", error);\n      return {\n        success: false,\n        error: error.message || \"Registration failed\"\n      };\n    }\n  }\n\n  static async logout(): Promise<void> {\n    const accessToken = TokenManager.getAccessToken();\n    \n    try {\n      // Invalider toutes les requÃªtes d'auth avant de supprimer les tokens\n      const currentQueryClient = this.queryClient || this.getQueryClient();\n      if (currentQueryClient) {\n        await currentQueryClient.clear();\n      }\n    } catch (error) {\n      console.error(\"Error clearing query cache during logout:\", error);\n    }\n    \n    // Clear tokens after clearing cache\n    TokenManager.clearTokens();\n\n    // Optionally call logout endpoint (pour blacklisting si implÃ©mentÃ©)\n    if (accessToken) {\n      try {\n        await apiRequest(\"POST\", \"/api/logout\");\n      } catch (error) {\n        console.error(\"Logout endpoint error:\", error);\n        // Continue with client-side logout even if server fails\n      }\n    }\n\n    // Force page reload to ensure clean state\n    if (typeof window !== 'undefined') {\n      window.location.href = \"/\";\n    }\n  }\n\n  static getAuthHeader(): string | null {\n    const token = TokenManager.getAccessToken();\n    return token ? `Bearer ${token}` : null;\n  }\n\n  static isAuthenticated(): boolean {\n    const token = TokenManager.getAccessToken();\n    if (!token) return false;\n    \n    if (TokenManager.isTokenExpired(token)) {\n      // Try to refresh if token is expired\n      this.refreshAccessToken();\n      return false;\n    }\n    \n    return true;\n  }\n}\n\nexport function useAuth() {\n  let queryClient: ReturnType<typeof useQueryClient> | null = null;\n  let queryError: Error | null = null;\n  \n  try {\n    queryClient = useQueryClient();\n    // Set query client for AuthService (ensure it's always set)\n    AuthService.setQueryClient(queryClient);\n  } catch (error) {\n    console.warn(\"QueryClient not available in useAuth:\", error);\n    queryError = error as Error;\n  }\n\n  // If queryClient is not available, return basic authentication state\n  if (!queryClient || queryError) {\n    const hasToken = !!TokenManager.getAccessToken();\n    const basicIsAuth = hasToken && AuthService.isAuthenticated();\n    \n    return {\n      organization: null,\n      isLoading: false,\n      isAuthenticated: basicIsAuth,\n      login: AuthService.login,\n      register: AuthService.register,\n      logout: AuthService.logout,\n      refreshToken: AuthService.refreshAccessToken,\n    };\n  }\n\n  const { data: organization, isLoading, error } = useQuery({\n    queryKey: [\"/api/me\"],\n    retry: false,\n    staleTime: 0,\n    enabled: !!TokenManager.getAccessToken(), // Only fetch if we have a token\n    retryOnMount: false,\n    refetchOnWindowFocus: false,\n  });\n\n  const isAuthenticated = !!organization && !error && AuthService.isAuthenticated();\n\n  return {\n    organization,\n    isLoading: isLoading && !!TokenManager.getAccessToken(), // Only show loading if we have a token\n    isAuthenticated,\n    login: AuthService.login,\n    register: AuthService.register,\n    logout: AuthService.logout,\n    refreshToken: AuthService.refreshAccessToken,\n  };\n}","size_bytes":8389},"client/src/hooks/useFeatures.tsx":{"content":"import { useAuth } from \"@/hooks/useAuth\";\n\n// Liste des fonctionnalitÃ©s disponibles\nexport const AVAILABLE_FEATURES = {\n  MESSAGING: \"messaging\",\n  ANALYTICS: \"analytics\", \n  CUSTOM_BRANDING: \"custom_branding\",\n  BULK_INVITE: \"bulk_invite\",\n  EVENT_TEMPLATES: \"event_templates\",\n  PRIORITY_SUPPORT: \"priority_support\",\n  CSV_IMPORT: \"csv_import\", // Nouvelle fonctionnalitÃ©\n  ADVANCED_STATS: \"advanced_stats\", // Nouvelle fonctionnalitÃ©\n} as const;\n\nexport type FeatureKey = typeof AVAILABLE_FEATURES[keyof typeof AVAILABLE_FEATURES];\n\n// Descriptions des fonctionnalitÃ©s\nexport const FEATURE_DESCRIPTIONS = {\n  [AVAILABLE_FEATURES.MESSAGING]: {\n    name: \"Messagerie avancÃ©e\",\n    description: \"Communication avec participants et notifications automatiques\",\n    icon: \"fas fa-envelope\",\n    category: \"Communication\"\n  },\n  [AVAILABLE_FEATURES.ANALYTICS]: {\n    name: \"Analytics\",\n    description: \"Statistiques dÃ©taillÃ©es et rapports avancÃ©s\",\n    icon: \"fas fa-chart-line\", \n    category: \"Analyse\"\n  },\n  [AVAILABLE_FEATURES.CUSTOM_BRANDING]: {\n    name: \"Personnalisation\",\n    description: \"Logo et couleurs personnalisÃ©s pour votre organisation\",\n    icon: \"fas fa-palette\",\n    category: \"Apparence\"\n  },\n  [AVAILABLE_FEATURES.BULK_INVITE]: {\n    name: \"Invitations en masse\", \n    description: \"Inviter plusieurs participants simultanÃ©ment\",\n    icon: \"fas fa-users-plus\",\n    category: \"Gestion\"\n  },\n  [AVAILABLE_FEATURES.EVENT_TEMPLATES]: {\n    name: \"ModÃ¨les d'Ã©vÃ©nements\",\n    description: \"RÃ©utiliser des configurations d'Ã©vÃ©nements\",\n    icon: \"fas fa-copy\",\n    category: \"Gestion\"\n  },\n  [AVAILABLE_FEATURES.PRIORITY_SUPPORT]: {\n    name: \"Support prioritaire\",\n    description: \"Assistance dÃ©diÃ©e et rÃ©ponse rapide\",\n    icon: \"fas fa-headset\",\n    category: \"Support\"\n  },\n  [AVAILABLE_FEATURES.CSV_IMPORT]: {\n    name: \"Import CSV/Excel\",\n    description: \"Importer des listes d'emails depuis des fichiers\",\n    icon: \"fas fa-file-csv\",\n    category: \"Import/Export\"\n  },\n  [AVAILABLE_FEATURES.ADVANCED_STATS]: {\n    name: \"Statistiques avancÃ©es\",\n    description: \"Analyses poussÃ©es et tableaux de bord dÃ©taillÃ©s\",\n    icon: \"fas fa-chart-pie\",\n    category: \"Analyse\"\n  }\n} as const;\n\n/**\n * Hook pour vÃ©rifier les permissions des fonctionnalitÃ©s\n */\nexport function useFeatures() {\n  const { organization, isAuthenticated } = useAuth();\n\n  /**\n   * VÃ©rifie si une fonctionnalitÃ© est activÃ©e pour l'organisation\n   */\n  const hasFeature = (feature: FeatureKey): boolean => {\n    if (!isAuthenticated || !organization) return false;\n    \n    // Les admins ont accÃ¨s Ã  toutes les fonctionnalitÃ©s\n    if (organization.role === 'admin') return true;\n    \n    // VÃ©rifier si l'organisation est active\n    if (!organization.isActive) return false;\n    \n    // VÃ©rifier si la fonctionnalitÃ© est dans la liste des fonctionnalitÃ©s autorisÃ©es\n    return organization.features?.includes(feature) ?? false;\n  };\n\n  /**\n   * VÃ©rifie plusieurs fonctionnalitÃ©s en mÃªme temps\n   */\n  const hasFeatures = (features: FeatureKey[]): boolean => {\n    return features.every(feature => hasFeature(feature));\n  };\n\n  /**\n   * VÃ©rifie si au moins une des fonctionnalitÃ©s est activÃ©e\n   */\n  const hasAnyFeature = (features: FeatureKey[]): boolean => {\n    return features.some(feature => hasFeature(feature));\n  };\n\n  /**\n   * RÃ©cupÃ¨re toutes les fonctionnalitÃ©s activÃ©es\n   */\n  const getActiveFeatures = (): FeatureKey[] => {\n    if (!isAuthenticated || !organization) return [];\n    \n    if (organization.role === 'admin') {\n      return Object.values(AVAILABLE_FEATURES);\n    }\n    \n    return (organization.features || []).filter(feature => \n      Object.values(AVAILABLE_FEATURES).includes(feature as FeatureKey)\n    ) as FeatureKey[];\n  };\n\n  /**\n   * RÃ©cupÃ¨re les informations d'une fonctionnalitÃ©\n   */\n  const getFeatureInfo = (feature: FeatureKey) => {\n    return FEATURE_DESCRIPTIONS[feature];\n  };\n\n  /**\n   * VÃ©rifie si l'organisation est dÃ©sactivÃ©e\n   */\n  const isOrganizationDisabled = (): boolean => {\n    return !organization?.isActive && organization?.role !== 'admin';\n  };\n\n  return {\n    hasFeature,\n    hasFeatures, \n    hasAnyFeature,\n    getActiveFeatures,\n    getFeatureInfo,\n    isOrganizationDisabled,\n    organization,\n    availableFeatures: AVAILABLE_FEATURES,\n    featureDescriptions: FEATURE_DESCRIPTIONS\n  };\n}\n\n/**\n * Composant wrapper pour conditionner l'affichage selon les permissions\n */\ninterface FeatureGuardProps {\n  feature: FeatureKey;\n  fallback?: React.ReactNode;\n  children: React.ReactNode;\n}\n\nexport function FeatureGuard({ feature, fallback = null, children }: FeatureGuardProps) {\n  const { hasFeature } = useFeatures();\n  \n  return hasFeature(feature) ? <>{children}</> : <>{fallback}</>;\n}\n\n/**\n * Composant wrapper pour affichage selon plusieurs fonctionnalitÃ©s (ET logique)\n */\ninterface MultipleFeaturesGuardProps {\n  features: FeatureKey[];\n  fallback?: React.ReactNode;\n  children: React.ReactNode;\n}\n\nexport function MultipleFeaturesGuard({ features, fallback = null, children }: MultipleFeaturesGuardProps) {\n  const { hasFeatures } = useFeatures();\n  \n  return hasFeatures(features) ? <>{children}</> : <>{fallback}</>;\n}\n\n/**\n * Composant wrapper pour affichage selon au moins une fonctionnalitÃ© (OU logique)\n */\ninterface AnyFeatureGuardProps {\n  features: FeatureKey[];\n  fallback?: React.ReactNode;\n  children: React.ReactNode;\n}\n\nexport function AnyFeatureGuard({ features, fallback = null, children }: AnyFeatureGuardProps) {\n  const { hasAnyFeature } = useFeatures();\n  \n  return hasAnyFeature(features) ? <>{children}</> : <>{fallback}</>;\n}","size_bytes":5665},"client/src/hooks/useKeyboardShortcuts.ts":{"content":"import { useEffect } from 'react';\nimport { useLocation } from 'wouter';\n\ninterface ShortcutAction {\n  key: string;\n  ctrlKey?: boolean;\n  altKey?: boolean;\n  shiftKey?: boolean;\n  metaKey?: boolean;\n  action: () => void;\n  description: string;\n}\n\nexport function useKeyboardShortcuts(actions: ShortcutAction[]) {\n  useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      for (const shortcut of actions) {\n        const keyMatch = event.key.toLowerCase() === shortcut.key.toLowerCase();\n        const ctrlMatch = !shortcut.ctrlKey || event.ctrlKey;\n        const altMatch = !shortcut.altKey || event.altKey;\n        const shiftMatch = !shortcut.shiftKey || event.shiftKey;\n        const metaMatch = !shortcut.metaKey || event.metaKey;\n\n        if (keyMatch && ctrlMatch && altMatch && shiftMatch && metaMatch) {\n          // Only trigger if all conditions match exactly\n          if (\n            (shortcut.ctrlKey === event.ctrlKey || shortcut.ctrlKey === undefined) &&\n            (shortcut.altKey === event.altKey || shortcut.altKey === undefined) &&\n            (shortcut.shiftKey === event.shiftKey || shortcut.shiftKey === undefined) &&\n            (shortcut.metaKey === event.metaKey || shortcut.metaKey === undefined)\n          ) {\n            event.preventDefault();\n            shortcut.action();\n            break;\n          }\n        }\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [actions]);\n}\n\nexport function useCommonShortcuts() {\n  const [, setLocation] = useLocation();\n\n  const shortcuts: ShortcutAction[] = [\n    {\n      key: 'h',\n      altKey: true,\n      action: () => setLocation('/'),\n      description: 'Alt+H - Aller Ã  l\\'accueil'\n    },\n    {\n      key: 'd',\n      altKey: true,\n      action: () => setLocation('/dashboard'),\n      description: 'Alt+D - Aller au dashboard'\n    },\n    {\n      key: 'm',\n      altKey: true,\n      action: () => setLocation('/dashboard?section=messages'),\n      description: 'Alt+M - Aller aux messages'\n    },\n    {\n      key: 'e',\n      altKey: true,\n      action: () => setLocation('/dashboard?section=events'),\n      description: 'Alt+E - Aller aux Ã©vÃ©nements'\n    },\n    {\n      key: 'p',\n      altKey: true,\n      action: () => setLocation('/dashboard?section=profile'),\n      description: 'Alt+P - Aller au profil'\n    },\n    {\n      key: 'n',\n      ctrlKey: true,\n      action: () => {\n        // This would open create event modal - for now just go to events\n        setLocation('/dashboard?section=events');\n        // TODO: Trigger create event modal\n      },\n      description: 'Ctrl+N - CrÃ©er un nouvel Ã©vÃ©nement'\n    },\n    {\n      key: '/',\n      action: () => {\n        // Focus search input if available\n        const searchInput = document.querySelector('input[placeholder*=\"recherch\"], input[placeholder*=\"Recherch\"]') as HTMLInputElement;\n        if (searchInput) {\n          searchInput.focus();\n        }\n      },\n      description: '/ - Rechercher'\n    },\n    {\n      key: 'Escape',\n      action: () => {\n        // Close modals, blur active elements\n        const activeElement = document.activeElement as HTMLElement;\n        if (activeElement && activeElement.blur) {\n          activeElement.blur();\n        }\n        \n        // Close any open dropdowns or modals\n        const openDropdowns = document.querySelectorAll('[data-state=\"open\"]');\n        openDropdowns.forEach((dropdown) => {\n          const closeButton = dropdown.querySelector('[aria-label*=\"Close\"], [aria-label*=\"Fermer\"], button[title*=\"Close\"], button[title*=\"Fermer\"]');\n          if (closeButton instanceof HTMLElement) {\n            closeButton.click();\n          }\n        });\n      },\n      description: 'Ã‰chap - Fermer les modales/dropdowns'\n    },\n    {\n      key: '?',\n      shiftKey: true,\n      action: () => {\n        // Show keyboard shortcuts help\n        showShortcutsHelp();\n      },\n      description: '? - Afficher l\\'aide des raccourcis'\n    }\n  ];\n\n  useKeyboardShortcuts(shortcuts);\n\n  return shortcuts;\n}\n\nfunction showShortcutsHelp() {\n  // Create and show shortcuts modal\n  const existingModal = document.getElementById('shortcuts-help-modal');\n  if (existingModal) {\n    existingModal.remove();\n  }\n\n  const modal = document.createElement('div');\n  modal.id = 'shortcuts-help-modal';\n  modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';\n  modal.innerHTML = `\n    <div class=\"bg-white rounded-lg p-6 max-w-md w-full mx-4 max-h-[80vh] overflow-y-auto\">\n      <div class=\"flex items-center justify-between mb-4\">\n        <h2 class=\"text-xl font-bold text-gray-900\">Raccourcis clavier</h2>\n        <button id=\"close-shortcuts-modal\" class=\"text-gray-400 hover:text-gray-600\">\n          <i class=\"fas fa-times\"></i>\n        </button>\n      </div>\n      \n      <div class=\"space-y-3\">\n        <div class=\"flex justify-between items-center\">\n          <span class=\"text-gray-700\">Accueil</span>\n          <kbd class=\"px-2 py-1 bg-gray-100 border rounded text-sm\">Alt + H</kbd>\n        </div>\n        <div class=\"flex justify-between items-center\">\n          <span class=\"text-gray-700\">Dashboard</span>\n          <kbd class=\"px-2 py-1 bg-gray-100 border rounded text-sm\">Alt + D</kbd>\n        </div>\n        <div class=\"flex justify-between items-center\">\n          <span class=\"text-gray-700\">Messages</span>\n          <kbd class=\"px-2 py-1 bg-gray-100 border rounded text-sm\">Alt + M</kbd>\n        </div>\n        <div class=\"flex justify-between items-center\">\n          <span class=\"text-gray-700\">Ã‰vÃ©nements</span>\n          <kbd class=\"px-2 py-1 bg-gray-100 border rounded text-sm\">Alt + E</kbd>\n        </div>\n        <div class=\"flex justify-between items-center\">\n          <span class=\"text-gray-700\">Profil</span>\n          <kbd class=\"px-2 py-1 bg-gray-100 border rounded text-sm\">Alt + P</kbd>\n        </div>\n        <div class=\"flex justify-between items-center\">\n          <span class=\"text-gray-700\">Nouvel Ã©vÃ©nement</span>\n          <kbd class=\"px-2 py-1 bg-gray-100 border rounded text-sm\">Ctrl + N</kbd>\n        </div>\n        <div class=\"flex justify-between items-center\">\n          <span class=\"text-gray-700\">Rechercher</span>\n          <kbd class=\"px-2 py-1 bg-gray-100 border rounded text-sm\">/</kbd>\n        </div>\n        <div class=\"flex justify-between items-center\">\n          <span class=\"text-gray-700\">Fermer modales</span>\n          <kbd class=\"px-2 py-1 bg-gray-100 border rounded text-sm\">Ã‰chap</kbd>\n        </div>\n        <div class=\"flex justify-between items-center\">\n          <span class=\"text-gray-700\">Aide raccourcis</span>\n          <kbd class=\"px-2 py-1 bg-gray-100 border rounded text-sm\">?</kbd>\n        </div>\n      </div>\n      \n      <div class=\"mt-6 p-3 bg-blue-50 rounded-lg\">\n        <p class=\"text-sm text-blue-700\">\n          <i class=\"fas fa-info-circle mr-2\"></i>\n          Utilisez ces raccourcis pour naviguer plus rapidement dans l'application.\n        </p>\n      </div>\n    </div>\n  `;\n\n  document.body.appendChild(modal);\n\n  // Close modal handlers\n  const closeModal = () => modal.remove();\n  document.getElementById('close-shortcuts-modal')?.addEventListener('click', closeModal);\n  modal.addEventListener('click', (e) => {\n    if (e.target === modal) closeModal();\n  });\n\n  // ESC key to close\n  const escHandler = (e: KeyboardEvent) => {\n    if (e.key === 'Escape') {\n      closeModal();\n      document.removeEventListener('keydown', escHandler);\n    }\n  };\n  document.addEventListener('keydown', escHandler);\n}","size_bytes":7635},"client/src/lib/address-autocomplete.ts":{"content":"// Service d'autocomplÃ©tion d'adresses franÃ§aises via l'API gouvernementale\nexport interface AddressSuggestion {\n  label: string;\n  postcode: string;\n  citycode: string;\n  city: string;\n  context: string;\n  coordinates: [number, number];\n}\n\nexport interface AddressApiResponse {\n  features: {\n    type: string;\n    geometry: {\n      type: string;\n      coordinates: [number, number];\n    };\n    properties: {\n      label: string;\n      score: number;\n      housenumber?: string;\n      id: string;\n      name: string;\n      postcode: string;\n      citycode: string;\n      x: number;\n      y: number;\n      city: string;\n      context: string;\n      type: string;\n      importance: number;\n      street?: string;\n    };\n  }[];\n}\n\nclass AddressAutocompleteService {\n  private baseUrl = 'https://api-adresse.data.gouv.fr/search';\n\n  async searchAddresses(query: string, limit: number = 5): Promise<AddressSuggestion[]> {\n    if (query.length < 3) {\n      return [];\n    }\n\n    try {\n      const params = new URLSearchParams({\n        q: query,\n        limit: limit.toString(),\n        autocomplete: '1'\n      });\n\n      const response = await fetch(`${this.baseUrl}?${params}`);\n      \n      if (!response.ok) {\n        console.error('Address API error:', response.status);\n        return [];\n      }\n\n      const data: AddressApiResponse = await response.json();\n\n      return data.features.map(feature => ({\n        label: feature.properties.label,\n        postcode: feature.properties.postcode,\n        citycode: feature.properties.citycode,\n        city: feature.properties.city,\n        context: feature.properties.context,\n        coordinates: feature.geometry.coordinates\n      }));\n\n    } catch (error) {\n      console.error('Address autocomplete error:', error);\n      return [];\n    }\n  }\n\n  // Recherche d'adresses avec focus sur les villes\n  async searchCities(query: string, limit: number = 5): Promise<AddressSuggestion[]> {\n    if (query.length < 2) {\n      return [];\n    }\n\n    try {\n      const params = new URLSearchParams({\n        q: query,\n        limit: limit.toString(),\n        type: 'municipality',\n        autocomplete: '1'\n      });\n\n      const response = await fetch(`${this.baseUrl}?${params}`);\n      \n      if (!response.ok) {\n        console.error('Cities API error:', response.status);\n        return [];\n      }\n\n      const data: AddressApiResponse = await response.json();\n\n      return data.features.map(feature => ({\n        label: feature.properties.label,\n        postcode: feature.properties.postcode,\n        citycode: feature.properties.citycode,\n        city: feature.properties.city,\n        context: feature.properties.context,\n        coordinates: feature.geometry.coordinates\n      }));\n\n    } catch (error) {\n      console.error('Cities autocomplete error:', error);\n      return [];\n    }\n  }\n\n  // Recherche d'adresses par code postal\n  async searchByPostalCode(postalCode: string): Promise<AddressSuggestion[]> {\n    if (postalCode.length < 2) {\n      return [];\n    }\n\n    try {\n      const params = new URLSearchParams({\n        q: postalCode,\n        limit: '10',\n        type: 'municipality'\n      });\n\n      const response = await fetch(`${this.baseUrl}?${params}`);\n      \n      if (!response.ok) {\n        console.error('Postal code API error:', response.status);\n        return [];\n      }\n\n      const data: AddressApiResponse = await response.json();\n\n      return data.features.map(feature => ({\n        label: feature.properties.label,\n        postcode: feature.properties.postcode,\n        citycode: feature.properties.citycode,\n        city: feature.properties.city,\n        context: feature.properties.context,\n        coordinates: feature.geometry.coordinates\n      }));\n\n    } catch (error) {\n      console.error('Postal code search error:', error);\n      return [];\n    }\n  }\n}\n\nexport const addressService = new AddressAutocompleteService();","size_bytes":3912},"client/src/lib/api.ts":{"content":"import { apiRequest } from \"./queryClient\";\nimport { buildApiUrl, defaultHeaders, requestTimeout, config } from \"./config\";\nimport { AuthService } from \"@/hooks/useAuth\";\n\nexport interface LoginData {\n  email: string;\n  password: string;\n  rememberMe?: boolean;\n}\n\nexport interface RegisterData {\n  name: string;\n  type: \"club\" | \"association\" | \"company\";\n  email: string;\n  phone?: string;\n  address?: string;\n  description?: string;\n  contactFirstName: string;\n  contactLastName: string;\n  password: string;\n  sports?: string[];\n}\n\nexport interface EventData {\n  name: string;\n  sport: string;\n  description?: string;\n  date: string;\n  duration?: string;\n  meetingPoint: string;\n  destination: string;\n  isRecurring?: boolean;\n  recurrencePattern?: string;\n  inviteEmails?: string[];\n}\n\nexport interface InvitationResponse {\n  name: string;\n  role: \"passenger\" | \"driver\";\n  availableSeats?: number;\n  comment?: string;\n}\n\n// Helper function for making API requests with JWT authentication\nasync function makeAuthenticatedRequest(method: string, path: string, data?: any): Promise<Response> {\n  const url = buildApiUrl(path);\n  const timeout = config.isProduction ? requestTimeout.production : requestTimeout.development;\n\n  const controller = new AbortController();\n  const timeoutId = setTimeout(() => controller.abort(), timeout);\n\n  try {\n    const headers: Record<string, string> = {\n      ...defaultHeaders,\n    };\n\n    // Add JWT Authorization header\n    const authHeader = AuthService.getAuthHeader();\n    if (authHeader) {\n      headers.Authorization = authHeader;\n    }\n\n    const response = await fetch(url, {\n      method,\n      headers,\n      body: data ? JSON.stringify(data) : undefined,\n      credentials: \"include\", // Keep for any legacy functionality\n      signal: controller.signal,\n    });\n\n    clearTimeout(timeoutId);\n    return response;\n  } catch (error) {\n    clearTimeout(timeoutId);\n    throw error;\n  }\n}\n\n// Helper function for public API requests (no auth required)\nasync function makePublicRequest(method: string, path: string, data?: any): Promise<Response> {\n  const url = buildApiUrl(path);\n  const timeout = config.isProduction ? requestTimeout.production : requestTimeout.development;\n\n  const controller = new AbortController();\n  const timeoutId = setTimeout(() => controller.abort(), timeout);\n\n  try {\n    const response = await fetch(url, {\n      method,\n      headers: defaultHeaders,\n      body: data ? JSON.stringify(data) : undefined,\n      credentials: \"include\",\n      signal: controller.signal,\n    });\n\n    clearTimeout(timeoutId);\n    return response;\n  } catch (error) {\n    clearTimeout(timeoutId);\n    throw error;\n  }\n}\n\nexport const api = {\n  auth: {\n    // Use AuthService methods for JWT authentication\n    login: async (data: LoginData) => {\n      const result = await AuthService.login(data.email, data.password, data.rememberMe);\n      if (!result.success) {\n        throw new Error(result.error || \"Login failed\");\n      }\n      return result;\n    },\n    \n    register: async (data: RegisterData) => {\n      const result = await AuthService.register(data);\n      if (!result.success) {\n        throw new Error(result.error || \"Registration failed\");\n      }\n      return result;\n    },\n    \n    logout: () => AuthService.logout(),\n    \n    getProfile: () => makeAuthenticatedRequest(\"GET\", \"/api/me\"),\n    \n    refreshToken: () => AuthService.refreshAccessToken(),\n  },\n  \n  events: {\n    getAll: () => makeAuthenticatedRequest(\"GET\", \"/api/events\"),\n    create: (data: EventData) => apiRequest(\"POST\", \"/api/events\", data),\n    update: (id: string, data: Partial<EventData>) => apiRequest(\"PUT\", `/api/events/${id}`, data),\n    delete: (id: string) => apiRequest(\"DELETE\", `/api/events/${id}`),\n    getParticipants: (id: string) => makeAuthenticatedRequest(\"GET\", `/api/events/${id}/participants`),\n    invite: (id: string, email: string, customMessage?: string) => \n      apiRequest(\"POST\", `/api/events/${id}/invite`, { email, customMessage }),\n    getChangeRequests: (id: string) => makeAuthenticatedRequest(\"GET\", `/api/events/${id}/change-requests`),\n    sendReminders: (id: string) => apiRequest(\"POST\", `/api/events/${id}/send-reminders`),\n    \n    // Public endpoints (no auth required)\n    getPublic: (id: string) => makePublicRequest(\"GET\", `/api/events/${id}/public`),\n    join: (id: string, data: InvitationResponse) => makePublicRequest(\"POST\", `/api/events/${id}/join`, data),\n  },\n  \n  invitations: {\n    create: (eventId: string) => apiRequest(\"POST\", `/api/events/${eventId}/invitations`),\n    get: (token: string) => makePublicRequest(\"GET\", `/api/invitations/${token}`),\n    respond: (token: string, data: InvitationResponse) => makePublicRequest(\"POST\", `/api/invitations/${token}/respond`, data),\n  },\n  \n  participants: {\n    update: (id: string, data: any) => apiRequest(\"PUT\", `/api/participants/${id}`, data),\n    delete: (id: string) => apiRequest(\"DELETE\", `/api/participants/${id}`),\n    createChangeRequest: (id: string, requestType: string, requestedValue: string, reason: string) =>\n      makePublicRequest(\"POST\", `/api/participants/${id}/change-request`, { \n        requestType, \n        requestedValue, \n        reason \n      }),\n  },\n  \n  changeRequests: {\n    update: (id: string, status: \"approved\" | \"rejected\", organizerComment?: string) =>\n      apiRequest(\"PUT\", `/api/change-requests/${id}`, { status, organizerComment }),\n  },\n  \n  messages: {\n    getByEvent: (eventId: string) => makeAuthenticatedRequest(\"GET\", `/api/events/${eventId}/messages`),\n    send: (eventId: string, content: string) => apiRequest(\"POST\", `/api/events/${eventId}/messages`, { content }),\n    delete: (eventId: string, messageId: string) => apiRequest(\"DELETE\", `/api/events/${eventId}/messages/${messageId}`),\n    sendAsParticipant: (eventId: string, senderName: string, senderEmail: string, content: string) => \n      makePublicRequest(\"POST\", `/api/events/${eventId}/messages/participant`, { \n        senderName, \n        senderEmail, \n        content \n      }),\n  },\n  \n  profile: {\n    update: (data: any) => apiRequest(\"PUT\", \"/api/profile\", data),\n    uploadLogo: (formData: FormData) => {\n      // Special handling for file upload\n      const authHeader = AuthService.getAuthHeader();\n      const headers: Record<string, string> = {};\n      if (authHeader) {\n        headers.Authorization = authHeader;\n      }\n\n      return fetch(buildApiUrl(\"/api/profile/logo\"), {\n        method: \"POST\",\n        headers,\n        body: formData, // Don't set Content-Type for FormData\n        credentials: \"include\",\n      });\n    },\n  },\n  \n  dashboard: {\n    getStats: () => makeAuthenticatedRequest(\"GET\", \"/api/dashboard/stats\"),\n    getRealtimeStats: () => makeAuthenticatedRequest(\"GET\", \"/api/dashboard/stats/realtime\"),\n  },\n\n  chatbot: {\n    getOrganizationHelp: (message: string) => \n      apiRequest(\"POST\", \"/api/chatbot/organization-help\", { message }),\n  },\n\n  email: {\n    sendCustom: (to: string, subject: string, content: string) =>\n      apiRequest(\"POST\", \"/api/send-custom-email\", { to, subject, content }),\n    diagnostic: () => makeAuthenticatedRequest(\"GET\", \"/api/email/diagnostic\"),\n  },\n\n  // Password reset (public endpoints)\n  password: {\n    requestReset: (email: string) => makePublicRequest(\"POST\", \"/api/forgot-password\", { email }),\n    reset: (token: string, newPassword: string) => \n      makePublicRequest(\"POST\", \"/api/reset-password\", { token, newPassword }),\n  },\n\n  // Admin support endpoints\n  admin: {\n    getConversations: () => makeAuthenticatedRequest(\"GET\", \"/api/admin/conversations\"),\n    createConversation: (data: any) => makeAuthenticatedRequest(\"POST\", \"/api/admin/conversations\", data),\n    getMessages: (conversationId: string) => makeAuthenticatedRequest(\"GET\", `/api/admin/conversations/${conversationId}/messages`),\n    sendMessage: (conversationId: string, message: string) => makeAuthenticatedRequest(\"POST\", `/api/admin/conversations/${conversationId}/messages`, { message }),\n    closeConversation: (conversationId: string) => makeAuthenticatedRequest(\"PUT\", `/api/admin/conversations/${conversationId}/close`),\n  },\n\n  // Subscription and payment endpoints  \n  subscription: {\n    getPlans: () => makePublicRequest(\"GET\", \"/api/subscription/plans\"),\n    getInfo: () => makeAuthenticatedRequest(\"GET\", \"/api/subscription/info\"),\n    createPayment: (planId: string, successUrl?: string, cancelUrl?: string) => \n      makeAuthenticatedRequest(\"POST\", \"/api/subscriptions/create\", { \n        planId, \n        successUrl, \n        cancelUrl \n      }),\n    handlePaymentSuccess: (sessionId: string, organizationId: string) =>\n      makeAuthenticatedRequest(\"POST\", \"/api/registration/payment-success\", {\n        sessionId,\n        organizationId\n      }),\n    handlePaymentCancellation: (organizationId?: string) =>\n      makeAuthenticatedRequest(\"POST\", \"/api/registration/payment-cancelled\", {\n        organizationId\n      }),\n    upgrade: (planId: string, successUrl?: string, cancelUrl?: string) =>\n      makeAuthenticatedRequest(\"POST\", \"/api/subscription/upgrade-from-decouverte\", {\n        planId,\n        successUrl,\n        cancelUrl\n      }),\n    cancel: () => makeAuthenticatedRequest(\"POST\", \"/api/subscription/cancel-to-decouverte\"),\n    canCreateEvent: () => makeAuthenticatedRequest(\"GET\", \"/api/subscription/can-create-event\"),\n    canSendInvitations: (count: number) => \n      makeAuthenticatedRequest(\"POST\", \"/api/subscription/can-send-invitations\", { count }),\n  },\n\n  // Stripe endpoints\n  stripe: {\n    getConfig: () => makePublicRequest(\"GET\", \"/api/stripe/config\"),\n    getPublicKey: () => makePublicRequest(\"GET\", \"/api/stripe/public-key\"),\n    createCheckoutSession: (planId: string, successUrl?: string, cancelUrl?: string) =>\n      makeAuthenticatedRequest(\"POST\", \"/api/stripe/create-checkout-session\", {\n        planId,\n        successUrl,\n        cancelUrl\n      }),\n    createPaymentIntent: (planId: string, amount: number, currency: string = 'eur') =>\n      makeAuthenticatedRequest(\"POST\", \"/api/stripe/create-payment-intent\", {\n        planId,\n        amount,\n        currency\n      }),\n    handlePaymentSuccess: (paymentIntentId: string) =>\n      makeAuthenticatedRequest(\"POST\", \"/api/stripe/payment-success\", {\n        paymentIntentId\n      }),\n    createCustomerPortal: () => makeAuthenticatedRequest(\"POST\", \"/api/stripe/customer-portal\"),\n    getSubscriptionInfo: () => makeAuthenticatedRequest(\"GET\", \"/api/stripe/subscription-info\"),\n    cancelSubscription: () => makeAuthenticatedRequest(\"POST\", \"/api/stripe/cancel-subscription\"),\n  },\n\n  // Diagnostic and test endpoints\n  health: () => makePublicRequest(\"GET\", \"/api/health\"),\n  authTest: () => makeAuthenticatedRequest(\"GET\", \"/api/auth-test\"),\n  test: () => makePublicRequest(\"GET\", \"/api/test\"),\n  debugUsers: () => makeAuthenticatedRequest(\"GET\", \"/api/debug/users\"),\n};","size_bytes":10906},"client/src/lib/config.ts":{"content":"// Configuration pour diffÃ©rents environnements\nexport const config = {\n  // API Base URL - s'adapte automatiquement Ã  l'environnement\n  apiBaseUrl: (() => {\n    // En dÃ©veloppement local, utiliser le serveur local si disponible, sinon Render\n    if (typeof window !== 'undefined' && window.location.hostname === 'localhost') {\n      // Check if we want to use local backend (useful for development)\n      const useLocalBackend = localStorage.getItem('useLocalBackend') === 'true';\n      return useLocalBackend ? 'http://localhost:8080' : 'https://teammove.fr';\n    }\n    \n    // En production ou preview, utiliser l'URL courante (mÃªme domaine)\n    if (typeof window !== 'undefined') {\n      return window.location.origin;\n    }\n    \n    // Fallback pour SSR ou environnements sans window\n    return 'https://teammove.fr';\n  })(),\n\n  // Configuration pour diffÃ©rents environnements\n  isDevelopment: process.env.NODE_ENV === 'development',\n  isProduction: process.env.NODE_ENV === 'production',\n  \n  // URLs spÃ©cifiques par environnement\n  environments: {\n    development: {\n      apiUrl: 'http://localhost:8080',\n      renderApiUrl: 'https://teammove.fr',\n      wsUrl: 'ws://localhost:8080'\n    },\n    production: {\n      apiUrl: '', // Sera l'origine courante\n      wsUrl: '' // Sera l'origine courante avec ws://\n    }\n  }\n};\n\n// Helper pour construire des URLs absolues\nexport function buildApiUrl(path: string): string {\n  const baseUrl = config.apiBaseUrl;\n  const cleanPath = path.startsWith('/') ? path : `/${path}`;\n  \n  if (baseUrl) {\n    return `${baseUrl}${cleanPath}`;\n  }\n  \n  // Si pas de baseUrl (ex: mÃªme origine), retourner le path tel quel\n  return cleanPath;\n}\n\n// Helper pour vÃ©rifier si on est sur Render\nexport function isRenderEnvironment(): boolean {\n  if (typeof window === 'undefined') return false;\n  return window.location.hostname.includes('onrender.com');\n}\n\n// Helper pour vÃ©rifier si on est sur Vercel  \nexport function isVercelEnvironment(): boolean {\n  if (typeof window === 'undefined') return false;\n  return window.location.hostname.includes('vercel.app');\n}\n\n// Configuration des headers par dÃ©faut\nexport const defaultHeaders = {\n  'Content-Type': 'application/json',\n  'Accept': 'application/json',\n};\n\n// Configuration de timeout pour les requÃªtes\nexport const requestTimeout = {\n  development: 10000, // 10s en dev\n  production: 30000   // 30s en prod\n};","size_bytes":2437},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\nimport { buildApiUrl } from \"./config\";\n\n// Token management\nclass TokenManager {\n  private static readonly ACCESS_TOKEN_KEY = \"TeamMove_access_token\";\n  private static readonly REFRESH_TOKEN_KEY = \"TeamMove_refresh_token\";\n\n  static getAccessToken(): string | null {\n    if (typeof window === 'undefined') return null;\n    return localStorage.getItem(this.ACCESS_TOKEN_KEY);\n  }\n\n  static getRefreshToken(): string | null {\n    if (typeof window === 'undefined') return null;\n    return localStorage.getItem(this.REFRESH_TOKEN_KEY);\n  }\n\n  static setAccessToken(token: string): void {\n    if (typeof window === 'undefined') return;\n    localStorage.setItem(this.ACCESS_TOKEN_KEY, token);\n  }\n\n  static clearTokens(): void {\n    if (typeof window === 'undefined') return;\n    localStorage.removeItem(this.ACCESS_TOKEN_KEY);\n    localStorage.removeItem(this.REFRESH_TOKEN_KEY);\n  }\n\n  static isTokenExpired(token: string): boolean {\n    try {\n      const payload = JSON.parse(atob(token.split('.')[1]));\n      const currentTime = Date.now() / 1000;\n      return payload.exp < currentTime;\n    } catch {\n      return true;\n    }\n  }\n}\n\n// Refresh token function\nasync function refreshAccessToken(): Promise<string | null> {\n  const refreshToken = TokenManager.getRefreshToken();\n  if (!refreshToken) return null;\n\n  try {\n    const response = await fetch(buildApiUrl(\"/api/refresh-token\"), {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ refreshToken }),\n    });\n\n    if (!response.ok) {\n      throw new Error(\"Failed to refresh token\");\n    }\n\n    const data = await response.json();\n    TokenManager.setAccessToken(data.accessToken);\n    return data.accessToken;\n  } catch (error) {\n    console.error(\"Token refresh failed:\", error);\n    TokenManager.clearTokens();\n    if (typeof window !== 'undefined') {\n      window.location.href = \"/\";\n    }\n    return null;\n  }\n}\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    console.error(`API Error: ${res.status} ${res.statusText}`, text);\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const fullUrl = url.startsWith('http') ? url : buildApiUrl(url);\n  \n  console.log(`ğŸŒ API Request: ${method} ${fullUrl}`);\n\n  // Get access token\n  let accessToken = TokenManager.getAccessToken();\n  \n  // Check if token is expired and try to refresh\n  if (accessToken && TokenManager.isTokenExpired(accessToken)) {\n    console.log(\"ğŸ”„ Access token expired, attempting refresh...\");\n    accessToken = await refreshAccessToken();\n    if (!accessToken) {\n      throw new Error(\"401: Authentication required\");\n    }\n  }\n\n  const headers: Record<string, string> = {\n    \"Content-Type\": \"application/json\",\n    \"Accept\": \"application/json\",\n  };\n\n  // Add Authorization header if we have a token\n  if (accessToken) {\n    headers.Authorization = `Bearer ${accessToken}`;\n  }\n\n  const res = await fetch(fullUrl, {\n    method,\n    headers,\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\", // For any remaining cookie-based functionality\n  });\n\n  console.log(`ğŸ“¡ API Response: ${res.status} ${res.statusText}`);\n  \n  // Handle 401 errors (token invalid/expired)\n  if (res.status === 401) {\n    console.warn('ğŸš« Authentication failed - token might be invalid');\n    \n    // Try to refresh token once more if it's not a login/register request\n    if (!url.includes('/login') && !url.includes('/register') && !url.includes('/refresh-token')) {\n      const newToken = await refreshAccessToken();\n      if (newToken) {\n        // Retry the request with the new token\n        const retryHeaders = { ...headers, Authorization: `Bearer ${newToken}` };\n        const retryRes = await fetch(fullUrl, {\n          method,\n          headers: retryHeaders,\n          body: data ? JSON.stringify(data) : undefined,\n          credentials: \"include\",\n        });\n        \n        if (retryRes.ok) {\n          console.log('âœ… Request successful after token refresh');\n          return retryRes;\n        }\n      }\n    }\n    \n    // If refresh failed or this is a login/register request, clear tokens\n    TokenManager.clearTokens();\n  }\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const url = queryKey.join(\"/\") as string;\n    const fullUrl = url.startsWith('http') ? url : buildApiUrl(url);\n    \n    // Get access token\n    let accessToken = TokenManager.getAccessToken();\n    \n    // Check if token is expired and try to refresh\n    if (accessToken && TokenManager.isTokenExpired(accessToken)) {\n      console.log(\"ğŸ”„ Query: Access token expired, attempting refresh...\");\n      accessToken = await refreshAccessToken();\n    }\n\n    const headers: Record<string, string> = {\n      \"Accept\": \"application/json\",\n    };\n\n    // Add Authorization header if we have a token\n    if (accessToken) {\n      headers.Authorization = `Bearer ${accessToken}`;\n    }\n\n    const res = await fetch(fullUrl, {\n      headers,\n      credentials: \"include\",\n    });\n\n    // Handle 401 based on behavior setting\n    if (res.status === 401) {\n      if (unauthorizedBehavior === \"returnNull\") {\n        console.log(\"ğŸ”„ Query: Returning null for 401\");\n        return null;\n      }\n      \n      // Try refresh once more for \"throw\" behavior\n      if (!url.includes('/login') && !url.includes('/register')) {\n        const newToken = await refreshAccessToken();\n        if (newToken) {\n          const retryRes = await fetch(fullUrl, {\n            headers: { ...headers, Authorization: `Bearer ${newToken}` },\n            credentials: \"include\",\n          });\n          \n          if (retryRes.ok) {\n            return await retryRes.json();\n          }\n        }\n      }\n      \n      TokenManager.clearTokens();\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"returnNull\" }), // Return null for 401s by default\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: 5 * 60 * 1000, // 5 minutes\n      retry: (failureCount, error) => {\n        // Don't retry on auth errors\n        if (error.message.includes('401')) {\n          return false;\n        }\n        return failureCount < 3;\n      },\n    },\n    mutations: {\n      retry: (failureCount, error) => {\n        // Don't retry on auth errors\n        if (error.message.includes('401')) {\n          return false;\n        }\n        return failureCount < 2;\n      },\n    },\n  },\n});\n\n// Expose TokenManager for use in components\nexport { TokenManager };","size_bytes":7066},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/pages/admin.tsx":{"content":"import { useEffect, useState } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { useQueryClient } from \"@tanstack/react-query\";\nimport Navbar from \"@/components/navigation/Navbar\";\nimport AdminSidebar from \"@/components/navigation/AdminSidebar\";\nimport AdminOverview from \"@/components/admin/AdminOverview\";\nimport OrganizationsManagement from \"@/components/admin/OrganizationsManagement\";\nimport AdminMessaging from \"@/components/admin/AdminMessaging\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function Admin() {\n  const [activeSection, setActiveSection] = useState(\"overview\");\n  const [, setLocation] = useLocation();\n  const queryClient = useQueryClient();\n  const { organization, isAuthenticated, logout } = useAuth();\n  const { toast } = useToast();\n\n  // Check if user is admin\n  const { data: isAdmin, isLoading: isCheckingAdmin } = useQuery({\n    queryKey: [\"/api/me\"],\n    select: (data: any) => data?.role === 'admin',\n    enabled: !!isAuthenticated,\n  });\n\n  // Redirect if not authenticated or not admin\n  useEffect(() => {\n    if (!isAuthenticated) {\n      setLocation(\"/\");\n    } else if (!isCheckingAdmin && !isAdmin) {\n      setLocation(\"/dashboard\");\n      toast({\n        title: \"AccÃ¨s refusÃ©\",\n        description: \"Vous n'avez pas les permissions d'administration.\",\n        variant: \"destructive\",\n      });\n    }\n  }, [isAuthenticated, isAdmin, isCheckingAdmin, setLocation, toast]);\n\n  const handleLogout = async () => {\n    try {\n      await logout();\n      toast({\n        title: \"DÃ©connexion rÃ©ussie\",\n        description: \"Vous avez Ã©tÃ© dÃ©connectÃ© avec succÃ¨s.\",\n      });\n    } catch (error) {\n      console.error(\"Logout error:\", error);\n      toast({\n        title: \"Erreur\",\n        description: \"Erreur lors de la dÃ©connexion.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const renderContent = () => {\n    switch (activeSection) {\n      case \"overview\":\n        return <AdminOverview />;\n      case \"organizations\":\n        return <OrganizationsManagement />;\n      case \"support\":\n        return <AdminMessaging />;\n      default:\n        return <AdminOverview />;\n    }\n  };\n\n  // Show loading while checking admin status\n  if (isCheckingAdmin) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-primary\"></div>\n      </div>\n    );\n  }\n\n  // Don't render if not admin\n  if (!isAdmin) {\n    return null;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <Navbar\n        isAuthenticated\n        organization={organization}\n        onLogout={handleLogout}\n      />\n\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"flex flex-col lg:flex-row gap-8\">\n          <AdminSidebar\n            activeSection={activeSection}\n            onSectionChange={setActiveSection}\n          />\n          <div className=\"flex-1\">\n            {renderContent()}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":3155},"client/src/pages/dashboard.tsx":{"content":"import { useEffect, useState } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { useQueryClient } from \"@tanstack/react-query\";\nimport Navbar from \"@/components/navigation/Navbar\";\nimport DashboardSidebar from \"@/components/navigation/DashboardSidebar\";\nimport Overview from \"@/components/dashboard/Overview\";\nimport Events from \"@/components/dashboard/Events\";\nimport Messages from \"@/components/dashboard/Messages\";\nimport Profile from \"@/components/dashboard/Profile\";\nimport AdminMessaging from \"@/components/admin/AdminMessaging\";\nimport Support from \"@/components/dashboard/Support\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useCommonShortcuts } from \"@/hooks/useKeyboardShortcuts\";\n\nexport default function Dashboard() {\n  const [activeSection, setActiveSection] = useState(\"overview\");\n  const [, setLocation] = useLocation();\n  const queryClient = useQueryClient();\n  const { organization, isAuthenticated, logout } = useAuth();\n  const { toast } = useToast();\n\n  // Enable keyboard shortcuts\n  useCommonShortcuts();\n\n  // ğŸ”¹ Redirection automatique si non connectÃ©\n  useEffect(() => {\n    if (!isAuthenticated) {\n      setLocation(\"/\");\n    }\n  }, [isAuthenticated, setLocation]);\n\n  const handleLogout = async () => {\n    try {\n      // Use AuthService.logout() which properly handles token cleanup\n      await logout();\n\n      toast({\n        title: \"DÃ©connexion rÃ©ussie\",\n        description: \"Vous avez Ã©tÃ© dÃ©connectÃ© avec succÃ¨s.\",\n      });\n    } catch (error) {\n      console.error(\"Logout error:\", error);\n      toast({\n        title: \"Erreur\",\n        description: \"Erreur lors de la dÃ©connexion.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n\n  const renderContent = () => {\n    switch (activeSection) {\n      case \"overview\":\n        return <Overview />;\n      case \"events\":\n        return <Events />;\n      case \"messages\":\n        return <Messages />;\n      case \"support\":\n        return organization?.role === 'admin' ? <AdminMessaging /> : <Support />;\n      case \"profile\":\n        return <Profile />;\n      default:\n        return <Overview />;\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <Navbar\n        isAuthenticated\n        organization={organization}\n        onLogout={handleLogout}\n      />\n\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"flex flex-col lg:flex-row gap-8\">\n          <DashboardSidebar\n            activeSection={activeSection}\n            onSectionChange={setActiveSection}\n          />\n          <div className=\"flex-1\">\n            {renderContent()}\n          </div>\n        </div>\n        \n        {/* Keyboard shortcuts hint */}\n        <div className=\"fixed bottom-4 right-4 z-40\">\n          <button \n            className=\"bg-gray-800 text-white p-3 rounded-full shadow-lg hover:bg-gray-700 transition-colors\"\n            onClick={() => {\n              const event = new KeyboardEvent('keydown', {\n                key: '?',\n                shiftKey: true\n              });\n              document.dispatchEvent(event);\n            }}\n            title=\"Afficher les raccourcis clavier (Shift + ?)\"\n          >\n            <i className=\"fas fa-keyboard text-lg\"></i>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":3402},"client/src/pages/event-public.tsx":{"content":"import { useParams } from \"wouter\";\nimport EventPublicView from \"@/components/public/EventPublicView\";\n\nexport default function EventPublic() {\n  const params = useParams();\n  const eventId = params.id;\n\n  if (!eventId) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold text-gray-900\">Ã‰vÃ©nement introuvable</h1>\n          <p className=\"text-gray-600\">L'identifiant de l'Ã©vÃ©nement est manquant.</p>\n        </div>\n      </div>\n    );\n  }\n\n  return <EventPublicView eventId={eventId} />;\n}","size_bytes":619},"client/src/pages/home.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport Navbar from \"@/components/navigation/Navbar\";\nimport LoginModal from \"@/components/modals/LoginModal\";\nimport RegistrationModal from \"@/components/modals/RegistrationModal\";\nimport DemoModal from \"@/components/modals/DemoModal\";\nimport AdminRegistrationModal from \"@/components/admin/AdminRegistrationModal\";\nimport { Button } from \"@/components/ui/button\";\n\nexport default function Home() {\n  const [showLogin, setShowLogin] = useState(false);\n  const [showRegistration, setShowRegistration] = useState(false);\n  const [showDemo, setShowDemo] = useState(false);\n  const [showAdminRegistration, setShowAdminRegistration] = useState(false);\n  const [konami, setKonami] = useState<string[]>([]);\n\n  // Secret key sequence for admin registration (Konami code + 'admin')\n  const secretSequence = [\n    'ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown',\n    'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight',\n    'KeyB', 'KeyA', 'KeyA', 'KeyD', 'KeyM', 'KeyI', 'KeyN'\n  ];\n\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      const newKonami = [...konami, e.code].slice(-secretSequence.length);\n      setKonami(newKonami);\n\n      // Check if the sequence matches\n      if (newKonami.length === secretSequence.length && \n          newKonami.every((key, index) => key === secretSequence[index])) {\n        setShowAdminRegistration(true);\n        setKonami([]); // Reset\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [konami]);\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <Navbar \n        onShowLogin={() => setShowLogin(true)}\n        onShowRegistration={() => setShowRegistration(true)}\n      />\n      \n      {/* Hero Section */}\n      <section className=\"relative py-20 hero-gradient\">\n        <div className=\"absolute inset-0 bg-black/20\"></div>\n        <div className=\"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center\">\n          <h1 className=\"text-4xl md:text-6xl font-bold text-white mb-6\">\n            Team Move, lâ€™application qui simplifie lâ€™organisation des dÃ©placements en groupe via le covoiturage. \n          </h1>\n          <p className=\"text-xl text-white/90 mb-8 max-w-3xl mx-auto\">\n            Team Move est la plateforme numÃ©rique qui facilite et sÃ©curise la mobilitÃ© des Ã©quipes.\nClubs, associations, entreprises ou collectivitÃ©s peuvent planifier leurs dÃ©placements, communiquer en temps rÃ©el et rÃ©agir instantanÃ©ment aux imprÃ©vus. Plus quâ€™un outil logistique, Team Move est un vÃ©ritable cockpit de pilotage de la mobilitÃ© collective, simple, efficace et durable.\n          </p>\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center items-center\">\n            <Button \n              onClick={() => setShowRegistration(true)}\n              className=\"bg-white text-primary px-8 py-3 hover:bg-gray-100\"\n              size=\"lg\"\n            >\n              Commencer gratuitement\n            </Button>\n            <Button \n              onClick={() => setShowDemo(true)}\n              //variant=\"outline\"\n              className=\"border-white text-white px-8 py-3 hover:bg-white hover:text-primary\"\n              size=\"lg\"\n            >\n              <i className=\"fas fa-play mr-2\"></i>\n              Voir la dÃ©mo\n            </Button>\n          </div>\n        </div>\n      </section>\n\n      {/* Features Section */}\n      <section id=\"features\" className=\"py-20 bg-white\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-16\">\n            <h2 className=\"text-3xl md:text-4xl font-bold text-gray-900 mb-4\">\n               Team Move â€“ la mobilitÃ© simplifiÃ©e pour toutes vos Ã©quipes \n            </h2>\n            {/* <p className=\"text-xl text-gray-600 max-w-3xl mx-auto\">\n              Une solution complÃ¨te pour gÃ©rer vos Ã©vÃ©nements sportifs et organiser les dÃ©placements de vos membres.\n            </p> */}\n          </div>\n          \n          <div className=\"grid md:grid-cols-3 gap-8\">\n            <div className=\"text-center p-6\">\n              <div className=\"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <i className=\"fas fa-calendar-alt text-primary text-2xl\"></i>\n              </div>\n              <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">Gestion d'Ã©vÃ©nements</h3>\n              <p className=\"text-gray-600\">CrÃ©ez et gÃ©rez facilement vos Ã©vÃ©nements ponctuels ou rÃ©currents avec tous les dÃ©tails nÃ©cessaires.</p>\n            </div>\n            \n            <div className=\"text-center p-6\">\n              <div className=\"w-16 h-16 bg-secondary/10 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <i className=\"fas fa-users text-secondary text-2xl\"></i>\n              </div>\n              <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">Invitations automatiques</h3>\n              <p className=\"text-gray-600\">Invitez vos membres par email avec des liens personnalisÃ©s et une inscription simplifiÃ©e.</p>\n            </div>\n            \n            <div className=\"text-center p-6\">\n              <div className=\"w-16 h-16 bg-accent/10 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <i className=\"fas fa-car-side text-accent text-2xl\"></i>\n              </div>\n              <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">Optimisation des trajets</h3>\n              <p className=\"text-gray-600\">SystÃ¨me intelligent de correspondance entre conducteurs et passagers selon les places disponibles.</p>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* How it works */}\n      <section id=\"how-it-works\" className=\"py-20 bg-white\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-16\">\n            <h2 className=\"text-3xl md:text-4xl font-bold text-gray-900 mb-4\">Comment Ã§a marche ?</h2>\n          </div>\n          \n          <div className=\"grid md:grid-cols-4 gap-8\">\n            <div className=\"text-center\">\n              <div className=\"w-12 h-12 bg-primary text-white rounded-full flex items-center justify-center mx-auto mb-4 text-xl font-bold\">1</div>\n              <h3 className=\"font-semibold text-gray-900 mb-2\">CrÃ©ez votre compte</h3>\n              <p className=\"text-gray-600\">Inscrivez votre club, association ou entreprise en quelques clics.</p>\n            </div>\n            \n            <div className=\"text-center\">\n              <div className=\"w-12 h-12 bg-primary text-white rounded-full flex items-center justify-center mx-auto mb-4 text-xl font-bold\">2</div>\n              <h3 className=\"font-semibold text-gray-900 mb-2\">Planifiez vos Ã©vÃ©nements</h3>\n              <p className=\"text-gray-600\">CrÃ©ez vos Ã©vÃ©nements sportifs avec lieu de rendez-vous et destination.</p>\n            </div>\n            \n            <div className=\"text-center\">\n              <div className=\"w-12 h-12 bg-primary text-white rounded-full flex items-center justify-center mx-auto mb-4 text-xl font-bold\">3</div>\n              <h3 className=\"font-semibold text-gray-900 mb-2\">Invitez vos membres</h3>\n              <p className=\"text-gray-600\">Envoyez des invitations par email avec inscription automatique.</p>\n            </div>\n            \n            <div className=\"text-center\">\n              <div className=\"w-12 h-12 bg-primary text-white rounded-full flex items-center justify-center mx-auto mb-4 text-xl font-bold\">4</div>\n              <h3 className=\"font-semibold text-gray-900 mb-2\">Organisez le covoiturage</h3>\n              <p className=\"text-gray-600\">Les membres choisissent leur rÃ´le et les conducteurs indiquent leurs places disponibles.</p>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Modals */}\n      <LoginModal \n        isOpen={showLogin}\n        onClose={() => setShowLogin(false)}\n        onShowRegistration={() => {\n          setShowLogin(false);\n          setShowRegistration(true);\n        }}\n      />\n      \n      <RegistrationModal \n        isOpen={showRegistration}\n        onClose={() => setShowRegistration(false)}\n        onShowLogin={() => {\n          setShowRegistration(false);\n          setShowLogin(true);\n        }}\n      />\n      \n      <DemoModal \n        isOpen={showDemo}\n        onClose={() => setShowDemo(false)}\n      />\n      \n      <AdminRegistrationModal \n        isOpen={showAdminRegistration}\n        onClose={() => setShowAdminRegistration(false)}\n        onSuccess={() => {\n          setShowAdminRegistration(false);\n          setShowLogin(true);\n        }}\n      />\n    </div>\n  );\n}\n","size_bytes":8713},"client/src/pages/invitation.tsx":{"content":"import { useState } from \"react\";\nimport { useRoute } from \"wouter\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { api, type InvitationResponse } from \"@/lib/api\";\nimport type { Event, EventInvitation, Organization } from \"@shared/schema\";\n\ninterface InvitationData {\n  invitation: EventInvitation;\n  event: Event;\n  organization: Organization;\n}\n\nexport default function Invitation() {\n  const [, params] = useRoute(\"/invitation/:token\");\n  const token = params?.token;\n  const [name, setName] = useState(\"\");\n  const [role, setRole] = useState<\"passenger\" | \"driver\">(\"passenger\");\n  const [availableSeats, setAvailableSeats] = useState<number>(1);\n  const [comment, setComment] = useState(\"\");\n  const [accepted, setAccepted] = useState(false);\n  const { toast } = useToast();\n\n  const { data: invitationData, isLoading, error } = useQuery<InvitationData>({\n    queryKey: [`/api/invitations/${token}`],\n    enabled: !!token,\n  });\n\n  const respondMutation = useMutation({\n    mutationFn: (data: InvitationResponse) =>\n      api.invitations.respond(token!, data),\n    onSuccess: () => {\n      toast({\n        title: \"Participation confirmÃ©e\",\n        description: \"Votre participation a Ã©tÃ© enregistrÃ©e avec succÃ¨s.\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erreur\",\n        description: error.message || \"Une erreur est survenue.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!name || !accepted) {\n      toast({\n        title: \"Erreur\",\n        description: \"Veuillez remplir tous les champs requis.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (role === \"driver\" && (availableSeats < 1 || availableSeats > 7)) {\n      toast({\n        title: \"Erreur\",\n        description: \"Les conducteurs doivent indiquer entre 1 et 7 places disponibles.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    respondMutation.mutate({\n      name,\n      role,\n      availableSeats: role === \"driver\" ? availableSeats : undefined,\n      comment: comment || undefined,\n    });\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-primary\"></div>\n      </div>\n    );\n  }\n\n  if (error || !invitationData) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <Card className=\"w-full max-w-md mx-4\">\n          <CardContent className=\"pt-6\">\n            <div className=\"text-center\">\n              <i className=\"fas fa-exclamation-triangle text-red-500 text-4xl mb-4\"></i>\n              <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">Invitation introuvable</h1>\n              <p className=\"text-gray-600\">Cette invitation n'existe pas ou a expirÃ©.</p>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  const { invitation, event, organization } = invitationData;\n\n  if (invitation.status !== \"pending\") {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <Card className=\"w-full max-w-md mx-4\">\n          <CardContent className=\"pt-6\">\n            <div className=\"text-center\">\n              <i className=\"fas fa-check-circle text-green-500 text-4xl mb-4\"></i>\n              <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">Invitation dÃ©jÃ  traitÃ©e</h1>\n              <p className=\"text-gray-600\">Vous avez dÃ©jÃ  rÃ©pondu Ã  cette invitation.</p>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"max-w-2xl mx-auto px-4 py-12\">\n        <Card className=\"animate-fade-in\">\n          <CardContent className=\"p-8\">\n            {/* Header */}\n            <div className=\"text-center mb-8\">\n              <div className=\"flex items-center justify-center space-x-2 mb-4\">\n                <i className=\"fas fa-car text-primary text-3xl\"></i>\n                <span className=\"text-2xl font-bold text-gray-900\">TeamMove</span>\n              </div>\n              <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">Invitation Ã  un Ã©vÃ©nement</h1>\n              <p className=\"text-gray-600\">Vous Ãªtes invitÃ©(e) Ã  participer Ã  un Ã©vÃ©nement sportif</p>\n            </div>\n\n            {/* Event Details */}\n            <div className=\"bg-gray-50 rounded-lg p-6 mb-8\">\n              <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">{event.name}</h2>\n              \n              <div className=\"space-y-3\">\n                <div className=\"flex items-center text-gray-600\">\n                  <i className=\"fas fa-calendar mr-3 w-5\"></i>\n                  <span>{new Date(event.date).toLocaleDateString('fr-FR', { \n                    weekday: 'long', \n                    year: 'numeric', \n                    month: 'long', \n                    day: 'numeric',\n                    hour: '2-digit',\n                    minute: '2-digit'\n                  })}</span>\n                </div>\n                \n                <div className=\"flex items-center text-gray-600\">\n                  <i className=\"fas fa-map-marker-alt mr-3 w-5\"></i>\n                  <span>RDV: {event.meetingPoint}</span>\n                </div>\n                \n                <div className=\"flex items-center text-gray-600\">\n                  <i className=\"fas fa-flag-checkered mr-3 w-5\"></i>\n                  <span>Destination: {event.destination}</span>\n                </div>\n                \n                <div className=\"flex items-center text-gray-600\">\n                  <i className=\"fas fa-user mr-3 w-5\"></i>\n                  <span>OrganisÃ© par: {organization.name}</span>\n                </div>\n              </div>\n            </div>\n\n            {/* Response Form */}\n            <form onSubmit={handleSubmit} className=\"space-y-6\">\n              <div>\n                <Label htmlFor=\"name\">Votre nom complet *</Label>\n                <Input \n                  id=\"name\"\n                  value={name}\n                  onChange={(e) => setName(e.target.value)}\n                  placeholder=\"Jean Dupont\"\n                  required\n                />\n              </div>\n              \n              <div>\n                <Label htmlFor=\"email\">Email *</Label>\n                <Input \n                  id=\"email\"\n                  value={invitation.email}\n                  disabled\n                  className=\"bg-gray-100\"\n                />\n              </div>\n              \n              {/* Role Selection */}\n              <div>\n                <Label className=\"text-lg font-semibold text-gray-900 mb-4\">Votre participation *</Label>\n                <RadioGroup value={role} onValueChange={(value) => setRole(value as \"passenger\" | \"driver\")}>\n                  <div className=\"space-y-3\">\n                    <div className=\"flex items-start space-x-3 p-4 border-2 border-gray-200 rounded-lg hover:border-primary cursor-pointer transition-colors\">\n                      <RadioGroupItem value=\"passenger\" id=\"passenger\" className=\"mt-1\" />\n                      <Label htmlFor=\"passenger\" className=\"cursor-pointer flex-1\">\n                        <div className=\"font-semibold text-gray-900\">Passager</div>\n                        <div className=\"text-sm text-gray-600\">Je souhaite Ãªtre transportÃ©(e) par un conducteur</div>\n                      </Label>\n                    </div>\n                    \n                    <div className=\"flex items-start space-x-3 p-4 border-2 border-gray-200 rounded-lg hover:border-primary cursor-pointer transition-colors\">\n                      <RadioGroupItem value=\"driver\" id=\"driver\" className=\"mt-1\" />\n                      <Label htmlFor=\"driver\" className=\"cursor-pointer flex-1\">\n                        <div className=\"font-semibold text-gray-900\">Conducteur</div>\n                        <div className=\"text-sm text-gray-600 mb-3\">Je peux transporter d'autres participants</div>\n                        \n                        {/* Seat Selection */}\n                        {role === \"driver\" && (\n                          <div className=\"mt-3\">\n                            <Label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                              Nombre de places disponibles dans votre vÃ©hicule *\n                            </Label>\n                            <div className=\"grid grid-cols-7 gap-2\">\n                              {[1, 2, 3, 4, 5, 6, 7].map((seats) => (\n                                <Button\n                                  key={seats}\n                                  type=\"button\"\n                                  variant={availableSeats === seats ? \"default\" : \"outline\"}\n                                  className=\"w-10 h-10\"\n                                  onClick={() => setAvailableSeats(seats)}\n                                >\n                                  {seats}\n                                </Button>\n                              ))}\n                            </div>\n                          </div>\n                        )}\n                      </Label>\n                    </div>\n                  </div>\n                </RadioGroup>\n              </div>\n              \n              <div>\n                <Label htmlFor=\"comment\">Commentaire (optionnel)</Label>\n                <Textarea \n                  id=\"comment\"\n                  value={comment}\n                  onChange={(e) => setComment(e.target.value)}\n                  placeholder=\"Message pour l'organisateur...\"\n                  rows={3}\n                />\n              </div>\n              \n              <div className=\"flex items-start space-x-2\">\n                <Checkbox \n                  id=\"terms\"\n                  checked={accepted}\n                  onCheckedChange={(checked) => setAccepted(checked === true)}\n                  required\n                />\n                <Label htmlFor=\"terms\" className=\"text-sm text-gray-600\">\n                  J'accepte de participer Ã  cet Ã©vÃ©nement et de respecter les conditions de covoiturage\n                </Label>\n              </div>\n              \n              <div className=\"flex justify-center\">\n                <Button \n                  type=\"submit\" \n                  size=\"lg\"\n                  disabled={respondMutation.isPending}\n                  className=\"px-8 py-3\"\n                >\n                  {respondMutation.isPending ? (\n                    <>\n                      <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                      Envoi en cours...\n                    </>\n                  ) : (\n                    \"Confirmer ma participation\"\n                  )}\n                </Button>\n              </div>\n            </form>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","size_bytes":11480},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/pages/reply-message.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Button } from \"@/components/ui/button\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Label } from \"@/components/ui/label\";\nimport { Input } from \"@/components/ui/input\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface ReplyData {\n  eventName: string;\n  organizerName: string;\n  originalMessage: string;\n  messageDate: string;\n}\n\nexport default function ReplyMessage() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const [isLoading, setIsLoading] = useState(false);\n  const [reply, setReply] = useState(\"\");\n  const [participantName, setParticipantName] = useState(\"\");\n  const [participantEmail, setParticipantEmail] = useState(\"\");\n  const [replyData, setReplyData] = useState<ReplyData | null>(null);\n  const [token, setToken] = useState(\"\");\n  const [isSubmitted, setIsSubmitted] = useState(false);\n\n  useEffect(() => {\n    // Extraire le token depuis l'URL\n    const urlParams = new URLSearchParams(window.location.search);\n    const urlToken = urlParams.get('token') || urlParams.get('replyToken');\n    \n    if (!urlToken) {\n      toast({\n        title: \"Erreur\",\n        description: \"Token de rÃ©ponse manquant\",\n        variant: \"destructive\",\n      });\n      setLocation(\"/\");\n      return;\n    }\n\n    setToken(urlToken);\n    \n    // Charger les donnÃ©es de la rÃ©ponse\n    fetchReplyData(urlToken);\n  }, []);\n\n  const fetchReplyData = async (replyToken: string) => {\n    try {\n      const response = await apiRequest(\"GET\", `/api/reply-token/${replyToken}`);\n      const data = await response.json();\n      setReplyData(data);\n      \n      // PrÃ©-remplir avec les donnÃ©es participant si disponibles\n      if (data.participantName) setParticipantName(data.participantName);\n      if (data.participantEmail) setParticipantEmail(data.participantEmail);\n    } catch (error) {\n      console.error(\"Error fetching reply data:\", error);\n      toast({\n        title: \"Erreur\",\n        description: \"Impossible de charger les donnÃ©es de rÃ©ponse\",\n        variant: \"destructive\",\n      });\n      setLocation(\"/\");\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!reply.trim() || !participantName.trim() || !participantEmail.trim()) {\n      toast({\n        title: \"Erreur\",\n        description: \"Veuillez remplir tous les champs\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setIsLoading(true);\n    \n    try {\n      await apiRequest(\"POST\", `/api/reply-message/${token}`, {\n        content: reply.trim(),\n        participantName: participantName.trim(),\n        participantEmail: participantEmail.trim(),\n      });\n\n      setIsSubmitted(true);\n      \n      toast({\n        title: \"RÃ©ponse envoyÃ©e\",\n        description: \"Votre rÃ©ponse a Ã©tÃ© envoyÃ©e Ã  l'organisateur avec succÃ¨s !\",\n      });\n    } catch (error) {\n      console.error(\"Reply error:\", error);\n      toast({\n        title: \"Erreur\",\n        description: \"Impossible d'envoyer votre rÃ©ponse. Veuillez rÃ©essayer.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  if (isSubmitted) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4\">\n        <Card className=\"max-w-lg w-full shadow-xl\">\n          <CardHeader className=\"text-center pb-6\">\n            <div className=\"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4\">\n              <i className=\"fas fa-check-circle text-green-600 text-2xl\"></i>\n            </div>\n            <CardTitle className=\"text-2xl font-bold text-gray-900\">\n              RÃ©ponse EnvoyÃ©e !\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"text-center\">\n            <p className=\"text-gray-600 mb-6\">\n              Votre rÃ©ponse a Ã©tÃ© envoyÃ©e avec succÃ¨s Ã  l'organisateur. \n              Celui-ci la recevra dans sa messagerie du dashboard.\n            </p>\n            <Button \n              onClick={() => setLocation(\"/\")}\n              className=\"w-full\"\n            >\n              Retour Ã  l'accueil\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  if (!replyData) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-primary\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4\">\n      <Card className=\"max-w-2xl w-full shadow-xl\">\n        <CardHeader className=\"bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-t-lg\">\n          <CardTitle className=\"text-2xl font-bold flex items-center\">\n            <i className=\"fas fa-reply mr-3\"></i>\n            RÃ©pondre Ã  l'organisateur\n          </CardTitle>\n        </CardHeader>\n        \n        <CardContent className=\"p-6\">\n          {/* Message Original */}\n          <div className=\"bg-gray-50 p-4 rounded-lg border border-gray-200 mb-6\">\n            <div className=\"flex items-start space-x-3 mb-3\">\n              <div className=\"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center\">\n                <i className=\"fas fa-user text-white text-sm\"></i>\n              </div>\n              <div className=\"flex-1\">\n                <h3 className=\"font-semibold text-gray-900\">{replyData.eventName}</h3>\n                <p className=\"text-sm text-gray-600\">\n                  Message de {replyData.organizerName} â€¢ {replyData.messageDate}\n                </p>\n              </div>\n            </div>\n            <div className=\"pl-13\">\n              <p className=\"text-gray-700 italic\">\n                \"{replyData.originalMessage}\"\n              </p>\n            </div>\n          </div>\n\n          {/* Formulaire de rÃ©ponse */}\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <Label htmlFor=\"participantName\">Votre nom *</Label>\n                <Input\n                  id=\"participantName\"\n                  value={participantName}\n                  onChange={(e) => setParticipantName(e.target.value)}\n                  placeholder=\"Entrez votre nom\"\n                  disabled={isLoading}\n                  required\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"participantEmail\">Votre email *</Label>\n                <Input\n                  id=\"participantEmail\"\n                  type=\"email\"\n                  value={participantEmail}\n                  onChange={(e) => setParticipantEmail(e.target.value)}\n                  placeholder=\"Entrez votre email\"\n                  disabled={isLoading}\n                  required\n                />\n              </div>\n            </div>\n\n            <div>\n              <Label htmlFor=\"reply\">Votre rÃ©ponse *</Label>\n              <Textarea\n                id=\"reply\"\n                value={reply}\n                onChange={(e) => setReply(e.target.value)}\n                placeholder=\"Tapez votre rÃ©ponse ici...\"\n                className=\"min-h-[120px] resize-none\"\n                disabled={isLoading}\n                required\n              />\n            </div>\n\n            <div className=\"flex justify-end space-x-3 pt-4\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={() => setLocation(\"/\")}\n                disabled={isLoading}\n              >\n                Annuler\n              </Button>\n              <Button\n                type=\"submit\"\n                disabled={isLoading || !reply.trim() || !participantName.trim() || !participantEmail.trim()}\n                className=\"bg-primary hover:bg-blue-700\"\n              >\n                {isLoading ? (\n                  <>\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                    Envoi...\n                  </>\n                ) : (\n                  <>\n                    <i className=\"fas fa-paper-plane mr-2\"></i>\n                    Envoyer la rÃ©ponse\n                  </>\n                )}\n              </Button>\n            </div>\n          </form>\n          \n          <div className=\"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200\">\n            <div className=\"flex items-start space-x-2\">\n              <i className=\"fas fa-info-circle text-blue-600 mt-0.5\"></i>\n              <div className=\"text-sm text-blue-800\">\n                <p className=\"font-medium mb-1\">Ã€ propos de cette rÃ©ponse :</p>\n                <ul className=\"space-y-1 text-blue-700\">\n                  <li>â€¢ Votre rÃ©ponse sera envoyÃ©e directement Ã  l'organisateur</li>\n                  <li>â€¢ Elle apparaÃ®tra dans sa messagerie du dashboard</li>\n                  <li>â€¢ L'organisateur pourra vous rÃ©pondre directement par email</li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":9396},"client/src/pages/reset-password.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { CheckCircle, AlertCircle, Eye, EyeOff } from \"lucide-react\";\n\nexport default function ResetPasswordPage() {\n  const [password, setPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const [showPassword, setShowPassword] = useState(false);\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\n  const [token, setToken] = useState(\"\");\n  const [isTokenValid, setIsTokenValid] = useState<boolean | null>(null);\n  const [isSuccess, setIsSuccess] = useState(false);\n  const { toast } = useToast();\n  const [, setLocation] = useLocation();\n\n  // Extract token from URL\n  useEffect(() => {\n    const urlParams = new URLSearchParams(window.location.search);\n    const tokenParam = urlParams.get('token');\n    \n    if (tokenParam) {\n      setToken(tokenParam);\n      \n      // Validate token\n      fetch(`/api/validate-reset-token/${tokenParam}`)\n        .then(res => res.json())\n        .then(data => {\n          setIsTokenValid(data.valid);\n          if (!data.valid) {\n            toast({\n              title: \"Lien invalide\",\n              description: data.message || \"Ce lien de rÃ©initialisation est invalide ou a expirÃ©.\",\n              variant: \"destructive\",\n            });\n          }\n        })\n        .catch(() => {\n          setIsTokenValid(false);\n          toast({\n            title: \"Erreur\",\n            description: \"Impossible de vÃ©rifier le lien de rÃ©initialisation.\",\n            variant: \"destructive\",\n          });\n        });\n    } else {\n      setIsTokenValid(false);\n      toast({\n        title: \"Lien manquant\",\n        description: \"Aucun token de rÃ©initialisation trouvÃ© dans l'URL.\",\n        variant: \"destructive\",\n      });\n    }\n  }, [toast]);\n\n  const resetPasswordMutation = useMutation({\n    mutationFn: (data: { token: string; newPassword: string }) =>\n      fetch(\"/api/reset-password\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(data),\n      }).then(async res => {\n        const responseData = await res.json();\n        if (!res.ok) {\n          throw new Error(responseData.message || \"Une erreur s'est produite\");\n        }\n        return responseData;\n      }),\n    onSuccess: () => {\n      setIsSuccess(true);\n      toast({\n        title: \"Mot de passe rÃ©initialisÃ©\",\n        description: \"Votre mot de passe a Ã©tÃ© mis Ã  jour avec succÃ¨s.\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erreur\",\n        description: error.message || \"Impossible de rÃ©initialiser le mot de passe.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!password || !confirmPassword) {\n      toast({\n        title: \"Erreur\",\n        description: \"Veuillez remplir tous les champs.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (password.length < 6) {\n      toast({\n        title: \"Erreur\",\n        description: \"Le mot de passe doit contenir au moins 6 caractÃ¨res.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (password !== confirmPassword) {\n      toast({\n        title: \"Erreur\",\n        description: \"Les mots de passe ne correspondent pas.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    resetPasswordMutation.mutate({ token, newPassword: password });\n  };\n\n  const goToLogin = () => {\n    setLocation(\"/\");\n  };\n\n  if (isTokenValid === null) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center px-4\">\n        <Card className=\"w-full max-w-md\">\n          <CardHeader className=\"text-center\">\n            <CardTitle>VÃ©rification...</CardTitle>\n            <CardDescription>Validation du lien de rÃ©initialisation</CardDescription>\n          </CardHeader>\n          <CardContent className=\"text-center\">\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"></div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  if (isTokenValid === false) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center px-4\">\n        <Card className=\"w-full max-w-md\">\n          <CardHeader className=\"text-center\">\n            <div className=\"flex justify-center mb-4\">\n              <AlertCircle className=\"text-red-500\" size={48} />\n            </div>\n            <CardTitle className=\"text-red-600\">Lien invalide</CardTitle>\n            <CardDescription>\n              Ce lien de rÃ©initialisation est invalide ou a expirÃ©.\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4 text-center\">\n              <p className=\"text-sm text-gray-600\">\n                Demandez un nouveau lien de rÃ©initialisation depuis la page de connexion.\n              </p>\n              <Button onClick={goToLogin} className=\"w-full\">\n                Retour Ã  la connexion\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  if (isSuccess) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center px-4\">\n        <Card className=\"w-full max-w-md\">\n          <CardHeader className=\"text-center\">\n            <div className=\"flex justify-center mb-4\">\n              <CheckCircle className=\"text-green-500\" size={48} />\n            </div>\n            <CardTitle className=\"text-green-600\">Mot de passe rÃ©initialisÃ©</CardTitle>\n            <CardDescription>\n              Votre mot de passe a Ã©tÃ© mis Ã  jour avec succÃ¨s.\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4 text-center\">\n              <p className=\"text-sm text-gray-600\">\n                Vous pouvez maintenant vous connecter avec votre nouveau mot de passe.\n              </p>\n              <Button onClick={goToLogin} className=\"w-full\">\n                Se connecter\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex items-center justify-center px-4\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"text-center\">\n          <CardTitle>Nouveau mot de passe</CardTitle>\n          <CardDescription>\n            Saisissez votre nouveau mot de passe ci-dessous.\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div>\n              <Label htmlFor=\"password\">Nouveau mot de passe</Label>\n              <div className=\"relative\">\n                <Input\n                  id=\"password\"\n                  type={showPassword ? \"text\" : \"password\"}\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  placeholder=\"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢\"\n                  required\n                  minLength={6}\n                />\n                <Button\n                  type=\"button\"\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className=\"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent\"\n                  onClick={() => setShowPassword(!showPassword)}\n                >\n                  {showPassword ? <EyeOff size={16} /> : <Eye size={16} />}\n                </Button>\n              </div>\n              <p className=\"text-xs text-gray-500 mt-1\">\n                Minimum 6 caractÃ¨res\n              </p>\n            </div>\n\n            <div>\n              <Label htmlFor=\"confirmPassword\">Confirmer le mot de passe</Label>\n              <div className=\"relative\">\n                <Input\n                  id=\"confirmPassword\"\n                  type={showConfirmPassword ? \"text\" : \"password\"}\n                  value={confirmPassword}\n                  onChange={(e) => setConfirmPassword(e.target.value)}\n                  placeholder=\"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢\"\n                  required\n                  minLength={6}\n                />\n                <Button\n                  type=\"button\"\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className=\"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent\"\n                  onClick={() => setShowConfirmPassword(!showConfirmPassword)}\n                >\n                  {showConfirmPassword ? <EyeOff size={16} /> : <Eye size={16} />}\n                </Button>\n              </div>\n            </div>\n\n            <Button\n              type=\"submit\"\n              className=\"w-full bg-primary hover:bg-blue-700\"\n              disabled={resetPasswordMutation.isPending}\n            >\n              {resetPasswordMutation.isPending ? (\n                <>\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                  Mise Ã  jour...\n                </>\n              ) : (\n                \"Mettre Ã  jour le mot de passe\"\n              )}\n            </Button>\n\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={goToLogin}\n              className=\"w-full\"\n            >\n              Annuler\n            </Button>\n          </form>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":9840},"client/src/pages/subscription-plans.tsx":{"content":"import React, { useState, useEffect } from 'react';\nimport { useLocation, useRoute } from 'wouter';\nimport { Card, CardContent, CardHeader, CardTitle } from '../components/ui/card';\nimport { Button } from '../components/ui/button';\nimport { Badge } from '../components/ui/badge';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '../components/ui/tabs';\nimport { Alert, AlertDescription } from '../components/ui/alert';\nimport { \n  SubscriptionCheckout, \n  useSubscriptionPlans \n} from '../components/subscription/SubscriptionCheckout';\nimport { StripePaymentForm } from '../components/subscription/StripePaymentForm';\nimport { SubscriptionPlan } from '../components/subscription/SubscriptionPlan';\nimport { \n  ArrowLeft, \n  CheckCircle, \n  XCircle, \n  Crown, \n  CreditCard,\n  Sparkles,\n  Users,\n  Building,\n  Briefcase\n} from 'lucide-react';\nimport { toast } from 'sonner';\nimport { useAuth } from '../hooks/useAuth';\nimport { api } from '../lib/api';\n\n// Types\ninterface CurrentSubscription {\n  subscriptionType: string;\n  subscriptionStatus: string;\n  paymentMethod?: string;\n  remainingEvents: number | null;\n  remainingInvitations: number | null;\n}\n\ninterface SubscriptionPlansPageProps {\n  mode?: 'selection' | 'upgrade' | 'payment';\n  preselectedPlan?: string;\n}\n\nexport default function SubscriptionPlansPage({ \n  mode = 'selection', \n  preselectedPlan \n}: SubscriptionPlansPageProps) {\n  const [location, setLocation] = useLocation();\n  const { user } = useAuth();\n  \n  // Ã‰tat local\n  const [currentMode, setCurrentMode] = useState<'selection' | 'upgrade' | 'payment'>(mode);\n  const [selectedPlan, setSelectedPlan] = useState<string | null>(preselectedPlan || null);\n  const [currentSubscription, setCurrentSubscription] = useState<CurrentSubscription | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [paymentStatus, setPaymentStatus] = useState<'pending' | 'success' | 'error' | null>(null);\n\n  // Hooks personnalisÃ©s\n  const { plans, loading: plansLoading, error: plansError } = useSubscriptionPlans();\n\n  // RÃ©cupÃ©rer les informations d'abonnement actuelles\n  useEffect(() => {\n    const fetchCurrentSubscription = async () => {\n      try {\n        const response = await api.subscription.getInfo();\n        \n        if (response.ok) {\n          const data = await response.json();\n          setCurrentSubscription({\n            subscriptionType: data.subscriptionType,\n            subscriptionStatus: data.subscriptionStatus,\n            paymentMethod: data.paymentMethod,\n            remainingEvents: data.remainingEvents,\n            remainingInvitations: data.remainingInvitations,\n          });\n        }\n      } catch (error) {\n        console.error('Erreur lors du chargement de l\\'abonnement actuel:', error);\n      }\n    };\n\n    if (user) {\n      fetchCurrentSubscription();\n    }\n  }, [user]);\n\n  // GÃ©rer les paramÃ¨tres d'URL pour le statut de paiement\n  useEffect(() => {\n    const urlParams = new URLSearchParams(window.location.search);\n    const paymentParam = urlParams.get('payment');\n    const sessionId = urlParams.get('session_id');\n\n    if (paymentParam === 'success' && sessionId) {\n      setPaymentStatus('success');\n      toast.success('Paiement rÃ©ussi ! Votre abonnement a Ã©tÃ© activÃ©.');\n      \n      // Nettoyer l'URL\n      const newUrl = window.location.pathname;\n      window.history.replaceState({}, '', newUrl);\n      \n      // Rediriger vers le dashboard aprÃ¨s un dÃ©lai\n      setTimeout(() => {\n        setLocation('/dashboard');\n      }, 3000);\n    } else if (paymentParam === 'cancelled') {\n      setPaymentStatus('error');\n      toast.error('Paiement annulÃ©. Vous pouvez rÃ©essayer quand vous le souhaitez.');\n      \n      // Nettoyer l'URL\n      const newUrl = window.location.pathname;\n      window.history.replaceState({}, '', newUrl);\n    }\n  }, [setLocation]);\n\n  // Gestionnaires d'Ã©vÃ©nements\n  const handlePlanSelection = async (planId: string) => {\n    const plan = plans.find(p => p.id === planId);\n    if (!plan) return;\n\n    setSelectedPlan(planId);\n\n    // Si c'est le plan dÃ©couverte (gratuit), traitement immÃ©diat\n    if (plan.type === 'decouverte') {\n      try {\n        setLoading(true);\n        \n        // Appel API pour changer vers le plan dÃ©couverte\n        const response = await api.subscription.cancel();\n\n        if (response.ok) {\n          toast.success('Votre abonnement a Ã©tÃ© changÃ© vers le plan DÃ©couverte.');\n          setLocation('/dashboard');\n        } else {\n          throw new Error('Erreur lors du changement d\\'abonnement');\n        }\n      } catch (error: any) {\n        console.error('Erreur:', error);\n        toast.error(error.message || 'Erreur lors du changement d\\'abonnement');\n      } finally {\n        setLoading(false);\n      }\n      return;\n    }\n\n    // Pour les plans payants, passer au mode paiement\n    setCurrentMode('payment');\n  };\n\n  const handlePaymentSuccess = () => {\n    setPaymentStatus('success');\n    toast.success('Paiement rÃ©ussi ! Activation de votre abonnement en cours...');\n    \n    // Redirection vers le dashboard\n    setTimeout(() => {\n      setLocation('/dashboard');\n    }, 2000);\n  };\n\n  const handlePaymentCancel = () => {\n    setCurrentMode('selection');\n    setSelectedPlan(null);\n  };\n\n  // Fonction pour obtenir les informations du plan sÃ©lectionnÃ©\n  const getSelectedPlanInfo = () => {\n    if (!selectedPlan) return null;\n    return plans.find(p => p.id === selectedPlan);\n  };\n\n  // Rendu des diffÃ©rents modes\n  const renderContent = () => {\n    // Statut de paiement\n    if (paymentStatus === 'success') {\n      return (\n        <div className=\"text-center py-12 space-y-6\">\n          <div className=\"flex justify-center\">\n            <CheckCircle className=\"w-16 h-16 text-green-500\" />\n          </div>\n          <div>\n            <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">\n              Paiement rÃ©ussi !\n            </h2>\n            <p className=\"text-lg text-gray-600 mb-4\">\n              Votre abonnement a Ã©tÃ© activÃ© avec succÃ¨s.\n            </p>\n            <p className=\"text-sm text-gray-500\">\n              Redirection vers votre tableau de bord...\n            </p>\n          </div>\n          <Button\n            onClick={() => setLocation('/dashboard')}\n            className=\"bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700\"\n          >\n            AccÃ©der au tableau de bord\n          </Button>\n        </div>\n      );\n    }\n\n    if (paymentStatus === 'error') {\n      return (\n        <div className=\"text-center py-12 space-y-6\">\n          <div className=\"flex justify-center\">\n            <XCircle className=\"w-16 h-16 text-red-500\" />\n          </div>\n          <div>\n            <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">\n              Paiement annulÃ©\n            </h2>\n            <p className=\"text-lg text-gray-600 mb-4\">\n              Aucun paiement n'a Ã©tÃ© effectuÃ©.\n            </p>\n            <p className=\"text-sm text-gray-500\">\n              Vous pouvez sÃ©lectionner un autre plan ou rÃ©essayer plus tard.\n            </p>\n          </div>\n          <Button\n            onClick={() => {\n              setPaymentStatus(null);\n              setCurrentMode('selection');\n            }}\n            variant=\"outline\"\n          >\n            Choisir un plan\n          </Button>\n        </div>\n      );\n    }\n\n    // Mode paiement\n    if (currentMode === 'payment' && selectedPlan) {\n      const plan = getSelectedPlanInfo();\n      if (!plan) {\n        setCurrentMode('selection');\n        return null;\n      }\n\n      return (\n        <div className=\"space-y-6\">\n          <div className=\"flex items-center gap-4\">\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={handlePaymentCancel}\n              disabled={loading}\n            >\n              <ArrowLeft className=\"w-4 h-4 mr-2\" />\n              Retour\n            </Button>\n            <div>\n              <h1 className=\"text-2xl font-bold text-gray-900\">\n                Finalisation de votre abonnement\n              </h1>\n              <p className=\"text-gray-600\">\n                Plan sÃ©lectionnÃ© : {plan.name}\n              </p>\n            </div>\n          </div>\n\n          <StripePaymentForm\n            planId={plan.id}\n            planName={plan.name}\n            planPrice={plan.price}\n            currency={plan.currency}\n            billingInterval={plan.billingInterval}\n            onSuccess={handlePaymentSuccess}\n            onCancel={handlePaymentCancel}\n          />\n        </div>\n      );\n    }\n\n    // Mode sÃ©lection (par dÃ©faut)\n    return (\n      <div className=\"space-y-8\">\n        {/* En-tÃªte */}\n        <div className=\"text-center space-y-4\">\n          <h1 className=\"text-4xl font-bold text-gray-900\">\n            Nos plans d'abonnement\n          </h1>\n          <p className=\"text-xl text-gray-600 max-w-3xl mx-auto\">\n            Choisissez l'offre qui correspond Ã  vos besoins. \n            Changez de plan Ã  tout moment selon l'Ã©volution de votre organisation.\n          </p>\n        </div>\n\n        {/* Abonnement actuel */}\n        {currentSubscription && (\n          <Alert className=\"max-w-4xl mx-auto\">\n            <Crown className=\"h-4 w-4\" />\n            <AlertDescription>\n              <span className=\"font-medium\">Abonnement actuel : </span>\n              {currentSubscription.subscriptionType === 'decouverte' ? 'DÃ©couverte (Gratuit)' :\n               currentSubscription.subscriptionType === 'evenementielle' ? 'Ã‰vÃ©nementielle' :\n               currentSubscription.subscriptionType === 'pro_club' ? 'Clubs & Associations' :\n               currentSubscription.subscriptionType === 'pro_pme' ? 'PME' :\n               currentSubscription.subscriptionType === 'pro_entreprise' ? 'Grandes Entreprises' :\n               'Inconnu'}\n              \n              {currentSubscription.remainingEvents !== null && (\n                <span className=\"ml-4 text-sm text-gray-600\">\n                  Ã‰vÃ©nements restants : {currentSubscription.remainingEvents}\n                </span>\n              )}\n            </AlertDescription>\n          </Alert>\n        )}\n\n        {/* Composant de checkout */}\n        {!plansLoading && !plansError && (\n          <SubscriptionCheckout\n            plans={plans}\n            currentPlan={currentSubscription?.subscriptionType}\n            onPlanSelect={handlePlanSelection}\n            loading={loading}\n          />\n        )}\n\n        {/* Ã‰tats de chargement et d'erreur */}\n        {plansLoading && (\n          <div className=\"text-center py-12\">\n            <div className=\"inline-flex items-center gap-2\">\n              <div className=\"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin\" />\n              <span>Chargement des plans...</span>\n            </div>\n          </div>\n        )}\n\n        {plansError && (\n          <Alert className=\"max-w-2xl mx-auto\">\n            <XCircle className=\"h-4 w-4\" />\n            <AlertDescription>\n              Erreur lors du chargement des plans d'abonnement. \n              Veuillez rafraÃ®chir la page ou contacter le support.\n            </AlertDescription>\n          </Alert>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-100\">\n      <div className=\"container mx-auto px-4 py-8\">\n        {renderContent()}\n      </div>\n    </div>\n  );\n}\n\n// Hook pour gÃ©rer les plans d'abonnement depuis l'URL\nexport function useSubscriptionPlansRoute() {\n  const [match, params] = useRoute('/subscription/plans/:mode?');\n  const mode = params?.mode as 'selection' | 'upgrade' | 'payment' | undefined;\n  \n  return {\n    isActive: !!match,\n    mode: mode || 'selection',\n  };\n}","size_bytes":11803},"client/src/components/admin/AdminMessaging.tsx":{"content":"import { useState, useEffect, useRef } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Label } from \"@/components/ui/label\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { AdminConversation, AdminMessage } from \"@shared/schema\";\n\ninterface Organization {\n  id: string;\n  name: string;\n  email: string;\n  subscriptionType: string;\n  role?: string;\n}\n\ninterface ConversationWithDetails extends AdminConversation {\n  organizationName: string;\n  organizationEmail: string;\n  unreadCount: number;\n  messages: AdminMessage[];\n}\n\nexport default function AdminMessaging() {\n  const { organization } = useAuth();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [selectedConversationId, setSelectedConversationId] = useState<string | null>(null);\n  const [messageContent, setMessageContent] = useState(\"\");\n  const [showNewConversation, setShowNewConversation] = useState(false);\n  const [newConversationData, setNewConversationData] = useState({\n    organizationId: \"\",\n    subject: \"\",\n    message: \"\",\n    priority: \"medium\" as \"low\" | \"medium\" | \"high\" | \"urgent\"\n  });\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  const isAdmin = organization?.role === 'admin';\n\n  // RÃ©cupÃ©rer toutes les conversations\n  const { data: conversations = [], isLoading } = useQuery<ConversationWithDetails[]>({\n    queryKey: [\"/api/admin/conversations\"],\n    refetchInterval: 30000, // Refresh every 30 seconds\n  });\n\n  // RÃ©cupÃ©rer toutes les organisations (pour les admins)\n  const { data: organizations = [] } = useQuery<Organization[]>({\n    queryKey: [\"/api/admin/organizations\"],\n    enabled: isAdmin,\n  });\n\n  const selectedConversation = conversations.find(conv => conv.id === selectedConversationId);\n\n  // Auto-scroll to bottom when new messages arrive\n  useEffect(() => {\n    if (messagesEndRef.current) {\n      messagesEndRef.current.scrollIntoView({ behavior: 'smooth' });\n    }\n  }, [selectedConversation?.messages]);\n\n  // Mutation pour envoyer un message\n  const sendMessageMutation = useMutation({\n    mutationFn: async (params: { conversationId: string; message: string }) => {\n      const { apiRequest } = await import(\"@/lib/queryClient\");\n      return await apiRequest(\"POST\", `/api/admin/conversations/${params.conversationId}/messages`, {\n        message: params.message\n      });\n    },\n    onSuccess: () => {\n      setMessageContent(\"\");\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/conversations\"] });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erreur\",\n        description: error.message || \"Impossible d'envoyer le message\",\n        variant: \"destructive\"\n      });\n    }\n  });\n\n  // Mutation pour crÃ©er une nouvelle conversation\n  const createConversationMutation = useMutation({\n    mutationFn: async (data: typeof newConversationData) => {\n      const { apiRequest } = await import(\"@/lib/queryClient\");\n      return await apiRequest(\"POST\", \"/api/admin/conversations\", data);\n    },\n    onSuccess: (response) => {\n      setShowNewConversation(false);\n      setNewConversationData({\n        organizationId: \"\",\n        subject: \"\",\n        message: \"\",\n        priority: \"medium\"\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/conversations\"] });\n      setSelectedConversationId(response.conversation.id);\n      toast({\n        title: \"SuccÃ¨s\",\n        description: \"Conversation crÃ©Ã©e avec succÃ¨s\"\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erreur\",\n        description: error.message || \"Impossible de crÃ©er la conversation\",\n        variant: \"destructive\"\n      });\n    }\n  });\n\n  // Mutation pour marquer comme lu\n  const markAsReadMutation = useMutation({\n    mutationFn: async (conversationId: string) => {\n      const { apiRequest } = await import(\"@/lib/queryClient\");\n      return await apiRequest(\"POST\", `/api/admin/conversations/${conversationId}/mark-read`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/conversations\"] });\n    }\n  });\n\n  const handleSendMessage = () => {\n    if (!messageContent.trim() || !selectedConversationId) return;\n    sendMessageMutation.mutate({\n      conversationId: selectedConversationId,\n      message: messageContent\n    });\n  };\n\n  const handleCreateConversation = () => {\n    if (!newConversationData.organizationId || !newConversationData.subject || !newConversationData.message) {\n      toast({\n        title: \"Erreur\",\n        description: \"Tous les champs sont requis\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n    createConversationMutation.mutate(newConversationData);\n  };\n\n  const handleSelectConversation = (conversationId: string) => {\n    setSelectedConversationId(conversationId);\n    markAsReadMutation.mutate(conversationId);\n  };\n\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case 'urgent': return 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-100';\n      case 'high': return 'bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-100';\n      case 'medium': return 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100';\n      case 'low': return 'bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-100';\n      default: return 'bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-100';\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'open': return 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100';\n      case 'pending': return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-100';\n      case 'closed': return 'bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-100';\n      default: return 'bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-100';\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"animate-pulse space-y-4\">\n        <div className=\"h-8 bg-gray-200 rounded w-1/4\"></div>\n        <div className=\"h-96 bg-gray-200 rounded\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"animate-fade-in\">\n      <div className=\"mb-8\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2\">\n              {isAdmin ? 'Support Client' : 'Support'}\n            </h1>\n            <p className=\"text-gray-600 dark:text-gray-400\">\n              {isAdmin \n                ? 'GÃ©rez les demandes de support des utilisateurs' \n                : 'Contactez notre Ã©quipe de support'\n              }\n            </p>\n          </div>\n          {(isAdmin || (!isAdmin && conversations.length === 0)) && (\n            <Dialog open={showNewConversation} onOpenChange={setShowNewConversation}>\n              <DialogTrigger asChild>\n                <Button className=\"bg-primary hover:bg-primary/90\">\n                  <i className=\"fas fa-plus mr-2\"></i>\n                  {isAdmin ? 'Nouvelle conversation' : 'Contacter le support'}\n                </Button>\n              </DialogTrigger>\n              <DialogContent className=\"max-w-2xl\">\n                <DialogHeader>\n                  <DialogTitle>\n                    {isAdmin ? 'CrÃ©er une nouvelle conversation' : 'Contacter le support'}\n                  </DialogTitle>\n                </DialogHeader>\n                <div className=\"space-y-4\">\n                  {isAdmin && (\n                    <div>\n                      <Label htmlFor=\"organization\">Organisation</Label>\n                      <Select\n                        value={newConversationData.organizationId}\n                        onValueChange={(value) => setNewConversationData(prev => ({ ...prev, organizationId: value }))}\n                      >\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"SÃ©lectionner une organisation\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          {organizations.filter(org => org.role !== 'admin').map((org) => (\n                            <SelectItem key={org.id} value={org.id}>\n                              {org.name} ({org.email})\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                    </div>\n                  )}\n                  \n                  <div>\n                    <Label htmlFor=\"subject\">Sujet</Label>\n                    <Input\n                      id=\"subject\"\n                      value={newConversationData.subject}\n                      onChange={(e) => setNewConversationData(prev => ({ ...prev, subject: e.target.value }))}\n                      placeholder=\"DÃ©crivez briÃ¨vement votre demande\"\n                    />\n                  </div>\n\n                  <div>\n                    <Label htmlFor=\"priority\">PrioritÃ©</Label>\n                    <Select\n                      value={newConversationData.priority}\n                      onValueChange={(value: any) => setNewConversationData(prev => ({ ...prev, priority: value }))}\n                    >\n                      <SelectTrigger>\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"low\">Faible</SelectItem>\n                        <SelectItem value=\"medium\">Moyenne</SelectItem>\n                        <SelectItem value=\"high\">Ã‰levÃ©e</SelectItem>\n                        <SelectItem value=\"urgent\">Urgente</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n\n                  <div>\n                    <Label htmlFor=\"message\">Message</Label>\n                    <Textarea\n                      id=\"message\"\n                      value={newConversationData.message}\n                      onChange={(e) => setNewConversationData(prev => ({ ...prev, message: e.target.value }))}\n                      placeholder=\"DÃ©crivez votre problÃ¨me ou votre demande en dÃ©tail\"\n                      rows={4}\n                    />\n                  </div>\n\n                  <div className=\"flex justify-end space-x-2\">\n                    <Button variant=\"outline\" onClick={() => setShowNewConversation(false)}>\n                      Annuler\n                    </Button>\n                    <Button \n                      onClick={handleCreateConversation}\n                      disabled={createConversationMutation.isPending}\n                    >\n                      {createConversationMutation.isPending ? 'CrÃ©ation...' : 'CrÃ©er'}\n                    </Button>\n                  </div>\n                </div>\n              </DialogContent>\n            </Dialog>\n          )}\n        </div>\n      </div>\n\n      <Card className=\"h-[32rem] flex\">\n        {/* Conversations List */}\n        <div className=\"w-1/3 border-r border-border overflow-y-auto\">\n          <div className=\"p-4 border-b border-border\">\n            <Input\n              placeholder=\"Rechercher des conversations...\"\n              className=\"w-full\"\n            />\n          </div>\n\n          {conversations.length === 0 ? (\n            <div className=\"p-8 text-center\">\n              <i className=\"fas fa-headset text-gray-400 text-4xl mb-4\"></i>\n              <p className=\"text-gray-600 dark:text-gray-400\">\n                {isAdmin ? 'Aucune conversation de support' : 'Aucune conversation'}\n              </p>\n              <p className=\"text-gray-500 text-sm\">\n                {isAdmin \n                  ? 'Les demandes de support apparaÃ®tront ici'\n                  : 'Contactez le support pour commencer une conversation'\n                }\n              </p>\n            </div>\n          ) : (\n            conversations.map((conversation) => (\n              <div\n                key={conversation.id}\n                className={`p-4 border-b border-border hover:bg-muted/50 cursor-pointer transition-colors ${\n                  selectedConversationId === conversation.id ? 'bg-muted' : ''\n                }`}\n                onClick={() => handleSelectConversation(conversation.id)}\n              >\n                <div className=\"flex items-start justify-between mb-2\">\n                  <h3 className=\"font-medium text-sm truncate pr-2\">{conversation.subject}</h3>\n                  {conversation.unreadCount > 0 && (\n                    <Badge variant=\"destructive\" className=\"text-xs\">\n                      {conversation.unreadCount}\n                    </Badge>\n                  )}\n                </div>\n                \n                <div className=\"flex items-center gap-2 mb-2\">\n                  <Badge className={getPriorityColor(conversation.priority)}>\n                    {conversation.priority}\n                  </Badge>\n                  <Badge className={getStatusColor(conversation.status)}>\n                    {conversation.status}\n                  </Badge>\n                </div>\n                \n                <div className=\"text-xs text-muted-foreground\">\n                  <p className=\"truncate\">{conversation.organizationName}</p>\n                  <p>{new Date(conversation.lastMessageAt).toLocaleString('fr-FR')}</p>\n                </div>\n              </div>\n            ))\n          )}\n        </div>\n\n        {/* Chat Area */}\n        <div className=\"flex-1 flex flex-col\">\n          {selectedConversation ? (\n            <>\n              {/* Header */}\n              <div className=\"p-4 border-b border-border bg-muted/30\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <h2 className=\"font-semibold\">{selectedConversation.subject}</h2>\n                    <p className=\"text-sm text-muted-foreground\">\n                      avec {selectedConversation.organizationName}\n                    </p>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <Badge className={getPriorityColor(selectedConversation.priority)}>\n                      {selectedConversation.priority}\n                    </Badge>\n                    <Badge className={getStatusColor(selectedConversation.status)}>\n                      {selectedConversation.status}\n                    </Badge>\n                  </div>\n                </div>\n              </div>\n\n              {/* Messages */}\n              <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n                {selectedConversation.messages.map((message) => {\n                  const isFromCurrentUser = isAdmin ? \n                    message.senderType === 'admin' : \n                    message.senderType === 'organization';\n                  \n                  return (\n                    <div\n                      key={message.id}\n                      className={`flex ${isFromCurrentUser ? 'justify-end' : 'justify-start'}`}\n                    >\n                      <div className={`max-w-[70%] ${isFromCurrentUser ? 'order-2' : 'order-1'}`}>\n                        <div\n                          className={`rounded-lg p-3 ${\n                            isFromCurrentUser\n                              ? 'bg-primary text-primary-foreground'\n                              : 'bg-muted text-muted-foreground'\n                          }`}\n                        >\n                          <p className=\"text-sm\">{message.message}</p>\n                        </div>\n                        <div className=\"flex items-center gap-2 mt-1 text-xs text-muted-foreground\">\n                          <span>{message.senderType === 'admin' ? 'Support' : selectedConversation.organizationName}</span>\n                          <span>â€¢</span>\n                          <span>{new Date(message.createdAt).toLocaleString('fr-FR')}</span>\n                        </div>\n                      </div>\n                    </div>\n                  );\n                })}\n                <div ref={messagesEndRef} />\n              </div>\n\n              {/* Input */}\n              <div className=\"p-4 border-t border-border\">\n                <div className=\"flex items-center space-x-2\">\n                  <Input\n                    value={messageContent}\n                    onChange={(e) => setMessageContent(e.target.value)}\n                    placeholder=\"Tapez votre message...\"\n                    onKeyPress={(e) => e.key === 'Enter' && !e.shiftKey && handleSendMessage()}\n                    className=\"flex-1\"\n                  />\n                  <Button\n                    onClick={handleSendMessage}\n                    disabled={!messageContent.trim() || sendMessageMutation.isPending}\n                    size=\"sm\"\n                  >\n                    <i className=\"fas fa-paper-plane\"></i>\n                  </Button>\n                </div>\n              </div>\n            </>\n          ) : (\n            <div className=\"flex-1 flex items-center justify-center\">\n              <div className=\"text-center\">\n                <i className=\"fas fa-headset text-gray-400 text-4xl mb-4\"></i>\n                <p className=\"text-gray-600 dark:text-gray-400\">\n                  SÃ©lectionnez une conversation\n                </p>\n                <p className=\"text-gray-500 text-sm\">\n                  Choisissez une conversation pour voir les messages\n                </p>\n              </div>\n            </div>\n          )}\n        </div>\n      </Card>\n    </div>\n  );\n}","size_bytes":18138},"client/src/components/admin/AdminOverview.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent } from \"@/components/ui/card\";\n\ninterface AdminStats {\n  totalOrganizations: number;\n  activeOrganizations: number;\n  inactiveOrganizations: number;\n  totalEvents: number;\n  totalParticipants: number;\n  averageEventsPerOrg: number;\n}\n\nexport default function AdminOverview() {\n  const { data: stats, isLoading, error } = useQuery<AdminStats>({\n    queryKey: [\"/api/admin/stats\"],\n    refetchInterval: 30000, // Refetch every 30 seconds\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"animate-fade-in\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\n            Vue d'ensemble - Administration\n          </h1>\n          <p className=\"text-gray-600\">Statistiques gÃ©nÃ©rales de la plateforme.</p>\n        </div>\n        \n        <div className=\"grid md:grid-cols-3 gap-6\">\n          {[...Array(6)].map((_, i) => (\n            <Card key={i}>\n              <CardContent className=\"p-6\">\n                <div className=\"animate-pulse\">\n                  <div className=\"w-12 h-12 bg-gray-200 rounded-lg mb-4\"></div>\n                  <div className=\"h-4 bg-gray-200 rounded mb-2\"></div>\n                  <div className=\"h-8 bg-gray-200 rounded\"></div>\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  if (error || !stats) {\n    return (\n      <div className=\"animate-fade-in\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\n            Vue d'ensemble - Administration\n          </h1>\n          <p className=\"text-gray-600\">Statistiques gÃ©nÃ©rales de la plateforme.</p>\n        </div>\n        \n        <Card>\n          <CardContent className=\"p-6 text-center\">\n            <i className=\"fas fa-exclamation-triangle text-red-500 text-4xl mb-4\"></i>\n            <p className=\"text-gray-600\">Erreur lors du chargement des statistiques</p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"animate-fade-in\">\n      <div className=\"mb-8\">\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\n          Vue d'ensemble - Administration\n        </h1>\n        <p className=\"text-gray-600\">Statistiques gÃ©nÃ©rales de la plateforme TeamMove.</p>\n      </div>\n\n      {/* Stats Cards */}\n      <div className=\"grid md:grid-cols-3 gap-6 mb-8\">\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center\">\n              <div className=\"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center\">\n                <i className=\"fas fa-building text-blue-600\"></i>\n              </div>\n              <div className=\"ml-4\">\n                <p className=\"text-gray-600 text-sm\">Total Organisations</p>\n                <p className=\"text-2xl font-bold text-gray-900\">{stats.totalOrganizations}</p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center\">\n              <div className=\"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center\">\n                <i className=\"fas fa-check-circle text-green-600\"></i>\n              </div>\n              <div className=\"ml-4\">\n                <p className=\"text-gray-600 text-sm\">Organisations Actives</p>\n                <p className=\"text-2xl font-bold text-gray-900\">{stats.activeOrganizations}</p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center\">\n              <div className=\"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center\">\n                <i className=\"fas fa-pause-circle text-red-600\"></i>\n              </div>\n              <div className=\"ml-4\">\n                <p className=\"text-gray-600 text-sm\">Organisations Inactives</p>\n                <p className=\"text-2xl font-bold text-gray-900\">{stats.inactiveOrganizations}</p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center\">\n              <div className=\"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center\">\n                <i className=\"fas fa-calendar-alt text-purple-600\"></i>\n              </div>\n              <div className=\"ml-4\">\n                <p className=\"text-gray-600 text-sm\">Total Ã‰vÃ©nements</p>\n                <p className=\"text-2xl font-bold text-gray-900\">{stats.totalEvents}</p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center\">\n              <div className=\"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center\">\n                <i className=\"fas fa-users text-yellow-600\"></i>\n              </div>\n              <div className=\"ml-4\">\n                <p className=\"text-gray-600 text-sm\">Total Participants</p>\n                <p className=\"text-2xl font-bold text-gray-900\">{stats.totalParticipants}</p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center\">\n              <div className=\"w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center\">\n                <i className=\"fas fa-chart-line text-indigo-600\"></i>\n              </div>\n              <div className=\"ml-4\">\n                <p className=\"text-gray-600 text-sm\">Ã‰vÃ©nements / Org</p>\n                <p className=\"text-2xl font-bold text-gray-900\">{stats.averageEventsPerOrg}</p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Additional Information */}\n      <div className=\"grid md:grid-cols-2 gap-6\">\n        <Card>\n          <CardContent className=\"p-6\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">SantÃ© du SystÃ¨me</h3>\n            <div className=\"space-y-3\">\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-gray-600\">Statut des organisations</span>\n                <div className=\"flex items-center space-x-2\">\n                  <div className=\"w-3 h-3 bg-green-500 rounded-full\"></div>\n                  <span className=\"text-sm text-gray-600\">\n                    {stats.totalOrganizations > 0 \n                      ? Math.round((stats.activeOrganizations / stats.totalOrganizations) * 100)\n                      : 0}% actives\n                  </span>\n                </div>\n              </div>\n              \n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-gray-600\">Engagement utilisateur</span>\n                <div className=\"flex items-center space-x-2\">\n                  <div className=\"w-3 h-3 bg-blue-500 rounded-full\"></div>\n                  <span className=\"text-sm text-gray-600\">\n                    {stats.totalOrganizations > 0 && stats.totalEvents > 0\n                      ? Math.round((stats.totalParticipants / stats.totalEvents) * 100) / 100\n                      : 0} participants/Ã©vÃ©nement\n                  </span>\n                </div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"p-6\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Actions Rapides</h3>\n            <div className=\"space-y-3\">\n              <button className=\"w-full text-left p-3 rounded-lg hover:bg-gray-50 transition-colors\">\n                <div className=\"flex items-center space-x-3\">\n                  <i className=\"fas fa-eye text-blue-600\"></i>\n                  <span className=\"text-gray-700\">Voir toutes les organisations</span>\n                </div>\n              </button>\n              \n              <button className=\"w-full text-left p-3 rounded-lg hover:bg-gray-50 transition-colors\">\n                <div className=\"flex items-center space-x-3\">\n                  <i className=\"fas fa-download text-green-600\"></i>\n                  <span className=\"text-gray-700\">Exporter les donnÃ©es</span>\n                </div>\n              </button>\n              \n              <button className=\"w-full text-left p-3 rounded-lg hover:bg-gray-50 transition-colors\">\n                <div className=\"flex items-center space-x-3\">\n                  <i className=\"fas fa-chart-bar text-purple-600\"></i>\n                  <span className=\"text-gray-700\">Rapport dÃ©taillÃ©</span>\n                </div>\n              </button>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}","size_bytes":8922},"client/src/components/admin/AdminRegistrationModal.tsx":{"content":"import { useState } from \"react\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface AdminRegistrationModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess?: () => void;\n}\n\nexport default function AdminRegistrationModal({ \n  isOpen, \n  onClose, \n  onSuccess \n}: AdminRegistrationModalProps) {\n  const [formData, setFormData] = useState({\n    name: \"\",\n    email: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n    firstName: \"\",\n    lastName: \"\",\n    secretKey: \"\",\n  });\n  const [isLoading, setIsLoading] = useState(false);\n  const { toast } = useToast();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!formData.name || !formData.email || !formData.password || \n        !formData.firstName || !formData.lastName || !formData.secretKey) {\n      toast({\n        title: \"Erreur\",\n        description: \"Veuillez remplir tous les champs.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (formData.password !== formData.confirmPassword) {\n      toast({\n        title: \"Erreur\",\n        description: \"Les mots de passe ne correspondent pas.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (formData.password.length < 8) {\n      toast({\n        title: \"Erreur\",\n        description: \"Le mot de passe doit contenir au moins 8 caractÃ¨res.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setIsLoading(true);\n\n    try {\n      const response = await apiRequest(\"POST\", \"/api/admin/register-super-user\", {\n        name: formData.name,\n        email: formData.email,\n        password: formData.password,\n        firstName: formData.firstName,\n        lastName: formData.lastName,\n        secretKey: formData.secretKey,\n      });\n\n      const data = await response.json();\n      \n      toast({\n        title: \"SuccÃ¨s\",\n        description: \"Administrateur crÃ©Ã© avec succÃ¨s !\",\n      });\n\n      // Reset form\n      setFormData({\n        name: \"\",\n        email: \"\",\n        password: \"\",\n        confirmPassword: \"\",\n        firstName: \"\",\n        lastName: \"\",\n        secretKey: \"\",\n      });\n\n      onClose();\n      if (onSuccess) {\n        onSuccess();\n      }\n\n    } catch (error: any) {\n      console.error(\"Admin registration error:\", error);\n      toast({\n        title: \"Erreur\",\n        description: error.message || \"Ã‰chec de la crÃ©ation de l'administrateur.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleChange = (field: string) => (e: React.ChangeEvent<HTMLInputElement>) => {\n    setFormData(prev => ({\n      ...prev,\n      [field]: e.target.value\n    }));\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"sm:max-w-md\">\n        <DialogHeader>\n          <DialogTitle className=\"text-2xl font-bold text-gray-900\">\n            ğŸ” Inscription Administrateur\n          </DialogTitle>\n        </DialogHeader>\n        \n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <Label htmlFor=\"firstName\">PrÃ©nom</Label>\n              <Input \n                id=\"firstName\"\n                type=\"text\"\n                value={formData.firstName}\n                onChange={handleChange('firstName')}\n                placeholder=\"Jean\"\n                required\n                disabled={isLoading}\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"lastName\">Nom</Label>\n              <Input \n                id=\"lastName\"\n                type=\"text\"\n                value={formData.lastName}\n                onChange={handleChange('lastName')}\n                placeholder=\"Dupont\"\n                required\n                disabled={isLoading}\n              />\n            </div>\n          </div>\n\n          <div>\n            <Label htmlFor=\"name\">Nom de l'organisation</Label>\n            <Input \n              id=\"name\"\n              type=\"text\"\n              value={formData.name}\n              onChange={handleChange('name')}\n              placeholder=\"Administration TeamMove\"\n              required\n              disabled={isLoading}\n            />\n          </div>\n          \n          <div>\n            <Label htmlFor=\"email\">Email</Label>\n            <Input \n              id=\"email\"\n              type=\"email\"\n              value={formData.email}\n              onChange={handleChange('email')}\n              placeholder=\"admin@TeamMove.com\"\n              required\n              disabled={isLoading}\n            />\n          </div>\n          \n          <div>\n            <Label htmlFor=\"password\">Mot de passe</Label>\n            <Input \n              id=\"password\"\n              type=\"password\"\n              value={formData.password}\n              onChange={handleChange('password')}\n              placeholder=\"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢\"\n              required\n              disabled={isLoading}\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"confirmPassword\">Confirmer le mot de passe</Label>\n            <Input \n              id=\"confirmPassword\"\n              type=\"password\"\n              value={formData.confirmPassword}\n              onChange={handleChange('confirmPassword')}\n              placeholder=\"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢\"\n              required\n              disabled={isLoading}\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"secretKey\">ClÃ© secrÃ¨te</Label>\n            <Input \n              id=\"secretKey\"\n              type=\"password\"\n              value={formData.secretKey}\n              onChange={handleChange('secretKey')}\n              placeholder=\"ClÃ© secrÃ¨te administrateur\"\n              required\n              disabled={isLoading}\n            />\n          </div>\n          \n          <div className=\"bg-yellow-50 border border-yellow-200 rounded-md p-3\">\n            <p className=\"text-yellow-800 text-sm\">\n              âš ï¸ Cette fonctionnalitÃ© est rÃ©servÃ©e aux dÃ©veloppeurs et administrateurs systÃ¨me.\n            </p>\n          </div>\n\n          <Button \n            type=\"submit\" \n            className=\"w-full bg-red-600 hover:bg-red-700\"\n            disabled={isLoading}\n          >\n            {isLoading ? (\n              <>\n                <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                CrÃ©ation...\n              </>\n            ) : (\n              \"CrÃ©er l'administrateur\"\n            )}\n          </Button>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}","size_bytes":6890},"client/src/components/admin/AdminSupport.tsx":{"content":"import React, { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/card';\nimport { Button } from '../ui/button';\nimport { Input } from '../ui/input';\nimport { Textarea } from '../ui/textarea';\nimport { Badge } from '../ui/badge';\nimport { \n  MessageSquare, \n  Plus, \n  Send, \n  Clock, \n  CheckCircle, \n  XCircle,\n  AlertCircle,\n  MessageCircle,\n  User,\n  Shield\n} from 'lucide-react';\nimport { toast } from 'sonner';\nimport { formatDistanceToNow } from 'date-fns';\nimport { fr } from 'date-fns/locale';\nimport { api } from '@/lib/api';\n\ninterface Conversation {\n  id: string;\n  subject: string;\n  status: 'open' | 'closed' | 'pending';\n  priority: 'low' | 'medium' | 'high' | 'urgent';\n  lastMessageAt: string;\n  createdAt: string;\n}\n\ninterface Message {\n  id: string;\n  senderId: string;\n  senderType: 'admin' | 'organization';\n  senderName: string;\n  senderEmail: string;\n  message: string;\n  messageType: 'text' | 'system' | 'attachment';\n  read: boolean;\n  createdAt: string;\n}\n\nexport function AdminSupport() {\n  const [conversations, setConversations] = useState<Conversation[]>([]);\n  const [selectedConversation, setSelectedConversation] = useState<string | null>(null);\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [showNewConversation, setShowNewConversation] = useState(false);\n  const [newConversationData, setNewConversationData] = useState({\n    subject: '',\n    message: '',\n    priority: 'medium' as 'low' | 'medium' | 'high' | 'urgent'\n  });\n  const [loading, setLoading] = useState(true);\n  const [sending, setSending] = useState(false);\n\n  useEffect(() => {\n    fetchConversations();\n  }, []);\n\n  useEffect(() => {\n    if (selectedConversation) {\n      fetchMessages(selectedConversation);\n    }\n  }, [selectedConversation]);\n\n  const fetchConversations = async () => {\n    try {\n      const response = await api.admin.getConversations();\n      \n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Erreur lors du chargement des conversations');\n      }\n      \n      const data = await response.json();\n      setConversations(data);\n    } catch (error: any) {\n      console.error('Error fetching conversations:', error);\n      toast.error(error.message || 'Erreur lors du chargement des conversations');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchMessages = async (conversationId: string) => {\n    try {\n      const response = await api.admin.getMessages(conversationId);\n      \n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Erreur lors du chargement des messages');\n      }\n      \n      const data = await response.json();\n      setMessages(data);\n    } catch (error: any) {\n      console.error('Error fetching messages:', error);\n      toast.error(error.message || 'Erreur lors du chargement des messages');\n    }\n  };\n\n  const createNewConversation = async () => {\n    if (!newConversationData.subject.trim() || !newConversationData.message.trim()) {\n      toast.error('Veuillez remplir tous les champs');\n      return;\n    }\n\n    setSending(true);\n    try {\n      const response = await api.admin.createConversation(newConversationData);\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Erreur lors de la crÃ©ation de la conversation');\n      }\n      \n      const conversation = await response.json();\n      setConversations(prev => [conversation, ...prev]);\n      setSelectedConversation(conversation.id);\n      setShowNewConversation(false);\n      setNewConversationData({ subject: '', message: '', priority: 'medium' });\n      toast.success('Conversation crÃ©Ã©e avec succÃ¨s');\n    } catch (error: any) {\n      console.error('Error creating conversation:', error);\n      toast.error(error.message || 'Erreur lors de la crÃ©ation de la conversation');\n    } finally {\n      setSending(false);\n    }\n  };\n\n  const sendMessage = async () => {\n    if (!newMessage.trim() || !selectedConversation) return;\n\n    setSending(true);\n    try {\n      const response = await api.admin.sendMessage(selectedConversation, newMessage);\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Erreur lors de l\\'envoi du message');\n      }\n      \n      const message = await response.json();\n      setMessages(prev => [...prev, message]);\n      setNewMessage('');\n      // Mettre Ã  jour la conversation dans la liste\n      setConversations(prev => \n        prev.map(conv => \n          conv.id === selectedConversation \n            ? { ...conv, lastMessageAt: new Date().toISOString() }\n            : conv\n        )\n      );\n    } catch (error: any) {\n      console.error('Error sending message:', error);\n      toast.error(error.message || 'Erreur lors de l\\'envoi du message');\n    } finally {\n      setSending(false);\n    }\n  };\n\n  const closeConversation = async (conversationId: string) => {\n    try {\n      const response = await api.admin.closeConversation(conversationId);\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Erreur lors de la fermeture de la conversation');\n      }\n      \n      setConversations(prev => \n        prev.map(conv => \n          conv.id === conversationId \n            ? { ...conv, status: 'closed' as const }\n            : conv\n        )\n      );\n      toast.success('Conversation fermÃ©e');\n    } catch (error: any) {\n      console.error('Error closing conversation:', error);\n      toast.error(error.message || 'Erreur lors de la fermeture de la conversation');\n    }\n  };\n\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case 'open':\n        return <Badge variant=\"secondary\" className=\"bg-green-100 text-green-800\">Ouverte</Badge>;\n      case 'pending':\n        return <Badge variant=\"secondary\" className=\"bg-yellow-100 text-yellow-800\">En attente</Badge>;\n      case 'closed':\n        return <Badge variant=\"secondary\" className=\"bg-gray-100 text-gray-800\">FermÃ©e</Badge>;\n      default:\n        return <Badge variant=\"secondary\">{status}</Badge>;\n    }\n  };\n\n  const getPriorityBadge = (priority: string) => {\n    switch (priority) {\n      case 'urgent':\n        return <Badge variant=\"destructive\">Urgent</Badge>;\n      case 'high':\n        return <Badge variant=\"secondary\" className=\"bg-red-100 text-red-800\">Haute</Badge>;\n      case 'medium':\n        return <Badge variant=\"secondary\" className=\"bg-blue-100 text-blue-800\">Moyenne</Badge>;\n      case 'low':\n        return <Badge variant=\"secondary\" className=\"bg-gray-100 text-gray-800\">Basse</Badge>;\n      default:\n        return <Badge variant=\"secondary\">{priority}</Badge>;\n    }\n  };\n\n  const selectedConv = conversations.find(c => c.id === selectedConversation);\n\n  return (\n    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6 h-[600px]\">\n      {/* Conversations List */}\n      <Card className=\"lg:col-span-1\">\n        <CardHeader className=\"pb-3\">\n          <div className=\"flex items-center justify-between\">\n            <CardTitle className=\"flex items-center gap-2\">\n              <MessageSquare className=\"w-5 h-5\" />\n              Support\n            </CardTitle>\n            <Button\n              size=\"sm\"\n              onClick={() => setShowNewConversation(true)}\n            >\n              <Plus className=\"w-4 h-4\" />\n            </Button>\n          </div>\n        </CardHeader>\n        <CardContent className=\"p-0\">\n          {loading ? (\n            <div className=\"space-y-3 p-4\">\n              {Array.from({ length: 3 }).map((_, i) => (\n                <div key={i} className=\"animate-pulse\">\n                  <div className=\"h-16 bg-gray-200 rounded\"></div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <div className=\"divide-y max-h-96 overflow-y-auto\">\n              {conversations.map((conversation) => (\n                <div\n                  key={conversation.id}\n                  onClick={() => setSelectedConversation(conversation.id)}\n                  className={`p-4 cursor-pointer hover:bg-gray-50 transition-colors ${\n                    selectedConversation === conversation.id ? 'bg-blue-50 border-r-2 border-r-blue-500' : ''\n                  }`}\n                >\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1 min-w-0\">\n                      <h4 className=\"text-sm font-medium truncate\">\n                        {conversation.subject}\n                      </h4>\n                      <div className=\"flex items-center gap-2 mt-1\">\n                        {getStatusBadge(conversation.status)}\n                        {getPriorityBadge(conversation.priority)}\n                      </div>\n                      <p className=\"text-xs text-gray-500 mt-2\">\n                        {formatDistanceToNow(new Date(conversation.lastMessageAt), { \n                          addSuffix: true, \n                          locale: fr \n                        })}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              ))}\n              \n              {conversations.length === 0 && (\n                <div className=\"p-4 text-center text-gray-500\">\n                  <MessageCircle className=\"w-8 h-8 mx-auto mb-2\" />\n                  <p className=\"text-sm\">Aucune conversation</p>\n                </div>\n              )}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Messages Area */}\n      <Card className=\"lg:col-span-2\">\n        {showNewConversation ? (\n          <div>\n            <CardHeader>\n              <CardTitle>Nouvelle conversation</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <Input\n                placeholder=\"Sujet de la conversation\"\n                value={newConversationData.subject}\n                onChange={(e) => setNewConversationData(prev => ({ ...prev, subject: e.target.value }))}\n              />\n              \n              <div className=\"space-y-2\">\n                <label className=\"text-sm font-medium\">PrioritÃ©</label>\n                <select \n                  className=\"w-full p-2 border rounded-md\"\n                  value={newConversationData.priority}\n                  onChange={(e) => setNewConversationData(prev => ({ \n                    ...prev, \n                    priority: e.target.value as 'low' | 'medium' | 'high' | 'urgent'\n                  }))}\n                >\n                  <option value=\"low\">Basse</option>\n                  <option value=\"medium\">Moyenne</option>\n                  <option value=\"high\">Haute</option>\n                  <option value=\"urgent\">Urgente</option>\n                </select>\n              </div>\n\n              <Textarea\n                placeholder=\"DÃ©crivez votre demande...\"\n                rows={6}\n                value={newConversationData.message}\n                onChange={(e) => setNewConversationData(prev => ({ ...prev, message: e.target.value }))}\n              />\n\n              <div className=\"flex gap-3\">\n                <Button \n                  onClick={createNewConversation}\n                  disabled={sending}\n                  className=\"flex-1\"\n                >\n                  <Send className=\"w-4 h-4 mr-2\" />\n                  Envoyer\n                </Button>\n                <Button \n                  variant=\"outline\" \n                  onClick={() => setShowNewConversation(false)}\n                  className=\"flex-1\"\n                >\n                  Annuler\n                </Button>\n              </div>\n            </CardContent>\n          </div>\n        ) : selectedConv ? (\n          <div className=\"flex flex-col h-full\">\n            <CardHeader className=\"pb-3\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <CardTitle className=\"text-lg\">{selectedConv.subject}</CardTitle>\n                  <div className=\"flex items-center gap-2 mt-1\">\n                    {getStatusBadge(selectedConv.status)}\n                    {getPriorityBadge(selectedConv.priority)}\n                  </div>\n                </div>\n                {selectedConv.status !== 'closed' && (\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => closeConversation(selectedConv.id)}\n                  >\n                    <XCircle className=\"w-4 h-4 mr-1\" />\n                    Fermer\n                  </Button>\n                )}\n              </div>\n            </CardHeader>\n\n            {/* Messages */}\n            <CardContent className=\"flex-1 flex flex-col min-h-0\">\n              <div className=\"flex-1 overflow-y-auto space-y-4 mb-4\">\n                {messages.map((message) => (\n                  <div\n                    key={message.id}\n                    className={`flex gap-3 ${\n                      message.senderType === 'organization' ? 'justify-end' : 'justify-start'\n                    }`}\n                  >\n                    <div\n                      className={`max-w-[70%] rounded-lg p-3 ${\n                        message.senderType === 'organization'\n                          ? 'bg-blue-500 text-white'\n                          : message.messageType === 'system'\n                          ? 'bg-gray-100 text-gray-600 text-center italic'\n                          : 'bg-gray-100 text-gray-900'\n                      }`}\n                    >\n                      {message.messageType !== 'system' && (\n                        <div className=\"flex items-center gap-2 mb-1\">\n                          {message.senderType === 'admin' ? (\n                            <Shield className=\"w-4 h-4\" />\n                          ) : (\n                            <User className=\"w-4 h-4\" />\n                          )}\n                          <span className=\"text-xs font-medium\">\n                            {message.senderType === 'admin' ? 'Administration' : 'Vous'}\n                          </span>\n                        </div>\n                      )}\n                      <p className=\"text-sm whitespace-pre-wrap\">{message.message}</p>\n                      <p className={`text-xs mt-2 ${\n                        message.senderType === 'organization' ? 'text-blue-100' : 'text-gray-500'\n                      }`}>\n                        {formatDistanceToNow(new Date(message.createdAt), { \n                          addSuffix: true, \n                          locale: fr \n                        })}\n                      </p>\n                    </div>\n                  </div>\n                ))}\n              </div>\n\n              {/* Message Input */}\n              {selectedConv.status !== 'closed' && (\n                <div className=\"flex gap-2\">\n                  <Textarea\n                    placeholder=\"Tapez votre message...\"\n                    value={newMessage}\n                    onChange={(e) => setNewMessage(e.target.value)}\n                    rows={2}\n                    className=\"flex-1\"\n                    onKeyDown={(e) => {\n                      if (e.key === 'Enter' && !e.shiftKey) {\n                        e.preventDefault();\n                        sendMessage();\n                      }\n                    }}\n                  />\n                  <Button\n                    onClick={sendMessage}\n                    disabled={!newMessage.trim() || sending}\n                    className=\"self-end\"\n                  >\n                    <Send className=\"w-4 h-4\" />\n                  </Button>\n                </div>\n              )}\n            </CardContent>\n          </div>\n        ) : (\n          <CardContent className=\"flex items-center justify-center h-full text-gray-500\">\n            <div className=\"text-center\">\n              <MessageSquare className=\"w-12 h-12 mx-auto mb-4\" />\n              <p>SÃ©lectionnez une conversation ou crÃ©ez-en une nouvelle</p>\n            </div>\n          </CardContent>\n        )}\n      </Card>\n    </div>\n  );\n}","size_bytes":16322},"client/src/components/admin/OrganizationsManagement.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface Organization {\n  id: string;\n  name: string;\n  email: string;\n  type: string;\n  contactFirstName: string;\n  contactLastName: string;\n  logoUrl?: string;\n  isActive: boolean;\n  features: string[];\n  createdAt: string;\n}\n\nconst AVAILABLE_FEATURES = [\n  { id: \"messaging\", name: \"Messagerie avancÃ©e\", description: \"Communication avec participants et notifications\" },\n  { id: \"analytics\", name: \"Analytics\", description: \"Statistiques dÃ©taillÃ©es et rapports avancÃ©s\" },\n  { id: \"custom_branding\", name: \"Personnalisation\", description: \"Logo et couleurs personnalisÃ©s\" },\n  { id: \"bulk_invite\", name: \"Invitations en masse\", description: \"Inviter plusieurs participants simultanÃ©ment\" },\n  { id: \"event_templates\", name: \"ModÃ¨les d'Ã©vÃ©nements\", description: \"RÃ©utiliser des configurations d'Ã©vÃ©nements\" },\n  { id: \"priority_support\", name: \"Support prioritaire\", description: \"Assistance dÃ©diÃ©e et rÃ©ponse rapide\" },\n  { id: \"csv_import\", name: \"Import CSV/Excel\", description: \"Importer des listes d'emails depuis des fichiers\" },\n  { id: \"advanced_stats\", name: \"Statistiques avancÃ©es\", description: \"Analyses poussÃ©es et tableaux de bord dÃ©taillÃ©s\" },\n];\n\nexport default function OrganizationsManagement() {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [selectedOrg, setSelectedOrg] = useState<Organization | null>(null);\n  const [isFeatureModalOpen, setIsFeatureModalOpen] = useState(false);\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const { data: organizations = [], isLoading, error } = useQuery<Organization[]>({\n    queryKey: [\"/api/admin/organizations\"],\n  });\n\n  const updateStatusMutation = useMutation({\n    mutationFn: async ({ id, isActive }: { id: string; isActive: boolean }) => {\n      return await apiRequest(\"PATCH\", `/api/admin/organizations/${id}/status`, { isActive });\n    },\n    onSuccess: (_, { isActive }) => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/organizations\"] });\n      toast({\n        title: \"Statut mis Ã  jour\",\n        description: `L'organisation a Ã©tÃ© ${isActive ? 'activÃ©e' : 'dÃ©sactivÃ©e'} avec succÃ¨s.`,\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erreur\",\n        description: error?.message || \"Impossible de mettre Ã  jour le statut.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateFeaturesMutation = useMutation({\n    mutationFn: async ({ id, features }: { id: string; features: string[] }) => {\n      return await apiRequest(\"PATCH\", `/api/admin/organizations/${id}/features`, { features });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/organizations\"] });\n      setIsFeatureModalOpen(false);\n      setSelectedOrg(null);\n      toast({\n        title: \"FonctionnalitÃ©s mises Ã  jour\",\n        description: \"Les fonctionnalitÃ©s ont Ã©tÃ© modifiÃ©es avec succÃ¨s.\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erreur\",\n        description: error?.message || \"Impossible de mettre Ã  jour les fonctionnalitÃ©s.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteOrgMutation = useMutation({\n    mutationFn: async (id: string) => {\n      return await apiRequest(\"DELETE\", `/api/admin/organizations/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/organizations\"] });\n      toast({\n        title: \"Organisation supprimÃ©e\",\n        description: \"L'organisation a Ã©tÃ© supprimÃ©e avec succÃ¨s.\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erreur\",\n        description: error?.message || \"Impossible de supprimer l'organisation.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const filteredOrganizations = organizations.filter(org =>\n    org.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    org.email.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    `${org.contactFirstName} ${org.contactLastName}`.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  const handleStatusToggle = (org: Organization) => {\n    if (confirm(`ÃŠtes-vous sÃ»r de vouloir ${org.isActive ? 'dÃ©sactiver' : 'activer'} l'organisation \"${org.name}\" ?`)) {\n      updateStatusMutation.mutate({ id: org.id, isActive: !org.isActive });\n    }\n  };\n\n  const handleDeleteOrg = (org: Organization) => {\n    if (confirm(`ÃŠtes-vous sÃ»r de vouloir supprimer dÃ©finitivement l'organisation \"${org.name}\" ? Cette action est irrÃ©versible.`)) {\n      deleteOrgMutation.mutate(org.id);\n    }\n  };\n\n  const handleUpdateFeatures = (features: string[]) => {\n    if (selectedOrg) {\n      updateFeaturesMutation.mutate({ id: selectedOrg.id, features });\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"animate-fade-in\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\n            Gestion des Organisations\n          </h1>\n          <p className=\"text-gray-600\">GÃ©rez les organisations inscrites sur la plateforme.</p>\n        </div>\n        \n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"animate-pulse space-y-4\">\n              {[...Array(5)].map((_, i) => (\n                <div key={i} className=\"flex items-center space-x-4\">\n                  <div className=\"w-12 h-12 bg-gray-200 rounded-full\"></div>\n                  <div className=\"flex-1\">\n                    <div className=\"h-4 bg-gray-200 rounded mb-2\"></div>\n                    <div className=\"h-3 bg-gray-200 rounded w-1/2\"></div>\n                  </div>\n                  <div className=\"w-24 h-8 bg-gray-200 rounded\"></div>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"animate-fade-in\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\n            Gestion des Organisations\n          </h1>\n          <p className=\"text-gray-600\">GÃ©rez les organisations inscrites sur la plateforme.</p>\n        </div>\n        \n        <Card>\n          <CardContent className=\"p-6 text-center\">\n            <i className=\"fas fa-exclamation-triangle text-red-500 text-4xl mb-4\"></i>\n            <p className=\"text-gray-600\">Erreur lors du chargement des organisations</p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"animate-fade-in\">\n      <div className=\"mb-8\">\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\n          Gestion des Organisations\n        </h1>\n        <p className=\"text-gray-600\">\n          GÃ©rez les organisations inscrites sur la plateforme ({organizations.length} organisation{organizations.length !== 1 ? 's' : ''}).\n        </p>\n      </div>\n\n      {/* Search and Filters */}\n      <Card className=\"mb-6\">\n        <CardContent className=\"p-6\">\n          <div className=\"flex items-center space-x-4\">\n            <div className=\"flex-1 relative\">\n              <i className=\"fas fa-search absolute left-3 top-3 text-gray-400\"></i>\n              <Input\n                placeholder=\"Rechercher par nom, email ou contact...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"pl-10\"\n              />\n            </div>\n            <Button variant=\"outline\">\n              <i className=\"fas fa-filter mr-2\"></i>\n              Filtres\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Organizations List */}\n      <Card>\n        <CardHeader>\n          <CardTitle>\n            Organisations ({filteredOrganizations.length})\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"p-0\">\n          {filteredOrganizations.length === 0 ? (\n            <div className=\"p-8 text-center\">\n              <i className=\"fas fa-search text-gray-400 text-4xl mb-4\"></i>\n              <p className=\"text-gray-600\">Aucune organisation trouvÃ©e</p>\n              {searchTerm && (\n                <p className=\"text-gray-500 text-sm\">\n                  Essayez de modifier votre recherche\n                </p>\n              )}\n            </div>\n          ) : (\n            <div className=\"divide-y divide-gray-200\">\n              {filteredOrganizations.map((org) => (\n                <div key={org.id} className=\"p-6 hover:bg-gray-50 transition-colors\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center space-x-4\">\n                      <Avatar className=\"w-12 h-12\">\n                        <AvatarImage src={org.logoUrl} alt={org.name} />\n                        <AvatarFallback>\n                          {org.name.slice(0, 2).toUpperCase()}\n                        </AvatarFallback>\n                      </Avatar>\n                      \n                      <div>\n                        <div className=\"flex items-center space-x-2\">\n                          <h3 className=\"font-semibold text-gray-900\">{org.name}</h3>\n                          <Badge variant={org.isActive ? \"default\" : \"secondary\"}>\n                            {org.isActive ? \"Actif\" : \"Inactif\"}\n                          </Badge>\n                          <Badge variant=\"outline\">\n                            {org.type}\n                          </Badge>\n                        </div>\n                        <p className=\"text-gray-600 text-sm\">\n                          {org.contactFirstName} {org.contactLastName} â€¢ {org.email}\n                        </p>\n                        <p className=\"text-gray-500 text-xs\">\n                          Inscrit le {new Date(org.createdAt).toLocaleDateString('fr-FR')}\n                        </p>\n                        {org.features.length > 0 && (\n                          <div className=\"flex flex-wrap gap-1 mt-2\">\n                            {org.features.slice(0, 3).map((feature) => {\n                              const featureInfo = AVAILABLE_FEATURES.find(f => f.id === feature);\n                              return (\n                                <Badge key={feature} variant=\"outline\" className=\"text-xs\">\n                                  {featureInfo?.name || feature}\n                                </Badge>\n                              );\n                            })}\n                            {org.features.length > 3 && (\n                              <Badge variant=\"outline\" className=\"text-xs\">\n                                +{org.features.length - 3} autres\n                              </Badge>\n                            )}\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                    \n                    <div className=\"flex items-center space-x-4\">\n                      {/* Status Toggle */}\n                      <div className=\"flex items-center space-x-2\">\n                        <span className=\"text-sm text-gray-600\">\n                          {org.isActive ? \"Actif\" : \"Inactif\"}\n                        </span>\n                        <Switch\n                          checked={org.isActive}\n                          onCheckedChange={() => handleStatusToggle(org)}\n                          disabled={updateStatusMutation.isPending}\n                        />\n                      </div>\n                      \n                      {/* Actions */}\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => {\n                          setSelectedOrg(org);\n                          setIsFeatureModalOpen(true);\n                        }}\n                      >\n                        <i className=\"fas fa-cog mr-2\"></i>\n                        FonctionnalitÃ©s\n                      </Button>\n                      \n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => handleDeleteOrg(org)}\n                        disabled={deleteOrgMutation.isPending}\n                        className=\"text-red-600 hover:text-red-700 hover:border-red-300\"\n                      >\n                        <i className=\"fas fa-trash mr-2\"></i>\n                        Supprimer\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Features Modal */}\n      {isFeatureModalOpen && selectedOrg && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <h2 className=\"text-xl font-bold text-gray-900\">\n                FonctionnalitÃ©s - {selectedOrg.name}\n              </h2>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => setIsFeatureModalOpen(false)}\n              >\n                <i className=\"fas fa-times\"></i>\n              </Button>\n            </div>\n            \n            <div className=\"space-y-4\">\n              {AVAILABLE_FEATURES.map((feature) => {\n                const isEnabled = selectedOrg.features.includes(feature.id);\n                \n                return (\n                  <div key={feature.id} className=\"flex items-center justify-between p-4 border border-gray-200 rounded-lg\">\n                    <div className=\"flex-1\">\n                      <h3 className=\"font-medium text-gray-900\">{feature.name}</h3>\n                      <p className=\"text-sm text-gray-600\">{feature.description}</p>\n                    </div>\n                    \n                    <Switch\n                      checked={isEnabled}\n                      onCheckedChange={(checked) => {\n                        const newFeatures = checked\n                          ? [...selectedOrg.features, feature.id]\n                          : selectedOrg.features.filter(f => f !== feature.id);\n                        handleUpdateFeatures(newFeatures);\n                      }}\n                      disabled={updateFeaturesMutation.isPending}\n                    />\n                  </div>\n                );\n              })}\n            </div>\n            \n            <div className=\"mt-6 flex justify-end space-x-3\">\n              <Button\n                variant=\"outline\"\n                onClick={() => setIsFeatureModalOpen(false)}\n              >\n                Fermer\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}","size_bytes":15391},"client/src/components/captcha/ModernCaptcha.tsx":{"content":"import React, { useState, useEffect, useCallback } from 'react';\nimport { Button } from '@/components/ui/button';\n\ninterface ModernCaptchaProps {\n  onVerify: (isVerified: boolean) => void;\n  className?: string;\n}\n\ntype CaptchaType = 'math' | 'image' | 'pattern';\n\ninterface MathChallenge {\n  question: string;\n  answer: number;\n}\n\ninterface ImageChallenge {\n  question: string;\n  images: { id: string; src: string; isCorrect: boolean }[];\n  correctCount: number;\n}\n\nconst ModernCaptcha: React.FC<ModernCaptchaProps> = ({ onVerify, className = '' }) => {\n  const [isVerified, setIsVerified] = useState(false);\n  const [currentType, setCurrentType] = useState<CaptchaType>('math');\n  const [mathChallenge, setMathChallenge] = useState<MathChallenge | null>(null);\n  const [imageChallenge, setImageChallenge] = useState<ImageChallenge | null>(null);\n  const [userAnswer, setUserAnswer] = useState('');\n  const [selectedImages, setSelectedImages] = useState<string[]>([]);\n  const [attempts, setAttempts] = useState(0);\n  const [isLoading, setIsLoading] = useState(false);\n  const [showSuccess, setShowSuccess] = useState(false);\n\n  // Generate math challenge\n  const generateMathChallenge = useCallback((): MathChallenge => {\n    const operations = ['+', '-', '*'];\n    const operation = operations[Math.floor(Math.random() * operations.length)];\n    \n    let num1: number, num2: number, answer: number, question: string;\n    \n    switch (operation) {\n      case '+':\n        num1 = Math.floor(Math.random() * 20) + 1;\n        num2 = Math.floor(Math.random() * 20) + 1;\n        answer = num1 + num2;\n        question = `${num1} + ${num2}`;\n        break;\n      case '-':\n        num1 = Math.floor(Math.random() * 30) + 10;\n        num2 = Math.floor(Math.random() * num1) + 1;\n        answer = num1 - num2;\n        question = `${num1} - ${num2}`;\n        break;\n      case '*':\n        num1 = Math.floor(Math.random() * 12) + 1;\n        num2 = Math.floor(Math.random() * 12) + 1;\n        answer = num1 * num2;\n        question = `${num1} Ã— ${num2}`;\n        break;\n      default:\n        num1 = 5;\n        num2 = 3;\n        answer = 8;\n        question = `${num1} + ${num2}`;\n    }\n    \n    return { question, answer };\n  }, []);\n\n  // Generate image challenge\n  const generateImageChallenge = useCallback((): ImageChallenge => {\n    const categories = [\n      { name: 'vÃ©hicules', correct: ['ğŸš—', 'ğŸšŒ', 'ğŸš›', 'ğŸï¸'], incorrect: ['ğŸ ', 'ğŸŒ³', 'ğŸ“±', 'âš½'] },\n      { name: 'sports', correct: ['âš½', 'ğŸ€', 'ğŸ¾', 'ğŸ'], incorrect: ['ğŸ', 'ğŸŒ™', 'ğŸ“š', 'ğŸµ'] },\n      { name: 'animaux', correct: ['ğŸ¶', 'ğŸ±', 'ğŸ­', 'ğŸ°'], incorrect: ['ğŸŒ¸', 'ğŸ•', 'ğŸ’»', 'ğŸ­'] }\n    ];\n    \n    const category = categories[Math.floor(Math.random() * categories.length)];\n    const correctImages = [...category.correct].sort(() => Math.random() - 0.5).slice(0, 3);\n    const incorrectImages = [...category.incorrect].sort(() => Math.random() - 0.5).slice(0, 5);\n    \n    const allImages = [...correctImages, ...incorrectImages]\n      .map((emoji, index) => ({\n        id: `img-${index}`,\n        src: emoji,\n        isCorrect: correctImages.includes(emoji)\n      }))\n      .sort(() => Math.random() - 0.5);\n    \n    return {\n      question: `SÃ©lectionnez tous les ${category.name}`,\n      images: allImages,\n      correctCount: correctImages.length\n    };\n  }, []);\n\n  // Initialize challenge\n  useEffect(() => {\n    if (currentType === 'math') {\n      setMathChallenge(generateMathChallenge());\n    } else if (currentType === 'image') {\n      setImageChallenge(generateImageChallenge());\n    }\n    setUserAnswer('');\n    setSelectedImages([]);\n  }, [currentType, generateMathChallenge, generateImageChallenge]);\n\n  // Handle math verification\n  const verifyMathAnswer = () => {\n    if (!mathChallenge) return false;\n    return parseInt(userAnswer) === mathChallenge.answer;\n  };\n\n  // Handle image verification\n  const verifyImageAnswer = () => {\n    if (!imageChallenge) return false;\n    const correctImages = imageChallenge.images\n      .filter(img => img.isCorrect)\n      .map(img => img.id);\n    \n    return selectedImages.length === correctImages.length &&\n           selectedImages.every(id => correctImages.includes(id));\n  };\n\n  // Handle submission\n  const handleSubmit = async () => {\n    setIsLoading(true);\n    \n    // Simulate processing time\n    await new Promise(resolve => setTimeout(resolve, 1000));\n    \n    let isCorrect = false;\n    \n    if (currentType === 'math') {\n      isCorrect = verifyMathAnswer();\n    } else if (currentType === 'image') {\n      isCorrect = verifyImageAnswer();\n    }\n    \n    if (isCorrect) {\n      setIsVerified(true);\n      setShowSuccess(true);\n      onVerify(true);\n      \n      // Hide success message after 2 seconds\n      setTimeout(() => {\n        setShowSuccess(false);\n      }, 2000);\n    } else {\n      setAttempts(prev => prev + 1);\n      \n      // Switch challenge type after failed attempts\n      if (attempts >= 2) {\n        setCurrentType(prev => prev === 'math' ? 'image' : 'math');\n        setAttempts(0);\n      } else {\n        // Generate new challenge of same type\n        if (currentType === 'math') {\n          setMathChallenge(generateMathChallenge());\n        } else {\n          setImageChallenge(generateImageChallenge());\n        }\n      }\n      \n      setUserAnswer('');\n      setSelectedImages([]);\n    }\n    \n    setIsLoading(false);\n  };\n\n  // Handle image selection\n  const toggleImageSelection = (imageId: string) => {\n    setSelectedImages(prev => \n      prev.includes(imageId) \n        ? prev.filter(id => id !== imageId)\n        : [...prev, imageId]\n    );\n  };\n\n  // Reset captcha\n  const resetCaptcha = () => {\n    setIsVerified(false);\n    setShowSuccess(false);\n    setAttempts(0);\n    setCurrentType('math');\n    onVerify(false);\n  };\n\n  if (isVerified && showSuccess) {\n    return (\n      <div className={`bg-green-50 border border-green-200 rounded-lg p-4 text-center ${className}`}>\n        <div className=\"flex items-center justify-center space-x-2\">\n          <div className=\"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center\">\n            <svg className=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n            </svg>\n          </div>\n          <span className=\"text-green-800 font-medium\">âœ… VÃ©rification rÃ©ussie</span>\n        </div>\n      </div>\n    );\n  }\n\n  if (isVerified) {\n    return (\n      <div className={`bg-green-50 border border-green-200 rounded-lg p-3 text-center ${className}`}>\n        <div className=\"flex items-center justify-between\">\n          <span className=\"text-green-800 text-sm\">âœ… VÃ©rifiÃ©</span>\n          <Button \n            variant=\"ghost\" \n            size=\"sm\" \n            onClick={resetCaptcha}\n            className=\"text-green-600 hover:text-green-800 p-1 h-auto\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\n            </svg>\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`bg-gray-50 border border-gray-200 rounded-lg p-4 ${className}`}>\n      <div className=\"flex items-center space-x-2 mb-3\">\n        <div className=\"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center\">\n          <svg className=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n          </svg>\n        </div>\n        <span className=\"text-gray-800 font-medium\">VÃ©rification humaine</span>\n        <div className=\"ml-auto text-xs text-gray-500\">\n          {attempts > 0 && `Tentative ${attempts + 1}`}\n        </div>\n      </div>\n\n      {currentType === 'math' && mathChallenge && (\n        <div className=\"space-y-3\">\n          <div className=\"text-center\">\n            <p className=\"text-gray-700 mb-2\">RÃ©solvez cette Ã©quation :</p>\n            <div className=\"text-2xl font-mono font-bold text-blue-600 bg-white rounded-lg py-3 px-4 border\">\n              {mathChallenge.question} = ?\n            </div>\n          </div>\n          \n          <input\n            type=\"number\"\n            value={userAnswer}\n            onChange={(e) => setUserAnswer(e.target.value)}\n            placeholder=\"Votre rÃ©ponse\"\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            disabled={isLoading}\n          />\n        </div>\n      )}\n\n      {currentType === 'image' && imageChallenge && (\n        <div className=\"space-y-3\">\n          <p className=\"text-gray-700 text-center\">{imageChallenge.question}</p>\n          \n          <div className=\"grid grid-cols-4 gap-2\">\n            {imageChallenge.images.map((image) => (\n              <button\n                key={image.id}\n                onClick={() => toggleImageSelection(image.id)}\n                disabled={isLoading}\n                className={`aspect-square rounded-lg border-2 text-2xl flex items-center justify-center transition-all ${\n                  selectedImages.includes(image.id)\n                    ? 'border-blue-500 bg-blue-50'\n                    : 'border-gray-300 bg-white hover:border-gray-400'\n                }`}\n              >\n                {image.src}\n              </button>\n            ))}\n          </div>\n          \n          <p className=\"text-xs text-gray-500 text-center\">\n            Cliquez sur toutes les images correspondantes\n          </p>\n        </div>\n      )}\n\n      <Button\n        onClick={handleSubmit}\n        disabled={isLoading || (currentType === 'math' && !userAnswer) || (currentType === 'image' && selectedImages.length === 0)}\n        className=\"w-full mt-4 bg-blue-500 hover:bg-blue-600\"\n      >\n        {isLoading ? (\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n            <span>VÃ©rification...</span>\n          </div>\n        ) : (\n          'VÃ©rifier'\n        )}\n      </Button>\n\n      {attempts > 0 && (\n        <p className=\"text-xs text-amber-600 text-center mt-2\">\n          âš ï¸ RÃ©ponse incorrecte. {3 - attempts} tentative(s) restante(s)\n        </p>\n      )}\n    </div>\n  );\n};\n\nexport default ModernCaptcha;","size_bytes":10670},"client/src/components/chatbot/Chatbot.tsx":{"content":"import { useState, useEffect, useRef } from \"react\";\n\ntype Message = {\n  id: number;\n  role: \"user\" | \"bot\";\n  text: string;\n};\n\nexport default function Chatbot() {\n  const [open, setOpen] = useState<boolean>(false);\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [input, setInput] = useState<string>(\"\");\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    if (open) inputRef.current?.focus();\n  }, [open]);\n\n  async function sendMessage() {\n    if (!input.trim()) return;\n    const userMsg: Message = { id: Date.now(), role: \"user\", text: input.trim() };\n    setMessages((m) => [...m, userMsg]);\n    setInput(\"\");\n    \n    // Add loading message\n    const loadingMsg: Message = { id: Date.now() + 1, role: \"bot\", text: \"...\" };\n    setMessages((m) => [...m, loadingMsg]);\n    \n    try {\n      // Get conversation history for context\n      const conversationHistory = messages.map(msg => ({\n        role: msg.role === \"bot\" ? \"assistant\" : \"user\",\n        content: msg.text\n      }));\n\n      const res = await fetch(\"/api/chatbot/message\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ \n          message: userMsg.text,\n          conversationHistory \n        }),\n      });\n      \n      const data = await res.json();\n      \n      // Remove loading message and add bot response\n      setMessages((m) => {\n        const withoutLoading = m.filter(msg => msg.id !== loadingMsg.id);\n        const botMsg: Message = { \n          id: Date.now() + 2, \n          role: \"bot\", \n          text: data.success ? data.message : \"DÃ©solÃ©, je rencontre des difficultÃ©s. Veuillez rÃ©essayer.\" \n        };\n        return [...withoutLoading, botMsg];\n      });\n    } catch (error) {\n      // Remove loading message and add error\n      setMessages((m) => {\n        const withoutLoading = m.filter(msg => msg.id !== loadingMsg.id);\n        const errorMsg: Message = { \n          id: Date.now() + 2, \n          role: \"bot\", \n          text: \"DÃ©solÃ©, le service est temporairement indisponible. Veuillez rÃ©essayer plus tard.\" \n        };\n        return [...withoutLoading, errorMsg];\n      });\n    }\n  }\n\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, [messages, open]);\n\n  // Animation style for the speech bubble (fade in/out + floating)\n  const bubbleAnimationStyle: React.CSSProperties = {\n    animation: \"bubbleFadeFloat 4s ease-in-out infinite\",\n    position: \"absolute\",\n    bottom: \"60px\",\n    left: \"-170px\",\n    width: \"160px\",\n    padding: \"10px\",\n    backgroundColor: \"#0ea5e9\",\n    color: \"#fff\",\n    borderRadius: \"15px\",\n    fontSize: \"0.85rem\",\n    fontWeight: \"500\",\n    boxShadow: \"0 4px 10px rgba(14, 165, 233, 0.4)\",\n    userSelect: \"none\",\n  };\n\n  return (\n    <>\n      <style>\n        {`\n          @keyframes bubbleFadeFloat {\n            0%, 100% { opacity: 0; transform: translateY(4px); }\n            50% { opacity: 1; transform: translateY(0); }\n          }\n          /* Clignotement des yeux */\n          .eye-animate ellipse {\n            animation: blink 2.5s infinite;\n            transform-origin: center;\n          }\n          .eye-animate ellipse:nth-child(1) {\n            animation-delay: 0s;\n          }\n          .eye-animate ellipse:nth-child(2) {\n            animation-delay: 0.25s;\n          }\n          @keyframes blink {\n            0%, 100% { ry: 3; }\n            50% { ry: 0.7; }\n          }\n        `}\n      </style>\n\n      <div className=\"fixed bottom-6 right-6 z-50 flex flex-col items-end\">\n        {open && (\n          <div className=\"w-80 max-w-xs bg-white rounded-xl shadow-xl flex flex-col p-0 overflow-hidden\">\n            <div className=\"flex items-center justify-between p-4 border-b bg-primary text-white rounded-t-xl\">\n              <strong>Assistant TeamMove</strong>\n              <button\n                onClick={() => setOpen(false)}\n                aria-label=\"Fermer le chat\"\n                className=\"text-xl hover:bg-primary/20 p-1 rounded\"\n              >\n                Ã—\n              </button>\n            </div>\n            <div className=\"flex-1 h-64 overflow-y-auto px-2 py-3 bg-gray-50 custom-scrollbar\" data-testid=\"chat-messages\">\n              {messages.length === 0 && (\n                <div className=\"text-sm text-gray-500 text-center\">\n                  Bonjour ! Posez-moi une question sur le site.\n                </div>\n              )}\n              {messages.map((m) => (\n                <div\n                  key={m.id}\n                  className={`flex ${\n                    m.role === \"user\" ? \"justify-end\" : \"justify-start\"\n                  } mb-2`}\n                >\n                  <div\n                    className={`message\n                  px-3 py-2 rounded-2xl max-w-[75%] whitespace-pre-line break-words  \n                  ${\n                    m.role === \"user\"\n                      ? \"bg-primary text-white rounded-br-sm\"\n                      : \"bg-gray-200 text-gray-900 rounded-bl-sm\"\n                  }\n                  shadow-sm`}\n                  >\n                    {m.text}\n                  </div>\n                </div>\n              ))}\n              <div ref={messagesEndRef} />\n            </div>\n            <form\n              className=\"flex items-center gap-2 bg-white px-3 py-2 border-t\"\n              onSubmit={(e) => {\n                e.preventDefault();\n                sendMessage();\n              }}\n            >\n              <input\n                ref={inputRef}\n                value={input}\n                onChange={(e) => setInput(e.target.value)}\n                onKeyDown={(e) => {\n                  if (e.key === \"Enter\" && !e.shiftKey) {\n                    e.preventDefault();\n                    sendMessage();\n                  }\n                }}\n                className=\"flex-1 rounded-full border border-gray-300 bg-gray-100 px-4 py-2 focus:outline-none focus:ring focus:ring-primary/30 transition\"\n                aria-label=\"Message\"\n                placeholder=\"Ã‰crire un messageâ€¦\"\n                autoComplete=\"off\"\n                data-testid=\"chat-input\"\n              />\n              <button\n                type=\"submit\"\n                className=\"w-10 h-10 bg-primary hover:bg-primary/90 rounded-full p-0 flex items-center justify-center text-white disabled:opacity-50 transition\"\n                disabled={!input.trim()}\n                aria-label=\"Envoyer\"\n                data-testid=\"send-button\"\n              >\n                <svg viewBox=\"0 0 24 24\" width={22} height={22} fill=\"currentColor\">\n                  <path d=\"M2 21l21-9-21-9v7l15 2-15 2z\" />\n                </svg>\n              </button>\n            </form>\n          </div>\n        )}\n\n        {/* Bouton flottant avec bulle d'idÃ©e animÃ©e */}\n        <div className=\"relative flex items-center justify-center\">\n          { !open && (\n            <div style={bubbleAnimationStyle}>\n              Comment puis-je vous aider ?\n              <svg\n                width=\"16\"\n                height=\"16\"\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n                stroke=\"#0ea5e9\"\n                strokeWidth=\"2\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                className=\"inline-block ml-1\"\n                style={{ verticalAlign: \"middle\" }}\n              >\n                <path d=\"M9 10l3 3-3 3\" />\n                <path d=\"M12 13h8\" />\n              </svg>\n            </div>\n          )}\n\n          <button\n            aria-label=\"Ouvrir l'assistant\"\n            onClick={() => setOpen((s) => !s)}\n            className=\"w-14 h-14 bg-primary hover:bg-primary/90 rounded-full shadow-xl flex items-center justify-center text-white\"\n          >\n            {/* Robot SVG animÃ© Ã  yeux clignotants */}\n            <svg\n              viewBox=\"0 0 48 48\"\n              width={36}\n              height={36}\n              fill=\"none\"\n              style={{ display: \"block\" }}\n              className=\"eye-animate\"\n            >\n              {/* Corps */}\n              <rect x=\"8\" y=\"16\" width=\"32\" height=\"22\" rx=\"11\" fill=\"white\" stroke=\"#0ea5e9\" strokeWidth=\"2\" />\n              {/* Antenne */}\n              <rect x=\"22\" y=\"8\" width=\"4\" height=\"8\" rx=\"2\" fill=\"#0ea5e9\" />\n              {/* Oreilles */}\n              <circle cx=\"8\" cy=\"23\" r=\"3\" fill=\"#0ea5e9\" />\n              <circle cx=\"40\" cy=\"23\" r=\"3\" fill=\"#0ea5e9\" />\n              {/* Yeux animÃ©s */}\n              <ellipse cx=\"18\" cy=\"27\" rx=\"3\" ry=\"3\" fill=\"#0ea5e9\" />\n              <ellipse cx=\"30\" cy=\"27\" rx=\"3\" ry=\"3\" fill=\"#0ea5e9\" />\n              {/* Bouche */}\n              <rect x=\"20\" y=\"33.5\" width=\"8\" height=\"2\" rx=\"1\" fill=\"#0ea5e9\" opacity=\"0.8\" />\n            </svg>\n          </button>\n        </div>\n      </div>\n    </>\n  );\n}\n","size_bytes":8918},"client/src/components/cookies/Cookies.tsx":{"content":"// src/components/cookies/Cookies.tsx\nimport React, { useEffect, useState } from \"react\";\n\ninterface ConsentPreferences {\n  analytics: boolean;\n  functional: boolean;\n  marketing: boolean;\n  personalization: boolean;\n}\n\ninterface ConsentPayload {\n  timestamp: string;\n  preferences: ConsentPreferences;\n}\n\nconst CONSENT_KEY = \"Covoit'Sport Consent\";\n\nexport default function Cookies(): JSX.Element | null {\n  const [consent, setConsent] = useState<ConsentPayload | null>(null);\n  const [showPrefs, setShowPrefs] = useState(false);\n  const [analytics, setAnalytics] = useState(true);\n  const [functional, setFunctional] = useState(true);\n  const [marketing, setMarketing] = useState(false);\n  const [personalization, setPersonalization] = useState(true);\n\n  useEffect(() => {\n    try {\n      const stored = localStorage.getItem(CONSENT_KEY);\n      if (stored) setConsent(JSON.parse(stored));\n    } catch (e) {\n      console.error(\"Erreur lecture consentement cookies\", e);\n    }\n  }, []);\n\n  function saveConsent(prefs: ConsentPreferences) {\n    const payload: ConsentPayload = {\n      timestamp: new Date().toISOString(),\n      preferences: prefs,\n    };\n    localStorage.setItem(CONSENT_KEY, JSON.stringify(payload));\n    setConsent(payload);\n    setShowPrefs(false);\n  }\n\n  if (consent) return null;\n\n  return (\n    <div\n      className=\"fixed inset-x-2 md:inset-x-6 bottom-6 flex justify-center z-50 transition-all duration-500\"\n      role=\"dialog\"\n      aria-live=\"polite\"\n      aria-label=\"BanniÃ¨re de cookies\"\n    >\n      <div className=\"relative max-w-lg md:max-w-4xl w-full bg-gradient-to-br from-white/95 to-sky-50 shadow-xl border border-sky-100 rounded-2xl p-4 md:p-6 flex flex-col md:flex-row gap-3 md:gap-5 items-center\">\n        {/* IcÃ´ne cookie */}\n        <div\n          className=\"flex items-center justify-center w-14 h-14 rounded-full bg-sky-100 shadow-inner shrink-0 animate-pulse\"\n          aria-hidden=\"true\"\n        >\n          <svg width=\"32\" height=\"32\" fill=\"none\" viewBox=\"0 0 24 24\" aria-hidden=\"true\" focusable=\"false\">\n            <circle cx=\"12\" cy=\"12\" r=\"10\" fill=\"#408CFF\" />\n            <circle cx=\"9\" cy=\"14\" r=\"1.2\" fill=\"#fff\" />\n            <circle cx=\"15\" cy=\"16\" r=\"0.8\" fill=\"#fff\" />\n            <circle cx=\"13\" cy=\"10\" r=\"1\" fill=\"#fff\" />\n            <circle cx=\"17\" cy=\"9\" r=\"0.7\" fill=\"#fff\" />\n          </svg>\n        </div>\n        {/* Message */}\n        <div className=\"flex-1 min-w-0\">\n          <p className=\"font-semibold text-gray-900 mb-1\">ğŸª Nous valorisons votre vie privÃ©e</p>\n          <p className=\"text-gray-700 text-sm leading-tight\">\n            Ce site utilise des cookies pour amÃ©liorer lâ€™expÃ©rience, personnaliser le contenu, et mesurer lâ€™audience.\n            <a href=\"/privacy\" className=\"underline ml-1 text-primary hover:text-blue-700\" tabIndex={0}>\n              En savoir plus\n            </a>\n          </p>\n        </div>\n        {/* Actions */}\n        <div className=\"flex flex-col gap-2 md:ml-4 md:gap-2 md:flex-row md:items-center\">\n          <button\n            onClick={() => saveConsent({ analytics: false, functional: true, marketing: false, personalization: false })}\n            className=\"px-4 py-2 rounded-lg border border-sky-200 bg-white text-sky-900 font-medium shadow hover:bg-sky-50 focus:outline focus:ring-2 focus:ring-blue-300 transition\"\n            aria-label=\"Refuser les cookies analytiques\"\n          >\n            Refuser\n          </button>\n          <button\n            onClick={() => saveConsent({ analytics: true, functional: true, marketing: true, personalization: true })}\n            className=\"px-4 py-2 rounded-lg bg-gradient-to-tr from-sky-500 to-cyan-400 text-white font-semibold shadow hover:from-cyan-600 transition\"\n            autoFocus\n            aria-label=\"Accepter tous les cookies\"\n          >\n            Accepter\n          </button>\n          <button\n            onClick={() => setShowPrefs(true)}\n            className=\"text-xs md:text-sm underline text-gray-500 hover:text-blue-700 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-all focus:outline-none focus:ring-2 focus:ring-blue-300\"\n            aria-label=\"GÃ©rer les prÃ©fÃ©rences des cookies\"\n          >\n            âš™ï¸ PrÃ©fÃ©rences cookies\n          </button>\n        </div>\n\n        {/* PrÃ©fÃ©rences avancÃ©es - Version Desktop amÃ©liorÃ©e */}\n        {showPrefs && (\n          <div\n            className=\"absolute top-0 left-0 w-full h-full bg-white/95 backdrop-blur-sm rounded-2xl flex flex-col justify-start items-center p-4 md:p-6 z-50 shadow-2xl animate-fade-in max-h-[80vh] overflow-y-auto\"\n            role=\"dialog\"\n            aria-modal=\"true\"\n            aria-label=\"PrÃ©fÃ©rences cookies\"\n          >\n            <div className=\"text-center mb-4\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">ğŸª PrÃ©fÃ©rences des Cookies</h3>\n              <p className=\"text-sm text-gray-600 max-w-md\">Personnalisez votre expÃ©rience en choisissant les types de cookies que vous acceptez</p>\n            </div>\n            <form className=\"flex flex-col gap-4 max-w-md w-full\">\n              {/* Switch Analytics */}\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex flex-col\">\n                  <span className=\"text-sm font-medium\">Cookies analytiques</span>\n                  <span className=\"text-xs text-gray-500\">Mesure d'audience et performance</span>\n                </div>\n                <label\n                  htmlFor=\"analytics-toggle\"\n                  className=\"inline-flex relative items-center cursor-pointer\"\n                >\n                  <input\n                    type=\"checkbox\"\n                    id=\"analytics-toggle\"\n                    className=\"sr-only peer\"\n                    checked={analytics}\n                    onChange={() => setAnalytics((a) => !a)}\n                  />\n                  <div className=\"w-11 h-6 bg-gray-200 rounded-full peer peer-checked:bg-sky-500 peer-focus:ring-4 peer-focus:ring-sky-300 transition\"></div>\n                  <div\n                    className=\"absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform peer-checked:translate-x-5\"\n                  ></div>\n                </label>\n              </div>\n              {/* Switch Functional */}\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex flex-col\">\n                  <span className=\"text-sm font-medium\">Cookies fonctionnels</span>\n                  <span className=\"text-xs text-gray-500\">Requis pour le fonctionnement</span>\n                </div>\n                <label\n                  htmlFor=\"functional-toggle\"\n                  className=\"inline-flex relative items-center cursor-pointer\"\n                >\n                  <input\n                    type=\"checkbox\"\n                    id=\"functional-toggle\"\n                    className=\"sr-only peer\"\n                    checked={functional}\n                    onChange={() => setFunctional((f) => !f)}\n                    disabled // Ces cookies sont essentiels\n                  />\n                  <div className=\"w-11 h-6 bg-sky-500 rounded-full peer-focus:ring-4 peer-focus:ring-sky-300 transition opacity-50\"></div>\n                  <div\n                    className=\"absolute right-1 top-1 bg-white w-4 h-4 rounded-full\"\n                  ></div>\n                </label>\n              </div>\n              \n              {/* Switch Marketing */}\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex flex-col\">\n                  <span className=\"text-sm font-medium\">Cookies marketing</span>\n                  <span className=\"text-xs text-gray-500\">PublicitÃ©s personnalisÃ©es</span>\n                </div>\n                <label\n                  htmlFor=\"marketing-toggle\"\n                  className=\"inline-flex relative items-center cursor-pointer\"\n                >\n                  <input\n                    type=\"checkbox\"\n                    id=\"marketing-toggle\"\n                    className=\"sr-only peer\"\n                    checked={marketing}\n                    onChange={() => setMarketing((m) => !m)}\n                  />\n                  <div className=\"w-11 h-6 bg-gray-200 rounded-full peer peer-checked:bg-sky-500 peer-focus:ring-4 peer-focus:ring-sky-300 transition\"></div>\n                  <div\n                    className=\"absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform peer-checked:translate-x-5\"\n                  ></div>\n                </label>\n              </div>\n              \n              {/* Switch Personalization */}\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex flex-col\">\n                  <span className=\"text-sm font-medium\">Cookies de personnalisation</span>\n                  <span className=\"text-xs text-gray-500\">Contenu adaptÃ© Ã  vos prÃ©fÃ©rences</span>\n                </div>\n                <label\n                  htmlFor=\"personalization-toggle\"\n                  className=\"inline-flex relative items-center cursor-pointer\"\n                >\n                  <input\n                    type=\"checkbox\"\n                    id=\"personalization-toggle\"\n                    className=\"sr-only peer\"\n                    checked={personalization}\n                    onChange={() => setPersonalization((p) => !p)}\n                  />\n                  <div className=\"w-11 h-6 bg-gray-200 rounded-full peer peer-checked:bg-sky-500 peer-focus:ring-4 peer-focus:ring-sky-300 transition\"></div>\n                  <div\n                    className=\"absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform peer-checked:translate-x-5\"\n                  ></div>\n                </label>\n              </div>\n              <div className=\"flex gap-2 mt-4\">\n                <button\n                  type=\"submit\"\n                  onClick={(e) => {\n                    e.preventDefault();\n                    saveConsent({ analytics, functional, marketing, personalization });\n                  }}\n                  className=\"flex-1 px-4 py-2 rounded-lg bg-sky-500 text-white shadow font-semibold hover:bg-sky-600 transition\"\n                >\n                  Sauvegarder\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => setShowPrefs(false)}\n                  className=\"flex-1 px-4 py-2 rounded-lg border border-gray-300 text-gray-600 bg-white hover:bg-gray-100 transition\"\n                >\n                  Annuler\n                </button>\n              </div>\n            </form>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","size_bytes":10803},"client/src/components/dashboard/Events.tsx":{"content":"// client/src/components/dashboard/Events.tsx\nimport { useState } from \"react\";\nimport { useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport EventModal from \"@/components/modals/EventModal\";\nimport InviteModal from \"@/components/modals/InviteModal\";\nimport ParticipantManagementModal from \"@/components/modals/ParticipantManagementModal\";\nimport type { Event, EventParticipant } from \"@shared/schema\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { jsPDF } from \"jspdf\";\nimport { saveAs } from \"file-saver\";\nimport EventDetailsModal from \"../modals/EventDetails\";\n\nexport default function Events() {\n  const [selectedEvent, setSelectedEvent] = useState<Event | null>(null);\n  const [selectedEventId, setSelectedEventId] = useState<string | null>(null);\n  const [showEventModal, setShowEventModal] = useState(false);\n  const [showInviteModal, setShowInviteModal] = useState(false);\n  const [showDetailsModal, setShowDetailsModal] = useState(false);\n  const [showParticipantManagement, setShowParticipantManagement] = useState(false);\n  \n  // Filter states\n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\n  const [sportFilter, setSportFilter] = useState<string>(\"all\");\n\n  const queryClient = useQueryClient();\n  const { toast } = useToast();\n\n  const { data: allEvents = [], isLoading } = useQuery<Event[]>({\n    queryKey: [\"/api/events\"],\n  });\n\n  // Filter events based on selected filters\n  const events = allEvents.filter((event) => {\n    // Status filter\n    if (statusFilter !== \"all\") {\n      const now = new Date();\n      const eventDate = new Date(event.date);\n      \n      switch (statusFilter) {\n        case \"upcoming\":\n          if (eventDate <= now) return false;\n          break;\n        case \"past\":\n          if (eventDate > now) return false;\n          break;\n        case \"recurring\":\n          if (!event.isRecurring) return false;\n          break;\n        default:\n          break;\n      }\n    }\n\n    // Sport filter\n    if (sportFilter !== \"all\" && event.sportType !== sportFilter) {\n      return false;\n    }\n\n    return true;\n  });\n\n  const handleInvite = (eventId: string) => {\n    setSelectedEventId(eventId);\n    setShowInviteModal(true);\n  };\n\n  const handleEdit = (event: Event) => {\n    setSelectedEvent(event);\n    setShowEventModal(true);\n  };\n\n  const handleDetails = (event: Event) => {\n    setSelectedEvent(event);\n    setShowDetailsModal(true);\n  };\n\n  const handleDelete = async (eventId: string) => {\n    if (!confirm(\"Supprimer cet Ã©vÃ©nement ?\")) return;\n    try {\n      await apiRequest(\"DELETE\", `/api/events/${eventId}`);\n      toast({ title: \"Ã‰vÃ©nement supprimÃ©\" });\n      queryClient.invalidateQueries({ queryKey: [\"/api/events\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard/stats\"] }); // ğŸ”¹ important\n    } catch (err: any) {\n      toast({\n        title: \"Erreur\",\n        description: err?.message || \"Suppression impossible\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleParticipantManagement = (eventId: string) => {\n    setSelectedEventId(eventId);\n    setShowParticipantManagement(true);\n  };\n\n  const handleGenerateLink = async (eventId: string) => {\n    try {\n      const res = await apiRequest(\"POST\", `/api/events/${eventId}/invitations`);\n      // si apiRequest renvoie directement Response, lire json :\n      const data = await res.json();\n      const { token } = data;\n      const link = `${window.location.origin}/events/${eventId}`;\n      await navigator.clipboard.writeText(link);\n      toast({\n        title: \"Lien copiÃ©\",\n        description: \"Le lien d'invitation a Ã©tÃ© copiÃ© dans le presse-papier.\"\n      });\n    } catch (err: any) {\n      toast({\n        title: \"Erreur\",\n        description: err?.message || \"Impossible de gÃ©nÃ©rer le lien\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  // --- EXPORT CSV ---\n  const exportCSV = () => {\n    const rows = [[\"Nom\", \"Date\", \"Lieu\", \"Destination\", \"Participants\"]];\n    events.forEach((e: any) => {\n      rows.push([\n        e.name,\n        new Date(e.date).toLocaleString(\"fr-FR\"),\n        e.meetingPoint,\n        e.destination,\n        e.participantsCount?.toString() || \"0\"\n      ]);\n    });\n    const csvContent = rows\n      .map(row => row.map(cell => `\"${String(cell).replace(/\"/g, '\"\"')}\"`).join(\",\"))\n      .join(\"\\n\");\n    const blob = new Blob([csvContent], { type: \"text/csv;charset=utf-8;\" });\n    saveAs(blob, \"events.csv\");\n  };\n\n  // --- EXPORT PDF ---\n  const exportPDF = () => {\n    const doc = new jsPDF();\n    let y = 10;\n    doc.setFontSize(14);\n    doc.text(\"Liste des Ã©vÃ©nements\", 10, y);\n    y += 10;\n    doc.setFontSize(11);\n\n    events.forEach((e: any, i: number) => {\n      doc.text(`${i + 1}. ${e.name} â€” ${new Date(e.date).toLocaleString(\"fr-FR\")}`, 10, y);\n      y += 6;\n      doc.text(`Lieu: ${e.meetingPoint} â†’ ${e.destination}`, 10, y);\n      y += 10;\n      if (y > 270) {\n        doc.addPage();\n        y = 10;\n      }\n    });\n\n    doc.save(\"events.pdf\");\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-primary\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"animate-fade-in\">\n      <div className=\"flex items-center justify-between mb-8\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Mes Ã©vÃ©nements</h1>\n          <p className=\"text-gray-600\">CrÃ©ez et gÃ©rez tous vos Ã©vÃ©nements sportifs.</p>\n        </div>\n        <Button onClick={() => { setSelectedEvent(null); setShowEventModal(true); }} className=\"bg-primary hover:bg-blue-700\">\n          <i className=\"fas fa-plus mr-2\"></i>\n          Nouvel Ã©vÃ©nement\n        </Button>\n      </div>\n\n      {/* Events Filter */}\n      <Card className=\"mb-8\">\n        <CardContent className=\"p-6\">\n          <div className=\"flex flex-wrap gap-4\">\n            <div className=\"flex items-center space-x-2\">\n              <label className=\"text-sm font-medium text-gray-700\">Filtrer :</label>\n              <Select value={statusFilter} onValueChange={setStatusFilter}>\n                <SelectTrigger className=\"w-48\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">Tous les Ã©vÃ©nements</SelectItem>\n                  <SelectItem value=\"upcoming\">Ã€ venir</SelectItem>\n                  <SelectItem value=\"past\">PassÃ©s</SelectItem>\n                  <SelectItem value=\"recurring\">RÃ©currents</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <label className=\"text-sm font-medium text-gray-700\">Sport :</label>\n              <Select value={sportFilter} onValueChange={setSportFilter}>\n                <SelectTrigger className=\"w-48\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">Tous les sports</SelectItem>\n                  <SelectItem value=\"football\">Football</SelectItem>\n                  <SelectItem value=\"basketball\">Basketball</SelectItem>\n                  <SelectItem value=\"tennis\">Tennis</SelectItem>\n                  <SelectItem value=\"running\">Course Ã  pied</SelectItem>\n                  <SelectItem value=\"volleyball\">Volleyball</SelectItem>\n                  <SelectItem value=\"natation\">Natation</SelectItem>\n                  <SelectItem value=\"cyclisme\">Cyclisme</SelectItem>\n                  <SelectItem value=\"autre\">Autre</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <Button \n                variant=\"outline\" \n                size=\"sm\"\n                onClick={() => {\n                  setStatusFilter(\"all\");\n                  setSportFilter(\"all\");\n                }}\n                className=\"text-xs\"\n              >\n                <i className=\"fas fa-times mr-1\"></i>\n                RÃ©initialiser\n              </Button>\n            </div>\n            <div className=\"ml-auto flex space-x-2\">\n              <Button variant=\"outline\" onClick={exportCSV}>\n                <i className=\"fas fa-file-csv mr-2\"></i> CSV\n              </Button>\n              <Button variant=\"outline\" onClick={exportPDF}>\n                <i className=\"fas fa-file-pdf mr-2 text-red-500\"></i> PDF\n              </Button>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Events List */}\n      {events.length === 0 ? (\n        <Card>\n          <CardContent className=\"p-12\">\n            <div className=\"text-center\">\n              <i className=\"fas fa-calendar-plus text-gray-400 text-6xl mb-6\"></i>\n              <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">Aucun Ã©vÃ©nement</h3>\n              <p className=\"text-gray-600 mb-6\">\n                Vous n'avez pas encore crÃ©Ã© d'Ã©vÃ©nement. Commencez par crÃ©er votre premier Ã©vÃ©nement !\n              </p>\n              <Button onClick={() => { setSelectedEvent(null); setShowEventModal(true); }} className=\"bg-primary hover:bg-blue-700\">\n                <i className=\"fas fa-plus mr-2\"></i>\n                CrÃ©er mon premier Ã©vÃ©nement\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      ) : (\n        <div className=\"space-y-6\">\n          {events.map((event) => (\n            <EventCard\n              key={event.id}\n              event={event}\n              onInvite={() => handleInvite(event.id)}\n              onEdit={() => handleEdit(event)}\n              onDelete={() => handleDelete(event.id)}\n              onGenerateLink={() => handleGenerateLink(event.id)}\n              onDetails={() => handleDetails(event)}\n              onManageParticipants={() => handleParticipantManagement(event.id)}\n            />\n          ))}\n        </div>\n      )}\n\n      {/* Modals */}\n      <EventModal\n        isOpen={showEventModal}\n        onClose={() => setShowEventModal(false)}\n        event={selectedEvent || undefined}\n      />\n\n      <InviteModal\n        isOpen={showInviteModal}\n        onClose={() => setShowInviteModal(false)}\n        eventId={selectedEventId}\n      />\n      <EventDetailsModal\n        isOpen={showDetailsModal}\n        onClose={() => setShowDetailsModal(false)}\n        event={selectedEvent || undefined}\n      />\n\n      <ParticipantManagementModal\n        isOpen={showParticipantManagement}\n        onClose={() => setShowParticipantManagement(false)}\n        eventId={selectedEventId}\n      />\n\n      {/* Vous pouvez afficher un modal dÃ©tails si nÃ©cessaire en utilisant selectedEvent et showDetailsModal */}\n    </div>\n  );\n}\n\n/* EventCard now receives callbacks as props instead of accessing parent's state directly */\nfunction EventCard({\n  event,\n  onInvite,\n  onEdit,\n  onDelete,\n  onGenerateLink,\n  onDetails,\n  onManageParticipants,\n}: {\n  event: Event;\n  onInvite: () => void;\n  onEdit: () => void;\n  onDelete: () => void;\n  onGenerateLink: () => void;\n  onDetails: () => void;\n  onManageParticipants: () => void;\n}) {\n  const { data: participants = [], error: participantsError } = useQuery<EventParticipant[]>({\n    queryKey: [`/api/events/${event.id}/participants`],\n    retry: 2,\n    staleTime: 1000 * 60 * 2, // 2 minutes\n  });\n\n  // SÃ©curisation de l'accÃ¨s aux participants avec debug\n  let participantsArray: EventParticipant[] = [];\n  \n  if (participants === null || participants === undefined) {\n    console.warn(`âš ï¸ Participants pour l'Ã©vÃ©nement ${event.id}: donnÃ©es nulles/undefined`);\n    participantsArray = [];\n  } else if (Array.isArray(participants)) {\n    participantsArray = participants;\n  } else {\n    console.error(`âŒ participants N'EST PAS un tableau !`, typeof participants, participants);\n    participantsArray = [];\n  }\n  \n  if (participantsError) {\n    console.error(`âŒ Erreur lors du chargement des participants pour l'Ã©vÃ©nement ${event.id}:`, participantsError);\n  }\n\n  const drivers = participantsArray.filter(p => p && p.role === \"driver\");\n  const passengers = participantsArray.filter(p => p && p.role === \"passenger\");\n  const totalSeats = drivers.reduce((sum, d) => sum + (d?.availableSeats || 0), 0);\n  const availableSeats = Math.max(0, totalSeats - passengers.length);\n\n  return (\n    <Card className=\"overflow-hidden\">\n      <CardContent className=\"p-6\">\n        <div className=\"flex items-start justify-between\">\n          <div className=\"flex items-center space-x-4\">\n            <div className=\"w-16 h-16 bg-primary/10 rounded-xl flex items-center justify-center\">\n              <i className=\"fas fa-running text-primary text-2xl\"></i>\n            </div>\n            <div>\n              <h3 className=\"text-xl font-semibold text-gray-900\">{event.name}</h3>\n              <p className=\"text-gray-600 mt-1\">\n                <i className=\"fas fa-calendar mr-2\"></i>\n                {new Date(event.date).toLocaleDateString('fr-FR', {\n                  weekday: 'long',\n                  year: 'numeric',\n                  month: 'long',\n                  day: 'numeric'\n                })}\n                <span className=\"mx-2\">â€¢</span>\n                <i className=\"fas fa-clock mr-2\"></i>\n                {new Date(event.date).toLocaleTimeString('fr-FR', {\n                  hour: '2-digit',\n                  minute: '2-digit'\n                })}\n              </p>\n              <div className=\"flex items-center mt-2 text-sm text-gray-600\">\n                <i className=\"fas fa-map-marker-alt mr-2\"></i>\n                <span>{event.meetingPoint}</span>\n                <i className=\"fas fa-arrow-right mx-3\"></i>\n                <span>{event.destination}</span>\n              </div>\n            </div>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <span className=\"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium\">\n              {event.status === \"confirmed\" ? \"ConfirmÃ©\" : event.status}\n            </span>\n            <div className=\"flex items-center space-x-2\">\n              <Button variant=\"ghost\" size=\"sm\" onClick={onEdit}>\n                <i className=\"fas fa-edit\"></i>\n              </Button>\n              <Button variant=\"ghost\" size=\"sm\" className=\"text-red-500 hover:text-red-700\" onClick={onDelete}>\n                <i className=\"fas fa-trash\"></i>\n              </Button>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"grid md:grid-cols-3 gap-6 mt-6\">\n          <div className=\"space-y-2\">\n            <h4 className=\"font-medium text-gray-900\">Participants</h4>\n            <div className=\"text-2xl font-bold text-primary\">{participants.length}</div>\n            <div className=\"text-sm text-gray-600\">\n              {drivers.length} conducteurs â€¢ {passengers.length} passagers\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <h4 className=\"font-medium text-gray-900\">Places disponibles</h4>\n            <div className=\"text-2xl font-bold text-secondary\">{availableSeats}</div>\n            <div className=\"text-sm text-gray-600\">dans {drivers.length} vÃ©hicules</div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <h4 className=\"font-medium text-gray-900\">Actions</h4>\n            <div className=\"flex flex-wrap gap-2\">\n              <Button onClick={onInvite} size=\"sm\" className=\"bg-primary hover:bg-blue-700\">\n                <i className=\"fas fa-user-plus mr-1\"></i>\n                Inviter\n              </Button>\n\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={onGenerateLink}\n              >\n                <i className=\"fas fa-link mr-1\"></i>\n                GÃ©nÃ©rer le lien\n              </Button>\n\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={onDetails}\n              >\n                <i className=\"fas fa-eye mr-1\"></i>\n                DÃ©tails\n              </Button>\n\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={onManageParticipants}\n                className=\"bg-blue-50 hover:bg-blue-100\"\n              >\n                <i className=\"fas fa-users-cog mr-1\"></i>\n                GÃ©rer\n              </Button>\n            </div>\n          </div>\n        </div>\n\n        {/* Participants Preview */}\n        {participants.length > 0 && (\n          <div className=\"mt-6 pt-6 border-t border-gray-200\">\n            <h4 className=\"font-medium text-gray-900 mb-3\">Participants rÃ©cents</h4>\n            <div className=\"flex items-center space-x-4 text-sm\">\n              {participants.slice(0, 3).map((participant: any, index: number) => (\n                <div key={index} className=\"flex items-center space-x-2\">\n                  <div className=\"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center\">\n                    <i className=\"fas fa-user text-gray-500\"></i>\n                  </div>\n                  <span className=\"text-gray-700\">{participant.name}</span>\n                  <span className={`px-2 py-1 rounded-full text-xs ${participant.role === \"driver\"\n                    ? \"bg-primary text-white\"\n                    : \"bg-gray-200 text-gray-700\"\n                    }`}>\n                    {participant.role === \"driver\" ? \"Conducteur\" : \"Passager\"}\n                  </span>\n                </div>\n              ))}\n              {participants.length > 3 && (\n                <Button variant=\"ghost\" size=\"sm\" className=\"text-primary hover:text-blue-700\">\n                  +{participants.length - 3} autres\n                </Button>\n              )}\n            </div>\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":18153},"client/src/components/dashboard/FeatureStatus.tsx":{"content":"import React from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { useFeatures, FEATURE_DESCRIPTIONS } from \"@/hooks/useFeatures\";\nimport { useAuth } from \"@/hooks/useAuth\";\n\nexport function FeatureStatus() {\n  const { getActiveFeatures, getFeatureInfo, isOrganizationDisabled, organization } = useFeatures();\n  const { isAuthenticated } = useAuth();\n  \n  if (!isAuthenticated || !organization) return null;\n\n  const activeFeatures = getActiveFeatures();\n  const isDisabled = isOrganizationDisabled();\n  \n  // Grouper les fonctionnalitÃ©s par catÃ©gorie\n  const featuresByCategory = activeFeatures.reduce((acc, feature) => {\n    const info = getFeatureInfo(feature);\n    if (!info) return acc;\n    \n    const category = info.category || 'Autres';\n    if (!acc[category]) {\n      acc[category] = [];\n    }\n    acc[category].push({ id: feature, ...info });\n    return acc;\n  }, {} as Record<string, Array<{ id: string; name: string; description: string; icon: string; category: string }>>);\n\n  if (isDisabled) {\n    return (\n      <Card className=\"border-red-200 bg-red-50 dark:border-red-800 dark:bg-red-950/30\">\n        <CardContent className=\"p-6\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-12 h-12 bg-red-100 dark:bg-red-900/50 rounded-lg flex items-center justify-center\">\n              <i className=\"fas fa-exclamation-triangle text-red-600 dark:text-red-400\"></i>\n            </div>\n            <div>\n              <h3 className=\"text-lg font-semibold text-red-900 dark:text-red-100\">\n                Organisation dÃ©sactivÃ©e\n              </h3>\n              <p className=\"text-sm text-red-700 dark:text-red-300\">\n                Votre organisation a Ã©tÃ© temporairement dÃ©sactivÃ©e. Contactez l'administrateur pour plus d'informations.\n              </p>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (activeFeatures.length === 0 && organization.role !== 'admin') {\n    return (\n      <Card className=\"border-yellow-200 bg-yellow-50 dark:border-yellow-800 dark:bg-yellow-950/30\">\n        <CardContent className=\"p-6\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-12 h-12 bg-yellow-100 dark:bg-yellow-900/50 rounded-lg flex items-center justify-center\">\n              <i className=\"fas fa-info-circle text-yellow-600 dark:text-yellow-400\"></i>\n            </div>\n            <div>\n              <h3 className=\"text-lg font-semibold text-yellow-900 dark:text-yellow-100\">\n                Aucune fonctionnalitÃ© activÃ©e\n              </h3>\n              <p className=\"text-sm text-yellow-700 dark:text-yellow-300\">\n                Contactez votre administrateur pour activer des fonctionnalitÃ©s supplÃ©mentaires.\n              </p>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"flex items-center justify-between\">\n          <span className=\"flex items-center\">\n            <i className=\"fas fa-cog mr-2 text-primary\"></i>\n            FonctionnalitÃ©s activÃ©es\n          </span>\n          <Badge variant=\"outline\">\n            {organization.role === 'admin' ? 'Administrateur' : `${activeFeatures.length} fonctionnalitÃ©s`}\n          </Badge>\n        </CardTitle>\n      </CardHeader>\n      <CardContent className=\"p-6\">\n        {organization.role === 'admin' ? (\n          <div className=\"text-center py-4\">\n            <div className=\"w-16 h-16 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mx-auto mb-3\">\n              <i className=\"fas fa-crown text-2xl text-blue-600 dark:text-blue-400\"></i>\n            </div>\n            <h3 className=\"text-lg font-semibold mb-2\">AccÃ¨s administrateur</h3>\n            <p className=\"text-sm text-muted-foreground\">\n              Vous avez accÃ¨s Ã  toutes les fonctionnalitÃ©s de la plateforme.\n            </p>\n          </div>\n        ) : (\n          <div className=\"space-y-6\">\n            {Object.entries(featuresByCategory).map(([category, features]) => (\n              <div key={category}>\n                <h4 className=\"text-sm font-medium text-muted-foreground mb-3 uppercase tracking-wider\">\n                  {category}\n                </h4>\n                <div className=\"grid gap-3\">\n                  {features.map((feature) => (\n                    <div key={feature.id} className=\"flex items-center space-x-3 p-3 rounded-lg bg-muted/30\">\n                      <div className=\"w-8 h-8 bg-primary/10 rounded-lg flex items-center justify-center\">\n                        <i className={`${feature.icon} text-primary text-sm`}></i>\n                      </div>\n                      <div className=\"flex-1\">\n                        <h5 className=\"font-medium text-sm\">{feature.name}</h5>\n                        <p className=\"text-xs text-muted-foreground\">{feature.description}</p>\n                      </div>\n                      <Badge variant=\"default\" className=\"text-xs\">\n                        <i className=\"fas fa-check mr-1\"></i>\n                        Actif\n                      </Badge>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            ))}\n            \n            {activeFeatures.length > 0 && (\n              <div className=\"pt-4 border-t\">\n                <p className=\"text-xs text-muted-foreground text-center\">\n                  Ces fonctionnalitÃ©s sont activÃ©es pour votre organisation.\n                  <br />\n                  Contactez l'administrateur pour modifier vos permissions.\n                </p>\n              </div>\n            )}\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n\n// Composant simple pour afficher l'indicateur de statut dans la barre de navigation\nexport function OrganizationStatusIndicator() {\n  const { organization, isOrganizationDisabled } = useFeatures();\n  const { isAuthenticated } = useAuth();\n  \n  if (!isAuthenticated || !organization) return null;\n\n  if (isOrganizationDisabled()) {\n    return (\n      <Badge variant=\"destructive\" className=\"text-xs\">\n        <i className=\"fas fa-exclamation-triangle mr-1\"></i>\n        DÃ©sactivÃ©e\n      </Badge>\n    );\n  }\n\n  if (organization.role === 'admin') {\n    return (\n      <Badge variant=\"default\" className=\"text-xs bg-blue-600\">\n        <i className=\"fas fa-crown mr-1\"></i>\n        Admin\n      </Badge>\n    );\n  }\n\n  return (\n    <Badge variant=\"secondary\" className=\"text-xs\">\n      <i className=\"fas fa-check-circle mr-1\"></i>\n      Actif\n    </Badge>\n  );\n}","size_bytes":6730},"client/src/components/dashboard/Messages.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport type { Event, Message } from \"@shared/schema\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport BroadcastMessageModal from \"@/components/messaging/BroadcastMessageModal\";\nimport { useMessaging } from \"@/contexts/MessagingContext\";\n\ninterface Conversation {\n  eventId: string;\n  eventName: string;\n  lastMessage: string;\n  lastMessageTime: string;\n  unreadCount: number;\n}\n\nexport default function Messages() {\n  const [selectedConversation, setSelectedConversation] = useState<string | null>(null);\n  const [messageContent, setMessageContent] = useState(\"\");\n  const [showBroadcastModal, setShowBroadcastModal] = useState(false);\n  const [selectedEvent, setSelectedEvent] = useState<Event | null>(null);\n\n  const { data: events = [] } = useQuery<Event[]>({\n    queryKey: [\"/api/events\"],\n  });\n\n\n\n  const queryClient = useQueryClient();\n\n  const sendMessageMutation = useMutation({\n    mutationFn: async () => {\n      const { apiRequest } = await import(\"@/lib/queryClient\");\n      return await apiRequest(\"POST\", `/api/events/${selectedConversation}/messages`, { \n        content: messageContent \n      });\n    },\n    onSuccess: () => {\n      setMessageContent(\"\");\n      queryClient.invalidateQueries({ queryKey: [`/api/events/${selectedConversation}/messages`] });\n    },\n    onError: (error: any) => {\n      console.error(\"Send message error:\", error);\n    }\n  });\n\n  const deleteMessageMutation = useMutation({\n    mutationFn: async (messageId: string) => {\n      const { apiRequest } = await import(\"@/lib/queryClient\");\n      return await apiRequest(\"DELETE\", `/api/messages/${messageId}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`/api/events/${selectedConversation}/messages`] });\n    },\n    onError: (error: any) => {\n      console.error(\"Delete message error:\", error);\n    }\n  });\n\n  const handleDeleteMessage = (id: string) => {\n    if (confirm(\"Supprimer ce message ?\")) {\n      deleteMessageMutation.mutate(id);\n    }\n  };\n\n\n\n  // Group messages by event and get conversations\n  const conversations: Conversation[] = events.map((event) => ({\n    eventId: event.id,\n    eventName: event.name,\n    lastMessage: \"DerniÃ¨re activitÃ©...\",\n    lastMessageTime: \"14:32\",\n    unreadCount: Math.floor(Math.random() * 3),\n  }));\n\n  const { data: messages = [] } = useQuery<Message[]>({\n    queryKey: [`/api/events/${selectedConversation}/messages`],\n    enabled: !!selectedConversation,\n  });\n\n  const handleSendMessage = () => {\n    if (!messageContent.trim() || !selectedConversation) return;\n    sendMessageMutation.mutate();\n  };\n\n  const handleBroadcastMessage = (event: Event) => {\n    setSelectedEvent(event);\n    setShowBroadcastModal(true);\n  };\n\n  return (\n    <div className=\"animate-fade-in\">\n      <div className=\"mb-8\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Messages</h1>\n            <p className=\"text-gray-600\">Communiquez avec les participants de vos Ã©vÃ©nements.</p>\n          </div>\n          <Button\n            onClick={() => {\n              if (events.length > 0) {\n                setSelectedEvent(events[0]);\n                setShowBroadcastModal(true);\n              }\n            }}\n            className=\"bg-primary hover:bg-blue-700\"\n            disabled={events.length === 0}\n          >\n            <i className=\"fas fa-bullhorn mr-2\"></i>\n            Diffuser un message\n          </Button>\n        </div>\n      </div>\n\n      <Card className=\"h-96 flex\">\n        {/* Messages List */}\n        <div className=\"w-1/3 border-r border-gray-200 overflow-y-auto\">\n          <div className=\"p-4 border-b border-gray-200\">\n            <div className=\"relative\">\n              <i className=\"fas fa-search absolute left-3 top-3 text-gray-400\"></i>\n              <Input\n                placeholder=\"Rechercher...\"\n                className=\"pl-10\"\n              />\n            </div>\n          </div>\n\n          {conversations.length === 0 ? (\n            <div className=\"p-8 text-center\">\n              <i className=\"fas fa-comments text-gray-400 text-4xl mb-4\"></i>\n              <p className=\"text-gray-600\">Aucune conversation</p>\n              <p className=\"text-gray-500 text-sm\">Les messages des participants apparaÃ®tront ici</p>\n            </div>\n          ) : (\n            conversations.map((conversation) => (\n              <div\n                key={conversation.eventId}\n                className={`p-4 border-b border-gray-200 hover:bg-gray-50 cursor-pointer transition-colors ${selectedConversation === conversation.eventId ? \"bg-blue-50\" : \"\"\n                  }`}\n                onClick={() => setSelectedConversation(conversation.eventId)}\n              >\n                <div className=\"flex items-center space-x-3\">\n                  <Avatar className=\"w-10 h-10\">\n                    <AvatarFallback>\n                      <i className=\"fas fa-calendar text-gray-500\"></i>\n                    </AvatarFallback>\n                  </Avatar>\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center justify-between\">\n                      <p className=\"font-medium text-gray-900 truncate\">{conversation.eventName}</p>\n                      <span className=\"text-xs text-gray-500\">{conversation.lastMessageTime}</span>\n                    </div>\n                    <p className=\"text-sm text-gray-600 truncate\">{conversation.lastMessage}</p>\n                    <div className=\"flex items-center justify-between mt-1\">\n                      <span className=\"text-xs text-gray-500\">Ã‰vÃ©nement</span>\n                      {conversation.unreadCount > 0 && (\n                        <span className=\"w-2 h-2 bg-red-500 rounded-full\"></span>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))\n          )}\n        </div>\n\n        {/* Chat Area */}\n        <div className=\"flex-1 flex flex-col\">\n          {selectedConversation ? (\n            <>\n              <div className=\"p-4 border-b border-gray-200 bg-gray-50\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center space-x-3\">\n                    <Avatar className=\"w-10 h-10\">\n                      <AvatarFallback>\n                        <i className=\"fas fa-calendar text-gray-500\"></i>\n                      </AvatarFallback>\n                    </Avatar>\n                    <div>\n                      <p className=\"font-medium text-gray-900\">\n                        {conversations.find(c => c.eventId === selectedConversation)?.eventName}\n                      </p>\n                      <p className=\"text-sm text-gray-600\">Conversation de l'Ã©vÃ©nement</p>\n                    </div>\n                  </div>\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => {\n                      const event = events.find(e => e.id === selectedConversation);\n                      if (event) handleBroadcastMessage(event);\n                    }}\n                  >\n                    <i className=\"fas fa-bullhorn mr-1\"></i>\n                    Diffuser\n                  </Button>\n                </div>\n              </div>\n\n              {/* Messages */}\n              <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n                {messages.length === 0 ? (\n                  <div className=\"text-center py-8\">\n                    <i className=\"fas fa-comment-dots text-gray-400 text-3xl mb-2\"></i>\n                    <p className=\"text-gray-600\">Aucun message pour cet Ã©vÃ©nement</p>\n                  </div>\n                ) : ([...messages].reverse().map((message: any) => (\n                      <div\n                        key={message.id}\n                        className={`flex ${message.isFromOrganizer ? \"justify-end\" : \"justify-start\"}`}\n                      >\n                        {!message.isFromOrganizer && (\n                          <Avatar className=\"w-8 h-8 mr-2\">\n                            <AvatarFallback>\n                              {message.senderName.slice(0, 2).toUpperCase()}\n                            </AvatarFallback>\n                          </Avatar>\n                        )}\n\n                        <div\n                          className={`relative rounded-2xl p-3 max-w-xs sm:max-w-sm md:max-w-md ${message.isFromOrganizer\n                            ? \"bg-blue-500 text-white rounded-br-none\"\n                            : \"bg-gray-200 text-gray-900 rounded-bl-none\"\n                            }`}\n                        >\n                          <p className=\"text-sm\">{message.content}</p>\n                          <p className=\"text-[10px] opacity-70 mt-1\">\n                            {message.senderName} â€¢{\" \"}\n                            {new Date(message.createdAt).toLocaleTimeString(\"fr-FR\", {\n                              hour: \"2-digit\",\n                              minute: \"2-digit\",\n                            })}\n                          </p>\n\n                          {message.isFromOrganizer && (\n                            <button\n                              onClick={() => handleDeleteMessage(message.id)}\n                              className=\"text-red-600 hover:text-red-800\"\n                              title=\"Supprimer ce message\"\n                            >\n                              <i className=\"fas fa-trash text-xs\"></i>\n                            </button>\n                          )}\n                        </div>\n                      </div>\n                    ))\n\n                )}\n              </div>\n\n              {/* Message Input */}\n              <div className=\"p-4 border-t border-gray-200\">\n                <div className=\"flex items-center space-x-3\">\n                  <Input\n                    value={messageContent}\n                    onChange={(e) => setMessageContent(e.target.value)}\n                    placeholder=\"Tapez votre message...\"\n                    onKeyPress={(e) => e.key === \"Enter\" && handleSendMessage()}\n                  />\n                  <Button\n                    onClick={handleSendMessage}\n                    disabled={!messageContent.trim()}\n                    className=\"bg-primary hover:bg-blue-700\"\n                  >\n                    <i className=\"fas fa-paper-plane\"></i>\n                  </Button>\n                </div>\n              </div>\n            </>\n          ) : (\n            <div className=\"flex-1 flex items-center justify-center\">\n              <div className=\"text-center\">\n                <i className=\"fas fa-comments text-gray-400 text-4xl mb-4\"></i>\n                <p className=\"text-gray-600\">SÃ©lectionnez une conversation</p>\n                <p className=\"text-gray-500 text-sm\">Choisissez un Ã©vÃ©nement pour voir les messages</p>\n              </div>\n            </div>\n          )}\n        </div>\n      </Card>\n      \n      <BroadcastMessageModal\n        isOpen={showBroadcastModal}\n        onClose={() => setShowBroadcastModal(false)}\n        event={selectedEvent}\n      />\n    </div>\n  );\n}\n","size_bytes":11612},"client/src/components/dashboard/Overview.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useStats } from \"@/contexts/StatsContext\";\nimport { useFeatures, AVAILABLE_FEATURES, FeatureGuard } from \"@/hooks/useFeatures\";\nimport { CsvImportModal } from \"@/components/import/CsvImportModal\";\nimport { FeatureStatus } from \"@/components/dashboard/FeatureStatus\";\nimport SubscriptionInfo from \"@/components/subscription/SubscriptionInfo\";\nimport type { Event } from \"@shared/schema\";\nimport { useEffect, useState } from \"react\";\n\ninterface DashboardStats {\n  // Selon besoins utilisateur\n  activeEvents: number; // Total Ã©vÃ©nements crÃ©Ã©s par l'organisateur  \n  totalParticipants: number; // Total participants (passagers + conducteurs)\n  totalDrivers: number; // Total conducteurs\n  availableSeats: number; // Places disponibles (siÃ¨ges totaux - occupÃ©s)\n  \n  // Statistiques dÃ©taillÃ©es\n  totalEventsCreated?: number;\n  activeEventsCount?: number; \n  completedEventsCount?: number;\n  totalSeats?: number;\n  occupiedSeats?: number;\n  activeEventStats?: {\n    participants: number;\n    drivers: number;\n    seats: number;\n    occupiedSeats: number;\n  };\n}\n\nexport default function Overview() {\n  const { organization } = useAuth();\n  const { hasFeature } = useFeatures();\n  const [showCsvImport, setShowCsvImport] = useState(false);\n  \n  // Use the real-time stats context\n  const { stats, isLoading: statsLoading, error: statsError, refreshStats } = useStats();\n\n  const { data: events = [], refetch: refetchEvents } = useQuery<Event[]>({\n    queryKey: [\"/api/events\"],\n    refetchInterval: 60000, // Refetch every minute\n    retry: 2,\n    staleTime: 1000 * 60 * 2, // 2 minutes\n  });\n\n  // Auto-refresh stats when component mounts - now handled by StatsContext\n  useEffect(() => {\n    const interval = setInterval(() => {\n      refreshStats();\n      refetchEvents();\n    }, 15000); // Refetch every 15 seconds\n\n    return () => clearInterval(interval);\n  }, [refreshStats, refetchEvents]);\n  \n  // Debug des erreurs\n  useEffect(() => {\n    if (statsError) {\n      console.error('âŒ Erreur lors du chargement des statistiques:', statsError);\n    }\n  }, [statsError]);\n\n  const recentEvents = events.slice(0, 2);\n\n  return (\n    <div className=\"animate-fade-in\">\n      <div className=\"mb-8\">\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\n          Bienvenue, {organization?.name}\n        </h1>\n        <p className=\"text-gray-600\">GÃ©rez vos Ã©vÃ©nements et covoiturages en un coup d'Å“il.</p>\n      </div>\n\n      {/* Stats Cards */}\n      <div className=\"grid md:grid-cols-4 gap-6 mb-8\">\n        <Card className=\"hover:shadow-lg transition-shadow duration-200\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center\">\n              <div className=\"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center\">\n                <i className=\"fas fa-calendar-plus text-primary\"></i>\n              </div>\n              <div className=\"ml-4\">\n                <p className=\"text-muted-foreground text-sm\">Ã‰vÃ©nements crÃ©Ã©s</p>\n                <p className=\"text-2xl font-bold\" data-testid=\"active-events-count\">{stats?.activeEvents || 0}</p>\n                <p className=\"text-xs text-muted-foreground mt-1\">\n                  {stats?.activeEventsCount || 0} actifs â€¢ {stats?.completedEventsCount || 0} terminÃ©s\n                </p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"hover:shadow-lg transition-shadow duration-200\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center\">\n              <div className=\"w-12 h-12 bg-secondary/10 rounded-lg flex items-center justify-center\">\n                <i className=\"fas fa-users text-secondary\"></i>\n              </div>\n              <div className=\"ml-4\">\n                <p className=\"text-muted-foreground text-sm\">Participants</p>\n                <p className=\"text-2xl font-bold\" data-testid=\"participants-count\">{stats?.totalParticipants || 0}</p>\n                <p className=\"text-xs text-muted-foreground mt-1\">\n                  Passagers + Conducteurs\n                </p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"hover:shadow-lg transition-shadow duration-200\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center\">\n              <div className=\"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center\">\n                <i className=\"fas fa-car text-blue-600\"></i>\n              </div>\n              <div className=\"ml-4\">\n                <p className=\"text-muted-foreground text-sm\">Conducteurs</p>\n                <p className=\"text-2xl font-bold\" data-testid=\"drivers-count\">{stats?.totalDrivers || 0}</p>\n                <p className=\"text-xs text-muted-foreground mt-1\">\n                  {stats?.activeEventStats?.drivers || 0} dans Ã©vÃ©nements actifs\n                </p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"hover:shadow-lg transition-shadow duration-200\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center\">\n              <div className=\"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center\">\n                <i className=\"fas fa-chair text-green-600\"></i>\n              </div>\n              <div className=\"ml-4\">\n                <p className=\"text-muted-foreground text-sm\">Places disponibles</p>\n                <p className=\"text-2xl font-bold\" data-testid=\"available-seats-count\">{stats?.availableSeats || 0}</p>\n                <p className=\"text-xs text-muted-foreground mt-1\">\n                  Dans les Ã©vÃ©nements actifs\n                </p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Statut des fonctionnalitÃ©s */}\n      <div className=\"mb-8\">\n        <FeatureStatus />\n      </div>\n\n      {/* Informations d'abonnement */}\n      <div className=\"mb-8\">\n        <SubscriptionInfo />\n      </div>\n\n      {/* Analyse dÃ©taillÃ©e et statistiques avancÃ©es */}\n      <div className=\"grid md:grid-cols-2 gap-6 mb-8\">\n        <Card>\n          <CardContent className=\"p-6\">\n            <h3 className=\"text-lg font-semibold mb-4 flex items-center\">\n              <i className=\"fas fa-chart-pie text-primary mr-2\"></i>\n              Analyse des Ã©vÃ©nements\n            </h3>\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-sm text-muted-foreground\">Taux de participation</span>\n                <span className=\"text-sm font-medium\">\n                  {stats?.totalParticipants && stats?.activeEvents \n                    ? Math.round((stats.totalParticipants / Math.max(1, stats.activeEvents)) * 100) / 100\n                    : 0} participants/Ã©vÃ©nement\n                </span>\n              </div>\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-sm text-muted-foreground\">Taux d'occupation</span>\n                <span className=\"text-sm font-medium\">\n                  {stats?.activeEventStats?.seats && stats?.activeEventStats?.occupiedSeats\n                    ? Math.round((stats.activeEventStats.occupiedSeats / Math.max(1, stats.activeEventStats.seats)) * 100)\n                    : 0}%\n                </span>\n              </div>\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-sm text-muted-foreground\">Conducteurs actifs</span>\n                <span className=\"text-sm font-medium\">\n                  {stats?.activeEventStats?.drivers || 0} conducteurs\n                </span>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"p-6\">\n            <h3 className=\"text-lg font-semibold mb-4 flex items-center\">\n              <i className=\"fas fa-bolt text-yellow-500 mr-2\"></i>\n              Actions rapides\n            </h3>\n            <div className=\"space-y-2\">\n              <Button variant=\"outline\" className=\"w-full justify-start\" size=\"sm\">\n                <i className=\"fas fa-plus mr-2\"></i>\n                CrÃ©er un nouvel Ã©vÃ©nement\n              </Button>\n              <Button variant=\"outline\" className=\"w-full justify-start\" size=\"sm\">\n                <i className=\"fas fa-envelope mr-2\"></i>\n                Envoyer des rappels\n              </Button>\n              <FeatureGuard feature={AVAILABLE_FEATURES.CSV_IMPORT}>\n                <Button \n                  variant=\"outline\" \n                  className=\"w-full justify-start\" \n                  size=\"sm\"\n                  onClick={() => setShowCsvImport(true)}\n                >\n                  <i className=\"fas fa-file-csv mr-2\"></i>\n                  Importer emails CSV/Excel\n                </Button>\n              </FeatureGuard>\n              <Button variant=\"outline\" className=\"w-full justify-start\" size=\"sm\">\n                <i className=\"fas fa-download mr-2\"></i>\n                Exporter les donnÃ©es\n              </Button>\n              <FeatureGuard feature={AVAILABLE_FEATURES.ANALYTICS}>\n                <Button variant=\"outline\" className=\"w-full justify-start\" size=\"sm\">\n                  <i className=\"fas fa-chart-bar mr-2\"></i>\n                  Voir les rapports dÃ©taillÃ©s\n                </Button>\n              </FeatureGuard>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Recent Events */}\n      <Card>\n        <CardContent className=\"p-6\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <h2 className=\"text-xl font-semibold\">Ã‰vÃ©nements rÃ©cents</h2>\n            <Button variant=\"ghost\" className=\"text-primary hover:text-primary/80\">\n              Voir tout <i className=\"fas fa-arrow-right ml-1\"></i>\n            </Button>\n          </div>\n\n          {recentEvents.length === 0 ? (\n            <div className=\"text-center py-8\">\n              <i className=\"fas fa-calendar-plus text-muted-foreground text-4xl mb-4\"></i>\n              <p className=\"text-muted-foreground\">Aucun Ã©vÃ©nement crÃ©Ã© pour le moment.</p>\n              <p className=\"text-muted-foreground text-sm\">CrÃ©ez votre premier Ã©vÃ©nement pour commencer !</p>\n              <Button className=\"mt-4\" size=\"sm\">\n                <i className=\"fas fa-plus mr-2\"></i>\n                CrÃ©er un Ã©vÃ©nement\n              </Button>\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              {recentEvents.map((event: any) => {\n                const eventDate = new Date(event.eventDate || event.date);\n                const isUpcoming = eventDate >= new Date();\n                const participantCount = event.participants?.length || 0;\n                \n                return (\n                  <div \n                    key={event.id}\n                    className=\"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors\"\n                  >\n                    <div className=\"flex items-center space-x-4\">\n                      <div className={`w-12 h-12 rounded-lg flex items-center justify-center ${\n                        isUpcoming ? 'bg-primary/10' : 'bg-muted'\n                      }`}>\n                        <i className={`fas fa-running ${isUpcoming ? 'text-primary' : 'text-muted-foreground'}`}></i>\n                      </div>\n                      <div>\n                        <h3 className=\"font-semibold\">{event.name}</h3>\n                        <p className=\"text-sm text-muted-foreground\">\n                          <i className=\"fas fa-calendar mr-1\"></i>\n                          {eventDate.toLocaleDateString('fr-FR')}\n                          <i className=\"fas fa-map-marker-alt ml-4 mr-1\"></i>\n                          {event.destination}\n                        </p>\n                        <p className=\"text-xs text-muted-foreground\">\n                          {participantCount} participant{participantCount !== 1 ? 's' : ''}\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center space-x-4\">\n                      <span className={`px-3 py-1 rounded-full text-sm font-medium ${\n                        isUpcoming \n                          ? 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400' \n                          : 'bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400'\n                      }`}>\n                        {isUpcoming ? \"Ã€ venir\" : \"TerminÃ©\"}\n                      </span>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Modal d'import CSV */}\n      <CsvImportModal\n        isOpen={showCsvImport}\n        onClose={() => setShowCsvImport(false)}\n        onImportComplete={(emails) => {\n          console.log('Emails importÃ©s:', emails);\n          // Ici vous pourriez ajouter la logique pour traiter les emails importÃ©s\n          setShowCsvImport(false);\n        }}\n      />\n    </div>\n  );\n}\n","size_bytes":13448},"client/src/components/dashboard/Profile.tsx":{"content":"import React, { useRef, useState, useEffect } from \"react\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { api } from \"@/lib/api\";\nimport type { Organization } from \"@shared/schema\";\nimport BackendTestPanel from \"@/components/debug/BackendTestPanel\";\n\ntype ProfileFormData = z.infer<typeof profileSchema>;\ntype PasswordFormData = z.infer<typeof passwordSchema>;\n\nconst profileSchema = z.object({\n  name: z.string().min(1, \"Le nom est requis\"),\n  type: z.enum([\"club\", \"association\", \"company\"]),\n  email: z.string().email(\"Email invalide\"),\n  phone: z.string().optional(),\n  address: z.string().optional(),\n  description: z.string().optional(),\n  contactFirstName: z.string().min(1, \"Le prÃ©nom est requis\"),\n  contactLastName: z.string().min(1, \"Le nom est requis\"),\n  sirenNumber: z.string().optional().refine((val) => {\n    if (!val || val === \"\") return true; // Optional field\n    return /^\\d{9}$/.test(val);\n  }, \"Le numÃ©ro SIREN doit contenir exactement 9 chiffres\"),\n  sports: z.array(z.string()).optional(),\n});\n\nconst passwordSchema = z.object({\n  currentPassword: z.string().min(1, \"Le mot de passe actuel est requis\"),\n  newPassword: z.string().min(6, \"Le nouveau mot de passe doit faire au moins 6 caractÃ¨res\"),\n  confirmPassword: z.string().min(1, \"Veuillez confirmer le nouveau mot de passe\"),\n}).refine((data) => data.newPassword === data.confirmPassword, {\n  message: \"Les mots de passe ne correspondent pas\",\n  path: [\"confirmPassword\"],\n});\n\nexport default function Profile() {\n  const { organization } = useAuth();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [showPasswordForm, setShowPasswordForm] = useState(false);\n\n  // stable ref for file input\n  const fileInputRef = useRef<HTMLInputElement | null>(null);\n  // preview URL (local preview or server URL with bust query)\n  const [logoPreview, setLogoPreview] = useState<string | null>(null);\n\n  useEffect(() => {\n    // If org provides a logo, initialize preview with bust to avoid stale cache\n    if (organization?.logoUrl) {\n      setLogoPreview(`${organization.logoUrl}?t=${Date.now()}`);\n    } else {\n      setLogoPreview(null);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [organization?.logoUrl]);\n\n  const form = useForm<ProfileFormData>({\n    resolver: zodResolver(profileSchema),\n    defaultValues: {\n      name: organization?.name || \"\",\n      type: (organization?.type as \"club\" | \"association\" | \"company\") || \"club\",\n      email: organization?.email || \"\",\n      phone: organization?.phone || \"\",\n      address: organization?.address || \"\",\n      description: organization?.description || \"\",\n      contactFirstName: organization?.contactFirstName || \"\",\n      contactLastName: organization?.contactLastName || \"\",\n      sirenNumber: organization?.sirenNumber || \"\",\n      sports: organization?.sports || [],\n    },\n  });\n\n  const passwordForm = useForm<PasswordFormData>({\n    resolver: zodResolver(passwordSchema),\n    defaultValues: {\n      currentPassword: \"\",\n      newPassword: \"\",\n      confirmPassword: \"\",\n    },\n  });\n\n  const updateProfileMutation = useMutation({\n    mutationFn: (data: ProfileFormData) => apiRequest(\"PUT\", \"/api/profile\", data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/me\"] });\n      toast({\n        title: \"Profil mis Ã  jour\",\n        description: \"Vos informations ont Ã©tÃ© mises Ã  jour avec succÃ¨s.\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erreur\",\n        description: error.message || \"Une erreur est survenue.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updatePasswordMutation = useMutation({\n    mutationFn: (data: PasswordFormData) => apiRequest(\"PUT\", \"/api/profile\", { password: data.newPassword }),\n    onSuccess: () => {\n      passwordForm.reset();\n      setShowPasswordForm(false);\n      toast({\n        title: \"Mot de passe modifiÃ©\",\n        description: \"Votre mot de passe a Ã©tÃ© modifiÃ© avec succÃ¨s.\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erreur\",\n        description: error.message || \"Une erreur est survenue.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmitProfile = (data: ProfileFormData) => {\n    updateProfileMutation.mutate(data);\n  };\n\n  const onSubmitPassword = (data: PasswordFormData) => {\n    updatePasswordMutation.mutate(data);\n  };\n\n  const sports = [\"Football\", \"Basketball\", \"Tennis\", \"Handball\", \"Hockey\", \"Course Ã  pied\", \"Cyclisme\", \"Natation\"];\n\n  // cleanup: revoke local object URLs to prevent memory leaks\n  useEffect(() => {\n    return () => {\n      // revoke if logoPreview is a blob url\n      if (logoPreview && logoPreview.startsWith(\"blob:\")) {\n        URL.revokeObjectURL(logoPreview);\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <div className=\"animate-fade-in\">\n      <div className=\"mb-8\">\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Mon profil</h1>\n        <p className=\"text-gray-600\">GÃ©rez les informations de votre organisation.</p>\n      </div>\n\n      <Card>\n        <CardContent className=\"p-6\">\n          <Form {...form}>\n            <form onSubmit={form.handleSubmit(onSubmitProfile)} className=\"space-y-6\">\n              {/* Profile Image */}\n              <div className=\"flex items-center space-x-6\">\n                <img\n                  src={logoPreview || organization?.logoUrl || \"/placeholder_logo.png\"}\n                  alt=\"logo\"\n                  className=\"w-24 h-24 rounded-full object-cover\"\n                />\n                <div>\n                  <h3 className=\"text-lg font-semibold text-gray-900\">Photo de profil</h3>\n                  <p className=\"text-gray-600 text-sm\">TÃ©lÃ©chargez le logo de votre organisation</p>\n\n                  <input\n                    ref={fileInputRef}\n                    type=\"file\"\n                    accept=\"image/*\"\n                    className=\"hidden\"\n                    onChange={async (e) => {\n                      const file = e.target.files?.[0];\n                      if (!file) return;\n\n                      // immediate local preview\n                      const localUrl = URL.createObjectURL(file);\n                      // revoke previous blob if any\n                      if (logoPreview && logoPreview.startsWith(\"blob:\")) {\n                        URL.revokeObjectURL(logoPreview);\n                      }\n                      setLogoPreview(localUrl);\n\n                      const fd = new FormData();\n                      fd.append(\"logo\", file);\n\n                      try {\n                        const res = await api.profile.uploadLogo(fd);\n                        if (!res.ok) {\n                          const text = await res.text().catch(() => null);\n                          throw new Error(text || \"Upload Ã©chouÃ©\");\n                        }\n                        const { url } = await res.json(); // ex: /uploads/xxx.png\n\n                        // update React Query cache immediately (more reactive)\n                        queryClient.setQueryData([\"/api/me\"], (old: any) => {\n                          if (!old) return old;\n                          return { ...old, logoUrl: `${url}?t=${Date.now()}` };\n                        });\n                        // also invalidate to trigger refetch elsewhere\n                        queryClient.invalidateQueries({ queryKey: [\"/api/me\"] });\n\n                        // replace preview with server URL + cache bust\n                        // revoke local blob url\n                        if (localUrl.startsWith(\"blob:\")) {\n                          URL.revokeObjectURL(localUrl);\n                        }\n                        setLogoPreview(`${url}?t=${Date.now()}`);\n\n                        toast({ title: \"Logo mis Ã  jour\" });\n                      } catch (err: any) {\n                        // restore previous value on error\n                        setLogoPreview(organization?.logoUrl || null);\n                        toast({\n                          title: \"Erreur\",\n                          description: err?.message || \"Upload Ã©chouÃ©\",\n                          variant: \"destructive\",\n                        });\n                      } finally {\n                        // clear the file input value so same file can be re-uploaded if needed\n                        if (fileInputRef.current) fileInputRef.current.value = \"\";\n                      }\n                    }}\n                  />\n\n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    className=\"mt-2\"\n                    onClick={() => fileInputRef.current?.click()}\n                  >\n                    Changer la photo\n                  </Button>\n                </div>\n              </div>\n\n              {/* Organization Info */}\n              <div className=\"grid md:grid-cols-2 gap-6\">\n                <FormField\n                  control={form.control}\n                  name=\"name\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Nom de l'organisation</FormLabel>\n                      <FormControl>\n                        <Input {...field} />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"type\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Type d'organisation</FormLabel>\n                      <Select onValueChange={field.onChange} defaultValue={field.value}>\n                        <FormControl>\n                          <SelectTrigger>\n                            <SelectValue />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          <SelectItem value=\"club\">Club sportif</SelectItem>\n                          <SelectItem value=\"association\">Association</SelectItem>\n                          <SelectItem value=\"company\">Entreprise</SelectItem>\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <div className=\"grid md:grid-cols-2 gap-6\">\n                <FormField\n                  control={form.control}\n                  name=\"email\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Email de contact</FormLabel>\n                      <FormControl>\n                        <Input {...field} type=\"email\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"phone\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>TÃ©lÃ©phone</FormLabel>\n                      <FormControl>\n                        <Input {...field} />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <div className=\"grid md:grid-cols-2 gap-6\">\n                <FormField\n                  control={form.control}\n                  name=\"contactFirstName\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>PrÃ©nom du contact</FormLabel>\n                      <FormControl>\n                        <Input {...field} />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"contactLastName\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Nom du contact</FormLabel>\n                      <FormControl>\n                        <Input {...field} />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <FormField\n                control={form.control}\n                name=\"sirenNumber\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>NumÃ©ro SIREN (optionnel)</FormLabel>\n                    <FormControl>\n                      <Input \n                        {...field} \n                        placeholder=\"123456789\"\n                        maxLength={9}\n                        pattern=\"[0-9]*\"\n                        onInput={(e) => {\n                          // Ne permettre que les chiffres\n                          const input = e.target as HTMLInputElement;\n                          input.value = input.value.replace(/[^0-9]/g, '');\n                        }}\n                      />\n                    </FormControl>\n                    <p className=\"text-sm text-gray-500\">NumÃ©ro d'identification de votre organisation (9 chiffres)</p>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"address\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Adresse</FormLabel>\n                    <FormControl>\n                      <Textarea {...field} rows={3} />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"description\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Description</FormLabel>\n                    <FormControl>\n                      <Textarea\n                        {...field}\n                        rows={4}\n                        placeholder=\"DÃ©crivez votre organisation, ses activitÃ©s, ses valeurs...\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              {/* Sports & Activities */}\n              <div>\n                <Label className=\"text-sm font-medium text-gray-700 mb-4 block\">Sports pratiquÃ©s</Label>\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\n                  {sports.map((sport) => (\n                    <div key={sport} className=\"flex items-center space-x-2\">\n                      <Checkbox\n                        id={sport}\n                        checked={form.watch(\"sports\")?.includes(sport)}\n                        onCheckedChange={(checked) => {\n                          const currentSports = form.getValues(\"sports\") || [];\n                          if (checked) {\n                            form.setValue(\"sports\", [...currentSports, sport]);\n                          } else {\n                            form.setValue(\"sports\", currentSports.filter(s => s !== sport));\n                          }\n                        }}\n                      />\n                      <Label htmlFor={sport} className=\"text-sm text-gray-700\">{sport}</Label>\n                    </div>\n                  ))}\n                </div>\n              </div>\n\n              <div className=\"flex justify-end space-x-4\">\n                <Button type=\"button\" variant=\"outline\">\n                  Annuler\n                </Button>\n                <Button\n                  type=\"submit\"\n                  disabled={updateProfileMutation.isPending}\n                  className=\"bg-primary hover:bg-blue-700\"\n                >\n                  {updateProfileMutation.isPending ? \"Sauvegarde...\" : \"Sauvegarder les modifications\"}\n                </Button>\n              </div>\n            </form>\n          </Form>\n\n          {/* Security Settings */}\n          <div className=\"border-t border-gray-200 pt-6 mt-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">ParamÃ¨tres de sÃ©curitÃ©</h3>\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={() => setShowPasswordForm(!showPasswordForm)}\n              >\n                {showPasswordForm ? \"Annuler\" : \"Modifier le mot de passe\"}\n              </Button>\n            </div>\n\n            {showPasswordForm && (\n              <Form {...passwordForm}>\n                <form onSubmit={passwordForm.handleSubmit(onSubmitPassword)} className=\"space-y-4\">\n                  <FormField\n                    control={passwordForm.control}\n                    name=\"currentPassword\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Mot de passe actuel</FormLabel>\n                        <FormControl>\n                          <Input {...field} type=\"password\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <div className=\"grid md:grid-cols-2 gap-4\">\n                    <FormField\n                      control={passwordForm.control}\n                      name=\"newPassword\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Nouveau mot de passe</FormLabel>\n                          <FormControl>\n                            <Input {...field} type=\"password\" />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={passwordForm.control}\n                      name=\"confirmPassword\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Confirmer le mot de passe</FormLabel>\n                          <FormControl>\n                            <Input {...field} type=\"password\" />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                  </div>\n\n                  <div className=\"flex justify-end\">\n                    <Button\n                      type=\"submit\"\n                      disabled={updatePasswordMutation.isPending}\n                      className=\"bg-primary hover:bg-blue-700\"\n                    >\n                      {updatePasswordMutation.isPending ? \"Modification...\" : \"Modifier le mot de passe\"}\n                    </Button>\n                  </div>\n                </form>\n              </Form>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Panel de test backend - Uniquement en dÃ©veloppement */}\n      {(process.env.NODE_ENV === 'development' || window.location.hostname.includes('localhost')) && (\n        <BackendTestPanel />\n      )}\n    </div>\n  );\n}\n","size_bytes":20339},"client/src/components/dashboard/Support.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { \n  MessageSquare, \n  Plus, \n  Send, \n  HelpCircle,\n  MessageCircle,\n  User,\n  Shield\n} from \"lucide-react\";\nimport { toast } from \"sonner\";\nimport { formatDistanceToNow } from \"date-fns\";\nimport { fr } from \"date-fns/locale\";\nimport { api } from \"@/lib/api\";\nimport { useAuth } from \"@/hooks/useAuth\";\n\ninterface Conversation {\n  id: string;\n  subject: string;\n  status: 'open' | 'closed' | 'pending';\n  priority: 'low' | 'medium' | 'high' | 'urgent';\n  lastMessageAt: string;\n  createdAt: string;\n}\n\ninterface Message {\n  id: string;\n  senderId: string;\n  senderType: 'admin' | 'organization';\n  senderName: string;\n  senderEmail: string;\n  message: string;\n  messageType: 'text' | 'system' | 'attachment';\n  read: boolean;\n  createdAt: string;\n}\n\nexport default function Support() {\n  const { organization } = useAuth();\n  const [conversations, setConversations] = useState<Conversation[]>([]);\n  const [selectedConversation, setSelectedConversation] = useState<string | null>(null);\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [showNewConversation, setShowNewConversation] = useState(false);\n  const [newConversationData, setNewConversationData] = useState({\n    subject: '',\n    message: '',\n    priority: 'medium' as 'low' | 'medium' | 'high' | 'urgent'\n  });\n  const [loading, setLoading] = useState(true);\n  const [sending, setSending] = useState(false);\n\n  useEffect(() => {\n    fetchConversations();\n  }, []);\n\n  useEffect(() => {\n    if (selectedConversation) {\n      fetchMessages(selectedConversation);\n    }\n  }, [selectedConversation]);\n\n  const fetchConversations = async () => {\n    try {\n      const response = await api.admin.getConversations();\n      \n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Erreur lors du chargement des conversations');\n      }\n      \n      const data = await response.json();\n      setConversations(data);\n    } catch (error: any) {\n      console.error('Error fetching conversations:', error);\n      toast.error(error.message || 'Erreur lors du chargement des conversations');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchMessages = async (conversationId: string) => {\n    try {\n      const response = await api.admin.getMessages(conversationId);\n      \n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Erreur lors du chargement des messages');\n      }\n      \n      const data = await response.json();\n      setMessages(data);\n    } catch (error: any) {\n      console.error('Error fetching messages:', error);\n      toast.error(error.message || 'Erreur lors du chargement des messages');\n    }\n  };\n\n  const createNewConversation = async () => {\n    if (!newConversationData.subject.trim() || !newConversationData.message.trim()) {\n      toast.error('Veuillez remplir tous les champs obligatoires');\n      return;\n    }\n\n    setSending(true);\n    try {\n      const response = await api.admin.createConversation(newConversationData);\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Erreur lors de la crÃ©ation de la conversation');\n      }\n      \n      const conversation = await response.json();\n      setConversations(prev => [conversation, ...prev]);\n      setSelectedConversation(conversation.id);\n      setShowNewConversation(false);\n      setNewConversationData({ subject: '', message: '', priority: 'medium' });\n      toast.success('Message envoyÃ© avec succÃ¨s');\n    } catch (error: any) {\n      console.error('Error creating conversation:', error);\n      toast.error(error.message || 'Erreur lors de l\\'envoi du message');\n    } finally {\n      setSending(false);\n    }\n  };\n\n  const sendMessage = async () => {\n    if (!newMessage.trim() || !selectedConversation) return;\n\n    setSending(true);\n    try {\n      const response = await api.admin.sendMessage(selectedConversation, newMessage);\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Erreur lors de l\\'envoi du message');\n      }\n      \n      const message = await response.json();\n      setMessages(prev => [...prev, message]);\n      setNewMessage('');\n      // Mettre Ã  jour la conversation dans la liste\n      setConversations(prev => \n        prev.map(conv => \n          conv.id === selectedConversation \n            ? { ...conv, lastMessageAt: new Date().toISOString() }\n            : conv\n        )\n      );\n    } catch (error: any) {\n      console.error('Error sending message:', error);\n      toast.error(error.message || 'Erreur lors de l\\'envoi du message');\n    } finally {\n      setSending(false);\n    }\n  };\n\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case 'open':\n        return <Badge variant=\"secondary\" className=\"bg-green-100 text-green-800\">Ouverte</Badge>;\n      case 'pending':\n        return <Badge variant=\"secondary\" className=\"bg-yellow-100 text-yellow-800\">En attente</Badge>;\n      case 'closed':\n        return <Badge variant=\"secondary\" className=\"bg-gray-100 text-gray-800\">FermÃ©e</Badge>;\n      default:\n        return <Badge variant=\"secondary\">{status}</Badge>;\n    }\n  };\n\n  const getPriorityBadge = (priority: string) => {\n    switch (priority) {\n      case 'urgent':\n        return <Badge variant=\"destructive\">Urgent</Badge>;\n      case 'high':\n        return <Badge variant=\"secondary\" className=\"bg-red-100 text-red-800\">Haute</Badge>;\n      case 'medium':\n        return <Badge variant=\"secondary\" className=\"bg-blue-100 text-blue-800\">Moyenne</Badge>;\n      case 'low':\n        return <Badge variant=\"secondary\" className=\"bg-gray-100 text-gray-800\">Basse</Badge>;\n      default:\n        return <Badge variant=\"secondary\">{priority}</Badge>;\n    }\n  };\n\n  const selectedConv = conversations.find(c => c.id === selectedConversation);\n\n  if (!organization) {\n    return null;\n  }\n\n  return (\n    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6 h-[600px]\">\n      {/* Conversations List */}\n      <Card className=\"lg:col-span-1\">\n        <CardHeader className=\"pb-3\">\n          <div className=\"flex items-center justify-between\">\n            <CardTitle className=\"flex items-center gap-2\">\n              <HelpCircle className=\"w-5 h-5\" />\n              Mes demandes\n            </CardTitle>\n            <Button\n              size=\"sm\"\n              onClick={() => setShowNewConversation(true)}\n            >\n              <Plus className=\"w-4 h-4\" />\n            </Button>\n          </div>\n          <CardDescription>\n            Contactez notre Ã©quipe de support pour toute question ou assistance\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"p-0\">\n          {loading ? (\n            <div className=\"space-y-3 p-4\">\n              {Array.from({ length: 3 }).map((_, i) => (\n                <div key={i} className=\"animate-pulse\">\n                  <div className=\"h-16 bg-gray-200 rounded\"></div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <div className=\"divide-y max-h-96 overflow-y-auto\">\n              {conversations.map((conversation) => (\n                <div\n                  key={conversation.id}\n                  onClick={() => setSelectedConversation(conversation.id)}\n                  className={`p-4 cursor-pointer hover:bg-gray-50 transition-colors ${\n                    selectedConversation === conversation.id ? 'bg-blue-50 border-r-2 border-r-blue-500' : ''\n                  }`}\n                >\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1 min-w-0\">\n                      <h4 className=\"text-sm font-medium truncate\">\n                        {conversation.subject}\n                      </h4>\n                      <div className=\"flex items-center gap-2 mt-1\">\n                        {getStatusBadge(conversation.status)}\n                        {getPriorityBadge(conversation.priority)}\n                      </div>\n                      <p className=\"text-xs text-gray-500 mt-2\">\n                        {formatDistanceToNow(new Date(conversation.lastMessageAt), { \n                          addSuffix: true, \n                          locale: fr \n                        })}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              ))}\n              \n              {conversations.length === 0 && (\n                <div className=\"p-8 text-center text-gray-500\">\n                  <MessageCircle className=\"w-12 h-12 mx-auto mb-4 text-gray-300\" />\n                  <p className=\"text-sm mb-2\">Aucune conversation</p>\n                  <p className=\"text-xs text-gray-400\">Cliquez sur le bouton + pour contacter le support</p>\n                </div>\n              )}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Messages Area */}\n      <Card className=\"lg:col-span-2\">\n        {showNewConversation ? (\n          <div>\n            <CardHeader>\n              <CardTitle>Contacter le support</CardTitle>\n              <CardDescription>\n                DÃ©crivez votre problÃ¨me ou votre question. Notre Ã©quipe vous rÃ©pondra dans les plus brefs dÃ©lais.\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <Input\n                placeholder=\"Sujet de votre demande\"\n                value={newConversationData.subject}\n                onChange={(e) => setNewConversationData(prev => ({ ...prev, subject: e.target.value }))}\n              />\n              \n              <div className=\"space-y-2\">\n                <label className=\"text-sm font-medium\">PrioritÃ©</label>\n                <select \n                  className=\"w-full p-2 border rounded-md\"\n                  value={newConversationData.priority}\n                  onChange={(e) => setNewConversationData(prev => ({ \n                    ...prev, \n                    priority: e.target.value as 'low' | 'medium' | 'high' | 'urgent'\n                  }))}\n                >\n                  <option value=\"low\">Basse - Question gÃ©nÃ©rale</option>\n                  <option value=\"medium\">Moyenne - ProblÃ¨me technique mineur</option>\n                  <option value=\"high\">Haute - ProblÃ¨me technique important</option>\n                  <option value=\"urgent\">Urgente - Service indisponible</option>\n                </select>\n              </div>\n\n              <Textarea\n                placeholder=\"DÃ©crivez votre problÃ¨me en dÃ©tail...\"\n                rows={6}\n                value={newConversationData.message}\n                onChange={(e) => setNewConversationData(prev => ({ ...prev, message: e.target.value }))}\n              />\n\n              <div className=\"flex gap-3\">\n                <Button \n                  onClick={createNewConversation}\n                  disabled={sending || !newConversationData.subject.trim() || !newConversationData.message.trim()}\n                  className=\"flex-1\"\n                >\n                  <Send className=\"w-4 h-4 mr-2\" />\n                  {sending ? 'Envoi...' : 'Envoyer'}\n                </Button>\n                <Button \n                  variant=\"outline\" \n                  onClick={() => setShowNewConversation(false)}\n                  className=\"flex-1\"\n                >\n                  Annuler\n                </Button>\n              </div>\n            </CardContent>\n          </div>\n        ) : selectedConv ? (\n          <div className=\"flex flex-col h-full\">\n            <CardHeader className=\"pb-3\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <CardTitle className=\"text-lg\">{selectedConv.subject}</CardTitle>\n                  <div className=\"flex items-center gap-2 mt-1\">\n                    {getStatusBadge(selectedConv.status)}\n                    {getPriorityBadge(selectedConv.priority)}\n                  </div>\n                </div>\n              </div>\n            </CardHeader>\n\n            {/* Messages */}\n            <CardContent className=\"flex-1 flex flex-col min-h-0\">\n              <div className=\"flex-1 overflow-y-auto space-y-4 mb-4\">\n                {messages.map((message) => (\n                  <div\n                    key={message.id}\n                    className={`flex gap-3 ${\n                      message.senderType === 'organization' ? 'justify-end' : 'justify-start'\n                    }`}\n                  >\n                    <div\n                      className={`max-w-[70%] rounded-lg p-3 ${\n                        message.senderType === 'organization'\n                          ? 'bg-blue-500 text-white'\n                          : message.messageType === 'system'\n                          ? 'bg-gray-100 text-gray-600 text-center italic'\n                          : 'bg-gray-100 text-gray-900'\n                      }`}\n                    >\n                      {message.messageType !== 'system' && (\n                        <div className=\"flex items-center gap-2 mb-1\">\n                          {message.senderType === 'admin' ? (\n                            <Shield className=\"w-4 h-4\" />\n                          ) : (\n                            <User className=\"w-4 h-4\" />\n                          )}\n                          <span className=\"text-xs font-medium\">\n                            {message.senderType === 'admin' ? 'Support TeamMove' : 'Vous'}\n                          </span>\n                        </div>\n                      )}\n                      <p className=\"text-sm whitespace-pre-wrap\">{message.message}</p>\n                      <p className={`text-xs mt-2 ${\n                        message.senderType === 'organization' ? 'text-blue-100' : 'text-gray-500'\n                      }`}>\n                        {formatDistanceToNow(new Date(message.createdAt), { \n                          addSuffix: true, \n                          locale: fr \n                        })}\n                      </p>\n                    </div>\n                  </div>\n                ))}\n              </div>\n\n              {/* Message Input */}\n              {selectedConv.status !== 'closed' && (\n                <div className=\"flex gap-2\">\n                  <Textarea\n                    placeholder=\"Tapez votre message...\"\n                    value={newMessage}\n                    onChange={(e) => setNewMessage(e.target.value)}\n                    rows={2}\n                    className=\"flex-1\"\n                    onKeyDown={(e) => {\n                      if (e.key === 'Enter' && !e.shiftKey) {\n                        e.preventDefault();\n                        sendMessage();\n                      }\n                    }}\n                  />\n                  <Button\n                    onClick={sendMessage}\n                    disabled={!newMessage.trim() || sending}\n                    className=\"self-end\"\n                  >\n                    <Send className=\"w-4 h-4\" />\n                  </Button>\n                </div>\n              )}\n              \n              {selectedConv.status === 'closed' && (\n                <div className=\"text-center p-4 bg-gray-50 rounded-lg\">\n                  <p className=\"text-sm text-gray-500\">\n                    Cette conversation a Ã©tÃ© fermÃ©e. Si vous avez d'autres questions, \n                    n'hÃ©sitez pas Ã  crÃ©er une nouvelle demande.\n                  </p>\n                </div>\n              )}\n            </CardContent>\n          </div>\n        ) : (\n          <CardContent className=\"flex items-center justify-center h-full text-gray-500\">\n            <div className=\"text-center\">\n              <MessageSquare className=\"w-12 h-12 mx-auto mb-4\" />\n              <h3 className=\"font-medium mb-2\">Besoin d'aide ?</h3>\n              <p className=\"text-sm mb-4\">\n                Notre Ã©quipe de support est lÃ  pour vous aider. \n                SÃ©lectionnez une conversation existante ou crÃ©ez-en une nouvelle.\n              </p>\n              <Button onClick={() => setShowNewConversation(true)}>\n                <Plus className=\"w-4 h-4 mr-2\" />\n                Contacter le support\n              </Button>\n            </div>\n          </CardContent>\n        )}\n      </Card>\n    </div>\n  );\n}","size_bytes":16822},"client/src/components/debug/BackendTestPanel.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { api } from \"@/lib/api\";\n\ninterface TestResult {\n  name: string;\n  status: 'success' | 'error' | 'loading';\n  data?: any;\n  error?: string;\n  timestamp?: string;\n}\n\nexport default function BackendTestPanel() {\n  const [tests, setTests] = useState<TestResult[]>([]);\n  const { toast } = useToast();\n\n  const runTest = async (testName: string, testFn: () => Promise<Response>) => {\n    setTests(prev => [...prev.filter(t => t.name !== testName), {\n      name: testName,\n      status: 'loading'\n    }]);\n\n    try {\n      const response = await testFn();\n      const data = await response.json();\n      \n      setTests(prev => [...prev.filter(t => t.name !== testName), {\n        name: testName,\n        status: response.ok ? 'success' : 'error',\n        data: response.ok ? data : undefined,\n        error: !response.ok ? data.message || 'Erreur inconnue' : undefined,\n        timestamp: new Date().toLocaleTimeString()\n      }]);\n      \n      if (response.ok) {\n        toast({\n          title: `âœ… Test ${testName} rÃ©ussi`,\n          description: \"La communication avec le backend fonctionne\"\n        });\n      } else {\n        toast({\n          title: `âŒ Test ${testName} Ã©chouÃ©`,\n          description: data.message || 'Erreur de communication',\n          variant: \"destructive\"\n        });\n      }\n    } catch (error) {\n      setTests(prev => [...prev.filter(t => t.name !== testName), {\n        name: testName,\n        status: 'error',\n        error: error instanceof Error ? error.message : 'Erreur rÃ©seau',\n        timestamp: new Date().toLocaleTimeString()\n      }]);\n      \n      toast({\n        title: `âŒ Test ${testName} Ã©chouÃ©`,\n        description: \"Erreur de connexion au backend\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  const testEndpoints = [\n    {\n      name: 'Health Check',\n      description: 'VÃ©rifier l\\'Ã©tat du serveur',\n      fn: () => api.health(),\n      icon: 'ğŸ¥'\n    },\n    {\n      name: 'Backend Test',\n      description: 'Test de communication backend',\n      fn: () => api.test(),\n      icon: 'ğŸ§ª'\n    },\n    {\n      name: 'Liste des utilisateurs',\n      description: 'Afficher les utilisateurs de la base',\n      fn: () => api.debugUsers(),\n      icon: 'ğŸ‘¥'\n    }\n  ];\n\n  const getStatusBadge = (status: TestResult['status']) => {\n    switch (status) {\n      case 'success':\n        return <Badge className=\"bg-green-500\">âœ… SuccÃ¨s</Badge>;\n      case 'error':\n        return <Badge variant=\"destructive\">âŒ Erreur</Badge>;\n      case 'loading':\n        return <Badge variant=\"secondary\">â³ En cours...</Badge>;\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center space-x-2\">\n            <span>ğŸ”§</span>\n            <span>Tests de Communication Backend</span>\n          </CardTitle>\n          <CardDescription>\n            Testez la communication entre le frontend et le backend pour diagnostiquer les problÃ¨mes\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid gap-4\">\n            {testEndpoints.map((test) => (\n              <div key={test.name} className=\"flex items-center justify-between p-4 border rounded-lg\">\n                <div className=\"flex items-center space-x-3\">\n                  <span className=\"text-2xl\">{test.icon}</span>\n                  <div>\n                    <h4 className=\"font-medium\">{test.name}</h4>\n                    <p className=\"text-sm text-gray-500\">{test.description}</p>\n                  </div>\n                </div>\n                <Button\n                  onClick={() => runTest(test.name, test.fn)}\n                  variant=\"outline\"\n                  size=\"sm\"\n                  disabled={tests.find(t => t.name === test.name)?.status === 'loading'}\n                >\n                  Tester\n                </Button>\n              </div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n\n      {tests.length > 0 && (\n        <Card>\n          <CardHeader>\n            <CardTitle>RÃ©sultats des Tests</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4\">\n              {tests.map((test) => (\n                <div key={`${test.name}-${test.timestamp}`} className=\"border rounded-lg p-4\">\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <span className=\"font-medium\">{test.name}</span>\n                    <div className=\"flex items-center space-x-2\">\n                      {getStatusBadge(test.status)}\n                      {test.timestamp && (\n                        <span className=\"text-xs text-gray-500\">{test.timestamp}</span>\n                      )}\n                    </div>\n                  </div>\n                  \n                  {test.error && (\n                    <div className=\"bg-red-50 border border-red-200 rounded p-3 mb-2\">\n                      <p className=\"text-red-700 text-sm font-medium\">Erreur:</p>\n                      <p className=\"text-red-600 text-sm\">{test.error}</p>\n                    </div>\n                  )}\n                  \n                  {test.data && (\n                    <div className=\"bg-green-50 border border-green-200 rounded p-3\">\n                      <p className=\"text-green-700 text-sm font-medium mb-2\">RÃ©ponse:</p>\n                      <pre className=\"text-xs bg-white p-2 rounded border overflow-auto max-h-40\">\n                        {JSON.stringify(test.data, null, 2)}\n                      </pre>\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n}","size_bytes":6043},"client/src/components/footer/Footer.tsx":{"content":"// src/components/Footer.tsx\nimport React, { FormEvent, useState } from \"react\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function Footer() {\n  const [email, setEmail] = useState<string>(\"\");\n  const { toast } = useToast();\n\n  const newsletterMutation = useMutation({\n    mutationFn: async (email: string) => {\n      return await apiRequest(\"POST\", \"/api/newsletter/subscribe\", { email });\n    },\n    onSuccess: () => {\n      setEmail(\"\");\n      toast({\n        title: \"Inscription rÃ©ussie !\",\n        description: \"Vous recevrez bientÃ´t nos actualitÃ©s par email.\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erreur\",\n        description: error?.message || \"Impossible de s'inscrire Ã  la newsletter.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  function handleSubmit(e: FormEvent) {\n    e.preventDefault();\n    if (email.trim()) {\n      newsletterMutation.mutate(email.trim());\n    }\n  }\n\n  return (\n    <footer className=\"bg-gray-50 border-t mt-8\">\n      <div className=\"max-w-7xl mx-auto py-8 px-4 grid grid-cols-1 md:grid-cols-3 gap-6\">\n        {/* Section principale - centrÃ©e sur mobile */}\n        <div className=\"text-center md:text-left\">\n          <h4 className=\"font-semibold text-lg text-gray-900\">ğŸ† Team Move </h4>\n          <div className=\"flex justify-center md:justify-start mt-4 space-x-4\">\n            <a href=\"#\" className=\"text-gray-400 hover:text-blue-600 transition-colors\">\n              <i className=\"fab fa-facebook-f text-lg\"></i>\n            </a>\n            <a href=\"#\" className=\"text-gray-400 hover:text-blue-400 transition-colors\">\n              <i className=\"fab fa-twitter text-lg\"></i>\n            </a>\n            <a href=\"#\" className=\"text-gray-400 hover:text-blue-700 transition-colors\">\n              <i className=\"fab fa-linkedin-in text-lg\"></i>\n            </a>\n            <a href=\"#\" className=\"text-gray-400 hover:text-pink-600 transition-colors\">\n              <i className=\"fab fa-instagram text-lg\"></i>\n            </a>\n          </div>\n        </div>\n\n        {/* Liens utiles - centrÃ©s sur mobile */}\n        <div className=\"text-center md:text-left\">\n          <h5 className=\"font-medium text-gray-900 mb-3\">Liens utiles</h5>\n          <ul className=\"text-sm space-y-2 text-gray-600\">\n            <li><a href=\"/about\" className=\"hover:text-blue-600 transition-colors\">Ã€ propos</a></li>\n            <li><a href=\"/terms\" className=\"hover:text-blue-600 transition-colors\">Conditions d'utilisation</a></li>\n            <li><a href=\"/privacy\" className=\"hover:text-blue-600 transition-colors\">Politique de confidentialitÃ©</a></li>\n            <li><a href=\"/help\" className=\"hover:text-blue-600 transition-colors\">Centre d'aide</a></li>\n          </ul>\n        </div>\n\n        {/* Contact et newsletter - centrÃ©s sur mobile */}\n        <div className=\"text-center md:text-left\">\n          <h5 className=\"font-medium text-gray-900 mb-3\">Contact & Newsletter</h5>\n          <p className=\"text-sm text-gray-600 mb-3\">\n            <i className=\"fas fa-envelope mr-2\"></i>\n            support@teammove.com\n          </p>\n          <p className=\"text-sm text-gray-600 mb-4\">\n            <i className=\"fas fa-phone mr-2\"></i>\n            +33 7 56 83 23 13\n          </p>\n          \n          <div className=\"max-w-sm mx-auto md:mx-0\">\n            <label className=\"text-sm font-medium text-gray-700\" htmlFor=\"newsletter-email\">\n              Restez informÃ© de nos nouveautÃ©s\n            </label>\n            <form className=\"flex mt-2\" onSubmit={handleSubmit}>\n              <input\n                id=\"newsletter-email\"\n                type=\"email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                className=\"flex-1 rounded-l px-3 py-2 border border-gray-300 focus:border-blue-500 focus:outline-none text-sm\"\n                placeholder=\"Votre email\"\n                aria-label=\"Email newsletter\"\n                required\n              />\n              <button\n                type=\"submit\"\n                disabled={newsletterMutation.isPending || !email.trim()}\n                className=\"rounded-r bg-blue-600 hover:bg-blue-700 px-4 py-2 text-white text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n                aria-label=\"Envoyer l'inscription newsletter\"\n              >\n                {newsletterMutation.isPending ? (\n                  <i className=\"fas fa-spinner fa-spin\"></i>\n                ) : (\n                  <i className=\"fas fa-paper-plane\"></i>\n                )}\n              </button>\n            </form>\n          </div>\n        </div>\n      </div>\n      \n      <div className=\"bg-gray-100 py-4 text-center text-xs text-gray-600\">\n        <div className=\"max-w-7xl mx-auto px-4 flex flex-col md:flex-row items-center justify-center md:justify-between\">\n          <p>Â© {new Date().getFullYear()} Team Move  â€” Tous droits rÃ©servÃ©s</p>\n          <div className=\"mt-2 md:mt-0 flex items-center space-x-4\">\n            <span className=\"text-green-600\">\n              <i className=\"fas fa-leaf mr-1\"></i>\n              Plateforme Ã©co-responsable\n            </span>\n            <span className=\"text-blue-600\">\n              <i className=\"fas fa-shield-alt mr-1\"></i>\n              DonnÃ©es sÃ©curisÃ©es\n            </span>\n          </div>\n        </div>\n      </div>\n    </footer>\n  );\n}\n","size_bytes":5536},"client/src/components/import/CsvImportModal.tsx":{"content":"import React, { useState, useRef } from 'react';\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useFeatures, AVAILABLE_FEATURES } from \"@/hooks/useFeatures\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface CsvImportModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onImportComplete: (emails: string[]) => void;\n}\n\ninterface ParsedEmail {\n  email: string;\n  name?: string;\n  isValid: boolean;\n  error?: string;\n}\n\nexport function CsvImportModal({ isOpen, onClose, onImportComplete }: CsvImportModalProps) {\n  const [file, setFile] = useState<File | null>(null);\n  const [parsedEmails, setParsedEmails] = useState<ParsedEmail[]>([]);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [step, setStep] = useState<'upload' | 'preview' | 'complete'>('upload');\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const { hasFeature } = useFeatures();\n  const { toast } = useToast();\n\n  // VÃ©rifier les permissions\n  if (!hasFeature(AVAILABLE_FEATURES.CSV_IMPORT)) {\n    return null;\n  }\n\n  const validateEmail = (email: string): boolean => {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return emailRegex.test(email);\n  };\n\n  const parseCSVContent = (content: string): ParsedEmail[] => {\n    const lines = content.split('\\n').filter(line => line.trim());\n    const emails: ParsedEmail[] = [];\n    \n    lines.forEach((line, index) => {\n      // Supporter plusieurs formats CSV\n      const cells = line.split(/[,;\\t]/).map(cell => cell.trim().replace(/['\"]/g, ''));\n      \n      // Essayer de dÃ©tecter l'email dans la ligne\n      let email = '';\n      let name = '';\n      \n      // Format: email seul\n      if (cells.length === 1) {\n        email = cells[0];\n      }\n      // Format: nom, email ou email, nom\n      else if (cells.length >= 2) {\n        // DÃ©tecter quelle colonne contient l'email\n        const emailIndex = cells.findIndex(cell => validateEmail(cell));\n        if (emailIndex !== -1) {\n          email = cells[emailIndex];\n          name = cells[emailIndex === 0 ? 1 : 0];\n        } else {\n          // Essayer le premier champ comme email\n          email = cells[0];\n          name = cells[1];\n        }\n      }\n      \n      if (email) {\n        const isValid = validateEmail(email);\n        emails.push({\n          email: email.toLowerCase(),\n          name: name || undefined,\n          isValid,\n          error: !isValid ? 'Format d\\'email invalide' : undefined\n        });\n      }\n    });\n    \n    return emails;\n  };\n\n  const handleFileSelect = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const selectedFile = event.target.files?.[0];\n    if (!selectedFile) return;\n\n    // VÃ©rifier le type de fichier\n    const allowedTypes = [\n      'text/csv',\n      'application/vnd.ms-excel',\n      'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n      'text/plain'\n    ];\n    \n    if (!allowedTypes.includes(selectedFile.type) && !selectedFile.name.match(/\\.(csv|xlsx?|txt)$/i)) {\n      toast({\n        title: \"Type de fichier non supportÃ©\",\n        description: \"Veuillez sÃ©lectionner un fichier CSV, Excel ou TXT.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setFile(selectedFile);\n    setIsProcessing(true);\n\n    try {\n      let content = '';\n      \n      if (selectedFile.type === 'text/csv' || selectedFile.name.endsWith('.csv') || selectedFile.type === 'text/plain') {\n        // Lire fichier CSV/TXT\n        content = await selectedFile.text();\n      } else {\n        // Pour les fichiers Excel, on va utiliser une API cÃ´tÃ© serveur\n        const formData = new FormData();\n        formData.append('file', selectedFile);\n        \n        const response = await apiRequest('POST', '/api/import/parse-excel', formData, {\n          'Content-Type': undefined // Laisser le navigateur dÃ©finir le Content-Type pour FormData\n        });\n        \n        content = response.content;\n      }\n\n      const parsed = parseCSVContent(content);\n      setParsedEmails(parsed);\n      setStep('preview');\n      \n      toast({\n        title: \"Fichier analysÃ©\",\n        description: `${parsed.length} adresses trouvÃ©es, ${parsed.filter(p => p.isValid).length} valides.`,\n      });\n      \n    } catch (error) {\n      console.error('Erreur lors de l\\'analyse du fichier:', error);\n      toast({\n        title: \"Erreur d'analyse\",\n        description: \"Impossible d'analyser le fichier. VÃ©rifiez le format.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  const handleImport = () => {\n    const validEmails = parsedEmails.filter(p => p.isValid).map(p => p.email);\n    \n    if (validEmails.length === 0) {\n      toast({\n        title: \"Aucun email valide\",\n        description: \"Aucune adresse email valide trouvÃ©e dans le fichier.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    onImportComplete(validEmails);\n    setStep('complete');\n    \n    toast({\n      title: \"Import rÃ©ussi\",\n      description: `${validEmails.length} adresses email importÃ©es avec succÃ¨s.`,\n    });\n  };\n\n  const handleClose = () => {\n    setFile(null);\n    setParsedEmails([]);\n    setStep('upload');\n    onClose();\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div>\n            <h2 className=\"text-xl font-bold\">Import CSV/Excel</h2>\n            <p className=\"text-sm text-muted-foreground\">\n              Importez des listes d'adresses email depuis vos fichiers\n            </p>\n          </div>\n          <Button variant=\"ghost\" size=\"sm\" onClick={handleClose}>\n            <i className=\"fas fa-times\"></i>\n          </Button>\n        </div>\n\n        {step === 'upload' && (\n          <div className=\"space-y-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-lg flex items-center\">\n                  <i className=\"fas fa-upload mr-2 text-primary\"></i>\n                  SÃ©lectionner un fichier\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"border-2 border-dashed border-muted rounded-lg p-8 text-center\">\n                  <input\n                    ref={fileInputRef}\n                    type=\"file\"\n                    accept=\".csv,.xlsx,.xls,.txt\"\n                    onChange={handleFileSelect}\n                    className=\"hidden\"\n                  />\n                  <i className=\"fas fa-file-csv text-4xl text-muted-foreground mb-4\"></i>\n                  <p className=\"text-lg font-medium mb-2\">\n                    Cliquez pour sÃ©lectionner un fichier\n                  </p>\n                  <p className=\"text-sm text-muted-foreground mb-4\">\n                    Formats supportÃ©s: CSV, Excel (.xlsx, .xls), TXT\n                  </p>\n                  <Button onClick={() => fileInputRef.current?.click()} disabled={isProcessing}>\n                    {isProcessing ? (\n                      <>\n                        <i className=\"fas fa-spinner fa-spin mr-2\"></i>\n                        Analyse en cours...\n                      </>\n                    ) : (\n                      <>\n                        <i className=\"fas fa-folder-open mr-2\"></i>\n                        SÃ©lectionner un fichier\n                      </>\n                    )}\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-lg\">Formats supportÃ©s</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"grid md:grid-cols-2 gap-4 text-sm\">\n                  <div>\n                    <h4 className=\"font-medium mb-2\">CSV avec colonnes</h4>\n                    <pre className=\"bg-muted p-3 rounded text-xs\">\nnom,email{'\\n'}\nJean Dupont,jean@email.com{'\\n'}\nMarie Martin,marie@email.com\n                    </pre>\n                  </div>\n                  <div>\n                    <h4 className=\"font-medium mb-2\">Liste d'emails simples</h4>\n                    <pre className=\"bg-muted p-3 rounded text-xs\">\njean@email.com{'\\n'}\nmarie@email.com{'\\n'}\npierre@email.com\n                    </pre>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        )}\n\n        {step === 'preview' && (\n          <div className=\"space-y-6\">\n            <div className=\"flex items-center justify-between\">\n              <h3 className=\"text-lg font-semibold\">AperÃ§u des donnÃ©es</h3>\n              <div className=\"flex space-x-2\">\n                <Button variant=\"outline\" onClick={() => setStep('upload')}>\n                  <i className=\"fas fa-arrow-left mr-2\"></i>\n                  Retour\n                </Button>\n                <Button onClick={handleImport} disabled={parsedEmails.filter(p => p.isValid).length === 0}>\n                  <i className=\"fas fa-check mr-2\"></i>\n                  Importer {parsedEmails.filter(p => p.isValid).length} emails\n                </Button>\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-3 gap-4 mb-4\">\n              <Card>\n                <CardContent className=\"p-4 text-center\">\n                  <div className=\"text-2xl font-bold text-primary\">{parsedEmails.length}</div>\n                  <div className=\"text-sm text-muted-foreground\">Total trouvÃ©</div>\n                </CardContent>\n              </Card>\n              <Card>\n                <CardContent className=\"p-4 text-center\">\n                  <div className=\"text-2xl font-bold text-green-600\">{parsedEmails.filter(p => p.isValid).length}</div>\n                  <div className=\"text-sm text-muted-foreground\">Emails valides</div>\n                </CardContent>\n              </Card>\n              <Card>\n                <CardContent className=\"p-4 text-center\">\n                  <div className=\"text-2xl font-bold text-red-600\">{parsedEmails.filter(p => !p.isValid).length}</div>\n                  <div className=\"text-sm text-muted-foreground\">Emails invalides</div>\n                </CardContent>\n              </Card>\n            </div>\n\n            <Card>\n              <CardContent className=\"p-0\">\n                <div className=\"max-h-96 overflow-y-auto\">\n                  <table className=\"w-full\">\n                    <thead className=\"border-b\">\n                      <tr>\n                        <th className=\"text-left p-3 font-medium\">Nom</th>\n                        <th className=\"text-left p-3 font-medium\">Email</th>\n                        <th className=\"text-left p-3 font-medium\">Statut</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {parsedEmails.map((item, index) => (\n                        <tr key={index} className=\"border-b last:border-b-0\">\n                          <td className=\"p-3\">{item.name || '-'}</td>\n                          <td className=\"p-3 font-mono text-sm\">{item.email}</td>\n                          <td className=\"p-3\">\n                            {item.isValid ? (\n                              <span className=\"px-2 py-1 bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400 rounded text-xs\">\n                                Valide\n                              </span>\n                            ) : (\n                              <span className=\"px-2 py-1 bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400 rounded text-xs\">\n                                {item.error}\n                              </span>\n                            )}\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        )}\n\n        {step === 'complete' && (\n          <div className=\"text-center space-y-4\">\n            <div className=\"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto\">\n              <i className=\"fas fa-check text-2xl text-green-600 dark:text-green-400\"></i>\n            </div>\n            <h3 className=\"text-xl font-bold\">Import rÃ©ussi !</h3>\n            <p className=\"text-muted-foreground\">\n              Les adresses email ont Ã©tÃ© importÃ©es avec succÃ¨s dans votre liste.\n            </p>\n            <Button onClick={handleClose}>\n              Fermer\n            </Button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}","size_bytes":12911},"client/src/components/messaging/BroadcastMessageModal.tsx":{"content":"import { useState } from \"react\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { useMessaging } from \"@/contexts/MessagingContext\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { Event } from \"@shared/schema\";\n\ninterface BroadcastMessageModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  event: Event | null;\n}\n\nexport default function BroadcastMessageModal({ isOpen, onClose, event }: BroadcastMessageModalProps) {\n  const [message, setMessage] = useState(\"\");\n  const { sendBroadcastMessage, isLoading } = useMessaging();\n  const { toast } = useToast();\n\n  const handleSend = async () => {\n    if (!message.trim() || !event) {\n      toast({\n        title: \"Erreur\",\n        description: \"Veuillez saisir un message.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    try {\n      await sendBroadcastMessage(event.id, message.trim());\n      setMessage(\"\");\n      onClose();\n      \n      toast({\n        title: \"Message diffusÃ©\",\n        description: `Message envoyÃ© Ã  tous les participants de \"${event.name}\" par email.`,\n      });\n    } catch (error) {\n      console.error(\"Broadcast error:\", error);\n      toast({\n        title: \"Erreur\",\n        description: \"Impossible d'envoyer le message. Veuillez rÃ©essayer.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleClose = () => {\n    setMessage(\"\");\n    onClose();\n  };\n\n  if (!event) return null;\n\n  return (\n    <Dialog open={isOpen} onOpenChange={handleClose}>\n      <DialogContent className=\"sm:max-w-lg\">\n        <DialogHeader>\n          <DialogTitle className=\"text-xl font-bold\">\n            Envoyer un message Ã  tous les participants\n          </DialogTitle>\n        </DialogHeader>\n\n        <div className=\"space-y-6\">\n          {/* Event Info */}\n          <div className=\"bg-blue-50 p-4 rounded-lg border border-blue-200\">\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center\">\n                <i className=\"fas fa-calendar text-white\"></i>\n              </div>\n              <div>\n                <h3 className=\"font-semibold text-gray-900\">{event.name}</h3>\n                <p className=\"text-sm text-gray-600\">\n                  <i className=\"fas fa-map-marker-alt mr-1\"></i>\n                  {event.destination}\n                </p>\n                <p className=\"text-sm text-gray-600\">\n                  <i className=\"fas fa-clock mr-1\"></i>\n                  {new Date(event.date).toLocaleDateString('fr-FR', {\n                    weekday: 'long',\n                    year: 'numeric',\n                    month: 'long',\n                    day: 'numeric'\n                  })}\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {/* Message Composition */}\n          <div className=\"space-y-3\">\n            <Label htmlFor=\"message\" className=\"text-base font-semibold\">\n              Votre message\n            </Label>\n            <Textarea\n              id=\"message\"\n              placeholder=\"Tapez votre message ici... Il sera envoyÃ© par email Ã  tous les participants avec un bouton 'RÃ©pondre' qui leur permettra de vous contacter directement.\"\n              value={message}\n              onChange={(e) => setMessage(e.target.value)}\n              className=\"min-h-[120px] resize-none\"\n              disabled={isLoading}\n            />\n            <div className=\"text-sm text-gray-500\">\n              <i className=\"fas fa-info-circle mr-1\"></i>\n              Ce message sera envoyÃ© par email Ã  tous les participants. Ils pourront rÃ©pondre en cliquant sur le bouton \"RÃ©pondre\" dans l'email.\n            </div>\n          </div>\n\n          {/* Email Preview Info */}\n          <div className=\"bg-gray-50 p-3 rounded border border-gray-200\">\n            <h4 className=\"font-medium text-gray-900 mb-2\">\n              <i className=\"fas fa-envelope mr-1\"></i>\n              AperÃ§u de l'email\n            </h4>\n            <ul className=\"text-sm text-gray-600 space-y-1\">\n              <li>â€¢ <strong>Sujet:</strong> Message de l'organisateur - {event.name}</li>\n              <li>â€¢ <strong>Contenu:</strong> Votre message personnalisÃ©</li>\n              <li>â€¢ <strong>Action:</strong> Bouton \"RÃ©pondre\" pour rÃ©pondre directement</li>\n              <li>â€¢ <strong>Destinataires:</strong> Tous les participants inscrits</li>\n            </ul>\n          </div>\n\n          {/* Actions */}\n          <div className=\"flex justify-end space-x-3 pt-4\">\n            <Button\n              variant=\"outline\"\n              onClick={handleClose}\n              disabled={isLoading}\n            >\n              Annuler\n            </Button>\n            <Button\n              onClick={handleSend}\n              disabled={isLoading || !message.trim()}\n              className=\"bg-primary hover:bg-blue-700\"\n            >\n              {isLoading ? (\n                <>\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                  Envoi en cours...\n                </>\n              ) : (\n                <>\n                  <i className=\"fas fa-paper-plane mr-2\"></i>\n                  Envoyer Ã  tous\n                </>\n              )}\n            </Button>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}","size_bytes":5567},"client/src/components/modals/DemoModal.tsx":{"content":"import { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\n\ninterface DemoModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport default function DemoModal({ isOpen, onClose }: DemoModalProps) {\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"sm:max-w-4xl\">\n        <DialogHeader>\n          <DialogTitle className=\"text-2xl font-bold text-gray-900\">\n            DÃ©monstration de la plateforme\n          </DialogTitle>\n        </DialogHeader>\n\n        <div className=\"aspect-video bg-gray-900 rounded-lg flex items-center justify-center relative overflow-hidden\">\n          {/* Demo placeholder - in a real app this would be a video player */}\n          <div \n            className=\"absolute inset-0 bg-gradient-to-br from-primary to-secondary opacity-20\"\n            style={{\n              backgroundImage: `url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M30 30c0-11.046-8.954-20-20-20s-20 8.954-20 20 8.954 20 20 20 20-8.954 20-20zm10 0c0-11.046-8.954-20-20-20s-20 8.954-20 20 8.954 20 20 20 20-8.954 20-20z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")`,\n            }}\n          />\n          \n          {/* Mock video content */}\n          <div className=\"absolute inset-0 flex items-center justify-center\">\n            <div className=\"text-center text-white z-10\">\n              <div className=\"mb-4\">\n                <i className=\"fas fa-car text-6xl opacity-60 mb-4\"></i>\n                <h3 className=\"text-2xl font-bold mb-2\">TEAM MOVE en action</h3>\n                <p className=\"text-white/80 max-w-md mx-auto\">\n                  A venir : une vidÃ©o de dÃ©monstration de 3 minutes montrant les principales fonctionnalitÃ©s de la plateforme.\n                </p>\n              </div>\n              \n              <Button \n                className=\"bg-white/20 backdrop-blur-sm border border-white/30 text-white hover:bg-white/30 transition-all duration-300\"\n                size=\"lg\"\n                onClick={() => {\n                  // In a real implementation, this would start video playback\n                  console.log(\"Demo video would start playing\");\n                }}\n              >\n                <i className=\"fas fa-play mr-2\"></i>\n                Lancer la dÃ©monstration\n              </Button>\n            </div>\n          </div>\n\n          {/* Feature highlights overlay */}\n          <div className=\"absolute bottom-4 left-4 right-4 flex justify-between text-white/60 text-sm\">\n            <span><i className=\"fas fa-calendar mr-1\"></i> Gestion d'Ã©vÃ©nements</span>\n            <span><i className=\"fas fa-users mr-1\"></i> Invitations automatiques</span>\n            <span><i className=\"fas fa-car mr-1\"></i> Optimisation des trajets</span>\n          </div>\n        </div>\n\n        <p className=\"text-gray-600 text-center\">\n          DÃ©couvrez comment TEAM MOVE simplifie l'organisation de vos covoiturages sportifs en 3 minutes.\n        </p>\n\n        {/* Demo features list */}\n        <div className=\"grid md:grid-cols-3 gap-4 mt-4\">\n          <div className=\"text-center p-3 bg-gray-50 rounded-lg\">\n            <i className=\"fas fa-user-plus text-primary text-xl mb-2\"></i>\n            <h4 className=\"font-semibold text-sm text-gray-900\">Inscription simple</h4>\n            <p className=\"text-xs text-gray-600\">Interface intuitive pour clubs et associations</p>\n          </div>\n          \n          <div className=\"text-center p-3 bg-gray-50 rounded-lg\">\n            <i className=\"fas fa-envelope text-secondary text-xl mb-2\"></i>\n            <h4 className=\"font-semibold text-sm text-gray-900\">Invitations email</h4>\n            <p className=\"text-xs text-gray-600\">SystÃ¨me d'invitation automatisÃ©</p>\n          </div>\n          \n          <div className=\"text-center p-3 bg-gray-50 rounded-lg\">\n            <i className=\"fas fa-chart-line text-accent text-xl mb-2\"></i>\n            <h4 className=\"font-semibold text-sm text-gray-900\">Tableau de bord</h4>\n            <p className=\"text-xs text-gray-600\">Suivi en temps rÃ©el des Ã©vÃ©nements</p>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":4345},"client/src/components/modals/EventDetails.tsx":{"content":"// client/src/components/modals/EventDetailsModal.tsx\nimport React from \"react\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface Props {\n  isOpen: boolean;\n  onClose: () => void;\n  event?: any;\n}\n\nexport default function EventDetailsModal({ isOpen, onClose, event }: Props) {\n  const eventId = event?.id;\n\n  const { data: participants = [] } = useQuery({\n    queryKey: eventId ? [`/api/events/${eventId}/participants`] : [\"event-participants\", \"idle\"],\n    queryFn: async () => {\n      // apiRequest peut renvoyer soit un Response, soit JSON directement selon ton helper\n      const res = await apiRequest(\"GET\", `/api/events/${eventId}/participants`);\n      // Si apiRequest retourne un Response (fetch-like)\n      if (res && typeof (res as any).json === \"function\") {\n        return await (res as Response).json();\n      }\n      // Sinon on suppose que c'est dÃ©jÃ  le JSON\n      return res;\n    },\n    enabled: !!eventId,\n  });\n\n  if (!event) return null;\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"sm:max-w-xl max-h-[80vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle className=\"text-2xl font-bold\">{event.name}</DialogTitle>\n        </DialogHeader>\n\n        <div className=\"p-4 space-y-3\">\n          <div>\n            <div className=\"text-sm text-gray-500\">Date & heure</div>\n            <div className=\"font-medium\">{new Date(event.date).toLocaleString(\"fr-FR\")}</div>\n          </div>\n\n          <div>\n            <div className=\"text-sm text-gray-500\">Lieu de rendez-vous</div>\n            <div className=\"font-medium\">{event.meetingPoint}</div>\n          </div>\n\n          <div>\n            <div className=\"text-sm text-gray-500\">Destination</div>\n            <div className=\"font-medium\">{event.destination}</div>\n          </div>\n\n          {event.duration && (\n            <div>\n              <div className=\"text-sm text-gray-500\">DurÃ©e estimÃ©e</div>\n              <div className=\"font-medium\">{event.duration}</div>\n            </div>\n          )}\n\n          {event.description && (\n            <div>\n              <div className=\"text-sm text-gray-500\">Description</div>\n              <div className=\"font-medium whitespace-pre-wrap\">{event.description}</div>\n            </div>\n          )}\n\n          <div>\n            <div className=\"text-sm text-gray-500\">Type</div>\n            <div className=\"font-medium\">{event.isRecurring ? \"RÃ©current\" : \"Ponctuel\"}</div>\n            {event.isRecurring && event.recurrencePattern && (\n              <div className=\"text-sm text-gray-600 mt-1\">RÃ©currence : {event.recurrencePattern}</div>\n            )}\n          </div>\n\n          <div>\n            <div className=\"text-sm text-gray-500\">Participants ({participants.length})</div>\n            <ul className=\"mt-2 space-y-2\">\n              {participants.map((p: any) => (\n                <li key={p.id || `${p.name}-${p.email}`} className=\"flex items-center justify-between\">\n                  <div>\n                    <div className=\"font-medium\">{p.name}</div>\n                    <div className=\"text-sm text-gray-500\">{p.email}</div>\n                  </div>\n                  <div className={`text-xs px-2 py-1 rounded ${p.role === \"driver\" ? \"bg-primary text-white\" : \"bg-gray-200 text-gray-700\"}`}>\n                    {p.role === \"driver\" ? `Conducteur (${p.availableSeats || 0} places)` : \"Passager\"}\n                  </div>\n                </li>\n              ))}\n              {participants.length === 0 && <li className=\"text-sm text-gray-500\">Aucun participant pour l'instant</li>}\n            </ul>\n          </div>\n\n          <div className=\"flex justify-end pt-4\">\n            <Button variant=\"outline\" onClick={onClose}>Fermer</Button>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":4013},"client/src/components/modals/EventModal.tsx":{"content":"// client/src/components/modals/EventModal.tsx\nimport React, { useEffect, useState } from \"react\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { AddressAutocomplete } from \"@/components/ui/address-autocomplete\";\n\nconst eventSchema = z.object({\n  name: z.string().min(1, \"Le nom de l'Ã©vÃ©nement est requis\"),\n  sport: z.string().min(1, \"Le sport est requis\"),\n  description: z.string().optional(),\n  date: z.string().min(1, \"La date est requise\"),\n  time: z.string().min(1, \"L'heure est requise\"),\n  duration: z.string().optional(),\n  meetingPoint: z.string().min(1, \"Le lieu de rendez-vous est requis\"),\n  destination: z.string().min(1, \"La destination est requise\"),\n  eventType: z.enum([\"one-time\", \"recurring\"]),\n  recurrencePattern: z.string().optional(),\n  inviteEmails: z.array(z.string()).optional(),\n});\n\ninterface EventModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  event?: any;\n}\n\nexport default function EventModal({ isOpen, onClose, event }: EventModalProps) {\n  const [inviteEmails, setInviteEmails] = useState<string[]>([]);\n  const [currentEmail, setCurrentEmail] = useState(\"\");\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const form = useForm({\n    resolver: zodResolver(eventSchema),\n    defaultValues: {\n      name: \"\",\n      sport: \"football\",\n      description: \"\",\n      date: \"\",\n      time: \"\",\n      duration: \"\",\n      meetingPoint: \"\",\n      destination: \"\",\n      eventType: \"one-time\",\n      recurrencePattern: \"\",\n      inviteEmails: [],\n    },\n  });\n\n  // Quand `event` change, on reset le formulaire pour prÃ©remplir les valeurs\n  useEffect(() => {\n    if (event) {\n      form.reset({\n        name: event.name || \"\",\n        sport: event.sport || \"football\",\n        description: event.description || \"\",\n        date: event.date ? new Date(event.date).toISOString().split(\"T\")[0] : \"\",\n        time: event.date ? new Date(event.date).toTimeString().slice(0, 5) : \"\",\n        duration: event.duration || \"\",\n        meetingPoint: event.meetingPoint || \"\",\n        destination: event.destination || \"\",\n        eventType: event.isRecurring ? \"recurring\" : \"one-time\",\n        recurrencePattern: event.recurrencePattern || \"\",\n        inviteEmails: [],\n      });\n      setInviteEmails(Array.isArray(event.inviteEmails) ? [...event.inviteEmails] : []);\n    } else {\n      // si crÃ©ation : valeurs vides\n      form.reset({\n        name: \"\",\n        sport: \"football\",\n        description: \"\",\n        date: \"\",\n        time: \"\",\n        duration: \"\",\n        meetingPoint: \"\",\n        destination: \"\",\n        eventType: \"one-time\",\n        recurrencePattern: \"\",\n        inviteEmails: [],\n      });\n      setInviteEmails([]);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [event]);\n\n  // --- CREATE MUTATION ---\n  const createEventMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const { date, time, eventType, ...eventData } = data;\n      const dateTime = new Date(`${date}T${time}`);\n      return apiRequest(\"POST\", \"/api/events\", {\n        ...eventData,\n        date: dateTime.toISOString(),\n        isRecurring: eventType === \"recurring\",\n        recurrencePattern: data.recurrencePattern || null,\n        inviteEmails: inviteEmails.length > 0 ? inviteEmails : undefined,\n      });\n    },\n    onSuccess: async () => {\n      try {\n        // Invalidation des requÃªtes en parallÃ¨le\n        await Promise.all([\n          queryClient.invalidateQueries({ queryKey: [\"/api/events\"] }),\n          queryClient.invalidateQueries({ queryKey: [\"/api/dashboard/stats\"] }),\n          queryClient.invalidateQueries({ queryKey: [\"/api/dashboard/stats/realtime\"] }),\n        ]);\n        \n        onClose();\n        form.reset();\n        setInviteEmails([]);\n        setCurrentEmail(\"\");\n        \n        toast({\n          title: \"Ã‰vÃ©nement crÃ©Ã©\",\n          description: inviteEmails.length > 0\n            ? `Ã‰vÃ©nement crÃ©Ã© avec succÃ¨s ! Invitations envoyÃ©es Ã  ${inviteEmails.length} adresses + tous les membres existants.`\n            : \"Ã‰vÃ©nement crÃ©Ã© avec succÃ¨s ! Invitations automatiquement envoyÃ©es Ã  tous les membres existants.\",\n        });\n      } catch (error) {\n        console.error(\"âŒ Erreur lors de l'invalidation des requÃªtes:\", error);\n        // Continue avec le succÃ¨s mÃªme si l'invalidation Ã©choue\n        onClose();\n        form.reset();\n        setInviteEmails([]);\n        setCurrentEmail(\"\");\n        \n        toast({\n          title: \"Ã‰vÃ©nement crÃ©Ã©\",\n          description: \"CrÃ©ation rÃ©ussie ! La page se mettra Ã  jour automatiquement.\",\n        });\n      }\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erreur\",\n        description: error?.message || \"Impossible de crÃ©er l'Ã©vÃ©nement.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // --- UPDATE MUTATION ---\n  const updateEventMutation = useMutation({\n    mutationFn: async (data: any) => {\n      if (!event?.id) throw new Error(\"Ã‰vÃ©nement introuvable\");\n      const { date, time, eventType, ...eventData } = data;\n      const dateTime = new Date(`${date}T${time}`);\n      return apiRequest(\"PUT\", `/api/events/${event.id}`, {\n        ...eventData,\n        date: dateTime.toISOString(),\n        isRecurring: eventType === \"recurring\",\n        recurrencePattern: data.recurrencePattern || null,\n      });\n    },\n    onSuccess: async () => {\n      try {\n        await Promise.all([\n          queryClient.invalidateQueries({ queryKey: [\"/api/events\"] }),\n          queryClient.invalidateQueries({ queryKey: [\"/api/dashboard/stats\"] }),\n        ]);\n        toast({ title: \"Ã‰vÃ©nement mis Ã  jour\" });\n        onClose();\n      } catch (error) {\n        console.error(\"âŒ Erreur lors de l'invalidation des requÃªtes:\", error);\n        toast({ title: \"Ã‰vÃ©nement mis Ã  jour\" });\n        onClose();\n      }\n    },\n    onError: (err: any) => {\n      toast({\n        title: \"Erreur\",\n        description: err?.message || \"Mise Ã  jour impossible\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // --- SUBMIT HANDLER ---\n  const onSubmit = (data: any) => {\n    if (event?.id) {\n      updateEventMutation.mutate(data);\n    } else {\n      createEventMutation.mutate(data);\n    }\n  };\n\n  // invite emails helpers\n  const addEmail = () => {\n    const email = currentEmail.trim();\n    if (!email) return;\n    if (!email.includes(\"@\")) {\n      toast({ title: \"Email invalide\", variant: \"destructive\" });\n      return;\n    }\n    if (!inviteEmails.includes(email)) {\n      setInviteEmails((s) => [...s, email]);\n      setCurrentEmail(\"\");\n    } else {\n      toast({\n        title: \"Email dÃ©jÃ  ajoutÃ©\",\n        description: \"Cette adresse email est dÃ©jÃ  dans la liste.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const removeEmail = (emailToRemove: string) => {\n    setInviteEmails((s) => s.filter((e) => e !== emailToRemove));\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === \"Enter\") {\n      e.preventDefault();\n      addEmail();\n    }\n  };\n\n  const eventTypes = [\n    { value: \"one-time\", icon: \"fas fa-calendar-day\", title: \"Ã‰vÃ©nement ponctuel\", description: \"Match, compÃ©tition, sortie unique\", color: \"text-primary\" },\n    { value: \"recurring\", icon: \"fas fa-calendar-alt\", title: \"Ã‰vÃ©nement rÃ©current\", description: \"EntraÃ®nement, cours rÃ©gulier\", color: \"text-secondary\" },\n  ];\n\n  const sports = [\n    { value: \"football\", label: \"Football\" },\n    { value: \"basketball\", label: \"Basketball\" },\n    { value: \"tennis\", label: \"Tennis\" },\n    { value: \"running\", label: \"Course Ã  pied\" },\n    { value: \"cycling\", label: \"Cyclisme\" },\n    { value: \"swimming\", label: \"Natation\" },\n    {value: \"hiking\", label: \"RandonnÃ©e\" },\n    { value: \"skiing\", label: \"Ski\" },\n    { value: \"snowboarding\", label: \"Snowboard\" },\n    { value: \"volleyball\", label: \"Volleyball\" },\n    { value: \"badminton\", label: \"Badminton\" },\n    { value: \"golf\", label: \"Golf\" },\n    { value: \"rugby\", label: \"Rugby\" },\n    { value: \"cricket\", label: \"Cricket\" },\n    { value: \"table-tennis\", label: \"Tennis de table\" },\n    { value: \"boxing\", label: \"Boxe\" },\n    { value: \"martial-arts\", label: \"Arts martiaux\" },\n    { value: \"yoga\", label: \"Yoga\" },\n    { value: \"crossfit\", label: \"CrossFit\" },\n    { value: \"handball\", label: \"HandBall\" },\n    { value: \"other\", label: \"Autre\" },\n  ];\n\n  const isSubmitting = createEventMutation.isPending || updateEventMutation.isPending;\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"sm:max-w-3xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle className=\"text-2xl font-bold text-gray-900\">\n            {event ? \"Modifier l'Ã©vÃ©nement\" : \"CrÃ©er un nouvel Ã©vÃ©nement\"}\n          </DialogTitle>\n        </DialogHeader>\n\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n            {/* Event Type */}\n            <div>\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Type d'Ã©vÃ©nement</h3>\n              <FormField control={form.control} name=\"eventType\" render={({ field }) => (\n                <FormItem>\n                  <FormControl>\n                    <RadioGroup onValueChange={field.onChange} value={field.value} className=\"grid md:grid-cols-2 gap-4\">\n                      {eventTypes.map((type) => (\n                        <FormItem key={type.value}>\n                          <FormControl>\n                            <RadioGroupItem value={type.value} id={type.value} className=\"sr-only peer\" />\n                          </FormControl>\n                          <Label htmlFor={type.value}\n                            className={`relative cursor-pointer flex flex-col items-center p-4\n                              border-2 rounded-lg transition-all\n                              hover:border-primary hover:bg-primary/5\n                              peer-checked:border-primary peer-checked:bg-primary/10\n                              peer-checked:shadow-lg peer-checked:scale-[1.02]\n                            `}\n                          >\n                            <i className={`${type.icon} text-2xl ${type.color} mb-2`}></i>\n                            <div className=\"font-semibold text-gray-900\">{type.title}</div>\n                            <div className=\"text-sm text-gray-600 text-center\">{type.description}</div>\n                            {field.value === type.value && (\n                              <span className=\"absolute top-2 right-2 bg-primary text-white text-xs px-2 py-0.5 rounded-full\">\n                                SÃ©lectionnÃ©\n                              </span>\n                            )}\n                          </Label>\n\n                        </FormItem>\n                      ))}\n                    </RadioGroup>\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )} />\n            </div>\n\n            {/* Basic Info */}\n            <div className=\"grid md:grid-cols-2 gap-6\">\n              <FormField control={form.control} name=\"name\" render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Nom de l'Ã©vÃ©nement</FormLabel>\n                  <FormControl><Input {...field} placeholder=\"Match contre Real Madrid\" /></FormControl>\n                  <FormMessage />\n                </FormItem>\n              )} />\n\n              <FormField control={form.control} name=\"sport\" render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Sport</FormLabel>\n                  <Select onValueChange={field.onChange} value={field.value}>\n                    <FormControl>\n                      <SelectTrigger><SelectValue /></SelectTrigger>\n                    </FormControl>\n                    <SelectContent>\n                      {sports.map((s) => <SelectItem key={s.value} value={s.value}>{s.label}</SelectItem>)}\n                    </SelectContent>\n                  </Select>\n                  <FormMessage />\n                </FormItem>\n              )} />\n            </div>\n\n            {/* Date & Time */}\n            <div className=\"grid md:grid-cols-3 gap-4\">\n              <FormField control={form.control} name=\"date\" render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Date</FormLabel>\n                  <FormControl><Input {...field} type=\"date\" /></FormControl>\n                  <FormMessage />\n                </FormItem>\n              )} />\n\n              <FormField control={form.control} name=\"time\" render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Heure de dÃ©part</FormLabel>\n                  <FormControl><Input {...field} type=\"time\" /></FormControl>\n                  <FormMessage />\n                </FormItem>\n              )} />\n\n              <FormField control={form.control} name=\"duration\" render={({ field }) => (\n                <FormItem>\n                  <FormLabel>DurÃ©e estimÃ©e (optionnel)</FormLabel>\n                  <FormControl><Input {...field} placeholder=\"3h\" /></FormControl>\n                  <FormMessage />\n                </FormItem>\n              )} />\n            </div>\n\n            {/* Locations with address autocomplete */}\n            <div className=\"space-y-4\">\n              <FormField control={form.control} name=\"meetingPoint\" render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Lieu de rendez-vous</FormLabel>\n                  <FormControl>\n                    <AddressAutocomplete\n                      value={field.value || \"\"}\n                      onChange={field.onChange}\n                      placeholder=\"Lieu de rendez-vous (ex: Place de la RÃ©publique, Paris)\"\n                      className=\"w-full\"\n                    />\n                  </FormControl>\n                  <div className=\"text-xs text-gray-500\">\n                    ğŸ“ Tapez une adresse franÃ§aise pour voir les suggestions\n                  </div>\n                  <FormMessage />\n                </FormItem>\n              )} />\n\n              <FormField control={form.control} name=\"destination\" render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Destination</FormLabel>\n                  <FormControl>\n                    <AddressAutocomplete\n                      value={field.value || \"\"}\n                      onChange={field.onChange}\n                      placeholder=\"Destination de l'Ã©vÃ©nement (ex: Stade de France, Paris)\"\n                      className=\"w-full\"\n                    />\n                  </FormControl>\n                  <div className=\"text-xs text-gray-500\">\n                    ğŸ¯ Lieu oÃ¹ se dÃ©roule l'Ã©vÃ©nement sportif\n                  </div>\n                  <FormMessage />\n                </FormItem>\n              )} />\n            </div>\n\n            {/* Description */}\n            <FormField control={form.control} name=\"description\" render={({ field }) => (\n              <FormItem>\n                <FormLabel>Description (optionnel)</FormLabel>\n                <FormControl><Textarea {...field} rows={3} placeholder=\"DÃ©tails sur l'Ã©vÃ©nement...\" /></FormControl>\n                <FormMessage />\n              </FormItem>\n            )} />\n\n            {/* Recurrence */}\n            {form.watch(\"eventType\") === \"recurring\" && (\n              <FormField control={form.control} name=\"recurrencePattern\" render={({ field }) => (\n                <FormItem>\n                  <FormLabel>RÃ©currence</FormLabel>\n                  <Select onValueChange={field.onChange} value={field.value}>\n                    <FormControl><SelectTrigger><SelectValue placeholder=\"Choisissez la frÃ©quence\" /></SelectTrigger></FormControl>\n                    <SelectContent>\n                      <SelectItem value=\"weekly\">Chaque semaine</SelectItem>\n                      <SelectItem value=\"biweekly\">Toutes les 2 semaines</SelectItem>\n                      <SelectItem value=\"monthly\">Chaque mois</SelectItem>\n                    </SelectContent>\n                  </Select>\n                  <FormMessage />\n                </FormItem>\n              )} />\n            )}\n\n            {/* Invite emails */}\n            <div>\n              <Label className=\"text-sm font-medium text-gray-700 mb-2 block\">Inviter de nouveaux membres (optionnel)</Label>\n              <p className=\"text-xs text-gray-500 mb-3\">\n                ğŸ’¡ Tous les membres existants de vos Ã©vÃ©nements prÃ©cÃ©dents recevront automatiquement une invitation. \n                Ajoutez ici uniquement de nouvelles adresses email.\n              </p>\n              <div className=\"space-y-2\">\n                <div className=\"flex space-x-2\">\n                  <Input type=\"email\" value={currentEmail} onChange={(e) => setCurrentEmail(e.target.value)} placeholder=\"Entrez une adresse email\" onKeyPress={handleKeyPress} className=\"flex-1\" />\n                  <Button type=\"button\" onClick={addEmail} variant=\"outline\"><i className=\"fas fa-plus\"></i></Button>\n                </div>\n\n                {inviteEmails.length > 0 && (\n                  <div className=\"flex flex-wrap gap-2\">\n                    {inviteEmails.map((email, idx) => (\n                      <Badge key={idx} variant=\"secondary\" className=\"flex items-center gap-2\">\n                        {email}\n                        <button type=\"button\" onClick={() => removeEmail(email)} className=\"ml-1 text-gray-500 hover:text-gray-700\"><i className=\"fas fa-times text-xs\"></i></button>\n                      </Badge>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div className=\"flex justify-end space-x-4\">\n              <Button type=\"button\" variant=\"outline\" onClick={() => { onClose(); }}>\n                Annuler\n              </Button>\n              <Button type=\"submit\" className=\"bg-primary hover:bg-blue-700\" disabled={isSubmitting}>\n                {isSubmitting ? (\n                  <>\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                    {event ? \"Modification...\" : \"CrÃ©ation...\"}\n                  </>\n                ) : (\n                  event ? \"Modifier l'Ã©vÃ©nement\" : (inviteEmails.length > 0 ? \"CrÃ©er l'Ã©vÃ©nement et envoyer les invitations\" : \"CrÃ©er l'Ã©vÃ©nement\")\n                )}\n              </Button>\n            </div>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":19441},"client/src/components/modals/ForgotPasswordModal.tsx":{"content":"import { useState } from \"react\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { api } from \"@/lib/api\";\nimport { CheckCircle } from \"lucide-react\";\n\ninterface ForgotPasswordModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport default function ForgotPasswordModal({ isOpen, onClose }: ForgotPasswordModalProps) {\n  const [email, setEmail] = useState(\"\");\n  const [isSuccess, setIsSuccess] = useState(false);\n  const { toast } = useToast();\n\n  const forgotPasswordMutation = useMutation({\n    mutationFn: (email: string) => \n      fetch(\"/api/forgot-password\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ email }),\n      }).then(async res => {\n        const data = await res.json();\n        if (!res.ok) {\n          throw new Error(data.message || \"Une erreur s'est produite\");\n        }\n        return data;\n      }),\n    onSuccess: () => {\n      setIsSuccess(true);\n      toast({\n        title: \"Email envoyÃ©\",\n        description: \"Si un compte existe avec cette adresse, un email de rÃ©initialisation a Ã©tÃ© envoyÃ©.\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erreur\",\n        description: error.message || \"Une erreur s'est produite lors de l'envoi de l'email.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!email) {\n      toast({\n        title: \"Erreur\",\n        description: \"Veuillez saisir votre adresse email.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    forgotPasswordMutation.mutate(email);\n  };\n\n  const handleClose = () => {\n    setEmail(\"\");\n    setIsSuccess(false);\n    onClose();\n  };\n\n  if (isSuccess) {\n    return (\n      <Dialog open={isOpen} onOpenChange={handleClose}>\n        <DialogContent className=\"sm:max-w-md\">\n          <DialogHeader>\n            <DialogTitle className=\"text-2xl font-bold text-gray-900 flex items-center\">\n              <CheckCircle className=\"text-green-500 mr-2\" size={24} />\n              Email envoyÃ©\n            </DialogTitle>\n          </DialogHeader>\n          \n          <div className=\"space-y-4 text-center\">\n            <p className=\"text-gray-600\">\n              Si un compte existe avec l'adresse <strong>{email}</strong>, \n              vous recevrez sous peu un email contenant les instructions \n              pour rÃ©initialiser votre mot de passe.\n            </p>\n            \n            <p className=\"text-sm text-gray-500\">\n              VÃ©rifiez Ã©galement votre dossier de spams/courriers indÃ©sirables.\n            </p>\n            \n            <Button onClick={handleClose} className=\"w-full\">\n              Fermer\n            </Button>\n          </div>\n        </DialogContent>\n      </Dialog>\n    );\n  }\n\n  return (\n    <Dialog open={isOpen} onOpenChange={handleClose}>\n      <DialogContent className=\"sm:max-w-md\">\n        <DialogHeader>\n          <DialogTitle className=\"text-2xl font-bold text-gray-900\">\n            Mot de passe oubliÃ©\n          </DialogTitle>\n        </DialogHeader>\n        \n        <div className=\"text-sm text-gray-600 mb-4\">\n          Saisissez votre adresse email et nous vous enverrons un lien \n          pour rÃ©initialiser votre mot de passe.\n        </div>\n        \n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"reset-email\">Adresse email</Label>\n            <Input \n              id=\"reset-email\"\n              type=\"email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              placeholder=\"votre@email.com\"\n              required\n            />\n          </div>\n          \n          <Button \n            type=\"submit\" \n            className=\"w-full bg-primary hover:bg-blue-700\"\n            disabled={forgotPasswordMutation.isPending}\n          >\n            {forgotPasswordMutation.isPending ? (\n              <>\n                <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                Envoi en cours...\n              </>\n            ) : (\n              \"Envoyer le lien de rÃ©initialisation\"\n            )}\n          </Button>\n          \n          <Button \n            type=\"button\"\n            variant=\"outline\"\n            onClick={handleClose}\n            className=\"w-full\"\n          >\n            Annuler\n          </Button>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}","size_bytes":4809},"client/src/components/modals/InviteModal.tsx":{"content":"import { useState } from \"react\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface InviteModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  eventId: string | null;\n}\n\nexport default function InviteModal({ isOpen, onClose, eventId }: InviteModalProps) {\n  const [emailsText, setEmailsText] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const inviteMutation = useMutation({\n    mutationFn: async (data: { emails: string[]; message?: string }) => {\n      if (!eventId) throw new Error(\"Aucun Ã©vÃ©nement sÃ©lectionnÃ©\");\n      \n      // Create invitations for each email\n      const promises = data.emails.map(email =>\n        apiRequest(\"POST\", `/api/events/${eventId}/invite`, {\n          email: email.trim(),\n          customMessage: data.message,\n        })\n      );\n      \n      return Promise.all(promises);\n    },\n    onSuccess: (_, variables) => {\n      queryClient.invalidateQueries({ queryKey: [`/api/events/${eventId}/participants`] });\n      onClose();\n      setEmailsText(\"\");\n      setMessage(\"\");\n      toast({\n        title: \"Invitations envoyÃ©es\",\n        description: `${variables.emails.length} invitation(s) envoyÃ©e(s) avec succÃ¨s.`,\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erreur\",\n        description: error.message || \"Impossible d'envoyer les invitations.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!emailsText.trim()) {\n      toast({\n        title: \"Erreur\",\n        description: \"Veuillez saisir au moins une adresse email.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    // Parse emails from text (comma, semicolon, or newline separated)\n    const emails = emailsText\n      .split(/[,;\\n]/)\n      .map(email => email.trim())\n      .filter(email => email && email.includes(\"@\"));\n\n    if (emails.length === 0) {\n      toast({\n        title: \"Erreur\",\n        description: \"Aucune adresse email valide trouvÃ©e.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    // Check for duplicates and invalid emails\n    const validEmails = Array.from(new Set(emails)).filter(email => {\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n      return emailRegex.test(email);\n    });\n\n    if (validEmails.length === 0) {\n      toast({\n        title: \"Erreur\",\n        description: \"Aucune adresse email valide trouvÃ©e.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (validEmails.length !== emails.length) {\n      toast({\n        title: \"Attention\",\n        description: `${emails.length - validEmails.length} adresse(s) email invalide(s) ignorÃ©e(s).`,\n      });\n    }\n\n    inviteMutation.mutate({\n      emails: validEmails,\n      message: message.trim() || undefined,\n    });\n  };\n\n  const parseEmails = () => {\n    if (!emailsText.trim()) return [];\n    \n    return emailsText\n      .split(/[,;\\n]/)\n      .map(email => email.trim())\n      .filter(email => email && email.includes(\"@\"));\n  };\n\n  const emails = parseEmails();\n  const validEmails = emails.filter(email => {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return emailRegex.test(email);\n  });\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"sm:max-w-md\">\n        <DialogHeader>\n          <DialogTitle className=\"text-xl font-bold text-gray-900\">Inviter des membres</DialogTitle>\n        </DialogHeader>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"emails\" className=\"text-sm font-medium text-gray-700\">\n              Adresses email\n            </Label>\n            <p className=\"text-xs text-gray-500 mb-2\">\n              SÃ©parez les adresses par des virgules, points-virgules ou saut de ligne\n            </p>\n            <Textarea\n              id=\"emails\"\n              value={emailsText}\n              onChange={(e) => setEmailsText(e.target.value)}\n              rows={4}\n              placeholder=\"membre1@email.com, membre2@email.com&#10;membre3@email.com\"\n              className=\"resize-none\"\n            />\n            \n            {emails.length > 0 && (\n              <div className=\"mt-2\">\n                <div className=\"text-xs text-gray-500 mb-1\">\n                  {validEmails.length} email(s) valide(s) dÃ©tectÃ©(s)\n                  {emails.length !== validEmails.length && \n                    ` (${emails.length - validEmails.length} invalide(s))`\n                  }\n                </div>\n                <div className=\"flex flex-wrap gap-1\">\n                  {emails.slice(0, 5).map((email, index) => {\n                    const isValid = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);\n                    return (\n                      <Badge \n                        key={index} \n                        variant={isValid ? \"default\" : \"destructive\"}\n                        className=\"text-xs\"\n                      >\n                        {email}\n                      </Badge>\n                    );\n                  })}\n                  {emails.length > 5 && (\n                    <Badge variant=\"secondary\" className=\"text-xs\">\n                      +{emails.length - 5} autres\n                    </Badge>\n                  )}\n                </div>\n              </div>\n            )}\n          </div>\n\n          <div>\n            <Label htmlFor=\"message\" className=\"text-sm font-medium text-gray-700\">\n              Message d'invitation (optionnel)\n            </Label>\n            <Textarea\n              id=\"message\"\n              value={message}\n              onChange={(e) => setMessage(e.target.value)}\n              rows={3}\n              placeholder=\"Bonjour, je vous invite Ã  participer Ã  notre Ã©vÃ©nement...\"\n              className=\"resize-none\"\n            />\n          </div>\n\n          <div className=\"flex justify-end space-x-3\">\n            <Button type=\"button\" variant=\"outline\" onClick={onClose}>\n              Annuler\n            </Button>\n            <Button\n              type=\"submit\"\n              className=\"bg-primary hover:bg-blue-700\"\n              disabled={inviteMutation.isPending || validEmails.length === 0}\n            >\n              {inviteMutation.isPending ? (\n                <>\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                  Envoi en cours...\n                </>\n              ) : (\n                `Envoyer ${validEmails.length} invitation(s)`\n              )}\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":7130},"client/src/components/modals/LoginModal.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQueryClient } from \"@tanstack/react-query\";\nimport { useLocation } from \"wouter\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport ForgotPasswordModal from \"./ForgotPasswordModal\";\nimport ModernCaptcha from \"@/components/captcha/ModernCaptcha\";\n\ninterface LoginModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onShowRegistration: () => void;\n}\n\nexport default function LoginModal({ isOpen, onClose, onShowRegistration }: LoginModalProps) {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [rememberMe, setRememberMe] = useState(false);\n  const [showForgotPassword, setShowForgotPassword] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isCaptchaVerified, setIsCaptchaVerified] = useState(false);\n  const [showCaptcha, setShowCaptcha] = useState(false);\n  const { toast } = useToast();\n  const [, setLocation] = useLocation();\n  const { login } = useAuth();\n  \n  // Get queryClient safely\n  let queryClient;\n  try {\n    queryClient = useQueryClient();\n  } catch (error) {\n    console.warn(\"QueryClient not available in LoginModal:\", error);\n    queryClient = null;\n  }\n\n  // Load remembered email on component mount\n  useEffect(() => {\n    const rememberedEmail = localStorage.getItem('userEmail');\n    const wasRemembered = localStorage.getItem('rememberMe') === 'true';\n    \n    if (rememberedEmail && wasRemembered) {\n      setEmail(rememberedEmail);\n      setRememberMe(true);\n    }\n  }, []);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!email || !password) {\n      toast({\n        title: \"Erreur\",\n        description: \"Veuillez remplir tous les champs.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    // Show captcha after first attempt or if there were previous failed attempts\n    const failedAttempts = parseInt(localStorage.getItem('loginFailedAttempts') || '0');\n    if (failedAttempts > 0 || showCaptcha) {\n      if (!isCaptchaVerified) {\n        setShowCaptcha(true);\n        toast({\n          title: \"VÃ©rification requise\",\n          description: \"Veuillez complÃ©ter la vÃ©rification humaine.\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n    }\n\n    setIsLoading(true);\n\n    try {\n      const result = await login(email, password, rememberMe);\n      \n      if (result.success) {\n        // Store remember me preference in localStorage\n        if (rememberMe) {\n          localStorage.setItem('rememberMe', 'true');\n          localStorage.setItem('userEmail', email);\n        } else {\n          localStorage.removeItem('rememberMe');\n          localStorage.removeItem('userEmail');\n        }\n        \n        // Invalidate queries to refresh user data\n        if (queryClient) {\n          queryClient.invalidateQueries({ queryKey: [\"/api/me\"] });\n        }\n        \n        // Clear failed attempts on successful login\n        localStorage.removeItem('loginFailedAttempts');\n        \n        // Navigate to dashboard\n        setLocation(\"/dashboard\");\n        onClose();\n        \n        toast({\n          title: \"Connexion rÃ©ussie\",\n          description: rememberMe ? \n            \"Vous resterez connectÃ© pendant 7 jours.\" : \n            \"Vous Ãªtes maintenant connectÃ©.\",\n        });\n      } else {\n        // Increment failed attempts\n        const currentAttempts = parseInt(localStorage.getItem('loginFailedAttempts') || '0');\n        localStorage.setItem('loginFailedAttempts', (currentAttempts + 1).toString());\n        \n        // Show captcha after 2 failed attempts\n        if (currentAttempts >= 1) {\n          setShowCaptcha(true);\n          setIsCaptchaVerified(false);\n        }\n        \n        toast({\n          title: \"Erreur de connexion\",\n          description: result.error || \"Email ou mot de passe incorrect.\",\n          variant: \"destructive\",\n        });\n      }\n    } catch (error: any) {\n      console.error(\"Login error:\", error);\n      toast({\n        title: \"Erreur de connexion\",\n        description: error.message || \"Une erreur inattendue s'est produite.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"sm:max-w-md\">\n        <DialogHeader>\n          <DialogTitle className=\"text-2xl font-bold text-gray-900\">Connexion</DialogTitle>\n        </DialogHeader>\n        \n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"email\">Email</Label>\n            <Input \n              id=\"email\"\n              type=\"email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              placeholder=\"votre@email.com\"\n              required\n              disabled={isLoading}\n            />\n          </div>\n          \n          <div>\n            <Label htmlFor=\"password\">Mot de passe</Label>\n            <Input \n              id=\"password\"\n              type=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              placeholder=\"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢\"\n              required\n              disabled={isLoading}\n            />\n          </div>\n          \n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-2\">\n              <Checkbox \n                id=\"remember\"\n                checked={rememberMe}\n                onCheckedChange={(checked) => setRememberMe(checked === true)}\n                disabled={isLoading}\n              />\n              <Label htmlFor=\"remember\" className=\"text-sm text-gray-600\">\n                Se souvenir de moi\n              </Label>\n            </div>\n            <Button \n              variant=\"link\" \n              className=\"text-sm text-primary hover:text-blue-700 p-0\"\n              onClick={() => setShowForgotPassword(true)}\n              type=\"button\"\n              disabled={isLoading}\n            >\n              Mot de passe oubliÃ© ?\n            </Button>\n          </div>\n          \n          {showCaptcha && (\n            <ModernCaptcha \n              onVerify={setIsCaptchaVerified}\n              className=\"my-4\"\n            />\n          )}\n          \n          <Button \n            type=\"submit\" \n            className=\"w-full bg-primary hover:bg-blue-700\"\n            disabled={isLoading || (showCaptcha && !isCaptchaVerified)}\n          >\n            {isLoading ? (\n              <>\n                <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                Connexion...\n              </>\n            ) : (\n              \"Se connecter\"\n            )}\n          </Button>\n        </form>\n        \n        <div className=\"text-center\">\n          <p className=\"text-gray-600\">\n            Pas encore de compte ?{\" \"}\n            <Button \n              variant=\"link\" \n              onClick={onShowRegistration} \n              className=\"text-primary hover:text-blue-700 p-0\"\n              disabled={isLoading}\n            >\n              S'inscrire\n            </Button>\n          </p>\n        </div>\n      </DialogContent>\n\n      <ForgotPasswordModal\n        isOpen={showForgotPassword}\n        onClose={() => setShowForgotPassword(false)}\n      />\n    </Dialog>\n  );\n}","size_bytes":7737},"client/src/components/modals/ParticipantManagementModal.tsx":{"content":"import React, { useState } from \"react\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport type { EventParticipant } from \"@shared/schema\";\n\ninterface ParticipantManagementModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  eventId: string | null;\n}\n\nexport default function ParticipantManagementModal({\n  isOpen,\n  onClose,\n  eventId\n}: ParticipantManagementModalProps) {\n  const [selectedParticipant, setSelectedParticipant] = useState<EventParticipant | null>(null);\n  const [newRole, setNewRole] = useState<string>(\"\");\n  const [newSeats, setNewSeats] = useState<string>(\"\");\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const { data: participantsData, isLoading } = useQuery<EventParticipant[]>({\n    queryKey: [`/api/events/${eventId}/participants`],\n    queryFn: () => apiRequest(\"GET\", `/api/events/${eventId}/participants`),\n    enabled: !!eventId,\n  });\n\n  const { data: changeRequests = [] } = useQuery({\n    queryKey: [`/api/events/${eventId}/change-requests`],\n    queryFn: () => apiRequest(\"GET\", `/api/events/${eventId}/change-requests`),\n    enabled: !!eventId,\n  });\n\n  const updateParticipantMutation = useMutation({\n    mutationFn: async (data: {\n      participantId: string;\n      role?: string;\n      availableSeats?: number;\n      status?: string\n    }) => {\n      return apiRequest(\"PUT\", `/api/participants/${data.participantId}`, data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`/api/events/${eventId}/participants`] });\n      setSelectedParticipant(null);\n      setNewRole(\"\");\n      setNewSeats(\"\");\n      toast({\n        title: \"Participant mis Ã  jour\",\n        description: \"Les modifications ont Ã©tÃ© appliquÃ©es avec succÃ¨s.\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erreur\",\n        description: error?.message || \"Impossible de mettre Ã  jour le participant.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const removeParticipantMutation = useMutation({\n    mutationFn: async (participantId: string) => {\n      return apiRequest(\"DELETE\", `/api/participants/${participantId}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`/api/events/${eventId}/participants`] });\n      toast({\n        title: \"Participant retirÃ©\",\n        description: \"Le participant a Ã©tÃ© retirÃ© de l'Ã©vÃ©nement.\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erreur\",\n        description: error?.message || \"Impossible de retirer le participant.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const processChangeRequestMutation = useMutation({\n    mutationFn: async (data: { requestId: string; status: string; organizerComment?: string }) => {\n      return apiRequest(\"PUT\", `/api/change-requests/${data.requestId}`, data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`/api/events/${eventId}/change-requests`] });\n      queryClient.invalidateQueries({ queryKey: [`/api/events/${eventId}/participants`] });\n      toast({\n        title: \"Demande traitÃ©e\",\n        description: \"La demande a Ã©tÃ© traitÃ©e avec succÃ¨s.\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erreur\",\n        description: error?.message || \"Impossible de traiter la demande.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const [reminderDays, setReminderDays] = useState<number>(1);\n  const [showReminderOptions, setShowReminderOptions] = useState<boolean>(false);\n\n  const sendRemindersMutation = useMutation({\n    mutationFn: async (daysBeforeEvent: number = 1) => {\n      return apiRequest(\"POST\", `/api/events/${eventId}/send-reminders`, { \n        daysBeforeEvent: daysBeforeEvent,\n        hoursBeforeEvent: daysBeforeEvent * 24 // Pour compatibilitÃ© backend\n      });\n    },\n    onSuccess: (data: any) => {\n      toast({\n        title: \"Rappels programmÃ©s\",\n        description: `Les rappels seront envoyÃ©s ${reminderDays} jour${reminderDays > 1 ? 's' : ''} avant l'Ã©vÃ©nement.`,\n      });\n      setShowReminderOptions(false);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erreur\",\n        description: error?.message || \"Impossible d'envoyer les rappels.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleUpdateParticipant = () => {\n    if (!selectedParticipant) return;\n\n    const updateData: any = {};\n\n    if (newRole && newRole !== selectedParticipant.role) {\n      updateData.role = newRole;\n      if (newRole === \"driver\" && newSeats) {\n        updateData.availableSeats = parseInt(newSeats);\n      }\n    } else if (newSeats && selectedParticipant.role === \"driver\") {\n      updateData.availableSeats = parseInt(newSeats);\n    }\n\n    if (Object.keys(updateData).length > 0) {\n      updateParticipantMutation.mutate({\n        participantId: selectedParticipant.id,\n        ...updateData\n      });\n    }\n  };\n\n  const participants = Array.isArray(participantsData) ? participantsData : [];\n  if (!Array.isArray(participantsData)) {\n    console.error(\"participants N'EST PAS un tableau !\", participantsData);\n  }\n  const drivers = participants.filter(p => p.role === \"driver\");\n  const passengers = participants.filter(p => p.role === \"passenger\");\n  const totalSeats = drivers.reduce((sum, d) => sum + (d.availableSeats || 0), 0);\n\n  if (!eventId) return null;\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle className=\"text-xl font-bold\">\n            Gestion des Participants\n          </DialogTitle>\n        </DialogHeader>\n\n        <div className=\"space-y-6\">\n          {/* Statistics */}\n          <div className=\"grid grid-cols-4 gap-4\">\n            <Card>\n              <CardContent className=\"p-4 text-center\">\n                <div className=\"text-2xl font-bold text-blue-600\">{participants.length}</div>\n                <div className=\"text-sm text-gray-600\">Total</div>\n              </CardContent>\n            </Card>\n            <Card>\n              <CardContent className=\"p-4 text-center\">\n                <div className=\"text-2xl font-bold text-green-600\">{drivers.length}</div>\n                <div className=\"text-sm text-gray-600\">Conducteurs</div>\n              </CardContent>\n            </Card>\n            <Card>\n              <CardContent className=\"p-4 text-center\">\n                <div className=\"text-2xl font-bold text-orange-600\">{passengers.length}</div>\n                <div className=\"text-sm text-gray-600\">Passagers</div>\n              </CardContent>\n            </Card>\n            <Card>\n              <CardContent className=\"p-4 text-center\">\n                <div className=\"text-2xl font-bold text-purple-600\">{totalSeats}</div>\n                <div className=\"text-sm text-gray-600\">Places dispo</div>\n              </CardContent>\n            </Card>\n          </div>\n\n          {/* Actions */}\n          <div className=\"flex space-x-2\">\n            <div className=\"relative\">\n              {!showReminderOptions ? (\n                <Button\n                  onClick={() => setShowReminderOptions(true)}\n                  disabled={sendRemindersMutation.isPending}\n                  variant=\"outline\"\n                >\n                  <i className=\"fas fa-bell mr-2\"></i>\n                  Programmer des rappels\n                </Button>\n              ) : (\n                <Card className=\"absolute top-0 left-0 z-50 w-80 p-4 border shadow-lg bg-white\">\n                  <div className=\"space-y-4\">\n                    <h4 className=\"font-semibold\">Programmer des rappels</h4>\n                    \n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"reminder-days\">Envoyer les rappels :</Label>\n                      <Select\n                        value={reminderDays.toString()}\n                        onValueChange={(value) => setReminderDays(parseInt(value))}\n                      >\n                        <SelectTrigger>\n                          <SelectValue />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"1\">1 jour avant l'Ã©vÃ©nement</SelectItem>\n                          <SelectItem value=\"2\">2 jours avant l'Ã©vÃ©nement</SelectItem>\n                          <SelectItem value=\"3\">3 jours avant l'Ã©vÃ©nement</SelectItem>\n                          <SelectItem value=\"4\">4 jours avant l'Ã©vÃ©nement</SelectItem>\n                          <SelectItem value=\"5\">5 jours avant l'Ã©vÃ©nement</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n\n                    <div className=\"flex space-x-2 justify-end\">\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => setShowReminderOptions(false)}\n                      >\n                        Annuler\n                      </Button>\n                      <Button\n                        size=\"sm\"\n                        onClick={() => sendRemindersMutation.mutate(reminderDays)}\n                        disabled={sendRemindersMutation.isPending}\n                      >\n                        <i className=\"fas fa-bell mr-2\"></i>\n                        {sendRemindersMutation.isPending ? \"Programmation...\" : \"Programmer\"}\n                      </Button>\n                    </div>\n                  </div>\n                </Card>\n              )}\n            </div>\n            <Button\n              onClick={() => window.open(`/api/events/${eventId}/calendar`, '_blank')}\n              variant=\"outline\"\n            >\n              <i className=\"fas fa-calendar-alt mr-2\"></i>\n              TÃ©lÃ©charger iCal\n            </Button>\n          </div>\n\n          {/* Change Requests */}\n          {changeRequests.length > 0 && (\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-lg\">\n                  Demandes de changement ({changeRequests.filter((r: any) => r.status === 'pending').length})\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-3\">\n                  {changeRequests.filter((r: any) => r.status === 'pending').map((request: any) => {\n                    const participant = participants.find(p => p.id === request.participantId);\n                    return (\n                      <div key={request.id} className=\"border p-4 rounded-lg\">\n                        <div className=\"flex justify-between items-start\">\n                          <div>\n                            <div className=\"font-medium\">{participant?.name}</div>\n                            <div className=\"text-sm text-gray-600\">\n                              {request.requestType === 'role_change' ? 'Changement de rÃ´le' :\n                                request.requestType === 'seat_change' ? 'Changement de places' : 'Retrait'}\n                            </div>\n                            <div className=\"text-sm\">{request.reason}</div>\n                            {request.requestedValue && (\n                              <div className=\"text-sm text-blue-600\">\n                                Nouvelle valeur: {request.requestedValue}\n                              </div>\n                            )}\n                          </div>\n                          <div className=\"space-x-2\">\n                            <Button\n                              size=\"sm\"\n                              onClick={() => processChangeRequestMutation.mutate({\n                                requestId: request.id,\n                                status: 'approved'\n                              })}\n                              className=\"bg-green-600 hover:bg-green-700\"\n                            >\n                              Approuver\n                            </Button>\n                            <Button\n                              size=\"sm\"\n                              variant=\"outline\"\n                              onClick={() => processChangeRequestMutation.mutate({\n                                requestId: request.id,\n                                status: 'rejected'\n                              })}\n                            >\n                              Rejeter\n                            </Button>\n                          </div>\n                        </div>\n                      </div>\n                    );\n                  })}\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          {/* Participants List */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"text-lg\">Liste des participants</CardTitle>\n            </CardHeader>\n            <CardContent>\n              {isLoading ? (\n                <div className=\"text-center py-4\">Chargement...</div>\n              ) : (\n                <div className=\"space-y-4\">\n                  {/* Drivers */}\n                  {drivers.length > 0 && (\n                    <div>\n                      <h4 className=\"font-medium mb-2\">ğŸš— Conducteurs</h4>\n                      <div className=\"space-y-2\">\n                        {drivers.map(driver => (\n                          <div key={driver.id} className=\"border p-3 rounded-lg flex justify-between items-center\">\n                            <div>\n                              <div className=\"font-medium\">{driver.name}</div>\n                              <div className=\"text-sm text-gray-600\">{driver.email}</div>\n                              <div className=\"text-sm text-blue-600\">\n                                {driver.availableSeats} places disponibles\n                              </div>\n                            </div>\n                            <div className=\"space-x-2\">\n                              <Button\n                                size=\"sm\"\n                                variant=\"outline\"\n                                onClick={() => {\n                                  setSelectedParticipant(driver);\n                                  setNewRole(driver.role);\n                                  setNewSeats(driver.availableSeats?.toString() || \"\");\n                                }}\n                              >\n                                <i className=\"fas fa-edit mr-1\"></i>\n                                Modifier\n                              </Button>\n                              <Button\n                                size=\"sm\"\n                                variant=\"outline\"\n                                className=\"text-red-600 hover:text-red-700\"\n                                onClick={() => removeParticipantMutation.mutate(driver.id)}\n                              >\n                                <i className=\"fas fa-trash mr-1\"></i>\n                                Retirer\n                              </Button>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Passengers */}\n                  {passengers.length > 0 && (\n                    <div>\n                      <h4 className=\"font-medium mb-2\">ğŸ’ Passagers</h4>\n                      <div className=\"grid md:grid-cols-2 gap-2\">\n                        {passengers.map(passenger => (\n                          <div key={passenger.id} className=\"border p-3 rounded-lg flex justify-between items-center\">\n                            <div>\n                              <div className=\"font-medium\">{passenger.name}</div>\n                              <div className=\"text-sm text-gray-600\">{passenger.email}</div>\n                            </div>\n                            <div className=\"space-x-1\">\n                              <Button\n                                size=\"sm\"\n                                variant=\"outline\"\n                                onClick={() => {\n                                  setSelectedParticipant(passenger);\n                                  setNewRole(passenger.role);\n                                  setNewSeats(\"\");\n                                }}\n                              >\n                                <i className=\"fas fa-edit\"></i>\n                              </Button>\n                              <Button\n                                size=\"sm\"\n                                variant=\"outline\"\n                                className=\"text-red-600 hover:text-red-700\"\n                                onClick={() => removeParticipantMutation.mutate(passenger.id)}\n                              >\n                                <i className=\"fas fa-trash\"></i>\n                              </Button>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n\n                  {participants.length === 0 && (\n                    <div className=\"text-center py-8 text-gray-500\">\n                      Aucun participant pour le moment\n                    </div>\n                  )}\n                </div>\n              )}\n            </CardContent>\n          </Card>\n\n          {/* Edit Participant Form */}\n          {selectedParticipant && (\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-lg\">\n                  Modifier {selectedParticipant.name}\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  <div>\n                    <Label htmlFor=\"role\">RÃ´le</Label>\n                    <Select value={newRole} onValueChange={setNewRole}>\n                      <SelectTrigger>\n                        <SelectValue placeholder=\"SÃ©lectionner un rÃ´le\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"passenger\">ğŸ’ Passager</SelectItem>\n                        <SelectItem value=\"driver\">ğŸš— Conducteur</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n\n                  {newRole === \"driver\" && (\n                    <div>\n                      <Label htmlFor=\"seats\">Nombre de places disponibles</Label>\n                      <Input\n                        id=\"seats\"\n                        type=\"number\"\n                        min=\"1\"\n                        max=\"7\"\n                        value={newSeats}\n                        onChange={(e) => setNewSeats(e.target.value)}\n                        placeholder=\"Nombre de places\"\n                      />\n                    </div>\n                  )}\n\n                  <div className=\"flex space-x-2\">\n                    <Button\n                      onClick={handleUpdateParticipant}\n                      disabled={updateParticipantMutation.isPending}\n                    >\n                      {updateParticipantMutation.isPending ? \"Mise Ã  jour...\" : \"Sauvegarder\"}\n                    </Button>\n                    <Button\n                      variant=\"outline\"\n                      onClick={() => {\n                        setSelectedParticipant(null);\n                        setNewRole(\"\");\n                        setNewSeats(\"\");\n                      }}\n                    >\n                      Annuler\n                    </Button>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          )}\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}","size_bytes":20349},"client/src/components/modals/RegistrationModal.tsx":{"content":"import { useState } from \"react\";\nimport { useQueryClient } from \"@tanstack/react-query\";\nimport { useLocation } from \"wouter\";\nimport { useForm, useWatch } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { AddressAutocomplete } from \"@/components/ui/address-autocomplete\";\nimport TermsModal from \"@/components/modals/TermsModal\";\nimport { buildApiUrl, defaultHeaders } from \"@/lib/config\";\n\nconst registrationSchema = z.object({\n  name: z.string().min(1, \"Le nom de l'organisation est requis\"),\n  type: z.enum([\"club\", \"association\", \"company\"], {\n    required_error: \"Veuillez sÃ©lectionner un type d'organisation\",\n  }),\n  subscriptionType: z.enum([\"decouverte\", \"evenementielle\", \"pro_club\", \"pro_pme\", \"pro_entreprise\"], {\n    required_error: \"Veuillez choisir une offre\",\n  }),\n  email: z.string().email(\"Email invalide\"),\n  phone: z.string().optional(),\n  address: z.string().optional(),\n  contactFirstName: z.string().min(1, \"Le prÃ©nom est requis\"),\n  contactLastName: z.string().min(1, \"Le nom est requis\"),\n  sirenNumber: z.string()\n    .optional()\n    .refine((val) => !val || (val.length === 9 && /^\\d{9}$/.test(val)), {\n      message: \"Le numÃ©ro SIREN doit contenir exactement 9 chiffres\"\n    }),\n  password: z.string()\n    .min(8, \"Le mot de passe doit faire au moins 8 caractÃ¨res\")\n    .regex(/[a-z]/, \"Le mot de passe doit contenir au moins une lettre minuscule\")\n    .regex(/[A-Z]/, \"Le mot de passe doit contenir au moins une lettre majuscule\")\n    .regex(/\\d/, \"Le mot de passe doit contenir au moins un chiffre\")\n    .regex(/[!@#$%^&*(),.?\":{}|<>]/, \"Le mot de passe doit contenir au moins un caractÃ¨re spÃ©cial\"),\n  confirmPassword: z.string().min(1, \"Veuillez confirmer le mot de passe\"),\n  acceptTerms: z.boolean().refine((val) => val === true, \"Vous devez accepter les conditions\"),\n}).refine((data) => data.password === data.confirmPassword, {\n  message: \"Les mots de passe ne correspondent pas\",\n  path: [\"confirmPassword\"],\n});\n\ninterface RegistrationModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onShowLogin: () => void;\n}\n\nexport default function RegistrationModal({ isOpen, onClose, onShowLogin }: RegistrationModalProps) {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [, setLocation] = useLocation();\n  const [showTermsModal, setShowTermsModal] = useState(false);\n  const [termsModalType, setTermsModalType] = useState<'terms' | 'privacy'>('terms');\n  const [isLoading, setIsLoading] = useState(false);\n  const { register } = useAuth();\n\n  const form = useForm({\n    resolver: zodResolver(registrationSchema),\n    defaultValues: {\n      name: \"\",\n      type: undefined,\n      subscriptionType: undefined,\n      email: \"\",\n      phone: \"\",\n      address: \"\",\n      contactFirstName: \"\",\n      contactLastName: \"\",\n      sirenNumber: \"\",\n      password: \"\",\n      confirmPassword: \"\",\n      acceptTerms: false,\n    },\n  });\n\n  // Watch the selected organization type and subscription type to keep them highlighted\n  const selectedType = useWatch({\n    control: form.control,\n    name: \"type\"\n  });\n  \n  const selectedPlan = useWatch({\n    control: form.control,\n    name: \"subscriptionType\"\n  });\n\n  const handleTermsClick = (type: 'terms' | 'privacy') => {\n    setTermsModalType(type);\n    setShowTermsModal(true);\n  };\n\n  const onSubmit = async (data: any) => {\n    setIsLoading(true);\n    \n    try {\n      const { confirmPassword, acceptTerms, ...registerData } = data;\n      \n      // Ajouter le plan sÃ©lectionnÃ© aux donnÃ©es d'inscription\n      const registrationPayload = {\n        ...registerData,\n        selectedPlan: data.selectedPlan\n      };\n      \n      // Use proper API request for registration (public endpoint)\n      const response = await fetch(buildApiUrl(\"/api/register\"), {\n        method: \"POST\",\n        headers: defaultHeaders,\n        body: JSON.stringify(registrationPayload),\n        credentials: \"include\",\n      });\n      \n      const result = await response.json();\n      \n      if (!response.ok) {\n        throw new Error(result.message || \"Erreur d'inscription\");\n      }\n      \n      // Si l'inscription nÃ©cessite un paiement\n      if (result.requiresPayment && result.checkoutSession) {\n        // Rediriger vers Stripe Checkout\n        window.location.href = result.checkoutSession.url;\n        return;\n      }\n      \n      // Si c'est une inscription dÃ©couverte (gratuite)\n      if (result.planType === 'decouverte') {\n        // Invalider les requÃªtes pour rafraÃ®chir les donnÃ©es utilisateur\n        queryClient.invalidateQueries({ queryKey: [\"/api/me\"] });\n        \n        // Rediriger vers le dashboard\n        setLocation(\"/dashboard\");\n        onClose();\n        \n        toast({\n          title: \"Inscription rÃ©ussie\",\n          description: \"Votre compte dÃ©couverte a Ã©tÃ© crÃ©Ã© avec succÃ¨s. Vous Ãªtes maintenant connectÃ©.\",\n        });\n      } else {\n        // Cas d'erreur de paiement temporaire\n        queryClient.invalidateQueries({ queryKey: [\"/api/me\"] });\n        setLocation(\"/dashboard\");\n        onClose();\n        \n        toast({\n          title: \"Compte crÃ©Ã©\",\n          description: result.message || \"Votre compte a Ã©tÃ© crÃ©Ã© avec l'offre DÃ©couverte.\",\n          variant: result.paymentError ? \"destructive\" : \"default\",\n        });\n      }\n    } catch (error: any) {\n      console.error(\"Registration error:\", error);\n      toast({\n        title: \"Erreur d'inscription\",\n        description: error.message || \"Une erreur inattendue s'est produite.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const organizationTypes = [\n    {\n      value: \"club\",\n      icon: \"fas fa-users\",\n      title: \"Club sportif\",\n      description: \"Association sportive locale\",\n      color: \"text-primary\",\n    },\n    {\n      value: \"association\",\n      icon: \"fas fa-heart\",\n      title: \"Association\",\n      description: \"Organisation Ã  but non lucratif\",\n      color: \"text-secondary\",\n    },\n    {\n      value: \"company\",\n      icon: \"fas fa-building\",\n      title: \"Entreprise\",\n      description: \"SociÃ©tÃ© avec activitÃ©s sportives\",\n      color: \"text-accent\",\n    },\n  ];\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"sm:max-w-4xl lg:max-w-6xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle className=\"text-2xl font-bold text-gray-900\">CrÃ©er un compte</DialogTitle>\n        </DialogHeader>\n\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n            {/* Organization Type Selection */}\n            <div>\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Type d'organisation</h3>\n              <FormField\n                control={form.control}\n                name=\"type\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormControl>\n                      <RadioGroup\n                        onValueChange={field.onChange}\n                        defaultValue={field.value}\n                        className=\"grid md:grid-cols-3 gap-4\"\n                      >\n                        {organizationTypes.map((type) => (\n                          <FormItem key={type.value}>\n                            <FormControl>\n                              <RadioGroupItem\n                                value={type.value}\n                                id={type.value}\n                                className=\"sr-only peer\"\n                              />\n                            </FormControl>\n                            <Label\n                              htmlFor={type.value}\n                              className={`relative cursor-pointer flex flex-col items-center p-4 border-2 rounded-lg transition-all duration-200 ${\n                                selectedType === type.value\n                                  ? 'border-primary bg-primary/5 shadow-md scale-[1.02]'\n                                  : 'border-gray-200 hover:border-primary/50 hover:bg-gray-50'\n                              }`}\n                            >\n                              <i className={`${type.icon} text-2xl ${type.color} mb-2`}></i>\n                              <div className=\"font-semibold text-gray-900\">{type.title}</div>\n                              <div className=\"text-sm text-gray-600 text-center\">{type.description}</div>\n                            </Label>\n                          </FormItem>\n                        ))}\n                      </RadioGroup>\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            {/* Subscription Plan Selection */}\n            <div>\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Choisissez votre offre</h3>\n              <FormField\n                control={form.control}\n                name=\"subscriptionType\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormControl>\n                      <RadioGroup\n                        onValueChange={field.onChange}\n                        defaultValue={field.value}\n                        className=\"grid 2xl:grid-cols-5 xl:grid-cols-3 lg:grid-cols-2 md:grid-cols-2 gap-8 lg:gap-10\"\n                      >\n                        {/* Offre DÃ©couverte */}\n                        <FormItem>\n                          <FormControl>\n                            <RadioGroupItem\n                              value=\"decouverte\"\n                              id=\"decouverte\"\n                              className=\"sr-only peer\"\n                            />\n                          </FormControl>\n                          <Label\n                            htmlFor=\"decouverte\"\n                            className={`relative cursor-pointer block p-8 lg:p-6 xl:p-8 border-2 rounded-xl transition-all duration-200 ${\n                              selectedPlan === \"decouverte\"\n                                ? 'border-green-500 bg-green-50 shadow-lg scale-[1.02] dark:bg-green-950 dark:border-green-400'\n                                : 'border-gray-200 hover:border-green-300 hover:bg-gray-50 dark:border-gray-700 dark:hover:border-green-400 dark:hover:bg-gray-800'\n                            }`}\n                          >\n                            <Card className=\"border-0 shadow-none bg-transparent\">\n                              <CardHeader className=\"pb-3\">\n                                <div className=\"flex items-center justify-between\">\n                                  <CardTitle className=\"text-xl font-bold text-gray-900 dark:text-gray-100\">\n                                    ğŸš€ DÃ©couverte\n                                  </CardTitle>\n                                  <Badge variant=\"secondary\" className=\"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100\">\n                                    GRATUIT\n                                  </Badge>\n                                </div>\n                                <CardDescription className=\"text-gray-600 dark:text-gray-300\">\n                                  Parfait pour tester notre plateforme\n                                </CardDescription>\n                              </CardHeader>\n                              <CardContent className=\"pt-0\">\n                                <div className=\"space-y-3\">\n                                  <div className=\"flex items-center text-sm\">\n                                    <i className=\"fas fa-check text-green-500 mr-2\"></i>\n                                    <span>1 Ã©vÃ©nement maximum</span>\n                                  </div>\n                                  <div className=\"flex items-center text-sm\">\n                                    <i className=\"fas fa-check text-green-500 mr-2\"></i>\n                                    <span>Jusqu'Ã  20 invitations</span>\n                                  </div>\n                                  <div className=\"flex items-center text-sm\">\n                                    <i className=\"fas fa-check text-green-500 mr-2\"></i>\n                                    <span>Gestion du covoiturage</span>\n                                  </div>\n                                  <div className=\"flex items-center text-sm\">\n                                    <i className=\"fas fa-check text-green-500 mr-2\"></i>\n                                    <span>Support par email</span>\n                                  </div>\n                                </div>\n                              </CardContent>\n                            </Card>\n                          </Label>\n                        </FormItem>\n\n                        {/* Offre Ã‰vÃ©nementielle */}\n                        <FormItem>\n                          <FormControl>\n                            <RadioGroupItem\n                              value=\"evenementielle\"\n                              id=\"evenementielle\"\n                              className=\"sr-only peer\"\n                            />\n                          </FormControl>\n                          <Label\n                            htmlFor=\"evenementielle\"\n                            className={`relative cursor-pointer block p-8 lg:p-6 xl:p-8 border-2 rounded-xl transition-all duration-200 ${\n                              selectedPlan === \"evenementielle\"\n                                ? 'border-orange-500 bg-orange-50 shadow-lg scale-[1.02] dark:bg-orange-950 dark:border-orange-400'\n                                : 'border-gray-200 hover:border-orange-300 hover:bg-gray-50 dark:border-gray-700 dark:hover:border-orange-400 dark:hover:bg-gray-800'\n                            }`}\n                          >\n                            <Card className=\"border-0 shadow-none bg-transparent\">\n                              <CardHeader className=\"pb-3\">\n                                <div className=\"flex items-center justify-between\">\n                                  <CardTitle className=\"text-xl font-bold text-gray-900 dark:text-gray-100\">\n                                    ğŸ¯ Ã‰vÃ©nementielle\n                                  </CardTitle>\n                                  <Badge className=\"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-100\">\n                                    POPULAIRE\n                                  </Badge>\n                                </div>\n                                <CardDescription className=\"text-gray-600 dark:text-gray-300\">\n                                  IdÃ©al pour les organisateurs occasionnels\n                                </CardDescription>\n                              </CardHeader>\n                              <CardContent className=\"pt-0\">\n                                <div className=\"mb-4\">\n                                  <div className=\"text-2xl font-bold text-gray-900 dark:text-gray-100\">\n                                    15â‚¬ - 150â‚¬\n                                    <span className=\"text-sm font-normal text-gray-500 dark:text-gray-400\">/pack</span>\n                                  </div>\n                                </div>\n                                <div className=\"space-y-3\">\n                                  <div className=\"flex items-center text-sm\">\n                                    <i className=\"fas fa-check text-orange-500 mr-2\"></i>\n                                    <span>1 Ã©vÃ©nement (15â‚¬) ou 10 Ã©vÃ©nements (150â‚¬)</span>\n                                  </div>\n                                  <div className=\"flex items-center text-sm\">\n                                    <i className=\"fas fa-check text-orange-500 mr-2\"></i>\n                                    <span>Invitations illimitÃ©es</span>\n                                  </div>\n                                  <div className=\"flex items-center text-sm\">\n                                    <i className=\"fas fa-check text-orange-500 mr-2\"></i>\n                                    <span>Valable 12 mois</span>\n                                  </div>\n                                  <div className=\"flex items-center text-sm\">\n                                    <i className=\"fas fa-check text-orange-500 mr-2\"></i>\n                                    <span>Support prioritaire</span>\n                                  </div>\n                                </div>\n                              </CardContent>\n                            </Card>\n                          </Label>\n                        </FormItem>\n\n                        {/* Formule Pro Club */}\n                        <FormItem>\n                          <FormControl>\n                            <RadioGroupItem\n                              value=\"pro_club\"\n                              id=\"pro_club\"\n                              className=\"sr-only peer\"\n                            />\n                          </FormControl>\n                          <Label\n                            htmlFor=\"pro_club\"\n                            className={`relative cursor-pointer block p-8 lg:p-6 xl:p-8 border-2 rounded-xl transition-all duration-200 ${\n                              selectedPlan === \"pro_club\"\n                                ? 'border-blue-500 bg-blue-50 shadow-lg scale-[1.02] dark:bg-blue-950 dark:border-blue-400'\n                                : 'border-gray-200 hover:border-blue-300 hover:bg-gray-50 dark:border-gray-700 dark:hover:border-blue-400 dark:hover:bg-gray-800'\n                            }`}\n                          >\n                            <Card className=\"border-0 shadow-none bg-transparent\">\n                              <CardHeader className=\"pb-3\">\n                                <div className=\"flex items-center justify-between\">\n                                  <CardTitle className=\"text-xl font-bold text-gray-900 dark:text-gray-100\">\n                                    ğŸ† Clubs & Associations\n                                  </CardTitle>\n                                  <Badge className=\"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100\">\n                                    PRO\n                                  </Badge>\n                                </div>\n                                <CardDescription className=\"text-gray-600 dark:text-gray-300\">\n                                  Pour les clubs sportifs et associations\n                                </CardDescription>\n                              </CardHeader>\n                              <CardContent className=\"pt-0\">\n                                <div className=\"mb-4\">\n                                  <div className=\"text-2xl font-bold text-gray-900 dark:text-gray-100\">\n                                    19,99â‚¬\n                                    <span className=\"text-sm font-normal text-gray-500 dark:text-gray-400\">/mois</span>\n                                  </div>\n                                </div>\n                                <div className=\"space-y-3\">\n                                  <div className=\"flex items-center text-sm\">\n                                    <i className=\"fas fa-check text-blue-500 mr-2\"></i>\n                                    <span><strong>Ã‰vÃ©nements illimitÃ©s</strong></span>\n                                  </div>\n                                  <div className=\"flex items-center text-sm\">\n                                    <i className=\"fas fa-check text-blue-500 mr-2\"></i>\n                                    <span><strong>Invitations illimitÃ©es</strong></span>\n                                  </div>\n                                  <div className=\"flex items-center text-sm\">\n                                    <i className=\"fas fa-check text-blue-500 mr-2\"></i>\n                                    <span>Branding personnalisÃ©</span>\n                                  </div>\n                                  <div className=\"flex items-center text-sm\">\n                                    <i className=\"fas fa-check text-blue-500 mr-2\"></i>\n                                    <span>API d'intÃ©gration</span>\n                                  </div>\n                                </div>\n                              </CardContent>\n                            </Card>\n                          </Label>\n                        </FormItem>\n\n                        {/* Formule Pro PME */}\n                        <FormItem>\n                          <FormControl>\n                            <RadioGroupItem\n                              value=\"pro_pme\"\n                              id=\"pro_pme\"\n                              className=\"sr-only peer\"\n                            />\n                          </FormControl>\n                          <Label\n                            htmlFor=\"pro_pme\"\n                            className={`relative cursor-pointer block p-8 lg:p-6 xl:p-8 border-2 rounded-xl transition-all duration-200 ${\n                              selectedPlan === \"pro_pme\"\n                                ? 'border-purple-500 bg-purple-50 shadow-lg scale-[1.02] dark:bg-purple-950 dark:border-purple-400'\n                                : 'border-gray-200 hover:border-purple-300 hover:bg-gray-50 dark:border-gray-700 dark:hover:border-purple-400 dark:hover:bg-gray-800'\n                            }`}\n                          >\n                            <Card className=\"border-0 shadow-none bg-transparent\">\n                              <CardHeader className=\"pb-3\">\n                                <div className=\"flex items-center justify-between\">\n                                  <CardTitle className=\"text-xl font-bold text-gray-900 dark:text-gray-100\">\n                                    ğŸ¢ PME\n                                  </CardTitle>\n                                  <Badge className=\"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-100\">\n                                    BUSINESS\n                                  </Badge>\n                                </div>\n                                <CardDescription className=\"text-gray-600 dark:text-gray-300\">\n                                  IdÃ©al pour les petites et moyennes entreprises\n                                </CardDescription>\n                              </CardHeader>\n                              <CardContent className=\"pt-0\">\n                                <div className=\"mb-4\">\n                                  <div className=\"text-2xl font-bold text-gray-900 dark:text-gray-100\">\n                                    49â‚¬\n                                    <span className=\"text-sm font-normal text-gray-500 dark:text-gray-400\">/mois</span>\n                                  </div>\n                                </div>\n                                <div className=\"space-y-3\">\n                                  <div className=\"flex items-center text-sm\">\n                                    <i className=\"fas fa-check text-purple-500 mr-2\"></i>\n                                    <span>Tout de Clubs & Associations</span>\n                                  </div>\n                                  <div className=\"flex items-center text-sm\">\n                                    <i className=\"fas fa-check text-purple-500 mr-2\"></i>\n                                    <span>Multi-utilisateurs (5 admins)</span>\n                                  </div>\n                                  <div className=\"flex items-center text-sm\">\n                                    <i className=\"fas fa-check text-purple-500 mr-2\"></i>\n                                    <span>Support tÃ©lÃ©phonique</span>\n                                  </div>\n                                  <div className=\"flex items-center text-sm\">\n                                    <i className=\"fas fa-check text-purple-500 mr-2\"></i>\n                                    <span>Formation personnalisÃ©e</span>\n                                  </div>\n                                </div>\n                              </CardContent>\n                            </Card>\n                          </Label>\n                        </FormItem>\n\n                        {/* Formule Pro Entreprise */}\n                        <FormItem>\n                          <FormControl>\n                            <RadioGroupItem\n                              value=\"pro_entreprise\"\n                              id=\"pro_entreprise\"\n                              className=\"sr-only peer\"\n                            />\n                          </FormControl>\n                          <Label\n                            htmlFor=\"pro_entreprise\"\n                            className={`relative cursor-pointer block p-8 lg:p-6 xl:p-8 border-2 rounded-xl transition-all duration-200 ${\n                              selectedPlan === \"pro_entreprise\"\n                                ? 'border-yellow-500 bg-yellow-50 shadow-lg scale-[1.02] dark:bg-yellow-950 dark:border-yellow-400'\n                                : 'border-gray-200 hover:border-yellow-300 hover:bg-gray-50 dark:border-gray-700 dark:hover:border-yellow-400 dark:hover:bg-gray-800'\n                            }`}\n                          >\n                            <Card className=\"border-0 shadow-none bg-transparent\">\n                              <CardHeader className=\"pb-3\">\n                                <div className=\"flex items-center justify-between\">\n                                  <CardTitle className=\"text-xl font-bold text-gray-900 dark:text-gray-100\">\n                                    ğŸŒŸ Grandes Entreprises\n                                  </CardTitle>\n                                  <Badge className=\"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-100\">\n                                    ENTERPRISE\n                                  </Badge>\n                                </div>\n                                <CardDescription className=\"text-gray-600 dark:text-gray-300\">\n                                  Solution complÃ¨te pour grandes entreprises\n                                </CardDescription>\n                              </CardHeader>\n                              <CardContent className=\"pt-0\">\n                                <div className=\"mb-4\">\n                                  <div className=\"text-2xl font-bold text-gray-900 dark:text-gray-100\">\n                                    99â‚¬\n                                    <span className=\"text-sm font-normal text-gray-500 dark:text-gray-400\">/mois</span>\n                                  </div>\n                                </div>\n                                <div className=\"space-y-3\">\n                                  <div className=\"flex items-center text-sm\">\n                                    <i className=\"fas fa-check text-yellow-500 mr-2\"></i>\n                                    <span>Tout de PME</span>\n                                  </div>\n                                  <div className=\"flex items-center text-sm\">\n                                    <i className=\"fas fa-check text-yellow-500 mr-2\"></i>\n                                    <span>Multi-utilisateurs illimitÃ©s</span>\n                                  </div>\n                                  <div className=\"flex items-center text-sm\">\n                                    <i className=\"fas fa-check text-yellow-500 mr-2\"></i>\n                                    <span>Support 24/7</span>\n                                  </div>\n                                  <div className=\"flex items-center text-sm\">\n                                    <i className=\"fas fa-check text-yellow-500 mr-2\"></i>\n                                    <span>Account Manager dÃ©diÃ©</span>\n                                  </div>\n                                </div>\n                              </CardContent>\n                            </Card>\n                          </Label>\n                        </FormItem>\n                      </RadioGroup>\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              \n              {selectedPlan && selectedPlan !== \"decouverte\" && (\n                <div className=\"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg dark:bg-blue-950 dark:border-blue-800\">\n                  <div className=\"flex items-start space-x-2\">\n                    <i className=\"fas fa-info-circle text-blue-500 mt-0.5\"></i>\n                    <div className=\"text-sm text-blue-700 dark:text-blue-300\">\n                      <p className=\"font-medium\">Configuration du paiement</p>\n                      <p>AprÃ¨s la crÃ©ation de votre compte, vous serez redirigÃ© vers la page de configuration du paiement sÃ©curisÃ© via Stripe pour activer votre abonnement.</p>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {/* Basic Info */}\n            <div className=\"grid md:grid-cols-2 gap-6\">\n              <FormField\n                control={form.control}\n                name=\"name\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Nom de l'organisation</FormLabel>\n                    <FormControl>\n                      <Input {...field} placeholder=\"FC Barcelona\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              \n              <FormField\n                control={form.control}\n                name=\"email\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Email de contact</FormLabel>\n                    <FormControl>\n                      <Input {...field} type=\"email\" placeholder=\"contact@fcbarcelona.fr\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <div className=\"grid md:grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"contactFirstName\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>PrÃ©nom</FormLabel>\n                    <FormControl>\n                      <Input {...field} placeholder=\"Jean\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              \n              <FormField\n                control={form.control}\n                name=\"contactLastName\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Nom</FormLabel>\n                    <FormControl>\n                      <Input {...field} placeholder=\"Dupont\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <div className=\"grid md:grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"phone\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>TÃ©lÃ©phone (optionnel)</FormLabel>\n                    <FormControl>\n                      <Input {...field} type=\"tel\" placeholder=\"06 12 34 56 78\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"sirenNumber\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>NumÃ©ro SIREN (optionnel)</FormLabel>\n                    <FormControl>\n                      <Input \n                        {...field} \n                        type=\"text\" \n                        placeholder=\"123456789\" \n                        maxLength={9}\n                        onInput={(e) => {\n                          // Only allow digits\n                          const target = e.target as HTMLInputElement;\n                          target.value = target.value.replace(/\\D/g, '');\n                        }}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <FormField\n              control={form.control}\n              name=\"address\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Adresse (optionnel)</FormLabel>\n                  <FormControl>\n                    <AddressAutocomplete\n                      value={field.value || \"\"}\n                      onChange={field.onChange}\n                      placeholder=\"Commencez Ã  taper votre adresse...\"\n                      className=\"w-full\"\n                    />\n                  </FormControl>\n                  <div className=\"text-xs text-gray-500 mt-1\">\n                    ğŸ’¡ Tapez au moins 3 caractÃ¨res pour voir les suggestions d'adresses franÃ§aises\n                  </div>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"grid md:grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"password\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Mot de passe</FormLabel>\n                    <FormControl>\n                      <Input {...field} type=\"password\" placeholder=\"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              \n              <FormField\n                control={form.control}\n                name=\"confirmPassword\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Confirmer le mot de passe</FormLabel>\n                    <FormControl>\n                      <Input {...field} type=\"password\" placeholder=\"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <FormField\n              control={form.control}\n              name=\"acceptTerms\"\n              render={({ field }) => (\n                <FormItem className=\"flex flex-row items-start space-x-3 space-y-0\">\n                  <FormControl>\n                    <Checkbox\n                      checked={field.value}\n                      onCheckedChange={field.onChange}\n                      className=\"mt-1\"\n                    />\n                  </FormControl>\n                  <div className=\"space-y-1 leading-none\">\n                    <FormLabel className=\"text-sm text-gray-600 cursor-pointer\">\n                      J'accepte les{\" \"}\n                      <Button \n                        type=\"button\"\n                        variant=\"link\" \n                        className=\"p-0 h-auto text-primary hover:text-blue-700 underline\"\n                        onClick={() => handleTermsClick('terms')}\n                      >\n                        conditions d'utilisation\n                      </Button>{\" \"}\n                      et la{\" \"}\n                      <Button \n                        type=\"button\"\n                        variant=\"link\" \n                        className=\"p-0 h-auto text-primary hover:text-blue-700 underline\"\n                        onClick={() => handleTermsClick('privacy')}\n                      >\n                        politique de confidentialitÃ©\n                      </Button>\n                    </FormLabel>\n                    <p className=\"text-xs text-gray-500\">\n                      * Requis pour crÃ©er un compte\n                    </p>\n                  </div>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <Button\n              type=\"submit\"\n              className=\"w-full bg-primary hover:bg-blue-700\"\n              disabled={isLoading}\n            >\n              {isLoading ? (\n                <>\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                  CrÃ©ation du compte...\n                </>\n              ) : (\n                \"CrÃ©er mon compte\"\n              )}\n            </Button>\n          </form>\n        </Form>\n\n        <div className=\"text-center\">\n          <p className=\"text-gray-600\">\n            DÃ©jÃ  un compte ?{\" \"}\n            <Button \n              variant=\"link\" \n              onClick={onShowLogin} \n              className=\"text-primary hover:text-blue-700 p-0\"\n              disabled={isLoading}\n            >\n              Se connecter\n            </Button>\n          </p>\n        </div>\n      </DialogContent>\n\n      {/* Terms and Privacy Modal */}\n      <TermsModal\n        isOpen={showTermsModal}\n        onClose={() => setShowTermsModal(false)}\n        type={termsModalType}\n      />\n    </Dialog>\n  );\n}\n","size_bytes":38262},"client/src/components/modals/TermsModal.tsx":{"content":"import { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\n\ninterface TermsModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  type: 'terms' | 'privacy';\n}\n\nexport default function TermsModal({ isOpen, onClose, type }: TermsModalProps) {\n  const title = type === 'terms' ? \"Conditions d'utilisation\" : \"Politique de confidentialitÃ©\";\n\n  const termsContent = (\n    <div className=\"space-y-6 text-sm\">\n      <section>\n        <h3 className=\"text-lg font-semibold mb-3\">1. Objet</h3>\n        <p className=\"text-gray-600\">\n          Les prÃ©sentes conditions gÃ©nÃ©rales d'utilisation (CGU) rÃ©gissent l'utilisation de la plateforme \n          TEAM MOVE, une application de covoiturage dÃ©diÃ©e aux Ã©vÃ©nements sportifs.\n        </p>\n      </section>\n\n      <section>\n        <h3 className=\"text-lg font-semibold mb-3\">2. DÃ©finitions</h3>\n        <ul className=\"space-y-2 text-gray-600\">\n          <li><strong>Plateforme :</strong> L'application web TEAM MOVE accessible via navigateur</li>\n          <li><strong>Utilisateur :</strong> Toute personne physique ou morale utilisant la plateforme</li>\n          <li><strong>Organisation :</strong> Club, association ou entreprise crÃ©ant des Ã©vÃ©nements</li>\n          <li><strong>Ã‰vÃ©nement :</strong> ActivitÃ© sportive organisÃ©e via la plateforme</li>\n        </ul>\n      </section>\n\n      <section>\n        <h3 className=\"text-lg font-semibold mb-3\">3. Inscription et compte</h3>\n        <div className=\"space-y-2 text-gray-600\">\n          <p>\n            L'inscription sur la plateforme est rÃ©servÃ©e aux organisations (clubs, associations, entreprises) \n            souhaitant organiser des Ã©vÃ©nements sportifs avec systÃ¨me de covoiturage.\n          </p>\n          <p>\n            L'utilisateur s'engage Ã  fournir des informations exactes et Ã  maintenir ses donnÃ©es Ã  jour.\n          </p>\n          <p>\n            Chaque organisation est responsable de la sÃ©curitÃ© de ses identifiants de connexion.\n          </p>\n        </div>\n      </section>\n\n      <section>\n        <h3 className=\"text-lg font-semibold mb-3\">4. Utilisation de la plateforme</h3>\n        <div className=\"space-y-2 text-gray-600\">\n          <p>La plateforme permet aux organisations de :</p>\n          <ul className=\"list-disc list-inside ml-4 space-y-1\">\n            <li>CrÃ©er et gÃ©rer des Ã©vÃ©nements sportifs</li>\n            <li>Inviter des participants par email</li>\n            <li>Organiser le covoiturage pour les Ã©vÃ©nements</li>\n            <li>Communiquer avec les participants</li>\n            <li>GÃ©nÃ©rer des rapports et statistiques</li>\n          </ul>\n        </div>\n      </section>\n\n      <section>\n        <h3 className=\"text-lg font-semibold mb-3\">5. ResponsabilitÃ©s</h3>\n        <div className=\"space-y-2 text-gray-600\">\n          <p>\n            <strong>L'organisation :</strong> est responsable des Ã©vÃ©nements qu'elle organise, \n            de la vÃ©racitÃ© des informations communiquÃ©es et du respect de la rÃ©glementation en vigueur.\n          </p>\n          <p>\n            <strong>TEAM MOVE :</strong> fournit uniquement les outils techniques permettant l'organisation. \n            La plateforme ne saurait Ãªtre tenue responsable des incidents lors des trajets ou Ã©vÃ©nements.\n          </p>\n        </div>\n      </section>\n\n      <section>\n        <h3 className=\"text-lg font-semibold mb-3\">6. DonnÃ©es personnelles</h3>\n        <p className=\"text-gray-600\">\n          Les donnÃ©es collectÃ©es sont nÃ©cessaires au fonctionnement de la plateforme. \n          Consulter notre politique de confidentialitÃ© pour plus d'informations.\n        </p>\n      </section>\n\n      <section>\n        <h3 className=\"text-lg font-semibold mb-3\">7. PropriÃ©tÃ© intellectuelle</h3>\n        <p className=\"text-gray-600\">\n          Tous les Ã©lÃ©ments de la plateforme (design, code, marques, etc.) sont protÃ©gÃ©s par \n          le droit de la propriÃ©tÃ© intellectuelle.\n        </p>\n      </section>\n\n      <section>\n        <h3 className=\"text-lg font-semibold mb-3\">8. Modification des CGU</h3>\n        <p className=\"text-gray-600\">\n          TEAM MOVE se rÃ©serve le droit de modifier les prÃ©sentes CGU. Les utilisateurs seront \n          informÃ©s des modifications par email ou via la plateforme.\n        </p>\n      </section>\n\n      <section>\n        <h3 className=\"text-lg font-semibold mb-3\">9. Droit applicable</h3>\n        <p className=\"text-gray-600\">\n          Les prÃ©sentes CGU sont rÃ©gies par le droit franÃ§ais. Tout litige sera soumis aux \n          tribunaux compÃ©tents de Paris.\n        </p>\n      </section>\n\n      <section className=\"bg-gray-50 p-4 rounded-lg\">\n        <p className=\"text-sm text-gray-500\">\n          <strong>DerniÃ¨re mise Ã  jour :</strong> {new Date().toLocaleDateString('fr-FR')}\n        </p>\n      </section>\n    </div>\n  );\n\n  const privacyContent = (\n    <div className=\"space-y-6 text-sm\">\n      <section>\n        <h3 className=\"text-lg font-semibold mb-3\">1. Collecte des donnÃ©es</h3>\n        <div className=\"space-y-2 text-gray-600\">\n          <p>Nous collectons les donnÃ©es suivantes :</p>\n          <ul className=\"list-disc list-inside ml-4 space-y-1\">\n            <li>Informations d'inscription (nom, email, tÃ©lÃ©phone, adresse)</li>\n            <li>DonnÃ©es d'utilisation de la plateforme</li>\n            <li>Informations sur les Ã©vÃ©nements crÃ©Ã©s</li>\n            <li>Historique des communications</li>\n          </ul>\n        </div>\n      </section>\n\n      <section>\n        <h3 className=\"text-lg font-semibold mb-3\">2. Utilisation des donnÃ©es</h3>\n        <div className=\"space-y-2 text-gray-600\">\n          <p>Vos donnÃ©es sont utilisÃ©es pour :</p>\n          <ul className=\"list-disc list-inside ml-4 space-y-1\">\n            <li>Fournir les services de la plateforme</li>\n            <li>Envoyer les invitations et notifications</li>\n            <li>AmÃ©liorer nos services</li>\n            <li>Respecter nos obligations lÃ©gales</li>\n          </ul>\n        </div>\n      </section>\n\n      <section>\n        <h3 className=\"text-lg font-semibold mb-3\">3. Partage des donnÃ©es</h3>\n        <p className=\"text-gray-600\">\n          Nous ne vendons pas vos donnÃ©es. Elles peuvent Ãªtre partagÃ©es uniquement avec :\n        </p>\n        <ul className=\"list-disc list-inside ml-4 space-y-1 text-gray-600\">\n          <li>Les participants aux Ã©vÃ©nements (coordonnÃ©es de contact)</li>\n          <li>Nos prestataires techniques (hÃ©bergement, email)</li>\n          <li>Les autoritÃ©s en cas d'obligation lÃ©gale</li>\n        </ul>\n      </section>\n\n      <section>\n        <h3 className=\"text-lg font-semibold mb-3\">4. Vos droits</h3>\n        <div className=\"space-y-2 text-gray-600\">\n          <p>ConformÃ©ment au RGPD, vous disposez des droits suivants :</p>\n          <ul className=\"list-disc list-inside ml-4 space-y-1\">\n            <li>Droit d'accÃ¨s Ã  vos donnÃ©es</li>\n            <li>Droit de rectification</li>\n            <li>Droit Ã  l'effacement</li>\n            <li>Droit Ã  la portabilitÃ©</li>\n            <li>Droit d'opposition</li>\n          </ul>\n          <p className=\"mt-2\">\n            Pour exercer ces droits, contactez-nous Ã  : <strong>privacy@teammove.fr</strong>\n          </p>\n        </div>\n      </section>\n\n      <section>\n        <h3 className=\"text-lg font-semibold mb-3\">5. SÃ©curitÃ©</h3>\n        <p className=\"text-gray-600\">\n          Nous mettons en Å“uvre des mesures de sÃ©curitÃ© techniques et organisationnelles \n          pour protÃ©ger vos donnÃ©es contre tout accÃ¨s non autorisÃ©, altÃ©ration ou destruction.\n        </p>\n      </section>\n\n      <section>\n        <h3 className=\"text-lg font-semibold mb-3\">6. Conservation</h3>\n        <p className=\"text-gray-600\">\n          Vos donnÃ©es sont conservÃ©es pendant la durÃ©e nÃ©cessaire aux finalitÃ©s pour lesquelles \n          elles ont Ã©tÃ© collectÃ©es, dans le respect de la rÃ©glementation en vigueur.\n        </p>\n      </section>\n\n      <section>\n        <h3 className=\"text-lg font-semibold mb-3\">7. Cookies</h3>\n        <p className=\"text-gray-600\">\n          Notre site utilise des cookies techniques nÃ©cessaires au fonctionnement de la plateforme. \n          Aucun cookie publicitaire ou de traÃ§age n'est utilisÃ©.\n        </p>\n      </section>\n\n      <section className=\"bg-gray-50 p-4 rounded-lg\">\n        <p className=\"text-sm text-gray-500\">\n          <strong>Contact DPO :</strong> privacy@teammove.fr<br/>\n          <strong>DerniÃ¨re mise Ã  jour :</strong> {new Date().toLocaleDateString('fr-FR')}\n        </p>\n      </section>\n    </div>\n  );\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"sm:max-w-4xl max-h-[90vh]\">\n        <DialogHeader>\n          <DialogTitle className=\"text-2xl font-bold text-gray-900\">\n            {title}\n          </DialogTitle>\n        </DialogHeader>\n\n        <ScrollArea className=\"max-h-[70vh] pr-4\">\n          {type === 'terms' ? termsContent : privacyContent}\n        </ScrollArea>\n\n        <div className=\"flex justify-end pt-4 border-t\">\n          <Button onClick={onClose} variant=\"outline\">\n            Fermer\n          </Button>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}","size_bytes":9356},"client/src/components/navigation/AdminSidebar.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\n\ninterface AdminSidebarProps {\n  activeSection: string;\n  onSectionChange: (section: string) => void;\n}\n\nexport default function AdminSidebar({ activeSection, onSectionChange }: AdminSidebarProps) {\n  const menuItems = [\n    {\n      id: \"overview\",\n      name: \"Vue d'ensemble\",\n      icon: \"fas fa-chart-pie\",\n      description: \"Statistiques gÃ©nÃ©rales\"\n    },\n    {\n      id: \"organizations\",\n      name: \"Organisations\",\n      icon: \"fas fa-building\",\n      description: \"GÃ©rer les organisations\"\n    },\n    {\n      id: \"support\",\n      name: \"Support Client\",\n      icon: \"fas fa-headset\",\n      description: \"Messages des utilisateurs\"\n    }\n  ];\n\n  return (\n    <div className=\"w-full lg:w-80\">\n      <Card>\n        <CardContent className=\"p-0\">\n          <div className=\"p-6 border-b border-gray-200\">\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center\">\n                <i className=\"fas fa-shield-alt text-red-600 text-xl\"></i>\n              </div>\n              <div>\n                <h2 className=\"text-xl font-bold text-gray-900\">Administration</h2>\n                <p className=\"text-gray-600 text-sm\">Panneau de contrÃ´le</p>\n              </div>\n            </div>\n          </div>\n\n          <nav className=\"p-2\">\n            {menuItems.map((item) => (\n              <Button\n                key={item.id}\n                variant={activeSection === item.id ? \"default\" : \"ghost\"}\n                className={`w-full justify-start mb-1 h-auto p-4 ${\n                  activeSection === item.id \n                    ? \"bg-red-50 text-red-700 hover:bg-red-100\" \n                    : \"text-gray-700 hover:bg-gray-50\"\n                }`}\n                onClick={() => onSectionChange(item.id)}\n              >\n                <div className=\"flex items-center space-x-3 w-full\">\n                  <i className={`${item.icon} text-lg`}></i>\n                  <div className=\"text-left\">\n                    <p className=\"font-medium\">{item.name}</p>\n                    <p className=\"text-xs opacity-70\">{item.description}</p>\n                  </div>\n                </div>\n              </Button>\n            ))}\n          </nav>\n\n          <div className=\"p-4 border-t border-gray-200 bg-red-50\">\n            <div className=\"text-center\">\n              <i className=\"fas fa-user-shield text-red-600 text-2xl mb-2\"></i>\n              <p className=\"text-sm font-medium text-red-700\">Mode Administrateur</p>\n              <p className=\"text-xs text-red-600\">AccÃ¨s complet au systÃ¨me</p>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":2801},"client/src/components/navigation/DashboardSidebar.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { cn } from \"@/lib/utils\";\n\ninterface DashboardSidebarProps {\n  activeSection: string;\n  onSectionChange: (section: string) => void;\n}\n\nexport default function DashboardSidebar({ activeSection, onSectionChange }: DashboardSidebarProps) {\n  const sections = [\n    { id: \"overview\", icon: \"fas fa-chart-line\", label: \"Vue d'ensemble\" },\n    { id: \"events\", icon: \"fas fa-calendar-alt\", label: \"Mes Ã©vÃ©nements\" },\n    { id: \"messages\", icon: \"fas fa-comments\", label: \"Messages\", badge: 3 },\n    { id: \"support\", icon: \"fas fa-headset\", label: \"Support\" },\n    { id: \"profile\", icon: \"fas fa-user\", label: \"Mon profil\" },\n  ];\n\n  return (\n    <div className=\"lg:w-64 flex-shrink-0\">\n      <div className=\"bg-white rounded-xl shadow-sm p-6 sticky top-24\">\n        <nav className=\"space-y-2\">\n          {sections.map((section) => (\n            <Button\n              key={section.id}\n              variant={activeSection === section.id ? \"default\" : \"ghost\"}\n              className={cn(\n                \"w-full justify-start text-left\",\n                activeSection === section.id \n                  ? \"bg-primary text-white\" \n                  : \"text-gray-600 hover:bg-gray-100\"\n              )}\n              onClick={() => onSectionChange(section.id)}\n            >\n              <i className={`${section.icon} mr-2`}></i>\n              {section.label}\n              {section.badge && (\n                <span className=\"ml-auto bg-red-500 text-white text-xs px-2 py-1 rounded-full\">\n                  {section.badge}\n                </span>\n              )}\n            </Button>\n          ))}\n        </nav>\n      </div>\n    </div>\n  );\n}\n","size_bytes":1698},"client/src/components/navigation/Navbar.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Sheet, SheetContent, SheetTrigger, SheetHeader, SheetTitle } from \"@/components/ui/sheet\";\nimport { Menu, X } from \"lucide-react\";\nimport NotificationCenter from \"@/components/ui/notification-center\";\nimport { ModernThemeToggle } from \"@/components/ui/modern-theme-toggle\";\n\ninterface NavbarProps {\n  isAuthenticated?: boolean;\n  organization?: any;\n  onShowLogin?: () => void;\n  onShowRegistration?: () => void;\n  onLogout?: () => void;\n}\n\nexport default function Navbar({ \n  isAuthenticated, \n  organization, \n  onShowLogin, \n  onShowRegistration, \n  onLogout \n}: NavbarProps) {\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\n\n  const closeMobileMenu = () => setIsMobileMenuOpen(false);\n\n  return (\n    <nav className=\"bg-background shadow-sm border-b border-border sticky top-0 z-50\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex justify-between items-center h-16\">\n          {/* Logo */}\n          <div className=\"flex items-center\">\n            <div className=\"flex-shrink-0\">\n              <div className=\"flex items-center space-x-2\">\n                <i className=\"fas fa-car text-primary text-2xl\"></i>\n                <span className=\"text-xl font-bold text-foreground\">TEAM MOVE</span>\n              </div>\n            </div>\n            \n            {/* Desktop Navigation Links - Only when not authenticated */}\n            {!isAuthenticated && (\n              <div className=\"hidden md:flex items-center ml-8 space-x-6\">\n                <a href=\"#features\" className=\"text-muted-foreground hover:text-primary transition-colors font-medium\">\n                  FonctionnalitÃ©s\n                </a>\n                <a href=\"#how-it-works\" className=\"text-muted-foreground hover:text-primary transition-colors font-medium\">\n                  Comment Ã§a marche\n                </a>\n                {/* <a href=\"#pricing\" className=\"text-gray-600 hover:text-primary transition-colors font-medium\">\n                  Tarifs\n                </a>\n                <a href=\"#contact\" className=\"text-gray-600 hover:text-primary transition-colors font-medium\">\n                  Contact\n                </a> */}\n              </div>\n            )}\n          </div>\n          \n          {/* Desktop Actions */}\n          <div className=\"hidden md:flex items-center space-x-4\">\n            {isAuthenticated && organization ? (\n              <>\n                <NotificationCenter />\n                <ModernThemeToggle />\n                <div className=\"flex items-center space-x-2\">\n                  <Avatar className=\"w-8 h-8\">\n                    <AvatarImage src={organization.logoUrl} alt={organization.name} />\n                    <AvatarFallback className=\"text-xs\">\n                      {organization.name.slice(0, 2).toUpperCase()}\n                    </AvatarFallback>\n                  </Avatar>\n                  <span className=\"font-medium text-foreground max-w-32 truncate\">{organization.name}</span>\n                </div>\n                <Button \n                  variant=\"ghost\" \n                  size=\"sm\"\n                  onClick={onLogout}\n                  className=\"text-muted-foreground hover:text-foreground\"\n                  title=\"Se dÃ©connecter\"\n                >\n                  <i className=\"fas fa-sign-out-alt\"></i>\n                </Button>\n              </>\n            ) : (\n              <>\n                <ModernThemeToggle />\n                <Button \n                  variant=\"outline\"\n                  onClick={onShowLogin}\n                  className=\"border-border text-muted-foreground hover:text-primary hover:border-primary\"\n                >\n                  Se connecter\n                </Button>\n                <Button \n                  onClick={onShowRegistration}\n                  className=\"bg-primary text-white hover:bg-blue-700\"\n                >\n                  S'inscrire\n                </Button>\n              </>\n            )}\n          </div>\n\n          {/* Mobile Menu Button */}\n          <div className=\"md:hidden\">\n            <Sheet open={isMobileMenuOpen} onOpenChange={setIsMobileMenuOpen}>\n              <SheetTrigger asChild>\n                <Button variant=\"ghost\" size=\"sm\" className=\"p-2\">\n                  <Menu className=\"h-6 w-6 text-gray-600\" />\n                  <span className=\"sr-only\">Ouvrir le menu</span>\n                </Button>\n              </SheetTrigger>\n              <SheetContent side=\"right\" className=\"w-80 sm:w-96\">\n                <SheetHeader className=\"text-left\">\n                  <SheetTitle className=\"flex items-center space-x-2\">\n                    <i className=\"fas fa-car text-primary text-xl\"></i>\n                    <span className=\"text-lg font-bold text-gray-900\">TEAM MOVE</span>\n                  </SheetTitle>\n                </SheetHeader>\n                \n                <div className=\"py-6\">\n                  {isAuthenticated && organization ? (\n                    <div className=\"space-y-4\">\n                      {/* User Info */}\n                      <div className=\"flex items-center space-x-3 p-4 bg-gray-50 rounded-lg\">\n                        <Avatar className=\"w-12 h-12\">\n                          <AvatarImage src={organization.logoUrl} alt={organization.name} />\n                          <AvatarFallback>\n                            {organization.name.slice(0, 2).toUpperCase()}\n                          </AvatarFallback>\n                        </Avatar>\n                        <div>\n                          <p className=\"font-medium text-gray-900\">{organization.name}</p>\n                          <p className=\"text-sm text-gray-500\">{organization.email}</p>\n                        </div>\n                      </div>\n                      \n                      {/* Navigation Links */}\n                      <div className=\"space-y-2\">\n                        <a \n                          href=\"/dashboard\" \n                          className=\"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors\"\n                          onClick={closeMobileMenu}\n                        >\n                          <i className=\"fas fa-tachometer-alt text-primary w-5\"></i>\n                          <span className=\"font-medium\">Tableau de bord</span>\n                        </a>\n                        <a \n                          href=\"/dashboard#events\" \n                          className=\"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors\"\n                          onClick={closeMobileMenu}\n                        >\n                          <i className=\"fas fa-calendar text-primary w-5\"></i>\n                          <span className=\"font-medium\">Mes Ã©vÃ©nements</span>\n                        </a>\n                        <a \n                          href=\"/dashboard#messages\" \n                          className=\"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors\"\n                          onClick={closeMobileMenu}\n                        >\n                          <i className=\"fas fa-comments text-primary w-5\"></i>\n                          <span className=\"font-medium\">Messages</span>\n                        </a>\n                        <a \n                          href=\"/dashboard#profile\" \n                          className=\"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors\"\n                          onClick={closeMobileMenu}\n                        >\n                          <i className=\"fas fa-user text-primary w-5\"></i>\n                          <span className=\"font-medium\">Profil</span>\n                        </a>\n                      </div>\n                      \n                      {/* Logout Button */}\n                      <div className=\"pt-4 border-t border-gray-200\">\n                        <Button \n                          variant=\"ghost\"\n                          onClick={() => {\n                            onLogout?.();\n                            closeMobileMenu();\n                          }}\n                          className=\"w-full justify-start text-red-600 hover:text-red-700 hover:bg-red-50\"\n                        >\n                          <i className=\"fas fa-sign-out-alt mr-3\"></i>\n                          Se dÃ©connecter\n                        </Button>\n                      </div>\n                    </div>\n                  ) : (\n                    <div className=\"space-y-4\">\n                      {/* Navigation Links for non-authenticated users */}\n                      <div className=\"space-y-2\">\n                        <a \n                          href=\"#features\" \n                          className=\"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors\"\n                          onClick={closeMobileMenu}\n                        >\n                          <i className=\"fas fa-star text-primary w-5\"></i>\n                          <span className=\"font-medium\">FonctionnalitÃ©s</span>\n                        </a>\n                        <a \n                          href=\"#how-it-works\" \n                          className=\"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors\"\n                          onClick={closeMobileMenu}\n                        >\n                          <i className=\"fas fa-question-circle text-primary w-5\"></i>\n                          <span className=\"font-medium\">Comment Ã§a marche</span>\n                        </a>\n                        {/* <a \n                          href=\"#pricing\" \n                          className=\"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors\"\n                          onClick={closeMobileMenu}\n                        >\n                          <i className=\"fas fa-euro-sign text-primary w-5\"></i>\n                          <span className=\"font-medium\">Tarifs</span>\n                        </a>\n                        <a \n                          href=\"#contact\" \n                          className=\"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors\"\n                          onClick={closeMobileMenu}\n                        >\n                          <i className=\"fas fa-envelope text-primary w-5\"></i>\n                          <span className=\"font-medium\">Contact</span>\n                        </a> */}\n                      </div>\n                      \n                      {/* Auth Buttons */}\n                      <div className=\"pt-4 border-t border-gray-200 space-y-3\">\n                        <Button \n                          variant=\"outline\"\n                          onClick={() => {\n                            onShowLogin?.();\n                            closeMobileMenu();\n                          }}\n                          className=\"w-full\"\n                        >\n                          Se connecter\n                        </Button>\n                        <Button \n                          onClick={() => {\n                            onShowRegistration?.();\n                            closeMobileMenu();\n                          }}\n                          className=\"w-full bg-primary hover:bg-blue-700\"\n                        >\n                          S'inscrire\n                        </Button>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </SheetContent>\n            </Sheet>\n          </div>\n        </div>\n      </div>\n    </nav>\n  );\n}\n","size_bytes":11762},"client/src/components/notifications/NotificationCenter.tsx":{"content":"import React, { useState, useEffect } from 'react';\nimport { Button } from '../ui/button';\nimport { Badge } from '../ui/badge';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/card';\nimport { \n  Bell, \n  BellOff, \n  Check, \n  CheckCheck, \n  Trash2, \n  Info, \n  AlertCircle, \n  AlertTriangle, \n  CheckCircle,\n  X,\n  Settings\n} from 'lucide-react';\nimport { toast } from 'sonner';\nimport { formatDistanceToNow } from 'date-fns';\nimport { fr } from 'date-fns/locale';\n\ninterface Notification {\n  id: string;\n  type: 'info' | 'success' | 'warning' | 'error';\n  title: string;\n  message: string;\n  read: boolean;\n  actionUrl?: string;\n  eventId?: string;\n  createdAt: string;\n}\n\ninterface NotificationCenterProps {\n  isOpen?: boolean;\n  onClose?: () => void;\n}\n\nexport function NotificationCenter({ isOpen = true, onClose }: NotificationCenterProps) {\n  const [notifications, setNotifications] = useState<Notification[]>([]);\n  const [unreadCount, setUnreadCount] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [filter, setFilter] = useState<'all' | 'unread'>('all');\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchNotifications();\n    }\n  }, [isOpen]);\n\n  const fetchNotifications = async () => {\n    try {\n      const response = await fetch('/api/notifications', {\n        credentials: 'include',\n      });\n      \n      if (response.ok) {\n        const data = await response.json();\n        setNotifications(data.notifications);\n        setUnreadCount(data.unreadCount);\n      } else {\n        throw new Error('Failed to fetch notifications');\n      }\n    } catch (error) {\n      console.error('Error fetching notifications:', error);\n      toast.error('Erreur lors du chargement des notifications');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const markAsRead = async (notificationId: string) => {\n    try {\n      const response = await fetch(`/api/notifications/${notificationId}/read`, {\n        method: 'PUT',\n        credentials: 'include',\n      });\n\n      if (response.ok) {\n        setNotifications(prev => \n          prev.map(notif => \n            notif.id === notificationId \n              ? { ...notif, read: true }\n              : notif\n          )\n        );\n        setUnreadCount(prev => Math.max(0, prev - 1));\n      }\n    } catch (error) {\n      console.error('Error marking notification as read:', error);\n    }\n  };\n\n  const markAllAsRead = async () => {\n    try {\n      const response = await fetch('/api/notifications/read-all', {\n        method: 'PUT',\n        credentials: 'include',\n      });\n\n      if (response.ok) {\n        setNotifications(prev => \n          prev.map(notif => ({ ...notif, read: true }))\n        );\n        setUnreadCount(0);\n        toast.success('Toutes les notifications ont Ã©tÃ© marquÃ©es comme lues');\n      }\n    } catch (error) {\n      console.error('Error marking all notifications as read:', error);\n      toast.error('Erreur lors du marquage des notifications');\n    }\n  };\n\n  const deleteNotification = async (notificationId: string) => {\n    try {\n      const response = await fetch(`/api/notifications/${notificationId}`, {\n        method: 'DELETE',\n        credentials: 'include',\n      });\n\n      if (response.ok) {\n        setNotifications(prev => \n          prev.filter(notif => notif.id !== notificationId)\n        );\n        toast.success('Notification supprimÃ©e');\n      }\n    } catch (error) {\n      console.error('Error deleting notification:', error);\n      toast.error('Erreur lors de la suppression');\n    }\n  };\n\n  const getNotificationIcon = (type: string) => {\n    switch (type) {\n      case 'success':\n        return <CheckCircle className=\"w-5 h-5 text-green-500\" />;\n      case 'warning':\n        return <AlertTriangle className=\"w-5 h-5 text-yellow-500\" />;\n      case 'error':\n        return <AlertCircle className=\"w-5 h-5 text-red-500\" />;\n      default:\n        return <Info className=\"w-5 h-5 text-blue-500\" />;\n    }\n  };\n\n  const getNotificationBorderColor = (type: string) => {\n    switch (type) {\n      case 'success':\n        return 'border-l-green-500';\n      case 'warning':\n        return 'border-l-yellow-500';\n      case 'error':\n        return 'border-l-red-500';\n      default:\n        return 'border-l-blue-500';\n    }\n  };\n\n  const filteredNotifications = filter === 'unread' \n    ? notifications.filter(n => !n.read)\n    : notifications;\n\n  if (!isOpen) return null;\n\n  return (\n    <Card className=\"w-full max-w-2xl mx-auto\">\n      <CardHeader className=\"pb-4\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-3\">\n            <CardTitle className=\"flex items-center gap-2\">\n              <Bell className=\"w-5 h-5\" />\n              Notifications\n              {unreadCount > 0 && (\n                <Badge variant=\"destructive\" className=\"ml-2\">\n                  {unreadCount}\n                </Badge>\n              )}\n            </CardTitle>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            {onClose && (\n              <Button variant=\"ghost\" size=\"sm\" onClick={onClose}>\n                <X className=\"w-4 h-4\" />\n              </Button>\n            )}\n          </div>\n        </div>\n\n        {/* Filter and Actions */}\n        <div className=\"flex items-center justify-between mt-4\">\n          <div className=\"flex items-center gap-2\">\n            <Button\n              variant={filter === 'all' ? 'default' : 'outline'}\n              size=\"sm\"\n              onClick={() => setFilter('all')}\n            >\n              Toutes ({notifications.length})\n            </Button>\n            <Button\n              variant={filter === 'unread' ? 'default' : 'outline'}\n              size=\"sm\"\n              onClick={() => setFilter('unread')}\n            >\n              Non lues ({unreadCount})\n            </Button>\n          </div>\n\n          <div className=\"flex items-center gap-2\">\n            {unreadCount > 0 && (\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={markAllAsRead}\n                className=\"text-xs\"\n              >\n                <CheckCheck className=\"w-4 h-4 mr-1\" />\n                Tout marquer lu\n              </Button>\n            )}\n          </div>\n        </div>\n      </CardHeader>\n\n      <CardContent className=\"space-y-3 max-h-96 overflow-y-auto\">\n        {loading ? (\n          <div className=\"space-y-3\">\n            {Array.from({ length: 3 }).map((_, i) => (\n              <div key={i} className=\"animate-pulse\">\n                <div className=\"flex items-start gap-3 p-3 bg-gray-100 rounded-lg\">\n                  <div className=\"w-5 h-5 bg-gray-300 rounded\"></div>\n                  <div className=\"flex-1 space-y-2\">\n                    <div className=\"h-4 bg-gray-300 rounded w-3/4\"></div>\n                    <div className=\"h-3 bg-gray-300 rounded w-1/2\"></div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        ) : filteredNotifications.length === 0 ? (\n          <div className=\"text-center py-8 text-gray-500\">\n            <BellOff className=\"w-8 h-8 mx-auto mb-2\" />\n            <p className=\"text-sm\">\n              {filter === 'unread' ? 'Aucune notification non lue' : 'Aucune notification'}\n            </p>\n          </div>\n        ) : (\n          <div className=\"space-y-3\">\n            {filteredNotifications.map((notification) => (\n              <div\n                key={notification.id}\n                className={`\n                  border-l-4 rounded-lg p-4 transition-all duration-200 hover:shadow-sm\n                  ${getNotificationBorderColor(notification.type)}\n                  ${!notification.read ? 'bg-blue-50 border-r border-r-blue-200' : 'bg-white border border-gray-200'}\n                `}\n              >\n                <div className=\"flex items-start gap-3\">\n                  <div className=\"flex-shrink-0 mt-0.5\">\n                    {getNotificationIcon(notification.type)}\n                  </div>\n                  \n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-start justify-between gap-2\">\n                      <div className=\"flex-1\">\n                        <h4 className={`text-sm font-medium ${!notification.read ? 'text-gray-900' : 'text-gray-700'}`}>\n                          {notification.title}\n                        </h4>\n                        <p className={`text-sm mt-1 ${!notification.read ? 'text-gray-800' : 'text-gray-600'}`}>\n                          {notification.message}\n                        </p>\n                        <p className=\"text-xs text-gray-500 mt-2\">\n                          {formatDistanceToNow(new Date(notification.createdAt), { \n                            addSuffix: true, \n                            locale: fr \n                          })}\n                        </p>\n                      </div>\n                      \n                      <div className=\"flex items-center gap-1 ml-2\">\n                        {!notification.read && (\n                          <Button\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            onClick={() => markAsRead(notification.id)}\n                            className=\"h-8 w-8 p-0\"\n                          >\n                            <Check className=\"w-4 h-4\" />\n                          </Button>\n                        )}\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => deleteNotification(notification.id)}\n                          className=\"h-8 w-8 p-0 text-gray-400 hover:text-red-500\"\n                        >\n                          <Trash2 className=\"w-4 h-4\" />\n                        </Button>\n                      </div>\n                    </div>\n                    \n                    {/* Action Button */}\n                    {notification.actionUrl && (\n                      <div className=\"mt-3\">\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => {\n                            window.location.href = notification.actionUrl!;\n                            markAsRead(notification.id);\n                          }}\n                          className=\"text-xs\"\n                        >\n                          Voir les dÃ©tails\n                        </Button>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n\n// Hook pour obtenir le nombre de notifications non lues\nexport function useUnreadNotificationCount() {\n  const [unreadCount, setUnreadCount] = useState(0);\n\n  useEffect(() => {\n    const fetchUnreadCount = async () => {\n      try {\n        const response = await fetch('/api/notifications/unread-count', {\n          credentials: 'include',\n        });\n        \n        if (response.ok) {\n          const data = await response.json();\n          setUnreadCount(data.count);\n        }\n      } catch (error) {\n        console.error('Error fetching unread count:', error);\n      }\n    };\n\n    fetchUnreadCount();\n\n    // Actualiser toutes les 30 secondes\n    const interval = setInterval(fetchUnreadCount, 30000);\n    return () => clearInterval(interval);\n  }, []);\n\n  return unreadCount;\n}\n\n// Composant pour l'indicateur de notifications dans le header\nexport function NotificationBell({ onClick }: { onClick?: () => void }) {\n  const unreadCount = useUnreadNotificationCount();\n\n  return (\n    <Button\n      variant=\"ghost\"\n      size=\"sm\"\n      onClick={onClick}\n      className=\"relative\"\n    >\n      <Bell className=\"w-5 h-5\" />\n      {unreadCount > 0 && (\n        <Badge \n          variant=\"destructive\" \n          className=\"absolute -top-2 -right-2 h-5 w-5 flex items-center justify-center p-0 text-xs\"\n        >\n          {unreadCount > 99 ? '99+' : unreadCount}\n        </Badge>\n      )}\n    </Button>\n  );\n}","size_bytes":12169},"client/src/components/preferences/UserPreferences.tsx":{"content":"import React, { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/card';\nimport { Button } from '../ui/button';\nimport { Switch } from '../ui/switch';\nimport { Label } from '../ui/label';\nimport { \n  Settings, \n  Palette, \n  Bell, \n  Mail, \n  Globe, \n  RotateCcw,\n  Save,\n  Moon,\n  Sun,\n  Monitor\n} from 'lucide-react';\nimport { toast } from 'sonner';\nimport { useTheme } from '../../contexts/ThemeContext';\n\ninterface UserPreferences {\n  theme: 'light' | 'dark' | 'system';\n  language: string;\n  emailNotifications: boolean;\n  pushNotifications: boolean;\n  marketingEmails: boolean;\n}\n\nexport function UserPreferences() {\n  const [preferences, setPreferences] = useState<UserPreferences>({\n    theme: 'system',\n    language: 'fr',\n    emailNotifications: true,\n    pushNotifications: true,\n    marketingEmails: false,\n  });\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const { setTheme } = useTheme();\n\n  useEffect(() => {\n    fetchPreferences();\n  }, []);\n\n  const fetchPreferences = async () => {\n    try {\n      const response = await fetch('/api/preferences', {\n        credentials: 'include',\n      });\n      \n      if (response.ok) {\n        const data = await response.json();\n        setPreferences(data);\n        // Synchroniser le thÃ¨me avec le provider\n        setTheme(data.theme);\n      } else {\n        throw new Error('Failed to fetch preferences');\n      }\n    } catch (error) {\n      console.error('Error fetching preferences:', error);\n      toast.error('Erreur lors du chargement des prÃ©fÃ©rences');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const savePreferences = async () => {\n    setSaving(true);\n    try {\n      const response = await fetch('/api/preferences', {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify(preferences),\n      });\n\n      if (response.ok) {\n        // Synchroniser le thÃ¨me avec le provider\n        setTheme(preferences.theme);\n        toast.success('PrÃ©fÃ©rences sauvegardÃ©es avec succÃ¨s');\n      } else {\n        const errorData = await response.json();\n        throw new Error(errorData.message);\n      }\n    } catch (error) {\n      console.error('Error saving preferences:', error);\n      toast.error('Erreur lors de la sauvegarde des prÃ©fÃ©rences');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const resetPreferences = async () => {\n    if (!confirm('ÃŠtes-vous sÃ»r de vouloir rÃ©initialiser toutes vos prÃ©fÃ©rences ?')) {\n      return;\n    }\n\n    try {\n      const response = await fetch('/api/preferences/reset', {\n        method: 'POST',\n        credentials: 'include',\n      });\n\n      if (response.ok) {\n        await fetchPreferences();\n        toast.success('PrÃ©fÃ©rences rÃ©initialisÃ©es');\n      } else {\n        const errorData = await response.json();\n        throw new Error(errorData.message);\n      }\n    } catch (error) {\n      console.error('Error resetting preferences:', error);\n      toast.error('Erreur lors de la rÃ©initialisation');\n    }\n  };\n\n  const updatePreference = (key: keyof UserPreferences, value: any) => {\n    setPreferences(prev => ({\n      ...prev,\n      [key]: value,\n    }));\n  };\n\n  const getThemeIcon = (themeValue: string) => {\n    switch (themeValue) {\n      case 'light':\n        return <Sun className=\"w-4 h-4\" />;\n      case 'dark':\n        return <Moon className=\"w-4 h-4\" />;\n      default:\n        return <Monitor className=\"w-4 h-4\" />;\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"animate-pulse\">\n          <div className=\"h-8 bg-gray-200 rounded w-1/3 mb-4\"></div>\n          <div className=\"space-y-4\">\n            <div className=\"h-32 bg-gray-200 rounded\"></div>\n            <div className=\"h-32 bg-gray-200 rounded\"></div>\n            <div className=\"h-32 bg-gray-200 rounded\"></div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">PrÃ©fÃ©rences</h2>\n          <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n            Personnalisez votre expÃ©rience TeamMove\n          </p>\n        </div>\n        <div className=\"flex gap-2\">\n          <Button\n            onClick={resetPreferences}\n            variant=\"outline\"\n            size=\"sm\"\n          >\n            <RotateCcw className=\"w-4 h-4 mr-2\" />\n            RÃ©initialiser\n          </Button>\n          <Button\n            onClick={savePreferences}\n            disabled={saving}\n            size=\"sm\"\n          >\n            <Save className=\"w-4 h-4 mr-2\" />\n            {saving ? 'Enregistrement...' : 'Enregistrer'}\n          </Button>\n        </div>\n      </div>\n\n      {/* Apparence */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Palette className=\"w-5 h-5\" />\n            Apparence\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"space-y-3\">\n            <Label htmlFor=\"theme\">ThÃ¨me</Label>\n            <div className=\"grid grid-cols-3 gap-3\">\n              {[\n                { value: 'light', label: 'Clair', icon: Sun },\n                { value: 'dark', label: 'Sombre', icon: Moon },\n                { value: 'system', label: 'Automatique', icon: Monitor },\n              ].map((option) => {\n                const Icon = option.icon;\n                return (\n                  <button\n                    key={option.value}\n                    onClick={() => updatePreference('theme', option.value)}\n                    className={`\n                      flex flex-col items-center gap-2 p-3 rounded-lg border-2 transition-all\n                      ${preferences.theme === option.value \n                        ? 'border-blue-500 bg-blue-50 dark:bg-blue-950' \n                        : 'border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600'\n                      }\n                    `}\n                  >\n                    <Icon className=\"w-6 h-6\" />\n                    <span className=\"text-sm font-medium\">{option.label}</span>\n                  </button>\n                );\n              })}\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"language\">Langue</Label>\n            <select\n              id=\"language\"\n              value={preferences.language}\n              onChange={(e) => updatePreference('language', e.target.value)}\n              className=\"w-full p-2 border rounded-md dark:bg-gray-800 dark:border-gray-600\"\n            >\n              <option value=\"fr\">FranÃ§ais</option>\n              <option value=\"en\">English</option>\n            </select>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Notifications */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Bell className=\"w-5 h-5\" />\n            Notifications\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"space-y-0.5\">\n              <Label htmlFor=\"email-notifications\">Notifications par email</Label>\n              <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                Recevoir des notifications importantes par email\n              </p>\n            </div>\n            <Switch\n              id=\"email-notifications\"\n              checked={preferences.emailNotifications}\n              onCheckedChange={(checked) => updatePreference('emailNotifications', checked)}\n            />\n          </div>\n\n          <div className=\"flex items-center justify-between\">\n            <div className=\"space-y-0.5\">\n              <Label htmlFor=\"push-notifications\">Notifications push</Label>\n              <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                Recevoir des notifications dans le navigateur\n              </p>\n            </div>\n            <Switch\n              id=\"push-notifications\"\n              checked={preferences.pushNotifications}\n              onCheckedChange={(checked) => updatePreference('pushNotifications', checked)}\n            />\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Marketing */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Mail className=\"w-5 h-5\" />\n            Communications marketing\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex items-center justify-between\">\n            <div className=\"space-y-0.5\">\n              <Label htmlFor=\"marketing-emails\">Emails marketing</Label>\n              <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                Recevoir des informations sur les nouveautÃ©s et promotions\n              </p>\n            </div>\n            <Switch\n              id=\"marketing-emails\"\n              checked={preferences.marketingEmails}\n              onCheckedChange={(checked) => updatePreference('marketingEmails', checked)}\n            />\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Informations */}\n      <Card className=\"border-blue-200 dark:border-blue-800\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex items-start gap-3\">\n            <Settings className=\"w-5 h-5 text-blue-500 mt-0.5\" />\n            <div>\n              <h4 className=\"font-medium text-blue-900 dark:text-blue-100\">\n                Ã€ propos des prÃ©fÃ©rences\n              </h4>\n              <p className=\"text-sm text-blue-700 dark:text-blue-200 mt-1\">\n                Vos prÃ©fÃ©rences sont automatiquement synchronisÃ©es et appliquÃ©es sur tous vos appareils. \n                Le thÃ¨me automatique s'adapte aux rÃ©glages de votre systÃ¨me d'exploitation.\n              </p>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":10211},"client/src/components/public/EventPublicView.tsx":{"content":"import React, { useState } from \"react\";\nimport { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\nconst joinEventSchema = z.object({\n  name: z.string().min(1, \"Le nom est requis\"),\n  email: z.string().email(\"Email invalide\"),\n  role: z.enum([\"passenger\", \"driver\"]),\n  availableSeats: z.number().min(1).max(7).optional(),\n  comment: z.string().optional(),\n});\n\ntype JoinEventData = z.infer<typeof joinEventSchema>;\n\ninterface EventPublicViewProps {\n  eventId: string;\n}\n\nexport default function EventPublicView({ eventId }: EventPublicViewProps) {\n  const [showJoinForm, setShowJoinForm] = useState(false);\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const { data: event, isLoading, error } = useQuery({\n    queryKey: [`/api/events/${eventId}/public`],\n    queryFn: () => apiRequest(\"GET\", `/api/events/${eventId}/public`),\n  });\n\n  const form = useForm<JoinEventData>({\n    resolver: zodResolver(joinEventSchema),\n    defaultValues: {\n      name: \"\",\n      email: \"\",\n      role: \"passenger\",\n      availableSeats: undefined,\n      comment: \"\",\n    },\n  });\n\n  const joinEventMutation = useMutation({\n    mutationFn: (data: JoinEventData) => {\n      const submitData = { ...data };\n      if (data.role === \"passenger\") {\n        delete submitData.availableSeats;\n      }\n      return apiRequest(\"POST\", `/api/events/${eventId}/join`, submitData);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`/api/events/${eventId}/public`] });\n      setShowJoinForm(false);\n      form.reset();\n      toast({\n        title: \"Inscription rÃ©ussie !\",\n        description: \"Vous Ãªtes maintenant inscrit(e) Ã  cet Ã©vÃ©nement.\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erreur\",\n        description: error?.message || \"Impossible de s'inscrire Ã  l'Ã©vÃ©nement.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: JoinEventData) => {\n    joinEventMutation.mutate(data);\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  if (error || !event) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <Card className=\"w-full max-w-md\">\n          <CardHeader>\n            <CardTitle className=\"text-red-600\">Ã‰vÃ©nement introuvable</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-gray-600\">\n              L'Ã©vÃ©nement que vous recherchez n'existe pas ou n'est plus disponible.\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  const eventDate = new Date(event.date);\n  const formattedDate = eventDate.toLocaleDateString('fr-FR', {\n    weekday: 'long',\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n  });\n  const formattedTime = eventDate.toLocaleTimeString('fr-FR', {\n    hour: '2-digit',\n    minute: '2-digit'\n  });\n\n  const drivers = event.participants?.filter((p: any) => p.role === 'driver') || [];\n  const passengers = event.participants?.filter((p: any) => p.role === 'passenger') || [];\n  const totalSeats = drivers.reduce((sum: number, driver: any) => sum + (driver.availableSeats || 0), 0);\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-8\">\n      <div className=\"max-w-4xl mx-auto px-4\">\n        {/* Event Header */}\n        <Card className=\"mb-8\">\n          <CardHeader className=\"pb-4\">\n            <div className=\"flex items-start justify-between\">\n              <div className=\"flex items-center space-x-4\">\n                {event.organization?.logoUrl && (\n                  <img\n                    src={event.organization.logoUrl}\n                    alt={event.organization.name}\n                    className=\"w-16 h-16 rounded-full object-cover\"\n                  />\n                )}\n                <div>\n                  <CardTitle className=\"text-2xl font-bold text-gray-900 mb-1\">\n                    {event.name}\n                  </CardTitle>\n                  <p className=\"text-gray-600\">\n                    OrganisÃ© par <span className=\"font-semibold\">{event.organization?.name}</span>\n                  </p>\n                </div>\n              </div>\n              <div className=\"text-right\">\n                <div className=\"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800\">\n                  {event.sport}\n                </div>\n              </div>\n            </div>\n          </CardHeader>\n          \n          <CardContent className=\"space-y-6\">\n            {/* Event Details */}\n            <div className=\"grid md:grid-cols-2 gap-6\">\n              <div>\n                <h3 className=\"font-semibold text-gray-900 mb-3\">ğŸ“… Date et heure</h3>\n                <p className=\"text-gray-700\">{formattedDate}</p>\n                <p className=\"text-gray-700\">Ã  {formattedTime}</p>\n                {event.duration && (\n                  <p className=\"text-sm text-gray-600 mt-1\">DurÃ©e estimÃ©e : {event.duration}</p>\n                )}\n              </div>\n              \n              <div>\n                <h3 className=\"font-semibold text-gray-900 mb-3\">ğŸ“ Lieux</h3>\n                <div className=\"space-y-2\">\n                  <div>\n                    <span className=\"text-sm font-medium text-gray-600\">Rendez-vous :</span>\n                    <p className=\"text-gray-700\">{event.meetingPoint}</p>\n                  </div>\n                  <div>\n                    <span className=\"text-sm font-medium text-gray-600\">Destination :</span>\n                    <p className=\"text-gray-700\">{event.destination}</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {event.description && (\n              <div>\n                <h3 className=\"font-semibold text-gray-900 mb-2\">ğŸ“ Description</h3>\n                <p className=\"text-gray-700\">{event.description}</p>\n              </div>\n            )}\n\n            {/* Participation Stats */}\n            <div className=\"bg-gray-50 rounded-lg p-4\">\n              <h3 className=\"font-semibold text-gray-900 mb-3\">ğŸ‘¥ Participation actuelle</h3>\n              <div className=\"grid grid-cols-3 gap-4 text-center\">\n                <div>\n                  <div className=\"text-2xl font-bold text-blue-600\">{drivers.length}</div>\n                  <div className=\"text-sm text-gray-600\">Conducteur{drivers.length !== 1 ? 's' : ''}</div>\n                </div>\n                <div>\n                  <div className=\"text-2xl font-bold text-green-600\">{totalSeats}</div>\n                  <div className=\"text-sm text-gray-600\">Places dispo</div>\n                </div>\n                <div>\n                  <div className=\"text-2xl font-bold text-orange-600\">{passengers.length}</div>\n                  <div className=\"text-sm text-gray-600\">Passager{passengers.length !== 1 ? 's' : ''}</div>\n                </div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Participants */}\n        {event.participants && event.participants.length > 0 && (\n          <Card className=\"mb-8\">\n            <CardHeader>\n              <CardTitle>Participants inscrits</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-4\">\n                {drivers.length > 0 && (\n                  <div>\n                    <h4 className=\"font-semibold text-gray-900 mb-2\">ğŸš— Conducteurs</h4>\n                    <div className=\"space-y-2\">\n                      {drivers.map((driver: any, idx: number) => (\n                        <div key={idx} className=\"flex items-center justify-between p-3 bg-blue-50 rounded-lg\">\n                          <span className=\"font-medium\">{driver.name}</span>\n                          <span className=\"text-sm text-blue-600\">\n                            {driver.availableSeats} place{driver.availableSeats !== 1 ? 's' : ''} disponible{driver.availableSeats !== 1 ? 's' : ''}\n                          </span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                {passengers.length > 0 && (\n                  <div>\n                    <h4 className=\"font-semibold text-gray-900 mb-2\">ğŸ’ Passagers</h4>\n                    <div className=\"grid md:grid-cols-3 gap-2\">\n                      {passengers.map((passenger: any, idx: number) => (\n                        <div key={idx} className=\"p-3 bg-green-50 rounded-lg\">\n                          <span className=\"font-medium\">{passenger.name}</span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n              </div>\n            </CardContent>\n          </Card>\n        )}\n\n        {/* Join Event Section */}\n        <Card>\n          <CardHeader>\n            <CardTitle>Participer Ã  cet Ã©vÃ©nement</CardTitle>\n          </CardHeader>\n          <CardContent>\n            {!showJoinForm ? (\n              <div className=\"text-center py-6\">\n                <p className=\"text-gray-600 mb-4\">\n                  Vous souhaitez participer Ã  cet Ã©vÃ©nement ? Cliquez sur le bouton ci-dessous pour vous inscrire.\n                </p>\n                <Button \n                  onClick={() => setShowJoinForm(true)}\n                  className=\"bg-blue-600 hover:bg-blue-700\"\n                >\n                  S'inscrire Ã  l'Ã©vÃ©nement\n                </Button>\n              </div>\n            ) : (\n              <Form {...form}>\n                <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n                  <div className=\"grid md:grid-cols-2 gap-4\">\n                    <FormField\n                      control={form.control}\n                      name=\"name\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Nom complet</FormLabel>\n                          <FormControl>\n                            <Input {...field} placeholder=\"Jean Dupont\" />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"email\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Email</FormLabel>\n                          <FormControl>\n                            <Input {...field} type=\"email\" placeholder=\"jean.dupont@email.com\" />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                  </div>\n\n                  <FormField\n                    control={form.control}\n                    name=\"role\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Je participe en tant que</FormLabel>\n                        <FormControl>\n                          <RadioGroup\n                            onValueChange={field.onChange}\n                            value={field.value}\n                            className=\"grid md:grid-cols-2 gap-4\"\n                          >\n                            <div className=\"flex items-center space-x-2 p-4 border rounded-lg\">\n                              <RadioGroupItem value=\"passenger\" id=\"passenger\" />\n                              <Label htmlFor=\"passenger\" className=\"flex-1\">\n                                <div className=\"font-medium\">ğŸ’ Passager</div>\n                                <div className=\"text-sm text-gray-600\">Je cherche un moyen de transport</div>\n                              </Label>\n                            </div>\n                            <div className=\"flex items-center space-x-2 p-4 border rounded-lg\">\n                              <RadioGroupItem value=\"driver\" id=\"driver\" />\n                              <Label htmlFor=\"driver\" className=\"flex-1\">\n                                <div className=\"font-medium\">ğŸš— Conducteur</div>\n                                <div className=\"text-sm text-gray-600\">Je peux emmener d'autres personnes</div>\n                              </Label>\n                            </div>\n                          </RadioGroup>\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  {form.watch(\"role\") === \"driver\" && (\n                    <FormField\n                      control={form.control}\n                      name=\"availableSeats\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Nombre de places disponibles</FormLabel>\n                          <FormControl>\n                            <Input\n                              {...field}\n                              type=\"number\"\n                              min=\"1\"\n                              max=\"7\"\n                              placeholder=\"4\"\n                              onChange={(e) => field.onChange(parseInt(e.target.value) || undefined)}\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                  )}\n\n                  <FormField\n                    control={form.control}\n                    name=\"comment\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Commentaire (optionnel)</FormLabel>\n                        <FormControl>\n                          <Textarea\n                            {...field}\n                            rows={3}\n                            placeholder=\"Informations supplÃ©mentaires, restrictions, etc.\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <div className=\"flex justify-end space-x-4\">\n                    <Button\n                      type=\"button\"\n                      variant=\"outline\"\n                      onClick={() => setShowJoinForm(false)}\n                    >\n                      Annuler\n                    </Button>\n                    <Button\n                      type=\"submit\"\n                      disabled={joinEventMutation.isPending}\n                      className=\"bg-blue-600 hover:bg-blue-700\"\n                    >\n                      {joinEventMutation.isPending ? (\n                        <>\n                          <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                          Inscription...\n                        </>\n                      ) : (\n                        \"Confirmer l'inscription\"\n                      )}\n                    </Button>\n                  </div>\n                </form>\n              </Form>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Request Status Change Section for Existing Participants */}\n        <Card className=\"mt-6\">\n          <CardContent className=\"p-6\">\n            <h3 className=\"text-lg font-semibold mb-4\">DÃ©jÃ  inscrit(e) ?</h3>\n            <p className=\"text-gray-600 mb-4\">\n              Si vous Ãªtes dÃ©jÃ  inscrit(e) Ã  cet Ã©vÃ©nement et souhaitez modifier votre participation \n              (changer de rÃ´le, modifier vos places disponibles, ou vous dÃ©sinscrire), \n              vous pouvez envoyer une demande Ã  l'organisateur.\n            </p>\n            <div className=\"text-center\">\n              <Button \n                variant=\"outline\"\n                onClick={() => {\n                  const organizerEmail = event.organization?.contactFirstName && event.organization?.contactLastName \n                    ? `${event.organization.contactFirstName}.${event.organization.contactLastName}@${event.organization.name.toLowerCase().replace(/\\s+/g, '')}.com`\n                    : 'organisateur@example.com';\n                  const subject = `Demande de modification - ${event.name}`;\n                  const body = `Bonjour,\\n\\nJe souhaite modifier ma participation Ã  l'Ã©vÃ©nement \"${event.name}\" prÃ©vu le ${new Date(event.date).toLocaleDateString('fr-FR')}.\\n\\nType de modification souhaitÃ©e :\\nâ˜ Changer de rÃ´le (conducteur â†” passager)\\nâ˜ Modifier le nombre de places disponibles\\nâ˜ Me dÃ©sinscrire de l'Ã©vÃ©nement\\n\\nRaison :\\n[Veuillez expliquer la raison de votre demande]\\n\\nMerci de votre comprÃ©hension.\\n\\nCordialement,\\n[Votre nom]`;\n                  window.location.href = `mailto:${organizerEmail}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;\n                }}\n              >\n                <i className=\"fas fa-envelope mr-2\"></i>\n                Contacter l'organisateur pour une modification\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Additional Features */}\n        <div className=\"mt-6 flex justify-center space-x-4\">\n          <Button \n            variant=\"outline\"\n            onClick={() => window.open(`/api/events/${eventId}/calendar`, '_blank')}\n          >\n            <i className=\"fas fa-calendar-plus mr-2\"></i>\n            Ajouter au calendrier\n          </Button>\n          <Button \n            variant=\"outline\"\n            onClick={() => {\n              if (navigator.share) {\n                navigator.share({\n                  title: event.name,\n                  text: `Rejoignez-moi pour l'Ã©vÃ©nement ${event.name} organisÃ© par ${event.organization?.name}`,\n                  url: window.location.href\n                });\n              } else {\n                navigator.clipboard.writeText(window.location.href);\n                // You might want to add a toast notification here\n                alert('Lien copiÃ© dans le presse-papier !');\n              }\n            }}\n          >\n            <i className=\"fas fa-share-alt mr-2\"></i>\n            Partager l'Ã©vÃ©nement\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":19184},"client/src/components/subscription/PaymentSetup.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\n\n// Initialiser Stripe avec votre clÃ© publique\nconst stripePromise = loadStripe(import.meta.env.VITE_STRIPE_PUBLIC_KEY || \"pk_test_51S3zPW8XM0zNL8ZMhdeyjgfrp4eKmTmzKRMqRENFwKoUjfSByTeGfWXfcf6Vr6FF9FJSBauMvjTp6cnDFDJwfPxN00VrImPBXj\");\n\ninterface PaymentSetupProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess?: () => void;\n  targetPlan?: string; // Plan cible depuis l'inscription\n}\n\ninterface SubscriptionPlan {\n  id: string;\n  name: string;\n  price: number;\n  type: 'payment' | 'subscription';\n  interval?: 'monthly' | 'annual' | 'pack_single' | 'pack_10';\n  features: string[];\n  description: string;\n  badge?: string;\n  badgeColor?: string;\n}\n\nconst subscriptionPlans: SubscriptionPlan[] = [\n  // Offres Ã©vÃ©nementielles (paiements uniques)\n  {\n    id: \"evenementielle-single\",\n    name: \"Pack Ã‰vÃ©nement\",\n    price: 1500, // 15â‚¬\n    type: \"payment\",\n    interval: \"pack_single\", \n    description: \"IdÃ©al pour organiser un Ã©vÃ©nement ponctuel\",\n    badge: \"POPULAIRE\",\n    badgeColor: \"bg-orange-100 text-orange-800\",\n    features: [\n      \"1 Ã©vÃ©nement complet\",\n      \"Profil de personnalisation\",\n      \"Gestion conducteurs/passagers\", \n      \"Messagerie intÃ©grÃ©e\",\n      \"Suivi en temps rÃ©el\",\n      \"Support prioritaire\"\n    ]\n  },\n  {\n    id: \"evenementielle-pack10\",\n    name: \"Pack 10 Ã‰vÃ©nements\",\n    price: 15000, // 150â‚¬\n    type: \"payment\",\n    interval: \"pack_10\",\n    description: \"Parfait pour les organisateurs rÃ©guliers\",\n    badge: \"Ã‰CONOMIQUE\",\n    badgeColor: \"bg-green-100 text-green-800\",\n    features: [\n      \"10 Ã©vÃ©nements complets\",\n      \"Profil de personnalisation\",\n      \"Gestion conducteurs/passagers\",\n      \"Messagerie intÃ©grÃ©e\", \n      \"Suivi en temps rÃ©el\",\n      \"Support prioritaire\",\n      \"Valable 12 mois\"\n    ]\n  },\n  // Formules Pro (abonnements mensuels)\n  {\n    id: \"pro-club\",\n    name: \"Clubs & Associations\", \n    price: 1999, // 19,99â‚¬\n    type: \"subscription\",\n    interval: \"monthly\",\n    description: \"ConÃ§u pour les clubs sportifs et associations\",\n    badge: \"PRO\",\n    badgeColor: \"bg-blue-100 text-blue-800\",\n    features: [\n      \"Ã‰vÃ©nements illimitÃ©s\",\n      \"Invitations illimitÃ©es\",\n      \"Profil de personnalisation avancÃ©\",\n      \"Gestion multi-conducteurs\",\n      \"Messagerie avancÃ©e\",\n      \"Suivi en temps rÃ©el\",\n      \"Statistiques dÃ©taillÃ©es\",\n      \"Support prioritaire\",\n      \"API d'intÃ©gration\",\n      \"Branding personnalisÃ©\"\n    ]\n  },\n  {\n    id: \"pro-pme\",\n    name: \"PME\",\n    price: 4900, // 49â‚¬\n    type: \"subscription\", \n    interval: \"monthly\",\n    description: \"IdÃ©al pour les petites et moyennes entreprises\",\n    badge: \"BUSINESS\",\n    badgeColor: \"bg-purple-100 text-purple-800\",\n    features: [\n      \"Tout de Clubs & Associations\",\n      \"Multi-utilisateurs (5 admins)\",\n      \"Gestion des Ã©quipes\", \n      \"Reporting avancÃ©\",\n      \"IntÃ©grations tierces\",\n      \"Support tÃ©lÃ©phonique\",\n      \"Formation personnalisÃ©e\",\n      \"SLA garanti\"\n    ]\n  },\n  {\n    id: \"pro-entreprise\",\n    name: \"Grandes Entreprises\",\n    price: 9900, // 99â‚¬\n    type: \"subscription\",\n    interval: \"monthly\", \n    description: \"Solution entreprise complÃ¨te et sur-mesure\",\n    badge: \"ENTERPRISE\", \n    badgeColor: \"bg-yellow-100 text-yellow-800\",\n    features: [\n      \"Tout de PME\",\n      \"Multi-utilisateurs illimitÃ©s\",\n      \"Gestion multi-sites\",\n      \"API complÃ¨te\",\n      \"SSO/SAML\",\n      \"HÃ©bergement dÃ©diÃ© (option)\",\n      \"Support 24/7\",\n      \"Account Manager dÃ©diÃ©\",\n      \"Personnalisation complÃ¨te\",\n      \"ConformitÃ© RGPD avancÃ©e\"\n    ]\n  }\n];\n\nexport default function PaymentSetup({ isOpen, onClose, onSuccess, targetPlan }: PaymentSetupProps) {\n  const [selectedPlan, setSelectedPlan] = useState<string>(targetPlan || \"evenementielle-single\");\n  const [isLoading, setIsLoading] = useState(false);\n  const { toast } = useToast();\n\n  // Mettre Ã  jour le plan sÃ©lectionnÃ© quand targetPlan change\n  useEffect(() => {\n    if (targetPlan) {\n      setSelectedPlan(targetPlan);\n    }\n  }, [targetPlan]);\n\n  const handleSubscribe = async () => {\n    setIsLoading(true);\n    \n    try {\n      console.log('ğŸ¯ DÃ©but du processus de paiement pour le plan:', selectedPlan);\n      \n      const stripe = await stripePromise;\n      if (!stripe) {\n        throw new Error(\"Stripe n'a pas pu Ãªtre initialisÃ©. VÃ©rifiez votre configuration Stripe.\");\n      }\n\n      const plan = subscriptionPlans.find(p => p.id === selectedPlan);\n      if (!plan) {\n        throw new Error(`Plan non trouvÃ©: ${selectedPlan}`);\n      }\n\n      console.log('ğŸ“¦ Plan sÃ©lectionnÃ©:', plan);\n\n      // CrÃ©er la session de checkout\n      console.log('ğŸ“¡ Appel API /api/subscriptions/create...');\n      const response = await fetch('/api/subscriptions/create', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          planId: plan.id,\n          successUrl: `${window.location.origin}/dashboard?payment_success=true`,\n          cancelUrl: `${window.location.origin}/dashboard?payment_cancelled=true`,\n        }),\n      });\n\n      console.log('ğŸ“¡ RÃ©ponse API status:', response.status);\n      \n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('âŒ Erreur HTTP:', response.status, errorText);\n        throw new Error(`Erreur serveur (${response.status}): ${errorText}`);\n      }\n\n      const data = await response.json();\n      console.log('ğŸ“¡ DonnÃ©es reÃ§ues:', data);\n      \n      if (data.error || data.message) {\n        throw new Error(data.error || data.message);\n      }\n\n      // VÃ©rifier la prÃ©sence des donnÃ©es nÃ©cessaires\n      if (!data.url && !data.sessionId) {\n        console.error('âŒ DonnÃ©es manquantes dans la rÃ©ponse:', data);\n        throw new Error(\"RÃ©ponse serveur invalide: aucune URL de redirection fournie\");\n      }\n\n      // Rediriger vers l'URL de checkout Stripe moderne\n      if (data.url) {\n        console.log('ğŸš€ Redirection vers Stripe Checkout:', data.url);\n        window.location.href = data.url;\n      } else if (data.sessionId) {\n        console.log('ğŸš€ Redirection Stripe avec sessionId:', data.sessionId);\n        // Fallback: utiliser l'ancienne mÃ©thode si l'URL n'est pas disponible\n        const { error: stripeError } = await stripe.redirectToCheckout({\n          sessionId: data.sessionId,\n        });\n        if (stripeError) {\n          console.error('âŒ Erreur Stripe redirectToCheckout:', stripeError);\n          throw new Error(stripeError.message);\n        }\n      }\n    } catch (error: any) {\n      console.error('âŒ Erreur complÃ¨te de paiement:', error);\n      \n      let errorMessage = \"Une erreur est survenue lors de la configuration du paiement.\";\n      \n      if (error.message) {\n        errorMessage = error.message;\n      }\n      \n      // Messages d'erreur plus spÃ©cifiques\n      if (error.message?.includes('fetch')) {\n        errorMessage = \"Impossible de contacter le serveur. VÃ©rifiez votre connexion internet.\";\n      } else if (error.message?.includes('Stripe')) {\n        errorMessage = `Erreur Stripe: ${error.message}`;\n      }\n      \n      toast({\n        title: \"Erreur de paiement\",\n        description: errorMessage,\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const formatPrice = (priceInCents: number, interval?: string) => {\n    const price = (priceInCents / 100).toFixed(2);\n    \n    if (interval === 'monthly') return `${price}â‚¬/mois`;\n    if (interval === 'pack_single') return `${price}â‚¬`;\n    if (interval === 'pack_10') return `${price}â‚¬`;\n    \n    return `${price}â‚¬`;\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"sm:max-w-4xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle className=\"text-2xl font-bold text-center\">\n            ğŸ‰ Activez votre abonnement\n          </DialogTitle>\n          <p className=\"text-center text-muted-foreground\">\n            Choisissez votre offre et commencez Ã  profiter de toutes les fonctionnalitÃ©s\n          </p>\n        </DialogHeader>\n\n        <div className=\"space-y-6\">\n          <RadioGroup\n            value={selectedPlan}\n            onValueChange={setSelectedPlan}\n            className=\"grid lg:grid-cols-3 md:grid-cols-2 gap-6\"\n          >\n            {subscriptionPlans.map((plan) => (\n              <Label\n                key={plan.id}\n                htmlFor={plan.id}\n                className={`relative cursor-pointer block transition-all duration-200 ${\n                  selectedPlan === plan.id\n                    ? 'ring-2 ring-primary ring-offset-2'\n                    : 'hover:shadow-lg'\n                }`}\n              >\n                <RadioGroupItem\n                  value={plan.id}\n                  id={plan.id}\n                  className=\"sr-only\"\n                />\n                <Card className={`h-full border-2 transition-all duration-200 ${\n                  selectedPlan === plan.id\n                    ? 'border-primary shadow-lg bg-primary/5'\n                    : 'border-border'\n                }`}>\n                  <CardHeader>\n                    <div className=\"flex items-center justify-between\">\n                      <CardTitle className=\"text-lg\">{plan.name}</CardTitle>\n                      {plan.badge && (\n                        <Badge className={plan.badgeColor}>\n                          {plan.badge}\n                        </Badge>\n                      )}\n                    </div>\n                    <div className=\"space-y-2\">\n                      <div className=\"text-2xl font-bold\">\n                        {formatPrice(plan.price, plan.interval)}\n                      </div>\n                      {plan.interval === 'pack_10' && (\n                        <div className=\"text-sm text-muted-foreground\">\n                          Soit 15â‚¬ par Ã©vÃ©nement\n                        </div>\n                      )}\n                    </div>\n                    <CardDescription className=\"text-sm\">\n                      {plan.description}\n                    </CardDescription>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-2\">\n                      {plan.features.slice(0, 5).map((feature, index) => (\n                        <div key={index} className=\"flex items-center text-sm\">\n                          <i className=\"fas fa-check text-green-500 mr-2 w-3\"></i>\n                          <span>{feature}</span>\n                        </div>\n                      ))}\n                      {plan.features.length > 5 && (\n                        <div className=\"text-xs text-muted-foreground mt-2\">\n                          + {plan.features.length - 5} autres fonctionnalitÃ©s\n                        </div>\n                      )}\n                    </div>\n                  </CardContent>\n                </Card>\n              </Label>\n            ))}\n          </RadioGroup>\n\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 dark:bg-blue-950 dark:border-blue-800\">\n            <div className=\"flex items-start space-x-3\">\n              <i className=\"fas fa-shield-alt text-blue-500 mt-1\"></i>\n              <div className=\"text-sm text-blue-700 dark:text-blue-300\">\n                <p className=\"font-medium mb-1\">Paiement 100% sÃ©curisÃ©</p>\n                <ul className=\"space-y-1 text-xs\">\n                  <li>â€¢ Chiffrement SSL et protocoles de sÃ©curitÃ© Stripe</li>\n                  <li>â€¢ Aucune donnÃ©e de carte bancaire stockÃ©e sur nos serveurs</li>\n                  <li>â€¢ RÃ©siliation possible Ã  tout moment depuis votre dashboard</li>\n                  <li>â€¢ Remboursement sous 14 jours si vous n'Ãªtes pas satisfait</li>\n                </ul>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"flex space-x-4\">\n            <Button\n              variant=\"outline\"\n              onClick={onClose}\n              className=\"flex-1\"\n              disabled={isLoading}\n            >\n              Annuler\n            </Button>\n            <Button\n              onClick={handleSubscribe}\n              className=\"flex-1 bg-primary hover:bg-primary/90\"\n              disabled={isLoading}\n            >\n              {isLoading ? (\n                <>\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                  Configuration...\n                </>\n              ) : (\n                <>\n                  <i className=\"fas fa-credit-card mr-2\"></i>\n                  ProcÃ©der au paiement\n                </>\n              )}\n            </Button>\n          </div>\n\n          <div className=\"text-xs text-center text-muted-foreground\">\n            En continuant, vous acceptez nos conditions de service et notre politique de remboursement.\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}","size_bytes":13596},"client/src/components/subscription/StripePaymentForm.tsx":{"content":"import React, { useState, useEffect } from 'react';\nimport { loadStripe } from '@stripe/stripe-js';\nimport {\n  Elements,\n  CardElement,\n  useStripe,\n  useElements,\n  PaymentElement,\n  AddressElement,\n  LinkAuthenticationElement,\n} from '@stripe/react-stripe-js';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/card';\nimport { Button } from '../ui/button';\nimport { Badge } from '../ui/badge';\nimport { Input } from '../ui/input';\nimport { Label } from '../ui/label';\nimport { Separator } from '../ui/separator';\nimport { \n  CreditCard, \n  Lock, \n  Shield, \n  CheckCircle, \n  AlertCircle,\n  User,\n  Mail,\n  MapPin,\n  Calendar\n} from 'lucide-react';\nimport { toast } from 'sonner';\nimport { cn } from '../../lib/utils';\n\n// Configuration Stripe\nconst stripePromise = loadStripe(\n  import.meta.env.VITE_STRIPE_PUBLIC_KEY || \n  'pk_test_51S3zPW8XM0zNL8ZMhdeyjgfrp4eKmTmzKRMqRENFwKoUjfSByTeGfWXfcf6Vr6FF9FJSBauMvjTp6cnDFDJwfPxN00VrImPBXj'\n);\n\n// Types\ninterface PaymentFormProps {\n  planId: string;\n  planName: string;\n  planPrice: number;\n  currency: string;\n  billingInterval: string;\n  onSuccess: () => void;\n  onCancel: () => void;\n}\n\ninterface PaymentFormData {\n  email?: string;\n  name?: string;\n  address?: {\n    line1: string;\n    line2?: string;\n    city: string;\n    state: string;\n    postal_code: string;\n    country: string;\n  };\n}\n\n// Styles personnalisÃ©s pour Stripe Elements\nconst stripeElementsOptions = {\n  appearance: {\n    theme: 'stripe' as const,\n    variables: {\n      colorPrimary: '#3b82f6',\n      colorBackground: '#ffffff',\n      colorText: '#1f2937',\n      colorDanger: '#ef4444',\n      fontFamily: 'system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif',\n      spacingUnit: '4px',\n      borderRadius: '6px',\n    },\n    rules: {\n      '.Input': {\n        border: '1px solid #d1d5db',\n        boxShadow: '0 1px 2px 0 rgba(0, 0, 0, 0.05)',\n      },\n      '.Input:focus': {\n        border: '1px solid #3b82f6',\n        boxShadow: '0 0 0 3px rgba(59, 130, 246, 0.1)',\n      },\n      '.Label': {\n        fontWeight: '500',\n        fontSize: '14px',\n        color: '#374151',\n      },\n    },\n  },\n};\n\n// Composant principal du formulaire de paiement\nfunction PaymentForm({ planId, planName, planPrice, currency, billingInterval, onSuccess, onCancel }: PaymentFormProps) {\n  const stripe = useStripe();\n  const elements = useElements();\n  \n  const [isProcessing, setIsProcessing] = useState(false);\n  const [paymentError, setPaymentError] = useState<string | null>(null);\n  const [formData, setFormData] = useState<PaymentFormData>({});\n  const [clientSecret, setClientSecret] = useState<string>('');\n  const [paymentElementReady, setPaymentElementReady] = useState(false);\n\n  // Initialiser l'intention de paiement\n  useEffect(() => {\n    const initializePayment = async () => {\n      try {\n        const response = await fetch('/api/stripe/create-payment-intent', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          credentials: 'include',\n          body: JSON.stringify({\n            planId,\n            amount: planPrice,\n            currency: currency.toLowerCase(),\n            automatic_payment_methods: { enabled: true },\n          }),\n        });\n\n        if (!response.ok) {\n          throw new Error('Erreur lors de la crÃ©ation de l\\'intention de paiement');\n        }\n\n        const { client_secret } = await response.json();\n        setClientSecret(client_secret);\n      } catch (error: any) {\n        console.error('Erreur initialisation paiement:', error);\n        setPaymentError(error.message);\n        toast.error(error.message);\n      }\n    };\n\n    initializePayment();\n  }, [planId, planPrice, currency]);\n\n  // Formatage du prix\n  const formatPrice = (price: number, curr: string = 'EUR') => {\n    return new Intl.NumberFormat('fr-FR', {\n      style: 'currency',\n      currency: curr,\n    }).format(price / 100);\n  };\n\n  // Gestion de la soumission du formulaire\n  const handleSubmit = async (event: React.FormEvent) => {\n    event.preventDefault();\n    \n    if (!stripe || !elements) {\n      toast.error('Stripe n\\'est pas encore chargÃ©. Veuillez patienter.');\n      return;\n    }\n\n    if (!paymentElementReady) {\n      toast.error('Le formulaire de paiement n\\'est pas prÃªt. Veuillez patienter.');\n      return;\n    }\n\n    setIsProcessing(true);\n    setPaymentError(null);\n\n    try {\n      // Confirmer le paiement avec Stripe\n      const { error, paymentIntent } = await stripe.confirmPayment({\n        elements,\n        confirmParams: {\n          return_url: `${window.location.origin}/dashboard?payment=success`,\n          payment_method_data: {\n            billing_details: {\n              name: formData.name,\n              email: formData.email,\n              address: formData.address,\n            },\n          },\n        },\n        redirect: 'if_required',\n      });\n\n      if (error) {\n        console.error('Erreur paiement Stripe:', error);\n        setPaymentError(error.message || 'Erreur lors du paiement');\n        toast.error(error.message || 'Erreur lors du paiement');\n      } else if (paymentIntent && paymentIntent.status === 'succeeded') {\n        // Paiement rÃ©ussi\n        toast.success('Paiement rÃ©ussi ! Activation de votre abonnement...');\n        \n        // Notifier le succÃ¨s au parent\n        setTimeout(() => {\n          onSuccess();\n        }, 1500);\n      } else {\n        // Statut inattendu\n        console.warn('Statut de paiement inattendu:', paymentIntent?.status);\n        setPaymentError('Statut de paiement inattendu');\n      }\n    } catch (error: any) {\n      console.error('Erreur lors de la confirmation du paiement:', error);\n      setPaymentError('Erreur technique lors du paiement');\n      toast.error('Erreur technique lors du paiement');\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  // Rendu du composant\n  return (\n    <div className=\"max-w-2xl mx-auto space-y-8\">\n      {/* RÃ©sumÃ© de la commande */}\n      <Card className=\"border-2 border-blue-100 bg-gradient-to-br from-blue-50 to-indigo-50\">\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Shield className=\"w-5 h-5 text-blue-500\" />\n            RÃ©sumÃ© de votre commande\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"font-semibold text-lg\">{planName}</h3>\n              <p className=\"text-sm text-gray-600\">\n                {billingInterval === 'monthly' ? 'Abonnement mensuel' : \n                 billingInterval === 'annual' ? 'Abonnement annuel' :\n                 billingInterval === 'pack_single' ? 'Pack Ã©vÃ©nement unique' :\n                 billingInterval === 'pack_10' ? 'Pack 10 Ã©vÃ©nements' : \n                 'Paiement unique'}\n              </p>\n            </div>\n            <div className=\"text-right\">\n              <div className=\"text-2xl font-bold text-blue-600\">\n                {formatPrice(planPrice, currency)}\n              </div>\n              <div className=\"text-sm text-gray-500\">\n                {billingInterval === 'monthly' && '/mois'}\n                {billingInterval === 'annual' && '/an'}\n              </div>\n            </div>\n          </div>\n          \n          <Separator />\n          \n          <div className=\"flex items-center gap-2 text-sm text-green-600\">\n            <CheckCircle className=\"w-4 h-4\" />\n            <span>Activation immÃ©diate aprÃ¨s paiement</span>\n          </div>\n          \n          <div className=\"flex items-center gap-2 text-sm text-green-600\">\n            <CheckCircle className=\"w-4 h-4\" />\n            <span>RÃ©siliation possible Ã  tout moment</span>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Formulaire de paiement */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <CreditCard className=\"w-5 h-5 text-gray-700\" />\n            Informations de paiement\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            {/* Authentification par lien (email) */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"link-auth\" className=\"flex items-center gap-2\">\n                <Mail className=\"w-4 h-4\" />\n                Adresse email\n              </Label>\n              <LinkAuthenticationElement\n                id=\"link-auth\"\n                options={{\n                  defaultValues: {\n                    email: formData.email || '',\n                  },\n                }}\n                onChange={(event) => {\n                  if (event.value.email) {\n                    setFormData(prev => ({\n                      ...prev,\n                      email: event.value.email,\n                    }));\n                  }\n                }}\n              />\n            </div>\n\n            <Separator />\n\n            {/* Ã‰lÃ©ment de paiement principal */}\n            <div className=\"space-y-4\">\n              <Label className=\"flex items-center gap-2\">\n                <CreditCard className=\"w-4 h-4\" />\n                Moyens de paiement\n              </Label>\n              \n              {clientSecret && (\n                <div className=\"p-4 border border-gray-200 rounded-lg bg-gray-50\">\n                  <PaymentElement\n                    id=\"payment-element\"\n                    options={{\n                      layout: 'accordion',\n                      defaultValues: {\n                        billingDetails: {\n                          name: formData.name,\n                          email: formData.email,\n                          address: formData.address,\n                        },\n                      },\n                    }}\n                    onReady={() => {\n                      setPaymentElementReady(true);\n                    }}\n                    onChange={(event) => {\n                      if (event.error) {\n                        setPaymentError(event.error.message);\n                      } else {\n                        setPaymentError(null);\n                      }\n                    }}\n                  />\n                </div>\n              )}\n            </div>\n\n            <Separator />\n\n            {/* Adresse de facturation */}\n            <div className=\"space-y-2\">\n              <Label className=\"flex items-center gap-2\">\n                <MapPin className=\"w-4 h-4\" />\n                Adresse de facturation\n              </Label>\n              <div className=\"p-4 border border-gray-200 rounded-lg bg-gray-50\">\n                <AddressElement\n                  options={{\n                    mode: 'billing',\n                    allowedCountries: ['FR', 'BE', 'CH', 'CA', 'US'],\n                    defaultValues: {\n                      name: formData.name || '',\n                      address: formData.address || {\n                        line1: '',\n                        city: '',\n                        state: '',\n                        postal_code: '',\n                        country: 'FR',\n                      },\n                    },\n                  }}\n                  onChange={(event) => {\n                    if (event.complete) {\n                      setFormData(prev => ({\n                        ...prev,\n                        name: event.value.name,\n                        address: event.value.address,\n                      }));\n                    }\n                  }}\n                />\n              </div>\n            </div>\n\n            {/* Message d'erreur */}\n            {paymentError && (\n              <div className=\"flex items-center gap-2 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700\">\n                <AlertCircle className=\"w-5 h-5\" />\n                <span>{paymentError}</span>\n              </div>\n            )}\n\n            {/* Boutons d'action */}\n            <div className=\"flex flex-col sm:flex-row gap-4 pt-4\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={onCancel}\n                disabled={isProcessing}\n                className=\"flex-1\"\n              >\n                Annuler\n              </Button>\n              \n              <Button\n                type=\"submit\"\n                disabled={!stripe || !paymentElementReady || isProcessing}\n                className=\"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700\"\n              >\n                {isProcessing ? (\n                  <>\n                    <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\" />\n                    Traitement en cours...\n                  </>\n                ) : (\n                  <>\n                    <Lock className=\"w-4 h-4 mr-2\" />\n                    Payer {formatPrice(planPrice, currency)}\n                  </>\n                )}\n              </Button>\n            </div>\n\n            {/* Informations de sÃ©curitÃ© */}\n            <div className=\"bg-gray-50 p-4 rounded-lg border\">\n              <div className=\"flex items-start gap-3\">\n                <Shield className=\"w-5 h-5 text-green-500 mt-0.5\" />\n                <div className=\"space-y-1\">\n                  <h4 className=\"font-medium text-sm\">Paiement sÃ©curisÃ©</h4>\n                  <p className=\"text-xs text-gray-600\">\n                    Vos informations de paiement sont cryptÃ©es et traitÃ©es de maniÃ¨re \n                    sÃ©curisÃ©e par Stripe. Nous ne stockons jamais vos donnÃ©es de carte bancaire.\n                  </p>\n                  <div className=\"flex items-center gap-4 text-xs text-gray-500 mt-2\">\n                    <span className=\"flex items-center gap-1\">\n                      <CheckCircle className=\"w-3 h-3\" />\n                      Cryptage SSL\n                    </span>\n                    <span className=\"flex items-center gap-1\">\n                      <CheckCircle className=\"w-3 h-3\" />\n                      PCI DSS\n                    </span>\n                    <span className=\"flex items-center gap-1\">\n                      <CheckCircle className=\"w-3 h-3\" />\n                      ConformitÃ© RGPD\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </form>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n\n// Wrapper avec Elements Provider\nexport function StripePaymentForm(props: PaymentFormProps) {\n  return (\n    <Elements\n      stripe={stripePromise}\n      options={{\n        ...stripeElementsOptions,\n        mode: 'payment',\n        currency: props.currency.toLowerCase(),\n        amount: props.planPrice,\n      }}\n    >\n      <PaymentForm {...props} />\n    </Elements>\n  );\n}\n\nexport default StripePaymentForm;","size_bytes":14938},"client/src/components/subscription/SubscriptionCheckout.tsx":{"content":"import React, { useState, useEffect } from 'react';\nimport { loadStripe } from '@stripe/stripe-js';\nimport {\n  Elements,\n  CardElement,\n  useStripe,\n  useElements,\n  PaymentElement,\n  EmbeddedCheckout,\n  EmbeddedCheckoutProvider\n} from '@stripe/react-stripe-js';\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '../ui/card';\nimport { Button } from '../ui/button';\nimport { Badge } from '../ui/badge';\nimport { Separator } from '../ui/separator';\nimport { CheckCircle, CreditCard, Lock, Shield, Crown, Star, Sparkles } from 'lucide-react';\nimport { toast } from 'sonner';\nimport { cn } from '../../lib/utils';\nimport { api } from '../../lib/api';\nimport { useAuth } from '../../hooks/useAuth';\n\n// Types pour les plans d'abonnement\ninterface SubscriptionPlan {\n  id: string;\n  name: string;\n  type: 'decouverte' | 'evenementielle' | 'pro_club' | 'pro_pme' | 'pro_entreprise';\n  price: number;\n  currency: string;\n  billingInterval: 'monthly' | 'annual' | 'pack_single' | 'pack_10';\n  maxEvents: number | null;\n  maxInvitations: number | null;\n  validityMonths: number | null;\n  features: string[];\n  description: string;\n  stripePriceId?: string;\n  popular?: boolean;\n  recommended?: boolean;\n}\n\ninterface StripeCheckoutProps {\n  plans: SubscriptionPlan[];\n  currentPlan?: string;\n  onPlanSelect: (planId: string) => void;\n  loading?: boolean;\n}\n\n// ClÃ© publique Stripe (Ã  configurer dans les variables d'environnement)\nconst stripePromise = loadStripe(\n  import.meta.env.VITE_STRIPE_PUBLIC_KEY || \n  'pk_test_51S3zPW8XM0zNL8ZMhdeyjgfrp4eKmTmzKRMqRENFwKoUjfSByTeGfWXfcf6Vr6FF9FJSBauMvjTp6cnDFDJwfPxN00VrImPBXj'\n);\n\n// Composant principal de checkout Stripe\nexport function SubscriptionCheckout({ plans, currentPlan, onPlanSelect, loading }: StripeCheckoutProps) {\n  const [selectedPlan, setSelectedPlan] = useState<string | null>(null);\n  const [checkoutMode, setCheckoutMode] = useState<'selection' | 'payment'>('selection');\n  const [clientSecret, setClientSecret] = useState<string>('');\n  const [isProcessing, setIsProcessing] = useState(false);\n\n  // Fonction pour formater le prix\n  const formatPrice = (price: number, currency: string = 'EUR') => {\n    return new Intl.NumberFormat('fr-FR', {\n      style: 'currency',\n      currency: currency,\n    }).format(price / 100);\n  };\n\n  // Fonction pour obtenir l'icÃ´ne du plan\n  const getPlanIcon = (type: string) => {\n    switch (type) {\n      case 'decouverte':\n        return <Star className=\"w-6 h-6 text-blue-500\" />;\n      case 'evenementielle':\n        return <Sparkles className=\"w-6 h-6 text-orange-500\" />;\n      case 'pro_club':\n      case 'pro_pme':\n      case 'pro_entreprise':\n        return <Crown className=\"w-6 h-6 text-purple-500\" />;\n      default:\n        return <Star className=\"w-6 h-6 text-gray-500\" />;\n    }\n  };\n\n  // Fonction pour obtenir l'intervalle de facturation formatÃ©\n  const getBillingInterval = (interval: string) => {\n    switch (interval) {\n      case 'monthly':\n        return '/mois';\n      case 'annual':\n        return '/an';\n      case 'pack_single':\n        return ' (pack unique)';\n      case 'pack_10':\n        return ' (pack 10)';\n      default:\n        return '';\n    }\n  };\n\n  // Gestion de la sÃ©lection d'un plan\n  const handlePlanSelection = async (planId: string) => {\n    if (loading || isProcessing) return;\n    \n    setSelectedPlan(planId);\n    const plan = plans.find(p => p.id === planId);\n    \n    if (!plan || plan.type === 'decouverte') {\n      // Plan gratuit - traitement immÃ©diat\n      onPlanSelect(planId);\n      return;\n    }\n\n    setIsProcessing(true);\n    \n    try {\n      // Utiliser l'API client avec authentification\n      const successUrl = `${window.location.origin}/dashboard?payment=success&session_id={CHECKOUT_SESSION_ID}`;\n      const cancelUrl = `${window.location.origin}/dashboard/subscription?payment=cancelled`;\n      \n      const response = await api.subscription.createPayment(planId, successUrl, cancelUrl);\n      \n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Erreur lors de la crÃ©ation de la session de paiement');\n      }\n\n      const data = await response.json();\n      \n      if (data.url) {\n        // Rediriger vers l'URL de checkout Stripe moderne\n        window.location.href = data.url;\n      } else if (data.sessionId) {\n        // Utiliser le checkout intÃ©grÃ© avec le sessionId\n        setClientSecret(data.sessionId);\n        setCheckoutMode('payment');\n      } else {\n        throw new Error(\"Aucune URL de redirection ou session ID fournie\");\n      }\n      \n    } catch (error: any) {\n      console.error('Erreur lors de la crÃ©ation de la session:', error);\n      toast.error(error.message || 'Erreur lors de la crÃ©ation de la session de paiement');\n      setSelectedPlan(null);\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  // Rendu du composant de sÃ©lection des plans\n  const renderPlanSelection = () => (\n    <div className=\"space-y-8\">\n      {/* En-tÃªte */}\n      <div className=\"text-center space-y-4\">\n        <h2 className=\"text-3xl font-bold text-gray-900\">\n          Choisissez votre plan\n        </h2>\n        <p className=\"text-lg text-gray-600 max-w-2xl mx-auto\">\n          SÃ©lectionnez l'offre qui correspond le mieux Ã  vos besoins. \n          Paiement sÃ©curisÃ© par Stripe.\n        </p>\n        <div className=\"flex items-center justify-center gap-2 text-sm text-gray-500\">\n          <Shield className=\"w-4 h-4\" />\n          <span>Paiement 100% sÃ©curisÃ©</span>\n          <Lock className=\"w-4 h-4\" />\n          <span>Cryptage SSL</span>\n        </div>\n      </div>\n\n      {/* Grille des plans */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-7xl mx-auto\">\n        {plans.map((plan) => (\n          <Card\n            key={plan.id}\n            className={cn(\n              \"relative transition-all duration-300 cursor-pointer\",\n              \"hover:shadow-xl hover:scale-105\",\n              plan.popular && \"ring-2 ring-blue-500 shadow-lg\",\n              plan.recommended && \"ring-2 ring-green-500 shadow-lg\",\n              selectedPlan === plan.id && \"ring-2 ring-purple-500 shadow-lg\",\n              currentPlan === plan.id && \"bg-gradient-to-br from-blue-50 to-indigo-50\"\n            )}\n            onClick={() => handlePlanSelection(plan.id)}\n          >\n            {/* Badge pour les plans populaires/recommandÃ©s */}\n            {plan.popular && (\n              <Badge className=\"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-blue-500 text-white\">\n                Populaire\n              </Badge>\n            )}\n            {plan.recommended && (\n              <Badge className=\"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-green-500 text-white\">\n                RecommandÃ©\n              </Badge>\n            )}\n\n            <CardHeader className=\"text-center space-y-4\">\n              {/* IcÃ´ne du plan */}\n              <div className=\"flex justify-center\">\n                {getPlanIcon(plan.type)}\n              </div>\n\n              {/* Nom et description */}\n              <div>\n                <CardTitle className=\"text-xl font-bold\">{plan.name}</CardTitle>\n                <CardDescription className=\"text-sm\">{plan.description}</CardDescription>\n              </div>\n\n              {/* Prix */}\n              <div className=\"space-y-2\">\n                <div className=\"text-3xl font-bold text-gray-900\">\n                  {plan.price === 0 ? (\n                    'Gratuit'\n                  ) : (\n                    <>\n                      {formatPrice(plan.price)}\n                      <span className=\"text-lg text-gray-500\">\n                        {getBillingInterval(plan.billingInterval)}\n                      </span>\n                    </>\n                  )}\n                </div>\n                {plan.validityMonths && (\n                  <div className=\"text-sm text-gray-500\">\n                    Valable {plan.validityMonths} mois\n                  </div>\n                )}\n              </div>\n            </CardHeader>\n\n            <CardContent className=\"space-y-6\">\n              {/* Limites d'usage */}\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center justify-between text-sm\">\n                  <span>Ã‰vÃ©nements</span>\n                  <span className=\"font-semibold\">\n                    {plan.maxEvents === null ? 'IllimitÃ©s' : plan.maxEvents}\n                  </span>\n                </div>\n                <div className=\"flex items-center justify-between text-sm\">\n                  <span>Invitations</span>\n                  <span className=\"font-semibold\">\n                    {plan.maxInvitations === null ? 'IllimitÃ©es' : plan.maxInvitations}\n                  </span>\n                </div>\n              </div>\n\n              <Separator />\n\n              {/* Liste des fonctionnalitÃ©s */}\n              <div className=\"space-y-3\">\n                <h4 className=\"font-medium text-sm\">FonctionnalitÃ©s incluses :</h4>\n                <ul className=\"space-y-2\">\n                  {plan.features.map((feature, index) => (\n                    <li key={index} className=\"flex items-start gap-2 text-sm\">\n                      <CheckCircle className=\"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                      <span className=\"text-gray-700\">{feature}</span>\n                    </li>\n                  ))}\n                </ul>\n              </div>\n\n              {/* Bouton de sÃ©lection */}\n              <Button\n                className={cn(\n                  \"w-full mt-6\",\n                  plan.type === 'decouverte' && \"bg-gray-600 hover:bg-gray-700\",\n                  plan.type === 'evenementielle' && \"bg-orange-600 hover:bg-orange-700\",\n                  ['pro_club', 'pro_pme', 'pro_entreprise'].includes(plan.type) && \n                    \"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700\"\n                )}\n                disabled={loading || isProcessing || currentPlan === plan.id}\n              >\n                {isProcessing && selectedPlan === plan.id ? (\n                  <>\n                    <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\" />\n                    Traitement...\n                  </>\n                ) : currentPlan === plan.id ? (\n                  'Plan actuel'\n                ) : plan.type === 'decouverte' ? (\n                  'Choisir ce plan'\n                ) : (\n                  <>\n                    <CreditCard className=\"w-4 h-4 mr-2\" />\n                    Souscrire maintenant\n                  </>\n                )}\n              </Button>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n\n      {/* Informations de sÃ©curitÃ© */}\n      <div className=\"text-center space-y-4 pt-8\">\n        <div className=\"flex items-center justify-center gap-6 text-sm text-gray-500\">\n          <div className=\"flex items-center gap-2\">\n            <Shield className=\"w-4 h-4\" />\n            <span>Paiement sÃ©curisÃ© par Stripe</span>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <Lock className=\"w-4 h-4\" />\n            <span>DonnÃ©es cryptÃ©es</span>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <CheckCircle className=\"w-4 h-4\" />\n            <span>ConformitÃ© PCI DSS</span>\n          </div>\n        </div>\n        <p className=\"text-xs text-gray-400\">\n          Tous les paiements sont traitÃ©s de maniÃ¨re sÃ©curisÃ©e. \n          Vos donnÃ©es de carte ne sont jamais stockÃ©es sur nos serveurs.\n        </p>\n      </div>\n    </div>\n  );\n\n  // Composant de checkout intÃ©grÃ© (si nÃ©cessaire)\n  const renderEmbeddedCheckout = () => (\n    <div className=\"max-w-2xl mx-auto\">\n      <div className=\"text-center mb-8\">\n        <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">\n          Finalisation de votre commande\n        </h2>\n        <p className=\"text-gray-600\">\n          Saisissez vos informations de paiement de maniÃ¨re sÃ©curisÃ©e\n        </p>\n      </div>\n      \n      {clientSecret && (\n        <EmbeddedCheckoutProvider\n          stripe={stripePromise}\n          options={{\n            clientSecret,\n            onComplete: () => {\n              toast.success('Paiement rÃ©ussi ! Redirection en cours...');\n              setTimeout(() => {\n                window.location.href = '/dashboard?payment=success';\n              }, 2000);\n            }\n          }}\n        >\n          <EmbeddedCheckout />\n        </EmbeddedCheckoutProvider>\n      )}\n      \n      <div className=\"mt-6 text-center\">\n        <Button\n          variant=\"outline\"\n          onClick={() => {\n            setCheckoutMode('selection');\n            setClientSecret('');\n            setSelectedPlan(null);\n          }}\n        >\n          Retour Ã  la sÃ©lection\n        </Button>\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-12 px-4\">\n      <div className=\"container mx-auto\">\n        {checkoutMode === 'selection' ? renderPlanSelection() : renderEmbeddedCheckout()}\n      </div>\n    </div>\n  );\n}\n\n// Hook personnalisÃ© pour rÃ©cupÃ©rer les plans d'abonnement\nexport function useSubscriptionPlans() {\n  const [plans, setPlans] = useState<SubscriptionPlan[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const fetchPlans = async () => {\n      try {\n        // Utiliser l'API client \n        const response = await api.subscription.getPlans();\n        \n        if (!response.ok) {\n          throw new Error('Erreur lors du chargement des plans');\n        }\n        \n        const data = await response.json();\n        \n        // Marquer certains plans comme populaires/recommandÃ©s\n        const processedPlans = Object.values(data.plans as SubscriptionPlan[]).map((plan: SubscriptionPlan) => ({\n          ...plan,\n          popular: plan.type === 'pro_club',\n          recommended: plan.type === 'evenementielle'\n        }));\n        \n        setPlans(processedPlans);\n      } catch (err: any) {\n        setError(err.message);\n        toast.error('Erreur lors du chargement des plans d\\'abonnement');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchPlans();\n  }, []);\n\n  return { plans, loading, error };\n}\n\nexport default SubscriptionCheckout;","size_bytes":14513},"client/src/components/subscription/SubscriptionInfo.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useState } from \"react\";\nimport PaymentSetup from \"./PaymentSetup\";\n\ninterface SubscriptionLimits {\n  events: {\n    current: number;\n    limit?: number;\n  };\n  invitations: {\n    current: number;\n    limit?: number;\n  };\n}\n\nexport default function SubscriptionInfo() {\n  const { organization } = useAuth();\n  const [showPaymentSetup, setShowPaymentSetup] = useState(false);\n\n  const { data: subscriptionInfo, isLoading: subscriptionLoading } = useQuery({\n    queryKey: [\"/api/stripe/subscription-info\"],\n    enabled: !!organization,\n  });\n\n  const { data: limits, isLoading: limitsLoading } = useQuery<SubscriptionLimits>({\n    queryKey: [\"/api/subscription/limits\"],\n    enabled: !!organization,\n  });\n\n  if (!organization) return null;\n\n  const isDiscoveryPlan = organization.subscriptionType === 'decouverte';\n  const isEventPlan = organization.subscriptionType === 'evenementielle';\n  const isProPlan = ['pro_club', 'pro_pme', 'pro_entreprise'].includes(organization.subscriptionType || '');\n  \n  const getSubscriptionName = () => {\n    switch (organization.subscriptionType) {\n      case 'decouverte': return 'DÃ©couverte';\n      case 'evenementielle': return 'Ã‰vÃ©nementielle';\n      case 'pro_club': return 'Clubs & Associations';\n      case 'pro_pme': return 'PME';\n      case 'pro_entreprise': return 'Grandes Entreprises';\n      default: return 'DÃ©couverte';\n    }\n  };\n  \n  const getSubscriptionDescription = () => {\n    switch (organization.subscriptionType) {\n      case 'decouverte': return 'Parfait pour dÃ©couvrir la plateforme';\n      case 'evenementielle': return 'IdÃ©al pour les organisateurs occasionnels';\n      case 'pro_club': return 'ConÃ§u pour les clubs sportifs et associations';\n      case 'pro_pme': return 'IdÃ©al pour les petites et moyennes entreprises';\n      case 'pro_entreprise': return 'Solution entreprise complÃ¨te';\n      default: return 'Parfait pour dÃ©couvrir la plateforme';\n    }\n  };\n\n  const getProgressPercentage = (current: number, limit?: number) => {\n    if (!limit) return 0;\n    return Math.min((current / limit) * 100, 100);\n  };\n\n  const isNearLimit = (current: number, limit?: number) => {\n    if (!limit) return false;\n    return current / limit >= 0.8; // 80% ou plus\n  };\n\n  const handleUpgrade = () => {\n    setShowPaymentSetup(true);\n  };\n\n  const handleManageBilling = async () => {\n    try {\n      const response = await fetch('/api/stripe/create-portal-session', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      });\n      \n      const { url } = await response.json();\n      window.open(url, '_blank');\n    } catch (error) {\n      console.error('Erreur ouverture portail:', error);\n    }\n  };\n\n  if (subscriptionLoading || limitsLoading) {\n    return (\n      <Card>\n        <CardHeader>\n          <div className=\"animate-pulse space-y-2\">\n            <div className=\"h-4 bg-gray-200 rounded w-3/4\"></div>\n            <div className=\"h-3 bg-gray-200 rounded w-1/2\"></div>\n          </div>\n        </CardHeader>\n      </Card>\n    );\n  }\n\n  return (\n    <>\n      <Card className=\"border-l-4 border-l-primary\">\n        <CardHeader className=\"pb-3\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"p-2 bg-primary/10 rounded-lg\">\n                {isDiscoveryPlan ? (\n                  <i className=\"fas fa-rocket text-primary\"></i>\n                ) : (\n                  <i className=\"fas fa-star text-primary\"></i>\n                )}\n              </div>\n              <div>\n                <CardTitle className=\"text-lg\">\n                  Abonnement {getSubscriptionName()}\n                </CardTitle>\n                <CardDescription>\n                  {getSubscriptionDescription()}\n                </CardDescription>\n              </div>\n            </div>\n            <Badge \n              variant={isDiscoveryPlan ? \"secondary\" : \"default\"}\n              className={\n                isDiscoveryPlan \n                  ? \"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100\"\n                  : isEventPlan\n                  ? \"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-100\"\n                  : \"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100\"\n              }\n            >\n              {isDiscoveryPlan ? 'GRATUIT' : isEventPlan ? 'PACK' : 'PRO'}\n            </Badge>\n          </div>\n        </CardHeader>\n        \n        <CardContent className=\"space-y-4\">\n          {/* Limites d'utilisation pour l'offre dÃ©couverte */}\n          {isDiscoveryPlan && limits && (\n            <div className=\"space-y-4\">\n              {/* Ã‰vÃ©nements */}\n              <div>\n                <div className=\"flex items-center justify-between mb-2\">\n                  <span className=\"text-sm font-medium\">Ã‰vÃ©nements crÃ©Ã©s</span>\n                  <span className=\"text-sm text-muted-foreground\">\n                    {limits.events.current} / {limits.events.limit}\n                  </span>\n                </div>\n                <Progress \n                  value={getProgressPercentage(limits.events.current, limits.events.limit)} \n                  className={`h-2 ${isNearLimit(limits.events.current, limits.events.limit) ? 'bg-orange-100' : ''}`}\n                />\n                {isNearLimit(limits.events.current, limits.events.limit) && (\n                  <Alert className=\"mt-2\">\n                    <i className=\"fas fa-exclamation-triangle w-4 h-4\"></i>\n                    <AlertDescription className=\"text-sm\">\n                      Vous approchez de la limite d'Ã©vÃ©nements. Choisissez une offre payante pour crÃ©er plus d'Ã©vÃ©nements.\n                    </AlertDescription>\n                  </Alert>\n                )}\n              </div>\n\n              {/* Invitations */}\n              <div>\n                <div className=\"flex items-center justify-between mb-2\">\n                  <span className=\"text-sm font-medium\">Invitations envoyÃ©es</span>\n                  <span className=\"text-sm text-muted-foreground\">\n                    {limits.invitations.current} / {limits.invitations.limit}\n                  </span>\n                </div>\n                <Progress \n                  value={getProgressPercentage(limits.invitations.current, limits.invitations.limit)} \n                  className={`h-2 ${isNearLimit(limits.invitations.current, limits.invitations.limit) ? 'bg-orange-100' : ''}`}\n                />\n                {isNearLimit(limits.invitations.current, limits.invitations.limit) && (\n                  <Alert className=\"mt-2\">\n                    <i className=\"fas fa-exclamation-triangle w-4 h-4\"></i>\n                    <AlertDescription className=\"text-sm\">\n                      Vous approchez de la limite d'invitations. Choisissez une offre payante pour inviter sans limite.\n                    </AlertDescription>\n                  </Alert>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Statistiques pour les offres payantes */}\n          {(isEventPlan || isProPlan) && limits && (\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"text-center p-3 bg-blue-50 rounded-lg dark:bg-blue-950\">\n                <div className=\"text-2xl font-bold text-blue-600 dark:text-blue-400\">\n                  {limits.events.current}\n                </div>\n                <div className=\"text-sm text-blue-600 dark:text-blue-400\">Ã‰vÃ©nements crÃ©Ã©s</div>\n              </div>\n              <div className=\"text-center p-3 bg-blue-50 rounded-lg dark:bg-blue-950\">\n                <div className=\"text-2xl font-bold text-blue-600 dark:text-blue-400\">\n                  {limits.invitations.current}\n                </div>\n                <div className=\"text-sm text-blue-600 dark:text-blue-400\">Invitations envoyÃ©es</div>\n              </div>\n            </div>\n          )}\n\n          {/* FonctionnalitÃ©s incluses */}\n          <div className=\"space-y-2\">\n            <h4 className=\"font-medium text-sm\">FonctionnalitÃ©s incluses :</h4>\n            <div className=\"grid gap-1 text-sm\">\n              {isDiscoveryPlan ? (\n                <>\n                  <div className=\"flex items-center\">\n                    <i className=\"fas fa-check text-green-500 mr-2 w-4\"></i>\n                    <span>1 Ã©vÃ©nement maximum</span>\n                  </div>\n                  <div className=\"flex items-center\">\n                    <i className=\"fas fa-check text-green-500 mr-2 w-4\"></i>\n                    <span>Jusqu'Ã  20 invitations par Ã©vÃ©nement</span>\n                  </div>\n                  <div className=\"flex items-center\">\n                    <i className=\"fas fa-check text-green-500 mr-2 w-4\"></i>\n                    <span>Gestion du covoiturage</span>\n                  </div>\n                  <div className=\"flex items-center\">\n                    <i className=\"fas fa-check text-green-500 mr-2 w-4\"></i>\n                    <span>Support par email</span>\n                  </div>\n                </>\n              ) : (\n                <>\n                  <div className=\"flex items-center\">\n                    <i className=\"fas fa-check text-blue-500 mr-2 w-4\"></i>\n                    <span><strong>Ã‰vÃ©nements illimitÃ©s</strong></span>\n                  </div>\n                  <div className=\"flex items-center\">\n                    <i className=\"fas fa-check text-blue-500 mr-2 w-4\"></i>\n                    <span><strong>Invitations illimitÃ©es</strong></span>\n                  </div>\n                  <div className=\"flex items-center\">\n                    <i className=\"fas fa-check text-blue-500 mr-2 w-4\"></i>\n                    <span>Statistiques avancÃ©es</span>\n                  </div>\n                  <div className=\"flex items-center\">\n                    <i className=\"fas fa-check text-blue-500 mr-2 w-4\"></i>\n                    <span>Support prioritaire</span>\n                  </div>\n                  <div className=\"flex items-center\">\n                    <i className=\"fas fa-check text-blue-500 mr-2 w-4\"></i>\n                    <span>Messagerie avancÃ©e</span>\n                  </div>\n                </>\n              )}\n            </div>\n          </div>\n\n          {/* Actions */}\n          <div className=\"pt-2 border-t\">\n            {isDiscoveryPlan ? (\n              <Button \n                onClick={handleUpgrade}\n                className=\"w-full bg-primary hover:bg-primary/90\"\n              >\n                <i className=\"fas fa-arrow-up mr-2\"></i>\n                Choisir une offre\n              </Button>\n            ) : (\n              <div className=\"space-y-2\">\n                <Button \n                  onClick={handleManageBilling}\n                  variant=\"outline\"\n                  className=\"w-full\"\n                >\n                  <i className=\"fas fa-cog mr-2\"></i>\n                  GÃ©rer mon abonnement\n                </Button>\n                {subscriptionInfo?.subscriptionStatus && (\n                  <div className=\"text-center text-sm text-muted-foreground\">\n                    Statut : {subscriptionInfo.subscriptionStatus}\n                    {subscriptionInfo.currentPeriodEnd && (\n                      <span className=\"block\">\n                        Prochaine facturation : {new Date(subscriptionInfo.currentPeriodEnd * 1000).toLocaleDateString('fr-FR')}\n                      </span>\n                    )}\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      <PaymentSetup\n        isOpen={showPaymentSetup}\n        onClose={() => setShowPaymentSetup(false)}\n        onSuccess={() => {\n          setShowPaymentSetup(false);\n          // Recharger les donnÃ©es\n          window.location.reload();\n        }}\n      />\n    </>\n  );\n}","size_bytes":12333},"client/src/components/subscription/SubscriptionLimitsBanner.tsx":{"content":"import React, { useState, useEffect } from 'react';\nimport { Card, CardContent } from '../ui/card';\nimport { Button } from '../ui/button';\nimport { Progress } from '../ui/progress';\nimport { Badge } from '../ui/badge';\nimport { \n  AlertTriangle, \n  Crown, \n  ArrowRight, \n  X,\n  Calendar,\n  Mail,\n  Zap\n} from 'lucide-react';\n\ninterface SubscriptionLimits {\n  subscriptionType: 'decouverte' | 'evenementielle' | 'pro_club' | 'pro_pme' | 'pro_entreprise';\n  eventCreatedCount: number;\n  invitationsSentCount: number;\n  limits: {\n    maxEvents: number | null;\n    maxInvitations: number | null;\n  };\n  remainingEvents: number | null;\n  remainingInvitations: number | null;\n}\n\nexport function SubscriptionLimitsBanner() {\n  const [limits, setLimits] = useState<SubscriptionLimits | null>(null);\n  const [dismissed, setDismissed] = useState(false);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchLimits();\n  }, []);\n\n  const fetchLimits = async () => {\n    try {\n      const response = await fetch('/api/subscription/info', {\n        credentials: 'include',\n      });\n      \n      if (response.ok) {\n        const data = await response.json();\n        setLimits(data);\n      }\n    } catch (error) {\n      console.error('Error fetching subscription limits:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading || !limits || limits.subscriptionType !== 'decouverte' || dismissed) {\n    return null;\n  }\n\n  const isNearEventLimit = limits.remainingEvents !== null && limits.remainingEvents <= 0;\n  const isNearInvitationLimit = limits.remainingInvitations !== null && limits.remainingInvitations <= 5;\n  const showWarning = isNearEventLimit || isNearInvitationLimit;\n\n  if (!showWarning) {\n    return null;\n  }\n\n  return (\n    <Card className={`border-l-4 ${isNearEventLimit ? 'border-l-red-500 bg-red-50 dark:bg-red-950/20' : 'border-l-yellow-500 bg-yellow-50 dark:bg-yellow-950/20'}`}>\n      <CardContent className=\"p-4\">\n        <div className=\"flex items-start justify-between gap-4\">\n          <div className=\"flex items-start gap-3 flex-1\">\n            <div className=\"flex-shrink-0\">\n              {isNearEventLimit ? (\n                <AlertTriangle className=\"w-5 h-5 text-red-500\" />\n              ) : (\n                <AlertTriangle className=\"w-5 h-5 text-yellow-500\" />\n              )}\n            </div>\n            \n            <div className=\"flex-1 space-y-3\">\n              <div>\n                <h4 className={`font-medium ${isNearEventLimit ? 'text-red-900 dark:text-red-100' : 'text-yellow-900 dark:text-yellow-100'}`}>\n                  {isNearEventLimit ? 'Limite d\\'Ã©vÃ©nements atteinte' : 'Attention aux limites'}\n                </h4>\n                <p className={`text-sm mt-1 ${isNearEventLimit ? 'text-red-700 dark:text-red-200' : 'text-yellow-700 dark:text-yellow-200'}`}>\n                  {isNearEventLimit \n                    ? 'Vous ne pouvez plus crÃ©er d\\'Ã©vÃ©nements avec votre plan DÃ©couverte.'\n                    : 'Vous approchez des limites de votre plan DÃ©couverte.'\n                  }\n                </p>\n              </div>\n\n              {/* Usage Statistics */}\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-1\">\n                      <Calendar className=\"w-4 h-4\" />\n                      <span className=\"text-sm font-medium\">Ã‰vÃ©nements</span>\n                    </div>\n                    <span className=\"text-sm\">\n                      {limits.eventCreatedCount} / {limits.limits.maxEvents}\n                    </span>\n                  </div>\n                  <Progress \n                    value={limits.limits.maxEvents ? (limits.eventCreatedCount / limits.limits.maxEvents) * 100 : 0}\n                    className=\"h-2\"\n                  />\n                  {isNearEventLimit && (\n                    <p className=\"text-xs text-red-600 dark:text-red-400\">Limite atteinte</p>\n                  )}\n                </div>\n\n                <div className=\"space-y-2\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-1\">\n                      <Mail className=\"w-4 h-4\" />\n                      <span className=\"text-sm font-medium\">Invitations</span>\n                    </div>\n                    <span className=\"text-sm\">\n                      {limits.invitationsSentCount} / {limits.limits.maxInvitations}\n                    </span>\n                  </div>\n                  <Progress \n                    value={limits.limits.maxInvitations ? (limits.invitationsSentCount / limits.limits.maxInvitations) * 100 : 0}\n                    className=\"h-2\"\n                  />\n                  {isNearInvitationLimit && (\n                    <p className=\"text-xs text-yellow-600 dark:text-yellow-400\">\n                      Plus que {limits.remainingInvitations} invitations\n                    </p>\n                  )}\n                </div>\n              </div>\n\n              {/* Upgrade CTA */}\n              <div className=\"flex flex-col sm:flex-row gap-3 pt-2\">\n                <Button\n                  size=\"sm\"\n                  className=\"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700\"\n                  onClick={() => window.location.href = '/subscription/plans'}\n                >\n                  <Crown className=\"w-4 h-4 mr-2\" />\n                  Choisir une offre\n                  <ArrowRight className=\"w-4 h-4 ml-2\" />\n                </Button>\n                \n                <div className=\"flex items-center gap-2 text-sm\">\n                  <Zap className=\"w-4 h-4 text-yellow-500\" />\n                  <span className=\"font-medium\">Ã‰vÃ©nements et invitations illimitÃ©s</span>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={() => setDismissed(true)}\n            className=\"flex-shrink-0 h-8 w-8 p-0\"\n          >\n            <X className=\"w-4 h-4\" />\n          </Button>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\n// Composant simple pour afficher les statistiques d'usage\nexport function UsageStats() {\n  const [limits, setLimits] = useState<SubscriptionLimits | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchLimits();\n  }, []);\n\n  const fetchLimits = async () => {\n    try {\n      const response = await fetch('/api/subscription/info', {\n        credentials: 'include',\n      });\n      \n      if (response.ok) {\n        const data = await response.json();\n        setLimits(data);\n      }\n    } catch (error) {\n      console.error('Error fetching subscription limits:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading || !limits) {\n    return (\n      <Card>\n        <CardContent className=\"p-4\">\n          <div className=\"animate-pulse space-y-3\">\n            <div className=\"h-4 bg-gray-200 rounded w-1/3\"></div>\n            <div className=\"space-y-2\">\n              <div className=\"h-2 bg-gray-200 rounded\"></div>\n              <div className=\"h-2 bg-gray-200 rounded\"></div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  const isDiscovery = limits.subscriptionType === 'decouverte';\n  const getSubscriptionLabel = () => {\n    switch (limits.subscriptionType) {\n      case 'decouverte': return 'DÃ©couverte';\n      case 'evenementielle': return 'Ã‰vÃ©nementielle';\n      case 'pro_club': return 'Pro Club';\n      case 'pro_pme': return 'Pro PME';\n      case 'pro_entreprise': return 'Pro Entreprise';\n      default: return 'DÃ©couverte';\n    }\n  };\n\n  return (\n    <Card>\n      <CardContent className=\"p-4\">\n        <div className=\"flex items-center justify-between mb-3\">\n          <h4 className=\"font-medium text-gray-900 dark:text-white\">Utilisation</h4>\n          <Badge \n            variant={isDiscovery ? \"outline\" : \"secondary\"}\n            className={!isDiscovery ? \"bg-gradient-to-r from-blue-400 to-purple-600 text-white\" : \"\"}\n          >\n            {!isDiscovery && <Crown className=\"w-3 h-3 mr-1\" />}\n            {getSubscriptionLabel()}\n          </Badge>\n        </div>\n\n        <div className=\"space-y-4\">\n          <div>\n            <div className=\"flex items-center justify-between text-sm mb-1\">\n              <span className=\"flex items-center gap-1\">\n                <Calendar className=\"w-3 h-3\" />\n                Ã‰vÃ©nements\n              </span>\n              <span className=\"text-gray-500\">\n                {limits.eventCreatedCount} / {limits.limits.maxEvents || 'âˆ'}\n              </span>\n            </div>\n            <Progress \n              value={\n                limits.limits.maxEvents \n                  ? Math.min((limits.eventCreatedCount / limits.limits.maxEvents) * 100, 100)\n                  : 0\n              }\n              className=\"h-1.5\"\n            />\n          </div>\n\n          <div>\n            <div className=\"flex items-center justify-between text-sm mb-1\">\n              <span className=\"flex items-center gap-1\">\n                <Mail className=\"w-3 h-3\" />\n                Invitations\n              </span>\n              <span className=\"text-gray-500\">\n                {limits.invitationsSentCount} / {limits.limits.maxInvitations || 'âˆ'}\n              </span>\n            </div>\n            <Progress \n              value={\n                limits.limits.maxInvitations \n                  ? Math.min((limits.invitationsSentCount / limits.limits.maxInvitations) * 100, 100)\n                  : 0\n              }\n              className=\"h-1.5\"\n            />\n          </div>\n\n          {isDiscovery && (\n            <Button\n              size=\"sm\"\n              variant=\"outline\"\n              className=\"w-full mt-3\"\n              onClick={() => window.location.href = '/subscription/plans'}\n            >\n              <Crown className=\"w-4 h-4 mr-2\" />\n              Choisir une offre\n            </Button>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":10257},"client/src/components/subscription/SubscriptionPlan.tsx":{"content":"import React, { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '../ui/card';\nimport { Button } from '../ui/button';\nimport { Badge } from '../ui/badge';\nimport { Progress } from '../ui/progress';\nimport { Check, Crown, Star, AlertCircle, CreditCard } from 'lucide-react';\nimport { toast } from 'sonner';\n\ninterface SubscriptionInfo {\n  subscriptionType: 'decouverte' | 'evenementielle' | 'pro_club' | 'pro_pme' | 'pro_entreprise';\n  subscriptionStatus: 'active' | 'inactive' | 'cancelled' | 'past_due';\n  paymentMethod?: 'monthly' | 'annual' | 'pack_single' | 'pack_10';\n  subscriptionStartDate?: string;\n  subscriptionEndDate?: string;\n  packageRemainingEvents?: number;\n  packageExpiryDate?: string;\n  eventCreatedCount: number;\n  invitationsSentCount: number;\n  limits: {\n    maxEvents: number | null;\n    maxInvitations: number | null;\n  };\n  remainingEvents: number | null;\n  remainingInvitations: number | null;\n}\n\nexport function SubscriptionPlan() {\n  const [subscriptionInfo, setSubscriptionInfo] = useState<SubscriptionInfo | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [upgrading, setUpgrading] = useState(false);\n\n  useEffect(() => {\n    fetchSubscriptionInfo();\n  }, []);\n\n  const fetchSubscriptionInfo = async () => {\n    try {\n      const response = await fetch('/api/subscription/info', {\n        credentials: 'include',\n      });\n      \n      if (response.ok) {\n        const data = await response.json();\n        setSubscriptionInfo(data);\n      } else {\n        throw new Error('Failed to fetch subscription info');\n      }\n    } catch (error) {\n      console.error('Error fetching subscription info:', error);\n      toast.error('Erreur lors du chargement des informations d\\'abonnement');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleUpgrade = async (billingInterval: 'monthly' | 'annual') => {\n    setUpgrading(true);\n    try {\n      // Ici vous intÃ©greriez Stripe Elements pour le paiement\n      // Pour maintenant, on simule juste l'appel\n      const response = await fetch('/api/subscription/upgrade', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          billingInterval,\n          paymentMethodId: 'pm_card_visa', // Ã€ remplacer par la vraie mÃ©thode de paiement Stripe\n        }),\n      });\n\n      if (response.ok) {\n        toast.success('Abonnement mis Ã  niveau avec succÃ¨s !');\n        await fetchSubscriptionInfo();\n      } else {\n        const errorData = await response.json();\n        throw new Error(errorData.message);\n      }\n    } catch (error) {\n      console.error('Upgrade error:', error);\n      toast.error('Erreur lors de la mise Ã  niveau de l\\'abonnement');\n    } finally {\n      setUpgrading(false);\n    }\n  };\n\n  const handleCancelSubscription = async () => {\n    if (!confirm('ÃŠtes-vous sÃ»r de vouloir annuler votre abonnement ?')) {\n      return;\n    }\n\n    try {\n      const response = await fetch('/api/subscription/cancel', {\n        method: 'POST',\n        credentials: 'include',\n      });\n\n      if (response.ok) {\n        toast.success('Abonnement annulÃ©. Il restera actif jusqu\\'Ã  la fin de la pÃ©riode de facturation.');\n        await fetchSubscriptionInfo();\n      } else {\n        const errorData = await response.json();\n        throw new Error(errorData.message);\n      }\n    } catch (error) {\n      console.error('Cancel subscription error:', error);\n      toast.error('Erreur lors de l\\'annulation de l\\'abonnement');\n    }\n  };\n\n  const getProgressPercentage = (used: number, max: number | null) => {\n    if (max === null) return 0; // Unlimited\n    return Math.min((used / max) * 100, 100);\n  };\n\n  const getProgressColor = (used: number, max: number | null) => {\n    if (max === null) return 'bg-green-500'; // Unlimited\n    const percentage = (used / max) * 100;\n    if (percentage >= 90) return 'bg-red-500';\n    if (percentage >= 75) return 'bg-orange-500';\n    return 'bg-blue-500';\n  };\n\n  if (loading) {\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"animate-pulse\">\n          <div className=\"h-8 bg-gray-200 rounded w-1/3 mb-4\"></div>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div className=\"h-64 bg-gray-200 rounded\"></div>\n            <div className=\"h-64 bg-gray-200 rounded\"></div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!subscriptionInfo) {\n    return (\n      <div className=\"text-center py-8\">\n        <AlertCircle className=\"mx-auto h-12 w-12 text-gray-400\" />\n        <h3 className=\"mt-2 text-lg font-medium text-gray-900\">Erreur de chargement</h3>\n        <p className=\"mt-1 text-sm text-gray-500\">\n          Impossible de charger les informations d'abonnement.\n        </p>\n      </div>\n    );\n  }\n\n  const isDiscovery = subscriptionInfo.subscriptionType === 'decouverte';\n  const isEventPlan = subscriptionInfo.subscriptionType === 'evenementielle';\n  const isProPlan = ['pro_club', 'pro_pme', 'pro_entreprise'].includes(subscriptionInfo.subscriptionType);\n  \n  const getSubscriptionName = () => {\n    switch (subscriptionInfo.subscriptionType) {\n      case 'decouverte': return 'DÃ©couverte';\n      case 'evenementielle': return 'Ã‰vÃ©nementielle';\n      case 'pro_club': return 'Clubs & Associations';\n      case 'pro_pme': return 'PME';\n      case 'pro_entreprise': return 'Grandes Entreprises';\n      default: return 'DÃ©couverte';\n    }\n  };\n  \n  const getSubscriptionPrice = () => {\n    switch (subscriptionInfo.subscriptionType) {\n      case 'decouverte': return 'Gratuit';\n      case 'evenementielle': \n        return subscriptionInfo.paymentMethod === 'pack_10' ? '150â‚¬' : '15â‚¬';\n      case 'pro_club': return '19,99â‚¬';\n      case 'pro_pme': return '49â‚¬';\n      case 'pro_entreprise': return '99â‚¬';\n      default: return 'Gratuit';\n    }\n  };\n  \n  const getSubscriptionInterval = () => {\n    switch (subscriptionInfo.paymentMethod) {\n      case 'monthly': return '/mois';\n      case 'annual': return '/an';\n      case 'pack_single': return '';\n      case 'pack_10': return ' (pack 10)';\n      default: return '';\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900\">Abonnement</h2>\n          <p className=\"text-sm text-gray-500\">\n            GÃ©rez votre abonnement et vos fonctionnalitÃ©s\n          </p>\n        </div>\n        {!isDiscovery && (\n          <Badge variant=\"secondary\" className=\"bg-gradient-to-r from-blue-400 to-purple-600 text-white\">\n            <Crown className=\"w-4 h-4 mr-1\" />\n            {getSubscriptionName()}\n          </Badge>\n        )}\n      </div>\n\n      {/* Current Plan */}\n      <Card className={!isDiscovery ? 'border-blue-200 bg-gradient-to-br from-blue-50 to-indigo-50' : ''}>\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <CardTitle className=\"flex items-center gap-2\">\n                {isDiscovery ? (\n                  <>\n                    <Star className=\"w-5 h-5 text-blue-500\" />\n                    Plan DÃ©couverte\n                  </>\n                ) : isEventPlan ? (\n                  <>\n                    <Crown className=\"w-5 h-5 text-orange-500\" />\n                    Plan Ã‰vÃ©nementielle\n                  </>\n                ) : (\n                  <>\n                    <Crown className=\"w-5 h-5 text-blue-500\" />\n                    Plan {getSubscriptionName()}\n                  </>\n                )}\n              </CardTitle>\n              <CardDescription>\n                {isDiscovery ? (\n                  'Plan gratuit avec limitations'\n                ) : isEventPlan ? (\n                  subscriptionInfo.paymentMethod === 'pack_10' \n                    ? 'Pack 10 Ã©vÃ©nements (valable 12 mois)'\n                    : 'Pack Ã©vÃ©nement unique'\n                ) : (\n                  'Abonnement mensuel - FonctionnalitÃ©s avancÃ©es'\n                )}\n              </CardDescription>\n            </div>\n            <div className=\"text-right\">\n              <div className=\"text-2xl font-bold\">\n                {getSubscriptionPrice()}\n              </div>\n              {!isDiscovery && (\n                <div className=\"text-sm text-gray-500\">\n                  {getSubscriptionInterval()}\n                </div>\n              )}\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          {/* Usage Stats */}\n          <div className=\"space-y-4\">\n            {/* Events Usage */}\n            <div>\n              <div className=\"flex justify-between items-center mb-2\">\n                <span className=\"text-sm font-medium\">Ã‰vÃ©nements crÃ©Ã©s</span>\n                <span className=\"text-sm text-gray-500\">\n                  {subscriptionInfo.eventCreatedCount} / {subscriptionInfo.limits.maxEvents || 'âˆ'}\n                </span>\n              </div>\n              <Progress\n                value={getProgressPercentage(subscriptionInfo.eventCreatedCount, subscriptionInfo.limits.maxEvents)}\n                className=\"h-2\"\n              />\n              {subscriptionInfo.remainingEvents !== null && subscriptionInfo.remainingEvents <= 0 && (\n                <p className=\"text-xs text-red-500 mt-1\">Limite atteinte</p>\n              )}\n            </div>\n\n            {/* Invitations Usage */}\n            <div>\n              <div className=\"flex justify-between items-center mb-2\">\n                <span className=\"text-sm font-medium\">Invitations envoyÃ©es</span>\n                <span className=\"text-sm text-gray-500\">\n                  {subscriptionInfo.invitationsSentCount} / {subscriptionInfo.limits.maxInvitations || 'âˆ'}\n                </span>\n              </div>\n              <Progress\n                value={getProgressPercentage(subscriptionInfo.invitationsSentCount, subscriptionInfo.limits.maxInvitations)}\n                className=\"h-2\"\n              />\n              {subscriptionInfo.remainingInvitations !== null && subscriptionInfo.remainingInvitations <= 0 && (\n                <p className=\"text-xs text-red-500 mt-1\">Limite atteinte</p>\n              )}\n            </div>\n          </div>\n\n          {/* Features List */}\n          <div className=\"pt-4 border-t\">\n            <h4 className=\"font-medium mb-3\">FonctionnalitÃ©s incluses :</h4>\n            <div className=\"space-y-2\">\n              {isDiscovery ? (\n                <>\n                  <div className=\"flex items-center gap-2 text-sm\">\n                    <Check className=\"w-4 h-4 text-green-500\" />\n                    1 Ã©vÃ©nement maximum\n                  </div>\n                  <div className=\"flex items-center gap-2 text-sm\">\n                    <Check className=\"w-4 h-4 text-green-500\" />\n                    20 invitations maximum\n                  </div>\n                  <div className=\"flex items-center gap-2 text-sm\">\n                    <Check className=\"w-4 h-4 text-green-500\" />\n                    Support par email\n                  </div>\n                </>\n              ) : isEventPlan ? (\n                <>\n                  <div className=\"flex items-center gap-2 text-sm\">\n                    <Check className=\"w-4 h-4 text-green-500\" />\n                    {subscriptionInfo.paymentMethod === 'pack_10' ? '10 Ã©vÃ©nements' : '1 Ã©vÃ©nement complet'}\n                  </div>\n                  <div className=\"flex items-center gap-2 text-sm\">\n                    <Check className=\"w-4 h-4 text-green-500\" />\n                    Invitations illimitÃ©es\n                  </div>\n                  <div className=\"flex items-center gap-2 text-sm\">\n                    <Check className=\"w-4 h-4 text-green-500\" />\n                    Support prioritaire\n                  </div>\n                  <div className=\"flex items-center gap-2 text-sm\">\n                    <Check className=\"w-4 h-4 text-green-500\" />\n                    Messagerie intÃ©grÃ©e\n                  </div>\n                  {subscriptionInfo.paymentMethod === 'pack_10' && (\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <Check className=\"w-4 h-4 text-green-500\" />\n                      Valable 12 mois\n                    </div>\n                  )}\n                </>\n              ) : (\n                <>\n                  <div className=\"flex items-center gap-2 text-sm\">\n                    <Check className=\"w-4 h-4 text-green-500\" />\n                    Ã‰vÃ©nements illimitÃ©s\n                  </div>\n                  <div className=\"flex items-center gap-2 text-sm\">\n                    <Check className=\"w-4 h-4 text-green-500\" />\n                    Invitations illimitÃ©es\n                  </div>\n                  <div className=\"flex items-center gap-2 text-sm\">\n                    <Check className=\"w-4 h-4 text-green-500\" />\n                    Support prioritaire\n                  </div>\n                  <div className=\"flex items-center gap-2 text-sm\">\n                    <Check className=\"w-4 h-4 text-green-500\" />\n                    Statistiques avancÃ©es\n                  </div>\n                  <div className=\"flex items-center gap-2 text-sm\">\n                    <Check className=\"w-4 h-4 text-green-500\" />\n                    Branding personnalisÃ©\n                  </div>\n                  {subscriptionInfo.subscriptionType === 'pro_pme' && (\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <Check className=\"w-4 h-4 text-green-500\" />\n                      Multi-utilisateurs (5 admins)\n                    </div>\n                  )}\n                  {subscriptionInfo.subscriptionType === 'pro_entreprise' && (\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <Check className=\"w-4 h-4 text-green-500\" />\n                      Multi-utilisateurs illimitÃ©s\n                    </div>\n                  )}\n                </>\n              )}\n            </div>\n          </div>\n\n          {/* Action Buttons */}\n          <div className=\"pt-4 border-t space-y-3\">\n            {isDiscovery ? (\n              <Button\n                onClick={() => window.location.href = '/subscription/plans'}\n                disabled={upgrading}\n                className=\"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700\"\n              >\n                <CreditCard className=\"w-4 h-4 mr-2\" />\n                Choisir une offre\n              </Button>\n            ) : (\n              <div className=\"space-y-3\">\n                {/* Informations sur l'abonnement en cours */}\n                {isEventPlan && subscriptionInfo.packageRemainingEvents !== undefined && (\n                  <div className=\"text-sm bg-orange-50 p-3 rounded-lg\">\n                    <div className=\"font-medium\">Ã‰vÃ©nements restants : {subscriptionInfo.packageRemainingEvents}</div>\n                    {subscriptionInfo.packageExpiryDate && (\n                      <div className=\"text-gray-600\">\n                        Expire le : {new Date(subscriptionInfo.packageExpiryDate).toLocaleDateString('fr-FR')}\n                      </div>\n                    )}\n                  </div>\n                )}\n                \n                <div className=\"flex gap-3\">\n                  <Button\n                    variant=\"outline\"\n                    onClick={handleCancelSubscription}\n                    className=\"flex-1\"\n                  >\n                    RÃ©trograder vers DÃ©couverte\n                  </Button>\n                  <Button \n                    variant=\"outline\" \n                    className=\"flex-1\"\n                    onClick={() => window.location.href = '/subscription/plans'}\n                  >\n                    <CreditCard className=\"w-4 h-4 mr-2\" />\n                    Changer d'offre\n                  </Button>\n                </div>\n              </div>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Subscription Status */}\n      {!isDiscovery && subscriptionInfo.subscriptionStatus !== 'active' && (\n        <Card className=\"border-red-200 bg-red-50\">\n          <CardHeader>\n            <CardTitle className=\"text-red-800 flex items-center gap-2\">\n              <AlertCircle className=\"w-5 h-5\" />\n              Attention\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-red-700\">\n              {subscriptionInfo.subscriptionStatus === 'cancelled' &&\n                'Votre abonnement a Ã©tÃ© annulÃ© et se terminera Ã  la fin de la pÃ©riode de facturation.'}\n              {subscriptionInfo.subscriptionStatus === 'past_due' &&\n                'Votre paiement est en retard. Veuillez mettre Ã  jour votre mÃ©thode de paiement.'}\n              {subscriptionInfo.subscriptionStatus === 'inactive' &&\n                'Votre abonnement est inactif. Contactez le support si le problÃ¨me persiste.'}\n            </p>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n}","size_bytes":17263},"client/src/components/theme/ThemeToggle.tsx":{"content":"import React from 'react';\nimport { Moon, Sun, Monitor } from 'lucide-react';\nimport { Button } from '../ui/button';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '../ui/dropdown-menu';\nimport { useTheme } from '../../contexts/ThemeContext';\n\nexport function ThemeToggle() {\n  const { theme, setTheme, resolvedTheme } = useTheme();\n\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button variant=\"outline\" size=\"icon\" className=\"relative\">\n          {resolvedTheme === 'light' ? (\n            <Sun className=\"h-[1.2rem] w-[1.2rem] transition-all\" />\n          ) : (\n            <Moon className=\"h-[1.2rem] w-[1.2rem] transition-all\" />\n          )}\n          <span className=\"sr-only\">Changer le thÃ¨me</span>\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"end\" className=\"w-48\">\n        <DropdownMenuItem\n          onClick={() => setTheme('light')}\n          className={`flex items-center gap-2 ${theme === 'light' ? 'bg-accent' : ''}`}\n        >\n          <Sun className=\"h-4 w-4\" />\n          <span>Clair</span>\n          {theme === 'light' && <span className=\"ml-auto text-xs\">âœ“</span>}\n        </DropdownMenuItem>\n        <DropdownMenuItem\n          onClick={() => setTheme('dark')}\n          className={`flex items-center gap-2 ${theme === 'dark' ? 'bg-accent' : ''}`}\n        >\n          <Moon className=\"h-4 w-4\" />\n          <span>Sombre</span>\n          {theme === 'dark' && <span className=\"ml-auto text-xs\">âœ“</span>}\n        </DropdownMenuItem>\n        <DropdownMenuItem\n          onClick={() => setTheme('system')}\n          className={`flex items-center gap-2 ${theme === 'system' ? 'bg-accent' : ''}`}\n        >\n          <Monitor className=\"h-4 w-4\" />\n          <span>SystÃ¨me</span>\n          {theme === 'system' && <span className=\"ml-auto text-xs\">âœ“</span>}\n        </DropdownMenuItem>\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n}\n\n// Composant simple pour basculer entre clair et sombre\nexport function SimpleThemeToggle() {\n  const { resolvedTheme, setTheme } = useTheme();\n\n  return (\n    <Button\n      variant=\"outline\"\n      size=\"icon\"\n      onClick={() => setTheme(resolvedTheme === 'light' ? 'dark' : 'light')}\n      className=\"relative\"\n    >\n      {resolvedTheme === 'light' ? (\n        <Sun className=\"h-[1.2rem] w-[1.2rem] transition-all\" />\n      ) : (\n        <Moon className=\"h-[1.2rem] w-[1.2rem] transition-all\" />\n      )}\n      <span className=\"sr-only\">\n        {resolvedTheme === 'light' ? 'Passer en mode sombre' : 'Passer en mode clair'}\n      </span>\n    </Button>\n  );\n}","size_bytes":2645},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/ui/address-autocomplete.tsx":{"content":"import { useState, useEffect, useRef } from \"react\";\nimport { Input } from \"@/components/ui/input\";\nimport { addressService, AddressSuggestion } from \"@/lib/address-autocomplete\";\n\ninterface AddressAutocompleteProps {\n  value: string;\n  onChange: (value: string) => void;\n  placeholder?: string;\n  className?: string;\n  disabled?: boolean;\n}\n\nexport function AddressAutocomplete({ \n  value, \n  onChange, \n  placeholder = \"Commencez Ã  taper une adresse...\",\n  className,\n  disabled \n}: AddressAutocompleteProps) {\n  const [suggestions, setSuggestions] = useState<AddressSuggestion[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [showSuggestions, setShowSuggestions] = useState(false);\n  const [selectedIndex, setSelectedIndex] = useState(-1);\n  const inputRef = useRef<HTMLInputElement>(null);\n  const suggestionsRef = useRef<HTMLDivElement>(null);\n  const timeoutRef = useRef<NodeJS.Timeout>();\n\n  // Debounced search\n  useEffect(() => {\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n\n    if (value.length < 3) {\n      setSuggestions([]);\n      setShowSuggestions(false);\n      return;\n    }\n\n    timeoutRef.current = setTimeout(async () => {\n      setIsLoading(true);\n      try {\n        const results = await addressService.searchAddresses(value, 8);\n        setSuggestions(results);\n        setShowSuggestions(results.length > 0);\n        setSelectedIndex(-1);\n      } catch (error) {\n        console.error('Address search failed:', error);\n        setSuggestions([]);\n        setShowSuggestions(false);\n      } finally {\n        setIsLoading(false);\n      }\n    }, 300);\n\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n    };\n  }, [value]);\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    onChange(e.target.value);\n  };\n\n  const handleSuggestionClick = (suggestion: AddressSuggestion) => {\n    onChange(suggestion.label);\n    setShowSuggestions(false);\n    inputRef.current?.blur();\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (!showSuggestions) return;\n\n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault();\n        setSelectedIndex(prev => \n          prev < suggestions.length - 1 ? prev + 1 : 0\n        );\n        break;\n      \n      case 'ArrowUp':\n        e.preventDefault();\n        setSelectedIndex(prev => \n          prev > 0 ? prev - 1 : suggestions.length - 1\n        );\n        break;\n      \n      case 'Enter':\n        e.preventDefault();\n        if (selectedIndex >= 0 && selectedIndex < suggestions.length) {\n          handleSuggestionClick(suggestions[selectedIndex]);\n        }\n        break;\n      \n      case 'Escape':\n        e.preventDefault();\n        setShowSuggestions(false);\n        setSelectedIndex(-1);\n        break;\n    }\n  };\n\n  const handleInputBlur = (e: React.FocusEvent<HTMLInputElement>) => {\n    // Delay hiding suggestions to allow clicking on them\n    setTimeout(() => {\n      if (!suggestionsRef.current?.contains(document.activeElement)) {\n        setShowSuggestions(false);\n      }\n    }, 200);\n  };\n\n  return (\n    <div className=\"relative\">\n      <div className=\"relative\">\n        <Input\n          ref={inputRef}\n          value={value}\n          onChange={handleInputChange}\n          onKeyDown={handleKeyDown}\n          onBlur={handleInputBlur}\n          onFocus={() => {\n            if (suggestions.length > 0) {\n              setShowSuggestions(true);\n            }\n          }}\n          placeholder={placeholder}\n          className={className}\n          disabled={disabled}\n        />\n        \n        {isLoading && (\n          <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2\">\n            <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-primary\"></div>\n          </div>\n        )}\n      </div>\n\n      {showSuggestions && suggestions.length > 0 && (\n        <div \n          ref={suggestionsRef}\n          className=\"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-y-auto\"\n        >\n          {suggestions.map((suggestion, index) => (\n            <button\n              key={`${suggestion.citycode}-${index}`}\n              type=\"button\"\n              className={`w-full text-left px-4 py-3 hover:bg-gray-50 focus:bg-gray-50 focus:outline-none border-b border-gray-100 last:border-b-0 ${\n                index === selectedIndex ? 'bg-primary/10' : ''\n              }`}\n              onClick={() => handleSuggestionClick(suggestion)}\n              onMouseEnter={() => setSelectedIndex(index)}\n            >\n              <div className=\"flex flex-col\">\n                <span className=\"font-medium text-gray-900 text-sm\">\n                  {suggestion.label}\n                </span>\n                <span className=\"text-xs text-gray-500\">\n                  {suggestion.context}\n                </span>\n              </div>\n            </button>\n          ))}\n          \n          <div className=\"px-4 py-2 text-xs text-gray-400 bg-gray-50 border-t\">\n            ğŸ‡«ğŸ‡· DonnÃ©es adresse.data.gouv.fr\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}","size_bytes":5199},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { cn } from \"../../lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }","size_bytes":1586},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1419},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1128},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":1901},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","size_bytes":1858},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\nimport { cn } from \"../../lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}","size_bytes":7297},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":791},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { cn } from \"../../lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }","size_bytes":712},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/notification-center.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useNotifications } from \"@/contexts/NotificationContext\";\n\ninterface Notification {\n  id: string;\n  type: \"info\" | \"success\" | \"warning\" | \"error\";\n  title: string;\n  message: string;\n  read: boolean;\n  createdAt: string;\n  actionUrl?: string;\n}\n\nexport default function NotificationCenter() {\n  const [isOpen, setIsOpen] = useState(false);\n  const { isAuthenticated } = useAuth();\n  const { \n    notifications, \n    unreadCount, \n    markAsRead, \n    markAllAsRead, \n    removeNotification \n  } = useNotifications();\n\n  const getNotificationIcon = (type: string) => {\n    switch (type) {\n      case \"success\":\n        return \"fas fa-check-circle text-green-500\";\n      case \"warning\":\n        return \"fas fa-exclamation-triangle text-yellow-500\";\n      case \"error\":\n        return \"fas fa-exclamation-circle text-red-500\";\n      default:\n        return \"fas fa-info-circle text-blue-500\";\n    }\n  };\n\n  const formatTime = (date: string) => {\n    const now = new Date();\n    const notificationDate = new Date(date);\n    const diffInHours = Math.floor((now.getTime() - notificationDate.getTime()) / (1000 * 60 * 60));\n    \n    if (diffInHours < 1) {\n      return \"Il y a moins d'une heure\";\n    } else if (diffInHours < 24) {\n      return `Il y a ${diffInHours}h`;\n    } else {\n      const diffInDays = Math.floor(diffInHours / 24);\n      return `Il y a ${diffInDays}j`;\n    }\n  };\n\n  if (!isAuthenticated) {\n    return null;\n  }\n\n  return (\n    <div className=\"relative\">\n      {/* Notification Bell */}\n      <Button\n        variant=\"ghost\"\n        size=\"sm\"\n        className=\"relative p-2\"\n        onClick={() => setIsOpen(!isOpen)}\n      >\n        <i className=\"fas fa-bell text-lg\"></i>\n        {unreadCount > 0 && (\n          <Badge \n            className=\"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs bg-red-500 hover:bg-red-500\"\n          >\n            {unreadCount > 9 ? \"9+\" : unreadCount}\n          </Badge>\n        )}\n      </Button>\n\n      {/* Notification Dropdown */}\n      {isOpen && (\n        <div className=\"absolute top-full right-0 mt-2 w-96 max-w-sm z-50\">\n          <Card className=\"shadow-lg\">\n            <CardContent className=\"p-0\">\n              <div className=\"p-4 border-b border-gray-200 bg-gray-50\">\n                <div className=\"flex items-center justify-between\">\n                  <h3 className=\"font-semibold text-gray-900\">Notifications</h3>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => setIsOpen(false)}\n                  >\n                    <i className=\"fas fa-times\"></i>\n                  </Button>\n                </div>\n                {unreadCount > 0 && (\n                  <p className=\"text-sm text-gray-600 mt-1\">\n                    {unreadCount} nouvelle{unreadCount !== 1 ? 's' : ''} notification{unreadCount !== 1 ? 's' : ''}\n                  </p>\n                )}\n              </div>\n\n              <div className=\"max-h-96 overflow-y-auto\">\n                {notifications.length === 0 ? (\n                  <div className=\"p-8 text-center\">\n                    <i className=\"fas fa-bell-slash text-gray-400 text-3xl mb-3\"></i>\n                    <p className=\"text-gray-600\">Aucune notification</p>\n                  </div>\n                ) : (\n                  notifications.map((notification) => (\n                    <div\n                      key={notification.id}\n                      className={`p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer transition-colors ${\n                        !notification.read ? \"bg-blue-50\" : \"\"\n                      }`}\n                      onClick={() => {\n                        if (!notification.read) {\n                          markAsRead(notification.id);\n                        }\n                        if (notification.actionUrl) {\n                          window.location.href = notification.actionUrl;\n                        }\n                      }}\n                    >\n                      <div className=\"flex items-start space-x-3\">\n                        <div className=\"flex-shrink-0 mt-1\">\n                          <i className={getNotificationIcon(notification.type)}></i>\n                        </div>\n                        <div className=\"flex-1 min-w-0\">\n                          <div className=\"flex items-start justify-between\">\n                            <h4 className=\"font-medium text-gray-900 text-sm\">\n                              {notification.title}\n                            </h4>\n                            {!notification.read && (\n                              <div className=\"w-2 h-2 bg-blue-500 rounded-full ml-2 mt-1 flex-shrink-0\"></div>\n                            )}\n                          </div>\n                          <p className=\"text-sm text-gray-600 mt-1\">\n                            {notification.message}\n                          </p>\n                          <p className=\"text-xs text-gray-500 mt-2\">\n                            {formatTime(notification.createdAt)}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  ))\n                )}\n              </div>\n\n              {notifications.length > 0 && (\n                <div className=\"p-3 bg-gray-50 border-t border-gray-200\">\n                  <div className=\"flex gap-2\">\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      className=\"flex-1 text-blue-600 hover:text-blue-700 hover:bg-blue-50\"\n                      onClick={markAllAsRead}\n                    >\n                      Tout marquer lu\n                    </Button>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      className=\"flex-1 text-blue-600 hover:text-blue-700 hover:bg-blue-50\"\n                    >\n                      Voir toutes\n                    </Button>\n                  </div>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n      )}\n\n      {/* Overlay to close notifications when clicking outside */}\n      {isOpen && (\n        <div \n          className=\"fixed inset-0 z-40\" \n          onClick={() => setIsOpen(false)}\n        />\n      )}\n    </div>\n  );\n}","size_bytes":6699},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/ui/progress.tsx":{"content":"import * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\nimport { cn } from \"../../lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }","size_bytes":779},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 w-full border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }","size_bytes":1639},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5742},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/ui/sidebar.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { VariantProps, cva } from \"class-variance-authority\"\nimport { PanelLeft } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean\n    open?: boolean\n    onOpenChange?: (open: boolean) => void\n  }\n>(\n  (\n    {\n      defaultOpen = true,\n      open: openProp,\n      onOpenChange: setOpenProp,\n      className,\n      style,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const isMobile = useIsMobile()\n    const [openMobile, setOpenMobile] = React.useState(false)\n\n    // This is the internal state of the sidebar.\n    // We use openProp and setOpenProp for control from outside the component.\n    const [_open, _setOpen] = React.useState(defaultOpen)\n    const open = openProp ?? _open\n    const setOpen = React.useCallback(\n      (value: boolean | ((value: boolean) => boolean)) => {\n        const openState = typeof value === \"function\" ? value(open) : value\n        if (setOpenProp) {\n          setOpenProp(openState)\n        } else {\n          _setOpen(openState)\n        }\n\n        // This sets the cookie to keep the sidebar state.\n        document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n      },\n      [setOpenProp, open]\n    )\n\n    // Helper to toggle the sidebar.\n    const toggleSidebar = React.useCallback(() => {\n      return isMobile\n        ? setOpenMobile((open) => !open)\n        : setOpen((open) => !open)\n    }, [isMobile, setOpen, setOpenMobile])\n\n    // Adds a keyboard shortcut to toggle the sidebar.\n    React.useEffect(() => {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (\n          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n          (event.metaKey || event.ctrlKey)\n        ) {\n          event.preventDefault()\n          toggleSidebar()\n        }\n      }\n\n      window.addEventListener(\"keydown\", handleKeyDown)\n      return () => window.removeEventListener(\"keydown\", handleKeyDown)\n    }, [toggleSidebar])\n\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n    // This makes it easier to style the sidebar with Tailwind classes.\n    const state = open ? \"expanded\" : \"collapsed\"\n\n    const contextValue = React.useMemo<SidebarContextProps>(\n      () => ({\n        state,\n        open,\n        setOpen,\n        isMobile,\n        openMobile,\n        setOpenMobile,\n        toggleSidebar,\n      }),\n      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n    )\n\n    return (\n      <SidebarContext.Provider value={contextValue}>\n        <TooltipProvider delayDuration={0}>\n          <div\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH,\n                \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n                ...style,\n              } as React.CSSProperties\n            }\n            className={cn(\n              \"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\",\n              className\n            )}\n            ref={ref}\n            {...props}\n          >\n            {children}\n          </div>\n        </TooltipProvider>\n      </SidebarContext.Provider>\n    )\n  }\n)\nSidebarProvider.displayName = \"SidebarProvider\"\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\"\n    variant?: \"sidebar\" | \"floating\" | \"inset\"\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n  }\n>(\n  (\n    {\n      side = \"left\",\n      variant = \"sidebar\",\n      collapsible = \"offcanvas\",\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n    if (collapsible === \"none\") {\n      return (\n        <div\n          className={cn(\n            \"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\",\n            className\n          )}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      )\n    }\n\n    if (isMobile) {\n      return (\n        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n          <SheetContent\n            data-sidebar=\"sidebar\"\n            data-mobile=\"true\"\n            className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n              } as React.CSSProperties\n            }\n            side={side}\n          >\n            <SheetHeader className=\"sr-only\">\n              <SheetTitle>Sidebar</SheetTitle>\n              <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n            </SheetHeader>\n            <div className=\"flex h-full w-full flex-col\">{children}</div>\n          </SheetContent>\n        </Sheet>\n      )\n    }\n\n    return (\n      <div\n        ref={ref}\n        className=\"group peer hidden text-sidebar-foreground md:block\"\n        data-state={state}\n        data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n        data-variant={variant}\n        data-side={side}\n      >\n        {/* This is what handles the sidebar gap on desktop */}\n        <div\n          className={cn(\n            \"relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear\",\n            \"group-data-[collapsible=offcanvas]:w-0\",\n            \"group-data-[side=right]:rotate-180\",\n            variant === \"floating\" || variant === \"inset\"\n              ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\"\n          )}\n        />\n        <div\n          className={cn(\n            \"fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex\",\n            side === \"left\"\n              ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n              : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n            // Adjust the padding for floating and inset variants.\n            variant === \"floating\" || variant === \"inset\"\n              ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n            className\n          )}\n          {...props}\n        >\n          <div\n            data-sidebar=\"sidebar\"\n            className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n          >\n            {children}\n          </div>\n        </div>\n      </div>\n    )\n  }\n)\nSidebar.displayName = \"Sidebar\"\n\nconst SidebarTrigger = React.forwardRef<\n  React.ElementRef<typeof Button>,\n  React.ComponentProps<typeof Button>\n>(({ className, onClick, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      ref={ref}\n      data-sidebar=\"trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeft />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n})\nSidebarTrigger.displayName = \"SidebarTrigger\"\n\nconst SidebarRail = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\">\n>(({ className, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      ref={ref}\n      data-sidebar=\"rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex\",\n        \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarRail.displayName = \"SidebarRail\"\n\nconst SidebarInset = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"main\">\n>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex w-full flex-1 flex-col bg-background\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInset.displayName = \"SidebarInset\"\n\nconst SidebarInput = React.forwardRef<\n  React.ElementRef<typeof Input>,\n  React.ComponentProps<typeof Input>\n>(({ className, ...props }, ref) => {\n  return (\n    <Input\n      ref={ref}\n      data-sidebar=\"input\"\n      className={cn(\n        \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInput.displayName = \"SidebarInput\"\n\nconst SidebarHeader = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarHeader.displayName = \"SidebarHeader\"\n\nconst SidebarFooter = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarFooter.displayName = \"SidebarFooter\"\n\nconst SidebarSeparator = React.forwardRef<\n  React.ElementRef<typeof Separator>,\n  React.ComponentProps<typeof Separator>\n>(({ className, ...props }, ref) => {\n  return (\n    <Separator\n      ref={ref}\n      data-sidebar=\"separator\"\n      className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n      {...props}\n    />\n  )\n})\nSidebarSeparator.displayName = \"SidebarSeparator\"\n\nconst SidebarContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarContent.displayName = \"SidebarContent\"\n\nconst SidebarGroup = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarGroup.displayName = \"SidebarGroup\"\n\nconst SidebarGroupLabel = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\"\n\nconst SidebarGroupAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupAction.displayName = \"SidebarGroupAction\"\n\nconst SidebarGroupContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"group-content\"\n    className={cn(\"w-full text-sm\", className)}\n    {...props}\n  />\n))\nSidebarGroupContent.displayName = \"SidebarGroupContent\"\n\nconst SidebarMenu = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu\"\n    className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n    {...props}\n  />\n))\nSidebarMenu.displayName = \"SidebarMenu\"\n\nconst SidebarMenuItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    data-sidebar=\"menu-item\"\n    className={cn(\"group/menu-item relative\", className)}\n    {...props}\n  />\n))\nSidebarMenuItem.displayName = \"SidebarMenuItem\"\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    isActive?: boolean\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(\n  (\n    {\n      asChild = false,\n      isActive = false,\n      variant = \"default\",\n      size = \"default\",\n      tooltip,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const Comp = asChild ? Slot : \"button\"\n    const { isMobile, state } = useSidebar()\n\n    const button = (\n      <Comp\n        ref={ref}\n        data-sidebar=\"menu-button\"\n        data-size={size}\n        data-active={isActive}\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n        {...props}\n      />\n    )\n\n    if (!tooltip) {\n      return button\n    }\n\n    if (typeof tooltip === \"string\") {\n      tooltip = {\n        children: tooltip,\n      }\n    }\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\n        <TooltipContent\n          side=\"right\"\n          align=\"center\"\n          hidden={state !== \"collapsed\" || isMobile}\n          {...tooltip}\n        />\n      </Tooltip>\n    )\n  }\n)\nSidebarMenuButton.displayName = \"SidebarMenuButton\"\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    showOnHover?: boolean\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuAction.displayName = \"SidebarMenuAction\"\n\nconst SidebarMenuBadge = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"menu-badge\"\n    className={cn(\n      \"pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground\",\n      \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n      \"peer-data-[size=sm]/menu-button:top-1\",\n      \"peer-data-[size=default]/menu-button:top-1.5\",\n      \"peer-data-[size=lg]/menu-button:top-2.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\"\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[--skeleton-width] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n})\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\"\n\nconst SidebarMenuSub = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu-sub\"\n    className={cn(\n      \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuSub.displayName = \"SidebarMenuSub\"\n\nconst SidebarMenuSubItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ ...props }, ref) => <li ref={ref} {...props} />)\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\"\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean\n    size?: \"sm\" | \"md\"\n    isActive?: boolean\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\"\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":23567},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\nimport { cn } from \"../../lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }","size_bytes":1141},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\nimport { cn } from \"../../lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }","size_bytes":1885},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\nimport { cn } from \"../../lib/utils\"\n\nexport interface TextareaProps\n  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\n  ({ className, ...props }, ref) => {\n    return (\n      <textarea\n        className={cn(\n          \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }","size_bytes":774},"client/src/components/ui/theme-toggle.tsx":{"content":"import { useTheme } from \"@/contexts/ThemeContext\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n  DropdownMenuSeparator,\n} from \"@/components/ui/dropdown-menu\";\nimport { Tooltip, TooltipContent, TooltipTrigger } from \"@/components/ui/tooltip\";\n\nconst themes = [\n  {\n    value: 'light',\n    label: 'Mode clair',\n    description: 'Interface lumineuse et claire',\n    icon: 'fas fa-sun',\n    color: 'text-yellow-500',\n  },\n  {\n    value: 'dark', \n    label: 'Mode sombre',\n    description: 'Interface sombre et moderne',\n    icon: 'fas fa-moon',\n    color: 'text-blue-400',\n  },\n  {\n    value: 'system',\n    label: 'Automatique',\n    description: 'Suit les prÃ©fÃ©rences systÃ¨me',\n    icon: 'fas fa-desktop',\n    color: 'text-gray-500',\n  },\n] as const;\n\nexport function ThemeToggle() {\n  const { theme, setTheme, resolvedTheme } = useTheme();\n  \n  const currentTheme = themes.find(t => t.value === theme) || themes[0];\n\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Tooltip>\n          <TooltipTrigger asChild>\n            <Button \n              variant=\"ghost\" \n              size=\"sm\" \n              className=\"h-9 w-9 p-0 transition-all duration-200 hover:scale-110\"\n            >\n              <i className={`${currentTheme.icon} text-sm ${currentTheme.color} transition-colors duration-200`} />\n              <span className=\"sr-only\">Changer le thÃ¨me - {currentTheme.label}</span>\n            </Button>\n          </TooltipTrigger>\n          <TooltipContent>\n            <p>ThÃ¨me: {currentTheme.label}</p>\n            <p className=\"text-xs text-muted-foreground\">{currentTheme.description}</p>\n          </TooltipContent>\n        </Tooltip>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"end\" className=\"w-56\">\n        <div className=\"px-2 py-1.5\">\n          <p className=\"text-sm font-medium\">Apparence</p>\n          <p className=\"text-xs text-muted-foreground\">\n            ThÃ¨me actuel: {resolvedTheme === 'dark' ? 'Sombre' : 'Clair'}\n          </p>\n        </div>\n        <DropdownMenuSeparator />\n        {themes.map((themeOption) => (\n          <DropdownMenuItem\n            key={themeOption.value}\n            onClick={() => setTheme(themeOption.value)}\n            className=\"cursor-pointer flex flex-col items-start p-3 space-y-1\"\n          >\n            <div className=\"flex items-center w-full\">\n              <div className={`w-8 h-8 rounded-full flex items-center justify-center mr-3 transition-colors\n                ${theme === themeOption.value \n                  ? 'bg-primary/20 text-primary' \n                  : 'bg-muted text-muted-foreground hover:bg-muted/80'\n                }`}>\n                <i className={`${themeOption.icon} text-xs`} />\n              </div>\n              <div className=\"flex-1\">\n                <p className=\"font-medium text-sm\">{themeOption.label}</p>\n                <p className=\"text-xs text-muted-foreground\">{themeOption.description}</p>\n              </div>\n              {theme === themeOption.value && (\n                <i className=\"fas fa-check text-primary ml-2\" />\n              )}\n            </div>\n          </DropdownMenuItem>\n        ))}\n        <DropdownMenuSeparator />\n        <div className=\"px-2 py-1.5\">\n          <p className=\"text-xs text-muted-foreground\">\n            Le thÃ¨me sera sauvegardÃ© automatiquement\n          </p>\n        </div>\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n}","size_bytes":3521},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"client/src/components/ui/modern-theme-toggle.tsx":{"content":"import { useTheme } from \"@/contexts/ThemeContext\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Sun, Moon, Monitor, Check } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\n\nconst themes = [\n  {\n    value: 'light',\n    label: 'Clair',\n    description: 'Lumineux et Ã©nergique',\n    icon: Sun,\n    gradient: 'from-amber-400 to-orange-500',\n  },\n  {\n    value: 'dark', \n    label: 'Sombre',\n    description: 'Reposant pour les yeux',\n    icon: Moon,\n    gradient: 'from-indigo-500 to-purple-600',\n  },\n  {\n    value: 'system',\n    label: 'Automatique',\n    description: 'Suit votre systÃ¨me',\n    icon: Monitor,\n    gradient: 'from-blue-500 to-cyan-500',\n  },\n] as const;\n\nexport function ModernThemeToggle() {\n  const { theme, setTheme, resolvedTheme } = useTheme();\n  \n  const currentTheme = themes.find(t => t.value === theme) || themes[0];\n  const CurrentIcon = currentTheme.icon;\n\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button \n          variant=\"outline\" \n          size=\"icon\"\n          className={cn(\n            \"relative h-10 w-10 rounded-full\",\n            \"bg-gradient-to-br\",\n            currentTheme.gradient,\n            \"border-0 shadow-lg hover:shadow-xl\",\n            \"transition-all duration-300 ease-out\",\n            \"hover:scale-110 active:scale-95\",\n            \"group\"\n          )}\n          data-testid=\"button-theme-toggle\"\n        >\n          <CurrentIcon \n            className=\"h-5 w-5 text-white transition-transform duration-300 group-hover:rotate-12\" \n          />\n          <span className=\"sr-only\">Changer le thÃ¨me - {currentTheme.label}</span>\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent \n        align=\"end\" \n        className={cn(\n          \"w-64 p-2 backdrop-blur-xl\",\n          \"bg-white/90 dark:bg-gray-900/90\",\n          \"border border-gray-200/50 dark:border-gray-700/50\",\n          \"shadow-2xl rounded-2xl\"\n        )}\n      >\n        <div className=\"px-3 py-2 mb-2\">\n          <p className=\"text-sm font-semibold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\">\n            ThÃ¨me d'affichage\n          </p>\n          <p className=\"text-xs text-muted-foreground mt-1\">\n            Actuellement : <span className=\"font-medium\">{resolvedTheme === 'dark' ? 'Sombre' : 'Clair'}</span>\n          </p>\n        </div>\n        \n        <div className=\"space-y-1\">\n          {themes.map((themeOption) => {\n            const ThemeIcon = themeOption.icon;\n            const isActive = theme === themeOption.value;\n            \n            return (\n              <DropdownMenuItem\n                key={themeOption.value}\n                onClick={() => setTheme(themeOption.value)}\n                className={cn(\n                  \"cursor-pointer rounded-xl p-3 transition-all duration-200\",\n                  \"focus:outline-none focus:ring-2 focus:ring-primary/20\",\n                  isActive && \"bg-primary/10 dark:bg-primary/20\"\n                )}\n                data-testid={`menuitem-theme-${themeOption.value}`}\n              >\n                <div className=\"flex items-center gap-3 w-full\">\n                  <div className={cn(\n                    \"relative h-10 w-10 rounded-lg flex items-center justify-center\",\n                    \"bg-gradient-to-br transition-all duration-200\",\n                    themeOption.gradient,\n                    isActive ? \"shadow-lg scale-110\" : \"opacity-70\"\n                  )}>\n                    <ThemeIcon className=\"h-5 w-5 text-white\" />\n                  </div>\n                  \n                  <div className=\"flex-1 min-w-0\">\n                    <p className={cn(\n                      \"font-medium text-sm transition-colors\",\n                      isActive && \"text-primary\"\n                    )}>\n                      {themeOption.label}\n                    </p>\n                    <p className=\"text-xs text-muted-foreground truncate\">\n                      {themeOption.description}\n                    </p>\n                  </div>\n                  \n                  {isActive && (\n                    <div className=\"flex-shrink-0\">\n                      <div className=\"h-6 w-6 rounded-full bg-primary/20 flex items-center justify-center\">\n                        <Check className=\"h-4 w-4 text-primary\" />\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </DropdownMenuItem>\n            );\n          })}\n        </div>\n        \n        <div className=\"mt-2 px-3 py-2 rounded-lg bg-muted/50\">\n          <p className=\"text-xs text-muted-foreground leading-relaxed\">\n            ğŸ’¡ Le thÃ¨me est sauvegardÃ© automatiquement et synchronisÃ© sur tous vos appareils\n          </p>\n        </div>\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n}\n","size_bytes":4960}},"version":1}